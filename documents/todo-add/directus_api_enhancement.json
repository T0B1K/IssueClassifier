[{"labels":["enhancement"],"text":"Having something like ForeignKey.on_delete of Django could help in building more stable databases."},{"labels":["enhancement"],"text":"Just wondering why file.save returns only the actual filename .. and not all data related to the file the same way as when calling file.delete\r\n\r\nAt this moment, if I need to get more info ... I need to use a db query.\r\n\r\nThanks!"},{"labels":["enhancement"],"text":"Hi,\r\nIn case of accessing file from s3 is there any functionality of using presigned URL since my content can be viewed only by authorised user.\r\n\r\n"},{"labels":["enhancement"],"text":"It would be great if we could specify where dynamic images should be cropped if fit type is set to `crop`. Currently, the asset service always uses the `\"center\"` position, but I have a use case where a certain asset type should always be cropped at the top of the image. \r\n\r\nThe used library seems to support such a parameter (http://image.intervention.io/api/fit); but an an additional parameter on asset whitelist items is needed. This parameter could be optional and default to \"center\" as is the current behavior."},{"labels":["enhancement"],"text":"Unless I am mistaken, it is not yet possible to centralize user management on several projects.\r\n\r\nYou should be able to copy a user from one project to another, and keep a synchronization of passwords.\r\n\r\nIn addition it would be good to be able to change the project without needing to reconnect if the user exists on the destination project."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nadd a new configuration on the project file to allow change the Intervention Image Driver to imagick\r\n\r\n## What problem does this feature solve?\r\nThe Intervention Image package default using gd, but in our case we more would like to use imagick which is more powerful.\r\n\r\n## How do you think this should be implemented?\r\nIn the project config file like this:\r\n```php\r\n\"image\"=>[\r\n    \"driver\"=>\"imagick\" // \"gd\" or \"imagick\"\r\n]\r\n```\r\n## Would you be willing to work on this?\r\nNo, at the moment we just add this\r\n`        if(extension_loaded('imagick')){\r\n            Image::configure(array('driver' => 'imagick'));\r\n        }`\r\ninto AssetService and Thumbnailer "},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n## Feature Request\r\n\r\n### What problem does this feature solve?\r\nright now the `get_url` method returns the URI to directus instance, which cause the `full_url` field in file objects exposing internal path if a reverse proxy is in front of directus. \r\nLike this url (this is actually pulled from official doc): \r\n`\r\nhttp://localhost:8080/uploads/_/originals/28596128-90a0-5872-ba5e-ecb063407146.jpg\r\n`\r\nThis behaviors makes the `full_url` field both irrelevant and leak potential sensitive information. \r\n\r\n### How do you think this should be implemented?\r\na global setting would do, or even better if there're two separated prefixes for data and binaries (in this case, a CDN setup will be made easier)\r\n\r\n### Would you be willing to work on this?\r\nnot sure if I'm the best person to implement it, this feature itself seems simple but may require deeper understanding to the whole framework\r\n"},{"labels":[null,"enhancement",null],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\nCurrently it is not possible to add a User with the email address of a previously deleted User.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Go to Users\r\n2. Add a User with an email \"testuser@demo.com\"\r\n3. Delete the user again\r\n4. Add another User with the email \"testuser@demo.com\"\r\n\r\n## Expected Behavior\r\nAs per Users Dokumentation Users are only soft-deleted and it should be possible to create a new User with the same email address, that will take over the history of the previously existing user.\r\n\r\n## Actual Behavior\r\nAn error is displayed: Duplicate key \"testuser@demo.com\" for collection \"directus_users\"\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: OSX\r\n- Web Server: Apache\r\n- PHP Version: 7.3\r\n- Database: MySQL 5.7\r\n- Directus Release Version: v8.6.2\r\n- Install Method: docker\r\n"},{"labels":["enhancement"],"text":"API stopped working after disabling soft delete\r\n\r\n\r\n<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n## Steps to Reproduce\r\n1. Edit \"directus_users\" user collection \r\n2. Go to the \"Status Mapping\" section and open \"Deleted\" status \r\n3. Disable soft delete from \"Deleted\" status and then save\r\n\r\nRecorded video to reproduce the problem: https://drive.google.com/open?id=1zRINHsFm1wLl5nu8_8v3er8s4n1jAfZr\r\n\r\n## Expected Behavior\r\nThe app should work and user collection should have soft delete functionality disabled\r\n\r\n## Actual Behavior\r\nAPI and Directus backend is stopped working and getting the error \"Something is wrong with this project's server or database\"\r\n\r\n## Other Context & Screenshots\r\n\r\nError Screenshot:\r\n![image](https://user-images.githubusercontent.com/12895021/79120763-4fd0f880-7db1-11ea-8655-56619821c3ec.png)\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Windows 10\r\n- Web Server: Apache 2.4\r\n- PHP Version:  7.2.0\r\n- Database:  MySQL 8.0.12\r\n- Directus Release Version: v8.6.2\r\n- Install Method: cloned `master` branch\r\n"},{"labels":["enhancement"],"text":"We have a fileter option for file interface, and have a `accept filie types` to fileter file, can we have a filter option for all M2M, M2O, O2M interface?"},{"labels":["enhancement"],"text":"For multi-tenant applications, every time changes are made on collections, we have to create a SQL migration script by our own, and run it on each instance of directus (tenants). And sometimes, these migration scripts can create bugs because they are written by the developer instead of being generated.\r\n\r\nThat would be cool to have a migration generated, each time the user makes changes on collection fields for example. These migrations could be logged in a new table (different from directus_migrations which is made for directus updates). Or they could just be logged into a file so that the developer can pick the migrations he want from it.\r\n\r\nI'm really struggling with that right now because I'm maintining a multi-tenant app with the same data model for all users.\r\n\r\nThanks!"},{"labels":["enhancement"],"text":"Allowing to provide a locale fallback value(s) would be a great addition to avoid over-fetching.\r\n\r\nFor instance, I used it a lot to fetch content in French, and automatically fallback to English if there was no content found in French (per-record, per-field). It also has no impact on the client side source code as using HTTP headers doesn't impact the API request body itself.\r\n\r\nIt's a big benefit for ROI and helps avoid weeks of development.\r\n\r\nWithout this feature, the main locale and its fallbacks must all be queried (FR + EN) and then the client has to perform extra work to keep the most relevant.\r\n\r\nThis would benefit both REST/GraphQL apis.\r\n\r\nUsage example:\r\n```js\r\nfetch('https://directus.api/project/gql, {\r\n  method: 'post',\r\n  headers: {\r\n    'directus-locale': 'FR, DE, EN',\r\n    'Content-Type': 'application/json',\r\n  },\r\n  body: '{\"query\": \"{ robots { greeting } }\"}',\r\n})\r\n  .then(res => res.json())\r\n  .then(data => {\r\n    console.log(data);\r\n  })\r\n  .catch(function(error) {\r\n    console.log(error);\r\n  });\r\n```\r\n\r\nResources:\r\n- Similar to https://docs.graphcms.com/docs/api/content-api/#passing-a-header-flag"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\n## What problem does this feature solve?\r\nEnable to store your Directus medias in your OpenStack cloud storage (for example if you have an OVH object storage)\r\n\r\n## How do you think this should be implemented?\r\n- install by default in composer.json the https://github.com/chrisnharvey/flysystem-openstack-swift library\r\n- add a new method in /src/core/Directus/Filesystem/FilesystemFactory.php and change the ```switch``` with ```openstack``` possible value.\r\n\r\n## Would you be willing to work on this?\r\nNot now :'( I can't\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nEither the ability to upload files to different locations or the ability ACL files. It would be nice to be able to upload ACL'd attachments to things like customer profiles or ticket records. Even in the demo application the tickets collections has attachments that are globally accessible (if using asset proxying).\r\n\r\n## What problem does this feature solve?\r\n\r\nAt the moment file names are only uploaded as \"security through obscurity\", in the case of a customer profile or ticket system those attachments could be highly sensitive (pictures of PII, signed contracts, etc.). There is a very valid use case for publicly available assets in the case of content management, but for more sensitive resources either a separate upload location and/or ACL'd solutions would be ideal.\r\n\r\nTrue you could disable asset proxying but I don't think that solves the issue as there may be legitimate need for Directus Users to see that and you'd need to replicate those ACLs at that service level.\r\n\r\n## How do you think this should be implemented?\r\n\r\nA couple of thoughts:\r\nMaybe have `/uploads/` and `/downloads/` do an ACL check before proxying the asset? The \"Files\" collection would also need some tweaks, I don't think the one collection for all files approach would work for this where you'd have a mix of ACL'd vs non-ACL'd resources.\r\n\r\nGet rid of the global \"Files\" collection and have files be a standard field that can be added to any other collection and then rely on the collection ACL.\r\n\r\n## Would you be willing to work on this?\r\n\r\nI might consider contributing a small amount, but cannot to commit to driving the full feature."},{"labels":["enhancement"],"text":"At the moment I can't seem to get it to work leading me to believe it's not currently supported"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nI understand why many to many columns are not displayed with the actual values in their respective list columns. Instead the number of items related to each record is displayed.\r\nWhat I would like is to be able to sort the column, at least by the number of related items. And the same with the advanced search.\r\n\r\n## What problem does this feature solve?\r\nWhen working to relate two tables many to many, it is practical to use the bulk change functionality. Being able to select select records that have NO linked records (\"No Items\") and apply changes to them.\r\nSame reason for sorting, but another way to reach the unlinked records.\r\n\r\n## How do you think this should be implemented?\r\n- Sort: plain simple, just sort by number of linked records\r\n- Advanced Search: no linked records, X linked records\r\n"},{"labels":[null,"enhancement"],"text":"Hi there,\r\ncan anybody help me how to access \"settings\" JSON?\r\nI try to access\r\n:project/settings\r\n\r\nI've grated all permissions to admin user but it is still not accessible.\r\n\r\n\r\nThanks in advance."},{"labels":["enhancement"],"text":"I understand a lot of work is required to get GraphQL to handle granular authentication. Opening up full access to admin roles was a quick way to make GraphQL usable, but we all know the security implications.\r\n\r\nI’m wondering, how much effort would be required to make the GraphQL api read only. It seems to me it would not require granular authentication support. Maybe just have an option that disables all mutations and possibly an option to access the data without a token.\r\n\r\nThere are a lot of situations where applications don’t care who reads the data, but certainly don’t want to allow anyone to change the data."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nFor some reason (not required by the underlying SQL field definition), it is not allowed to change a field type to a yet compatible one (but that works sometime and sometime not):\r\n\r\n- Text Area to Text Input (I have a collection where it is wholly forbidden)\r\n- Radio button to Switch"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nCurrently, as written in the doc, Directus scrapes uploaded images for EXIF title, location, tags (keywords), and description.\r\n1. This is NOT what I see happening. I attach an image with a lot of EXIF metadata (including Description), and yet none is scraped.\r\n\r\n![enchanted-vkz2nztfdrrr21-07-small](https://user-images.githubusercontent.com/11460106/77208581-7eb9be80-6ad2-11ea-8563-fc1c0a525529.jpg)\r\n\r\nI also attach the metadata in the image, as output by EXIV2:\r\n[metadata.txt](https://github.com/directus/directus/files/4361900/metadata.txt)\r\n\r\n2. Now, is there a way to scrape MORE metadata, notably XMP -- which is widely used by asset management software such as **darktable** or **digikam**?\r\n\r\n## What problem does this feature solve?\r\nUse images themselves (and not XMP sidecar files) to convey information to the database, and ultimately to the Web publication (useful for copyright, captioning, etc.).\r\n\r\n## How do you think this should be implemented?\r\nBy allowing developers to surcharge the relevant interface by adding new metadata key-value pairs.\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nSometimes, a Collection begins small and ends up aggregating several tables in the MySQL database.\r\nIt is then necessary to change its name.\r\nBy fumbling within the `directus` MySQL database tables I was able to change the name of one of my collections quite easily.\r\n\r\n## What problem does this feature solve?\r\nChanges in a Collection span or use\r\n\r\n## How do you think this should be implemented?\r\n- Either by allowing the change from the interface\r\n- or by giving the developers a SQL script\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues (YOU ARE HERE)\r\n    API:  https://github.com/directus/api/issues\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nRequest that Directus gets the ability to render SQL views as a \"collection\"\r\n\r\n***Not being able to edit/add any fields in this particular \"collection\"***\r\n\r\n## What problem does this feature solve?\r\n\r\nWe would be able to join collections, not just two but as many as you'd like.\r\nBeing able to view SQL Views with directus.\r\nBeing able to sort/filter joined collections.\r\n\r\ne.g.: I have two collections users and companies and have an many to one relationship from users to companies (each User has one Company) \r\n\r\nI can create a view like this: \r\n`create view users_companies as SELECT 'users'.*, 'companies'.*\r\n    FROM 'users'\r\n    , 'companies'\r\n    WHERE 'companies'.'id' = 'users'.'company_id';`\r\n\r\nAnd now I can easily filter all the users which work at Company A and have field B.\r\nBecause in Directus this view can be treated like an table.\r\n\r\n## How do you think this should be implemented?\r\nremoving the multible occurring condition `'ST.TABLE_TYPE' => 'BASE TABLE' in MySQLShema.php` is the first step.\r\n\r\nAn additional reason why directus wont show the view, is that the SQL view has no primery key.\r\nWhich seems to be used to sort the collection. No sorting here for collections without a primary key could fix it.\r\n\r\nIn the meantime for views one should not be able to edit/add any fields. Searching, filtering or any other read operation may be allowed.\r\n\r\n## Would you be willing to work on this?\r\n\r\nIt depends."},{"labels":["enhancement"],"text":"I'm using Gatsby with Netlify pulling data from Directus.\r\n\r\nI'd like to fire a webhook whenever any collection has nay action.\r\n\r\nMight need some debouncing so that it doesn't fire hundreds of times when a big content change is being made."},{"labels":["enhancement"],"text":"First, I want to start off by mentioning how great of an application this is. Congrats!\r\n\r\nI've found issue #1462 where I think it was decided that the `auth/authenticate` should also return the user object and I think it was an awesome idea, but that endpoint doesn't return the avatar, just its ID, which is useless and forces me to make another API call, just to retrieve the avatar. Or am I missing something?"},{"labels":["enhancement",null],"text":"How to request specific thumbnail?\r\n\r\n[https://api2.konpoli.eu/api/items/banners?fields=t.image.data.thumbnails,t.main_title,t.subtitle,t.link&lang=de](https://api2.konpoli.eu/api/items/banners?fields=t.image.data.thumbnails,t.main_title,t.subtitle,t.link&lang=de)\r\n\r\nWhatever I tried I just can't get only the needed thumbnail as a response.\r\nIs there any workaround?"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nIt would be a really useful feature to handle scheduled content updates.\r\n\r\ni.e. if you have an blog post table and want schedule content for a marketing campaign with special discounts at certain times. a example could be:\r\n- ##Actual Version##\r\n   No Discount\r\n- ##Version 1## active on 25. February 2020 18:00\r\n   Disount 20%\r\n- ##Version 2## active on 26. February 2020 00:00\r\n   Discount 10%\r\n- ##Version 3## active on 01. March 2020 00:00\r\n   Discount expired\r\n\r\n## What problem does this feature solve?\r\nScheduled Content\r\n\r\n## How do you think this should be implemented?\r\nI think we could use the activity architecture to handle updates?\r\n\r\n## Would you be willing to work on this?\r\nYes\r\n"},{"labels":["enhancement",null],"text":"Hello,\r\n\r\nI see that, in GraphQL, all the collections are queryable, including the system ones (directus_*). This means, for example, that also the `directus_users` collection is queryable, and this allows to query, for example, for other users' tokens.\r\n\r\nThe fact that, in the standard configuration, the GraphQL endpoint is reachable from the admin only mitigates the issue and doesn't make it a security one, but it would be great to be able to exclude those tables from the queryable ones.\r\n\r\nI see that those tables are defined statically in the `DirectusCollectionList` class, and are merged with the user ones in `QueryType` class. Is it possible to make this merge optional and give the ability to expose the user collections only?\r\n\r\nThanks"},{"labels":[null,"enhancement",null,null],"text":"A bare-bones Directus 8 project's GraphQL output looks fine in a viewer like iGraphQL, but throws all sorts of errors during compilation when importing the data into Gatsby via the `gatsby-source-graphql` plugin, as shown here:  \r\n\r\n`Error: Interface field Directus_Node.id expected but Directus_DirectusActivity does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusFileThumbnailItem does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_Metadata does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusCollection does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusCollectionItem does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusFieldItem does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusCollectionPreset does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusField does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusFile does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusFolder does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusPermission does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusRelation does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusRevision does not provide it. ` \r\n`Interface field Directus_Node.id expected but Directus_DirectusRole does not provide it.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusSetting does not provide it.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_eq\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_neq\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_contains\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_ncontains\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_rlike\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_nrlike\" does not. ` \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_empty\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_nempty\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_null\" does not.`  \r\n`Names must match /^[_a-zA-Z][_a-zA-Z0-9]*$/ but \"2fa_secret_nnull\" does not.`  \r\n`Interface field Directus_Node.id expected but Directus_DirectusUser does not provide it.`  \r\n\r\nFor reference, in the gatsby plugin config I'm using a typeName of `Directus` and a fieldName of `directus`.\r\n\r\nHonestly, I don't know if this is a Directus issue or a Gatsby issue, although the GraphQL spec says that names shouldn't start with a number, hence all the `2fa` errors above. I suspect that Gatsby requires a particular edge - node hierarchy that the GraphQL spec doesn't require and Directus doesn't provide, but that's just a guess.\r\n\r\n"},{"labels":["enhancement"],"text":"Graphql right now is unusable in the front end as it requires admin token.\r\nHow to use it from the client side without logging as an admin?\r\nAm I missing something here?"},{"labels":["enhancement",null,null],"text":"## Issue\r\n\r\nSo the issue is that the api takes really long time to respond to even the simplest requests.\r\nI can range from ~150ms in the best cases to even almost a whole second. Basically this makes directus impossible to use in server side rendering. Is there any way to speed up calls? I have not found anything about it in the docs.\r\n\r\n## Model\r\n\r\nThe model is really simple. It is a sorted model with just 2 text fields. So nothing complicated\r\n\r\n## Pics (~700ms & ~200ms)\r\n<img width=\"960\" alt=\"Screenshot 2020-02-07 at 16 16 28\" src=\"https://user-images.githubusercontent.com/14948823/74041823-ad6a5280-49c6-11ea-9dd1-23a22600aa4c.png\">\r\n\r\n<img width=\"958\" alt=\"Screenshot 2020-02-07 at 16 16 48\" src=\"https://user-images.githubusercontent.com/14948823/74041858-bb1fd800-49c6-11ea-8bf5-137f88b03037.png\">\r\n\r\n## Versions\r\n\r\nPulled the latest image before creating the issue\r\n\r\n- directus/directus:v8-apache\r\n- mysql:5.7\r\n- Apache/2.4.38 (Debian) PHP/7.3.14\r\n"},{"labels":["enhancement",null,null],"text":"<!--\r\n\r\nHi there!\r\n\r\nThanks for taking the time to notify the community of an issue or sharing your thoughts for a new feature.\r\n\r\nPlease be as detailed as possible so others know exactly what you're talking about.\r\n\r\nFor bugs, please include:\r\n• Version of Directus\r\n• Error message (if any)\r\n• Steps to reproduce\r\n• PHP version\r\n• MySQL version\r\n• Webserver + version\r\n\r\nThanks!\r\n\r\n-->\r\n\r\nI found this code in multiple locations:\r\n\r\n```php\r\n try {\r\n            doSomething();\r\n        } catch (\\Exception $e) {\r\n            throw new SQLException($e->getMessage());\r\n        }\r\n```\r\n\r\nIMHO, it's a bad practice to re-throw an exception without doing anything useful. It's much better to let the original exception bubble up so that the stack trace in the log is full and shows the original location.\r\n\r\nhttps://stackoverflow.com/questions/5551668/what-are-the-best-practices-for-catching-and-re-throwing-exceptions\r\n"},{"labels":["enhancement"],"text":"All it does is return whether or not the current session (either cookie or token) is active and valid."},{"labels":["enhancement"],"text":"### Directus version\r\n8.2.0\r\n\r\n### Steps to reproduce\r\nPost to `/:project/users`  without `first_name` and `last_name`\r\n```\r\nPOST /:project/users\r\n\r\n{\r\n   email: test@test.com,\r\n   password: 1234Abcd!,\r\n   role: 4,\r\n   status: 'active',\r\n}\r\n```\r\n\r\n### Error message\r\nConsole error `422 (Unprocessable Entity)`\r\n```\r\n{\r\n   \"code\":4,\r\n   \"message\": \"first_name: This value should not be blank. last_name: This value should not be blank.\"\r\n}\r\n```\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nGoogle Cloud Storage as storage adapter\r\n\r\n## What problem does this feature solve?\r\n\r\nGive the option to store files on Google Cloud Storage\r\n\r\n## How do you think this should be implemented?\r\n\r\nAs I seen, there is already a pull request with this feature: https://github.com/directus/api/issues/1349\r\n\r\n## Would you be willing to work on this?\r\n\r\nI'd help but the feature it's already implemented on the mentioned pull request"},{"labels":["enhancement"],"text":"Right now, if you have 20 Collections and want all of them to trigger a webhook... you need to manually setup 60 different webhooks in settings (each permutation).\r\n\r\nI suggest that we change the schema a bit to make this easier:\r\n\r\n* `directus_webhooks.collection` -> `directus_webhooks.collections` (CSV of collections)\r\n* `directus_webhooks.action` -> `directus_webhooks.create` (boolean), `directus_webhooks.update` (boolean) and `directus_webhooks.delete` (boolean)\r\n\r\nNow you can quickly setup a global webhook (eg: Netlify), but still have all the freedom.\r\n\r\nDoes that work @bjgajjar ?"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nIt would be really helpful to have a GraphQL IDE (like GraphiQL) within the project, so the admin could explore the data schema and test the data separated from the backend. \r\n\r\n## What problem does this feature solve?\r\nThe frontend developer could use it to navigate across the data and assemble the query using the back-office.\r\n\r\n## How do you think this should be implemented?\r\nI am new to the project, so I don't know. But I hope this could be installed as a third-party extension that would add a page to the admin panel.\r\n\r\n## Would you be willing to work on this?\r\nFor sure, if I had some guidance."},{"labels":["enhancement"],"text":"With risk for duplication (#560 ) i see that the scope of what a background job should do might include tasks like batch update of larger amount of articles in a table in a non-blocking fashion. Updating 200 items (2 fields) in a test database takes a number of seconds, and blocks from accessing the UI. A typical use case here would be setting a new status, or assigning a larger number of posts to a user, or \r\nclassifying records. \r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\nCan you please add X-Total-Count header in HTTP Response for pagination?\r\n\r\n "},{"labels":["enhancement"],"text":"Not a 100% sure how we're going to tackle this, as default values are stored in MySQLs column default, and not in directus_fields. That being said, it would be very useful to support default values for many to many based interfaces."},{"labels":["enhancement"],"text":"Because I was researching Directus docs, but couldn't get it."},{"labels":[null,"enhancement"],"text":"Interesting quirk. `offset` works, but `limit` doesn't. Offset is kinda useless without limit."},{"labels":["enhancement"],"text":"The extension endpoints should be deprecated in favor of `/:project/interfaces`\r\n\r\n`/:project/interfaces` should return both global and scoped interfaces merged together"},{"labels":["enhancement"],"text":"Currently the Directus CLI isn't really usable, and I hoped this could be fixed somehow. I always need to check the documentation to find the right command syntax, and with the move to v8.x the commands are not always working I don't know why.\r\n\r\nI would suggest to build a complete CLI that stand by itself, with command / flags / args description inside the CLI. Documentation could be generated from the CLI, instead of trying to keep it up to date with the few existing function.\r\n\r\nSome kind of symfony/artisan like CLI would be really nice.\r\n\r\nThis could also be a way to include import/export utilities.\r\n\r\nThe main idea behing this is that i need to deploy directus api's but I find it difficult to work using a mix of CI and the Vue App.\r\n\r\n• Running Directus 8.3.1\r\n\r\n• Steps to reproduce : \r\nJust try to understand the CLI without the documentation on the website.\r\n"},{"labels":["enhancement"],"text":"Hi everyone,\r\n\r\nI encountered a serious issue lately and I was adviced in Slack to open a feature request here. The table directus_revisions ended up 17GB in size. So, it would be nice if we have a setting where we can choose the number of days or the last X changes on an item that we want to keep on the database. Otherwise, we risk that this table will become enormous. \r\n\r\nThank you"},{"labels":["enhancement",null,null],"text":"Hi there,\r\n\r\nI found that v8.3.1 have set the cache control for `download` endpoint  but not enable cache control on `assets` endpoint, Can we do that for `assets` endpoint?"},{"labels":["enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\n1. Create a table with a column of type \"TIMESTAMP\"\r\n2. Set default value of this newly created column to \"CURRENT_TIMESTAMP\"\r\n3. Add some data to this table\r\n4. Go to directus and try to manage this as a \"DateTime Created\" via: Directus -> Settings -> Collection & Fields -> <your_table> -> Select <timestamp_column>\r\n\r\n## Expected Behavior\r\nA timestamp column with CURRENT_TIMESTAMP as the default value should be supported without any issues.\r\n\r\n## Actual Behavior\r\nInstead directus throws an exception.\r\n\r\n## Other Context & Screenshots\r\n\r\nLog of exception:\r\n``\r\n[2019-12-24 15:20:34] api[site].ERROR: PDOException: SQLSTATE[42000]: Syntax error or access violation: 1067 Invalid default value for 'created_at' in /var/www/html/site/directus/vendor/zendframework/zend-db/src/Adapter/Driver/Pdo/Connection.php:379\r\nStack trace:\r\n#0 /var/www/html/site/directus/vendor/zendframework/zend-db/src/Adapter/Driver/Pdo/Connection.php(379): PDO->query\r\ndirectus/directus#1 /var/www/html/site/directus/vendor/zendframework/zend-db/src/Adapter/Adapter.php(205): Zend\\Db\\Adapter\\Driver\\Pdo\\Connection->execute\r\ndirectus/directus#2 /var/www/html/site/directus/src/core/Directus/Database/Schema/SchemaFactory.php(243): Zend\\Db\\Adapter\\Adapter->query\r\ndirectus/directus#3 /var/www/html/site/directus/src/core/Directus/Services/TablesService.php(1316): Directus\\Database\\Schema\\SchemaFactory->buildTable\r\ndirectus/directus#4 /var/www/html/site/directus/src/core/Directus/Services/TablesService.php(623): Directus\\Services\\TablesService->updateTableSchema\r\ndirectus/directus#5 /var/www/html/site/directus/src/endpoints/Fields.php(112): Directus\\Services\\TablesService->changeColumn\r\ndirectus/directus#6 [internal function]: Directus\\Api\\Routes\\Fields->update\r\ndirectus/directus#7 /var/www/html/site/directus/vendor/slim/slim/Slim/Handlers/Strategies/RequestResponse.php(40): call_user_func\r\ndirectus/directus#8 /var/www/html/site/directus/vendor/slim/slim/Slim/Route.php(281): Slim\\Handlers\\Strategies\\RequestResponse->__invoke\r\ndirectus/directus#9 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/AbstractRateLimitMiddleware.php(34): Slim\\Route->__invoke\r\ndirectus/directus#10 [internal function]: Directus\\Application\\Http\\Middleware\\AbstractRateLimitMiddleware->__invoke\r\ndirectus/directus#11 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#12 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#13 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#14 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/AuthenticationMiddleware.php(124): Slim\\Route->Slim\\{closure}\r\ndirectus/directus#15 [internal function]: Directus\\Application\\Http\\Middleware\\AuthenticationMiddleware->__invoke\r\ndirectus/directus#16 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#17 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#18 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#19 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/TableGatewayMiddleware.php(25): Slim\\Route->Slim\\{closure}\r\ndirectus/directus#20 [internal function]: Directus\\Application\\Http\\Middleware\\TableGatewayMiddleware->__invoke\r\ndirectus/directus#21 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#22 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#23 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#24 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/DatabaseMigrationMiddleware.php(15): Slim\\Route->Slim\\{closure}\r\ndirectus/directus#25 [internal function]: Directus\\Application\\Http\\Middleware\\DatabaseMigrationMiddleware->__invoke\r\ndirectus/directus#26 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#27 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#28 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#29 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(117): Slim\\Route->Slim\\{closure}\r\ndirectus/directus#30 /var/www/html/site/directus/vendor/slim/slim/Slim/Route.php(268): Slim\\Route->callMiddlewareStack\r\ndirectus/directus#31 /var/www/html/site/directus/vendor/slim/slim/Slim/App.php(503): Slim\\Route->run\r\ndirectus/directus#32 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/AbstractRateLimitMiddleware.php(34): Slim\\App->__invoke\r\ndirectus/directus#33 [internal function]: Directus\\Application\\Http\\Middleware\\AbstractRateLimitMiddleware->__invoke\r\ndirectus/directus#34 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#35 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#36 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#37 /var/www/html/site/directus/vendor/directus/proxy-detection/src/ProxyDetectionMiddleware.php(30): Slim\\App->Slim\\{closure}\r\ndirectus/directus#38 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/ProxyMiddleware.php(18): RKA\\Middleware\\ProxyDetectionMiddleware->__invoke\r\ndirectus/directus#39 [internal function]: Directus\\Application\\Http\\Middleware\\ProxyMiddleware->__invoke\r\ndirectus/directus#40 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#41 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#42 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#43 /var/www/html/site/directus/vendor/akrabat/ip-address-middleware/src/IpAddress.php(113): Slim\\App->Slim\\{closure}\r\ndirectus/directus#44 [internal function]: RKA\\Middleware\\IpAddress->__invoke\r\ndirectus/directus#45 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#46 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#47 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#48 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/CorsMiddleware.php(71): Slim\\App->Slim\\{closure}\r\ndirectus/directus#49 [internal function]: Directus\\Application\\Http\\Middleware\\CorsMiddleware->__invoke\r\ndirectus/directus#50 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#51 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#52 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#53 /var/www/html/site/directus/src/core/Directus/Application/Http/Middleware/ResponseCacheMiddleware.php(62): Slim\\App->Slim\\{closure}\r\ndirectus/directus#54 [internal function]: Directus\\Application\\Http\\Middleware\\ResponseCacheMiddleware->__invoke\r\ndirectus/directus#55 /var/www/html/site/directus/vendor/slim/slim/Slim/DeferredCallable.php(57): call_user_func_array\r\ndirectus/directus#56 [internal function]: Slim\\DeferredCallable->__invoke\r\ndirectus/directus#57 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(70): call_user_func\r\ndirectus/directus#58 /var/www/html/site/directus/vendor/slim/slim/Slim/MiddlewareAwareTrait.php(117): Slim\\App->Slim\\{closure}\r\ndirectus/directus#59 /var/www/html/site/directus/vendor/slim/slim/Slim/App.php(392): Slim\\App->callMiddlewareStack\r\ndirectus/directus#60 /var/www/html/site/directus/vendor/slim/slim/Slim/App.php(297): Slim\\App->process\r\ndirectus/directus#61 /var/www/html/site/directus/src/core/Directus/Application/Application.php(161): Slim\\App->run\r\ndirectus/directus#62 /var/www/html/site/directus/public/index.php(5): Directus\\Application\\Application->run [] []\r\n``\r\n\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Win10\r\n- Web Server: Apache 2.4.41\r\n- PHP Version: 7.3.13\r\n- Database: MySQL 8.0.18\r\n- Directus Release Version: v8.3.1\r\n- Install Method: cloned `master`\r\n"},{"labels":["enhancement",null],"text":"As of Version 8 thumbnail urls contain the `private_hash`.\r\nFor website SEO purposes it would be better to be able to have the original filename (`filename_disk` or `filename_download`) in the url .\r\nCan this be added back in?"},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nI feel like having to pull updates from git to the project is a bit messy and clumsy. In our case, a Directus setup exists as its own git repo, so pulling from git is not possible as an upgrade option. Directus should be a composer dependency of the project, so that an update only requires a composer update.\r\n\r\n## What problem does this feature solve?\r\nUpgrading/File organisation\r\n\r\n## How do you think this should be implemented?\r\nI think we should have a composer installer that publishes specific folders/files that need to be edited/customised but keeps the core Directus files in the vendor directory.\r\n\r\n## Would you be willing to work on this?\r\nYes. Just checking if anybody else is working on it or if it makes sense at all?"},{"labels":["enhancement"],"text":"When you're trying to fetch relational data that you don't have access to, the API will return the primary key (m2o) or nothing at all (o2m). It would be nice if the API could return some notices about fields you're trying to access that you don't have access to.\r\n\r\nIn the following example:\r\n\r\n`GET /items/articles/5?fields=id,title,author.*`\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"id\": 5,\r\n    \"title\": \"My Article\",\r\n    \"author\": 1\r\n  }\r\n}\r\n```\r\n\r\nwe're trying to read `author` relationally, but the API doesn't return it. While this is is expected and correct behavior, it isn't the most developer friendly. If you don't know that the API works this way, it's very confusing why you don't get the data you requested.\r\n\r\nI propose adding a new top level key for notices / logs / warnings of this nature:\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"id\": 5,\r\n    \"title\": \"My Article\",\r\n    \"author\": 1\r\n  },\r\n  \"notices\": [\r\n    {\r\n      \"code\": \"WAR_NO_ACCESS\",\r\n      \"message\": \"You don't have access to read `authors`\"\r\n    }\r\n  ]\r\n}\r\n```"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAdd editable item owner field. Owner field allows colabolator to access / edit items, which was not created by them, but explicitly assigned by them.\r\n\r\n## What problem does this feature solve?\r\n\r\nSharing / limiting edit access to items with external collaborators without requirement for them to create item.\r\n\r\nCurrently there is no way to limit / assign access to specific item after it was created. The functionality is similar to \"createdBy\", but this field could be editable.\r\n\r\nIn our use-case we have proposed this workflow:\r\nIntern with lowest visibility creates record (visible to him and us).\r\nAdmin creates additional records over time and needs way to share access to this records with concrete intern (other interns should not have access to this item).\r\n\r\n## How do you think this should be implemented?\r\n\r\nNew type could be added (owner) and ACL could be extended to use this new type as owner.\r\nThis would affect mostly Schema, ACL and TableGateway classes.\r\n\r\nThe proposed behaviour:\r\n- If collection does have `createdBy`, does not have `ownedBy` - behaves as now (visibility `mine` is determined by createdBy field\r\n- If collection does have  `createdBy` and  `ownedBy`\r\n  - On Record creation if `ownedBy` is empty, use creator as owner\r\n  - `ownedBy` is editable field\r\n  - Visibility `mine`  is only determined by `ownedBy` (open for discussion, could be also any of two, \r\n    but using only `ownedBy` is simpler, since current code assumes only one owner.\r\n\r\n## Would you be willing to work on this?\r\n\r\nI can implement changes and propose pull request."},{"labels":["enhancement"],"text":"Currently, we rely on rows in the database for Directus system configuration. These rows are not user editable and are required for the platform to work correctly. While it's great that everything in the API pulls from the same source of truth, updating these rows is very annoying to do, as it requires us to write database migrations in two places (on install / on update) that update the users database just to change the core Directus information.\r\n\r\nI'm proposing we move the core data out of the database and into static files (probably JSON) that we can easily modify when needed.\r\n\r\nThis should take a lot of duplicate information out of the databases, and makes sure that the DB only holds information that's specific to the user's project.\r\n\r\n## Changes that are needed to make this happen:\r\n\r\n* Whenever the API is trying to read something from a `directus_*` collection, it should read the corresponding records from the JSON file as well\r\n\r\n## Open questions\r\n\r\n* What happens if a row exists in both places? Does the one in the database overwrite the one in the JSON file? Do they get merged?\r\n* Where do we put system rows that are required yet still user editable? Like the admin / public role.\r\n\r\n## Examples\r\n\r\n```\r\n/src/system-data/\r\n├── directus_fields.json\r\n├── directus_relations.json\r\n└── directus_roles.json\r\n```\r\n\r\ndirectus_fields.json\r\n```json\r\n[\r\n  {\r\n    \"id\": 842,\r\n    \"collection\": \"directus_users\",\r\n    \"field\": \"id\",\r\n    \"type\": \"integer\",\r\n    \"interface\": \"primary-key\",\r\n    \"options\": null,\r\n    \"locked\": 1,\r\n    \"validation\": null,\r\n    \"required\": 1,\r\n    \"readonly\": 0,\r\n    \"hidden_detail\": 1,\r\n    \"hidden_browse\": 0,\r\n    \"sort\": 1,\r\n    \"width\": null,\r\n    \"group\": null,\r\n    \"note\": null,\r\n    \"translation\": null\r\n  },\r\n  {\r\n    \"id\": 843,\r\n    \"collection\": \"directus_users\",\r\n    \"field\": \"status\",\r\n    \"type\": \"status\",\r\n    \"interface\": \"status\",\r\n    \"options\": \"{\\\"status_mapping\\\":{\\\"draft\\\":{\\\"name\\\":\\\"Draft\\\",\\\"text_color\\\":\\\"white\\\",\\\"background_color\\\":\\\"light-gray\\\",\\\"listing_subdued\\\":false,\\\"listing_badge\\\":true,\\\"soft_delete\\\":false},\\\"invited\\\":{\\\"name\\\":\\\"Invited\\\",\\\"text_color\\\":\\\"white\\\",\\\"background_color\\\":\\\"light-gray\\\",\\\"listing_subdued\\\":false,\\\"listing_badge\\\":true,\\\"soft_delete\\\":false},\\\"active\\\":{\\\"name\\\":\\\"Active\\\",\\\"text_color\\\":\\\"white\\\",\\\"background_color\\\":\\\"success\\\",\\\"listing_subdued\\\":false,\\\"listing_badge\\\":false,\\\"soft_delete\\\":false},\\\"suspended\\\":{\\\"name\\\":\\\"Suspended\\\",\\\"text_color\\\":\\\"white\\\",\\\"background_color\\\":\\\"light-gray\\\",\\\"listing_subdued\\\":false,\\\"listing_badge\\\":true,\\\"soft_delete\\\":false},\\\"deleted\\\":{\\\"name\\\":\\\"Deleted\\\",\\\"text_color\\\":\\\"white\\\",\\\"background_color\\\":\\\"danger\\\",\\\"listing_subdued\\\":false,\\\"listing_badge\\\":true,\\\"soft_delete\\\":true}}}\",\r\n    \"locked\": 1,\r\n    \"validation\": null,\r\n    \"required\": 1,\r\n    \"readonly\": 0,\r\n    \"hidden_detail\": 0,\r\n    \"hidden_browse\": 0,\r\n    \"sort\": 2,\r\n    \"width\": null,\r\n    \"group\": null,\r\n    \"note\": null,\r\n    \"translation\": null\r\n  },\r\n  {\r\n    \"id\": 844,\r\n    \"collection\": \"directus_users\",\r\n    \"field\": \"first_name\",\r\n    \"type\": \"string\",\r\n    \"interface\": \"text-input\",\r\n    \"options\": \"{\\\"iconRight\\\":\\\"account_circle\\\"}\",\r\n    \"locked\": 1,\r\n    \"validation\": null,\r\n    \"required\": 1,\r\n    \"readonly\": 0,\r\n    \"hidden_detail\": 0,\r\n    \"hidden_browse\": 0,\r\n    \"sort\": 3,\r\n    \"width\": \"half\",\r\n    \"group\": null,\r\n    \"note\": null,\r\n    \"translation\": null\r\n  },\r\n  {\r\n    \"id\": 845,\r\n    \"collection\": \"directus_users\",\r\n    \"field\": \"last_name\",\r\n    \"type\": \"string\",\r\n    \"interface\": \"text-input\",\r\n    \"options\": \"{\\\"iconRight\\\":\\\"account_circle\\\"}\",\r\n    \"locked\": 1,\r\n    \"validation\": null,\r\n    \"required\": 1,\r\n    \"readonly\": 0,\r\n    \"hidden_detail\": 0,\r\n    \"hidden_browse\": 0,\r\n    \"sort\": 4,\r\n    \"width\": \"half\",\r\n    \"group\": null,\r\n    \"note\": null,\r\n    \"translation\": null\r\n  }\r\n]\r\n```"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nIt will be nice to have maintenance mode for specific project and not for the whole API.\r\n## What problem does this feature solve?\r\nThat can be a nice feature for situations when migrations happening for specific project database and so only project related endpoints and Application UI should be down, but for other projects things still should work\r\n\r\n## How do you think this should be implemented?\r\nas addition parameter for maintenance module, e.g.:\r\nphp bin/directus maintenance:on -N project_name\r\nphp bin/directus maintenance:off -N project_name\r\n\r\n## Would you be willing to work on this?\r\nNot sure if I have enough knowledge for this right now... That can be a pretty big task..."},{"labels":[null,"enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\nPOST /[project]/users\r\nbody \r\n```\r\n{\r\n    \"email\": \"email@foxmail.com\",\r\n    \"password\": \"aaa123\",\r\n    \"role\": \"5\",\r\n    \"status\": \"active\",\r\n    \"first_name\": \"sun\",\r\n    \"last_name\": \"shine\"\r\n}\r\n```\r\nThe value \"5\" of \"role\" is not a available role id in \"directus_roles\".\r\n## Expected Behavior\r\nIt should return a error.\r\n## Actual Behavior\r\nIt return a  success.\r\n## Other Context & Screenshots\r\nI cannot see this new user data on the Directus Users page.It's in the table.\r\n----\r\nThis API always notice me that \"role/first_name/last_name\" should not be blank when I just submit email and password.\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: [Desktop]\r\n- OS: [Windows 10.1803]\r\n- Web Server: [Apache 2.4.37]\r\n- PHP Version: [7.3.0]\r\n- Database: [eg: MySQL 8.0.12]\r\n- Directus Release Version: [v8.2.0]\r\n  - App Version: [eg: 7.11.0] (include if Directus Release Version <=`190927A`)\r\n  - API Version: [eg: 2.6.0] (include if Directus Release Version <=`190927A`)\r\n- Install Method: [eg: cloned `master` branch]\r\n"},{"labels":[null,"enhancement"],"text":"Currently, the API reads file into memory on upload _and_ `/assets/` download, which makes it impossible to upload files that are bigger than ~100MB* and makes opening existing thumbnails slow.\r\n\r\nWe should use Streams to read / write / serve files, instead of reading them into memory whenever we can.\r\n\r\nhttps://flysystem.thephpleague.com/docs/usage/filesystem-api/\r\nhttps://odan.github.io/2018/03/09/emitting-chunked-stream-responses-with-slim.html\r\n\r\n\\* Depending on your server's memory and max php limits"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nCreating a one to many relationship should create a foreign key in the database. There are 2 benefits of this:\r\n\r\n1. Ensure data consistency. \r\n2. Improve performance as foreign keys are indexed and will improve join query performance considerably.\r\n\r\n"},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\nMake any revision call with the `status` query parameter set to `published` on a collection that has been published and is now in draft (ie https://mysite.com/_/items/articles/2/revisions?status=published )\r\n\r\n## Expected Behavior\r\nOnly the revisions that were published show up in the response\r\n\r\n## Actual Behavior\r\nDoes not do anything, returns all the revisions regardless of status.\r\n\r\n## Other Context & Screenshots\r\n\r\nAlso tried with the `fields` query parameter on the `data` field, but no filtering is happening. In the context of a website CMS, this is quite a common scenario, as you expect to show the latest published revision of an item if it has been published in the past and is currently in draft because people are working on it\r\n\r\n"},{"labels":["enhancement"],"text":"Right now, we have a maintenance mode flag that works by having a static file called `maintenance` in the `logs` folder. We should move this into the `__api.json` config file in `./config`"},{"labels":["enhancement"],"text":"Right now we're showing the IP address as `::1`, which I assume is localhost. This looks weird and  doesn't provide much info. Let's instead save `localhost` for these local IP ranges (unless there's something more descriptive we can save).\r\n\r\nAlso, please make sure that activity is sorted by `Action On — DESC` by default. Mine seemed to be sorted by `id ASC` which is not very useful."},{"labels":["enhancement"],"text":"I created a new auth provider under \r\n\r\n/public/extensions/core/auth/\r\nor\r\n/public/extensions/custom/auth/\r\n\r\nI added the name in config.php\r\nauth.socialproviders =>  [  'azure'  => [] ] \r\n\r\nthe auth provider doesn't get listed when visiting\r\n\"_/auth/sso\"\r\n\r\nafter debugging; I managed that the issue is the Parsing of the $config file\r\n\r\nin \\src\\core\\Directus\\Config\\Schema\\Schema.php \r\n near line 140\r\nI added;\r\nnew Group('social_providers', [\r\n      .... \r\n new Group('azure?', [\r\n                        new Value('client_id', Types::STRING, ''),\r\n                        new Value('client_secret', Types::STRING, ''),\r\n                        new Value('base_url', Types::STRING, ''),\r\n                    ]),\r\n\r\nfrom that moment,  everything works.\r\nSo the Schema doesn't allow custom added auth providers.\r\nWhile this was the case before. \r\n\r\n\r\nNow my provider 'azure' placed \r\n/public/extensions/custom/auth/   -> /_/auth/sso   says   class provider azure not found\r\nplaced it under \r\n/public/extensions/core/auth/   ->   /_/auth/sso  says   all perfect  \r\n\r\nin version  7.4.0 I didn't had to edit schema.php \r\n"},{"labels":[null,"enhancement",null],"text":"# Feature Request - Where it came from?\r\n\r\nSomehow new tokens take some time to become available.\r\nMy mobile app logs the user in via `auth/authenticate` endpoint. Token is returned successfully. Then app tries to get the user data via `users/me` right after the token response. But API says `item not found` with status code 404. Then I re-called getting user after the failing attempt  and it works.\r\n\r\n## What problem does this feature solve?\r\n\r\nReturning user data with the token is the most basic and swifty way. But I do not know if you have security concerns on this."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\n## What problem does this feature solve?\r\nChrome started to log warnings if a website sets 3rd-party-cookies with version 77 which do not have the `SameSite` attribute explicitly set. Google plans to block any cookies with version 80 (february 2020) which didn't set this value explicitly. See this [Chromium blogpost](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html) for more information. Other browser vendors announced to implement similiar behavious.\r\nThe PHP session cookie, set by the Directus API, does not have the `SameSite` attribute maintained so the current behaviour would block all web applications which access any Directus API as soon as the blocking behaviour gets released by Google.\r\n\r\n## How do you think this should be implemented?\r\nPHP allows to change the default params for the session cookie, see [PHP documentation](https://www.php.net/manual/de/function.session-set-cookie-params.php). The parameter should probably be set by default, maybe some custom configuration can be added to the app too which allows to set the domain explicitly.\r\n\r\n## Would you be willing to work on this?\r\nI don't really have time for this, sorry\r\n"},{"labels":["enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n- i can create new virtual folders as expected\r\n- i am not able to set `folder` on POST submit for image upload\r\n- i can not see virtual folder in the filemanager in Admin UI\r\n\r\n... same behaving for `metadata`\r\n\r\n## Steps to Reproduce\r\n- POST an image to `api.com/_/files`\r\n\r\n```\r\n{\r\n  \"folder\": [1],\r\n  \"location\": \"sdfsdfsdf\",\r\n  \"tags\": [\"dsfsdfsd\", \"assadf\"],\r\n  \"filename\": \"asdfsddf.png\",\r\n  \"data\": \"<base-64-data>\"\r\n}\r\n```\r\n\r\nGetting 500, error code null\r\n\r\nI think its maybe missing here?\r\n https://github.com/directus/api/blob/644039f708587ed5f75f530cce93ee0cbaf1ea53/src/core/Directus/Filesystem/Files.php#L89\r\n\r\n## Expected Behavior\r\nAdd the folder ID to file\r\n\r\n## Actual Behavior\r\n\r\nIf array error message if not array is show, string stay null, array produces uncovered 500\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: [eg: Desktop, iPhone6, etc]\r\n- OS: [eg: MacOS 10.13.6, Windows 10.1803]\r\n- Web Server: [eg: Apache 2.4.37]\r\n- PHP Version: [eg: 7.2.0]\r\n- Database: [eg: MySQL 8.0.12]\r\n- Install Method: [eg: cloned `master` branch]\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nAdd possibility to filter M2M fields by field metadata (or relation array's length at least).\r\n\r\n## What problem does this feature solve?\r\n\r\nMy use case is: I want to filter out items, which does not have anything attached to M2M field - now it's not possible.\r\n\r\n## How do you think this should be implemented?\r\n\r\nThere are few possibilities:\r\n\r\n- make `empty` filter to cover case of empty M2M relation,\r\n- create new filter e.g. `length` which will check for M2M relation's length,\r\n- create new filter `meta` which will allow to filter out by relations metadata (e.g. length).\r\n\r\n## Would you be willing to work on this?\r\n\r\nMaybe, but unfortunately I have no idea what going on in Directus API codebase & I'm not sure which one of 3 solutions above should be used."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nFilter nested fields when retrieving from the API.\r\n\r\nAssume a collection author and a collection books nested like:\r\n\r\n```\r\n[\r\n   {\r\n      \"id\":1,\r\n      \"name\":\"Author 1\",\r\n      \"status\":\"published\",\r\n      \"books\":[\r\n         {\r\n            \"id\":1,\r\n            \"title\":\"Book 1\",\r\n            \"status\":\"published\"\r\n         },\r\n         {\r\n            \"id\":2,\r\n            \"title\":\"Book 2\",\r\n            \"status\":\"draft\"\r\n         }\r\n      ]\r\n   },\r\n   {\r\n      \"id\":2,\r\n      \"name\":\"Author 2\",\r\n      \"status\":\"published\",\r\n      \"books\":[\r\n         {\r\n            \"id\":3,\r\n            \"title\":\"Book 3\",\r\n            \"status\":\"draft\"\r\n         },\r\n         {\r\n            \"id\":4,\r\n            \"title\":\"Book 4\",\r\n            \"status\":\"draft\"\r\n         }\r\n      ]\r\n   }\r\n]\r\n```\r\n\r\nIn order to view a list of all (published) authors and their respective **published** books I would try a query like:\r\n\r\nitems/author/status=published&filter[books.status]=published\r\n\r\n\r\n\r\n## What problem does this feature solve?\r\n\r\nThe above query returns a list of all published authors which **have** published book which is in the case above:\r\n\r\n```\r\n[\r\n   {\r\n      \"id\":1,\r\n      \"name\":\"Author 1\",\r\n      \"status\":\"published\",\r\n      \"books\":[\r\n         {\r\n            \"id\":1,\r\n            \"title\":\"Book 1\",\r\n            \"status\":\"published\"\r\n         },\r\n         {\r\n            \"id\":2,\r\n            \"title\":\"Book 2\",\r\n            \"status\":\"draft\"\r\n         }\r\n      ]\r\n   }\r\n]\r\n``` \r\n\r\nwith the requirements above I'd rather expect the following result: \r\n\r\n\r\n```\r\n[\r\n   {\r\n      \"id\":1,\r\n      \"name\":\"Author 1\",\r\n      \"status\":\"published\",\r\n      \"books\":[\r\n         {\r\n            \"id\":1,\r\n            \"title\":\"Book 1\",\r\n            \"status\":\"published\"\r\n         }\r\n      ]\r\n   }\r\n]\r\n``` \r\n\r\n\r\n## How do you think this should be implemented?\r\n\r\nRegarding the API I propose a syntax like:\r\n\r\nfield.filter[nestedField(s)]=value\r\n\r\nin my case resulting in \r\n\r\nbooks.filter[status]=published\r\n\r\n## Would you be willing to work on this?\r\n\r\nif it makes sense I could contribute to this."},{"labels":[null,"enhancement",null],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\nThis is all happening on my local machine\r\n\r\nThe bug i'm currently facing is i can't logout using the SDK. I get a 404 not found error when trying to hit the `http://something.com/_/auth/logout` endpoint. \r\n\r\nfile `/src/core/Directus/Services/AuthService.php` looks like its missing a logout method?\r\n` public function __invoke(Application $app)\r\n    {\r\n        $app->post('/authenticate', [$this, 'authenticate']);\r\n        $app->post('/password/request', [$this, 'forgotPassword']);\r\n        $app->get('/password/reset/{token}', [$this, 'resetPassword']);\r\n        $app->post('/refresh', [$this, 'refresh']);\r\n        $app->get('/sso', [$this, 'listSsoAuthServices']);\r\n        $app->post('/sso/access_token', [$this, 'ssoAccessToken']);\r\n        $app->get('/sso/{service}', [$this, 'ssoService']);\r\n        $app->post('/sso/{service}', [$this, 'ssoAuthenticate']);\r\n        $app->get('/sso/{service}/callback', [$this, 'ssoServiceCallback']);\r\n    }`\r\n\r\nno logout endpoint has been added.\r\n\r\nif thats not the case then how do you logout using the SDK as logout & reset methods both return a 404 not found error.\r\n\r\n## Steps to Reproduce\r\n\r\n## Expected Behavior\r\n\r\nlogged out successfully with a 200 response from the endpoint \r\n\r\n## Actual Behavior\r\n404 error from server\r\n\r\n## Other Context & Screenshots\r\n\r\n![Screenshot 2019-10-19 at 15 23 37](https://user-images.githubusercontent.com/19251469/67146581-873c6d80-f284-11e9-8605-4c946cdf1250.png)\r\n\r\n## Technical Details\r\n\r\n- Device: [MacbookPro 2015]\r\n- Web Server: [Apache 2.4.33]\r\n- PHP Version: [7.2.0]\r\n- Database: [MySQL 8.0.12]\r\n- Install Method: cloned `master` branch directus suite\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nAdd support for a redis cluster. Might be worth implement as the same time as https://github.com/directus/api/issues/1345\r\n## What problem does this feature solve?\r\nAllow to have a cluster of redis\r\n## How do you think this should be implemented?\r\nChanging the line https://github.com/directus/api/blob/8980182425d3d657d7e365123207b336b9864764/src/core/Directus/Application/CoreServicesProvider.php#L995 for a `new RedisCluster`\r\n## Would you be willing to work on this?\r\nDidn't make a PR with this because I guess that might break current Redis. Don't know if you want to have a new env variable or there is another way. I don't know that much PHP."},{"labels":["enhancement"],"text":"I noticed FlySystem is used here for FileSystem abstraction. And Directus limits storage providers to S3, aliyun-oss, and local only. But there is a simple way to add Google Cloud Storage. I'm using it right now and it's working well."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nHave a environment variable for redis password\r\n\r\n## What problem does this feature solve?\r\nConnect to redis with a password\r\n\r\n## How do you think this should be implemented?\r\nCreate a variable 'password' under the pool adapter 'redis'\r\n\r\n## Would you be willing to work on this?\r\nI've just tried to do it, but since I don't have that many knowledge in php and this project I couldn't make it work."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\n## What problem does this feature solve?\r\nI have a user role \"frontend users\" which should not be able to access the directus app\r\n\r\n## How do you think this should be implemented?\r\nMaybee a checkbox in user roles to disable the app access\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nFor the new login page, we'd like to have additional fields for images we can use. Currently we have `project_name` and `project_logo`. We should add `project_icon`, `project_color`, and `project_image`.\r\n\r\n<img width=\"1552\" alt=\"image\" src=\"https://user-images.githubusercontent.com/9141017/65917347-27e5ee80-e3a5-11e9-82c2-4e96d25c39ac.png\">"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nWe require a set of functions to maintain our Directus collections across different staging environments.\r\nE.g. we have a few development Directus servers which we have full access to and a production Directus server which lives in a secure zone and which only allows access via APP and API.\r\nAll of them have their own API, APP and DB servers.\r\nWhen we roll out new content collections or modify existing content collections schemas (adding/removing fields, changing field order), we want to avoid manual changes via the UI, which would lead to inconsistent set ups across these environments.\r\n\r\nWe used to use simple bash shell scripts with json payloads and curls, but once we had to  rename fields we required more complex code (create new field based on old field, copy data, drop old field)\r\n\r\nWe are a java shop and we use [Gradle](https://gradle.org) for build automation and it therefore became the tool to script schema changes for us.\r\n\r\nThis is a request for something that we already have here:\r\nhttps://github.com/markus-mnm/directus7javatools\r\nand it is used in this example:\r\nhttps://github.com/markus-mnm/directus-demo-article-schema\r\n\r\n## What problem does this feature solve?\r\n\r\nManaging consistent Directus content collections across environments.\r\n\r\n## How do you think this should be implemented?\r\n\r\nImplement and expose a set of management functions against the Directus API to allow scripting changesets.\r\n\r\nWe use Gradle & Java, but it might not be the best suited for others, there probably is use for different implementations.\r\n\r\nMaybe this could go into a new Directus subproject like directus7 java tools.\r\n\r\n## Would you be willing to work on this?\r\n\r\nWe already have most of this here:\r\nhttps://github.com/markus-mnm/directus7javatools\r\nand it is used in this example:\r\nhttps://github.com/markus-mnm/directus-demo-article-schema\r\n\r\nSince we also are targeting release automation for this, we will add a change log to allow us to automatically apply and Directus collection schema changes to an environment.\r\n\r\nSince it is related: we use [Feign](https://github.com/OpenFeign/feign) to implement the relevant calls in our content handling pipelines, when we react to change hook calls and publish the content to HA systems. Therefore we don't require an SDK for content change handling and instead  only require a type class with all desired fields or each content collection.\r\n"},{"labels":["enhancement"],"text":"Cognito provides lots of support in connecting to many other identity providers \"Users can sign in through social identity providers such as Google, Facebook, and Amazon, and through enterprise identity providers such as Microsoft Active Directory via SAML.\"\r\n\r\nSAML and Active Directory Support will help expand Directus into larger organizations and also include AWS's SSO using Microsoft Active Directory via SAML or even AWS Single Sign-On (https://aws.amazon.com/single-sign-on/) as a connection using SAML.\r\n\r\nAmazon Cognito supports multi-factor authentication and encryption of data-at-rest and in-transit. Amazon Cognito is HIPAA eligible and PCI DSS, SOC, ISO/IEC 27001, ISO/IEC 27017, ISO/IEC 27018, and ISO 9001 compliant.\r\n\r\nCognito is affordable and possibly free for small enough organizations. Folks hosting on AWS I think it would help organizations who already have adopted Cogntio. \r\n\r\nFound a Provider for oauth2-cognito that might be able to be used. Have not tested anything but looks like it might be a pretty easy drop in. (Leverages the league/oauth2-client ) https://github.com/CakeDC/oauth2-cognito\r\n\r\nMaybe can be used here with the other providers. https://github.com/directus/api/tree/master/public/extensions/core/auth\r\n\r\n\r\n\r\n**Reference:** https://aws.amazon.com/cognito/"},{"labels":[null,"enhancement"],"text":"We have a separate ticket for Installation Requirements here: https://github.com/directus/app/issues/860\r\n\r\nBut I propose we add another way to get all your system information in one place. This would help users give us all the info we need to debug issues on an easy to _copy_ page. We'd need an API endpoint to return all of this, but it should be available in the App Settings. Below is an example of what kind of information it could include:\r\n\r\n```\r\nServer: Apache 2\r\n\r\nPHP Version: 7.2\r\n* pdo: Enabled\r\n* mysql: Enabled\r\n* cURL: Enabled\r\n* gd: Enabled\r\n* fileinfo: Enabled\r\n* mbstring: Enabled\r\n* xml: Enabled\r\n\r\nDatabase Type: MySQL\r\nDatabase Version: 5.7\r\nDatabase Connection: Success\r\n\r\nDirectus App: 7.6.1\r\nDirectus API: 2.2.0\r\nCurrent Migration: XXXXXXXXXX\r\nInstall Type: Docker\r\nMode: Development\r\nProject: _\r\nPing: 560ms\r\nOwnership: www-data\r\nRoot: /etc/www/var/directus\r\n\r\nCurrent User Role: Admin\r\n\r\nStorage: Local\r\nStorage Path: /etc/www/var/public/uploads\r\n* /logs: Writable (775)\r\n* /public/uploads: Writable (775)\r\n\r\nLogs:\r\n[print the most recent directus error logs here]\r\n```"},{"labels":["enhancement",null],"text":"Add views filter（Sort by views）\r\n\r\n## What problem does this feature solve?\r\nProject/App can track any views in a regular \"number\" field by writing/incrementing to the API. Then you can order by views in the Layouts.\r\n\r\n## How do you think this should be implemented?\r\n\r\nAdd views filter to the filter\r\n\r\n> Thank @Benhaynes for helping me translate！\r\n\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nAdd LDAP integration for authenticating users\r\n\r\n## What problem does this feature solve?\r\nWe could be able to authenticate users using our LDAP dictionnary and at the same time assign roles based on user's groups\r\n\r\n## How do you think this should be implemented?\r\nI think it should be implemented the same way the other auth extension(facebook, github, ...) are implemented, with a core auth extension. \r\n\r\nOtherwise, maybe using your SCIM Endpoints. \r\n\r\n## Would you be willing to work on this?\r\nProbably, yes. I guess I could help.\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nIntroduce a new hook `item.read.query` which will allow to modify db query based on http request params.\r\n\r\n## What problem does this feature solve?\r\nThere is already hook `item.read:before` which suppose to do something similar.\r\nFrom https://github.com/directus/api/blob/develop/src/core/Directus/Database/TableGateway/BaseTableGateway.php#L727-L732\r\n```\r\nprotected function executeSelect(Select $select)\r\n            ...\r\n            $selectState = $this->applyHooks([\r\n                'item.read:before',\r\n                'item.read.' . $selectCollectionName . ':before',\r\n            ], $selectState, [\r\n                'collection_name' => $selectCollectionName\r\n            ]);\r\n            ...\r\n```\r\nHere it is passed only `$selectState` which custom extension/hook can modify before actual sql call. Unfortunately it is not enough to build some specific filters, based on custom request params.\r\n\r\n## How do you think this should be implemented?\r\nAccording to call stack request `$params` exists at two steps above,  in `RelationalTableGateway.php`. It would be good to introduce new hook, for instance \r\n```\r\n'item.read.query',\r\n'item.read.query.' . $selectCollectionName ,\r\n```\r\nPass into the hook `$builder` and `$params`, expect to receive `$builder`, and call it before execution of\r\nhttps://github.com/directus/api/blob/develop/src/core/Directus/Database/TableGateway/RelationalTableGateway.php#L1171\r\n\r\n## Would you be willing to work on this?\r\nI would love to."},{"labels":["enhancement",null],"text":"This is the API counterpart to this App ticket: https://github.com/directus/app/issues/1342\r\n\r\nWe'll be discussing how we can improve the entire auth flow for Directus here. @rijkvanzanten will be posting more info shortly..."},{"labels":["enhancement"],"text":"## Steps to Reproduce\r\n\r\n* Development env\r\n* Create `pdfs` collection with `downloadable` file field\r\n* Add pdfs item and use these links below to embed in the `downloadable` field\r\n    * https://cdn.fileinfo.com/img/ss/lg/jpg_44.jpg\r\n    * http://www.africau.edu/images/default/sample.pdf\r\n\r\n## Expected Behavior\r\n\r\nThey should be embedded successfully\r\n\r\n## Actual Behavior\r\n\r\n`Trouble processing request. Try again after refreshing the page.`\r\n\r\n```\r\nNotice: Trying to get property of non-object in /src/core/Directus/Filesystem/Files.php on line 284\r\n```\r\n\r\n## Other Context & Screenshots\r\n\r\n[screenrecording](https://drive.google.com/file/d/1assMeLDLxWnuqk-cbABKhfj6jdQ_dW7L/view?usp=sharing)\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Win 10  10.0.18362.145\r\n- Web Server: Apache/2.4.29\r\n- PHP Version: PHP 7.1.30\r\n- Database: 10.2.26\r\n- Install Method: v2.5.0 build\r\n- Directus App: 7.10.0"},{"labels":["enhancement"],"text":"# Feature Request\r\nAdd \"required_fields\" flag to Status Mapping options\r\n\r\n## What problem does this feature solve?\r\nWhen you want to create a `draft` (status) item, right now **you still must enter all required fields before you can save**. Obviously if you're saving a draft you probably don't have all info ready yet. Required fields should only be enforced for certain status options.\r\n\r\n## How do you think this should be implemented?\r\nI propose that we add a `required_fields` (or `enforce_required`) flag to the status mapping. That would allow users to choose which status options enforce the required fields validation.\r\n\r\nThen, the new default Status Mapping config could be:\r\n```\r\n\"published\": {\r\n  \"name\": \"Published\",\r\n  \"text_color\": \"white\",\r\n  \"background_color\": \"accent\",\r\n  \"browse_badge\": false,\r\n  \"soft_delete\": false,\r\n  \"required_fields\": true\r\n},\r\n\"draft\": {\r\n  \"name\": \"Draft\",\r\n  \"text_color\": \"white\",\r\n  \"background_color\": \"blue-grey-200\",\r\n  \"browse_badge\": true,\r\n  \"soft_delete\": false,\r\n  \"required_fields\": false\r\n},\r\n\"deleted\": {\r\n  \"name\": \"Deleted\",\r\n  \"text_color\": \"white\",\r\n  \"background_color\": \"red\",\r\n  \"browse_badge\": true,\r\n  \"soft_delete\": true,\r\n  \"required_fields\": false\r\n}\r\n```\r\n\r\n## Would you be willing to work on this?\r\nOf course. Happy to help discuss/coordinate."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nHello! I would like to request a way to insert into a collection that has a lot of M2O relationships.\r\n\r\n## What problem does this feature solve?\r\n\r\nThis feature would be great for the instances when you have to insert/post a lot of data in the database.\r\nMy case is that I have an excel file which required a complex data model(see the screenshot below) and the client would like to have a way of importing the data from the excel to the database without having to insert it manually.\r\n\r\n## How do you think this should be implemented?\r\n\r\nMaybe it would be a good idea to have this as a paid separate module that only requires the parameters of the data separated by a comma for the specific collections and it inserts them as the VALUES. \r\nSomething like:\r\n\r\nCollection1 params\r\nDependent m2o Collection2 params\r\n\r\n\r\n## Would you be willing to work on this?\r\n\r\nIf I will manage to build this on my own, I'd be more than happy to provide it.\r\n\r\nI hope I didn't sound too stupid. \r\n\r\n![image](https://user-images.githubusercontent.com/35663982/64023690-2b355280-cb39-11e9-8ecb-0b248a2b7205.png)\r\n"},{"labels":[null,null,"enhancement",null],"text":"## Steps to Reproduce\r\n\r\n`artists` one-to-many with `artworks`\r\n\r\n* `artists` fields:\r\n    - o2m field, not required`\r\n    - status with publish, draft, soft delete\r\n* Add an artist item without the artworks\r\n* Update `artists` o2m field as required\r\n* Try to delete the artist created previously\r\n\r\n## Expected Behavior\r\n\r\n```\r\nError: artworks: This value should not be blank.\r\n```\r\n\r\n## Actual Behavior\r\n\r\nIt should delete the item successfully.\r\n\r\n## Other Context & Screenshots\r\n\r\n[Screenrecording](https://drive.google.com/file/d/1IH_p5X_caM8SwSn8H_gl4kzLDcPi6Klg/view?usp=sharing)\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Win 10  10.0.18362.145\r\n- Web Server: Apache/2.4.29\r\n- PHP Version: PHP 7.1.30\r\n- Database: 10.2.26\r\n- Install Method: v2.5.0+ develop branch: https://github.com/directus/api/commit/db22ae5f5db3bb7572532edf33bbd8e84d764641\r\n- Directus App: 7.10.0\r\n"},{"labels":["enhancement"],"text":"Create `GET /debug` endpoint which returns the below info.\r\n\r\n1. Server OS and version\r\n2. PHP version\r\n3. MySQL version\r\n4. PHP extension (`pdo`, `mysql`, `curl`, `gd`, `fileinfo`, `libapache2-mod-php` and `mbstring`)\r\n5. if applicable, `mod_rewrite` enable.\r\n5. `Public` directory permission\r\n6. `Log` directory permission\r\n7. `/public/uploads` directory permission\r\n8. API version\r\n9. APP version\r\n10. Max file upload size\r\n11. Browser OS (Either server will try to detect from header or App will add in additional of the server response)\r\n12. Cache driver, if Cache enable\r\n13. Storage driver\r\n14. Log path\r\n15. App environment "},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nOption to generate API Documentation for Open API/ ReDoc.\r\n\r\n## What problem does this feature solve?\r\nWhen you are creating API that can be used publicly/shared with 3rd party you want to share your API documentation with them. Currently, from what I gather, it is not possible with Directus. I think that option for generating Open API / Redoc would be great addition. Right now, as an 3rd party, it is hard to grasp the API schema.\r\n\r\n## How do you think this should be implemented?\r\nGenerate OpenAPI-compatibile JSON with API Documentation when updating database schema.\r\n\r\n## Would you be willing to work on this?\r\nIf enough details provided here so that I can contribute as first issue - sure. "},{"labels":["enhancement"],"text":"When the user logs in through `/auth/authenticate` with an invalid email address, the API returns with an error code `4` with a message of `email: This value is not a valid email address.`. \r\n\r\nAuthentication errors are all scoped in the `100` range, except for the 422 error on auth. Should we add a `0109` error code for the \"Invalid email provided\" error?\r\n\r\nRef: https://github.com/directus/app/issues/1801"},{"labels":[null,"enhancement"],"text":"The `/projects` endpoint allows you to configure a lot of the fields in the config file, except for the `settings->logger->path` variable. This combined with https://github.com/directus/api/issues/1178 results in the fact that newly created projects may or may not be able to write logs.\r\n\r\nhttps://github.com/directus/api/blob/f542f2f458825709dcb9e9ebe3ceb39e5af5350d/src/core/Directus/Util/Installation/InstallerUtils.php#L873-L939\r\n\r\nI've tagged it both a bug and a feature request, as the `/projects` endpoint is pretty useless if a newly created project can't work."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nRight now you can filter a query based on a literal value (i.e. a fixed string or number), but would be possible for Directus to compare two field values as well? Let's say you have a collection `invoices` with a field `invoiced_amount` and `paid_amount`. It would be nice if you could query all rows with `paid_amount < invoiced_amount`.\r\n\r\n## What problem does this feature solve?\r\n\r\nSee above\r\n\r\n## How do you think this should be implemented?\r\n\r\nMaybe add some sort of modifier to the filter value parameter to indicate that you want to compare to another field rather than a literal value. Perhaps an asterisk like this:\r\n```\r\nfilter[paid_amount][lt]=*invoiced_amount\r\n```\r\n\r\n## Would you be willing to work on this?\r\n\r\nMaybe. I'm to too familiar with PHP, but would be willing to take a stab at it."},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nThumbnail is not be deleted when you delete the original image.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Go to 'File Manager'\r\n2. Delete any image\r\n3. Thumbnail of that image will not be deleted.\r\n\r\n## Expected Behavior\r\nThumbnail needs to be deleted when you delete the original image.\r\n\r\n## Actual Behavior\r\nThumbnail is not be deleted on the deletion of the original image\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Windows 8.1\r\n- Web Server: Apache 2.4.33[WAMP]\r\n- PHP Version: 7.2.4\r\n- Database: MySQL 5.7.21\r\n- Install Method: Cloned `master` branch\r\n"},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\n1. Set the `local` as a storage adapter in `api.php` \r\n2. Upload file (For example `local.jpg`)\r\n3. Change the storage adapter as `s3`\r\n4. Upload file (For example `s3.jpg`)\r\n\r\n## Expected Behavior\r\n\r\n`local.jpg` should be served from the local path as the value of `directus_files.storage` says the `local`.\r\n`s3.jpg` should server from S3 path.\r\n\r\n## Actual Behavior\r\n`local.jpg` is trying to serve from s3, But the file is not available on s3, So getting `404`  error. \r\n\r\n## Other Context & Screenshots\r\n\r\nThis behavior is also applicable in vice-versa, change in adapter from `s3` to `local`\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: macOS 10.14.5\r\n- Web Server: Apache, MAMP Pro\r\n- PHP Version: 7.2.14\r\n- Database: MySQL 5.7.25\r\n- Install Method: cloned `master` branch\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nHi to all, I'm seeing that there isn't a way for query content based on language in Directus via GraphQL, I think the better way for doing this is to add `lang` filter when the content has some `translation` filed in and transform this filter work like `lang` filter like REST API.\r\n\r\nPay attention, if the field has multiple `translation` fields we cannot select a different language on the same content, but I think this behavior is what we want when we consume translated content, simply define the language a get it.\r\n\r\n## What problem does this feature solve?\r\nAllow better GraphQL query for translated content, using always the same filter as happen for REST API.\r\n\r\n## How do you think this should be implemented?\r\n\r\nAdd `lang` string filter to content when they have `translation` filed in his definition.\r\n\r\n## Would you be willing to work on this?\r\n\r\nI will try to work on this.\r\n\r\n"},{"labels":["enhancement"],"text":"It would be great to have an endpoint that will pull the latest release from Git, overwrite the correct files, and run the migrations. That way, the application can have a card in settings that truly updates the API for you.\r\n\r\nMain issue though: How to update the application.\r\n\r\nIf the application is inside the API (as is the case with the combined build), we can do the same trick for the application, and update the whole suite as whole. However, if you're hosting the application on a separate server from the API, there's no way the API can update the application automatically. "},{"labels":["enhancement"],"text":"When the API got updated but the migrations haven't been run yet, the user can face errors or other unwanted behavior in the app, as the database got outdated compared to the API version. In order to prevent this, the API should return a flag either in the `/` endpoint or in every API response so the application can handle this state by showing the user a \"API needs updating\" modal or notification.\r\n\r\n@directus/team what would be a good format for this? We currently have `meta` `data` and `error` as top level object properties in the JSON output, should we add a fourth for this? Or maybe add it into meta?\r\n\r\nAlternatively, we could return the migration information into the `/` endpoint. That way the app can check if `latest !== current` and use that instead.\r\n\r\n```\r\nGET /\r\n\r\n{\r\n    \"data\": {\r\n        \"api\": {\r\n            \"version\": \"2.2.2\",\r\n            \"database\": \"mysql\",\r\n            \"project_name\": \"Directus\",\r\n            \"project_logo\": \"\"\r\n        },\r\n        \"server\": {\r\n            \"max_upload_size\": 2097152,\r\n            \"general\": {\r\n                \"php_version\": \"7.3.7-1+ubuntu16.04.1+deb.sury.org+1\",\r\n                \"php_api\": \"fpm-fcgi\"\r\n            }\r\n        },\r\n        \"migrations\": {\r\n            \"latest\": \"201907121024_add_2fa\",\r\n            \"current\": \"201805011529_update_field\"\r\n        }\r\n    }\r\n}\r\n```"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\n## What problem does this feature solve?\r\n\r\nYou can currently limit how many items the API spits out in order to improve the performance by only getting the items you need. However, relational fields will always fetch every single item that matches. In the case of O2M and M2M fields, this can result in thousands and thousands of nested records.\r\n\r\nhttps://github.com/directus/api/issues/998\r\n\r\n## How do you think this should be implemented?\r\n\r\nCurrently, we have a `limit` parameter to set how many items we want to fetch. This is `200` by default. We also have an `offset` parameter to offset the amount of items to fetch, which enables pagination. I propose we extend `limit` and `offset` with the nested object syntax so we can set the pagination per field as well:\r\n\r\n```\r\n// current\r\n\r\n// Fetch 200 items per call, fetch items 400-600\r\n\r\nlimit=200\r\noffset=400\r\n\r\n\r\n// proposed\r\n\r\n// Fetch 200 items per call, fetch items 400-600\r\n// of subfield `images`, fetch 5 (10-15)\r\n\r\nlimit=200\r\noffset=400\r\nfields=*,images.*\r\nlimit[images]=5\r\noffset[images]=10\r\n```\r\n\r\nThe defaults for these should be the same as for the \"normal\" limit and offset parameters\r\n\r\nPotential issues:\r\n* We don't have nested `meta` objects, so there wouldn't be a way to retrieve that information for sub-collections\r\n* Might be a breaking change ⚠️ Changing the default limit will change the API output in certain cases. (when you have _a lot_ of relational records)."},{"labels":["enhancement",null],"text":"# Bug Report + Suggestion\r\n\r\nWhile working on some PRs I came across error codes all around the repository. I did try to find free error codes, yet it's so easy to mess things up by introducing duplicated errors and not keeping the docs updated with all the possible values.\r\n\r\nAs discussed in slack, one possible solution is to replace numeric error codes with string constants instead, for example:\r\n\r\n`0020` => `MISSING_STORAGE_CONFIG`\r\n\r\nAlso, having a single source of truth for those errors (a single php file defining them) would make it a lot easier to both keep docs updated and introducing new exceptions to the codebase.\r\n\r\nThis is no easy task though, and it would be a breaking change to the API"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAdd support to perform several API calls under a single MySQL transaction.\r\n\r\n## What problem does this feature solve?\r\n\r\nSometimes I need to create several item in different collections via the API in response to a user action. Often it is desired that if one of the steps fails each of the other steps performed should be undone as well. Using MySQL transactions would allow several API requests to be applied in an \"all or nothing\" sort of way.\r\n\r\n## How do you think this should be implemented?\r\n\r\nAdd endpoints to the API to manage transactions. Maybe something like this:\r\n\r\nThis would start a transaction and return a MySQL connection id that the transaction is active on:\r\n```\r\nPOST /transaction/start\r\n\r\nResponse:\r\n{\r\n  data: {connection_id: 12345}\r\n}\r\n```\r\n\r\nYou could then pass the connection id to other api calls i.e.\r\n```\r\nPOST /_/items/widgets?connection_id=12345\r\n```\r\n\r\nFinally you could commit or rollback the transaction using these:\r\n```\r\nPOST /transaction/12345/commit]\r\nPOST /transaction/12345/rollback\r\n ```\r\n\r\n## Would you be willing to work on this?\r\n\r\nMaybe. I'm not super familiar with the Directus internals, or PHP for that matter, but I would be open to taking a look.\r\n"},{"labels":[null,"enhancement",null,null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nCreate API Functional Tests\r\n\r\n## What problem does this feature solve?\r\nKnowing that the API is working as expected; more thoroughly testing the API after updates/fixes... and before releasing.\r\n\r\n## How do you think this should be implemented?\r\nTBD. @shealavington has been working on this for a while, but we need to align on exactly _how_ these tests will be structured. Here is what Shea wrote:\r\n\r\n> I've got [some tests for the Items endpoint running](https://github.com/directus/api-tests/tree/poc/wolfulus/tests). There's a few changes I'd like to make _(Such as outputting successful tests to the console)_, but I guess the first iteration is almost ready to be master-merged. Though on that note, I'm currently testing the 'Demo' directly, therefore some fail _(deletions)_ as it doesn't spawn a new instance every time haha.\r\n\r\n* *'Items' Tests:*\r\n  * *Create*: Create a single item & Create multiple items in one payload.\r\n  * *Read*: Get item, Get multiple items, Get all items _(by default should max out at 200 items)_\r\n  * *Update*: Update item, Update multiple items with the same data, Update multiple items with different data.\r\n  * *Delete*: Delete item, delete multiple items.\r\n* *Server:* Ping should Pong\r\n* *Project:* Expected keys should exist when authed, and shouldn't when not authed.\r\n\r\n# Status\r\n\r\n## Authentication\r\n\r\n* [ ] Tokens\r\n* [ ] Get Auth Token\r\n* [ ] Refresh Auth Token\r\n* [ ] Password Reset Request\r\n* [ ] Password Reset\r\n* [ ] SSO\r\n\r\n## Query Parameters\r\n\r\n* [ ] Metadata\r\n* [ ] Fields\r\n* [ ] Limit\r\n* [ ] Offset\r\n* [ ] Single\r\n* [ ] Sorting\r\n* [ ] Status\r\n* [ ] Filtering\r\n* [ ] Language\r\n* [ ] Search Query\r\n* [ ] Groups\r\n* [ ] Skip Activity Logging\r\n* [ ] Activity Comment\r\n\r\n## Items\r\n\r\n* [X] Get Item\r\n* [X] Get Multiple Items\r\n* [X] Get All Items\r\n* [X] Create Item\r\n* [X] Create Items\r\n* [X] Update Item\r\n* [X] Update Items\r\n* [X] Delete Item\r\n* [X] Delete Items\r\n* [ ] Get Item Revision\r\n* [ ] Get Item Revisions\r\n* [ ] Revert Item\r\n* [ ] Revert Items?\r\n\r\n## System\r\n\r\n* [ ] Activity\r\n* [ ] Collections\r\n* [ ] Collection Presets\r\n* [ ] Fields\r\n* [ ] Files\r\n* [ ] Folders\r\n* [ ] Permissions\r\n* [ ] Relations\r\n* [ ] Revisions\r\n* [ ] Roles\r\n* [ ] Settings\r\n* [ ] Users\r\n\r\n## Utilities\r\n\r\n* [ ] Hash String\r\n* [ ] Match Hashed String\r\n* [ ] Generate Random String\r\n\r\n## Mail\r\n\r\n* [ ] Send Email\r\n\r\n## Extensions\r\n\r\n* [ ] Get Extensions\r\n* [ ] Get Interface\r\n* [ ] Get Page\r\n* [ ] Get Custom Endpoint\r\n\r\n## Server\r\n\r\n* [ ] Information\r\n* [x] Ping\r\n\r\n## Projects\r\n\r\n* [ ] Information\r\n* [ ] Update\r\n* [ ] Create Project\r\n* [ ] Projects Auth Config\r\n* [ ] Projects CORS Config\r\n* [ ] Projects Cache Config\r\n* [ ] Projects Storage Config\r\n* [ ] Projects Mail Config\r\n* [ ] Projects Rate Limit Config\r\n\r\n## Field Types\r\n\r\n* [ ] Webhooks\r\n\r\n## Directus Objects\r\n\r\n* [ ] Activity Object\r\n* [ ] Activity Seen Object\r\n* [ ] Collection Object\r\n* [ ] Collection Preset Object\r\n* [ ] Field Object\r\n* [ ] File Object\r\n* [ ] Folder Object\r\n* [ ] Permission Object\r\n* [ ] Relation Object\r\n* [ ] Revision Object\r\n* [ ] Role Object\r\n* [ ] Setting Object\r\n* [ ] User Object\r\n* [ ] User Role Object\r\n\r\n## SCIM\r\n\r\n* [ ] Overview\r\n* [ ] Create SCIM User\r\n* [ ] Get SCIM Users\r\n* [ ] Get SCIM User\r\n* [ ] Update SCIM User\r\n* [ ] Create SCIM Group\r\n* [ ] Get SCIM Groups\r\n* [ ] Get SCIM Group\r\n* [ ] Update SCIM Group\r\n* [ ] Delete SCIM Group"},{"labels":["enhancement"],"text":"I'm not able to fetch some data with a filter on a map interface field. All rows of my collection have an interface of type `Map` (with latitude & longitude). It's just a list of places.\r\n\r\nData structure:\r\n\r\n- Collection01\r\n  - Row01\r\n    - ID\r\n    - ... other fields\r\n    - Map interface\r\n  - Row02\r\n    - ID\r\n    - ... other fields\r\n    - Map interface\r\n\r\nFor customer needs, I want to fetch all rows according a given point. For example, if my user lives in Paris, I want to show him all nearby POI and not all points.\r\n\r\nIs it possible to request collection with a filter on map interface?\r\n\r\nExample:\r\n\r\n- User location is: [48.8566, 2.3522]\r\n- API'll search for all POI based on a rectangle around him\r\n- User can see related points\r\n\r\nActually, I don't know how to make a good query with this interface.\r\n\r\nI'm trying to request with Postman and all I can do is to fetch ALL rows in `poi` collection...\r\n\r\n```bash\r\ncurl -X GET \\\r\n  http://localhost:7000/_/items/poi \\\r\n  -H 'Authorization: Bearer [TOKEN]' \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Postman-Token: 0c308605-1294-45b3-bb93-0b1df3f813b1,58860dc8-de18-411f-9a58-05c194c00640' \\\r\n  -H 'accept-encoding: gzip, deflate' \\\r\n  -H 'cache-control: no-cache'\r\n```\r\n\r\nJSON result:\r\n\r\n```json\r\n{\r\n  \"data\": [\r\n    {\r\n      \"id\": 1,\r\n      \"location\": {\r\n        \"lat\": 40.72384384060296,\r\n        \"lng\": -73.99532318115236\r\n      },\r\n      \"name\": \"New York\"\r\n    },\r\n    {\r\n      \"id\": 2,\r\n      \"location\": {\r\n        \"lat\": 43.69776051859191,\r\n        \"lng\": 7.263891398906709\r\n      },\r\n      \"name\": \"Nice\"\r\n    },\r\n    {\r\n      \"id\": 3,\r\n      \"location\": {\r\n        \"lat\": 48.83579746243093,\r\n        \"lng\": 2.3620605468750004\r\n      },\r\n      \"name\": \"Paris\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nI know how to search with some filters (`filter[name][eq]=Paris`):\r\n\r\n```\r\ncurl -X GET \\\r\n  'http://localhost:7000/_/items/poi?filter[name][eq]=Paris=,Paris' \\\r\n  -H 'Accept: */*' \\\r\n  -H 'Authorization: Bearer [TOKEN]' \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Connection: keep-alive' \\\r\n  -H 'Host: localhost:7000' \\\r\n  -H 'Postman-Token: fae0574d-2011-4b77-b874-8e7b6a3a0bd6,44328b12-c203-4139-875f-2ed2d2e7d047' \\\r\n  -H 'User-Agent: PostmanRuntime/7.13.0' \\\r\n  -H 'accept-encoding: gzip, deflate' \\\r\n  -H 'cache-control: no-cache'\r\n```\r\n\r\nJSON result:\r\n\r\n```json\r\n{\r\n  \"data\": [\r\n    {\r\n      \"id\": 3,\r\n      \"location\": {\r\n        \"lat\": 48.83579746243093,\r\n        \"lng\": 2.3620605468750004\r\n      },\r\n      \"name\": \"Paris\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nBut I don't know how to find POI where latitude >= X **or** longitude <= Y\r\n\r\nAny ideas on a good mean to do this, which is not in the documentation ?\r\nDo you know if it's just possible to do that?\r\n\r\nThanks!\r\n\r\n"},{"labels":["enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\nIf you modify an image, the preview is not updated accordingly.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Upload a image to the file browser.\r\n2. access the image via the file browser.\r\n3. edit the image, crop, rotate etc.\r\n\r\n## Expected Behavior\r\nThe preview image in the file browser (or a files interface) should show the updated, modified image.\r\n\r\n## Actual Behavior\r\nThe original image before the modification is shown.\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\nAPI Version: 2.2.1\r\nAPP Version: 7.6.1\r\n- Device: [eg: Desktop, iPhone6, etc]\r\n- OS: [eg: MacOS 10.13.6, Windows 10.1803]\r\n- Web Server: [eg: Apache 2.4.37]\r\n- PHP Version: [eg: 7.2.0]\r\n- Database: [eg: MySQL 8.0.12]\r\n- Install Method: [eg: cloned `master` branch]\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAdd sort column field to directus_collections table\r\n\r\nhttps://github.com/directus/app/issues/1813\r\n\r\n## What problem does this feature solve?\r\n\r\nplz see https://github.com/directus/app/issues/1813\r\n\r\n## How do you think this should be implemented?\r\n\r\nAdd a new column `sort` to `directus_collections`\r\n\r\n## Would you be willing to work on this?\r\nYes if approved"},{"labels":["enhancement"],"text":"I'm creating this ticket to see what others think of this idea. Would it make sense to use `Uploaded On` or `Created On` (if they exist) as the default sort column instead of Primary Key? Obviously these values can be overridden by users.\r\n\r\nThoughts?"},{"labels":["enhancement"],"text":"In v1, someone opened a PR to enable socket connections in Redis:\r\n\r\nhttps://github.com/directus/directus/pull/2153/files\r\n\r\nhttps://github.com/Radiergummi/directus/blob/0cd3f426bf8a53d694029b67bfec471e9a6613d9/api/core/Directus/Bootstrap.php#L1256-L1270\r\n\r\nThis was merged into the `develop` branch on `directus/directus`. However, if we look at the current codebase that handles Redis connections, it seems to be missing:\r\n\r\nhttps://github.com/directus/api/blob/master/src/core/Directus/Application/CoreServicesProvider.php#L956-L963\r\n\r\nI think this PR was opened _after_ the api was moved into the api repo already but before v7 was released and thus went into limbo.\r\n\r\nI know this is technically a feature request, but it was already implemented, tested, and merged so I think we should be able copy paste that original v6 implementation and re-enable socket support for Redis in v7.\r\n\r\nLets also update the Docs on this while we're at it."},{"labels":["enhancement"],"text":"Hey,\r\nit would be nice to be able to generate watermarks onto images, nothing more.\r\n\r\nHow should this work:\r\n- have a PNG file as a watermark\r\n- this watermark is set in the project settings\r\n- if the watermark is set, it gets added to all images"},{"labels":["enhancement"],"text":"# Feature Request\r\n'mine' permissions on directus_files to separate file access per user\r\n\r\n## What problem does this feature solve?\r\nI am trying to achieve full api data separation based on user accounts. That works well so far by setting access permissions to 'mine' for custom collections and non-admin users.\r\nI also want users to see 'their' files only. Using the 'mine' permission on directus-files is not supported at this stage although the \"uploaded_by\" field would allow owner tracking.\r\n\r\n## How do you think this should be implemented?\r\nUse existing \"uploaded_by\" field or create a new one like 'created_by' for collections to track the owner user id.\r\n"},{"labels":["enhancement"],"text":"Whenever you search directly in collections it doesn't work with relationships, But if you filter directly using field name it's working, I'm not sure if I'm tripping or something but I'm kinda sure the previous version had this feature\r\n \r\nAlso, there is a style artifact when a search doesn't have a result and you clear the filter the table view wildly jumps from bottom to top of the page ( I checked using latest chrome and firefox )\r\n\r\nhttps://www.loom.com/share/9c6761cbd37548bd82045b37ed54747f"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\n## What problem does this feature solve?\r\n\r\n**Without the feature**\r\n- I am calling a webhook whenever an item is created or updated\r\n- Need to know the status of the item\r\n- Status is not submitted as part of the payload though, therefore I have to make a separate API call to get it\r\n\r\n**With the new feature**\r\n- I don't need to make a duplicate call, but can submit the status straight to the webhook\r\n\r\n## How do you think this should be implemented?\r\n\r\n- probably needs to inject the status of an item here: https://github.com/directus/api/blob/master/src/core/Directus/Application/CoreServicesProvider.php#L241\r\n\r\n## Would you be willing to work on this?\r\n\r\n- sorry, my knowledge of the inner workings of the directus API is not deep enough to work on this"},{"labels":["enhancement"],"text":"if you have a preview field.\r\nand you add something through the API you get; \"this field is required\" => it shouldn't it's a generated field."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nRight now, static access tokens are assigned per user, which in turn has their permissions managed through directus_roles. What if instead of the user having this static token, the role itself has it? This would allow Directus to show a list of 'access keys' that can be used in third party software, and it means that we can specify the permissions for each key individually without having the extra nested level of the user. \r\n\r\nThis change will make directus access keys work very similarly as AWS IAM keys. You specify if it's programmatic (role) or not admin access (user) and then choose what permissions are available to this key.\r\n\r\nFlow:\r\n\r\n1. Create key\r\n2. Programmatic or Admin?\r\n[p]1. Add label (role name)\r\n[p]2. Add permissions (permissions)\r\n[p]3. Retrieve key (generated)\r\n\r\n[a]1. Create user (email / password)\r\n[a]2. Choose permissions group (role)\r\n[a]3. Retrieve key (generated)"},{"labels":[null,"enhancement"],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n- create a collection\r\n- create a new role (making things only readable to \"me\")\r\n![Screenshot 2019-05-31 at 10 34 36](https://user-images.githubusercontent.com/724844/58693062-3937d380-8390-11e9-948b-0278ce3692da.png)\r\n- create new entry as admin, and one as user with the new role\r\n\r\n## Expected Behavior\r\nwhen logged in as non-admin user, the search field should say \"1 item\"\r\n\r\n## Actual Behavior\r\nit shows \"2 items\" (also counting the item created by the admin user)\r\n![Screenshot 2019-05-31 at 10 33 49](https://user-images.githubusercontent.com/724844/58693199-8451e680-8390-11e9-9a32-15718078dcd4.png)\r\nnot sure if this is intented or not.\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\ndocker: `directus/api:latest` + `directus/app:latest`"},{"labels":[null,"enhancement",null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n## Description:\r\n\r\nInsufficient Anti-automation occurs when a web application permits an attacker to automate a process that was originally designed to be performed only in a manual fashion, i.e. by a human web user.\r\n\r\n## Business risk:\r\n\r\nOnce exploited, attackers can use an automatic tool or a simple script that performs a brute-force authentication attempts, and possible cause a legitimate user lock out.\r\n\r\n## Technical details:\r\n\r\nThe login mechanism of the application does not prevent a brute-force on login attempts and on change password function.\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\n* Implement an anti-automation mechanism such as CAPTCHA\r\nNote: do not use account locking, because of the ability to perform a DoS on user accounts.\r\n* Complementary instructions for protecting brute-forcing on users can be found in the following URL:\r\nhttp://projects.webappsec.org/w/page/13246938/Insufficient%20Anti-automation\r\nhttps://www.owasp.org/index.php/Blocking_Brute_Force_Attacks\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":[null,"enhancement",null,null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n## Description:\r\n\r\nUnauthenticated attackers can bypass the application's authentication enforcement and directly access internal components, effectively circumventing the authentication credentials validation phase.\r\n\r\n## Business risk:\r\n\r\nAn attacker can get an access to the possible sensitive files.\r\n\r\n## Technical details:\r\n\r\nForceful Browsing attacks (direct access to internal components) can be used to exploit incomplete authentication enforcement in the server-side application. The forceful browsing technique enables attackers to access internal sensitive components, without undergoing the application authentication credentials validation phase.\r\n\r\nThrough the following link it is possible to get an access to application images that should be accessible after the authentication.\r\n\r\n`https://xxxxxxxx/uploads/_/originals/photo2_fullsize.jpg`\r\n\r\n![screenshot](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.6.jpg)\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\n* As a general rule, system components should not be accessible to unauthenticated users (excluding the authentication component, which is unique, as unauthenticated access to it is a functional requirement).\r\n* The authentication enforcement mechanism should be thoroughly and comprehensively implemented in the system. The authentication validation should be performed as the first validation in each access to the system. The accessing entity should be obligated to authenticate with the system as a pre-condition to use the system’s services. After a successful authentication process, the user server-side session storage should be \"populated\" with the permissions of authorized actions.\r\n* It is recommended to use authentication enforcement mechanisms that operate globally (effectively affecting all components), instead of implementing authentication validation within each separate component. Authentication validation implementation through applicative filters or infrastructure authentication declarations is highly recommended, since it is less likely to be prone to authentication flaws resulting from human error. Furthermore, these mechanisms are easier to manage and are usually well tested and widely used.\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":[null,null,"enhancement",null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n## Description:\r\n\r\nIn Internet systems, there is sometimes a file upload mechanism, which allowing the user to upload files to share information between entities that communicate through the application. Files upload mechanism often generate direct links to download the uploaded files from the system. These mechanisms sometimes choose a name of file and store the uploaded file according to the name the chosen on the web server. A mechanism that defines file names in a sequence numbers is an insecure mechanism because it allows guessing of uploaded files more easily, thus allowing access to sensitive personal information.\r\n\r\n## Business risk:\r\n\r\nAfter exploiting this vulnerability, an attacker can easily guess links to uploaded files.\r\n\r\n## Technical details:\r\n\r\nDuring the test, it was found that the application’s upload files mechanism generates static links to uploaded files, thing that allows an attacker to get access to uploaded files that were uploaded into the system, even if were uploaded by other users.\r\n\r\n![screenshot](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.2.jpg)\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\n* Do not let users to get access to upload files that were uploaded by another users.\r\n* Image ID should be chosen by unpredictable way and one-time random token should be appended to the\r\nlink in order to prevent exact link guessing.\r\n* Implement an authorization mechanism that validate if user authorized to view or download the specific file.\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":[null,"enhancement",null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n## Description:\r\n\r\nDirectory listing provides an attacker with the complete index of all the resources located inside the directory. Some of these files could contain sensitive information or various possible attack vectors.\r\n\r\n## Business risk:\r\n\r\nDiscovering an informative about the internal technologies, components and their versions may help an attacker to perform a successful attack, since they can search and exploit known server vulnerabilities for that specific server type and version.\r\n\r\n## Technical details:\r\n\r\nThe following screenshots represent directory listing on two specific URLs:\r\n\r\n`https://xxxxxx/icons/`\r\n`https://xxxxxx/icons/small/`\r\n\r\n![screenshot](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.16.jpg)\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\n\r\n* Restrict access to a fixed location where only the client's files are stored.\r\n* Disable directory listing for all pages.\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":[null,"enhancement",null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n### Description:\r\n\r\nIn a replay attack the attacker issues requests that are identical to the ones the user has sent. The application could not distinguish the original legitimate request from the malicious identical requests and will process them again. If HTTPS encryption is in place while call sent to the REST API, then the protocol protects application from replay attacks at the network level. But it will not prevent legitimate clients from issuing the same request multiple times.\r\n\r\n### Business risk:\r\n\r\nA legitimate but malicious user can perform a successful attack against the system.\r\n\r\n### Technical details:\r\n\r\nBy sending a great number of HTTP requests to the web server it is possible in some cases to cause a Denial of Service condition to the application.\r\n\r\nThe following screenshot represent several identical requests sent by the same user in a short period of time:\r\n\r\n![screenshot](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.8.jpg)\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\nIt is recommended to implement an anti-automation mechanism such as CAPTCHA.\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":[null,"enhancement",null],"text":"# Feature Request\r\n\r\nAbout audited Directus version. \r\nIt has been cloned from suite repo.\r\nLatest commit https://github.com/directus/directus/commit/1d151a9034514e3f2ec1c80001e7c5fffdef2d4e\r\n\r\n### Description:\r\n\r\nThe file upload mechanism allows to get a direct link the uploaded file without any authentication. In addition, the upload file mechanism does not enforce any restriction file extensions or mime type check. This vulnerability allows an attacker to use it to distribute malicious / spyware / malware files etc.\r\n\r\n### Business risk:\r\n\r\nAfter exploiting this vulnerability, an attacker can upload a malicious file to the server.\r\n\r\n### Technical details:\r\n\r\nThe upload mechanism allows a malicious user to upload any file into the system. \r\n\r\nThe following link is the URL to the uploaded eicar malicious testing file.\r\n\r\n`https://xxxxxxx/uploads/_/originals/eicar.com.txt`\r\n\r\n![img1](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.3.jpg)\r\n\r\nA malicious user can use this functionality in order to upload a malicious file and to send it by a legitimate link to other victims and to attack them using their trust to the system.\r\n\r\nIt was also found that file size limitations are permit to users upload large size files (Maximum 50MB) in cases even when a size of uploaded file not required to be large as for example image for the user’s avatar.\r\n\r\n![img2](https://s3.eu-central-1.amazonaws.com/directus-security-report/4.0.3_1.jpg)\r\n\r\n## What problem does this feature solve?\r\nFixes security hole.\r\n\r\n## How do you think this should be implemented?\r\n* Do now allow any access to uploaded files without any authentication.\r\n* Restrict file extensions using whitelist approach. The file types allowed to be uploaded should be restricted to only those that are necessary for business functionality.\r\n* The application should perform filtering and content checking on any files which are uploaded to the server. Files should be thoroughly scanned and validated before being made available to other users.\r\n* Limit the file size to a reasonable maximum value in order to prevent denial of service attacks (on file space or other web application’s functions such as the image resizer).\r\n* Use a virus scanner on the server (if it is applicable). Or, if the contents of files are not confidential, a free virus scanner website can be used. In this case, file should be stored with a random name and without any extension on the server first, and after the virus checking (uploading to a free virus scanner website and getting back the result), it can be renamed to its specific name and extension.\r\n* Implement an authorization mechanism that validate if user authorized to view or download the specific file.\r\n\r\n## Would you be willing to work on this?\r\nMaybe, with help/guidance from Directus team."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nUsing the [Directus Extension Toolkit](https://github.com/directus/extension-toolkit) you're able to easily create custom extensions that can be added to Directus. However, there's no way to easily install these custom extensions into the API. You are still required to login and put the files in the correct place manually.\r\n\r\n## How do you think this should be implemented?\r\n\r\nWe should add a dedicated endpoint for creating (POST) and deleting (DELETE) extensions. I believe we might be able to extend the `/interfaces`, `/pages`, and `/layouts` endpoints with `POST` and `DELETE` methods to respectively create and remove these extensions. \r\n\r\n`POST` should only accept a single .zip file, that will be unzipped in the right location on the server for example `/public/extensions/custom/interfaces`"},{"labels":["enhancement",null],"text":"This isn't really a bug, but is causing bugs for certain installations (manual).\r\n\r\nCurrently the [schema.sql](https://github.com/directus/api/blob/master/src/schema.sql) file is out of date with the migrations. We need to re-generate this file every time the schema or data changes in the migration files.\r\n\r\nAlternatively, @rijkvanzanten has requested that a CLI endpoint for generating the file... but perhaps this is not needed if we always keep the schema file up-to-date when changing migrations?"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nAdding the possibility to filter collections with a many to many relation\r\n\r\n## What problem does this feature solve?\r\nI have a `page` collection and a `tag` collection. I would like to filter pages that have a relation with a `tag` with title values **Tag 1** AND **Tag 2** AND **Tag 3**.\r\n\r\nMy pages table:\r\n![image](https://user-images.githubusercontent.com/6450927/54278201-0866b000-4592-11e9-99c7-7df8178ac888.png)\r\nMy tags table:\r\n![image](https://user-images.githubusercontent.com/6450927/54278228-1a485300-4592-11e9-98fa-2eb61c00ccdc.png)\r\nThe many to many relational table (page_tags):\r\n![image](https://user-images.githubusercontent.com/6450927/54278283-3ea42f80-4592-11e9-8f38-ef3dca837d22.png)\r\n\r\n## How do you think this should be implemented?\r\nNo idea, but the following query is giving me the right result:\r\n```\r\nSELECT p.*\r\n  FROM page p\r\n WHERE EXISTS (SELECT NULL\r\n                 FROM page_tags tg\r\n                 JOIN tags t ON t.id = tg.tags_id\r\n                WHERE t.title IN ('Tag 1','Tag 2','Tag 3')\r\n                  AND tg.page_id = p.id\r\n             GROUP BY tg.page_id\r\n               HAVING COUNT(DISTINCT t.title) = 3)\r\n```\r\n`HAVING COUNT(DISTINCT t.title) = 3` makes sure I only get a result with ALL values:\r\n\r\n![image](https://user-images.githubusercontent.com/6450927/54279314-0fdb8880-4595-11e9-8689-fa756567407c.png)\r\n\r\nHere is my DB\r\n[somedb (1).sql.gz](https://github.com/directus/directus/files/2961413/somedb.1.sql.gz)\r\n\r\n## Would you be willing to work on this?\r\n"},{"labels":[null,"enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues (YOU ARE HERE)\r\n    API:  https://github.com/directus/api/issues\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\nLet me explain my problem:\r\n\r\nI'm running the Directus App and Directus API in two seperate clusters on Kubernetes  (using the official docker images), in between them is a API Gateway which reroutes everything related to Directus straight to the API, I've configured my API end-point as follows:\r\n\r\n`https://example.com/directus/_/`\r\n\r\nI also configured the following env/config options as follows:\r\n\r\n\r\n\r\n```\r\nSTORAGE_ROOT=https://example.com/directus/public/uploads/_/originals\r\n\r\nSTORAGE_ROOT_URL=https://example.com/directus/uploads/_/originals\r\n\r\nSTORAGE_THUMB_URL=https://example.com/directus/public/uploads/_/thumbnails\r\n```\r\n\r\n\r\n\r\nIt all seems good in the responses from the API, the URLS are pointing to the right place, but inside the app it just tries to acces the following `https://example.com/thumbnails/*` which is ofcourse wrong, it seems like it doesn't take the values into account from the api response\r\n\r\nIn the API response there is a block called thumbnails with the right paths, but the app doesn't pick it up, maybe a bug?\r\n\r\n## Steps to Reproduce\r\n\r\nSee above\r\n\r\n## Expected Behavior\r\n\r\nUsing the thumbnail urls from the data response from the API\r\n\r\n## Actual Behavior\r\n\r\nUsing wrong thumbnail urls, don't know even where they are coming from\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Windows 10 1809\r\n- Browser: Firefox latest\r\n- Directus App: Latest Docker image\r\n- Directus API: Latest Docker Image\r\n- Install Method: Docker images\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nCurrently you can only override existing templates but there is no way to define new custom templates and choose between them.\r\n\r\n## What problem does this feature solve?\r\n\r\nUsing directus api as a complete backend solution for business websites\r\n\r\n## How do you think this should be implemented?\r\n\r\nAllowing more parameters in `MailService` to detect and use defined templates in the custom path and throw error if there is no template.\r\n\r\n## Would you be willing to work on this?\r\n\r\nNot right now for time constraints in the current projects I'm working on, maybe in the future."},{"labels":["enhancement"],"text":"Currently we only have one option for many-to-many relationships (through a junction table and the `m2m` field type). I propose that we add an additional option for a relational CSV type. It would _not_ use a junction table, and instead would store an ordered CSV of foreign keys:\r\n\r\n`2,1,3,10` (or even `,2,1,3,10,` for explicit filtering with `LIKE '%,1,%'`)\r\n\r\nFor most M2M relationships (that don't have additional fields on the junction table) this will be much easier to setup (no need for a junction table at all) and to fetch data (related items are two levels deep with `*.*` instead of three `*.*.*`).\r\n\r\nI'm happy to discuss!\r\n\r\nRef: https://github.com/directus/app/issues/1625"},{"labels":["enhancement",null],"text":"# Feature Request\r\naliyun OSS\r\n\r\n## What problem does this feature solve?\r\nS3 services are not available in China.\r\nBecause Amazon does not have a server available in China\r\nFor Chinese people, we can not normally access foreign networks. If we want to access foreign networks, we need to connect VPN, which is very difficult for ordinary people. In China, people use Aliyun OSS to store files.\r\n\r\n## How do you think this should be implemented?\r\nHttps://github.com/aliyun/aliyun-oss-php-sdk/blob/master/README.md\r\n\r\n## Would you be willing to work on this?\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nWith bookmarks (aka [collection_presets](https://docs.directus.io/getting-started/concepts.html#collection-preset)) we already got a powerful way of saving filters (together with display settings) per user.\r\nIt would be great to be able to access this filtered items via the api.\r\n[This has been discussed here](https://github.com/directus/directus/issues/2255), but I moved it to a separate issue to differentiate this feature from my OAS request.\r\n\r\n## What problem does this feature solve?\r\n\r\nFor some use cases you just need a pre-filtered list in your client.\r\nThis would be like a GUI for custom endpoints, for fast creation and access.\r\n\r\n### Example\r\n\r\nLet's assume I want to develop an App natively for Android and iOS.\r\nVia Directus I want to manage data that is being displayed. Let's say podcast items and podcast series, to group multiple items.\r\n\r\nIn the app I want to display the podcast series, but only the ones that have one or more items in it.\r\nMy idea is to be able to create a bookmark (e.g. seriesFilteredForApp) that is filtered like this and make it manageable via API (and documented via OAS hopefully soon).\r\n\r\nWith this approach we would achieve some kind of static filtering, which could be useful for basic things like my example.\r\n\r\n## How do you think this should be implemented?\r\n\r\n**For starters, this could be read only**. For example like this:\r\n\r\n`GET /[project]/items/[bookmark-name]`\r\nOf course the `[bookmark-name]` must be unique within collection names to make this work.\r\n\r\nFurther developed, this could also work with creating and updating items. \r\nIf your bookmark is for example filtered by the field `active == true` then creating an item within the bookmark could default `active` to `true` if omitted in the request body.\r\n\r\n## Would you be willing to work on this?\r\n\r\nI would love to but I don't have any PHP skills and not much time to learn it, unfortunately. \r\nI develop native mobile apps.\r\n\r\n---\r\n\r\n**So what do you guys think of the idea :)?**"},{"labels":["enhancement",null],"text":"# Feature Request\r\n\r\nSet the max_age value for CORS to a default that's not null.\r\n\r\n## What problem does this feature solve?\r\n\r\nEvery request in the application gets effectively 'doubled' by the need of a preflight CORS request. By setting the max_age option, we can cache the responses of the preflight, which negates the needs of a preflight for every individual request. (ht to @mvhirsch in https://github.com/directus/api/issues/917)\r\n\r\n## How do you think this should be implemented?\r\n\r\nhttps://github.com/directus/api/blob/56d53e695fbafc3a135034efe2f5dd2df793cf74/src/core/Directus/Util/Installation/InstallerUtils.php#L923\r\n\r\nSwap out `null` for a value (in seconds) like `600` (10 minutes)\r\n\r\n**Can we think of any reason why we _shouldn't_ change this?** @theharshin @bjgajjar \r\n\r\nRef:\r\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Max-Age\r\n"},{"labels":["enhancement"],"text":"A common use-case is admins wanting to fetch relational data, but not wanting to open-up full read access to that related collection.\r\n\r\nFor example, you may want to return `Project > Files` (deep relational) but don't want to completely open up READ access to the `directus_files` collection.\r\n\r\nSo we could add a new permission level that only allows CRUD access when it's performed through a relationship. So we'd end up with:\r\n\r\n* `None`\r\n* `Mine`\r\n* `Role`\r\n* `Relational`\r\n* `Full`\r\n\r\nKeeping in mind that \"mine\" and \"role\" will eventually be combined into one [\"dynamic rules\"](https://github.com/directus/api/issues/511) option.\r\n\r\nOne issue with this is that inevitably admins will want to configure _which_ relationships allow access (instead of turning this on globally). So a proper solution takes this into consideration."},{"labels":["enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\nWhen creating a new user via the api, no role is assigned to the new user.\r\n\r\n## Steps to Reproduce\r\n\r\nSend the api call:\r\n\r\nPOST /_/users HTTP/1.1\r\nHost: mydirectusdomain.tld\r\nContent-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW\r\nAuthorization: Bearer eyJ0eXAiOiJ0aCIsImtleFULLVALIDTOKENNDkyZTVhZiOiJfIn0.9E7AcoPfMAw5vrb3M9AMHjToDqcPbPBJf8GF6qG\r\ncache-control: no-cache\r\nContent-Disposition: form-data; name=\"email\"\r\nexample@gmail.com\r\nContent-Disposition: form-data; name=\"password\"\r\nvalidpw\r\nContent-Disposition: form-data; name=\"email_notifications\"\r\n1\r\nContent-Disposition: form-data; name=\"first_name\"\r\nTest\r\nContent-Disposition: form-data; name=\"last_name\"\r\nTest\r\nContent-Disposition: form-data; name=\"status\"\r\nactive\r\n\r\n## Expected Behavior\r\n\r\nOne or both of the following:\r\n1) User should be assigned to some default user role (perhaps defined in global settings)\r\n2) User role should be assignable when making the [project]/users api call \r\n\r\n## Actual Behavior\r\n\r\nUser is created in the db but is not associated with a role.\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n"},{"labels":["enhancement"],"text":"<!--\r\nFor security issues, please email support@directus.io directly.\r\n\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues (YOU ARE HERE)\r\n    API:  https://github.com/directus/api/issues\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\nI can't see soft-deleted items as the admin user.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Be an admin\r\n2. Create a item and set status to `deleted`\r\n3. Item should not be visible in the list. \r\n\r\n## Expected Behavior\r\nSee item after soft-delete.\r\n\r\n## Actual Behavior\r\nItem is not visible in the list view.\r\n\r\n## Technical Details\r\n\r\n- Device: Macbook\r\n- OS: macOs\r\n- Browser: Chrome\r\n- Directus App: 7.1.0\r\n- Directus API: 2.0.20\r\n"},{"labels":["enhancement",null],"text":"It was already requested years ago in #1704 in an earlier version. I don't know if it's just not implemented in the directus admin app, because I can't select multiple roles for a user.\r\n\r\nIf a user could be in multiple permission groups he could create/read/update/delete items from collections with permissions \"own role\" from several roles.\r\nI think this is essential for a good permission management. Otherwise I don't know how to implement a forum where some subforums are only visible to a small group of \"meta\"-users without bypassing the directus permissions. \r\n\r\nThe directus admin app would also need some changes then.\r\nI would even try to implement this and make a pull request:\r\nWhere in the code I would probably have to make changes?\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nUse command line `bin/directus maintenance:on` and `bin/directus maintenance:off` to put the api into maintenance mode.\r\n\r\nWhen maintenance mode is active, decline all requests with HTTP 503: Service unavailable. The App and other clients could then display a proper message to the user informing him of the maintenance state.\r\n\r\n## What problem does this feature solve?\r\nThis prevents data changes via api during updates of the database.\r\n\r\n## How do you think this should be implemented?\r\nThe command line toggle sets a flag in the filesystem or the config. The router checks before dispatching the request and returns the status code if maintenance mode is active.\r\n\r\n## Would you be willing to work on this?\r\nShure i would love to."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAzure Storage Adapter. Have had a look inside the FilesystemFactory and can see that S3 support is embedded into the core of Directus, and a switch is used based on config to use either the Local or S3 adapter. I can't see any way of creating a custom extension based on this code:\r\n\r\n```\r\npublic static function createAdapter(Array $config, $rootKey = 'root')\r\n    {\r\n        // @TODO: This need to be more dynamic\r\n        // As the app get more organized this will too\r\n        switch ($config['adapter']) {\r\n            case 's3':\r\n                return self::createS3Adapter($config, $rootKey);\r\n                break;\r\n            case 'local':\r\n            default:\r\n                return self::createLocalAdapter($config, $rootKey);\r\n        }\r\n    }\r\n```\r\n\r\n## What problem does this feature solve?\r\n\r\nDirectus apps can be deployed within the Microsoft Azure ecosystem.\r\n## How do you think this should be implemented?\r\n\r\nCustom extension outside of the core\r\n\r\n## Would you be willing to work on this?\r\n\r\nI'm willing to develop a storage adapter for Azure, just need to find out if it's possible with the current version and if there is an example extension/storage adapter in existence. I've seen Rackconnect listed as a supported provider, but I can't find anything relating to the implementation of this adapter to use as a starting point."},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues (YOU ARE HERE)\r\n    API:  https://github.com/directus/api/issues\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n<!-- Only report bugs with the officially supported LAMP stack. Issues with alternate stacks are \"enhancements\". -->\r\n\r\n## Steps to Reproduce\r\n\r\n1. Create a many-to-many relationship.\r\n2. Relate items from two collections to each other.\r\n3. Remove an item from one collection.\r\n\r\nI used the demo website (member -> favorites) relationship to reproduce after first seeing this in my own instance.  \r\n\r\n## Expected Behavior\r\nThe junction table should be updated to remove any rows containing items that are deleted.  The correct number of valid relationships is displayed in the table column (\"# items\").\r\n## Actual Behavior\r\nThe invalid row is left in the junction table and incorrectly added towards the number of items related to.\r\n## Other Context & Screenshots\r\n![m2m](https://user-images.githubusercontent.com/34398302/55254319-8b8c3500-5225-11e9-8e38-c78ba950e6b7.gif)\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Windows 10\r\n- Browser: Chrome\r\n- Directus: 190325A\r\n- Install Method: `master` branch of `directus/directus`\r\n"},{"labels":["enhancement",null],"text":"Not sure how difficult this would be to implement with our current way of referencing items, but we should discuss."},{"labels":[null,"enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nRun the Directus API on the [Swoole](https://www.swoole.co.uk/) platform.\r\n\r\n## What problem does this feature solve?\r\nSwoole enables high-performance, scalable and concurrent services in PHP programming language. It's benchmarks are impressive: https://www.techempower.com/benchmarks/\r\nSwoole enables drop-in Coroutines for default PDO and MySQL drivers, so not only the HTTP I/O will be speed up, but the entire ecosystem will be non-blocking, this will make Directus APIs suitable for high workloads and big projects.\r\n\r\n## How do you think this should be implemented?\r\nI know that not everyone is impressed with Swoole, so this could be a side project for Directus users willing to speed up they APIs.\r\nI did myself a PoC: https://github.com/leocavalcante/directus\r\nFor that I used the previous work from Slim-Swoole: https://github.com/leocavalcante/directus-swoole\r\nBut there are a few things:\r\n1. Would be nice to have a way to start an app without depending on the request. I know that checking the request for the right app is how multi-tenancy is accomplished, but would be great for those that knows that a single API will be served to start an app just once, before the server, then handle the requests with the already in-memory created app, for this I hacked `get_api_project_from_request()`: https://github.com/leocavalcante/directus/blob/master/src/helpers/all.php#L235 So the `$projectName` will always return the default `_`.\r\n    - Would be nice a way to inject an `Environment` at https://github.com/directus/api/blob/master/src/helpers/all.php#L159 then this could be addressed easily with [directus-swoole](https://github.com/leocavalcante/directus-swoole).\r\n    - This app-once option instead on app-on-request will be benefited after [preload](https://wiki.php.net/rfc/preload) on CGI/FastCGI environments as well.\r\n\r\n2. Swoole doesn't have `session_` so I hacked `CoreServicesProvider` to use `ArraySessionStorage`, not sure if there is a better way to provide a `Session` from the user-land. Then a `SessionStorageInterface` implementation could be written for Swoole.\r\n3. Some helpers relies on globals instead of Slim's Request or Environment, so this was need: https://github.com/leocavalcante/directus/blob/master/serv.php#L16 but not something to really care about, I think.\r\n\r\n## Would you be willing to work on this?\r\nSure, I can work on this."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nAfter a certain amount of wrong login attempts, we should block the user from logging in for a certain amount of time.\r\n\r\n## What problem does this feature solve?\r\n\r\nPrevent brute-forcing logins on the API\r\n\r\n## How do you think this should be implemented?\r\n\r\nSimilar as to iOS handles it. After 10 wrong login attempts, the user can't login for a minute. After 10 more wrong login attempts, the user can't login for 5 minutes, etc etc.\r\n\r\n## Potential problem\r\n\r\nThere might be a chance of trolling by trying to login with someone else's account. I think we can tackle that by blocking it based on rate and IP address."},{"labels":[null,"enhancement",null,null,null],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\n1. Refactor from `PHPUnit_Framework_TestCase` to `\\PHPUnit\\Framework\\TestCase`\r\n2. Then click on 'Tests' in the IDE.\r\n\r\n## Expected Behavior\r\nThe unit tests should be matching the source code.\r\n\r\n## Actual Behavior\r\nThe unit tests generally seem quite outdated and barely match the source code.\r\n\r\n## Other Context & Screenshots\r\nThis commit has the changes required to even run the unit tests:\r\nhttps://github.com/syslogic/directus-api/commit/788f66e7e0a7b5a0628cd5294ac2f5948ae8e355\r\n\r\nWhile the result looks about like this:\r\n\r\n![phpunit_screenshot](https://user-images.githubusercontent.com/736481/54863354-c4b93680-4d47-11e9-8779-f6013488e936.png)\r\n\r\nso far, I'm at `36.55%` passed tests... the main issue still are classes & methods which do not exist anymore - and the lack of API documentation, which one could use as an ultimate reference for writing the tests, so that the source code could be properly validated against them.\r\n\r\n## Technical Details\r\n\r\n- Device: [Desktop]\r\n- OS: [Redhat Linux, Kernel 3.10]\r\n- Web Server: [Apache 2.4.37]\r\n- PHP Version: [7.1.26]\r\n- PHPUnit Version [7.5.7]\r\n- Database: [MariaDB 10.2.22]\r\n- Install Method: [cloned the `master` branch]\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\n## Steps to Reproduce\r\n\r\n1. Configure mail in `api.php` or any project `api.php` file:\r\n```php\r\n'default' => [\r\n  'transport' => 'sendmail',\r\n  'from' => 'noreply@mydomain.com'\r\n]\r\n```\r\n2. Mail some recipient (user@example.com) using the `/mail` endpoint and provide access via token:\r\n```\r\nPOST /_/mail?access_token=adminUserSecretToken\r\n\r\n{\r\n  \"to\": [\r\n    \"user@example.com\"\r\n  ],\r\n  \"subject\": \"New Password\",\r\n  \"body\": \"Hello <b>{{name}}</b>, this is your new password: {{password}}.\",\r\n  \"type\": \"html\",\r\n  \"data\": {\r\n    \"name\": \"John Doe\",\r\n    \"password\": \"secret\"\r\n  }\r\n}\r\n```\r\n3. As user@example.com check your email and the sender address.\r\n\r\n## Expected Behavior\r\n\r\nThe sender address is: `noreply@mydomain.com`\r\n\r\n## Actual Behavior\r\n\r\nThe sender address is the email address of the (admin) user corresponding to the used access_token: `admin_user_corresponding_to_token@email.address`\r\n\r\n## Other Context & Screenshots\r\n\r\nNope.\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop, Chrome latest\r\n- OS: MacOs latest\r\n- Web Server: Apache 2.4\r\n- PHP Version: 7.2\r\n- Database: 5.6\r\n- Install Method: Cloned master branch\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues (YOU ARE HERE)\r\n    API:  https://github.com/directus/api/issues\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n<!-- Only report bugs with the officially supported LAMP stack. Issues with alternate stacks are \"enhancements\". -->\r\nRelated to #1299.\r\n\r\n## Steps to Reproduce\r\n\r\nOn the demo (Directus Latest):\r\n\r\nFor an existing item:\r\n1. Go to 'Movies'\r\n2. Click on an item that can be reverted (if need be, do changes to it, save a few times and open it again)\r\n3. Click on 'Revert' on the right\r\n4. Click on 'Revert' on the modal\r\n\r\nThe behavior is the same for a new item that is reverted.\r\n\r\n## Expected Behavior\r\n\r\nOnly fields that changed should be displayed on the right for the latest change.\r\n\r\n## Actual Behavior\r\n\r\nAll fields are displayed on the right for the latest change.\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Windows 7 x64\r\n- Browser: Firefox 65.0\r\n- Directus App: demo (Directus Latest)\r\n- Directus API: -\r\n- Install Method: -"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nCurrently, I believe the only variable passed to an update action hook is a $data array that contains the new version of the item. It would be beneficial to have two variables such as $old and $new.\r\n\r\n## What problem does this feature solve?\r\n\r\nHaving the $old and $new versions of an item would allow comparisons between the two such as sending an email when a boolean changes from false to true. Currently, the only way I have found to get this functionality is to catch it with :before and compare $data to the database.\r\n\r\n## How do you think this should be implemented?\r\n\r\nPassing two variables to the action functions with the two versions:\r\n\r\n`\r\n'actions' => [\r\n    'item.create.[item]' => function (array $new, array $old) {}\r\n]\r\n`\r\n\r\n## Would you be willing to work on this?\r\n\r\nI wouldn't really know how to help but if I can be of any help I will!"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\n## What problem does this feature solve?\r\n\r\nGet relation for a Many-to-One field\r\n\r\n## How do you think this should be implemented?\r\n\r\nWith the JS SDK, \"getCollection(collection)\" method, fields are provided. In this fields, for a many-to-one field (relation), Directus API return \"interface\": 'many-to-one'\" but not the collection in relation...\r\n\r\nFor example, I have a collection \"Product\" with a \"creator\" field.\r\nThe \"creator\" field is a Many-to-one relationship with the \"directus_users\" collection.\r\n\r\nWith the JS SDK, I need to do a getCollection('product\") and API return : \r\n{\r\n   \"data\": {\r\n       \"collection\": \"product\",\r\n       ..................,\r\n      \"creator\": {\r\n              \"interface\": \"many-to-one\",\r\n              ..............\r\n              \"relation_collection\": \"directus_users\"\r\n     }\r\n}\r\n \r\nFor the instance, I need to do a \"getRelations()\" and search an item with \"collection_many = product\" and \"field_many=creator\" \r\n\r\nNote : I try to do a getRelations('product') but It's buggy :/\r\n\r\n## Would you be willing to work on this?\r\nI don't know how :(\r\n\r\nTHX A LOT for the Job. Really enthusiastic for Directus !\r\n(Use it with the JS SDK in Vue2.)\r\nVersion : 7.0.18\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nMake action and quality used in generating thumbnail information in file helper configurable or dynamic in some way.\r\n\r\n## What problem does this feature solve?\r\nCurrently the thumbnail information added to the image data is by default \"crop\" with quality \"good\".\r\nSee:\r\nhttps://github.com/directus/api/blob/master/src/helpers/file.php#L210\r\n\r\n## How do you think this should be implemented?\r\nA simple approach would be to add setting options \"Default thumbnail action\" same for quality. That could be used as a 4th/5th parameter in the file helper.\r\n\r\nA more sophisticated solution would be to read thumbnail settings and create thumbnails for all configured thumbnail actions and qualities. But maybe the current default would result in too many entries ( 2 actions * 4 qualities per size ).\r\n\r\n## Would you be willing to work on this?\r\nDon't know if this would be a good place for a first contribution but I would be willing to give it a shot."},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\n1. Create a table with a few rows.\r\n2. Add some values to the table.\r\n2. Create a sort column on the table.\r\n3. Re-order the table's rows.\r\n4. The API automatically returns a sort with the ID, rather than the \"sort\". Explicitly specifying \"?sort=sort\" forces it to sort by the sort value.\r\n\r\n## Expected Behavior\r\n\r\nThe API should always use the \"sort\" column by default, and not the \"id\" column for sorting.\r\n\r\n## Actual Behavior\r\n\r\nEven if a \"sort\" column is present, Directus uses the \"id\" column to sort.\r\n\r\n## Technical Details\r\n\r\nDirectus Docker 7.0.17"},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nIs it possible to include custom endpoints folder to auto loader (like Vendor folder included)? That will be really nice to have it built-in and so no need to use 'require' then. And all custom endpoints can sit then under Directus\\Custom\\Endpoints namespace...\r\n\r\n## What problem does this feature solve?\r\nIt may solve several issues:\r\n1. Potential conflicts between endpoints class names\r\n2. Will allow developers of custom endpoints pre-load their classed and reference them same way as core and vendor classes \r\n\r\n## How do you think this should be implemented?\r\nCreating autoloader.php under custom endpoints folder that will load all the classes that sitting underneath\r\n\r\n## Would you be willing to work on this?\r\nI don't have enough skills right now for that."},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nApparently a couple server types (LAMP stacks too) support setting php values in .htaccess. It could be beneficial for Directus to set a default max upload size on the projects .htaccess, to make sure the user isn't limited by the default 2MB upload size\r\n\r\n## How do you think this should be implemented?\r\n\r\nAdd\r\n\r\n```\r\nphp_value upload_max_filesize 50M\r\nphp_value post_max_size 100M\r\n```\r\n\r\nto the `.htaccess` file in `/public`\r\n\r\nWhat would be the ideal default upload size?\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\nAdd an option to add named indexes to fields, possibly multiple fields. Fulltext-indexes in particular could be very powerfull for blog-like schemas.\r\n\r\n## What problem does this feature solve?\r\nThis would improve the speed of the application, if used in the right ways.\r\n\r\n## How do you think this should be implemented?\r\nMaybe as part of the collection itself since indexes can be based upon multiple fields. Within the API, the affected fields could have a property `indexes` in which all index-names are stored. In the app it would propably belong into the \"advanced options\" area.\r\n\r\n## Would you be willing to work on this?\r\nMaybe in the future, I just finished reading the documentation and I'm not familiar with the code base."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nAdd ability to customize list of supported middlewares for custom endpoints routes\r\n\r\n## What problem does this feature solve?\r\nCustom endpoint may use some of the core services that may require some data provided by middleware, such as authentication data, for example. By giving ability to select which middlewares should be loaded for the project you giving an option to developers of custom endpoints to reuse core objects and services without reinventing the new ones.\r\n\r\n## How do you think this should be implemented?\r\nAs a property in the api.{project}.config file, for example:\r\n....\r\n'custom_end_points_middlewares' => [\r\n    'auth',\r\n    'table_gateway'\r\n]\r\n....\r\n## Would you be willing to work on this?\r\nI don't have a required skills right now."},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nSubmitting `2019-03-01T19:47:00Z` works as expected, `2019-03-01T19:47:00.000Z` throws an error `date_time: This value is not a valid datetime.`\r\n\r\n## Solution\r\n\r\nI think an extra option needs to be added to this section:\r\n\r\nhttps://github.com/directus/api/blob/0ff430f827335ddbda5505a630da3d045759a01a/src/helpers/all.php#L1712-L1811"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nFor more complex page extensions it will be great to have custom endpoints/parameters too.\r\n\r\nEXAMPLE\r\nhttps://directus.app/#/ext/[custom-page]\r\nhttps://directus.app/#/ext/[custom-page]/[id]\r\nhttps://directus.app/#/ext/reports/\r\nhttps://directus.app/#/ext/reports/1\r\nhttps://directus.app/#/ext/reports/2\r\nhttps://directus.app/#/ext/reports/3\r\n\r\n\r\n## What problem does this feature solve?\r\nWithin the directus-app, such complex extensions can be created, and it is not necessary to create a standalone application.\r\n\r\n## How do you think this should be implemented?\r\nThe existing \"custom endpoints\" would have to be expanded accordingly.\r\n\r\n## Would you be willing to work on this?\r\nAs far as I can."},{"labels":["enhancement",null],"text":"# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\n1. Go to create collection\r\n1. Create collection with invalid name eg \" \" or \" 34\" \r\n3. API crashes and does not respond. \r\n\r\nOn app the following error is shown\r\n> Trouble processing request. Try again after refreshing the page.\r\n\r\n## Expected Behaviour\r\nError is returned, validation is done on server and/or client side\r\n\r\n## Actual Behaviour\r\n\r\nAPI responds with \"500 Internal Server Error\" \r\n\r\n## Other Context & Screenshots\r\n\r\nSee mysql naming rules https://dev.mysql.com/doc/refman/8.0/en/identifiers.html\r\n## Technical Details\r\n\r\napi version - 4fe384ba271489e9b6be67ae8c18d52f60f45546\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\nCreate a UI for the password reset feature so when you click on the link in the email you see something like:\r\n\r\n> A new password was sent to your email address.\r\n\r\n## What problem does this feature solve?\r\nIts confusing to just see `{public: true}` when clicking on the password reset field.\r\n![screen shot 2019-02-14 at 14 48 55](https://user-images.githubusercontent.com/2674600/52871828-db65df80-3142-11e9-92cf-0f7f56af691d.png)\r\n\r\n\r\n## How do you think this should be implemented?\r\nBy adding a user interface \r\n\r\n## Would you be willing to work on this?\r\nYes"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nAdd field types for slug and hash that will automatically validate / generate a slug / hash.\r\n\r\n## What problem does this feature solve?\r\n\r\nRight now, the slug and password / hash interfaces respectively have hooks for this system functionality. While interfaces still need to be able to have hooks, we'd like to move the core app interfaces into the app repo, to get rid of all the confusion that currently exists in this split.\r\n\r\nNOTE: Custom interfaces will still live in the api and remain unchanged.\r\n\r\n## How do you think this should be implemented?\r\n\r\nSimilar to the existing field types. The only thing that would be a nice to have if the types could use the options in the database to set things like field-to-mirror (slug) and hashing method (hash)\r\n"},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nDefault timezone for users is 'America/New_York'. \r\n\r\n## Expected Behavior\r\nThe users inherit the timezone from the ~server~ api configuration. \r\n\r\n## Actual Behavior\r\nTimezone is set to 'America/New_York'. \r\n\r\n## Other Context & Screenshots\r\n\r\nRelevant code for admin creation:\r\n\r\nhttps://github.com/directus/api/blob/368684beeb226c1b33af72619abf68ed7631e55a/src/core/Directus/Util/Installation/InstallerUtils.php#L251\r\n\r\nSchema configuring the database to default to NYC\r\nhttps://github.com/directus/api/blob/6898e21872f611be3b9f642c920587a9e707acdc/src/schema.sql#L563\r\n\r\n## Technical Details\r\n\r\n* Device: Desktop\r\n* OS: MacOs High Sierra\r\n* Web Server: nginx\r\n* PHP Version: 7.2\r\n* Database: Mysql 5.2\r\n* Install Method: docker 2.0.17 and 7.0.17"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAdd support for Auth0 oAuth provider\r\n\r\n## What problem does this feature solve?\r\nMany companies use Auth0 as provider.\r\n\r\n## How do you think this should be implemented?\r\nSame as OKTA integration\r\n\r\n## Would you be willing to work on this?\r\nI can participate as far as I know modern PHP"},{"labels":["enhancement",null],"text":"I was reading this article https://medium.com/@toastui/handling-time-zone-in-javascript-547e67aa842d that raised a couple good points about the risks of relying solely on ISO-8601, and I remember someone on Slack mentioning that the time conversion was particularly tricky on Android. \r\n\r\nShould we add a dateformat parameter that allows the user to signal to the API to return the data in Unix timestamps instead of the ISO format? I think we should allow both, so this would be an addition instead of a breaking change.\r\n\r\nThoughts @WellingGuzman, @benhaynes?"},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\nI have in the error.log sometimes a SQL error.\r\n\r\n[2019-02-02 18:14:37] api[_].ERROR: Zend\\Db\\Adapter\\Exception\\InvalidQueryException: Statement could not be executed (22001 - 1406 - ) in /var/www/api.ssb-festival.de/directus/vendor/zendframework/zend-db/src/Adapter/Driver/Pdo/Statement.php:244\r\n\r\nThe error always occurs twice in a row, but instead of not writing any data, because it is an SQL error, the API writes the record twice to the database.\r\n\r\nIn the Activity Log it says that the record was added outside of Directus instead of the user who created it.\r\n\r\n## Steps to Reproduce\r\n4. See error\r\n\r\n## Expected Behavior\r\n\r\n## Actual Behavior\r\n\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\n- Device: undefined\r\n- OS: undefined\r\n- Web Server: [nginx 1.12.x]\r\n- PHP Version: [7.2.x]\r\n- Database: [MySQL 5.6]\r\n- Install Method: [cloned `master` branch]\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\nUploaded files should belong to records and not the opposite.\r\nSo when deleting a record, it should remove all uploaded files and thumbs for this record.\r\n\r\n## What problem does this feature solve?\r\nI don't like the fact that when I upload an image for example, I have to upload it to a big folder where every files ever uploaded are, and if I delete this record all the uploaded files linked to this record are not deleted.  \r\n\r\nFor example:  \r\nIf I create a products collection it makes no sense to store every pictures of each product in the same folder, and it makes no sense to keep these files if I delete a product.  \r\nThis way of handling file is good for a blog, in which a picture could be reused multiple times on different posts.\r\n\r\nTo be clear I don't want the current way of uploading file to be gone, I just want an alternative that I describe below.\r\n\r\n## How do you think this should be implemented?\r\nI'm used to work with October CMS. In October CMS there is two way of uploading a file/image:  \r\n* Media Finder\r\n* File Upload\r\n\r\nThe way Directus works is more similar to the Media Finder way, when uploading a file to a record, the id of the file is stored in a column of the record and the file is stored in a folder with ALL the other files. \r\n\r\nDeleting this record has not effect on the file.\r\n\r\nWith \"File Upload\" way works like this:\r\nWhen saving a record with an uploaded file, a unique id is generated (for example `5c3dc484ad92c420571660`), the 9 first characters of this unique ID is split in 3 to make a folder path where the file will be stored, like this: `uploads/5c3/dc4/84a/file.ext` (created thumbs for this file stores them in the same folder), then in the files table in the database, a new record is created with various file meta data AND the **name of the field**, the **model** and **ID** of the record it belongs to.\r\n\r\nDeleting the record deletes the file record in the files table and removes all the files/images and thumbs.\r\nSo in Directus it would be something like storing the field name, the collection ID and the ID of the record in the files table.\r\n\r\n## Would you be willing to work on this?\r\nUnfortunately I don't have time for the moment, but I really wanted to post this, as I like the way Directus works but this is the main thing that prevent me to use it. (and the lack of a repeater field but I read it is on the way)."},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nCurrently the api expects the folder structure to be: $basePath . '/public' for the public folder. It would be nice not to make this assumption and allow different paths for the public folder. This is useful in shared hosting where the user doesn't have have the choice of setting the root folder.\r\n\r\n## What problem does this feature solve?\r\n\r\nI'm using share hosting which gives me the following structure:\r\n\r\n/home\r\n   /public  -- this is the path of the root website /\r\n  /protected  -- these are files available to the website but not accessible directly\r\n\r\nif I put the api folder in public then my api url will be:\r\n\r\n/api/public\r\n\r\nAlso all the files in the api (ex. schema.sql ) will be exposed to the public which is not desirable. Also I would like to reserve the root of the website to my frontend (the actual website).\r\n\r\nI would like put the api in the following locations:\r\n\r\n/home\r\n   /public/api -- the 'api' here is the public folder so that the URL for the api is http:/mydomain.com/api\r\n   /protected/api -- the 'api' is the base folder that contains all the files except for the public folder\r\n\r\nThis way all the non public api files are protected.\r\n\r\nTo do that is I set the  the path in public/index.php to \r\n$app = require '/home/protected/api/src/web.php';\r\n\r\nhowever the public folder is hard coded in several locations like src/core/Directus/Services/InterfacesService.php (line 16):\r\n\r\n$basePath . '/public/extensions/core/interfaces',\r\n\r\n## How do you think this should be implemented?\r\n\r\nMake the public folder path optionally configurable in api.config.\r\n\r\n## Would you be willing to work on this?\r\nMy php is not that good.\r\n\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nAdd the ability to update the config dynamically through the API.\r\n\r\n## What problem does this feature solve?\r\n\r\nYou're able to set certain config properties when creating a project (like cors), although, there's no way to change them after a project has been created.\r\n\r\n## How do you think this should be implemented?\r\n\r\nI think the only thing the API can do using the current implementation of `php` based config files is overwrite the whole file using the new config options. Ideally, it should read the existing config file's config array, replace the values, and overwrite the file."},{"labels":["enhancement",null],"text":"Is there any plan for supporting account register and related stuffs such as : activate a user, etc ?"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nWhen the user creates a new collection, we should return an error when the collection name starts with `directus_`\r\n\r\n## What problem does this feature solve?\r\n\r\nAt a lot of places in the application, we use the `directus_` prefix to differentiate between the regular and system collections. When the user creates a new collection (like `directus_rijk`) this collection will be hidden and treated like a system collection.\r\n\r\n## How do you think this should be implemented?\r\n\r\n```php\r\nif (substr( $string_n, 0, 9 ) === \"directus_\") {\r\n  return \"u rebel\";\r\n}\r\n```\r\n"},{"labels":["enhancement"],"text":"It's currently not possible to change the configuration of `cache`, `storage`, `mail`, `cors` (options), `rate_limit`, and `social_providers` when creating a project through the `/projects` endpoint. This means that you either have to manually adjust the config file or overwrite it completely using a custom script in order to change these settings\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nWe allow setting a custom logo and project name (saved in directus_settings), but there's currently no way to retrieve those (publicly) from the API.\r\n\r\nIt would be awesome if the API could return these bits of public information on the root endpoint of a project url (f.e. `/_/` or `/ranger/`). That way, the application can use this information on the login view.\r\n"},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nWhen a user error happens, the API still logs it to a file.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Try logging in with the wrong password\r\n2. See error.log created\r\n\r\n## Expected Behavior\r\n\r\nThe API should only log unexpected \"errors\" (eg system failures instead of user errors)\r\n\r\n## Actual Behavior\r\n\r\nThe API logs all non-200 status requests"},{"labels":["enhancement",null,null],"text":"# Feature Request\r\n\r\nExtensions are an incredibly important part of the API. As of right now, certain extensions are globally available for the whole API (eg interfaces / endpoints), while others are only available per project (hooks). Ideally, every extension can be _either_ available globally or scoped.\r\n\r\n## What problem does this feature solve?\r\n\r\n* Being able to have a global hook for all API activity\r\n* Being able to have a custom interface on a specific project\r\n* Having a custom `/export-to-csv` endpoint on my finance project\r\n\r\n## How do you think this should be implemented?\r\n\r\nRight now, (global) extensions are added based on the `public` folder:\r\n\r\n```\r\npublic/\r\n  extensions/\r\n    core/\r\n    custom/\r\n```\r\n\r\nMaybe we can consider adding a `global` vs `scoped` split in this structure:\r\n\r\n```\r\npublic/\r\n  extensions/\r\n    global/\r\n      core/\r\n      custom/\r\n    scoped/\r\n      _/\r\n      client-1/\r\n      client-2/\r\n```\r\n\r\nSeeing that the core extensions are always available for all instances, we don't necessarily need the `core` vs `custom` split for scoped extensions.\r\n\r\n_Hooks can already be scoped by adding them into the `api.<project>.php` file in the config_\r\n\r\nThoughts @benhaynes @WellingGuzman?"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Bug Report\r\n\r\n## Steps to Reproduce\r\n\r\nThe doc says that the get item revisions api support query parameter status but it seems not work.\r\n\r\n1. Create an item with status field. \r\n2. Update item status so it has a few revisions.\r\n3. Use api GET /[project]/items/[collection-name]/[id]/revisions?status=draft to get the revisions\r\n4. See the response have those published status revisions.\r\n\r\n## Expected Behavior\r\nThe return revisions only contain draft status revisions.\r\n## Actual Behavior\r\nReturn everything.\r\n## Other Context & Screenshots\r\n\r\n<!-- Any other relevant information, screenshots, or schema files to help explain your problem -->\r\n\r\n## Technical Details\r\n\r\nUsing directus api 2.0.13.\r\n"},{"labels":["enhancement"],"text":"# Bug Report\r\nI use the following command to configure Directus :\r\n`bin/directus install:config -n <database-name> -u <mysql-user> -p <mysql-password> -s <db_unix_socket>`\r\n\r\nHere is the result in my config/api.php file :\r\n`// When using unix socket to connect to the database the host attribute should be removed\r\n// 'socket' => '/cloudsql/skiply-test:europe-west4:skiply-test-core-db-00001',`\r\n\r\n## Steps to Reproduce\r\n\r\n1. Install a fresh instance of directus from git\r\n2. Configure with script directus (using a socket)\r\n\r\n## Expected Behavior\r\nSet properly the socket info in the config/api.php file \r\n\r\n## Actual Behavior\r\nSocket attribute is not set.\r\n\r\n## Technical Details\r\n\r\n- Device: Desktop\r\n- OS: Unix\r\n- Web Server: Google AppEngine Flex env.\r\n- PHP Version: 7.2.0\r\n- Database: MySQL 5.7.14-google\r\n- Install Method: cloned `master` branch\r\n"},{"labels":["enhancement"],"text":"# Feature Request\r\n\r\nWe can already create projects through the API, however, there's no way to remove one this way.\r\n\r\n## What problem does this feature solve?\r\n\r\nRight now, you can programmatically generate more projects on the fly. However, you can't delete them.\r\n"},{"labels":["enhancement"],"text":"**Description**:\r\n1. Create a collection named: collection1\r\n2. Set Role <public>'s permission on collection1: \r\n    - check \\<All\\> for Read\r\n    - check \\<Read-only\\> for Comment\r\n3. Use following url to fetch the comments\r\n```\r\nhttp://localhost:9080/_/api/activity?filter[collection][eq]=collection1&filter[item][eq]=1&filter[action][eq]=comment&sort=-action_on&fields=id,action,action_on,comment,action_by.*,action_by.avatar.data.*\r\n```\r\n\r\n**Result**:\r\nExpecting to get a list of comments, but get 403<permission denied> instead.\r\n```json\r\n{\"error\":{\"code\":300,\"message\":\"Reading items from \\\"directus_activity\\\" collection was denied\"}}\r\n```\r\n\r\n**Question**:\r\nWhy 403 happens even if we allow <public> to read the comments?  If the endpoint is wrong, which one should be right for fetching comments?"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\n## What problem does this feature solve?\r\n\r\n## How do you think this should be implemented?\r\n\r\n## Would you be willing to work on this?\r\n"},{"labels":["enhancement"],"text":"when using directus API, to create a user, I can send a invalid email in the body of the post. And this email will still be accepted.\r\n\r\nIs there some form of validation in place? Or do I need to write it myself?\r\n\r\nThanks"},{"labels":["enhancement"],"text":"This is what we want:\r\n\r\n```\r\n[ Project Name Input]\r\n[ Project URL Input]\r\n[ Logo Input]\r\n[ Color Input]\r\n[ Trusted Proxies Input]\r\n[ Auto Sign Out]\r\n```\r\n\r\nI think we need to add `project_name` (and maybe a few others) and reorder the Settings fields. Let's just make sure the API is sending/receiving all these options."},{"labels":["enhancement"],"text":"Multiple filters is now functional, but @WellingGuzman would like to clean up the syntax a bit so it's more intuitive.\r\n\r\n-----\r\n**From Welling:**\r\n\r\nThe problem: it could be a bit ugly, just for the sake of the \"array in url\" thing:\r\n\r\n```\r\nfilter[id][][between]=1,15&filter[id][][between]=30,45\r\n```\r\n\r\nAlthough to include ranges between 1 and 15, and 30 and 45. it should be an `or`. \r\n\r\nHere where it gets ugly:\r\n\r\n```\r\nfilter[id][0][between]=1,15&filter[id][0][logical]=or&filter[id][1][between]=30,45\r\n```\r\n\r\nThis was implemented by https://github.com/directus/api/commit/b37f5bbb173849bf8383876185af48e26612f60b\r\n\r\n----\r\n\r\nI was thinking on trying to implement a parser to allow multiple fields without adding the array. In addiction to the default using array.\r\n\r\nSo it looks like this:\r\n\r\n```\r\nfilter[id][between]=1,15&filter[id][between]=30,45\r\n```\r\nInstead of:\r\n```\r\nfilter[id][][between]=1,15&filter[id][][between]=30,45\r\n```"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nA new (or updated?) metadata to be able to get count of items matching the filter (when using a limit).\r\n\r\n## What problem does this feature solve?\r\n\r\nActually, the only metadatas we can get are:\r\n - `result_count` - Number of items returned in this response ➡ When using a limit, it returns the limit if there are more results (not really useful)\r\n - `total_count` - Total number of items in this collection ➡ When using a filter, it really returns the total count, without using the limit (not really useful either).\r\n\r\n## How do you think this should be implemented?\r\n\r\nMaybe a new metadata (`filter_count`?) or use the same filters in `total_count`.\r\nWhy not also use MySQL's `FOUND_ROWS()` function? https://dev.mysql.com/doc/refman/5.7/en/information-functions.html#function_found-rows\r\nThis can be really useful for complex queries (we only have to build and call query once).\r\n\r\n## Would you be willing to work on this?\r\nWhy not, but I'm actually very busy 😢 "},{"labels":[null,"enhancement"],"text":"Hi,\r\nI'm creating an extension class which will be called from Directus hook. Some code logic is omitted for simplicity.\r\n`public/extensions/custom/hooks/presentations/AfterCreatePresentation.php `\r\n```php\r\n<?php\r\n\r\nnamespace Directus\\Custom\\Hooks\\Presentations;\r\n\r\nuse Directus\\Application\\Application;\r\nuse Directus\\Mail\\Message;\r\nuse function Directus\\send_mail_with_layout;\r\nuse Directus\\Services\\UsersService;\r\n\r\nclass AfterCreatePresentation\r\n{\r\n    protected $container = null;\r\n\r\n    public function __invoke($data = null)\r\n    {\r\n        $this->container = Application::getInstance()->getContainer();\r\n        $userService = new UsersService($this->container);\r\n        $users = $userService->findAll();\r\n\r\n        foreach ($users['data'] as $user) {\r\n            if ($user['email_notifications'] == true){\r\n                send_mail_with_layout(\r\n                  ...\r\n                );\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd the hook is registered in `config/api.php` as:\r\n```php\r\n...\r\n    'hooks' => [\r\n        'actions' => [\r\n            'item.create.presentations' => new \\Directus\\Custom\\Hooks\\Presentations\\AfterCreatePresentation()\r\n        ],\r\n        'filters' => [],\r\n    ],\r\n...\r\n```\r\nHowever the following error is being thrown:\r\n```\r\n2018/12/20 14:32:07 [error] 10498#10498: *123657 FastCGI sent in stderr: \"PHP message: PHP Fatal error:  Uncaught Error: Class 'Directus\\Custom\\Hooks\\Presentations\\AfterCreatePresentation' not found in /var/www/api.elisiondesign.cz/config/api.php:114\r\nStack trace:\r\n#0 /var/www/api.elisiondesign.cz/src/web.php(43): require()\r\n#1 /var/www/api.elisiondesign.cz/public/index.php(3): require('/var/www/api.el...')\r\n#2 {main}\r\n  thrown in /var/www/api.elisiondesign.cz/config/api.php on line 114\" while reading response header from upstream, client: 89.102.32.192, server: api.elisiondesign.cz, request: \"GET /server/ping HTTP/1.1\", upstream: \"fastcgi://unix:/run/php/php7.0-fpm.sock:\", host: \"api.elisiondesign.cz\", referrer: \"https://app.elisiondesign.cz/\"\r\n```\r\n**It works perfectly on my system `MacOS`**, but when deployed to production (`Ubuntu`) it throws the error.  I was tying to figure out some differences between the system and the most important is that Ubuntu is **case-sensitive** system, while MacOs is not. This would explain the not found problem.  So I've tried to put the file in the folders named with uppercase `/Custom/Hooks/Presentations` to help the autoloader find the class in the namespace, but with no effect. \r\n\r\n**NOTE:** The example hook for 'products' throws the same error when enabled.\r\n\r\n- OS: [Ubuntu 16.04]\r\n- Web Server: [nginx/1.14.1 ]\r\n- PHP Version: [ 7.0.32]\r\n- Database: [ MySQL 5.7.24]\r\n- API [2.0.12]\r\n"},{"labels":["enhancement",null],"text":"Do we want to support updating multiple users using a list of IDs?\r\n\r\n_I moved this from a TODO we had in the documentation._"},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nThere should be an option to automatically create user accounts if they authenticate with a SSO provider. \r\n\r\n## What problem does this feature solve?\r\nRight now only existent users are whitelisted for SSO authentication. So i have to expose the create user endpoint to unauthenticated users to create a new one before i'm able to authenticate them with SSO\r\n\r\n## How do you think this should be implemented?\r\nIf the option is set, a user should be automatically created if they successfully authenticate with the SSO provider after the redirect from the oauth consent. Since the password, first and lastname are currently required for creating a new user account the fields should either be optional or the user should be created with dummy values.\r\n\r\n## Would you be willing to work on this?\r\nSince i'm just working a few days with directus i don't feel expierenced enough to do it on my own."},{"labels":["enhancement"],"text":"Currently, when caching is enabled for the api, it considerably speeds up the response times. For example, it takes only around 15-20ms for us, which is awesome.\r\n\r\nHowever, the whole feature becomes unusable, because all item listings are cached for the amount of TTL. This means that you cannot see any newly created items until the TTL expires.\r\n\r\nThe usual approach to solve this problem is invalidating the cache entries when an item is being added, deleted or updated. This is would be also the easiest, because new listings will be added back to cache while being read.\r\n\r\nI think that this feature might be important to be able to scale the entire API instance and to lower some server workload."},{"labels":["enhancement"],"text":"We can wait on this if it's too complex for 7.0.\r\n\r\nTyping an `@` and then letters should open a dropdown with user's names to choose. Clicking on a name would save the mention in a syntax that guarantees its uniqueness (that won't change) such as the user's `id`:\r\n\r\n`@directus_users:1(Ben Haynes)`\r\n\r\nWith this syntax we get:\r\n\r\n* The name (as it was when saved) for easy reference in code and easier presentation\r\n* The unique ID (that won't change)\r\n* By using the table name, we can \"mention\" other items too... not just users. These could auto-link to the item (similar to GitHub's `#123` syntax)\r\n\r\nThe main thing we would need to figure out is how to **alert** the mentioned user in 7.x since we no longer have a messaging inbox. Perhaps a \"flagged\" activity item makes the most sense?"},{"labels":["enhancement",null],"text":"The problem reported is that Directus API behind a load balancer is not generating the correct url (based on the load balancer). There's a attempt to implement a proxy detection in the [`feat/proxy`](https://github.com/directus/api/tree/feat/proxy) branch.\r\n\r\nIf the load balancer/proxy IP is trusted the API should act in behalf of the load balancer, using their host, protocol, port, instead of the server is actually hosted.\r\n\r\n_This ticket will be updated accordingly as soon as we get more information related to this issue._"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\nWhen visiting the endpoint `/roles`, and append `?fields=*.*` It **should** return a list of users associated with the role.\r\n\r\nThis is because if you visit `/users/me` and append `?fields=*.*`, it returns a list of roles associated with the user.\r\n\r\n## What problem does this feature solve?\r\nI had some confusion where visiting `/users?fields=\"*.*` was returning me an array of a M2M field, however when doing the same on the roles field, I wasn't getting the expected outcome. (`/roles?fields=\"*.*`). (Ben helped to explain that confusion haha)\r\n\r\nFor example: if you had a site, where you would like to list a group of people, [Writers, Editors, Singers], you could visit the endpoint `/roles?fields=*.*` then list each person based on their role.\r\n\r\n## How do you think this should be implemented?\r\nBen pointed out, it probably just needs adding to the boilerplate schema\r\n\r\n## Would you be willing to work on this?\r\nI'm willing to help as much as possible."},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nWe have a need in our organization to host directus under a non-root url. For example ALL requests related to directus to be hosted under /catalog. The webapp seems like it will handle this use case but the api is using absolute paths that won't work under our hosting conditions. Specifically:\r\n\r\n/uploads\r\n/extensions\r\n/layouts\r\n/interfaces\r\n/server/ping\r\n...\r\n\r\nand so on need to have the /catalog prefix:\r\n\r\n/catalog/uploads\r\n/catalog/extensions\r\n/catalog/layouts\r\n/catalog/interfaces\r\n/catalog/server/ping\r\n...\r\n\r\nProject names also seem to be available only under root. Again, it would be nice to host projects/apis/app/everything under a common root url prefix like /catalog.\r\n\r\n## What problem does this feature solve?\r\n\r\nHosting under a non-root path prefix.\r\n\r\n## How do you think this should be implemented?\r\n\r\nPerhaps adding settings to the api.php project configuration and templating the returned absolute urls. Since this config is required by all api installations it could be a global setting trickling to other api.*.php project configurations.\r\n\r\n## Would you be willing to work on this?\r\n\r\nWith some guidance I could contribute some code and test but it has been a while since I've written a line of PHP ;)\r\n\r\nPS Re: edit I changed a couple url paths to reflect actual api endpoints as documented in the protected endpoints section here:  https://docs.directus.io/api/reference.html#get-auth-token"},{"labels":["enhancement"],"text":"The API can know when it's _not_ gonna work (f.e. when mod_rewrite is disabled or permissions are missing).\r\n\r\nWe should globally error out if a critical requirement is missing."},{"labels":["enhancement"],"text":"# Feature Request\r\nI'd like to configure my unix socket with Script [here](https://docs.directus.io/api/admin/configure-with-script.html#configure-with-script)\r\n`$ bin/directus install:config -n <database-name> -u <mysql-user> -p <mysql-password>`\r\n\r\n## What problem does this feature solve?\r\nI can only set my unix when editing my file and not throught the command above.\r\n\r\n## How do you think this should be implemented?\r\nusing the option `-s`\r\n\r\n"},{"labels":["enhancement",null],"text":"Right now we include extensions within individual directories (interfaces, pages, layouts, etc). It would be nice to have the option to include \"packages\", or directories that include different extensions that all  serve the same purpose.\r\n\r\nFor example, if we had a \"Project Management\" package it might include a kanban board layout, some progress interfaces, and a specific storage adapter. \r\n\r\nIt would be nice if all of these extensions could stay grouped within a parent directory instead of \"unpacked\" into their respective extension directories."},{"labels":["enhancement",null],"text":"Admin user can suspend itself and this causes a server error.\r\n\r\nAn admin shouldn't be able to suspend itself and there should always be one admin that has access to Directus."},{"labels":["enhancement",null],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAdd unique key to `directus_relations(collection_many, field_many, collection_one, field_one, junction_field)`.\r\n \r\n## What problem does this feature solve?\r\n\r\n* Two users creating the same relation\r\n* Two identical rows inserted by repeated changes on data structure (create a relation then modify  relation)\r\n\r\n## How do you think this should be implemented?\r\n\r\nCREATE INDEX...\r\n\r\n## Would you be willing to work on this?\r\n\r\nThis is fairly easy, it's isn't that easy handle all the error condition that will arise from this change."},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nWe don't use the `scope` column in directus_settings anymore. I'm not a 100% sure how the migrations have to be setup to get this done correctly."},{"labels":["enhancement"],"text":"If there's multiple relations for the same field, the API should use the one with the highest ID (latest) to ensure the relationship is the correct one.\r\n\r\nRef https://github.com/directus/app/issues/1085"},{"labels":[null,"enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Custom storage adapter\r\n\r\n## Save files to own CDN.\r\n\r\n## Directus\\Filesystem\\FilesystemFactory::createCustomAdapter(), Directus\\Filesystem\\Files::write(), Directus\\Filesystem\\Filesystem::write()\r\n\r\n## Would you be willing to work on this? Yes, of course.\r\n\r\nHello, I am working on the PR for a custom adapter. This is not a big deal. But my question is. Is there a chance to change fileName? Problem is that my CDN saves files with MD5 like cdn.example.com/img/90ceffdf71bfddb7865908dc1b2a156b.jpg but Directus all the time works with fileName from the user and can not be changed after uploading to the CND. \r\n\r\nOnly chance how to do this is in Directus\\Filesystem\\Files::saveData() make a switcher a to another custom method and create a filter hook. But this is pretty ugly.\r\n\r\nMy suggestion is. Directus\\Filesystem\\Files::write() should returns data from write() from the adapter. The same for Directus\\Filesystem\\Filesystem::write(). There is some magic in Directus\\Filesystem\\Filesystem::write(). I call write() on the adapter and it returns an array but response is true.\r\n\r\nIf I change from\r\n```\r\ntry {\r\n    if (!$this->getAdapter()->write($location, $data)) {\r\n        $throwException();\r\n    }\r\n} catch (\\Exception $e) {\r\n    $throwException();\r\n}\r\n```\r\nto\r\n\r\n```\r\ntry {\r\n    $result = $this->getAdapter()->write($location, $data);\r\n    if (!$result) {\r\n        $throwException();\r\n    }\r\n    return $result;\r\n} catch (\\Exception $e) {\r\n    $throwException();\r\n}\r\n```\r\n$result is only true or false. Even if write() returns an array.\r\n\r\nAnd then is a little problem with thumbnails in Directus\\heplres\\file.php but this is one small condition."},{"labels":["enhancement"],"text":"# Bug Report\r\n\r\nIf I send `1995-12-29T08:00+02:00` to the api, it saves `1995-12-29 08:00` disregarding the timezone."},{"labels":["enhancement"],"text":"Hi,\r\n\r\nI'm looking for a way to do some long jobs in the background like (Custom mail sending,  SMS calls, Push Notifications, Reports generation and any Remote Service Calls). It there a way to make this and I'm not aware of?\r\n\r\nThanks"},{"labels":["enhancement"],"text":"Hi,\r\n\r\nI'm looking forward to secure this wonderful middleware system with **2FA - Two Factor Authentication** at both levels API and Web if enabled.\r\n\r\nThanks "},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nLet's make a difference between an alias type and an alias field. Maybe merge these into the same thing.\r\n\r\nAn field with `alias` type is treated as an `alias` field, but in theory any field without an actual column in the database should be an alias.\r\n\r\n## What problem does this feature solve?\r\n\r\nList the field as an alias type instead of ignore the field altogether from the collection.\r\n\r\n## How do you think this should be implemented?\r\n\r\nIf the field doesn't exists in the database it should be treated as an alias field.\r\n\r\n## Would you be willing to work on this?\r\n\r\nYes\r\n"},{"labels":["enhancement"],"text":"<!--\r\n1. Do not delete this template or the issue will be closed\r\n2. Ensure you're using the latest version of Directus\r\n3. Post to the correct repo:\r\n    App:  https://github.com/directus/app/issues\r\n    API:  https://github.com/directus/api/issues (YOU ARE HERE)\r\n    Docs: https://github.com/directus/docs/issues\r\n-->\r\n\r\n# Feature Request\r\n\r\nAllow user to user by one-to-many and one-to-many fields\r\n\r\n## What problem does this feature solve?\r\n\r\nSorting by non-existing columns such as one-to-many\r\n\r\n## How do you think this should be implemented?\r\n\r\nAllowing to sort by related items count\r\n\r\n## Would you be willing to work on this?\r\n\r\nYes"},{"labels":["enhancement"],"text":"We should not convert user-submitted times/datetimes to UTC (only our own system times)."},{"labels":[null,"enhancement"],"text":"When I upload a PDF file, or a JS file, or anything non-image?, the type is set to `text/plain`"},{"labels":["enhancement",null,null],"text":"From directus created by [Tscheffrey](https://github.com/Tscheffrey) : directus/directus#2062  \n\nDirectus seems to try to load a JPEG preview image from the SVG.\r\nIn the focused view, the image displays correctly but it is not centered.\r\n![image](https://user-images.githubusercontent.com/35004675/36266708-6d916136-1272-11e8-98c2-7fd24d0a5077.png)\r\n![image](https://user-images.githubusercontent.com/35004675/36266724-76854370-1272-11e8-9e94-bb403e294e3f.png)\r\n![image](https://user-images.githubusercontent.com/35004675/36266777-9bd32976-1272-11e8-8802-1a8789850050.png)\r\n"},{"labels":["enhancement",null],"text":"While `full`, `role`, `user`, `mine`, and `none` will satisfy most use-cases, I've spoken with many people who could use a more _dynamic_ option. I imagine using a set of filters like we do in `directus_collection_presets.filters`... so there would be an option for a CRUDE permission to be set to:\r\n\r\nThis is how filters are saved in `directus_collection_presets`:\r\n```\r\n[\r\n    {\r\n        \"field\":\"email\",\r\n        \"operator\":\"contains\",\r\n        \"value\":\"gmail\"\r\n    }, \r\n    {\r\n        \"field\":\"added_on\",\r\n        \"operator\":\"contains\",\r\n        \"value\":\"2018\"\r\n    }\r\n]\r\n```\r\n\r\nOriginally I was thinking that we could save the permissions as `filter:[...]` (where the array matches above), but I wonder if there's a cleaner way to handle this."},{"labels":[null,"enhancement",null],"text":"We have `mine` which is specific to the current user, but I wonder if we should have an alias called `user` that does the same thing. I only say this because many Admins are using this to limit permissions to specific items that _they_ create.\r\n\r\neg: if an admin creates an item and \"assigns\" it to a user within `user_created` field type... then perhaps `user` permission and `user_owner` field type makes more sense?\r\n\r\nThoughts?"},{"labels":["enhancement",null],"text":"Hey all,\r\n\r\nI've been trying to figure out a way to be able to upload files into subdirectories instead of everything to be under /uploads/_/originals/ because users are dumb. they won't know a file w the same name (logo.png for vendor1 is already there when trying to upload logo.png for vendor2). \r\n\r\nAnyhows, I finally made my way to CoreServicesProvider::getEmitter(). \r\n\r\nstill not quite sure how to do it, gonna look at this function. I just posted this in case someone figured it out already. \r\n\r\nThanks all :)"},{"labels":["enhancement",null],"text":"**Describe the bug**\r\nPost requests to create new entries allows passing `id` field.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Manually craft a POST /.../ request passing `id` inside JSON\r\n\r\n**Expected behavior**\r\nI don't know if this is by design, but bad users can craft requests and mess up ids inside a table (auto incremented for example).\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Check all CLI modules and delete what's not in used anymore and what needs to be fixed."},{"labels":["enhancement"],"text":"I searched the docs, and does not find any API or function to trigger database migration.\r\n\r\nSo how should I trigger it?"},{"labels":[null,"enhancement"],"text":"We absolutely need a way to update the schema for hotfixes and releases. We have migrations for instance create, but as far as I know we don't have a way to do this for changes to existing instances.\r\n\r\nWe should also have a clean way to manage schema changes, ideally changing things in ONE place and then having all the other files updated through a build script of sorts.\r\n\r\nFinally, would we want to use the new [GitHub actions](https://github.com/features/actions) to automate any of this? Not sure if its useful... or if we're just using [phinx](http://docs.phinx.org/en/latest/migrations.html)."},{"labels":["enhancement"],"text":"Same as `file` type `user_created` and `user_updated` should have relationship set to users automatically."},{"labels":["enhancement",null],"text":"When updating files, it seems like the raw data is being saved into Directus activity. It should not store any file data, only metadata changes. "},{"labels":["enhancement",null,null],"text":"Tests are broken and travis keep failing on testing the API input/output tests.\r\n\r\nI have disabled this \"check\" until we start working on tests again."},{"labels":["enhancement"],"text":"We can set a field to be unique, but we need a way to turn that off too."},{"labels":["enhancement"],"text":"Fields sort value are currently fetching from MySQL sort when there's not value on `directus_fields` confusing the resulting values from both `directus_fields` and MySQL columns.\r\n\r\nThe fields should be sorted by MySQL columns sort value, but the Field sort value must always come from `directus_fields` table."},{"labels":["enhancement"],"text":"This is saving hundreds of items into activity when you re-order fields through Settings. This clogs up the activity page and will fill the database with GBs of unneeded data. \r\n\r\nThoughts on what should be (or not be) included? @WellingGuzman @rijkvanzanten\r\n\r\n![screen shot 2018-10-03 at 7 47 26 pm](https://user-images.githubusercontent.com/522079/46445506-3c1cee80-c745-11e8-8b43-02fbec489c53.png)\r\n"},{"labels":["enhancement",null],"text":"Expand the characters pool for `StringUtil::randomString()`, it can use symbols.\r\n\r\nAlso allow the user to pick, numbers, letters, alphanumeric, symbols, (_custom users characters?_) all or any combination.\r\n\r\nImportant note: this will improvement of the `auth_secret` random generated string."},{"labels":["enhancement"],"text":"Like _demo or _example, that way we can have example interfaces / pages / etc without them showing up in the app 😄 "},{"labels":["enhancement"],"text":"Telemetry uses php_curl, but logging into the API fails if curl doesn't exist for that one request. Instead, it should check if it's possible to use and fail silently if not"},{"labels":["enhancement",null,null],"text":"When creating a project with relatively few items, but a good number of collections, it might be nice to have an endpoint that *Gets All Items*. \r\n\r\nFor example, if your project has 20 collections each with <100 items, then you might simply want to fetch all items on when you load your project's application. Having this endpoint would be faster and more efficient than making 20 API calls and would make updating a central \"store\" (eg: vuex) easier.\r\n\r\nI imagine the API getting one \"page\" (API item max) of items for all of collections. There could also be options for which collections to fetch or how many items per collection to fetch.\r\n\r\n### Some endpoint ideas include:\r\n\r\n* `GET /[project]/collections` _With a flag to also return items_\r\n* `GET /[project]/items/*`\r\n* `GET /[project]/items/c1,c2,c3`"},{"labels":["enhancement",null],"text":"When uploading a file, the `title` should be a cleaned up version of the filename, but currently it's doubling the extension:\r\n\r\n* Original: `animals_hero_mountains.jpg`\r\n* Current Title: `Animals Hero Mountains.jpg.jpg`\r\n* Ideal Title: `Animals Hero Mountains`"},{"labels":["enhancement"],"text":"`.gitignore` needs a clean up. Unused and rules being used, and some new might be missing."},{"labels":["enhancement"],"text":"When there's not configuration for `storage` it fails trying to create an storage adapter without a clear error message/explanation"},{"labels":["enhancement"],"text":"We need to rename the `filesystem` config variable to `storage` to use standard terminology."},{"labels":["enhancement"],"text":"The schema should create fields in a specific order. Most are good, but here are a few changes:\r\n\r\n**I have also proposed changing three column names and removing one column**. @rijkvanzanten\r\n\r\n**directus_collections**\r\n1. collection\r\n1. managed\r\n1. hidden\r\n1. single\r\n1. icon\r\n1. note\r\n1. translation\r\n\r\n**directus_fields**\r\n1. id\r\n1. collection\r\n1. field\r\n1. type\r\n1. interface\r\n1. options\r\n1. locked\r\n1. validation\r\n1. required\r\n1. readonly\r\n1. hidden_input _(should become `hidden_detail`)_\r\n1. hidden_list _(should become `hidden_browse`)_\r\n1. sort\r\n1. view_width _(should become `width`)_\r\n1. group\r\n1. note\r\n1. translation\r\n\r\n**directus_files**\r\n1. id\r\n1. storage_adapter _(should become `storage`)_\r\n1. filename\r\n1. title\r\n1. type\r\n1. uploaded_by\r\n1. uploaded_on\r\n1. charset\r\n1. filesize\r\n1. width\r\n1. height\r\n1. duration\r\n1. embed\r\n1. folder\r\n1. description\r\n1. location\r\n1. tags\r\n1. metadata\r\n\r\n**directus_permissions**\r\n_Move `status_blacklist` to the end, after the other two blacklist columns_\r\n\r\n**directus_revisions**\r\n_Reverse these two columns so collection comes before item:_\r\n* parent_collection\r\n* parent_item\r\n\r\n**directus_roles**\r\n_Move `external_id` to the last column_\r\n\r\n**directus_users**\r\n1. id\r\n1. status\r\n1. first_name\r\n1. last_name\r\n1. email\r\n1. password\r\n1. token\r\n1. timezone\r\n1. locale\r\n1. locale_options\r\n1. avatar\r\n1. company\r\n1. title\r\n1. email_notifications\r\n1. high_contrast_mode (does this do anything? delete until later?) @rijkvanzanten ??\r\n1. last_access_on\r\n1. last_page\r\n1. external_id\r\n"},{"labels":["enhancement",null],"text":"We seem to have many htaccess files (for apache) all over the place in the API. We need to combine them all into the root..."},{"labels":["enhancement"],"text":"When php throws warning, notices or errors that was not caught by the API it corrupt the response JSON. In development this should be a problem because you want to see the most errors as possible, but I believe when you are running on production all these should be removed from the output buffer and return a valid JSON response."},{"labels":["enhancement"],"text":"The `uuid` type support was removed was when we change all system types, because this type requires a fixed data: `type=string` + `length=36`.\r\n\r\nIn other word it needs to be a special type that doesn't require any user data but its name to work."},{"labels":["enhancement"],"text":"If you search for an empty string using `contains`, _all_ results should be returned, not none. That way this acts as a reductive filter:\r\n\r\n`NULL` = All results (50 results)\r\n`D` = Results with \"D\" (15 results)\r\n`Di` = Results with \"Di\" (3 results)\r\n`Dir` = Results with \"Dir\" (1 result)"},{"labels":["enhancement",null],"text":"We need an endpoint that lists all available storage adapters so that the App can offer those as options and we know the original uploads filesystem path set in the API config."},{"labels":["enhancement"],"text":"Update\r\n\r\n`directus_settings` `file_naming` from `file_id` to `id`"},{"labels":["enhancement"],"text":"The .gitignore should ignore all projects (not just `_`) in `/public/uploads`\r\n\r\nAlso, let's do a cleanup of this gitignore file. And it seems like we have a lot of gitignore files throughout the repo... maybe we can combine them?"},{"labels":[null,"enhancement",null],"text":""},{"labels":["enhancement"],"text":"**Is your feature request related to a problem? Please describe.**\r\nThe API returns a bunch of useful server info. However, it doesn't return what database type (eg `mysql`) is used. This makes it impossible for the application to switch functionality based on database type (most notably, changing the settings to show other datatypes).\r\n\r\n**Describe the solution you'd like**\r\nThe server info `/` should include a `database` key.\r\n\r\n**Describe alternatives you've considered**\r\nFor the time being, we only support MySQL, so I'm going to hardcode that into the application. This needs to be added before we can support other database drivers though!\r\n"},{"labels":["enhancement",null],"text":"Is it worth adding a global prettify parameter to the API so there's an option to make it human-readable? I know there are converters online, but that's an extra few steps and some people don't want to potentially save their private data on those services.\r\n\r\n@WellingGuzman \r\n@rijkvanzanten \r\n\r\n![screen shot 2018-09-10 at 6 04 17 pm](https://user-images.githubusercontent.com/522079/45327062-07da5780-b524-11e8-9918-2830e9c3b0d8.png)\r\n"},{"labels":["enhancement"],"text":"On admin login we should ping the central telemetry endpoint with the body info filled in. We can also store a flag in the session so it only sends once (less frequently).\r\n\r\nhttps://telemetry.directus.io/count\r\nhttps://github.com/directus/telemetry#count\r\n\r\n@rijkvanzanten will confirm that the metric is received correctly once you've implemented this @WellingGuzman."},{"labels":[null,"enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Custom Role Filters\r\n### :+1: = 3\r\n*Created 2 months ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – :+1: (2 months ago)\r\nIn addition to NONE, MINE, ROLE, and FULL... we could add a CUSTOM option that allows for a filter string, like:\r\n\r\ncategory[contains]='something'\r\n\r\nQuite useful for more advanced Roles!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @masiqbal – :+1: (1 month ago)\r\n+1 Need this to create role to maintain records in certain article categories only.\r\n\r\nI think this is better: category[contains]='something1;something2;somethingelse;'\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# MSSQL Support\r\n### :+1: = 2\r\n*Created 2 months ago by @Tharkis*\r\n \r\n\r\n\r\n-----\r\n### @Tharkis – :+1: (2 months ago)\r\nA lot of companies already have MSSQL infrastructure and resources.\r\n\r\n"},{"labels":[null,"enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Enable HTTP ETAG header\r\n### :+1: = 1\r\n*Created 3 months ago by @jsamr*\r\n \r\n\r\n\r\n-----\r\n### @jsamr – :+1: (3 months ago)\r\nETAG headers can provide a huge benefit by\r\n\r\nsaving bandwidth with conditional gets\r\nsaving server load with a simple key value lookup\r\nOn a design perspective, ETAGs could be associated per row, with some uuid identification.\r\n\r\nSome complexity might come with associations, where the ETAG should change when referred rows are modified, added or deleted. But the benefits should outweigh the costs.\r\n\r\nhttp://fideloper.com/api-etag-conditional-get\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Manage Database on external server\r\n### :+1: = 1\r\n*Created 4 months ago by @MiraiTunga*\r\n \r\n\r\n\r\n-----\r\n### @MiraiTunga – :+1: (4 months ago)\r\ne.g Directus tables/db lives on heroku but the database it manages lives in aws\r\n\r\nResult Directus wont need to be installed within the same database it manages.\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Two Factor Auth Option\r\n### :+1: = 1\r\n*Created 5 months ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – :+1: (5 months ago)\r\nIn 7.x\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# reset password through rest api\r\n### :+1: = 1\r\n*Created 5 months ago by @lastlink*\r\n \r\n\r\n\r\n-----\r\n### @lastlink – :+1: (5 months ago)\r\nshould be able to do this through the api such as auth/rest-password. Maybe have a group that can do this\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# API Order by RANDOM\r\n### :+1: = 1\r\n*Created 5 months ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – :+1: (5 months ago)\r\nIn addition to ASC and DESC, we should have a way to order by RAND(). If you want two random items with filters it is very inefficient to do this in the app (fetching a lot of info first, then randomizing, then limiting)\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Custom Email Templates\r\n### :+1: = 1\r\n*Created 5 months ago by @BennerGe*\r\n \r\n\r\n\r\n-----\r\n### @BennerGe – :+1: (5 months ago)\r\nAdding own email templates, located under /customs/views/mail, which replaces the original templates.\r\n\r\n"},{"labels":[null,"enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Database backup\r\n### :+1: = 1\r\n*Created 6 months ago by @diegogurpegui*\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – :+1: (6 months ago)\r\nJust a simple feature allowing admin users to download a backup of the Database (a SQL dump should be enough). Additionaly, the possibility to restore that database would be great.\r\n\r\nEven more so, those backups could be saved in a specific (customizable?) location to allow the admin user to navigate through previous backups and restore them.\r\n\r\nThis is meant to be a shortcut for admins to avoid accessing the database directly to perform the backup. Just manage everything from the UI.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Support WebP file format\r\n### :+1: = 1\r\n*Created 6 months ago by @apexJCL*\r\n \r\n\r\n\r\n-----\r\n### @apexJCL – :+1: (6 months ago)\r\nMaybe the feature at all it's not that significative because the format isn't widely supported (requiring polyfills for Safari and other browsers), but it surely helps when you're developing a landing site that requires high quality pictures but with the lowest size possible.\r\n\r\nBy now, webp files can be uploaded/requested, but previews aren't available at all in tables/thumbnails or similar.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Relational of depth 2\r\n### :+1: = 1\r\n*Created 6 months ago by @daniel-upzzle*\r\n \r\n\r\n\r\n-----\r\n### @daniel-upzzle – :+1: (6 months ago)\r\nHi,\r\n\r\nI'm new to github contributions and I don't know if it's the way to suggest this tiny change. Or how to do that.\r\n\r\nIn api/core/Directus/Database/TableGateway/RelationalTableGateway.php\r\n\r\nlet more depth to recursive load relational values.\r\n\r\nI've done that in a fork: https://github.com/daniel-upzzle/directus/pull/1/files\r\n\r\nThanks, Daniel\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @daniel-upzzle – :+1: (6 months ago)\r\n... "},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Transform Image Format on Upload\r\n### :+1: = 1\r\n*Created 7 months ago by @levimichael*\r\n \r\n\r\n\r\n-----\r\n### @levimichael – :+1: (7 months ago)\r\nRegardless of what format the user uploads, have directus convert to .webp\r\n\r\nThis format offers great file size reduction.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Nested permissions (complex)\r\n### :+1: = 1\r\n*Created 8 months ago by @lastlink*\r\n \r\n\r\n\r\n-----\r\n### @lastlink – :+1: (8 months ago)\r\nbe able to give permissions with something like organic grouping/tagging. useful for a university app needing permissions by resource not just by resource type. maybe through the use of an extension\r\n\r\n"},{"labels":["enhancement",null,null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# softaculous install script\r\n### :+1: = 1\r\n*Created 8 months ago by @lastlink*\r\n \r\n\r\n\r\n-----\r\n### @lastlink – :+1: (8 months ago)\r\nhttp://softaculous.com/docs/Adding_Custom_Scripts It would be nice to have an install script on softaculous so people can manage and host via cpanel. This would allow for installing, backups, restoring, and cloning.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# API: New way to add X2M data\r\n### :+1: = 1\r\n*Created 11 months ago by @WellingGuzman*\r\n \r\n\r\n\r\n-----\r\n### @WellingGuzman – (11 months ago)\r\nAdding new X2M data without the data param.\r\n\r\nEx:\r\n\r\n```\r\n{\r\n  \"name\":\"hallo\",\r\n  \"regions\":[\r\n    {\r\n      \"translation_id\":17,\r\n      \"region_id\":8\r\n    },\r\n    {\r\n      \"translation_id\":17,\r\n      \"region_id\":8\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nRef: #1800\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Total Count for Pagination View\r\n### :+1: = 0\r\n*Created 1 year ago by @magbeat*\r\n \r\n\r\n\r\n-----\r\n### @magbeat – (1 year ago)\r\nWhen working with UI Suites (like PrimeNG: https://www.primefaces.org/primeng) the paginator component expect a total number of items (when applying filters and limits) in the header to display the correct pagination elements on the bottom of table.\r\n\r\nAlready discussed in : https://github.com/directus/directus/issues/1720\r\n\r\nSending two requests makes it a bit harder because you cannot simply reuse the answer from the server (with meta and data properties) but you have to construct the response object from a call without the limit and a call with the limit.\r\n\r\n"},{"labels":["enhancement",null,null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Directus plugin for Spike\r\n### :+1: = 0\r\n*Created 1 year ago by @WellingGuzman*\r\n \r\n\r\n\r\n-----\r\n### @WellingGuzman – (1 year ago)\r\nIntegrate Directus data for compilation into static site.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @hypebeast – (6 months ago)\r\nPlease , see https://github.com/hypebeast/spike-directus\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# With filter joins, allow the same table to be listed multiple times\r\n### :+1: = 0\r\n*Created 1 year ago by @stevepatter*\r\n \r\n\r\n\r\n-----\r\n### @stevepatter – (1 year ago)\r\nCurrently we can join tables while filtering data with:\r\n\r\n    'joins' => [\r\n                'candidate_application' => [\r\n                    'on' => ['candidate_application.candidate', 'candidate_of_the_week.candidate']\r\n                ]\r\n            ]\r\nbut this restricts us to listing each table once. Instead, expand the join to an additional array layer & we can specify the same table multiple times (as would be possible in SQL).\r\n\r\n    'joins' => [\r\n        'candidate_application' => [\r\n                [\r\n            ‘on’ => [ 'candidate_application.candidate', 'candidates.id'],\r\n            ‘type’ => ‘INNER’\r\n                       ],\r\n                [\r\n            ‘on’ => [ 'candidate_application.candidate', 'jobs.id'],\r\n            ‘type’ => ‘LEFT’\r\n                       ]\r\n    ],\r\nCode changes would be processJoins in RelationalTableGateway\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# User Privileges - Assign Users to Tableitems Manually\r\n### :+1: = 0\r\n*Created 1 year ago by @bj-s*\r\n \r\n\r\n\r\n-----\r\n### @bj-s – (1 year ago)\r\nAbility for Admin to create users that are assigned to one / multiple entries/items of certain tables. Like User permission level 1; But admin assigned and not created by themselves.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @aiomaster – (4 months ago)\r\nIt would also be cool to have some conditions based on the row data to define permissions for that row for example every row where city=\"Foo\" should only get edited by UserXY. It would also be interesting if that UserXY could only create records where city=\"Foo\".\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Polymorphic Relations\r\n### :+1: = 2\r\n*Created 1 year ago by @cesasol*\r\n \r\n\r\n\r\n-----\r\n### @cesasol – (1 year ago)\r\nAdding support for polymorphic relationship like laravel for distint types of data in relation to one table, for example content blocks for a page. Reference: https://laravel.com/docs/5.4/eloquent-relationships#polymorphic-relations\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Regex Table Filters\r\n### :+1: = 0\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\n@chaserelock commented on Aug 31, 2015\r\n\r\nHey guys - awesome project! I saw that there is a mechanism to blacklist table names by passing in an array of tables not to be read. While this is great, it's not extensible for databases that constantly grow in # of tables that are not necessarily interesting from a dev standpoint (e.g. data specific to 1 user in table_12345). Because our naming however is consistent, a regex filter would allow me to permanently capture that set of tables to ignore going into the future.\r\n\r\n@benhaynes commented on Aug 31, 2015\r\n\r\nAn excellent recommendation. I think that this array might be vestigial, since now Directus takes the opposite approach – only pulling in whitelisted tables. We ran into issues with some installations where temporary tables were created by services that weren't meant to be managed at all. Now you have to add managed tables into directus_tables to pull them into the system.\r\n\r\nWe will go through and reassess this whitelist/blacklist process to make sure it all makes sense and removes redundancy. Thanks!\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Abstracted Config Files (JSON)\r\n### :+1: = 1\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\n@WellingGuzman\r\n\r\nWhat do you think about abstracting the configuration files. Currently, they are in the API directory as PHP files – but couldn't we make them JSON files in the root so they are not tied to the server-side language? Does that seem like a good idea or overkill?"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Pull One-2-Many relations on API GET\r\n### :+1: = 1\r\n*Created 1 year ago by @diegogurpegui*\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (1 year ago)\r\nWhen retrieving entities (rows) with these: /tables/[table-name]/rows /tables/[table-name]/rows/[id] it would be nice to have the option to include all One-2-Many rows in the response.\r\n\r\nExample: Let say I have a Table \"Book\" and a table \"BookCategory\". I then define a typical Many-2-One field in \"Book\" pointing to \"BookCategory\". So every time I add a book, I specify the Category. Pretty straightforward. I also add (because Directus somehow needs it) the One-2-Many relation from Book_Category to Book. What I think it would be useful is to have the ability to pull the Categories, and have each of them come with the list of books they include.\r\n\r\nOf course this should be optional to avoid performance problems.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# New event: table.change\r\n### :+1: = 1\r\n*Created 1 year ago by @Radiergummi*\r\n \r\n\r\n\r\n-----\r\n### @Radiergummi – (1 year ago)\r\nCalled for all table changes (CRUD), with the same arguments as the existing events\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Wildcards for String Filters\r\n### :+1: = 1\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nIt would be great if we could allow for wildcards in item string filters:\r\n\r\n\"Quick % Fox\"\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Store File Data hash to warn of duplicates\r\n### :+1: = 4\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nBy saving a hash of the files data in directus_files, we SHOULD be able to warn users about duplicate resources when they upload a file – and offer them the option to use the existing resource instead.\r\n\r\nThanks @doughnet!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @doughnet – (1 year ago)\r\nLove this idea!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @rijkvanzanten – (10 months ago)\r\nWouldn't this cause the database to be filled with massive amounts of data? Lets say I upload a 8MB file, would that 8MB be hashed and put in the DB?\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @jrefi – :+1: (10 months ago)\r\nIf by hash they are referring to the checksum of the file, then no, the entire file would not need to be saved to the DB. For example, a SHA-256 checksum requires 256 bits (64 bytes), so the overhead is fairly low.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – :+1: (6 months ago)\r\nGreat idea\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Bulk creation of items via the API\r\n### :+1: = 2\r\n*Created 1 year ago by @mawrkus*\r\n \r\n\r\n\r\n-----\r\n### @mawrkus – (1 year ago)\r\nhttps://github.com/directus/directus/commit/7b131f909208920337c1ba69488975aca00710cf enabled the possibility to update/delete multiple rows.\r\n\r\nI'd love to have the possibility to POST multiple rows to the API. My use case is a massive initial importation of data.\r\n\r\nThanks for considering it.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Check Password – API Endpoint\r\n### :+1: = 2\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nAn API/SDK endpoint to check auth on custom columns. You provide the column name (password) with optional params for adding the salt column and encryption type (defaults would be the Directus defaults).\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Import existing tables with Foreign Keys\r\n### :+1: = 0\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nProblem: I have two tables i imported into directus DB - clientes and images. There is a Constraint like ```ALTER TABLE images ADD CONSTRAINT imagesibfk1 FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE ON UPDATE CASCADE```\r\n\r\nQuestion: Is there a way to display this relation with dropdowns like phpmyadmin?\r\n\r\nhttps://github.com/directus/directus/issues/1601\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Add File Storage Support for AWS S3\r\n### :+1: = 2\r\n*Created 1 year ago by @RabbitMC*\r\n \r\n\r\n\r\n-----\r\n### @RabbitMC – (1 year ago)\r\nTo handle better and faster files, media etc - a Amazon AWS S3 integration could help, keep requests out of users' hosted server. Better performance for API Request instead!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (1 year ago)\r\nThis is already implemented and working. In fact, I've been using it with my team for months now. However, it needs to be setup directly in the config files. Probably a friendly UI would help.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Integrated Thumbnail Generator/Management\r\n### :+1: = 3\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nBasically the app requests an image with thumbnail parameters (width, height, crop) from Directus – if the thumbnail exists it's returned, otherwise it's generated and returned.\r\n\r\nDirectus could also manage which sizes/params are allowed to avoid DDOS attacks where users generate millions of thumbs with malicious scripts. Directus would store the allowed thumbnail params and only allow those to be created.\r\n\r\nParams: Width – INT Height – INT Crop – BOOL: If OFF, the thumb will fit within the bounds, if ON the thumb will crop to the center of those dimensions. The image will NEVER stretch.\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Piwik integration\r\n### :+1: = 3\r\n*Created 1 year ago by @RabbitMC*\r\n \r\n\r\n\r\n-----\r\n### @RabbitMC – (1 year ago)\r\nA Piwik Extension will I Admins to track API Calls and visits\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Privileges - don't require a field in every table for user data/info\r\n### :+1: = 4\r\n*Created 1 year ago by @doughnet*\r\n \r\n\r\n\r\n-----\r\n### @doughnet – (1 year ago)\r\nSince all the data is already being store inside of directus_activity table; use this table as the privileges source. Then privileges will work out of the box and make directus very powerful (without needing to go outside of directus like phpmyadmin/etc).\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nI 100% agree – no need to duplicate this info.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Decouple Auth, Allow GitHub/Google/Facebook Login\r\n### :+1: = 9\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nIn addition to the typical (Directus) login, you should be able to confirm your identity (email address) through either GitHub, Google, or Facebook authentication.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nAlso: LinkedIn, Live ID, and OpenID account\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @yair-ucando – (1 year ago)\r\nAlso LDAP (if possible)\r\n\r\n"},{"labels":[null,"enhancement",null,null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Proper SVG Thumbnail Support\r\n### :+1: = 5\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nWhile we can upload SVGs, there's been debate as to how thumbs should be stored (same vector asset or bitmap version).\r\n\r\nFor conversation regarding options refer to GitHub: https://github.com/directus/directus/issues/1166\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @brocgailit – (1 year ago)\r\nAny progress on this? Looks like 1166 is closed without resolving the thumbnail issue (should be separate issue?). Another option for this may be pushing the SVG to a canvas. https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Drawing_DOM_objects_into_a_canvas\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @brocgailit – (1 year ago)\r\nUsing the full asset presents an issue when width and/or height aren't set in the SVG file, which Adobe Illustrator leaves out when exporting for some strange reason.\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Database Support - PostgreSQL DB\r\n### :+1: = 14\r\n*Created 1 year ago by @ricricucit*\r\n \r\n\r\n\r\n-----\r\n### @rijkvanzanten – (11 months ago)\r\nIt would be great to have some alternatives to just MySQL!\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Private File Support\r\n### :+1: = 9\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – (1 year ago)\r\nCurrently all files are publicly accessible. We should add a toggle to make files private.\r\n\r\nIn order to serve private files we have to serve it through PHP, so only through the API and Web app can be accessible.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# GraphQL support\r\n### :+1: = 56\r\n*Created 1 year ago by @PierBover*\r\n \r\n\r\n\r\n-----\r\n### @rijkvanzanten – :+1: (1 year ago)\r\n<3 this\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @luminarious – (1 year ago)\r\nAs a front-end developer GraphQL feels magical every time and the performance improvements from getting only the data necessary for current view add up quickly!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @nikola66 – :+1: (6 months ago)\r\nIt seems in the pipleline for Q2 / 2018 but really counting the days to get this!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @kosirm – :+1: (5 months ago)\r\nGraphQL and Microservices are most fast moving parts of the web in 2018!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @sendtogil – :+1: (3 months ago)\r\nplzzzzzz\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @sendtogil – :+1: (3 months ago)\r\nplzzzzzz\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @T-Specht – :+1: (1 month ago)\r\nReally looking forward to this feature for the usage with React\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @bianpratama – :+1: (3 weeks ago)\r\nCan't wait!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @allanleonardjr – :+1: (2 weeks ago)\r\nDefinitely need this!!!!\r\n\r\n"},{"labels":["enhancement",null],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# MongoDB Support\r\n### :+1: = 34\r\n*Created 1 year ago by @WellingGuzman*\r\n \r\n\r\n-----\r\n### @rijkvanzanten – :+1: (11 months ago)\r\nIt would be great to have some alternatives to just MySQL!\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @jedimonkey – :-1: (8 months ago)\r\nMongo is very different to mysql, so I can't imagine this being a simple port. I guess it depends on how easy it is to switch the Zend Database library to use it.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# API get rows by filters\r\n### :+1: = 19\r\n*Created 1 year ago by @diegogurpegui*\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (1 year ago)\r\nPossibility to get the rows of a table filtered by some value. Even consider the case of filtered by a O2M field (by ID perhaps)?\r\n\r\nThis is EXTREMELY useful. I couldn't find it yet, so if its there somewhere please let me know.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (1 year ago)\r\nI think this is already solved in API v1.1 (https://api.getdirectus.com/1.1/#Filter_Operators)\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @Hainesy – (1 year ago)\r\nAny explanation on how to use this?\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @Hainesy – (1 year ago)\r\nThis ticket can now be closed as the docs have been updated.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (1 year ago)\r\nExactly. This is working now.\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Node JS API (Server side)\r\n### :+1: = 36\r\n*Created 1 year ago by @WellingGuzman*\r\n \r\n\r\n\r\n-----\r\n### @WellingGuzman – (1 year ago)\r\nAlternative to PHP API (server side)\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @aarmand – (1 year ago)\r\nI dont know php....\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @Froelund – (1 year ago)\r\nI am currently using directus-sdk-javascript in my nodejs service, and that works great. I Can't really figure out why it would be a good idea to create a Node JS API (Server side) - So please enlighten me :)\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @rijkvanzanten – :+1: (1 year ago)\r\n@Froelund, it would be primarily a big speed-improvement. Node's event-driven single-threaded IO is blazingly fast when it comes to database operations.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @Froelund – (1 year ago)\r\nOkay. I could buy that - But I'm not sure that a nodeJS would prove faster then PHP in this scenario . If it is faster, and it might be, I think for the sake of a project architecture, we should be going for either PHP or nodeJS Server Side library. Are these things specified somewhere? Seems to me, that the title should say \"Move to NodeJS\"?\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @derekshull – :+1: (10 months ago)\r\nIs this still going to be available in Q1 of 2018?\r\n\r\n"},{"labels":["enhancement"],"text":"#### :rotating_light: MIGRATED FROM REQUESTS.GETDIRECTUS.COM :rotating_light: \r\n\r\n\r\n\r\n# Manage Multiple Databases\r\n### :+1: = 53\r\n*Created 1 year ago by @benhaynes*\r\n \r\n\r\n\r\n-----\r\n### @benhaynes – :+1: (1 year ago)\r\nThis would be a global dropdown to change the DB you're connected to.\r\n\r\n@hrwebasst: I'd suggest moving this further up the issue list. I have a use case that is probably pretty common. Installing automatically in my docker instance with my site download for development purposes. I have already easily bypassed the login and can add the schema in by default but it would be nice if Directus could be simply pointed at a database the user had perms for so that I can bake this for all of my users.\r\n\r\ntl;dr Directus has own database points to one or multiple sub-databases on install would be awesome.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @nums – (1 year ago)\r\nHow can you identify the DB on which the user logs on to the API?\r\n\r\nMaybe like that?\r\ncurl -d \"email=user@directus.local&password=pass123&db=mydb\" https://account-instance.directus.io/api/1.1/auth/request-token\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @detj – :+1: (7 months ago)\r\n... \r\n \r\n\r\n\r\n-----\r\n### @diegogurpegui – (6 months ago)\r\nRegarding the \"How can you identify the DB on which the user logs on to the API\" I think it would be better to make it part of the URL/path, instead of a query parameter. And leave those only for filtering and things related to the query you are doing. The URL represents the resource you are accessing, and the database instance is part of that resource in my opinion.\r\n\r\n\r\n \r\n\r\n\r\n-----\r\n### @ezanattatray – :+1: (4 months ago)\r\namazing\r\n\r\n"},{"labels":["enhancement"],"text":"## Overview\r\n\r\nWe need to fully split the simple Directus types, from the database datatypes (different for each vendor). Instead of only sending a datatype, the API should accept both a `datatype` and `type`\r\n\r\n• For now we will assume MySQL\r\n• The App will store a list of all possible datatypes for MySQL\r\n• The `datatype` is ONLY saved in the DB schema\r\n• The Directus `type` is ONLY saved in the `directus_fields` (edited)\r\n\r\n## Flow\r\n\r\n1. User chooses an interface\r\n2. An interface says “I support `string` or `number` type”\r\n3. The application renders an additional dropdown for the database type: `VARCHAR`, `CHAR`, `TEXT`, `LONGTEXT` etc for the `string` type based on options available in the database vendor (eg: MySQL)\r\n\r\n## Directus Types\r\n\r\n* `string`\r\n* `number`\r\n* `m2o`\r\n* `o2m`\r\n* `file`\r\n* `alias`\r\n* `array`\r\n* `json`\r\n* `datetime`\r\n\r\n\r\nhttps://docs.google.com/document/d/1jdST6C8wmMIMFeb9AClWxBUtndyRQD7iOGopzktDMQ0/edit?usp=sharing"},{"labels":["enhancement"],"text":"The `/users/invite` endpoint must support single string for one email or an array for multiple emails, any other value should be invalid including an CSV of emails."},{"labels":["enhancement"],"text":"Make sure non-admin users can't delete role-level bookmarks\r\n\r\nRef: https://github.com/directus/app/issues/701"},{"labels":["enhancement"],"text":"After creating the `default` project, only admin must have access to create new project/instances."},{"labels":["enhancement"],"text":"#### Implement batch updates on:\r\n\r\n- Folders\r\n- Permissions\r\n- Relations\r\n- Roles\r\n- Users\r\n\r\nUpdates multiple items each with their own data.\r\n\r\n```json\r\n[{\r\n   \"field\": \"value\"\r\n}, {\r\n   \"field\": \"value\"\r\n}]\r\n```\r\n\r\n#### Implement batch create on:\r\n\r\n- Folders\r\n- Roles\r\n\r\n#### Implement batch delete on:\r\n\r\n- Users"},{"labels":["enhancement"],"text":"**Is your feature request related to a problem? Please describe.**\r\nThe API has a flag to set the API into production or development mode. This flag is called `env`. However, we also use the term _environment_ (env for short) for the different API _environments_ based on the name of the config file. This double-usage of the same name can/will cause confusion for new users.\r\n\r\n**Describe the solution you'd like**\r\nRename the `env` flag in config to `mode`"},{"labels":["enhancement"],"text":"Add a top-level `links` object in the response object for pagination.\r\n\r\nThe example below follows the `links` top-level object structure.\r\n\r\n```json\r\n{\r\n  \"links\": {\r\n    \"self\": \"http://example.com/_/items/projects\",\r\n    \"first\": \"http://example.com/_/items/projects?page=1\",\r\n    \"last\": \"http://example.com/_/items/projects?page=10\",\r\n    \"prev\": null,\r\n    \"next\": \"http://example.com/_/items/projects?page=2\"\r\n  },\r\n  \"data\": {\r\n  }\r\n}\r\n```\r\n\r\nInformation about this are explained in the jsonapi specification:\r\n- http://jsonapi.org/format/#document-links\r\n- http://jsonapi.org/format/#fetching-pagination\r\n\r\n"},{"labels":["enhancement"],"text":"This will be an interface now"},{"labels":["enhancement"],"text":"For consistency, let's update the following and add a note in the API Contributor Docs with `*_on` (datetime) and `*_by` (user) naming conventions.\r\n\r\n* `directus_activity.datetime` -> `directus_activity.action_on` (**thoughts on this?**)\r\n* `directus_activity.user` -> `directus_activity.action_by` (**thoughts on this?**)\r\n* `directus_activity.datetime_edited` -> `directus_activity.edited_on`\r\n* `directus_activity.deleted_comment` -> `directus_activity.comment_deleted_on`\r\n\r\n* `directus_activity_seen.seen` -> `directus_activity_seen.seen_on`\r\n\r\n* `directus_files.upload_user` -> `directus_files.uploaded_by`\r\n* `directus_files.upload_date` -> `directus_files.uploaded_on`\r\n\r\n* `directus_users.last_access` -> `directus_users.last_access_on`\r\n* `directus_users.last_login` -> `directus_users.last_login_on`\r\n\r\n@rijkvanzanten @WellingGuzman – thoughts?"},{"labels":["enhancement",null],"text":"The App needs to give return an error that makes sense (not a general one). So let's test that this is working and make sure the API returns a specific error code or message:\r\n\r\n`You are not allowed to sign in from this location`"},{"labels":["enhancement"],"text":"The app will use this field to \"tie together\" two relationships when we're dealing with a m2m interface. \r\n\r\nThe API doesn't need to do anything with this field"},{"labels":[null,"enhancement"],"text":"Right now thumbnails are stored in the API root, for example:\r\n\r\n`api/[env]/100/100/crop/best/whatever.jpg`\r\n\r\nBut original files for ALL environments are stored in the public `storage` folder:\r\n\r\n`api/public/storage/uploads/whatever.jpg`\r\n\r\nAll env files need to be separated, so I propose this:\r\n\r\n`api/public/storage/[env]/originals/whatever.jpg`\r\n`api/public/storage/[env]/thumbnails/100/100/crop/best/whatever.jpg`\r\n\r\n@WellingGuzman @rijkvanzanten ... thoughts?\r\n\r\n"},{"labels":["enhancement"],"text":"Ref: https://github.com/directus/api/wiki/API-Settings-(DB)"},{"labels":["enhancement"],"text":"We'll be re-creating this with an interface instead of a core feature... so let's remove it from the DB.\r\n\r\n🔥`directus_collections.preview_url`🔥"},{"labels":["enhancement"],"text":"Update composer dependency:\r\n\r\n```Package akrabat/rka-ip-address-middleware is abandoned, you should avoid using it. Use akrabat/ip-address-middleware instead.```"},{"labels":["enhancement"],"text":"At the moment `users.password` is hashed specifically for users, it will be helpful to create a specific type for hashing value."},{"labels":["enhancement"],"text":"At certain times, we want to add meta data on an _item_ level instead of on the _request_ level\r\n\r\n```js\r\n// request level\r\n{\r\n  data: [],\r\n  meta: {}\r\n}\r\n\r\n// item level\r\n{\r\n  data: [{\r\n    id: 1,\r\n    $user_created: 5\r\n  }]\r\n}\r\n```\r\n\r\nIn order to make this possible, we should add **optional** support for `$`-prefixed columns in the `fields` parameter. That way, you can request your \"regular\" item data + whatever added system column you want by using `&fields=*,$user_created` or `&fields=*,$date_last_updated`"},{"labels":["enhancement"],"text":"To make working with dates easier, we should add a `now` keyword when working with date fields. This will make it easier to do item queries like “past 5 days” or “today” "},{"labels":["enhancement",null,null],"text":"We've chosen to return the junction table in many to many requests:\r\n\r\n```js\r\n// GET /items/:collection/:pk\r\n{\r\n  data: {\r\n    relationalField: [\r\n      {\r\n        junctionID: 1,\r\n        left: { ...currentItem },\r\n        rightID: { ...relatedItem }\r\n      }\r\n    }\r\n}\r\n```\r\n\r\nWhile this is expected when working with m2m, lets add a parameter that allows the user to \"skip\" the junction table:\r\n\r\n```js\r\n// GET /items/:collection/:pk?skip-junction=relationalField\r\n{\r\n  data: {\r\n    relationalField: [\r\n      { ...relatedItem }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nThis parameter could be called `skip-junction` or `skip-relation` or something else.\r\n\r\nI think the parameter should accept a CSV of field names to 'skip'. There might be a case where you want to junction of 1 field, but not of another. It shouldn't be a modify-all-fields parameter.\r\n\r\nThoughts @WellingGuzman @benhaynes ?"},{"labels":["enhancement"],"text":"The API returns DateTime in ISO 8601 format (`2018-08-08T14:43:47+00:00`) and we should support it as valid date.\r\n\r\nAny timezone should be converted back to UTC if it's a system field or datetime field of a system collection."},{"labels":["enhancement"],"text":"Creating a new collection through the API sets managed to false, this should be true by default"},{"labels":["enhancement"],"text":"Item data and delta are stored in directus_revisions, therefore, if you give a user permission to read directus_revisions you basically give them full access to read everything.\r\n\r\nTo solve this, directus_revisions should honor directus_permissions in what it returns when getting items."},{"labels":["enhancement"],"text":"The API only returns the columns that actually exist in the database.... which makes total sense, but makes using interfaces for settings impossible.. If someone queries `/fields` for the `directus_settings` collection, the fields in directus_fields that don't have a column should be returned too, so we can use interfaces in directus settings"},{"labels":["enhancement"],"text":"When you already have a database, or you use an existing SQL copy, the post to /instances will fail. We should add a param that allows the user to create the config file without having to overwrite the DB"},{"labels":["enhancement"],"text":"🎉 "},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"Currently the default file naming is set to `id`... but we should use the original file name option instead."},{"labels":["enhancement"],"text":"That way, we can upload bigger files based on that settings. Use in combination with `ini_set()`"},{"labels":["enhancement",null],"text":"We currently support `_` for the default env. We need to extend the Directus API to support connecting to multiple databases (environments). Let's use this ticket to discuss what's needed to get this feature finished."},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"Right now, writing a file is in a field called `data`. Reading the same file is done in a key called `storage`. This means that it's technically two different \"columns\" we're working with.\r\n\r\nCan we rename `data` to `storage`, or vise versa @WellingGuzman so it's the same for reading and writing @WellingGuzman ?"},{"labels":["enhancement"],"text":"It should save with type REVERT"},{"labels":["enhancement"],"text":"**Describe the bug**\r\n`PATCH http://localhost/api/public/_/users/2/revert/260 404 (Not Found)`\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Try reverting a system collection\r\n\r\n**Expected behavior**\r\nIt should work the same as the regular /items endpoint"},{"labels":["enhancement"],"text":"```\r\n\"SQLSTATE[01000]: Warning: 1265 Data truncated for column 'official_site' at row 1\"\r\n```\r\n\r\n`PATCH http://localhost/api/public/_/fields/movies/official_site`\r\n\r\n```json\r\n{\"id\":165,\"sort\":12,\"field\":\"official_site\",\"type\":\"VARCHAR\",\"interface\":\"text-input\",\"default_value\":null,\"options\":{\"iconLeft\":\"link\"},\"readonly\":false,\"required\":false,\"unique\":false,\"note\":null,\"hidden_input\":false,\"hidden_list\":false,\"length\":100,\"validation\":null}\r\n```"},{"labels":["enhancement"],"text":"Right now, the `/permissions` endpoint returns all permissions, with `/permissions/:id` returning a single permission record based on the primary key. While this lowlevel endpoint is required for the app to work, it's not the most useful for when you actually have to work with permissions.\r\n\r\nA very big use case for permissions is fetching the currently-logged-in user's permissions based on a single collection.\r\n\r\nIn order to accommodate this use case, we should two new endpoints: `/permissions/me` and `/permissions/me/:collection`.\r\n\r\nBoth these endpoints have to fetch the user's role-IDs, and use those to fetch the permissions from the directus_permissions collection. These endpoints should also return a default permission (everything turned off) if there's no records in directus_permissions.\r\n\r\n## Data flow\r\n\r\n### `/permissions/me`\r\n1. Fetch records from `directus_user_roles` where `user` equals the user ID in the token\r\n2. Fetch records from `directus_permissions` where `role` is `in` the IDs from 1\r\n\r\n### `/permissions/me/:collection`\r\n1. Fetch records from `directus_user_roles` where `user` equals the user ID in the token\r\n2. Fetch records from `directus_permissions` where `role` is `in` the IDs from 1 and where `collection` `equals` the requested collection\r\n3. If there's no records to be returned, return the default:\r\n\r\n```json\r\n{\r\n  \"data\": [\r\n    {\r\n      \"id\": <id>,\r\n      \"collection\": <collection>,\r\n      \"role\": <role>,\r\n      \"status\": null,\r\n      \"create\": \"none\",\r\n      \"read\": \"none\",\r\n      \"update\": \"none\",\r\n      \"delete\": \"none\",\r\n      \"navigate\": \"none\",\r\n      \"comment\": \"none\",\r\n      \"allowed_statuses\": [],\r\n      \"read_field_blacklist\": [],\r\n      \"write_field_blacklist\": []\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**NOTE**:  certain `directus_` collections have different defaults. \r\n\r\n## Misc\r\n\r\nThe `/permissions/me/:collection` endpoint can return either an Object or an Array. An Array will be returned when the collection has permissions based on the workflow (eg `status` is set)."},{"labels":["enhancement"],"text":"6.x had the ability to set a default user timezone and language, we need to add this back in to the installation endpoint in Directus 7"},{"labels":["enhancement"],"text":"![image](https://user-images.githubusercontent.com/9141017/42243637-46c632e0-7f12-11e8-88f2-4069469289e2.png)\r\n"},{"labels":["enhancement"],"text":"When creating a user role, the API should automatically create a few rows in directus_permissions as well:\r\n\r\n![image](https://user-images.githubusercontent.com/9141017/43797883-da752406-9a56-11e8-98d8-f59aabf722d2.png)\r\n"},{"labels":[null,"enhancement"],"text":"For example, in the `kiosks` table there are columns for `id`, `status`, `location`, and `theater`. However, `directus_fields` contains an additional row: `number`.\r\n\r\nThe API returns **all 5** of the rows from `directus_fields` on GET:\r\n\r\n```json\r\n{\r\n  \"data\": [\r\n    {\r\n      \"collection\": \"kiosks\",\r\n      \"field\": \"id\",\r\n      \"sort\": \"1\",\r\n      \"primary_key\": true,\r\n      \"default_value\": null,\r\n      \"note\": null,\r\n      \"signed\": false,\r\n      \"id\": 137,\r\n      \"type\": \"INT\",\r\n      \"managed\": true,\r\n      \"interface\": \"primary-key\",\r\n      \"hidden_input\": true,\r\n      \"hidden_list\": false,\r\n      \"required\": true,\r\n      \"options\": null,\r\n      \"locked\": false,\r\n      \"translation\": null,\r\n      \"readonly\": false,\r\n      \"view_width\": 4,\r\n      \"validation\": null,\r\n      \"group\": null\r\n    },\r\n    {\r\n      \"collection\": \"kiosks\",\r\n      \"field\": \"status\",\r\n      \"sort\": \"2\",\r\n      \"primary_key\": false,\r\n      \"default_value\": \"online\",\r\n      \"note\": null,\r\n      \"id\": 141,\r\n      \"type\": \"VARCHAR\",\r\n      \"managed\": true,\r\n      \"interface\": \"status\",\r\n      \"hidden_input\": false,\r\n      \"hidden_list\": false,\r\n      \"required\": false,\r\n      \"options\": {\r\n        \"status_mapping\": {\r\n          \"draft\": {\r\n            \"name\": \"Draft\"\r\n          },\r\n          \"offline\": {\r\n            \"name\": \"Offline\"\r\n          },\r\n          \"online\": {\r\n            \"name\": \"Online\"\r\n          }\r\n        }\r\n      },\r\n      \"locked\": false,\r\n      \"translation\": null,\r\n      \"readonly\": false,\r\n      \"view_width\": 4,\r\n      \"validation\": null,\r\n      \"group\": null,\r\n      \"signed\": null\r\n    },\r\n    {\r\n      \"collection\": \"kiosks\",\r\n      \"field\": \"location\",\r\n      \"sort\": \"3\",\r\n      \"primary_key\": false,\r\n      \"default_value\": null,\r\n      \"note\": null,\r\n      \"id\": 140,\r\n      \"type\": \"VARCHAR\",\r\n      \"managed\": true,\r\n      \"interface\": \"text-input\",\r\n      \"hidden_input\": false,\r\n      \"hidden_list\": false,\r\n      \"required\": false,\r\n      \"options\": null,\r\n      \"locked\": false,\r\n      \"translation\": null,\r\n      \"readonly\": false,\r\n      \"view_width\": 4,\r\n      \"validation\": null,\r\n      \"group\": null,\r\n      \"signed\": null\r\n    },\r\n    {\r\n      \"collection\": \"kiosks\",\r\n      \"field\": \"theater\",\r\n      \"sort\": null,\r\n      \"primary_key\": false,\r\n      \"default_value\": null,\r\n      \"note\": null,\r\n      \"id\": 138,\r\n      \"type\": \"M2O\",\r\n      \"managed\": true,\r\n      \"interface\": \"many-to-one\",\r\n      \"hidden_input\": false,\r\n      \"hidden_list\": false,\r\n      \"required\": false,\r\n      \"options\": {\r\n        \"template\": \"{{name}}\"\r\n      },\r\n      \"locked\": false,\r\n      \"translation\": null,\r\n      \"readonly\": false,\r\n      \"view_width\": 4,\r\n      \"validation\": null,\r\n      \"group\": null,\r\n      \"signed\": null\r\n    },\r\n    {\r\n      \"id\": 139,\r\n      \"collection\": \"kiosks\",\r\n      \"field\": \"number\",\r\n      \"type\": \"INT\",\r\n      \"interface\": \"numeric\",\r\n      \"options\": null,\r\n      \"locked\": false,\r\n      \"translation\": null,\r\n      \"readonly\": false,\r\n      \"required\": false,\r\n      \"sort\": null,\r\n      \"note\": null,\r\n      \"hidden_input\": false,\r\n      \"hidden_list\": false,\r\n      \"view_width\": 4,\r\n      \"group\": null,\r\n      \"validation\": null\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nHOWEVER, when trying to update the `number` field, the API throws an error, because it can't find the `number` column in the DB.\r\n\r\nIf a field _doesn't_ exist in the DB, but _it does_ in `directus_fields`, the API should ignore it."},{"labels":["enhancement",null,null],"text":"**Is your feature request related to a problem? Please describe.**\r\nWe treat the management of fields on a blacklist bases; eg: when adding a fieldname to the column, it _disables_ the field. However, statuses work the other way around. Adding a status name to the column _activates_ it. This also means that by default all the statuses are _disabled_. \r\n\r\n**Describe the solution you'd like**\r\nInstead of calling it `allowed_statuses` (and thus making it opt-in), name it `status_blacklist` (in line with `read_field_blacklist` and `write_field_blacklist` and make it opt-out.\r\n\r\n**Describe alternatives you've considered**\r\nThe alternative would be to add all the fields on create of new rows, but this seems like an extra (unnecessary) hassle.\r\n\r\n@benhaynes thoughts?"},{"labels":["enhancement"],"text":"Uploading a file in binary (content-type: image/jpeg) results in \r\n\r\n```\r\n{\r\n    \"error\": {\r\n        \"code\": 13,\r\n        \"message\": \"Invalid or Empty Payload\",\r\n        \"class\": \"Directus\\\\Exception\\\\InvalidPayloadException\",\r\n        \"file\": \"/Users/rijkvanzanten/Development/api/src/core/Directus/Application/Route.php\",\r\n...\r\n```"},{"labels":["enhancement",null],"text":"Right now, sorting on a relational value is pretty useless, because it only allows sorting by the stored ID. To fix this, we should have the dotnotation work in `sort` as well:\r\n\r\nFor example, fetching a collection `kiosks` that has a relation to `theaters` is currently returning:\r\n\r\n```js\r\n// GET /items/kiosks?fields=id,theater.id,theater.name&sort=theater\r\n\r\n// NOTE: sorts by theater.id\r\n\r\n...\r\n    {\r\n      \"id\": 51,\r\n      \"theater\": {\r\n        \"id\": 1,\r\n        \"name\": \"Jacksonville 14\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 127,\r\n      \"theater\": {\r\n        \"id\": 1,\r\n        \"name\": \"Jacksonville 14\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 177,\r\n      \"theater\": {\r\n        \"id\": 2,\r\n        \"name\": \"Spokane 12\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 66,\r\n      \"theater\": {\r\n        \"id\": 3,\r\n        \"name\": \"Sparkle 4\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 64,\r\n      \"theater\": {\r\n        \"id\": 4,\r\n        \"name\": \"Alamo Cinema\"\r\n      }\r\n    },\r\n...\r\n```\r\n\r\nWith sort dot notation, this is possible:\r\n\r\n```js\r\n// GET /items/kiosks?fields=id,theater.id,theater.name&sort=theater.name\r\n\r\n...\r\n    {\r\n      \"id\": 64,\r\n      \"theater\": {\r\n        \"id\": 4,\r\n        \"name\": \"Alamo Cinema\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 51,\r\n      \"theater\": {\r\n        \"id\": 1,\r\n        \"name\": \"Jacksonville 14\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 127,\r\n      \"theater\": {\r\n        \"id\": 1,\r\n        \"name\": \"Jacksonville 14\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 66,\r\n      \"theater\": {\r\n        \"id\": 3,\r\n        \"name\": \"Sparkle 4\"\r\n      }\r\n    },\r\n    {\r\n      \"id\": 177,\r\n      \"theater\": {\r\n        \"id\": 2,\r\n        \"name\": \"Spokane 12\"\r\n      }\r\n    },\r\n...\r\n```"},{"labels":["enhancement"],"text":"**Is your feature request related to a problem? Please describe.**\r\nUseful parameters like `filter` and `sort` don't seem to work for all system endpoints.\r\n\r\n**Describe the solution you'd like**\r\nAll endpoints that are available for getting regular items should work for all system endpoints too"},{"labels":["enhancement"],"text":"@WellingGuzman – I've updated the string values for permissions (and we had to split `comment` and `explain`). Could you take a look?\r\n\r\nhttps://github.com/directus/api/wiki/Role-Permissions"},{"labels":["enhancement"],"text":"Implement a cronjob manager that uses the same entry point for all jobs."},{"labels":["enhancement"],"text":"**Describe the bug**\r\nThe API doesn't return the `default_value` field in `/fields`\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Request `/fields/:collection`\r\n2. Notice the lack of `default_value`\r\n3. Tear up a little\r\n\r\n**Expected behavior**\r\nI expected the API to return the `default_value` of the field together with the rest of the field info\r\n"},{"labels":["enhancement"],"text":"**Is your feature request related to a problem? Please describe.**  \r\nWhen the user doesn't have any config file setup, the API returns a 404 for every route. While this makes sense, it doesn't give the user any clue on what's wrong.\r\n\r\n**Describe the solution you'd like**  \r\nSeeing the API needs at least 1 config file to work properly, the API should return an error when no config has been found.\r\n\r\n**Describe alternatives you've considered**  \r\n\r\n**Additional context**  "},{"labels":["enhancement"],"text":"EG:\r\n\r\n*Multiple to one value*\r\n\r\n`PATCH /fields/1,2,3`\r\n\r\n```\r\n{\r\n  \"author\": 3\"\r\n}\r\n```\r\n\r\n*Multiple to multiple values*\r\n\r\n`PATCH /fields`\r\n\r\n```\r\n[\r\n  { \"id\": 1, \"sort\": 1 },\r\n  { \"id\": 15, \"sort\": 2 },\r\n  { \"id\": 23, \"sort\": 3 }\r\n]\r\n```"},{"labels":["enhancement"],"text":"In an error like:\r\n\r\n```js\r\n{code: 4, message: \"hidden: This value should not be blank.\"}\r\n```\r\n\r\nIt's quite hard to get the field (`hidden`) out of the message programmatically. It would be nice if these variables could be extracted into their own fields as well:\r\n\r\n```json\r\n{\r\n  \"code\": 4,\r\n  \"message\": \"hidden: this value should not be blank\",\r\n  \"field\": \"hidden\"\r\n}\r\n```\r\n\r\nThat way, I can use them to translate the error messages dynamically 😄 "},{"labels":["enhancement"],"text":"! means _not_. AKA setting the value of a parameter to `!` should _not_ include any of it:\r\n\r\n`fields=*` all fields, `fields=!` no fields (eg no data)"},{"labels":["enhancement"],"text":"EG change `ORDER BY sort` to `ORDER BY ISNULL(sort),sort;` or similar"},{"labels":["enhancement",null],"text":"We talked about this at the beginning but I can remember if we created a ticket for it or mention it somewhere. Before I forget about this again, It would be ideal to create the API as a separate package that user can use as dependency of their projects.\r\n\r\nIn theory this repo uses this \"package\" but it needs to be split."},{"labels":["enhancement",null],"text":"Implement job queue adapters."},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"_Only_ messages, not regular activity items"},{"labels":["enhancement"],"text":"Let's change this permission so that we can three-way toggle:\r\n\r\n* `none`\r\n* `comment`\r\n* `explain` (FORCE COMMENT)"},{"labels":["enhancement"],"text":"**Is your feature request related to a problem? Please describe.**\r\n> How can I leverage browser caching for images served from the thumbnailer? I've enabled caching for apache but the thumbnailer is not picking it up:\r\n'/storage/....' gets cacheded\r\n'/thumbnail/2000/800/crop/...' does not\r\n\r\n**Describe the solution you'd like**\r\nThe caching settings for the thumbnailer should be in `directus_settings`, just like the other settings for the thumbnailer.\r\n\r\n**Describe alternatives you've considered**\r\nn/a\r\n\r\n**Additional context**\r\nThanks to Sebastian for the idea 🙂 \r\n"},{"labels":["enhancement"],"text":"> `lang` is a CSV of languages that should be returned with the response. This parameter can only be used when a Translation field has been included in the collection. This parameter supports the wildcard (`*`) to return all translations."},{"labels":["enhancement"],"text":"Allow multiple filter to the same column.\r\n\r\n`Country = 'Japan' OR Country = 'Germany'`"},{"labels":["enhancement"],"text":"> Always returns success to avoid malicious checks for valid email addresses"},{"labels":["enhancement"],"text":"Add the email to the JWT Payload"},{"labels":["enhancement"],"text":"While trying to authenticate using basic authentication using Okta, I couldn't because they required a password.\r\n\r\nIt will be good if you allow two options empty password or the same user as password."},{"labels":["enhancement"],"text":"Using `fields.validation` column"},{"labels":["enhancement"],"text":"When the API redirects to the app, the following payload is provided in the token:\r\n\r\n```json\r\n{\r\n  \"type\": \"request_token\",\r\n  \"id\": 4,\r\n  \"exp\": 1526061779\r\n}\r\n```\r\n\r\nHowever, there is no way of knowing what API to log into with this..\r\n\r\nTo fix this, we should add the API url to this payload. \r\n\r\n```json\r\n{\r\n  \"type\": \"request_token\",\r\n  \"id\": 4,\r\n  \"exp\": 1526061779,\r\n  \"url\": \"https://demo-api.getdirectus.com\"\r\n}\r\n```"},{"labels":["enhancement"],"text":"Right now, an invalid login is returned as an (English) string:\r\n`http://localhost:8080/login?error=User%20with%20email%20%22rijkvanzanten%40me.com%22%20not%20found`\r\n\r\nWith i18n in mind, there is no way to accurately translate this right now.\r\n\r\nIt would be perfect if the API would return \r\n```json\r\n{\r\n  \"error\": {\r\n    \"code\": 111,\r\n    \"email\": \"rijkvanzanten@me.com\"\r\n  }\r\n}\r\n```\r\n\r\nthat way, the app can map `111` to the string `User with email \"${email}\" not found`."},{"labels":["enhancement"],"text":"We already have Event Hooks, but I would like to have one DEMO Web Hook ready for use out-of-the-box. That way people can see how they work and we can say \"we have them\". Any new ones can be created by users."},{"labels":["enhancement"],"text":"- [ ] Reorder columns\r\n- [ ] Add indexes\r\n- [ ] Add Foreign keys\r\n\r\nReordering columns, and adding index where is needed can improve database performance.\r\n\r\n_More details will be added later when is time to work on these performance points._"},{"labels":["enhancement"],"text":""},{"labels":["enhancement",null],"text":"Based on field Get the avg, min or max value"},{"labels":["enhancement"],"text":"All `FILE` type interfaces should have a relationship to `directus_files` by default"},{"labels":["enhancement"],"text":"There is a lot of junk in the error output:\r\n\r\n```json\r\n{\r\n\t\"error\": {\r\n\t\t\"code\": 300,\r\n\t\t\"message\": \"Reading items from \\\"members\\\" collection was denied\",\r\n\t\t\"class\": \"Directus\\\\Permissions\\\\Exception\\\\ForbiddenCollectionReadException\",\r\n\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Permissions/Acl.php\",\r\n\t\t\"line\": 724,\r\n\t\t\"trace\": [\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Database/TableGateway/BaseTableGateway.php\",\r\n\t\t\t\t\"line\": 1071,\r\n\t\t\t\t\"function\": \"enforceReadOnce\",\r\n\t\t\t\t\"class\": \"Directus\\\\Permissions\\\\Acl\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t\"members\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Database/TableGateway/RelationalTableGateway.php\",\r\n\t\t\t\t\"line\": 883,\r\n\t\t\t\t\"function\": \"enforceReadPermission\",\r\n\t\t\t\t\"class\": \"Directus\\\\Database\\\\TableGateway\\\\BaseTableGateway\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Database/TableGateway/RelationalTableGateway.php\",\r\n\t\t\t\t\"line\": 723,\r\n\t\t\t\t\"function\": \"loadItems\",\r\n\t\t\t\t\"class\": \"Directus\\\\Database\\\\TableGateway\\\\RelationalTableGateway\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"getItems\",\r\n\t\t\t\t\"class\": \"Directus\\\\Database\\\\TableGateway\\\\RelationalTableGateway\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnull\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Services/AbstractService.php\",\r\n\t\t\t\t\"line\": 274,\r\n\t\t\t\t\"function\": \"call_user_func_array\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"primaryKeyFieldName\": \"id\",\r\n\t\t\t\t\t\t\t\"memcache\": null\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"getItems\"\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t]\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Services/AbstractService.php\",\r\n\t\t\t\t\"line\": 237,\r\n\t\t\t\t\"function\": \"getDataAndSetResponseCacheTags\",\r\n\t\t\t\t\"class\": \"Directus\\\\Services\\\\AbstractService\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"primaryKeyFieldName\": \"id\",\r\n\t\t\t\t\t\t\t\"memcache\": null\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"getItems\"\r\n\t\t\t\t\t],\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t]\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Services/ItemsService.php\",\r\n\t\t\t\t\"line\": 49,\r\n\t\t\t\t\"function\": \"getItemsAndSetResponseCacheTags\",\r\n\t\t\t\t\"class\": \"Directus\\\\Services\\\\AbstractService\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"primaryKeyFieldName\": \"id\",\r\n\t\t\t\t\t\t\"memcache\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/endpoints/Items.php\",\r\n\t\t\t\t\"line\": 45,\r\n\t\t\t\t\"function\": \"findAll\",\r\n\t\t\t\t\"class\": \"Directus\\\\Services\\\\ItemsService\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t\"members\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"limit\": \"1000\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"all\",\r\n\t\t\t\t\"class\": \"Directus\\\\Api\\\\Routes\\\\Items\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"env\": \"_\",\r\n\t\t\t\t\t\t\"collection\": \"members\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/Handlers/Strategies/RequestResponse.php\",\r\n\t\t\t\t\"line\": 41,\r\n\t\t\t\t\"function\": \"call_user_func\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\"all\"\r\n\t\t\t\t\t],\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"env\": \"_\",\r\n\t\t\t\t\t\t\"collection\": \"members\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/Route.php\",\r\n\t\t\t\t\"line\": 335,\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\Handlers\\\\Strategies\\\\RequestResponse\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\"all\"\r\n\t\t\t\t\t],\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"env\": \"_\",\r\n\t\t\t\t\t\t\"collection\": \"members\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/MiddlewareAwareTrait.php\",\r\n\t\t\t\t\"line\": 117,\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\Route\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/Route.php\",\r\n\t\t\t\t\"line\": 313,\r\n\t\t\t\t\"function\": \"callMiddlewareStack\",\r\n\t\t\t\t\"class\": \"Slim\\\\Route\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/App.php\",\r\n\t\t\t\t\"line\": 513,\r\n\t\t\t\t\"function\": \"run\",\r\n\t\t\t\t\"class\": \"Slim\\\\Route\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Application/Http/Middlewares/AuthenticationMiddleware.php\",\r\n\t\t\t\t\"line\": 110,\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Directus\\\\Application\\\\Http\\\\Middlewares\\\\AuthenticationMiddleware\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/DeferredCallable.php\",\r\n\t\t\t\t\"line\": 43,\r\n\t\t\t\t\"function\": \"call_user_func_array\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{}\r\n\t\t\t\t\t]\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\DeferredCallable\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/MiddlewareAwareTrait.php\",\r\n\t\t\t\t\"line\": 70,\r\n\t\t\t\t\"function\": \"call_user_func\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Application/Http/Middlewares/CorsMiddleware.php\",\r\n\t\t\t\t\"line\": 20,\r\n\t\t\t\t\"function\": \"Slim\\\\{closure}\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Directus\\\\Application\\\\Http\\\\Middlewares\\\\CorsMiddleware\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/DeferredCallable.php\",\r\n\t\t\t\t\"line\": 43,\r\n\t\t\t\t\"function\": \"call_user_func_array\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{}\r\n\t\t\t\t\t]\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\DeferredCallable\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/MiddlewareAwareTrait.php\",\r\n\t\t\t\t\"line\": 70,\r\n\t\t\t\t\"function\": \"call_user_func\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/akrabat/rka-ip-address-middleware/src/IpAddress.php\",\r\n\t\t\t\t\"line\": 93,\r\n\t\t\t\t\"function\": \"Slim\\\\{closure}\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"RKA\\\\Middleware\\\\IpAddress\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/DeferredCallable.php\",\r\n\t\t\t\t\"line\": 43,\r\n\t\t\t\t\"function\": \"call_user_func_array\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t{}\r\n\t\t\t\t\t]\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"function\": \"__invoke\",\r\n\t\t\t\t\"class\": \"Slim\\\\DeferredCallable\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/MiddlewareAwareTrait.php\",\r\n\t\t\t\t\"line\": 70,\r\n\t\t\t\t\"function\": \"call_user_func\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/MiddlewareAwareTrait.php\",\r\n\t\t\t\t\"line\": 117,\r\n\t\t\t\t\"function\": \"Slim\\\\{closure}\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/App.php\",\r\n\t\t\t\t\"line\": 406,\r\n\t\t\t\t\"function\": \"callMiddlewareStack\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/vendor/slim/slim/Slim/App.php\",\r\n\t\t\t\t\"line\": 314,\r\n\t\t\t\t\"function\": \"process\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/src/core/Directus/Application/Application.php\",\r\n\t\t\t\t\"line\": 154,\r\n\t\t\t\t\"function\": \"run\",\r\n\t\t\t\t\"class\": \"Slim\\\\App\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": [\r\n\t\t\t\t\tfalse\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"file\": \"/var/www/directus-demo-api/public/index.php\",\r\n\t\t\t\t\"line\": 5,\r\n\t\t\t\t\"function\": \"run\",\r\n\t\t\t\t\"class\": \"Directus\\\\Application\\\\Application\",\r\n\t\t\t\t\"type\": \"->\",\r\n\t\t\t\t\"args\": []\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n```\r\n\r\nThe output should just be \r\n\r\n```json\r\n{\r\n\t\"error\": {\r\n\t\t\"code\": 300,\r\n\t\t\"message\": \"Reading items from \\\"members\\\" collection was denied\"\r\n        }\r\n}\r\n```"},{"labels":[null,"enhancement",null],"text":"`/auth/reset-request` throws a 404.."},{"labels":["enhancement",null],"text":"Throwing you a curveball here 😉 \r\n\r\nI'd like to be able to have relational items _in_ directus settings. For example, for the `logo` setting, I would use a `directus_files` relationship, so I can fetch the logo information directly when fetching `directus_settings`.\r\n\r\n"},{"labels":["enhancement"],"text":"```\r\nPATCH /items/<col>/<pk>/rollback/<id>\r\n```\r\n\r\nshould be:\r\n\r\n```\r\nPATCH /items/<col>/<pk>/revert/<id>\r\n```\r\n"},{"labels":["enhancement"],"text":"In `directus_activity` a rollback should be saved as `ROLLBACK` instead of `UPDATE`"},{"labels":["enhancement"],"text":"Files / users need to be able to fetch the revisions just like regular items can."},{"labels":["enhancement"],"text":"If the status is being said to a soft-delete value, it should be marked as soft delete in directus_activity\r\n"},{"labels":["enhancement"],"text":"```\r\nPOST /items/<col>/<pk>/rollback/<revision-pk>\r\n```\r\n\r\nIt should grab the data as stored in that revision and overwrite all the data in the item with that old stored data."},{"labels":["enhancement"],"text":"Right now, it still contains fields from the initial implementation:\r\n\r\n```json\r\n{\r\n  \"name\": \"okta\",\r\n  \"oauth_version\": 2,\r\n  \"icon\": \"http://localhost/api/public/extensions/core/auth/okta/icon.svg\",\r\n  \"authorization_url\": \"...\",\r\n  \"state\": \"...\",\r\n  \"callback_url\": \"...\"\r\n},\r\n```\r\n\r\nAll we need in `/auth/sso` now is:\r\n\r\n```json\r\n{\r\n  \"name\": \"okta\",\r\n  \"icon\": \"http://localhost/api/public/extensions/core/auth/okta/icon.svg\"\r\n}\r\n```"},{"labels":["enhancement"],"text":"`/public/extensions/core/auth/GitHub` => `/public/extensions/core/auth/github`"},{"labels":["enhancement"],"text":"See #91 for the accurate implementation details"},{"labels":["enhancement"],"text":"`sort=?` should randomize the results\r\n`sort=category,?` should sort by (group on) category and then randomly sort the grouped results"},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"When a column exists in the table, it should be returned in `/fields` _even if there is no record in `directus_fields` for it. The information in `directus_fields` should be a progressive enhancement on the actual existing columns. That way, the system will work as expected, even if you setup your database directly in MySQL instead of through Directus."},{"labels":["enhancement"],"text":"Add directus_roles and directus_user_roles, remove directus_groups"},{"labels":["enhancement"],"text":"`GET /` should return some meta info about the API like the version / installed state"},{"labels":["enhancement"],"text":"Instead of type: LOGIN, action: LOGIN; it should be type: LOGIN, action: REFRESH. That way, we can differentiate between users logging in and users _staying_ logged in"},{"labels":["enhancement"],"text":"There is currently no way of accessing the revisions from the API. The application needs this to be able to render / make available the rollback functionality"},{"labels":["enhancement"],"text":"It will be nice to have more http headers in the http response, such as `ETag`, `Last-Modified`, `Date` and `Location`."},{"labels":["enhancement"],"text":"I think this is due to the fact that the API doesn't ignore the `GROUP` type yet\r\n\r\nURL:\r\n```\r\nhttps://demo-api.getdirectus.com/_/items/projects\r\n```\r\n\r\nQuery parameters:\r\n```\r\nfields: *.*\r\nmeta: result_count,total_count\r\nfilter[group][gte]: 1\r\n```\r\n\r\nReturns:\r\n```\r\n{\"error\":{\"code\":9,\"message\":\"Failed generating the SQL query. Statement could not be executed (42S22 - 1054 - Unknown column 'projects.group' in 'where clause')\",\"query\":\"SELECT `projects`.`id` AS `id`, `projects`.`id` AS `id`, `projects`.`status` AS `status`, `projects`.`featured_image` AS `featured_image`, `projects`.`type` AS `type`, `projects`.`name` AS `name`, `projects`.`slug` AS `slug`, `projects`.`publish_date` AS `publish_date` FROM `projects` WHERE `projects`.`group` >= '1' ORDER BY `projects`.`id` ASC LIMIT 200 OFFSET 0\",\"class\":\"Directus\\\\Database\\\\Exception\\\\InvalidQueryException\",\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Database\\/TableGateway\\/BaseTableGateway.php\",\"line\":709,\"trace\":[{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/zendframework\\/zend-db\\/src\\/TableGateway\\/AbstractTableGateway.php\",\"line\":209,\"function\":\"executeSelect\",\"class\":\"Directus\\\\Database\\\\TableGateway\\\\BaseTableGateway\",\"type\":\"->\",\"args\":[{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Database\\/TableGateway\\/RelationalTableGateway.php\",\"line\":853,\"function\":\"selectWith\",\"class\":\"Zend\\\\Db\\\\TableGateway\\\\AbstractTableGateway\",\"type\":\"->\",\"args\":[{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Database\\/TableGateway\\/RelationalTableGateway.php\",\"line\":690,\"function\":\"loadItems\",\"class\":\"Directus\\\\Database\\\\TableGateway\\\\RelationalTableGateway\",\"type\":\"->\",\"args\":[{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}}]},{\"function\":\"getItems\",\"class\":\"Directus\\\\Database\\\\TableGateway\\\\RelationalTableGateway\",\"type\":\"->\",\"args\":[{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}},null]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Services\\/AbstractService.php\",\"line\":272,\"function\":\"call_user_func_array\",\"args\":[[{\"primaryKeyFieldName\":\"id\",\"memcache\":null},\"getItems\"],[{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}},null]]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Services\\/AbstractService.php\",\"line\":237,\"function\":\"getDataAndSetResponseCacheTags\",\"class\":\"Directus\\\\Services\\\\AbstractService\",\"type\":\"->\",\"args\":[[{\"primaryKeyFieldName\":\"id\",\"memcache\":null},\"getItems\"],[{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}},null]]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Services\\/ItemsService.php\",\"line\":49,\"function\":\"getItemsAndSetResponseCacheTags\",\"class\":\"Directus\\\\Services\\\\AbstractService\",\"type\":\"->\",\"args\":[{\"primaryKeyFieldName\":\"id\",\"memcache\":null},{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/endpoints\\/Items.php\",\"line\":39,\"function\":\"findAll\",\"class\":\"Directus\\\\Services\\\\ItemsService\",\"type\":\"->\",\"args\":[\"projects\",{\"fields\":\"*.*\",\"meta\":\"result_count,total_count\",\"filter\":{\"group\":{\"gte\":\"1\"}}}]},{\"function\":\"all\",\"class\":\"Directus\\\\Api\\\\Routes\\\\Items\",\"type\":\"->\",\"args\":[{},{},{\"env\":\"_\",\"collection\":\"projects\"}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/Handlers\\/Strategies\\/RequestResponse.php\",\"line\":41,\"function\":\"call_user_func\",\"args\":[[{},\"all\"],{},{},{\"env\":\"_\",\"collection\":\"projects\"}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/Route.php\",\"line\":335,\"function\":\"__invoke\",\"class\":\"Slim\\\\Handlers\\\\Strategies\\\\RequestResponse\",\"type\":\"->\",\"args\":[[{},\"all\"],{},{},{\"env\":\"_\",\"collection\":\"projects\"}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/MiddlewareAwareTrait.php\",\"line\":117,\"function\":\"__invoke\",\"class\":\"Slim\\\\Route\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/Route.php\",\"line\":313,\"function\":\"callMiddlewareStack\",\"class\":\"Slim\\\\Route\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/App.php\",\"line\":495,\"function\":\"run\",\"class\":\"Slim\\\\Route\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/akrabat\\/rka-ip-address-middleware\\/src\\/IpAddress.php\",\"line\":93,\"function\":\"__invoke\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"function\":\"__invoke\",\"class\":\"RKA\\\\Middleware\\\\IpAddress\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/DeferredCallable.php\",\"line\":43,\"function\":\"call_user_func_array\",\"args\":[{},[{},{},{}]]},{\"function\":\"__invoke\",\"class\":\"Slim\\\\DeferredCallable\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/MiddlewareAwareTrait.php\",\"line\":70,\"function\":\"call_user_func\",\"args\":[{},{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Application\\/Http\\/Middlewares\\/AuthenticationMiddleware.php\",\"line\":113,\"function\":\"Slim\\\\{closure}\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"function\":\"__invoke\",\"class\":\"Directus\\\\Application\\\\Http\\\\Middlewares\\\\AuthenticationMiddleware\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/DeferredCallable.php\",\"line\":43,\"function\":\"call_user_func_array\",\"args\":[{},[{},{},{}]]},{\"function\":\"__invoke\",\"class\":\"Slim\\\\DeferredCallable\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/MiddlewareAwareTrait.php\",\"line\":70,\"function\":\"call_user_func\",\"args\":[{},{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Application\\/Http\\/Middlewares\\/CorsMiddleware.php\",\"line\":20,\"function\":\"Slim\\\\{closure}\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"function\":\"__invoke\",\"class\":\"Directus\\\\Application\\\\Http\\\\Middlewares\\\\CorsMiddleware\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/DeferredCallable.php\",\"line\":43,\"function\":\"call_user_func_array\",\"args\":[{},[{},{},{}]]},{\"function\":\"__invoke\",\"class\":\"Slim\\\\DeferredCallable\",\"type\":\"->\",\"args\":[{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/MiddlewareAwareTrait.php\",\"line\":70,\"function\":\"call_user_func\",\"args\":[{},{},{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/MiddlewareAwareTrait.php\",\"line\":117,\"function\":\"Slim\\\\{closure}\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/App.php\",\"line\":388,\"function\":\"callMiddlewareStack\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/vendor\\/slim\\/slim\\/Slim\\/App.php\",\"line\":296,\"function\":\"process\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[{},{}]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/src\\/core\\/Directus\\/Application\\/Application.php\",\"line\":154,\"function\":\"run\",\"class\":\"Slim\\\\App\",\"type\":\"->\",\"args\":[false]},{\"file\":\"\\/var\\/www\\/directus-demo-api\\/public\\/index.php\",\"line\":5,\"function\":\"run\",\"class\":\"Directus\\\\Application\\\\Application\",\"type\":\"->\",\"args\":[]}]}}\r\n```"},{"labels":["enhancement"],"text":"Update the directory structure to this:\r\n\r\n```\r\n/ (api root)\r\n  ...\r\n  /public \r\n  ...\r\n    /extensions\r\n      /core\r\n        /auth\r\n        /hooks\r\n        /interfaces\r\n        /listings\r\n        /pages\r\n      /custom\r\n        /auth\r\n        /hooks\r\n        /interfaces\r\n        /listings\r\n        /pages\r\n```\r\n\r\nDisable access to all `php` files inside the public directory using `.htaccess` and `nginx`"},{"labels":["enhancement",null,null,null],"text":"## Description\r\nWhat if we could also update items by providing a filter instead of a (set of) primary-key(s)?\r\n\r\nIn SQL for example, you could update items `where title = 'title'` etc. This could potentially work in the URL endpoints too as follows:\r\n\r\n`PUT /items/projects?filter[title][eq]=title` (or `PATCH` for that matter)\r\n\r\n## Usecase\r\nI ran into this need just now when working with bookmarks. A bookmark should update a record in `directus_collection_presets` where the user ID is that of the user and where the title is not null. In order to do this now, I have to `GET` the collection presets first to retrieve the primary key, followed by a `PUT` using this primary key in order to update the value. It would save me a step if I could `PATCH /collection_presets?filter[title][nnull]=1&filter[user][eq]=12`."},{"labels":["enhancement"],"text":"https://developer.okta.com/standards/SCIM/index.html#overview\r\n\r\nAll endpoints should be registered under a top-level `scim` scope.\r\n`/scim/xxxxx`"},{"labels":["enhancement"],"text":"When the request path is the storage directory it shouldn't route that request to the API endpoints but rather return a not found response.\r\n\r\nConditions:\r\n- When the file doesn't exists in storage."},{"labels":["enhancement"],"text":"System interfaces are going to be replace by System types.\r\n\r\nWe are noW creating new types to determine if a field is a system field, such as `status` and `primary_key`"},{"labels":[null,"enhancement"],"text":"Updating a file record with a new image should replace the current file with the new one."},{"labels":["enhancement"],"text":"All fields and collections needs `directus_fields`, `directus_collections` and `directus_relations` information in order to work properly."},{"labels":["enhancement"],"text":"Currently update and create use the same method.\r\n\r\nThe method update or create an item depending whether the payload has primary key."},{"labels":[null,"enhancement"],"text":"Allow user to customize the Directus default email templates.\r\n\r\nUsers has requested a way to replace the current emails template with their own.\r\n\r\nAdding a new directory in `/customs` will allow them to create a template with the same name, having the custom template priority over the default one."},{"labels":["enhancement"],"text":"Allow the users to update server configuration via API.\r\n\r\nConfigurations such as increasing the upload size or execution time."},{"labels":["enhancement"],"text":"Create proper email subjects\r\n\r\nEmail subjects:\r\n- User invitation (currently: `Invitation to Directus`)\r\n- New Installation (currently: `Your new Directus instance: <project-title>`)\r\n- Forgot Password (currently: `Reset password`)\r\n- Reset Password (currently: `New password`)\r\n\r\nForgot password is when the user request they have forgotten their password, sending them a link to reset its password.\r\n\r\nReset password is when they received a temporary password."},{"labels":["enhancement"],"text":"Create the default templates for all Directus emails"},{"labels":["enhancement"],"text":"Before the application start, all exceptions are thrown into the stream. When the application is in production this may not be pretty to have.\r\n\r\nCatching these exceptions/errors and convert it to `json` can help the expected `json` from the api. Having to dump any exceptions to the stream is helpful when you are developing otherwise, no good."},{"labels":["enhancement"],"text":"Throw an exception when query failed due to a unique key duplication"},{"labels":["enhancement",null],"text":"There are certain parts in the API and the API's API's (so meta) that still use the term `table` instead of `collection`. For example in `hooks`:\r\n\r\n```php\r\n<?php\r\nreturn [\r\n    'filters' => [\r\n        'table.insert:before' => new \\Directus\\Customs\\Hooks\\Products\\BeforeInsertProducts()\r\n    //  ^^^^^^^\r\n    ]\r\n];\r\n```"},{"labels":["enhancement",null,null,null],"text":"It would be extremely cool if Directus had a native way of exporting and importing (existing) data and whole Directus setups. Moving from a locally installed Directus to hosted should/could be as easy as hitting export, logging in to hosted, and hitting import.\r\n\r\nDifferent \"types\" of import/export?:\r\n* Schema only\r\n  Just import/export your table setup & corresponding records in `directus_*` tables\r\n* Data only\r\n  Just import/export the data\r\n* Everything\r\n  A full database dump. Useful for backups & migrating between servers / hosted-local\r\n\r\nThoughts @WellingGuzman @benhaynes ?"},{"labels":["enhancement",null,null],"text":"This feels like it's an easy one to add, but i might be wrong.\r\n\r\nThe API will call a provided url for any given hook.\r\n\r\nThe questions that remain are:\r\n* Where do we keep this mapping? (DB vs config.php)\r\n* Do we support multiple webhooks per event?\r\n* Do we even need to bother designing a specific way of handling this, seeing how easy it would be to throw in a http request using the normal events?"},{"labels":["enhancement"],"text":"Add ability to fetch a item by revision.\r\n\r\nEx: Get information of a particular item when it was created. (first revision).\r\n\r\nEndpoint: `/items/articles/revision/1`"},{"labels":["enhancement"],"text":"Add ability to rollback an activity.\r\n\r\nEx: Item updated has a mistake? rollback to previous information."},{"labels":["enhancement"],"text":"Caching the router callable prevent the api for looking the callable on every request."},{"labels":["enhancement",null],"text":"Is creating a endpoint to check the API logs useful?\r\na endpoint `/server/logs` to see a full list of the logs, a collection of log files. and `/server/logs/<file>` get an specific file log data."},{"labels":["enhancement"],"text":"Add an adapter to authenticate with [Okta](https://www.okta.com/)."},{"labels":["enhancement"],"text":"Adding a option to put the API in read-only mode, we lock all actions except reading data from the API.\r\n\r\nWe can aggressively cache the result as there's not change to be expected."},{"labels":["enhancement"],"text":"Implement a caching layer for schema objects."},{"labels":["enhancement"],"text":"We have a cache library implement on some endpoints, some new endpoints may have not implemented cache completely."},{"labels":["enhancement"],"text":"Remove dependency of `BASE_PATH` constant from within classes and functions"},{"labels":["enhancement"],"text":"Right now, there is no limit on the filesize of the logs. This can potentially result in huge _huge_ file. We need to implement either a max filesize for the logs, or an \"expiry date\". (Either delete old records when filesize > threshold, or when logs.date < threshold)"},{"labels":["enhancement"],"text":"Add support for the used environment when sending emails. E.g.: `https://example.com/api/_/` or `https://example.com/api/staging/`"},{"labels":["enhancement",null],"text":"See [this Gist](https://gist.github.com/rijkvanzanten/993a4dba3046e47389d30657ff0b67ad) for the new status mapping structure"},{"labels":["enhancement",null],"text":"Because we really _really_ want to be able to call our tables  `directus_❤️`.\r\n\r\nOr on a more serious note: https://github.com/directus/directus/issues/2061#issuecomment-366307209  "},{"labels":["enhancement",null],"text":"Each extension should have the ability to add hooks and/or endpoints dynamically to the api. \r\n\r\nFor example, the `slug` interface has an option to mirror the content of another field. As of right now, this feature only works from the Directus app, seeing the interface doesn't have any say over the api.\r\n\r\nThis enhancement would mean that the interface has it's own entry point to the APIs hooks system.\r\n\r\n```\r\n.\r\n├── Interface.js\r\n├── Readonly.js\r\n├── hooks.php  <<<<<<<<<<<<\r\n├── meta.json\r\n├── package-lock.json\r\n└── package.json\r\n```\r\n\r\nthat allows it to modify values in the API as well. This would mean that interface settings are both for the app _and_ for the API. A very _very_ powerful feature.\r\n\r\nThe extension hooks could / should look the same as \"regular\" hooks:\r\n\r\n```php\r\n'hooks' => [\r\n    'postInsert' => function ($TableGateway, $record, $db) {\r\n        // ...\r\n    },\r\n]\r\n```\r\n\r\nIt would be very handy if _interfaces_ could get their options (as set in `directus_fields.options`) passed as well. BUT, seeing this is only valid for interfaces (and not all other extensions), it might not be worth it. (It can also be fetched from $db if needed).\r\n\r\nNext to Hooks, it's also crucial for extensions to be able to add endpoints directly. Again, the `slug` interface would add a `/slug` endpoint that would sluggify the value, so the application can use that endpoint to dynamically show the to-be-saved slugged value.\r\n\r\nJust like hooks, these endpoints would look the same as \"regular\" custom endpoints:\r\n\r\n```php\r\n$app->post('/slug', function () {\r\n    // ...\r\n});\r\n```\r\n\r\nand would reside in the their own file:\r\n\r\n ```\r\n.\r\n├── Interface.js\r\n├── Readonly.js\r\n├── endpoints.php  <<<<<<<<<<<<\r\n├── meta.json\r\n├── package-lock.json\r\n└── package.json\r\n```\r\n"},{"labels":["enhancement"],"text":"Could be very nice to have an \"official\" rate-limiting system in place that can use a user-defined setting (either in the api config file or (preferably) `directus_settings`) to protect the api "},{"labels":["enhancement"],"text":"Directus has a few system-records in the DB to operate properly. Think of records like system relations (files-folders).\r\n\r\nWe need to include an SQL file that can be used during installation so the DB is setup correctly.\r\n\r\nWe also need to make sure this file can be used when you already have data in your database. (When you move your existing dataset to directus)\r\n\r\nThis needs to wait a bit till we have finalized the api / app integration."},{"labels":["enhancement",null],"text":"This can be done in either of two ways:\r\n\r\n### Create installation endpoints\r\nThe API has an endpoint that can be `POST`-ed to to create a (new) config file. This means the application can have an installation flow build in that can be used for any api.\r\n\r\n### Add GUI _in_ the API\r\nWhen trying to use the api from the browser when there is no config file setup redirects to the install wizard.\r\n\r\nThere are a few unanswered questions:\r\n* Do we only allow the install wizard for \"fresh\" installations? E.g. the first config file\r\n* How would the user create additional config files? Manually?\r\n* In case we allow the user to use the same wizard for multiple envs, how do we secure this flow?\r\n\r\n"},{"labels":["enhancement",null],"text":"The API should be able to retrieve the nested (related) items based on primary key _and_ mixed collection, meaning it can nest items from multiple different tables"},{"labels":["enhancement"],"text":"The API can return more than one validation error on posting / updating items. For example: wrong datatype and too long.\r\n\r\nIn order to make the error more useful, we should change the `error` message structure to something like:\r\n\r\n```json\r\n{\r\n  \"code\": 4,\r\n  \"message\": \"There was a validation error on the fields\",\r\n  \"info\": [\r\n    {\r\n      \"field\": \"name\",\r\n      \"message\": \"This value should not be blank.\",\r\n      \"code\": 15\r\n    },\r\n    {\r\n      \"field\": \"age\",\r\n      \"message\": \"The maximum length has been exceeded\",\r\n      \"code\": 20\r\n    }\r\n  ]\r\n}\r\n```"},{"labels":["enhancement"],"text":"The status for each newly created item should default to either the status mapping as defined for the table (stored in `directus_collection.status_mapping`) or — if that's not setup — the default global status mapping in `directus_settings`"},{"labels":["enhancement",null],"text":"Sending messages between users is done by posting an item to activity with the content in the  `message` column. In order to do this, we need to be able to `POST` to `/activity`"},{"labels":["enhancement"],"text":"Add installation and usage instructions and add section on code structure"},{"labels":["enhancement"],"text":"Activity records in `directus_activity` are created as expected, but `directus_revisions` stays empty."}]