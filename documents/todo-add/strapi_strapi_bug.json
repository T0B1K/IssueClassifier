[{"labels":[null,null,null,"bug"],"text":"\r\n\r\n**Describe the bug**\r\nI'm no able to save a model through content type builder after I added a JSON field with an index with \"2dsphere\" value (I'm using mongoose connector).\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a JSON field in some model through admin UI\r\n2. Edit the `ModelName.settings.json` and add `\"index\":  \"2dsphere\"` to the previously created field\r\n3. Restart the server\r\n4. Try to add another field (any kind)\r\n5. An error message should appear on screen \r\n\r\n**Expected behavior**\r\nSave without problems\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nHere is a repo with this problem.\r\nhttps://github.com/gimoteco/strapi-bug-report\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.3\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.1.4\r\n- Database: MongoDB\r\n- Operating system: MacOS 10.15.6\r\n\r\n**Additional context**\r\nI tried to remove the index option and add a new index through a migration but when strapi starts it removes the previously created index.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nI have collection types with custom fields inside, as per https://strapi.io/documentation/v3.x/plugin-development/frontend-field-api.html#registering-a-new-field\r\n\r\nWhen trying to make a change in the content types builder to a collection type, component, or single type with a custom field in, the model cannot be saved.\r\n\r\nThe following errors are printed in the console:\r\n\r\n```\r\ncomponents[0].attributes.Icon field cannot have keys not specified in the object shape\r\n\"components[0].attributes.Icon.type must be one of the following values: media, string, text, richtext, json, enumeration, password, email, integer, biginteger, float, decimal, date, time, datetime, timestamp, boolean, component\"\r\n```\r\n\r\nThis used to work on v3.0.5 of strapi, and is broken since i updated to v3.1.4\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a plugin with a custom field as per https://strapi.io/documentation/v3.x/guides/registering-a-field-in-admin.html#setup\r\n2. Add the custom field type to a collection type\r\n3. Try to make a change in content type builder and save\r\n4. See error\r\n\r\n**Expected behavior**\r\nCustom fields should be supported by content type builder, as they used to be\r\n\r\n**System**\r\n\r\nNode.js version: v12.18.1\r\nNPM version: 6.14.5\r\nStrapi version: 3.1.4\r\nDatabase: postgres\r\nOperating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"Having over 3000 users will result in a \"payload to large\" error when changing permissions on the role that the users have.\r\n\r\n**Step by step to get the error**\r\n1. Go to Content type builder\r\n2. Create a collection type\r\n3. Make it a relation to users, so the collection has and belongs to many users\r\n4. Now create a script that creates 3000 + users\r\n5.  Go to roles and permissions\r\n6. Select the role that all users now have\r\n7. Make a change to something and press save\r\n8. See error\r\n\r\n_PUT https://HOSTURL/users-permissions/roles/ID\r\nError code: 413 (Payload Too Large)\r\nmain.a25116ef.chunk.js:1 Error: Payload Too Large\r\n    at main.a25116ef.chunk.js:1_\r\n\r\n\r\n**System**\r\n\r\n- Node.js version: v 10.15.1\r\n- NPM version: v 6.13.7\r\n- Strapi version: v 3.1.4\r\n- Database: mongodb\r\n- Operating system: debian\r\n\r\n**EDIT:**\r\nCreating a collection type is not needed for this error to occur. So you can skip step 1-3.\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nMultiple `is not` filter don't work the way they should work. \r\nIf you use only one `is not` filter, then everything except the used value is hidden (like it should be). But if you use more than one, they don't work. See the following screenshot:\r\n![Screenshot from 2020-08-23 21-44-14](https://user-images.githubusercontent.com/45003352/90987261-dbda0480-e589-11ea-9185-f81e65679705.png)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create some content type with some values\r\n2. Use multiple `is not` filters\r\n\r\n**System**\r\n- Strapi version: 3.1.4\r\n- Database: sqlite\r\n- Operating system: Ubuntu\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nConstraints on components (except required) always pass.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a component `comp` with a text field `name` that have constraint `max length` to `5`.\r\n2. Create a content-type `article` with this compo named `myCompo`, non-repeatable\r\n3. Make request:\r\n```\r\nPOST http://localhost:1337/articles\r\n\r\nbody: {\r\n  myCompo: {\r\n    name: \"a name that exceeds the max length\"\r\n  }\r\n}\r\n```\r\n4. See that the new entry is correctly saved and returned\r\n\r\n**Expected behavior**\r\nThe request should respond with an error 400 instead of 200.\r\n\r\n**System**\r\n\r\n- Node.js version: v10.21.0\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.1.4\r\n- Database: SQLite\r\n- Operating system: macOS\r\n\r\n**Additional context**\r\nThe only constraint that works is `required` because it is set directly in the database.\r\nYou can't see this bug if you use the admin panel because some validators run in the frontend.\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nThis has happened twice, first time I had to do a fresh install and lost a lot of data I'd input into Strapi. \r\nUsing the one click solution provided by Digital Ocean, I get Strapi up and running without issues. Then suddenly I'll make a change that requires Strapi to restart itself - this is normally fine and it does it. However, twice it has told me \"it's taking longer than expected\" but never actually restarts. \r\n\r\nIf I try to hit any the admin or any of my endpoints I just get NGINX 502 Bad Gateway. \r\n\r\nWhen trying to hit the endpoints etc, the Error Logs states: *7 connect() failed (111: Connection Refused) while connecting to Upstream Client: {my_ipaddress}).\r\n\r\nRestarting NGINX doesn't resolve the issue.\r\n\r\nI've not touched any configs at all, this is the out the box install Digital Ocean offers.\r\n\r\nIf it helps, the error log states the upstream is http://127.0.0.1:1337/{endpoint}.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nThe change that caused this was adding a new field to a Content Type. The content type already had entries in it, and the new field I made a required one. \r\n\r\n\r\n\r\n**System**\r\nNode Version- 12.18.3\r\nNPM Version - 6.14.6\r\nServer: / 2 GB Memory / 50 GB Disk / LON1 - Strapi 3.1.0 on Ubuntu 18.04\r\n\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhile creating a new component and adding a category for it, if you switch to the advanced settings tab and back to base settings, the category field will be missing.\r\n\r\nIn my case I was adding a single time with a component.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a single-type \r\n2. Add a component as a field\r\n3. Set the name and category\r\n4. Switch to advanced settings\r\n5. Switch back to base settings\r\n6. See missing category\r\n\r\n**Expected behavior**\r\nCategory should be cached in the browser when switching between tabs\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/8593673/90639618-c3fa2d80-e1e3-11ea-8a2e-38ff85e27b5f.png)\r\n![image](https://user-images.githubusercontent.com/8593673/90639649-ceb4c280-e1e3-11ea-9268-5c0ff6fcedde.png)\r\n![image](https://user-images.githubusercontent.com/8593673/90639671-db391b00-e1e3-11ea-91c0-e76d983e2296.png)\r\n\r\n**System**\r\n\r\n- Node.js version: 12.18.3\r\n- NPM version:6.14.6\r\n- Strapi version: 3.1.4\r\n- Database: SQLite\r\n- Operating system: Linux Mint 19.3 Tricia\r\n"},{"labels":[null,null,null,"bug"],"text":"This page I found on twitter does not work and returns 502\r\nhttps://blog.strapi.io/content-internationalization-with-strapi/\r\n\r\nTwitter link:\r\nhttps://twitter.com/strapijs/status/1041613814209421313?lang=en\r\n\r\nScreenshot:\r\n![image](https://user-images.githubusercontent.com/3635348/90511259-1a1f9000-e154-11ea-952d-b674a36ff5de.png)\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nIn the `./extensions/documentation/documentation/vx.x.x/full_documentation.json` file, the `x-generation-date` field under `info` gets updated every time the server is restarted.  This happens even when there has been no change to the documentation or any other code in the project's codebase. \r\n\r\nThis causes problems because git tracks this file, so I am constantly committing this file for this `x-generation-date` field or I am forced to manually stage/unstage it from the rest of my changes.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Have a strapi server running in development mode w/ the documentation plugin installed\r\n2. restart the strapi server, again in development mode,  with no changes made to codebase\r\n3. observe change in `x-generation date` \r\n\r\n**Expected behavior**\r\nI would expect the `x-generation-date` to only update when a change or update to documentation occurs.\r\n\r\n**Screenshots**\r\nThis is a git diff of the only line in the only file in the entire project that changes when the server gets restarted:\r\n\r\n![image](https://user-images.githubusercontent.com/10238802/90508458-c8f8a780-e125-11ea-9025-e615919f2d36.png)\r\n\r\n**System**\r\n\r\nDocker-Compose Stack\r\n- Node.js version: lts v12\r\n- NPM version: 6\r\n- Strapi version: strapi/strapi:3.1.1-node12\r\n- Database: mongoDb\r\n- Operating system: Ubuntu\r\n\r\n**Additional context**\r\nThis occurs every time I restart the docker-compose stack.\r\n- The stack runs my strapi project code in a mounted volume\r\n- The strapi server is run in development mode"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen opening the admin the landing page always shows the same welcome message prompting you to create your first content-type, even if you already have content-types created\r\n\r\n**Steps to reproduce the behavior**\r\nopen the admin page\r\n\r\n**Expected behavior**\r\ndifferent messaging should be displayed here\r\nthe button to prompt creating content-types shouldn't be allowed on production either since the module is disabled\r\n\r\n**Code snippets**\r\nhttps://github.com/strapi/strapi/blob/b39709a6edee136047260aefca34069e4cf8b0f8/packages/strapi-admin/admin/src/containers/HomePage/index.js#L64-L67\r\n`hasAlreadyCreatedContentTypes` uses `leftMenuLinks` property to decide what message to show. \r\n\r\nin pull request merge #6965 from strapi/features/rbac\r\n`leftMenuLinks` was removed from the `content-manager` plugin\r\nhttps://github.com/strapi/strapi/blob/b39709a6edee136047260aefca34069e4cf8b0f8/packages/strapi-plugin-content-manager/admin/src/index.js#L20-L45\r\n\r\nSorry I can't quite track down the fix, I'm not familiar with the roadmap enough  "},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen i use login with provider ( google) i got 400 error BadRequest, invalid token\r\n\r\n**Steps to reproduce the behavior**\r\nI follow this guide https://strapi.io/documentation/v3.x/plugins/users-permissions.html#providers\r\n\r\n1. Created page loginprovider /loginprovider\r\n2. Put there link to http://localhost:1337/connect/google\r\n3. Created redirect URL to front-end app ->  `http://localhost:3000/connect/google/redirect`\r\n4. Click link at loginporivder -> go to google, choose account to authenticate\r\n5. Got redirect to `http://localhost:3000/connect/google/redirect?id_token=ej...` with id_token=ej...\r\n6. Made get query to `/auth/google/callback?access_token=${this.$route.query.id_token}`  i use nuxt.js\r\n7. Got an error BadRequest - Invalid token, invalid value \r\n\r\n**Expected behavior**\r\nShould get response with user and jwt\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.1\r\n- NPM version:  6.14.6\r\n- Strapi version: 3.1.4\r\n- Database: sqlite\r\n- Operating system: windows\r\n\r\n**Additional context**\r\nIf i put `/auth/google/callback` in front-end url then i got user and jwt from backend in json format\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I try to edit an already uploaded file from within the \"selected assets\" view, I get a JS error indicating it can't find my selected file.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to a content type with a \"multiple media\" field\r\n2. Click on the \"+\" icon to \"add a new file\"\r\n3. Click on the \"selected\" tab\r\n4. Click on the edit icon of a selected image\r\n\r\n**Expected behavior**\r\nI expect an edit view on the selected file to open where I can edit the files name, alternative text etc.\r\n\r\n**Screenshots**\r\n![Screenshot_20200813_205528](https://user-images.githubusercontent.com/11271614/90175245-6ca12b00-dda7-11ea-969e-cd7ab5dbb0dd.png)\r\n![Screenshot_20200813_205823](https://user-images.githubusercontent.com/11271614/90175460-c0ac0f80-dda7-11ea-9c0e-93b94c8c7c91.png)\r\n\r\n**System**\r\n\r\n- Node.js version: v14.5.0\r\n- NPM version: 6.14.6\r\n- Strapi version: 3.1.4\r\n- Database: sqlite\r\n- Operating system: Manjaro linux"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nI have a collection with the field of the Relation type. After upgrading to the latest version, disabling relational fields no more works.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create two collections\r\n2. Add a relational type field to one of the collections.\r\n3. Save the new record to the collection with the relational field.\r\n3. Go to 'Configure the view' in Content-Manager plugin.\r\n4. Select a relational field and mark it not editable.\r\n\r\n**Expected behavior**\r\nThe data in the relational field is unable to change.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.18.2\r\n- NPM version: 6.14.7\r\n- Strapi version: 3.1.3\r\n- Database: PostgresSQL\r\n- Operating system: MacOS"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nIn content editor, repeatable component created by default cannot expand. Attempt to save such an entity causes error:\r\n\r\n```\r\nSomething went wrong.\r\nDetails\r\nTypeError: Cannot read property 'isOpen' of undefined\r\n\r\n    in x\r\n    in x\r\n    in Unknown\r\n    in div\r\n    in styled.div\r\n    in _\r\n    in _\r\n    in Unknown\r\n    in div\r\n    in div\r\n    in styled.div\r\n    in div\r\n    in div\r\n    in div\r\n    in styled.div\r\n    in form\r\n```\r\n\r\nI noticed that `x` is actually `RepeatableComponent`.\r\n\r\nEntity:\r\n```\r\n{\r\n  \"kind\": \"collectionType\",\r\n  \"collectionName\": \"tests\",\r\n  \"info\": {\r\n    \"name\": \"Test\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\",\r\n      \"required\": false,\r\n      \"maxLength\": 50\r\n    },\r\n    \"show\": {\r\n      \"type\": \"boolean\",\r\n      \"default\": true\r\n    },\r\n    \"items\": {\r\n      \"type\": \"component\",\r\n      \"repeatable\": true,\r\n      \"component\": \"story-items.story-item\",\r\n      \"required\": true,\r\n      \"min\": 1\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nComponent:\r\n```\r\n{\r\n  \"collectionName\": \"components_story_item_story_items\",\r\n  \"info\": {\r\n    \"name\": \"story-item\",\r\n    \"icon\": \"file-alt\"\r\n  },\r\n  \"options\": {},\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\",\r\n      \"required\": true,\r\n      \"maxLength\": 40\r\n    },\r\n    \"description\": {\r\n      \"type\": \"text\",\r\n      \"required\": false,\r\n      \"maxLength\": 220\r\n    },\r\n    \"picture\": {\r\n      \"model\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\",\r\n      \"required\": false\r\n    },\r\n    \"video\": {\r\n      \"model\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\",\r\n      \"required\": false\r\n    },\r\n    \"pictureSource\": {\r\n      \"type\": \"string\",\r\n      \"required\": false,\r\n      \"default\": \"\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe only workaround I found was removing the default component entry and creating a new one.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create component \r\n2. Create content type with the repeatable component andrequired:true, min:1\r\n3. Create entity of the type\r\n4. Click on default component, see it's not reacting\r\n4. Click Save\r\n4. See error\r\n\r\n**Expected behavior**\r\nDefault component can be expanded. No error on save.\r\n\r\n**System**\r\n\r\n- Node.js version: v14.6.0\r\n- NPM version: 6.14.7\r\n- Strapi version: 3.1.3\r\n- Database: postgres\r\n- Operating system: linux\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nPassing callback url instead of using the default registered provider callback doesn't seems to be working. In my case I'm using SPA on many domains with one API. In this case i need the API to redirect to correct SPA instance. \r\n\r\n```\r\nGET https://API.com/connect/facebook?callback=https://DOMAIN1.com/en/auth/google\r\nGET https://API.com//connect/facebook?callback=https://DOMAIN2.com/en/auth/google\r\nGET https://API.com//connect/facebook?callback=https://DOMAIN3.com/en/auth/google\r\n``` \r\nis not working as expected \r\n\r\n**Steps to reproduce the behavior**\r\n\r\nFollow tutorial on https://strapi.io/documentation/v3.x/plugins/users-permissions.html#providers part that says \r\n\r\n> You can also pass a custom callback url instead of using the default registered provider callback, by passing callback in the query. eg: GET /connect/facebook?callback=https://my-frontend.com/en/auth/facebook.\r\n\r\nI was testing Google OAuth. \r\n\r\n**Expected behavior**\r\n\r\nURL like http://localhost:5000/connect/google?callback=http://localhost:3001/connect/google should redirect to http://localhost:3001/connect/google after successful login. \r\n\r\nSeems like `callback` is not a valid name to be passed to OAuth provider and this is trimmed from actual call, so once Provider redirects back to API callback url is lost. What I have found out that `state` is a parameter that can be used here (https://developers.google.com/identity/protocols/oauth2/web-server) \r\n\r\n> You can use this parameter for several purposes, such as directing the user to the correct resource in your application, sending nonces, and mitigating cross-site request forgery.\r\n\r\n**Code snippets**\r\n\r\nChanging the following code seems to be fixing the issue \r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi-plugin-users-permissions/controllers/Auth.js#L264\r\n```js\r\n    // Ability to pass OAuth callback dynamically\r\n    grantConfig[provider].callback = _.get(ctx, 'query.callback') || _.get(ctx, 'query.state') || grantConfig[provider].callback;\r\n    grantConfig[provider].state = _.get(ctx, 'query.callback') || grantConfig[provider].callback;\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0\r\n- Database: sqlite\r\n- Operating system: MacOS 10.15.5\r\n\r\n**Additional context**\r\n\r\nI'm not creating a MR so far, because I'm not sure if my solution is valid, I'm not OAuth expert and I haven't tested any other providers except Google. "},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nI cannot add two decimals on the number collection type \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'Create a collection type and enter a Display name'\r\n2. \"Select a field for your collection type\" -> Choose Number and choose \"Number format\" as either \"decimal or \"float\"\r\n3. Scroll down to 'Collection Types' and try to add a number ending with two or more than two decimal places like \"40.12\" or \"100.234\"\r\n4. See error\r\n\r\n**Expected behavior**\r\nI should be able to add numbers with more than two decimal places like 40.123 or 100.234\r\n\r\n**Screenshots**\r\n[Screenshot1](https://u.pcloud.link/publink/show?code=XZo52vkZnE9KRVEGNLunJpmtYr23qSPrqFAy)\r\n[Screenshot2](https://u.pcloud.link/publink/show?code=XZLJ2vkZkWB28T5cOjYyo0bVnfPytjKnOIRk)\r\n\r\n**System**\r\n\r\n- Node.js version: 12.18.3 <!-- Please ensure you are using the Node LTS version (v12) -->\r\n- NPM version: 6.14.7\r\n- Strapi version: v3.1.3 <!-- Beta and Alpha versions are no longer supported -->\r\n- Database: SQLite\r\n- Operating system: Mac Os Catalina\r\n\r\nThank you !\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe bug is described here https://github.com/strapi/strapi/discussions/5769, but that issue was converted to a discussion despite it being a bug which has not been fixed.\r\n\r\nEssentially, when getting data for a content type which has a relation to another content type, fields for components in the related content type are not returned in the API response. Fields which aren't nested in components are included.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a content type called Slide\r\n2. Add a component to Slide called images\r\n3. Add a field named imageUrl to the images component\r\n4. Create two slides with different images\r\n5. Create a content type called Landing Page\r\n6. Add a repeatable component called slideshow to Landing Page\r\n7. Add a one-to-one relation to Slides in the slideshow component\r\n8. Create a landing page\r\n9. Add both slides to the landing page\r\n10. Navigate to /landing-pages to fetch the data for landing pages\r\n11. In the response, the slides are included, but the images component is not included\r\n\r\n**Expected behavior**\r\nIn step 11, the images field would be included.\r\n\r\n**System**\r\n\r\nNode.js version: 12.14.1\r\nNPM version: 6.13.4\r\nStrapi version: Strapi v3.0.0\r\nDatabase: Postgres\r\nOperating system: ubuntu 18.04.04 lts\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi, i'm trying to add a plugin to my bookshelf.\r\ni installed the plugin with \r\n`npm install --save bookshelf-simplepaginate`\r\nthen i created the file in _config/functions/bookshelf.js_\r\nwith:\r\n```\r\n'use strict';\r\n\r\nmodule.exports = (bookshelf, connection) => {\r\n  bookshelf.plugin(require('bookshelf-simplepaginate'));\r\n};\r\n```\r\n\r\nBut strapi goes in bootloop saying:\r\n```\r\n0|Strapi  | [2020-08-05T15:54:33.294Z] debug ⛔️ Server wasn't able to start properly.\r\n0|Strapi  | [2020-08-05T15:54:33.301Z] error TypeError: require(...) is not a function\r\n0|Strapi  |     at Object.keys.filter.map.connectionName (/home/pi/strapi/node_modules/strapi-connector-bookshelf/lib/index.js:62:36)\r\n0|Strapi  |     at Array.map (<anonymous>)\r\n0|Strapi  |     at Object.initialize (/home/pi/strapi/node_modules/strapi-connector-bookshelf/lib/index.js:46:8)\r\n0|Strapi  |     at Object.initialize (/home/pi/strapi/node_modules/strapi-database/lib/connector-registry.js:30:25)\r\n0|Strapi  |     at DatabaseManager.initialize (/home/pi/strapi/node_modules/strapi-database/lib/database-manager.js:36:27)\r\n0|Strapi  |     at Strapi.load (/home/pi/strapi/node_modules/strapi/lib/Strapi.js:297:19)\r\n\r\n```\r\n\r\nWhat am i doing wrong?"},{"labels":[null,null,"bug"],"text":"\r\n**Describe the bug**\r\nWhen adding a private field (advanced settings) to a component the field is still present in the REST response.\r\n\r\nThe field does not show up qhen querying it with GraphQL and private fields in content-types also do not show up as expected.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a content-type\r\n2. Add a private field to that content-type\r\n3. Create a component\r\n4. Add a private field to that component\r\n5. Add a field from the content-type you created\r\n6. Save everything\r\n7. Fetch it via REST\r\n\r\n**Expected behavior**\r\nI expect private fields from components not to show up in any response. Similar to private fields in content-types.\r\n\r\n**Screenshots**\r\n\r\n**Code snippets**\r\nAttribute of created component:\r\n```\r\n\"demo\": {\r\n      \"type\": \"string\",\r\n      \"private\": true,\r\n      \"default\": \"demo-value\"\r\n    }\r\n```\r\n\r\nAttribute of created content-type:\r\n```\r\n\"demo\": {\r\n      \"type\": \"string\",\r\n      \"private\": true,\r\n      \"default\": \"Demo-Value\"\r\n    }\r\n```\r\n\r\nREST response when fetching content-type with configured component (snippet):\r\n\r\n```\r\n...\r\n{\r\n            \"__component\": \"ui.slider\",\r\n            \"id\": 2,\r\n            \"demo\": \"some-value\",\r\n            ...\r\n}\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.13.1\r\n- NPM version: v6.12.1\r\n- Strapi version: 3.1.3\r\n- Database: sqlite\r\n- Operating system: CentOs 7\r\n\r\n**Additional context**\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen I try to add `updated_by` or `created_by` to my GraphQL query an error returns: `\"Cannot read property 'load' of undefined\"`. It looks like the DataLoader for `strapi::user` is missing (that's the `targetModel.uid` I saw while debugging a bit).\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'http://localhost:1337/graphql'\r\n2. Do a query on one of your content types with `updated_by { id }` or `created_by { id }` in the query \r\n3. See error\r\n\r\n**Expected behavior**\r\nI expected there to be an ID of the user that created the content for that content type.\r\n\r\n**Screenshots**\r\nhttps://ibb.co/BtwPYr3\r\n\r\n**System**\r\n\r\n- Node.js version: v12.13.1\r\n- NPM version: v6.12.1\r\n- Strapi version: v3.1.3\r\n- Database: MongoDB\r\n- Operating system: Mac OSX\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWe use the markdown editor in strapi but have some trouble with saving the styles headings and quote. If a user adds the style heading or quote to his selected text, but does nothing apart from that, the style is not saved. In the PUT request you can see the style is also not in it.\r\nThis seems to apply to styles that only put a symbol in front of the text (e.g. ## Heading 2 or > Quote).\r\n\r\n**Steps to reproduce the behaviour**\r\n1. Make sure you have a markdown editor in Strapi and add some text.\r\n2. Save.\r\n3. Return to the text, select a word and click the quote styling button (this will put a > before your selected text).\r\n4. Save and check your text in the PUT request and see the > isn't there anymore.\r\n5. Return to the text, quote is gone.\r\n\r\nTo work around this issue you can add a space behind the selected text after you've added the styling. Then strapi does register your style and will save it.\r\n\r\n**Expected behaviour**\r\nThe styles quote and headings should be saved when added in the text, also if you don't make additional changes to the text.\r\n\r\n**System**\r\nNode.js version: v12.18.2\r\nNPM version: 6.14.5\r\nStrapi version: 3.0.1, 3.1.1 (issue is in both versions)\r\nDatabase: ( mysql: \"^2.18.1\" )\r\nOperating system: Open Suse LEAP 15 and MacOS 10.15.6\r\n\r\n**Additional context** \r\nWe did a fresh Strapi install without any customisation as described in the guidelines and the problem was still there.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nI'm getting this error: `error MissingSchemaError: Schema hasn't been registered for model \"product\".` when accessing the Products collection admin listing page. Somehow it seems related to the collection names, more details below.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to the Content-Types Builder\r\n2. Create a \"Product\" collection type\r\n3. Create a new product\r\n4. Create a \"Product Variant\" collection type and add a \"Product has many Product Variants\" relation\r\n5. Try going back to the products listing, here you will see the error\r\n\r\nRemoving the \"Product Variant\" relation fixes the issue.\r\n\r\nIt gets weird when trying the following:\r\n1. Remove \"Product Variant\" relation from \"Product\", now the products will display properly\r\n2. Create the \"Product Attribute\" collection type and add a \"Product has many Product Attributes\" relation\r\n3. Go back to the products listing, there will be no error\r\n\r\nSomehow naming the collection \"Product Variant\" breaks the listing, but naming it \"Product Attribute\" doesn't.\r\n\r\n**Expected behavior**\r\nIt should display the products without errors.\r\n\r\n**System**\r\n\r\n- Node.js version: v12\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.1.3\r\n- Database: MongoDB 4.2.6\r\n- Operating system: macOS Catalina\r\n\r\n**Additional context**\r\nI've tested this on a fresh Strapi install with an empty database.\r\n\r\nhttps://www.loom.com/share/4d2f1ff59fa74a73ab524cb40c732269\r\n\r\n```\r\nerror MissingSchemaError: Schema hasn't been registered for model \"product\".\r\nUse mongoose.model(name, schema)\r\n    at new MissingSchemaError (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/error/missingSchema.js:22:11)\r\n    at NativeConnection.Connection.model (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/connection.js:1029:11)\r\n    at getModelsMapForPopulate (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/helpers/populate/getModelsMapForPopulate.js:201:59)\r\n    at populate (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/model.js:4250:21)\r\n    at _populate (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/model.js:4220:5)\r\n    at /Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/model.js:4195:5\r\n    at Object.promiseOrCallback (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/utils.js:261:12)\r\n    at Function.Model.populate (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/model.js:4193:16)\r\n    at cb (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongoose/lib/query.js:1948:17)\r\n    at /Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/operations/execute_operation.js:75:17\r\n    at executeCallback (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/operations/execute_operation.js:68:9)\r\n    at handleCallback (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/utils.js:129:55)\r\n    at /Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/operations/to_array.js:36:13\r\n    at handleCallback (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/utils.js:129:55)\r\n    at completeClose (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/cursor.js:859:16)\r\n    at Cursor.close (/Users/vladcazacu/projects/strapi-test-project/node_modules/mongodb/lib/cursor.js:878:12)```\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nA 'configure the view' button doesn't work correclty in Content-Types Builder.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'Content-Types Builder'.\r\n2. Select any Collection types and click Configure the view. (First trying works well)\r\n3. Click back button.\r\n4. Select other collection types and click Configure the view.\r\n5. See error.\r\n\r\n**Expected behavior**\r\nThe function should show the correct view of what user select.\r\n\r\n**Screenshots**\r\n![bug](https://user-images.githubusercontent.com/10557621/89194565-d3ecfd00-d5a7-11ea-8406-23232046effa.gif)\r\n\r\n**Code snippets**\r\nNothing.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.3\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.1.3\r\n- Database: MongoDB\r\n- Operating system: Windows 10 / Docker\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI try to change a few things in admin homepage. I follow the guide from the latest documentation version, but regardless that, when I run `npm run develop --watch-admin` it doesn't watch for file updates. I have to build manually to get the updated version.\r\n\r\nDocumentation available here: [https://strapi.io/documentation/v3.x/guides/custom-admin.html#introduction](url)\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a file `index.js` as in the path `/admin/src/containers/HomePage/index.js`\r\n2. Copy paste the content from the same path of strapi-admin in node-modules\r\n3. Change anything that will affect the layout\r\n4. Nothing happens\r\n5. Keep `npm run develop --watch-admin` run in terminal and in another one run `npm run build`\r\n6. Visit admin homepage and the change is there\r\n\r\n**Expected behavior**\r\nWhenever I do a change in the index.js file, I expected to have an automatic rebuild on the code\r\n\r\n**System**\r\n\r\n- Node.js version: v12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: 3.1.1\r\n- Database: mySQL\r\n- Operating system: MacOS 10.15.5"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nHey there, thank you for strapi, it's awesome!\r\n\r\nAfter updating from beta to the latest stable (3.1.2) it seems that using absolute paths as the public directory breaks file uploads (which used to work before) :confused:\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'config/middleware.js'\r\n2. Edit option 'settings.public' as described here https://strapi.io/documentation/v3.x/concepts/middlewares.html#core-middleware-configurations\r\n3. Enter an `/absolute/path`\r\n4. Upload a file\r\n5. See error message\r\n\r\n   error Error: ENOENT: no such file or directory, open '/path/to/strapi/absolute/path/uploads/<filename>'\r\n\r\n**Expected behavior**\r\n\r\nFile upload should work\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.1.2\r\n- Database: MySQL\r\n- Operating system:\r\n\r\nDistributor ID:\tDebian\r\nDescription:\tDebian GNU/Linux 10 (buster)\r\nRelease:\t10\r\nCodename:\tbuster"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nAfter upgrading to strapi 3.1 when trying to create a new entry with a relation field inside a repetable component. The field shown with a \"No permission to view this field\". Even tho i'm a super admin. Checked the settings page and the super admin seem to have access to the relation table.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create content list with a repeatable component that has a relation field\r\n2. Uograde to strapi 3.1\r\n3. try to create a new entry, the relation field will be disabled\r\n\r\n**Expected behavior**\r\nI was expectin to be able to modify the relation field as usual.\r\n\r\n**Screenshots**\r\n<img width=\"1217\" alt=\"Screen Shot 2020-07-28 at 17 07 14\" src=\"https://user-images.githubusercontent.com/8872447/88677428-effb2500-d0f5-11ea-995c-49c1cb3e4697.png\">\r\n\r\n**System**\r\n\r\n- Node.js version: v12.18.0\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.1.1\r\n- Database: Mongo DB\r\n- Operating system: Mac OS\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen generating the OpenAPI document, a lot of query parameters gets generated for the `find` queries. Most parameters are of the form `_<operator>` like `_ne` and `_lt`. However the equality operator gets generated as a single equals symbol, like `=`.\r\n\r\nThis messes up some client code generators, specially outside javascript world.\r\n\r\nThe behavior of this when issuing the query is that a url like `http://.../restaurant?==test` gets generated, and even when it works properly, it seems confusing to me.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Enable `documentation` plugin\r\n2. Generate the swagger document\r\n3. Open the documentation page in any of the GET /<entity> operations\r\n4. Check that there is a parameter with name `=`\r\n\r\n**Expected behavior**\r\nFor consistency and compatibility reasons, the equality operator should be named `_eq`\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/3475117/88595051-9b5a9a00-d062-11ea-94f9-ebeb4e2547df.png)\r\n\r\n**System**\r\n\r\n- Node.js version: 14.5.0\r\n- NPM version: 6.14.5\r\n- Yarn version: 1.22.4\r\n- Strapi version: 3.1.1\r\n- Database: sqlite\r\n- Operating system: Windows 10\r\n\r\n** Additional Context **\r\nI know solving this might pose a Breaking Change, and it is not a bug, but a consistency issue.\r\n\r\nThanks for this marvel of a project!"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nAfter I upgraded my Strapi project from 3.0.5 to 3.1.1, /users/{id} endpoint no longer populates the relational fields, i.e. my User model has a \"has one\" relation to some other collection and previously /users/{id} populated the relational field with all the data from the related item, but now only the item's id is returned. However, if I query /users?id=8 then the related fields are properly populated. All other collections seem to populate all the related fields properly.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. In Strapi's admin panel create a \"Test\" collection with a field \"title\" of type \"text\".\r\n2. In Strapi's default Users collection add a new relational field with a name \"test\", a relation type \"has one\" and a related collection \"Test\".\r\n3. Create a new item in the \"Test\" collection.\r\n4. Create a user in \"Users\" collection and create a relation with the item created previously.\r\n5. Now try to query the /users/{id} endpoint with the id of the user created previously.\r\n\r\n**Expected behavior**\r\nI expect the API to return a User object with a \"test\" field populated like \"{ id: 1, title: \"asdf\", ... }\", like it was in version 3.0.5.\r\n\r\n**Current behavior**\r\nThe API does not populate the \"test\" field and returns only the id of the related item.\r\n\r\n**System**\r\n\r\n- Node.js version: 12\r\n- Strapi version: 3.1.1\r\n- Database: MySQL 8.0.21\r\n- Operating system: Official Strapi Docker image \"strapi/strapi:3.1.1-node12\"\r\n\r\n**Additional context**\r\nMy Strapi project is running in Docker container with official Strapi image \"strapi/strapi:3.1.1-node12\". It was version \"strapi/strapi:3.0.5-node12\" but I updated it because I needed OR and AND operators in REST API queries. I also followed the migration guide https://strapi.io/documentation/v3.x/migration-guide/migration-guide-3.0.x-to-3.1.x.html.\r\n"},{"labels":[null,null,null,"bug"],"text":"I can't seem to create collections with certain names.\r\nI ran into this bug while preparing a project and I find it very frustrating. I setup the same project several times and sooner or later always get the same \"An error occured\" message. Or in the console: `POST /content-type-builder/content-types (27 ms) 400`\r\n\r\nBy now I realized the error always occurs when trying to create the collection named \"staff\". I can create collections with other name. But never staff. I had the hunch, it might have to do with pluralization and tried fish. Same thing. Can't create it. \r\n\r\nI tried this several times with completely fresh installations.\r\nIs it possible that this happens on collection names where plural equals singular?\r\n\r\nNode.js: v13.13.0\r\nStrapi: 3.1.1\r\nDatabase: SQlite\r\nMac OS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nWhenever I edit an entry where the collection has a boolean field with `required: true`, I can't save the entry.\r\nI get the error message \"This field is required\", I try to toggle it with no success. Then if I change the boolean field to `required: false` it works.\r\n\r\nNote: I didn't change the model and it worked before migrating\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to a collection list view\r\n2. Click on any entries to edit the data\r\n3. Edit a field\r\n4. Try to save\r\n5. You get an error that the boolean field is a required field, even though it is selected\r\n\r\n**Expected behavior**\r\nThe entry is supposed to be saved because the boolean field was already selected when attempted to save the entry.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/42664988/88485892-0aa88f00-cf7a-11ea-8eba-616496a08918.png)\r\n\r\n\r\n**System**\r\n- Node.js version: v12.13.1\r\n- NPM version: 6.14.6\r\n- Strapi version: 3.1.1\r\n- Database: Postgresql 12.3\r\n- Operating system: Linux\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nWhen i generate a new plugin he doesn't appear in menu. The automated configuration file contain a mistake\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. strapi new my-project --quickstart\r\n2. cd my-project && strapi generate:plugin my-plugin\r\n3. yarn develop --watch-admin\r\n\r\nNo plugin in menu\r\n\r\n**Expected behavior**\r\n\r\nI should see my new plugin in menu\r\n\r\n**Code snippets**\r\nIn my-plugin/admin/src/index.js\r\n\r\nThe menu snippet : \r\n```\r\nmenu: {\r\n      pluginsSection: [\r\n        {\r\n          destination: `/plugins/${pluginId}`,\r\n          icon,\r\n          label: {\r\n            id: `${pluginId}.plugin.name`,\r\n            defaultMessage: name,\r\n          },\r\n          name,\r\n          permissions: [\r\n            // Uncomment to set the permissions of the plugin here\r\n            // {\r\n            //   action: '', // the action name should be plugins::plugin-name.actionType\r\n            //   subject: null,\r\n            // },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n```\r\n\r\nBut **pluginsSection** isn't right, it should be **pluginsSectionLinks**\r\n\r\n**System**\r\n\r\n- Node.js version: v12.4.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.1.1\r\n- Database: SQLite\r\n- Operating system: W10\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Description**\r\nWhen generating swagger documentation using strapi-plugin-documentation, we see that for data type \"Datetime\" swagger documentation generated is also \"datetime\". This instead according to [OpenAPI](https://swagger.io/specification/#oas-document) standards should be \"date-time\"\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Using content-type buider create new data type with a datetime field\r\n2. Build strapi with  strapi-plugin-documentation configured\r\n\r\n**Expected behavior**\r\nShould generate swagger documentation with `date-time`\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/10310123/88368646-c9a05700-cd8e-11ea-89c5-0ac4cf907197.png)\r\n![image](https://user-images.githubusercontent.com/10310123/88368805-0ec48900-cd8f-11ea-83b6-cd1c3469d2dd.png)\r\n\r\n**System**\r\n\r\n- Strapi version: 3.0.0\r\n- strapi-plugin-documentation version: 3.0.0\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nTrying to search within a content type seems to be broken in 3.1.0. It fails with a 500 error.\r\n\r\nThis is the error:\r\n```error: column \"users-permissions_user.username\" must appear in the GROUP BY clause or be used in an aggregate function```\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n* Go into a content type \r\n* Try to search\r\n* The search fails\r\n\r\n**Expected behavior**\r\nThat searching works.\r\n\r\n- Node.js version: v12\r\n- NPM version: Yarn 1.15.2\r\n- Strapi version: 3.1.0\r\n- Database: Postgres 12\r\n- Operating system: MacOS 10.15.2\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nUsing a new DigitalOcean Droplet with the Strapi image. When opening Strapi for the first time you need to register your super admin. When doing so, the submit button does not seem to respond, when looking at the response of the AJAX request in Chrome's network tab when clicking it another time it tells me that you can't register another super user. So the admin has been created the first time apparently... Weird but okay. \r\n\r\nWhen then trying to login, the form will present me with a `An internal server error has occurred`. When inspecting the AJAX request again in the Network tab I notice that the response is indeed a 500 HTTP code and no other information is given. Then, when inspecting the logs by using `pm2 logs strapi-development` I notice that there's an error that appears on submit: `secretOrPrivateKey must have a value`. \r\n\r\nI've been using [the documentation](https://strapi.io/documentation/3.0.0-beta.x/installation/digitalocean-one-click.html#controlling-the-strapi-service-and-viewing-logs) but this has not been of help. After a lot of searching through the code in Github, I've found [this migration guide](https://github.com/strapi/strapi/blob/35aafde2288e6858a9b1757cf2555a8561421140/docs/v3.x/migration-guide/migration-guide-3.0.x-to-3.1.x.md#2-define-the-admin-jwt-token) which fixed my issues.  \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Setup a new Droplet with the Strapi image on DigitalOcean\r\n2. Register the super admin with the first form (and probably note on this form as well that the submission will fail at this point)\r\n3. Try to login at this point, submit the login form and note that the login fails. \r\n4. Check the errors in the logs with `pm2 logs strapi-development` and note that the error `Error: secretOrPrivateKey must have a value` will trigger.\r\n\r\n**Expected behavior**\r\nThe Strapi forms should submit.\r\n\r\n**Code snippets**\r\nComplete error with backtrace from logs:\r\n\r\n```\r\n0|strapi-development  | [2020-07-23T09:45:44.703Z] error Error: secretOrPrivateKey must have a value\r\n0|strapi-development  |     at Object.module.exports [as sign] (/srv/strapi/strapi-development/node_modules/jsonwebtoken/sign.js:107:20)\r\n0|strapi-development  |     at Object.createJwtToken (/srv/strapi/strapi-development/node_modules/strapi-admin/services/token.js:32:14)\r\n0|strapi-development  |     at /srv/strapi/strapi-development/node_modules/strapi-admin/controllers/authentication.js:35:46\r\n0|strapi-development  |     at dispatch (/srv/strapi/strapi-development/node_modules/koa-compose/index.js:42:32)\r\n0|strapi-development  |     at /srv/strapi/strapi-development/node_modules/strapi-admin/controllers/authentication.js:27:16\r\n0|strapi-development  |     at callback (/srv/strapi/strapi-development/node_modules/koa-passport/lib/framework/koa.js:93:25)\r\n0|strapi-development  |     at Strategy.strategy.success (/srv/strapi/strapi-development/node_modules/passport/lib/middleware/authenticate.js:219:18)\r\n0|strapi-development  |     at verified (/srv/strapi/strapi-development/node_modules/passport-local/lib/strategy.js:83:10)\r\n0|strapi-development  |     at /srv/strapi/strapi-development/node_modules/strapi-admin/middlewares/auth/index.js:16:43\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.18.1\r\n- NPM version: 6.14.5\r\n- Strapi version: v3.1.0\r\n- Database: _Trouble with fetching this data_\r\n- Operating system: Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-112-generic x86_64)\r\n\r\n**Additional context**\r\nN/a"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nThe lifecycle hook beforeFindOne accepts two arguments;  params, populate. Both should be able to be altered, however when populate comes in as undefined it can’t be changed since [undefined is a primitive](https://developer.mozilla.org/en-US/docs/Glossary/Primitive).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a Model using the strapi backend; let’s call it Location. Add an attribute (text) called \"label\". There are other relations but for the purposes of this bug report they don’t matter.\r\n2. Use the Strapi backend to create a new Locations entry, note the ID of the created content.\r\n3. Implement the beforeFindOne lifecycle method as defined [here](https://strapi.io/documentation/v3.x/concepts/models.html#lifecycle-hooks); beforeFindOne, See **Code snippets** below to cut and paste.\r\n4. Add two console.log() (or conditional breakpoints) in node_modules/strapi-database/lib/queries/create-query.js here: \r\n```js\r\n// @ line 64:\r\nconst createQueryWithLifecycles = ({ query, model, connectorQuery }) => async (params, ...rest) => {\r\n  // ... [omitted] ...\r\n  if(model.modelName === 'location') { console.log(queryArguments); } // add this line\r\n  await executeBeforeLifecycle(query, model, ...queryArguments);\r\n  if(model.modelName === 'location') { console.log(queryArguments); } // add this line\r\n  // ... [omitted] ...\r\n};\r\n```\r\n5. Using the id you got from step 2 use the Swagger UI to load up the ID: http://localhost:1337/documentation/v1.0.0#/Location/get_locations__id_ \r\n\r\n**Expected behavior**\r\nBoth params and populate should be altered by the beforeFindOne(params,populate) lifecycle implementation, only params will be.\r\n\r\n**should be**:\r\n```log\r\n# from create-query.js\r\n[{_id: \"5ea9c7c22347fb4120555b7d\" },undefined] \r\n# from api/location/models/Location.js\r\n{_id: \"5ea9c7c22347fb4120555b7d\", label_nin: \"some label\"}\r\n[\"contacts.users\"] \r\n# from create-query.js\r\n[{_id: \"5ea9c7c22347fb4120555b7d\", label_nin: \"some label\"},['contacts.users']] \r\n```\r\n**is**: \r\n```log\r\n# from create-query.js\r\n[{_id: \"5ea9c7c22347fb4120555b7d\" },undefined] \r\n# from api/location/models/Location.js\r\n{_id: \"5ea9c7c22347fb4120555b7d\", label_nin: \"some label\"} \r\n[\"contacts.users\"] \r\n# from create-query.js\r\n[{_id: \"5ea9c7c22347fb4120555b7d\", label_nin: \"some label\"},undefined] \r\n```\r\n\r\n**Code snippets**\r\nFile: api/location/models/Location.js\r\n```js\r\nmodule.exports = {\r\n  lifecycles: {\r\n    beforeFindOne: async (params, populate) => {\r\n      _.set(params,'label_nin','some label');\r\n      if(!_.isArray(populate)) { populate = []; }\r\n      populate.push('contacts.users');\r\n      console.log(params);\r\n      console.log(populate);\r\n    },\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.18.0 \r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.6 \r\n- Database: MongoDB, 4.0.3\r\n- Operating system: macOS, 10.15.6\r\n\r\n**Additional context**\r\nI'm guessing that the spread operator isn’t working as expected with ```..rest``` at line 64 then 67 in create-query.js causing populate to come in as undefined? Then since populate comes in as a [primitive value](https://developer.mozilla.org/en-US/docs/Glossary/Primitive) (undefined) it can’t be altered within the beforeFindOne() implementation.\r\n\r\nThanks for taking a look at this guys. Please let me know if you need any clarification or further input to help you get to the bottom of this.\r\n"},{"labels":[null,null,null,"bug"],"text":"Version 3.1.0, worked in 3.0.5.\r\nNow being forced to click on the small edit icon which is next to delete icon - each time feels intimidating. In Collection Types clicking anywhere on row still works to edit.\r\nMaybe this bug should be filled for plugin? Don't know which part is responsible for UI behavior.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'http://localhost:1337/admin/plugins/content-type-builder/'\r\n2. Click on 'content-type edit'\r\n3. change name in cyr symbols \"Заказы\"\r\n4. Click on 'Save'\r\n5. See error in console\r\n\r\n**Expected behavior**\r\n`payload: error: contentType.name`\r\n`Content Type name \"Заказы\" cannot be pluralized. \r\nSuggestion: add Item after the name (e.g News -> NewsItem).`\r\n\r\n**Screenshots**\r\n![Снимок экрана 2020-07-21 в 15 14 00](https://user-images.githubusercontent.com/12596485/88053676-dd687500-cb64-11ea-8117-9232e93145af.png)\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.3\r\n- NPM version: latest\r\n- Strapi version: 3.0.6\r\n- Database: postgres\r\n- Operating system: macos\r\n"},{"labels":[null,null,null,"bug"],"text":"Having a joe's backup file config/plugins.js~ within the config directory has the side effect that a correct plugins.js within the same directory does not get loaded at all.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a strapi project from the scratch\r\n2. Define i.e. a sendgrid plugin description within config/plugins.js\r\n3. cp config/plugins.js config/plugins.js~\r\n4. npx strapi console\r\n5. strapi.plugins['email'].config\r\n6. you will see something like that \r\n```\r\n{\r\n functions: { bootstrap: [AsyncFunction] { __filename__: 'bootstrap.js' } },\r\n routes: [\r\n  {\r\n   method: 'POST',\r\n   path: '/',\r\n   handler: 'Email.send',\r\n   config: [Object]\r\n  }\r\n ],\r\n __filename__: 'settings.js',\r\n provider: 'sendmail',\r\n providerOptions: {},\r\n settings: { defaultFrom: 'Strapi <no-reply@strapi.io>' }\r\n```\r\n\r\n**Expected behavior**\r\nthe console log should show the correct loaded sendgrid configuration and simply having a config/plugins.js~ should not affect the plugins.js loading process \r\n```\r\n{\r\n  functions: { bootstrap: [AsyncFunction] { __filename__: 'bootstrap.js' } },\r\n  routes: [\r\n    {\r\n      method: 'POST',\r\n      path: '/',\r\n      handler: 'Email.send',\r\n      config: [Object]\r\n    }\r\n  ],\r\n  __filename__: 'settings.js',\r\n  provider: 'sendgrid',\r\n  providerOptions: {\r\n    apiKey: 'apikey'\r\n  },\r\n  settings: {\r\n    defaultFrom: 'email',\r\n    defaultReplyTo: 'email'\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version:  12.16.3\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.5\r\n- Database: MongoDB 4.2.6\r\n- Operating system: Linux Ubuntu\r\n"},{"labels":[null,null,null,"bug"],"text":"related to #1175\r\n**Informations**\r\n\r\n- **Node.js version:**\r\n 12.14.0\r\n- **npm version:**\r\n 6.13.4\r\n- **Strapi version:**\r\n 3.0.4\r\n- **Database:**\r\nSQlite (default)\r\n- **Operating system:**\r\nLinux version 3.10.105\r\n\r\n**What is the current behavior?**\r\nThe returned error message isn't clear\r\n\r\n**Steps to reproduce the problem**\r\nPost an object that is already exist and the field that we insert duplicate data is \"unique\"\r\nWe get (returned response):\r\n\r\n```\r\n{\r\n   \"statusCode\":500,\r\n   \"error\":\"Internal Server Error\",\r\n   \"message\":\"An internal server error occurred\"\r\n}\r\n```\r\nStrapi console:\r\n```\r\nerror Error: SQLITE_CONSTRAINT: UNIQUE constraint failed: members.email \r\ndebug POST /[path]/ (27 ms) 500 \r\n```\r\n**What is the expected behavior?**\r\nTo return a better message to know if the data is duplicated or if the server occurred a real error. \r\n\r\n**Suggested solutions**\r\nChange the returned error messages, pass the SQlite error along\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Bug Description:**\r\n\r\nAfter the update to v3.0.5 I see all our` .GP` file uploads are converted to `.BIN` files. The file content is unchanged and I'm able to make it work after manually updating the file back to `.GP`. I'm using S3 provider with production built. Not sure if this is limited to only this filetype but I did some rough testing with other file types like `.CSV` but couldn't reproduce.\r\n\r\n**Steps to reproduce the behavior:**\r\n\r\n1. Go to Media Library\r\n2. Click on Upload Assets\r\n3. Pick a `.GP` file from local system. \r\n4. Wait for the file to finish uploading.\r\n5. The file type is changed to `.BIN`\r\n\r\n**Expected Behavior:**\r\n\r\nThe Media Library should not later the file type of the provided files for upload.\r\n\r\n**Screenshots:**\r\n\r\n<img width=\"268\" alt=\"GP File Upload Example\" src=\"https://user-images.githubusercontent.com/13115490/86159370-da5f0380-bb27-11ea-9a4b-2946d747abbb.png\">\r\n\r\n**System:**\r\n\r\n**- Node.js version:** 12.13.0\r\n**- Yarn version:** 1.19.1\r\n**- Strapi version:** v3.0.5\r\n**- Database:** Postgres\r\n**- Operating system:** Amazon Linux\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nWhen uploading images, with the \"Enable size optimization\" enabled, the EXIF data is being removed. The consequence for us, is that the rotation flag is missing, and we do not have anyway to know in which rotation the image should be displayed.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. With the \"Enable size optimization\" enabled in `/admin/settings/media-library`.\r\n2. Upload an image taken in portrait-mode.\r\n3. Open the image from `/admin/plugins/upload`.\r\n\r\nNow you'll see that the image is tilted 90 degrees.\r\n\r\n1. Now with the \"Enable size optimization\" disabled in `/admin/settings/media-library`.\r\n2. Upload an image taken in portrait-mode.\r\n3. Open the image from `/admin/plugins/upload`.\r\n\r\nNow you'll see that the image is upright, as expected.\r\n\r\n**Expected behavior**\r\n\r\nImage should \"keep\" it's meta-date. Sharp library has a feature for doing that called `withMetadata`.\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/2089088/86155182-58a9ae80-bb04-11ea-9fa2-67c153f1d641.png)\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.3\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.2\r\n- Database: Postgres\r\n- Operating system: Ubuntu/OSx\r\n"},{"labels":[null,null,null,"bug"],"text":"**Lifecycles Hooks beforeUpdate error**\r\nAssigning a new value to a content field beforeUpdate getting the following error: \r\n`{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":[{\"messages\":[{\"id\":\"entry.notFound\",\"message\":\"entry.notFound\"}]}],\"data\":[{\"messages\":[{\"id\":\"entry.notFound\",\"message\":\"entry.notFound\"}]}]}`\r\n\r\n**Expected behavior**\r\nA content field should be updated with the new value\r\n\r\n\r\n**Code snippets**\r\nPath — ./api/article/models/article.js.\r\n```\r\nmodule.exports = {\r\n    lifecycles : {\r\n        beforeUpdate: async (data) => {\r\n            data.slug = 'some-text'\r\n        }\r\n   }\r\n}\r\n```\r\nData submitted\r\n```\r\n------WebKitFormBoundarye1E1TIkcBcfMdE88\r\nContent-Disposition: form-data; name=\"data\"\r\n\r\n{\r\n\"excerpt\":\"ASDASDASDASDasd\",\r\n\"published_at\":\"2020-06-27\",\r\n\"created_at\":\"2020-06-27T15:35:16.000Z\",\r\n\"slug\":\"my-new-article\",\r\n\"gallery\":[],\r\n\"updated_at\":\"2020-06-29T00:42:02.000Z\",\r\n\"title\":\"My New Article\",\r\n\"tags\":[5,4],\r\n\"content\":null,\r\n\"id\":3,\r\n\"image\":null,\r\n\"seo\":[],\r\n\"category\":2\r\n}\r\n------WebKitFormBoundarye1E1TIkcBcfMdE88--\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version:  14.4.0 \r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.5\r\n- Database: mySQL 5.7\r\n- Operating system: Win10\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nAt the first start, I get sometimes this error:\r\n```\r\n[2020-06-18T14:49:58.504Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-06-18T14:49:58.506Z] error error: relation \"core_store\" does not exist\r\n    at Parser.parseErrorMessage (/srv/app/node_modules/pg-protocol/dist/parser.js:241:15)\r\n    at Parser.handlePacket (/srv/app/node_modules/pg-protocol/dist/parser.js:89:29)\r\n    at Parser.parse (/srv/app/node_modules/pg-protocol/dist/parser.js:41:38)\r\n    at Socket.<anonymous> (/srv/app/node_modules/pg-protocol/dist/index.js:8:42)\r\n    at Socket.emit (events.js:210:5)\r\n    at addChunk (_stream_readable.js:308:12)\r\n    at readableAddChunk (_stream_readable.js:289:11)\r\n    at Socket.Readable.push (_stream_readable.js:223:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:182:23)\r\nFrom previous event:\r\n    at Client_PG._query (/srv/app/node_modules/knex/lib/dialects/postgres/index.js:234:12)\r\n    at Client_PG.query (/srv/app/node_modules/knex/lib/client.js:158:17)\r\n    at Runner.query (/srv/app/node_modules/knex/lib/runner.js:135:36)\r\n    at /srv/app/node_modules/knex/lib/runner.js:39:23\r\nFrom previous event:\r\n    at Runner.run (/srv/app/node_modules/knex/lib/runner.js:25:16)\r\n    at Builder.Target.then (/srv/app/node_modules/knex/lib/interface.js:14:43)\r\n    at processImmediate (internal/timers.js:439:21)\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a container using the strapi/strapi v3.0.2 image\r\n\r\n**Expected behavior**\r\nstrapi starts correctly\r\n\r\n**System**\r\n- Node.js version: 12.13.0\r\n- NPM version: 6.12.0\r\n- Strapi version: 3.0.2\r\n- Database: Postgresql 12.3\r\n- Operating system: fedora 32\r\n\r\n**Additional context**\r\nSeems to be the same bug as strapi/strapi#5067\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nSetting up a new project with `yarn create strapi-app` fails due to dependency conflicts.\r\nWe tested it on several machines and it fails reliable:\r\n\r\nCreating a project from the database CLI arguments.\r\nCreating files.\r\nError while installing dependencies:\r\nwarning strapi > boom@7.3.0: This module has moved and is now available at @hapi/boom. Please update your dependencies as this version is no longer maintained an may contain bugs and security issues.\r\nwarning strapi > boom > hoek@6.1.3: This module has moved and is now available at @hapi/hoek. Please update your dependencies as this version is no longer maintained an may contain bugs and security issues.\r\nwarning strapi-admin > webpack-dev-server > chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\r\nwarning strapi-admin > webpack-dev-server > chokidar > fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\r\nwarning strapi-admin > @babel/polyfill > core-js@2.6.11: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.\r\nwarning strapi-admin > react-virtualized > babel-runtime > core-js@2.6.11: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.\r\nwarning strapi-admin > reactstrap > react-popper > popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1\r\nwarning strapi-admin > webpack > watchpack > watchpack-chokidar2 > chokidar@2.1.8: Chokidar 2 will break on node v14+. Upgrade to chokidar 3 with 15x less dependencies.\r\nwarning strapi-admin > webpack-dev-server > chokidar > braces > snapdragon > source-map-resolve > resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated\r\nwarning strapi-admin > webpack-dev-server > chokidar > braces > snapdragon > source-map-resolve > urix@0.1.0: Please see https://github.com/lydell/urix#deprecated\r\nwarning strapi-plugin-content-manager > draft-js > fbjs > core-js@2.6.11: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.\r\nwarning strapi-plugin-users-permissions > request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\r\nwarning strapi-plugin-email > strapi-provider-email-sendmail > sendmail > mailcomposer@3.12.0: This project is unmaintained\r\nwarning strapi-plugin-email > strapi-provider-email-sendmail > sendmail > mailcomposer > buildmail@3.10.0: This project is unmaintained\r\nerror https://registry.yarnpkg.com/@formatjs/intl-datetimeformat/-/intl-datetimeformat-1.2.1.tgz: Extracting tar content of undefined failed, the file appears to be corrupt: \"ENOENT: no such file or directory, link '/Users/xxx/Library/Caches/Yarn/v6/npm-@formatjs-intl-datetimeformat-1.2.1-da53daa6480994259371229925700c797f3cac4b-integrity/node_modules/@formatjs/intl-datetimeformat/temp-zic/US/America/Adak' -> '/Users/xxx/Library/Caches/Yarn/v6/npm-@formatjs-intl-datetimeformat-1.2.1-da53daa6480994259371229925700c797f3cac4b-integrity/node_modules/@formatjs/intl-datetimeformat/temp-zic/US/Aleutian'\"\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. `yarn create strapi-app`\r\n\r\n**Expected behavior**\r\n\r\nIt should work and setup a new strapi project.\r\n\r\n**System**\r\n\r\n- Node.js version: v12.14.0\r\n- NPM version: v6.13.4\r\n- Strapi version: v3.0.4\r\n- Database: any\r\n- Yarn version: v1.22.4\r\n- Operating system: macOS 10.15.5\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nA boolean field set not editable (off) are editable in the user view in strapi.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n- Create a boolean fields\r\n- Set it editable off \r\n\r\n**Expected behavior**\r\nThis boolean toogle should be not editable but it is. \r\n\r\n**System**\r\n\r\n- Node.js version: Node LTS \r\n- Strapi version:  3.0.3\r\n- Database: PG\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nWhen hosting the API and admin UI on different host/port, the admin UI does not respect the configuration but instead looks for the API under the same host/port as the admin UI.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Configure the server as per the snippet below\r\n2. `$ SERVE_ADMIN_PANEL=false yarn start` to start the API under localhost:1337\r\n3. `$ yarn build` to build the admin UI\r\n4. `$ http-server -p 9050 build` (or similar) to serve the admin UI under localhost:9050\r\n5. The admin UI loader keeps spinning, as the XHR request to the backend returns HTTP 404\r\n\r\n**Expected behavior**\r\nUpdate the [relevant documentation](https://strapi.io/documentation/v3.x/admin-panel/deploy.html#deploy-the-administration-panel-on-another-server-aws-s3-azure-etc-than-the-api)\r\n\r\nor: admin UI sends requests to the host/port as per configuration of the API.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/2371518/85016805-bfc17d80-b16a-11ea-9b65-126b21737d9e.png)\r\n\r\n\r\n**Code snippets**\r\n*server.js*\r\n```js\r\nmodule.exports = ({ env }) => ({\r\n  host: 'localhost',\r\n  port: 1337,\r\n  cron: {\r\n    enabled: false,\r\n  },  \r\n  admin: {\r\n    url: '/',\r\n    serveAdminPanel: env.bool('SERVE_ADMIN_PANEL', true),\r\n    build: {\r\n      backend: 'http://localhost:1337/',\r\n    },\r\n  },\r\n});\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.14.0 and v10.16.3\r\n- NPM version: v6.13.4 and v6.9.0\r\n- Strapi version: v3.0.2\r\n- Database: Postgres\r\n- Operating system: CentOS linux\r\n\r\n**Additional context**\r\nTo install `http-server`: run `$ yarn add -g http-server`\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhat happens is if you use more than one web process running `strapi start` and you deploy a new model and it just happens that all web processes start at roughly the same time, you end up with duplicates. This is what happened to me:\r\n\r\nThe screenshot has different values for `enabled` because we were trying to change permissions after this happened and the UI didn't show the actual status.\r\n\r\nA workaround for this issue on PostgreSQL is to just add a unique index:\r\n\r\n```\r\nCREATE UNIQUE INDEX \"user-permissions_permission_uniq\" ON \"users-permissions_permission\" (type, controller, action, policy, role)\r\n```\r\n\r\nMy worry is that other data gets duplicated in the same way, but so far hasn't happened.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Have a fresh database\r\n2. Start 2 parallel `strapi start` processes\r\n3. Run `SELECT * FROM \"users-permissions_permission\" WHERE role = 1 AND type = 'application' AND controller = '<your model>' ORDER BY action;`\r\n4. See duplicate rows\r\n\r\n**Expected behavior**\r\nI wouldn't see duplicate rows\r\n\r\n**Screenshots**\r\n<img width=\"1062\" alt=\"strapi_db_duplicates\" src=\"https://user-images.githubusercontent.com/473071/84775246-dd5dde00-afd6-11ea-8246-18eff7c6d3b3.png\">\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.3\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.1\r\n- Database: PostgreSQL\r\n- Operating system: Debian Buster running inside Docker\r\n"},{"labels":[null,null,"bug"],"text":"When using Strapi to create a Swagger API using the Strapi documentation plugin, the generated method contains a parameter called '=' (equals sign). This parameter ('=') typically causes trouble when you want to generate code from the Swagger definition using SmartBear's tools.\r\n\r\nBelow you can see the generated parameter names on the Swagger API:\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/35300398/84656768-20527f80-af0b-11ea-9de9-43cbadb7e918.png)\r\n\r\nWhilst most parameters have a syntax involving a leading underscore and no special characters like e.g: _sort, _limit, etc, this parameter contains a single special character. So the API naming seems to be inconsistent in this case.\r\n\r\n**System**\r\n\r\n- Node.js version: 13.11.0 (Currently using 64-bit executable)\r\n- NPM version: 6.13.7\r\n- Strapi version: 3.0.1\r\n- Database: MySQL\r\n- Operating system: Windows 10\r\n\r\n**Expected behavior**\r\n\r\nThe parameter names for the generate API should be consistent and not have special characters, so that code generator tools can generate method names from the Swagger API.\r\n\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nYou have a \"Read the documentation\" dead link while installing the GraphQL plugin.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'Strapi admin interface'\r\n2. Click on 'Marketplace'\r\n3. Install the GraphQL add on\r\n4. While installing, click on \"Read the documentation\"\r\n\r\n**Expected behavior**\r\nGetting the correct documentation\r\n\r\n**Screenshots**\r\n404 -> https://strapi.io/documentation/v3.x/configurations/configurations.html#server\r\n\r\n**Code snippets**\r\nN/A\r\n\r\n**System**\r\n\r\n- Node.js version: One used by your official Docker image\r\n- NPM version: One used by your official Docker image\r\n- Strapi version: 3.0.1\r\n- Database: PostgreSQL\r\n- Operating system: Docker\r\n\r\n**Additional context**\r\nNone\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi 👋\r\n\r\n**Describe the bug**\r\nThe strapi admin UI allows the insertion of field names inside the content type builder that lead to a database crash (mongoDB)\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Open the strapi admin UI\r\n2. Create a new content type with a field called \"on\" with \"Boolean\" as the type\r\n3. Save the content type\r\n\r\n**Expected behavior**\r\nBlacklisting certain field names that will lead to database errors\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- Strapi version: 3.0.1\r\n- Database: MongoDB\r\n- Operating system: Centos 8\r\n\r\n**Additional context**\r\nTo fix the issue I had to remove the JSON-File from the created model template (*.settings.json)\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe content manager plugin works incorrectly when I try to hide a field in a component. After restart server force to display hidden field.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install the new default Strapi project:\r\n    ```\r\n    yarn create strapi-app my-project --quickstart\r\n    ```\r\n2. Create a component with one field\r\n3. Click 'Configure the view' in component\r\n4. Remove field in the section 'Displayed Fields'\r\n5. Save changes\r\n6. Restart server\r\n\r\n**Expected behavior**\r\nThe section 'Displayed Fields' in content manager does not display hidden field\r\n\r\n**System**\r\n\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.1\r\n- Database: SQLite\r\n- Operating system: Linux"},{"labels":[null,null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n\r\nPlease ensure you have also read and understand the contributing guide.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/CONTRIBUTING.md#reporting-an-issue\r\n-->\r\n\r\n**Describe the bug**\r\nPR #6192 introduced this issue.\r\nBecause the JWT is not sent anymore if the account is not confirmed, GraphQL throws an error because the `jwt` is marked as required, as we can see from the schema below:\r\n\r\n![schema](https://user-images.githubusercontent.com/7467891/83443210-48d57680-a441-11ea-99f0-e76eb70e6b7d.png)\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Turn on email confirmation\r\n2. Try to register an account using the `register` mutation\r\n3. Receive an error on GraphQL\r\n\r\n**Expected behavior**\r\nThe user should be registered successfully.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/7467891/83443333-74f0f780-a441-11ea-9873-723e6fbaabf6.png)\r\n\r\n\r\n**Code snippets**\r\n_none_\r\n\r\n**System**\r\n\r\n- Node.js version: `v13.7.0`\r\n- NPM version: `v6.13.6`\r\n- Strapi version: `v3.0.1`\r\n- Database: `MongoDB`\r\n- Operating system: `Windows 10 1909 (w/ WSL Ubuntu 18.04)`\r\n\r\n**Additional context**\r\nI can think of two solutions to this:\r\n - Mark `jwt` as not required\r\n - Pass an empty string as `jwt` when the account is not confirmed (what I've done on my project for now)\r\n"},{"labels":[null,null,null,"bug"],"text":"Nested relations in GraphQl don't work\r\n\r\n1. create has many relation\r\n2. create nested has many and belongs to relation\r\n3. read nested data in graphql\r\n4. See error\r\n\r\nEvery relation to work as expected in GraphQl\r\n\r\n```graphql\r\nquery lp ($id: ID!){\r\n    lp (id: $id) {\r\n      id\r\n      name\r\n      actualAllocationToPrivateEquity\r\n      contacts {\r\n        id\r\n        profilePicture {\r\n          id\r\n          url\r\n        }\r\n      }\r\n      fund_commitments {\r\n        id\r\n        fund_commitment_investments {\r\n          id\r\n        }\r\n        gp {\r\n          id\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\n- Node.js version: v14.3.0\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.1\r\n- Database: sqlite\r\n- Operating system: macOs (I hate microsoft)\r\n\r\n**Additional context**\r\nDidn't work in older beta version, relations have issues\r\n"},{"labels":[null,null,null,"bug"],"text":"Hey guys,\r\n\r\nfirst of all thanks a lot for this amazing product. i really like that!\r\n\r\ni performed the migration from 3.0.0-beta.20.3 to 3.0.1 and i ran into a problem with my node version.\r\n\r\nthe `package.json` when setting up a new project needs node to be >=10.0.0 but in fact it needs to be >= 10.10.0 in the current version of 3.0.1.\r\n\r\nthis is due to the fact, that the config in [config-loader.js](https://github.com/strapi/strapi/blob/master/packages/strapi/lib/core/app-configuration/config-loader.js#L13) is being parsed using `fs.readdirSync` that returns fs.Dirent[] Objects. The function `isFile` is added to node in version `10.10.0` [node docs](https://nodejs.org/api/fs.html#fs_class_fs_dirent) I had an old version of node 10 running (`10.06.3`) so `isFile` was not defined. That broke my process and i needed quiet some time to figure this out\r\n\r\nmay be you can fix this in a later version so nobody else will run into that problem.\r\n\r\nThanks a lot and stay healthy :)\r\n\r\nAll the best and keep on the great work!\r\nKai"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nThe image keeps on crashing in  the site on `http://localhost:1337/`\r\n\r\n**Expected behavior**\r\nAn image should be displayed instead of crashing\r\n\r\n**Screenshots**\r\npeople saying hello\r\n![people](https://user-images.githubusercontent.com/61132218/83327382-eb9ec100-a298-11ea-921c-173e3dc76010.png)\r\n\r\n**System**\r\n\r\n- Node.js version:v12.6.0\r\n- NPM version:6.9.0\r\n- Strapi version: 3.0.1\r\n- Database:mongodb\r\n- Operating system:Ubuntu 18.04\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nReset Password permission is disabled by default. So you can send an email for a password reset but can't actually reset it.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. **POST** `/auth/forgot-password { email: 'some@email.com' }`\r\n2. **POST** `/auth/reset-password { code: 'codeFromEmail', password: 'newPassword', ... }`\r\n3. Receive `Forbidden 403`\r\n\r\n**Expected behavior**\r\nPassword reset successfully.\r\n\r\n**System**\r\n\r\n- Node.js version: v14.2.0\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.1\r\n- Database: mongodb\r\n- Operating system: MacOs\r\n\r\n**Additional context**\r\nI've debugged a code a little and I guess the issue is related to https://github.com/strapi/strapi/pull/5655 (Change Password was renamed to Reset Password) and especially to the following code: https://github.com/strapi/strapi/blob/master/packages/strapi-plugin-users-permissions/services/UsersPermissions.js#L25\r\n\r\nChanging `changepassword` to `resetpassword` might resolve the issue."},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nMemory leak due to image uploading both with and without `responsiveDimensions` and `sizeOptimization` disabled via Media Library settings.\r\n\r\nIf you upload multiple images at the same, the memory consumption increases according to the number of images you're uploading.\r\n\r\nTested with:\r\n- `strapi-provider-upload-local` `3.0.1` \r\n- `strapi-provider-upload-aws-s3` `3.0.0`\r\n\r\n**Steps to reproduce the behavior**\r\nI run Strapi inside Docker, so I monitor memory usage by running `docker stats`\r\n\r\nHave made a video:\r\n\r\n1. Start a fresh Strapi server ... memory usage `93 MB`\r\n2. turn off Image optimization and Responsive Dimensions via `/admin/settings/media-library` 3. go to the Media Library and upload an image `490 kB` in size ... memory usage now `122 MB`\r\n4. upload another image `149 kB` in size ... memory usage now `135 MB`\r\n5. enable Image optimization and Responsive Dimension via `/admin/settings/media-library`\r\n6. upload another image `325 kB` in size ... memory usage now `257 MB`\r\n\r\n**Expected behavior**\r\nI would expect the additional memory usage to be much lower and stable.\r\n\r\n**Screenshots**\r\nVideo: https://drive.google.com/file/d/1wNVkRLKagVQuRp8Vuld6FADrilfmS00n/view?usp=sharing\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.3\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.1\r\n- Database: PostgreSQL\r\n- Operating system: Debian Buster running inside Docker\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nServer keeps restarting again and again with message :\r\n`File changed: C:\\Users\\karel\\Node\\librairie\\config\\locales\\fr_fr.json`\r\nCannot access admin at all (blank page)\r\n\r\n**Steps to reproduce the behavior**\r\nFollow the migration guide to change structure of config files : database.js, middleware.js, server.js\r\nClean build and start\r\n\r\n**Expected behavior**\r\nAccess to panel\r\n\r\n**Code snippets**\r\nconfig/server.js\r\n```\r\nmodule.exports = ({ env }) => ({\r\n  host: env('HOST', 'localhost'),\r\n  port: env.int('PORT', 1337),\r\n  // url: `http://localhost:1337`,\r\n  admin: {\r\n    url: '/dashboard',\r\n    autoOpen: true,\r\n  },\r\n});\r\n```\r\nconfig/database.js\r\n```\r\nmodule.exports = ({ env }) => ({\r\n  defaultConnection: 'default',\r\n  connections: {\r\n    default: {\r\n      connector: 'bookshelf',\r\n      settings: {\r\n        client: 'mysql',\r\n        host: env('DATABASE_HOST', 'localhost'),\r\n        port: env.int('DATABASE_PORT', 3306),\r\n        database: env('DATABASE_NAME', 'strapi'),\r\n        username: env('DATABASE_USERNAME', 'strapi'),\r\n        password: env('DATABASE_PASSWORD', 'strapi'),\r\n      },\r\n      options: {},\r\n    },\r\n  },\r\n});\r\n```\r\nconfig/env/development/database.js\r\n```\r\nmodule.exports = {\r\n  defaultConnection: \"default\",\r\n  connections: {\r\n    default: {\r\n      connector: \"bookshelf\",\r\n      settings: {\r\n        client: \"mysql\",\r\n        database: \"librairie\",\r\n        host: \"127.0.0.1\",\r\n        port: 3306,\r\n        username: \"root\",\r\n        password: \"\"\r\n      },\r\n      options: {}\r\n    }\r\n  }\r\n}\r\n```\r\nmiddleware.js\r\n```\r\nmodule.exports = {\r\n  timeout: 100,\r\n  load: {\r\n    before: ['responseTime', 'logger', 'cors', 'responses', 'gzip'],\r\n    order: [\r\n      \"Define the middlewares' load order by putting their name in this array is the right order\",\r\n    ],\r\n    after: ['parser', 'router'],\r\n  },\r\n  settings: {\r\n    favicon: {\r\n      path: \"favicon.ico\",\r\n      maxAge: 86400000\r\n    },\r\n    public: {\r\n      path: './public',\r\n      maxAge: 60000,\r\n    },\r\n    language: {\r\n      enabled: true,\r\n      defaultLocale: \"fr_fr\",\r\n      modes: [\r\n        \"query\",\r\n        \"subdomain\",\r\n        \"cookie\",\r\n        \"header\",\r\n        \"url\",\r\n        \"tld\"\r\n      ],\r\n      cookieName: \"locale\"\r\n    },\r\n    request: {\r\n      session: {\r\n        enabled: true,\r\n        client: \"cookie\",\r\n        key: \"strapi.sid\",\r\n        prefix: \"strapi:sess:\",\r\n        secretKeys: [\"mySecretKey1\", \"mySecretKey2\"],\r\n        httpOnly: true,\r\n        maxAge: 86400000,\r\n        overwrite: true,\r\n        signed: false,\r\n        rolling: false\r\n      },\r\n      logger: {\r\n        level: \"debug\",\r\n        exposeInContext: true,\r\n        requests: true\r\n      },\r\n      parser: {\r\n        enabled: true,\r\n        multipart: true\r\n      }\r\n    },\r\n    response: {\r\n      gzip: {\r\n        enabled: false\r\n      },\r\n      responseTime: {\r\n        enabled: false\r\n      },\r\n      poweredBy: {\r\n        enabled: true,\r\n        value: \"Strapi <strapi.io>\"\r\n      }\r\n    },\r\n    security: {\r\n      csp: {\r\n        enabled: true,\r\n        policy: [\"block-all-mixed-content\"]\r\n      },\r\n      p3p: {\r\n        enabled: false,\r\n        value: \"\"\r\n      },\r\n      hsts: {\r\n        enabled: true,\r\n        maxAge: 31536000,\r\n        includeSubDomains: true\r\n      },\r\n      xframe: {\r\n        enabled: true,\r\n        value: \"SAMEORIGIN\"\r\n      },\r\n      xss: {\r\n        enabled: true,\r\n        mode: \"block\"\r\n      },\r\n      cors: {\r\n        enabled: true\r\n      },\r\n      ip: {\r\n        enabled: false,\r\n        whiteList: [],\r\n        blackList: []\r\n      },\r\n    },\r\n  },\r\n};\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: 10.17.0\r\n- NPM version: 6.13.1\r\n- Strapi version: 3.0.0 stable\r\n- Database: MySQL\r\n- Operating system: Windows\r\n"},{"labels":[null,null,null,"bug"],"text":"**404 Error in documentation (nginx is not redirecting?)**\r\n  When i try to open the link in a new tab. instead of redirecting me to url with .html attached at the end, it throws 404 error\r\n.\r\nWhen you navigate to \r\nhttps://strapi.io/documentation/v3.x/getting-started/installation\r\n\r\nIt should redirect to\r\nhttps://strapi.io/documentation/v3.x/getting-started/installation.html\r\n\r\nI run the documentation in my local machine <br>\r\nIt looks like vuepress is working\r\nwhen you goto\r\nhttps://strapi.io/documentation/v3.x/getting-started/installation\r\nit will redirect to url with the .html at the end\r\n\r\nSo, i think the **nginx** is the issue\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'https://strapi.io/documentation/v3.x/getting-started/installation.html'\r\n2.  Right Click on 'CLI' link\r\n3.  Click on \"Open in New Tab\"\r\n4. Goto the tab it will show 404 error => https://strapi.io/documentation/v3.x/installation/cli\r\n\r\n\r\n**Expected behavior**\r\nIt should redirect me to the url with a prefix of \".html\"\r\nhttps://strapi.io/documentation/v3.x/installation/cli.html\r\n\r\n**Screenshots**\r\n-\r\n\r\n**Code snippets**\r\n-\r\n\r\n**System**\r\n\r\n- Node.js version: -\r\n- NPM version:\r\n- Strapi version:  v3.x\r\n- Database: -\r\n- Operating system: -\r\n\r\n**Additional context**\r\nI am using Window, Chrome browser. I think the nginx is receiving the url but throws 404 error \r\n"},{"labels":[null,null,null,"bug"],"text":"# **Bug**\r\nIn Strapi, after deleting a **Media** Field from a **Collection-Type**, a **GET request to /upload/files** throws an **Error**.  \r\nThis should not happened.  \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new Strapi App.\r\n2. Create a **Collection-Type** with a **Media** Field.\r\n3. Create a new **Entry** from this **Collection-Type** with a **File** uploaded.\r\n4. Delete the **Media** Field from the **Collection-Type**.\r\n5. Finally going to the Media Library (**GET request to /upload/files**) will result in an **ERROR**. \r\n\r\n**Expected behavior**\r\nWhen deleting a **Media** Field from a **Collection-Type** should remove any relation between the Entries that used **Media** as a Fields and the uploaded files.\r\n\r\n**Screenshots**\r\n![steps](https://user-images.githubusercontent.com/54691546/82836210-8fa0fa80-9e9c-11ea-8d53-7aa489acdb99.jpg)\r\n\r\n\r\n**Code snippets**\r\nThis Bug can be achieved **without** using code, this scenario **only uses the Strapi CMS**.\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.1.\r\n- NPM version: 6.13.2.\r\n- Strapi version: v3.0.0-beta.20.1\r\n- Database: Default (SQLlite I believe).\r\n- Operating system: Windows.\r\n\r\n# **FIX**\r\nI did find a \"solution\" to this issue.\r\n1. Add the Media field back to the Collection-Type.\r\n2. Remove the Media field manually from every Entry.\r\n3. Now you can remove the Media field from the collection-type without triggering this error.\r\n\r\n## **Possible solution**\r\nAs stated before, when deleting the Media field from the Collection-Type should remove the Media attached to every Entry that uses it.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I am using component in my collection, that has 2 fields, string and number -\r\nWhen creating with POST, and providing wrong values (string instead of number), I get :\r\n```json\r\n{\r\n    \"statusCode\": 500,\r\n    \"error\": \"Internal Server Error\",\r\n    \"message\": \"An internal server error occurred\"\r\n}\r\n```\r\nBut record is created anyway, with empty component property. \r\nMy component is required field, so shouldn't be created if validation failed ? \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create component with some fields\r\n2. Add that component as a field in collection and select required\r\n3. Try to create data for that collection with wrong values to trigger validation field\r\n4. See error\r\n\r\n**Expected behavior**\r\ncomponent is required field, so shouldn't be created if validation failed ? \r\n\r\n**System**\r\n\r\n- Node.js version: 14.x\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.0-beta.20.3\r\n- Database: mongo\r\n- Operating system: windows 10\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi,\r\n\r\ni'm trying to setup oauth connection with Google as provider\r\n\r\n1. Follow Strapi documentation about provider => setting Google as oauth provider\r\n2. From my Front-app, calling GET \"http://localhost:3002/connect/google\"\r\n3. See error \"{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"This provider is disabled.\",\"data\":\"This provider is disabled.\"}\"\r\n\r\nWhen looking into the plugin strapi-plugin-users-permissions in file \"controllers/Auth.js\" line 258 : \r\n\r\n![image](https://user-images.githubusercontent.com/6161547/82674549-c4fedb80-9c43-11ea-8532-ea647f217be2.png)\r\n\r\n`requestPath.split('\\\\')[2]` return undefined\r\n`requestPath.split('/')[2]` return the right value but not used since `process.platform` return `win32`\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.3\r\n- NPM version: 6.14.4\r\n- Strapi version: 20.1\r\n- Database: SQlite\r\n- Operating system: Windows 10\r\n\r\nShould I provide a PR to fix this ?\r\n\r\nRegards\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a content-type A and a content type B with two fields each (any type).  Save both of these.  \r\n2. Create a relation between Content Type A and B (One to Many)\r\n3. Populate Content Type A with some data\r\n4. Create a new **required** text field in content type B and save\r\n5. Saving will not complete and result in an error (see below)\r\n6. Platform is completely unusable - totally borked - no way to recover it\r\n\r\n**Expected behavior**\r\n\r\nI expected the new field to be added to the content type without error.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\n\r\nLog output here:\r\n\r\n```\r\n[2020-05-20T10:47:59.333Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-05-20T10:47:59.334Z] error error: column \"level\" contains null values\r\n    at Parser.parseErrorMessage (/srv/strapi/strapi-development/node_modules/pg-protocol/dist/parser.js:241:15)\r\n    at Parser.handlePacket (/srv/strapi/strapi-development/node_modules/pg-protocol/dist/parser.js:89:29)\r\n    at Parser.parse (/srv/strapi/strapi-development/node_modules/pg-protocol/dist/parser.js:41:38)\r\n    at Socket.<anonymous> (/srv/strapi/strapi-development/node_modules/pg-protocol/dist/index.js:8:42)\r\n    at Socket.emit (events.js:310:20)\r\n    at addChunk (_stream_readable.js:286:12)\r\n    at readableAddChunk (_stream_readable.js:268:9)\r\n    at Socket.Readable.push (_stream_readable.js:209:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:186:23)\r\n> strapi-development@0.1.0 develop /srv/strapi/strapi-development\r\n> strapi develop\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.2\r\n- NPM version:\r\n- Strapi version: 3.0.0-beta.20.3\r\n- Database: postgres psql (PostgreSQL) 10.12 (Ubuntu 10.12-0ubuntu0.18.04.1)\r\n- Operating system: Created via the Digital Ocean droplet\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**System**\r\n- Node.js version: 12\r\n- NPM version: 6\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: postgre\r\n- Operating system: Debian GNU/Linux\r\n\r\n```\r\n\"dependencies\": {\r\n    \"strapi\": \"3.0.0-beta.20\",\r\n    \"strapi-admin\": \"3.0.0-beta.20\",\r\n    \"strapi-connector-bookshelf\": \"3.0.0-beta.20\",\r\n    \"strapi-plugin-content-manager\": \"3.0.0-beta.20\",\r\n    \"strapi-plugin-content-type-builder\": \"3.0.0-beta.20\",\r\n    \"strapi-plugin-email\": \"3.0.0-beta.20\",\r\n    \"strapi-plugin-upload\": \"3.0.0-beta.20\",\r\n    \"strapi-plugin-users-permissions\": \"3.0.0-beta.20\",\r\n    \"strapi-utils\": \"3.0.0-beta.20\",\r\n    \"knex\": \"<0.20.0\",\r\n    \"sqlite3\": \"latest\",\r\n    \"pg\": \"latest\"\r\n  },\r\n```\r\n\r\n\r\n**Describe the bug**\r\nCan't upload an image when filename include symbol \"#\". With the symbols (&$@ everything is fine.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to 'Media Library' in cms admin panel (production type)\r\n2. Click on 'Upload assets'\r\n3. Click on 'Browse files'\r\n4. Choose file which name is including \"#\" symbol\r\n5. Click \"Upload ...\"\r\n![image](https://user-images.githubusercontent.com/37623678/82337574-99d27d00-99f4-11ea-8df4-2146fd130de0.png)\r\n\r\n6. See that file hasn't preview, can't be downloaded, and generally it cannot be used\r\n![image](https://user-images.githubusercontent.com/37623678/82337765-cb4b4880-99f4-11ea-82f1-a6416b486b7c.png)\r\n\r\n\r\n\r\n**Expected behavior**\r\nThe image file is uploaded and can be used.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/37623678/82334670-f6cc3400-99f0-11ea-98f0-ec535eee481d.png)\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI have a local strapi environment setup with a local version of a mysql db.\r\n\r\nI have two basic content-types, TestRelation1 and TestRelation2. They each have a text field and an integer field in addition to their ID Integer field (the primary key) that is created in the DB.\r\n![image](https://user-images.githubusercontent.com/21068946/82345089-b4cbcf80-99a9-11ea-9be7-d6fc10dce2d8.png)\r\n\r\n![image](https://user-images.githubusercontent.com/21068946/82345140-c319eb80-99a9-11ea-9da7-ffbef1821d73.png)\r\n\r\nI add a one-to-many relation to the TestRelation1 Content Type, pointing a new field to the existing ID field of TestRelation2 Content Type. \r\n\r\n![image](https://user-images.githubusercontent.com/21068946/82345241-e349aa80-99a9-11ea-96ab-0b768d1669ec.png)\r\n\r\nAnd now when I go to select an entry in the TestRelation2 type. It both does not display the ID column anymore:\r\n![image](https://user-images.githubusercontent.com/21068946/82345521-37548f00-99aa-11ea-97ce-fa96415b9827.png)\r\n\r\nand gives me an error when I select an entry:\r\n![image](https://user-images.githubusercontent.com/21068946/82345615-53583080-99aa-11ea-862b-d5b146e68c38.png)\r\n\r\nIt seems like the URL is not able to get the ID of that entry, instead getting [object Object]\r\n\r\n`http://localhost:1337/admin/plugins/content-manager/collectionType/application::testrelation2.testrelation2/[object%20Object]?redirectUrl=/plugins/content-manager/collectionType/application::testrelation2.testrelation2`\r\n\r\nWhen I manually edit the ID in the url, it looks fine:\r\n![image](https://user-images.githubusercontent.com/21068946/82345884-a336f780-99aa-11ea-9fb7-66eda964c66b.png)\r\n\r\n\r\n\r\n\r\n**System**\r\n\r\n- Node.js version: v10.17.0\r\n- NPM version: 6.11.3\r\n- Strapi version: v3.0.0-beta.20.2\r\n- Database: mysql \r\n- Operating system: macos 10.15.4\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"Hey\r\n**Describe the bug**\r\nOn version beta.20.3, you can’t delete single photos. Multiple load fields have no such problems.\r\n\r\nWhen I try to delete the image, I get the following message: Cast to ObjectId failed for value \"[]\" at path \"test\"\r\n\r\n**before:**\r\n![80867057-73fb6780-8cd5-11ea-8c84-6d298764c2bf](https://user-images.githubusercontent.com/16899697/82122962-22290600-97da-11ea-9455-964bbb49bf0d.png)\r\n\r\n**after i try to delete images:**\r\n![80867077-8ecddc00-8cd5-11ea-9909-655f6c337928](https://user-images.githubusercontent.com/16899697/82122974-379e3000-97da-11ea-8af3-8031312f97f4.png)\r\n\r\n**then i delete the images from the multiple field:**\r\n![80867120-bde44d80-8cd5-11ea-9c22-e37600a5576e](https://user-images.githubusercontent.com/16899697/82122993-4a186980-97da-11ea-9ff6-7afa5a3ee4af.png)\r\n\r\n**and then again try to remove from a single:**\r\n![80867139-d2c0e100-8cd5-11ea-8170-f390aec8f256](https://user-images.githubusercontent.com/16899697/82123009-5ac8df80-97da-11ea-9ed0-97f8a3b6cd03.png)\r\n\r\n**reload page**\r\n![80867143-e2402a00-8cd5-11ea-83bf-951de539e5ff](https://user-images.githubusercontent.com/16899697/82123016-687e6500-97da-11ea-8a8d-68d835543a9f.png)\r\n\r\n**System**\r\nnodejs v12.14.1\r\nNPM v6.13.4\r\nStrapi version: 3.0.0-beta.20.3\r\nDatabase: mongodb\r\nOperating system: WSL Windows 10 - Ubuntu 18.04/Ubuntu 20.4\r\n\r\nwhile I was able to get around this problem in the following way:\r\n\r\n![image](https://user-images.githubusercontent.com/16899697/82123872-11c75a00-97df-11ea-8ac5-4032dfd9c0d5.png)\r\n"},{"labels":[null,null,null,null,"bug"],"text":"This is a bug report. It happened when I add ID variable in a content data like Users for example. It when you save, project won't complete its restart, because the server won't start again. The reason is that the ID was a duplicate.\r\n\r\nReproduce the behavior:\r\n1) Clone Repo,\r\n2) Create a quick project\r\n3) Add a new SHORT string in a content type\r\n4) Name ID, in advanced mark private and unique variable (cz somebody might not know that they are duplicating)\r\n5) Save it.\r\n`Server wasn't able to start properly.\r\nerror Error: SQLITE_ERROR: duplicate column name: ID`\r\n-------------------\r\n\r\n**System**\r\n\r\n- Node.js version: v13.8.0\r\n- NPM version: 6.14.5\r\n- Strapi version: latest\r\n- Database: Guess SQLite (anything default what comes along with Strapi)\r\n- Operating system: Catalina\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe relation selector allows adding the same content-type multiple times.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'content-types builder'.\r\n2. Create new collection type.\r\n3. Add a new relation field type 'has many'.\r\n4. Go to content-manager, select the created content-type and click 'add new'.\r\n5. Add a item/content-type from the relation selector.\r\n\r\n**Expected behavior**\r\nAfter you added the content-type you should not be able to select it again.\r\n\r\n**System**\r\n\r\n- Node.js version: v12.14.0\r\n- NPM version: 6.14.5\r\n- Strapi version: 3.0.0-beta.20.3\r\n- Database: MongoDB\r\n- Operating system: Windows 10"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI change the plugin document setting.json but admin button link also old\r\n\r\nthe setting.json as follow\r\n\r\n```json\r\n{\r\n  \"x-strapi-config\": {\r\n    \"path\": \"/cms/dashboard/documentation\",\r\n    \"showGeneratedFiles\": true,\r\n    \"generateDefaultResponse\": true\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. yarn strapi install documentation\r\n2. change the path of the x-strapi-config to /cms/dashboard/documentation\r\n3. into admin docuemnt. click open document\r\n4. the link do not Expected the 127.0.0.1:/3337/cms/dashboard/documentation\r\n\r\n**Expected behavior**\r\nthe link Expected my  custom path \r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/20502762/81495230-71a29a00-92e1-11ea-8d33-81d6e1abe4dd.png)\r\n\r\n![image](https://user-images.githubusercontent.com/20502762/81495305-ed9ce200-92e1-11ea-8cc8-41df97a3d9f1.png)\r\n\r\n\r\n\r\n**System**\r\n- Node.js version: v12.14.1\r\n- NPM version: 6.14.1\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: mysql\r\n- Operating system: macos\r\n\r\n**Additional context**\r\nother, now my server has custom api prefix, but the swagger plugins static file url how to setting add the prefix...\r\n\r\n![image](https://user-images.githubusercontent.com/20502762/81495442-f0e49d80-92e2-11ea-9344-b3796b6f8ee8.png)\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nValidation errors are not displayed for a media fields, so it is unclear for users what is wrong.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new collection type with media field required\r\n2. Go to creation a new collection type\r\n3. Click on `Save` button\r\n4. See Media field\r\n\r\n**Expected behavior**\r\nValidation errors are displayed for media fields\r\n\r\n**Screenshots**\r\n\r\n<img width=\"1411\" alt=\"Screenshot 2020-05-08 at 14 57 58\" src=\"https://user-images.githubusercontent.com/53710324/81403573-63674900-913c-11ea-88ad-633dffa2990c.png\">\r\n\r\n<img width=\"1304\" alt=\"Screenshot 2020-05-08 at 13 44 45\" src=\"https://user-images.githubusercontent.com/53710324/81402176-94924a00-9139-11ea-9336-249693aeddec.png\">\r\n\r\n<img width=\"1406\" alt=\"Screenshot 2020-05-08 at 15 20 21\" src=\"https://user-images.githubusercontent.com/53710324/81405001-7deef180-913f-11ea-9b8b-17231dd0436a.png\">\r\n\r\n<img width=\"1398\" alt=\"Screenshot 2020-05-08 at 14 55 13\" src=\"https://user-images.githubusercontent.com/53710324/81403408-023f7580-913c-11ea-81ed-e89919630539.png\">\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.0\r\n- NPM version: v6.14.4\r\n- Strapi version: v3.0.0-beta.20.1\r\n- Database: mongo\r\n- Operating system: macOS\r\n\r\n**Additional context**\r\nDependencies list: \r\n\r\n```\r\n\"dependencies\": {\r\n    \"axios\": \"0.19.0\",\r\n    \"ckeditor4-react\": \"^1.1.0\",\r\n    \"lodash\": \"^4.17.5\",\r\n    \"strapi\": \"3.0.0-beta.20.1\",\r\n    \"strapi-admin\": \"3.0.0-beta.20.1\",\r\n    \"strapi-connector-mongoose\": \"3.0.0-beta.20.1\",\r\n    \"strapi-plugin-content-manager\": \"3.0.0-beta.20.1\",\r\n    \"strapi-plugin-content-type-builder\": \"3.0.0-beta.20.1\",\r\n    \"strapi-plugin-email\": \"3.0.0-beta.20.1\",\r\n    \"strapi-plugin-graphql\": \"^3.0.0-beta.20.1\",\r\n    \"strapi-plugin-upload\": \"3.0.0-beta.20.1\",\r\n    \"strapi-plugin-users-permissions\": \"3.0.0-beta.20.1\",\r\n    \"strapi-provider-upload-aws-s3\": \"^3.0.0-beta.20.1\",\r\n    \"strapi-utils\": \"3.0.0-beta.20.1\"\r\n  }``,`"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen using Strapi 3.0.0--beta.20 or newer, third party authentication providers no longer work. Strapi reports back that the provider is disabled even if it has been enabled in the administration panel. \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Update your global strapi version to beta20 or newer\r\n2. Create a new strapi project using \"strapi new myProject\"\r\n3. Create a new administrator and login\r\n4. Navigate to the \"Roles & Permissions\" section\r\n5. Navigate to the providers tab and enable one of the authentication providers and fill out the relevant fields. \r\n6. Now navigate to \"http://localhost:1337/connect/microsoft\"\r\n7. you will be notified that the authentication provider is not enabled, even though it was enabled in step 5\r\n\r\n**Expected behavior**\r\nwhen navigating to \"http://localhost:1337/connect/microsoft\" you should be redirected to the authentication providers login page. \r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/12785492/81165404-7fe07580-8fc4-11ea-94f6-cf1f69037f75.png)\r\n\r\n\r\n**System**\r\n\r\n- Node.js version: 12.6.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.20.2\r\n- Database: SQLLite\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\nI have authentication providers working without issues before 3.0.0-beta.20. Currently unable to upgrade, as users will be unable to login.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThe documentation plugin doesn't reference already created schemas for 200 responses, although the documentation suggests something like this (at least for plugins). Instead a foo object is described as response model for all 200 responses.\r\n\r\n> If the model is unknown it generates a response like the following { foo: \"string\" } that you can easily override later.\r\n\r\nActually the schemas are generated, although without created_at/updated_at fields but not referenced on 200 responses\r\n\r\nThis makes generating client code from API documentation less useful since type safety and autocomplete is lost for responses.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a collection type\r\n2. Generate documentation\r\n3. Check tree paths/_mycollection_/get/responses/200/content of file /extensions/documentation/1.0.0/full_documentation.json \r\n\r\n**Expected behavior**\r\nThe plugin should auto-generate response schemas including default fields (created_at, modified_at) excluding private set fields and reference them for all appropriate responses.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version:  v3.0.0-beta.20.1\r\n- Database: Mysql 5.6\r\n- Operating system: Win10\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nApplied filter `created_at` doesn't work at all. I can select any date, my article is still there as a result. See screenshot:\r\n![Screenshot from 2020-05-05 16-48-48](https://user-images.githubusercontent.com/45003352/81080016-91f0e400-8ef0-11ea-8d61-1baf0120fc9f.png)\r\n\r\nOn the other way applying multiple filters with at least one date filter (set with the correct date) shows NO results. See screenshot: \r\n![Screenshot from 2020-05-05 16-49-19](https://user-images.githubusercontent.com/45003352/81080324-e7c58c00-8ef0-11ea-92da-bfdc4ca6ea50.png)\r\n\r\n\r\n \r\n**Steps to reproduce the behavior**\r\n\r\n1. Build a content type (name: `article`) with Text, Rich text, Relation (with User - User has many Articles)\r\n2. Go to collection types `Articles`\r\n3. Apply filter: `id` `is` `1`\r\n4. Apply filter: `created_at` `is` `the actual date of creation`\r\n\r\n**Expected behavior**\r\nShow the article\r\n\r\n**Screenshots**\r\nSee above\r\n\r\n**System**\r\n- Node.js version: v10.15.0\r\n- NPM version: 6.13.1\r\n- Strapi version: v3.0.0-beta.20.2\r\n- Database: sqlite\r\n- Operating system: Ubuntu 18.04\r\n\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nStrapi presents 403 server error notifications with a green exclamation mark (!)\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Try to update/delete/modify any records\r\n2. When there is a 403 forbidden Server Error\r\n3. See the Warning icon color\r\n \r\n**Observed Behavior** \r\nThe Warning icon is in  **GREEN**.\r\n\r\n**Expected behavior**\r\nThe Warning icon should be **RED**.\r\n\r\n**Screenshots**\r\n![Screen Shot 2020-05-02 at 8 06 08 AM](https://user-images.githubusercontent.com/23507845/81040143-4991e180-8e70-11ea-9015-4328a481db81.png)\r\n\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Mongo & Redis\r\n- Operating system: MAC\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf you try to replace a media file in your collections for a second time in a row a \"Something went wrong\" message appear and a blank page beside menu is displayed until refreshing the page.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'Admin Panel'.\r\n2. Pick any of yours collection types with a media file in it.\r\n3. Click on \"edit\" (pencil) on any of your media files.\r\n4. Click on \"Replace media\" in the pop up window.\r\n5. Pick a picture from the \"explorer\" window.\r\n6. You will be back on the \"Edit\" window with the option to \"Replace media\" or \"Finish\"\r\n7. Click on \"Replace media\" again.\r\n8. Click on \"Cancel\"  on your \"explorer\" window before choosing a file.\r\n9. See error \"Something went wrong\" message.\r\n\r\n**Expected behavior**\r\nNo error after canceling replacing media.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/48102930/80972193-d47cc880-8deb-11ea-8e8f-0c542083966f.png)\r\n![image](https://user-images.githubusercontent.com/48102930/80972226-de063080-8deb-11ea-9ef4-60f10d6ae9f7.png)\r\n![image](https://user-images.githubusercontent.com/48102930/80972248-e52d3e80-8deb-11ea-9504-eb5759cdd2fc.png)\r\n![image](https://user-images.githubusercontent.com/48102930/80972257-ea8a8900-8deb-11ea-88e1-c5056983f8bf.png)\r\n![image](https://user-images.githubusercontent.com/48102930/80972290-f0806a00-8deb-11ea-9bea-f03a9fac2fb7.png)\r\n\r\n**System**\r\n- Node.js version: 10.15.3\r\n- YARN version: 1.22.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: MongoDB Atlas\r\n- Operating system: Windows 10 Spanish\r\n\r\n**Additional context**\r\nAdmin panel deployed on Heroku.\r\nIf someone can confirm this is node, yarn or language related will be appreciated because I will move to the recommended version.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a custom controller on a content type that has a dynamic zone field, excluding it from the selection of the query causes an error (Mongoose). For instance lets say we have dynamic zone field called \"modules\".\r\n\r\nIf my query looks like this:\r\n```js\r\nstrapi.query(\"name\")\r\n  .model\r\n  .find({},{modules:0}); <-- Excluding it from selection through field projection\r\n```\r\n\r\nThen it causes an error with the strapi-mongoose-connector library. If I don't include \"modules\" in it, it works. If I try to unproject another field that is not a dynamic zone field, it works. \r\n\r\nMy custom controller code looks like this:\r\n<img width=\"717\" alt=\"Screen Shot 2020-04-30 at 5 23 15 PM\" src=\"https://user-images.githubusercontent.com/15266711/80763333-4b744180-8b0c-11ea-938c-1fa2438d3a9d.png\">\r\n\r\nThe error message I get is in this screen shot:\r\n<img width=\"739\" alt=\"Screen Shot 2020-04-30 at 5 52 04 PM\" src=\"https://user-images.githubusercontent.com/15266711/80763302-3b5c6200-8b0c-11ea-9138-c660a1eec365.png\">\r\n\r\nIt appears that the library is still trying to map on the dynamic zone field despite it not being in the returned query.\r\n\r\n**Expected behavior**\r\nIt should return all objects that match the query of the controller without the \"modules\" dynamic zone field.\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.2\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20.1\r\n- Database: MongoDB 4.2.6\r\n- Operating system: Ubuntu 18.04 LTS\r\n\r\nThanks again and as always I appreciate the work the Strapi team does!\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nThe `update` method is returning an unsanitized user method which could leak data unnecessarily.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Submit a **PUT** request to the `/users/update` route.\r\n2. Look at the raw JSON returned\r\n\r\n**Expected behavior**\r\nThe returned JSON should return a sanitized user object, no password hash and no reset token.\r\n\r\n**Screenshots**\r\n![Capture](https://user-images.githubusercontent.com/9697868/80603316-dadb0100-89f5-11ea-88bb-b1e25b4ba294.JPG)\r\n\r\n\r\n**Code snippets**\r\n\r\nhttps://github.com/strapi/strapi/blob/6a6d53b4029c4b08837c8fd2a6aea820b91ce18a/packages/strapi-plugin-users-permissions/controllers/User.js#L219-L221\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.1\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.21\r\n- Database: pg 11\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\n\r\nI think the PR could be to either always sanitize the returned value or, if the ctx's current role is an admin don't sanitize the data if for some reason the unsanitized values are necessary in the admin panel.\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nThe default value for booleans in required components is null when it should be true or false.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n(Using the admin panel UI)\r\n1. Create a component.\r\n2. Add a boolean. Mark the boolean as required, and set the default value to true.\r\n3. Create a content type. Add the component. Mark the component as required\r\n4. Create content of that type. The boolean will appear to be false.\r\n5. Try to save the content. Saving will fail, as the boolean is required. (this tells me the value is null rather than false)\r\n\r\n**Expected behavior**\r\n\r\n1. Create a component.\r\n2. Add a boolean. Mark the boolean as required, and set the default value to true.\r\n3. Create a content type. Add the component. Mark the component as required.\r\n4. Create content of that type. The boolean will appear to be true.\r\n5. Try to save the content. Saving will succeed.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.14.1\r\n- NPM version: 6.13.4\r\n- Strapi version: Strapi v3.0.0-beta.19.4\r\n- Database: Postgres\r\n- Operating system: ubuntu 18.04.04 lts\r\n\r\n**Additional context**\r\nBecause this problem doesn't exist when adding a non-required component manually, I assume there's some kind of initialization issue with the component being created by default when the new content type is created.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen you write the character '%' in the search bar, the search bar is reset but the results are displayed. You have to wait a bit after typing '%'\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to the search bar of one of you content-types\r\n2. Write \"hello%\"\r\n3. See the input being cleared\r\n\r\n**Expected behavior**\r\nThe input is only cleared when I delete the text myself\r\n\r\n**Screenshots**\r\n![ezgif com-video-to-gif(1)](https://user-images.githubusercontent.com/11708220/80468297-4b731680-893f-11ea-8c23-cb079041d1d0.gif)\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.2\r\n- NPM version: 6.14.4\r\n- Strapi version: beta.20.1\r\n- Database: sqlite\r\n- Operating system: macOS\r\n\r\n**Additional context**\r\nThe results of the search are weird but it is an issue that doesn't seem to be related and that is already being fixed : https://github.com/strapi/strapi/tree/fix/4813/searchDoesntAlwaysWork.\r\nSo don't worry if you see weird results. The '%' bug seems to come front the front.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to the ***content type builder***\r\n2. Click on **Create a new collection type***\r\n3. Enter a name and click on ***continue***\r\n4. Add a field and click on the modal's ***finish*** button without saving the collection type\r\n5. Click on the ***configure the view*** button\r\n6. Click on the ***OK*** button of the confirm alert\r\n7. I am redirected to the not created collection type layout's view before I have created the modal\r\n8. See the loading screen and the error notification\r\n\r\n**Expected behavior**\r\nThe ***Configure the view*** button should be in disabled state until the model has been created.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.14.1\r\n- NPM version: 6.13.4\r\n- Strapi version: beta.20\r\n- Database: all\r\n- Operating system: Strapi's awesome MacBook (macOS Catalina 10.15.4)\r\n\r\n**Additional context**\r\nWe can simply add a disable state depending in the configure the view button according to the `isTemporary` `key` that we retrieve from the `modifiedData` object.\r\nAs a reminder this object as the following shape:\r\n\r\n```js\r\n// If content type\r\nmodifiedData: {\r\n  contentType: {\r\n    isTemporary: true\r\n    // ....\r\n  },\r\n  components: {}\r\n}\r\n\r\n// If component\r\nmodifiedData: {\r\n  component: {\r\n    isTemporary: true\r\n    // ....\r\n  },\r\n  components: {}\r\n}\r\n```"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nSince beta 19 a mutation don't return any payload on a successful execution (queries still do). I've tested this behavior in 18.8 (still working) and 19.3 (did not work anymore). \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new project\r\n2. Create a custom api endpoint with aggregations and a custom controller\r\n3. execute a graphql query against the custom controller\r\n\r\n**Expected behavior**\r\npayload should be returned on a successfull mutation\r\n\r\n**Code snippets**\r\nI can do a workaround with specifying the collection name at the return statement of the mutation controller\r\n```\r\nasync createByUser(ctx) {\r\n    ...\r\n    return {<COLLECTION NAME>: await service.create(body)};\r\n  },\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12\r\n- Strapi version: Beta 20\r\n- Database: sql lite\r\n- Operating system: mac os\r\n"},{"labels":[null,null,null,"bug"],"text":"First of all: Great work! I'm only experimenting with strapi for a couple of days now but i already fell in love with it.\r\n\r\n**Describe the bug**\r\nI just ran into an issue when i edited one of my collections and accidentally gave two fields in my collection type the same name but not the same letter casing. \r\nLooks like the name validation for collection type field is not case-insensitive, but the GraphQL validation is. (See logs - I didn't reproduce the issue without graphql installed.)\r\n\r\nCollection Type Name: \"Categories\"\r\n1. Text field with Name: \"name\"\r\n2. UID field with Name: \"Name\"\r\n\r\n**Steps to reproduce the behavior**\r\nThe steps are exactly what i did but of course it should be reproducable with any names for the collection and fields.\r\n\r\n1. Create a Collection Type named \"Categories\" with a text field \"name\"\r\n2. Edit the Collection Type again and add a UID field \"Name\" attached to the \"name\" field.\r\n3. Strapi/Docker will stop working. \r\n\r\n**Expected behavior**\r\nAlthough i it doesn't make sense to give two fields the same name, input validation should have warned that the name already exists.\r\n\r\n**Logs before server shut down**\r\n\r\n```[2020-04-26T22:12:20.238Z] debug GET /content-type-builder/components (89 ms) 200\r\n[2020-04-26T22:12:20.275Z] debug GET /content-type-builder/content-types (33 ms) 200\r\n[2020-04-26T22:12:47.009Z] info File changed: /srv/app/api/categories/models/categories.settings.json\r\n[2020-04-26T22:12:47.013Z] debug PUT /content-type-builder/content-types/application::categories.categories (66 ms) 201\r\n[2020-04-26T22:12:47.015Z] info The server is restarting\r\n\r\n[2020-04-26T22:13:03.229Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-04-26T22:13:03.233Z] error Error: There can be only one type named \"CategoriesConnectionName\".\r\n\r\nField \"CategoriesConnectionName.key\" can only be defined once.\r\n\r\nField \"CategoriesConnectionName.connection\" can only be defined once.\r\n    at assertValidSDL (/srv/app/node_modules/graphql/validation/validate.js:108:11)\r\n    at Object.buildASTSchema (/srv/app/node_modules/graphql/utilities/buildASTSchema.js:71:34)\r\n    at Object.buildSchemaFromTypeDefinitions (/srv/app/node_modules/graphql-tools/dist/generate/buildSchemaFromTypeDefinitions.js:25:28)\r\n    at makeExecutableSchema (/srv/app/node_modules/graphql-tools/dist/makeExecutableSchema.js:26:29)\r\n    at Object.generateSchema (/srv/app/node_modules/strapi-plugin-graphql/services/schema-generator.js:85:20)\r\n    at Object.initialize (/srv/app/node_modules/strapi-plugin-graphql/hooks/graphql/index.js:79:9)\r\n    at /srv/app/node_modules/strapi/lib/hooks/index.js:37:28\r\nStarting your app...\r\n[2020-04-26T22:18:56.177Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-04-26T22:18:56.179Z] error Error: There can be only one type named \"CategoriesConnectionName\".\r\n\r\nField \"CategoriesConnectionName.key\" can only be defined once.\r\n\r\nField \"CategoriesConnectionName.connection\" can only be defined once.\r\n    at assertValidSDL (/srv/app/node_modules/graphql/validation/validate.js:108:11)\r\n    at Object.buildASTSchema (/srv/app/node_modules/graphql/utilities/buildASTSchema.js:71:34)\r\n    at Object.buildSchemaFromTypeDefinitions (/srv/app/node_modules/graphql-tools/dist/generate/buildSchemaFromTypeDefinitions.js:25:28)\r\n    at makeExecutableSchema (/srv/app/node_modules/graphql-tools/dist/makeExecutableSchema.js:26:29)\r\n    at Object.generateSchema (/srv/app/node_modules/strapi-plugin-graphql/services/schema-generator.js:85:20)\r\n    at Object.initialize (/srv/app/node_modules/strapi-plugin-graphql/hooks/graphql/index.js:79:9)\r\n    at /srv/app/node_modules/strapi/lib/hooks/index.js:37:28\r\n```\r\n\r\n**System**\r\n- Docker image: strapi/strapi\r\n- Node.js version: v12.13.0\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: MongoDB\r\n"},{"labels":[null,null,null,"bug"],"text":"Adding JSON type column is working fine but after there is a limit to it, I can't add more data after certain point it gives above error. \r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Add JSON column\r\n2. Try to add multiple JSON object into that column and click save button.\r\n3. It should show above `ERROR:  value too long for type character varying(255) ` in console.\r\n\r\n**Expected behavior**\r\n There should not be any limit to JSON field or if it is then it should be controlled by strapi admin panel currently there is no way to set limit.\r\n<img width=\"803\" alt=\"Screenshot 2020-04-25 at 8 13 17 PM\" src=\"https://user-images.githubusercontent.com/2686288/80281612-9bcb5800-8736-11ea-8d02-40eb653fdcaf.png\">\r\n\r\n**System**\r\n- Node.js version: v12.14.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.5\r\n- Database: postgresql\r\n- Operating system: macos\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nHello, I am getting following error while typing in search box of 1 relational field on model create/update page of strapi admin\r\n```\r\nGET /content-manager/explorer/application::{{modelName}}?id_contains=54&_limit=20&_start=0 (7 ms) 500\r\n[2020-04-25T10:42:30.363Z] error Error: Can't use $options\r\n    at ObjectId.SchemaType.castForQuery (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/schematype.js:1374:13)\r\n    at ObjectId.SchemaType.castForQueryWrapper (/Users/{{username}}/work/{{projectname}}//{{projectname}}/node_modules/mongoose/lib/schematype.js:1353:17)\r\n    at cast (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/cast.js:296:39)\r\n    at cast (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/cast.js:58:18)\r\n    at model.Query.Query.cast (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/query.js:4697:12)\r\n    at model.Query.Query._castConditions (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/query.js:1876:10)\r\n    at model.Query.<anonymous> (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/query.js:1903:8)\r\n    at model.Query._wrappedThunk [as _find] (/Users/{{username}}/work/projects/{{projectname}}/node_modules/mongoose/lib/helpers/query/wrapThunk.js:16:8)\r\n    at /Users/{{username}}/work/projects/{{projectname}}/node_modules/kareem/index.js:278:20\r\n    at /Users/{{username}}/work/projects/{{projectname}}/node_modules/kareem/index.js:77:15\r\n    at processTicksAndRejections (internal/process/task_queues.js:79:11)\r\n```\r\n**Steps to reproduce the behavior**\r\n\r\n1. Go to create/edit page of model having relational field, in my case 'has many' relation but tried in dependant model so only single value can be selected from dropdown(with search by id/_id field, I configured view to display id (Entry title) in relational field ) \r\n2. Click on relational field dropdown & search for any id in create/edit page\r\n3. It should show Error occrured message in UI & log error on server\r\n\r\n**Expected behavior**\r\nIt is not breaking anything but displays error on UI & server log\r\n\r\n\r\n**System**\r\n\r\n- Node.js version: 12.16.2 <!-- Please ensure you are using the Node LTS version (v12) -->\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20 <!-- Please make sure you are on the latest version -->\r\n- Database: MongoDB\r\n- Operating system: MacOS 10.15.4 or Ubuntu 16.04\r\n\r\n**Possible Cause**\r\nAs it only happens if I select id as field to display, so I think may be mongoose don't allow passing $options for ignore case for `_id` field\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nWhen ever I rename a field in a collection (or single type) The previous name of the field stays in my API response(JSON) with the latest content.\r\n\r\n**Steps to reproduce the behavior**\r\n- create a single type with a field \"name\".\r\n- go to your created single type and fill the name with \"myName\". Then click save\r\n- request your api to get this single type you created and you'll see your member with a field \"name\" with \"myName\" as value.\r\n- go to the builder and edit the field \"name\" of your single type (rename it \"newName\").\r\n- go to your single type, in the value of your field \"newName\" put \"myNewName\" then save.\r\n- request your API for that single type : you'll see a field name with value \"myName\" AND a field \"newName\" with value \"myNewName\".\r\n\r\n**Expected behavior**\r\n\r\nWhen you modify a field, the API removes the last on and keep only the new one (same in the DB)\r\n\r\n**System**\r\n\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: mongo\r\n- Operating system: debian"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen I upload a new image with a `path`, the new upload system with Media Library generate a thumbnail.\r\nBut the thumbnail is not uploaded into the filepath defined.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Upload a new image with a defined `path`\r\n2. Go to upload folder, and see the thumbnail into the path root\r\n\r\n**Expected behavior**\r\nThe thumbnail need to be in the same folder path than the original image uploaded\r\n\r\n**Example**\r\nI upload a new image `avatar.png` with the path  `/users/1234/` :\r\n- Image is correclty uploaded into `/users/1234/avatar.png`\r\n- Thumbnail is upload to `/thumbnail_avatar.png`  instead of `/users/1234/thumbnail_avatar.png`\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.1\r\n- NPM version: v6.13.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: MySQL 5.7\r\n- Operating system: MacOSX Catalina\r\n- Upload Provider : local // google-cloud-storage\r\n\r\nThanks"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nFind-one endpoint `/resource/:id` responses with 500 status code instead of 404, this happens with MongoDB setup.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Setup Strapi with MongoDB configuration.\r\n2. Create a collection (resource).\r\n3. Give `findOne` access to the public.\r\n4. Send a request to `/resource-name/any-invalid-id`.\r\n\r\n**Expected behavior**\r\n404 response.\r\n\r\n**System**\r\n\r\n- Node.js version: 12.15.0\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: MonogoDB\r\n- Operating system: MacOS\r\n\r\n**Additional context**\r\n```\r\nerror CastError: Cast to ObjectId failed for value \"any-invalid-id\" at path \"_id\" for model \"category\"\r\n```\r\nThis problem is known with MongoDB, It's expected due to passing invalid ObjectID, it tries to parse it to ObjectID first so it fails and we have the 500 response.\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI am trying to edit a component using the content type builder. My component has only one enum field and I want to add another description field, all works fine in the type builder but when I hit the save button to update the component then I am getting the following error and a blank page in the Admin UI:\r\n\r\n```json\r\n{\"error\":{\"component.icon\":[\"icon.required\"]}}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a component using the content type builder with one field that is an enum field \r\n2. Create a content type that uses this component\r\n3. Create an item of the content type that uses this component\r\n4. Go to content type builder to edit your component and add a new description field\r\n5. try to save the component\r\n6. Blank page in admin UI and error message in the browser console with a 400 bad request response from the server\r\n\r\n**Expected behavior**\r\nSaving the edited component works and restarts the server to apply the changes to the component\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/61593456/80092284-d086b600-8562-11ea-8476-64c1dc0f5be4.png)\r\n\r\n**System**\r\n\r\n- Node.js version: 10.6\r\n- Strapi version: beta 19.5\r\n- Database: Mongo db v4.0.12\r\n- Operating system: Mac OSX Catalina 10.15.4\r\n\r\nps: The only way it works now is if you do it directly in the code and add the field there. It seems the bug is happening when using the Admin UI.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen generating a new strapi setup the database variables are not working in development mode.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. genrerate a new setup with different database variables example: DATABASE_PASSWORD: 123\r\n2. The build fails cause it cannot communicate with the database.\r\n\r\nI am using docker compose this is my setup:\r\n```\r\nversion: '3.7'\r\nservices:\r\n  strapi:\r\n    image: strapi/strapi\r\n    container_name: strapi\r\n    environment:\r\n      # HOST: 0.0.0.0\r\n      # PORT: 1337\r\n      DATABASE_CLIENT: mongo\r\n      DATABASE_NAME: strapi\r\n      DATABASE_HOST: mongo\r\n      DATABASE_PORT: 27017\r\n      DATABASE_USERNAME: strapi\r\n      DATABASE_PASSWORD: 123\r\n    ports:\r\n      - 1337:1337\r\n    depends_on:\r\n      - mongo\r\n\r\n  mongo:\r\n    image: mongo\r\n    container_name: mongo\r\n    environment:\r\n      MONGO_INITDB_ROOT_USERNAME: strapi\r\n      MONGO_INITDB_ROOT_PASSWORD: 123\r\n    volumes:\r\n      - mongo-data:/data/db\r\n    ports:\r\n      - 27017:27017\r\nvolumes:\r\n    mongo-data:\r\n```\r\n\r\n**Expected behavior**\r\nI would assume this should work not only for staging and production but also for deveopment\r\n\r\n**Additional context**\r\nSeems to be an issue when generating the config files if you look at \r\n`/packages/strapi-generate-new/lib/resources/json/database.json.js`\r\nYou can see that it will only generate it for production and staging.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nThe unique option doesn't work\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a Type with a unique field\r\n2. Create a document with a value in this unique field\r\n3. Create another document with the same value in this unique field\r\n\r\n**Expected behavior**\r\n\r\nI expect a warning for the unique field, but it creates the document.\r\n\r\n**System**\r\n\r\n- Node.js version: v12\r\n- NPM version: v6\r\n- Strapi version: v3.0.0-beta.20\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nAfter running Strapi in production for the first time, any subsequent run fails with the error:\r\n\r\n```\r\nroot@strapi-56cc8894b8-hhv2z:/var/www/apps/strapi# node server.js\r\n[2020-04-17T02:50:17.634Z] error Bootstrap function in plugin \"users-permissions\" failed\r\n[2020-04-17T02:50:17.637Z] error MongoError: Cursor not found (namespace: 'strapi_production.users-permissions_permission', id: 99938245034687426).\r\n    at Connection.<anonymous> (/var/www/apps/strapi/node_modules/mongodb/lib/core/connection/pool.js:460:61)\r\n    at Connection.emit (events.js:310:20)\r\n    at processMessage (/var/www/apps/strapi/node_modules/mongodb/lib/core/connection/connection.js:368:10)\r\n    at Socket.<anonymous> (/var/www/apps/strapi/node_modules/mongodb/lib/core/connection/connection.js:537:15)\r\n    at Socket.emit (events.js:310:20)\r\n    at addChunk (_stream_readable.js:286:12)\r\n    at readableAddChunk (_stream_readable.js:268:9)\r\n    at Socket.Readable.push (_stream_readable.js:209:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:186:23)\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a sharded MongoDB cluster (not Atlas or single-node)\r\n2. Create a Strapi project, point to this new cluster\r\n3. Run the project (`yarn develop` is fine)\r\n4. Cancel the run, and run it again\r\n\r\n**Expected behavior**\r\n\r\nServer runs normally, no errors occur.\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/12628715/79527771-6d62c400-8036-11ea-8c17-a9e905ea4bfa.png)\r\n\r\n**Code snippets**\r\n\r\nI pinned the issue down to [this line](https://github.com/strapi/strapi/blob/master/packages/strapi-plugin-users-permissions/services/UsersPermissions.js#L410)\r\n\r\n```\r\nconst roleCount = await strapi.query('role', 'users-permissions').count();\r\n```\r\n\r\nTo fix the issue, I placed this line above it, since I already know that the default permissions already exist:\r\n\r\n```\r\nreturn this.updatePermissions();\r\n```\r\n\r\n**System**\r\n\r\n- Node.js version: v12.16.2\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: Sharded MongoDB Cluster\r\n- Operating system: Ubuntu 14.10\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nwhen we select something in a modal window, during the selection, if the mouse goes out of the window, the window closes\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nclick inside a modal window and drag the mouse outside the window, it closes.\r\n\r\n**Expected behavior**\r\nthe window shouldn't close\r\n\r\n**System**\r\n\r\n- Node.js version: v13.12.0\r\n- NPM version: 6.14.4\r\n- Strapi version: v3.0.0-beta.20\r\n- Database: mongoDB\r\n- Operating system: windows 10 2004\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe `UserInput` for the `register` mutation has all the private fields in it.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new project `yarn create strapi-app my-project --quickstart`\r\n2. Install GraphQL plugin\r\n3. Open the GraphQL Playground: http://localhost:1337/graphql\r\n4. You can register sending all the fields:\r\n\r\n```\r\ntype UserInput {\r\n  username: String!\r\n  email: String!\r\n  provider: String\r\n  password: String\r\n  resetPasswordToken: String\r\n  confirmed: Boolean\r\n  blocked: Boolean\r\n  role: ID\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nYou shouldn't be able to send `resetPasswordToken`, `confirmed`, `blocked` and `role`.\r\n\r\n**System**\r\n\r\nNode.js version: v12.16.1\r\nNPM version: 6.13.4\r\nStrapi version: 3.0.0-beta.19.5\r\nDatabase: SQLite\r\nOperating system: Mac\r\n\r\nAny instructions on how to customize the `UserInput` schema while this isn't fixed?"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThe latest beta generates thumbnails which don't have a filename, but just a hash. The rackspace plugin wont be able to upload them as it relies on the filename.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Setup rackspace as a provider\r\n2. Try to upload an image\r\n\r\n**Expected behavior**\r\nThe image should upload along with the thumbnails.\r\n\r\n**System**\r\n\r\n- Node.js version: 12\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.20\r\n- Database: mysql\r\n- Operating system: linux\r\n\r\n**Additional context**\r\nNot sure if the thumbnails should have the name, or if the plugins should use the hash instead.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nPassword fields in custom Content Types are saved as clear text in the database. The default User type password field is working as expected.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install a new strapi\r\n2. Create a new content type\r\n3. Add a password field and save the content type\r\n4. Add a new item in the content type list, and set a password.\r\n\r\n**Expected behavior**\r\nThe database should have the password saved in an encrypted format. Instead we can read the password in clear text.\r\n\r\n**System**\r\n- Node.js version: 13.12.0\r\n- NPM version: 6.4.14\r\n- Strapi version: 3.0.0-beta.19.5\r\n- Database: mysql, and sqlite\r\n- Operating system: ubuntu\r\n\r\n**Additional context**\r\nHappens both when saving from the admin interface and when using the api calls in the bootstrap to generate the Content type.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nUnable to set default value for JSON input field in the Admin panel. Incorrect display of the default value when set via `*.settings.json` file. Unable to set additional fields if JSON field has default value set in `*.settings.json`\r\n\r\n**Steps to reproduce the behavior (part 1)**\r\n1. Create a new Strapi project\r\n2. Login to Admin panel\r\n3. Go to Content-Types Builder and edit the User type\r\n4. Add new field, select type JSON, give it a name `userTasks`\r\n5. Switch to Advanced Settings tab and set Default Value to `{\"openTasks\": []}`\r\n6. Click Finish, click Save\r\n\r\n**Expected behavior**\r\nChanges saved successfully, server restarted\r\n\r\n**Actual behavior**\r\nThe screen becomes white, error message in the console (See screenshot 1 below)\r\n\r\n**Steps to reproduce the behavior (part 2)**\r\n1. Refresh page, add new field, select type JSON, give it a name `userTasks`\r\n2. Don't set Default value, click Finish -> click Save\r\n3. In your IDE go to `./extensions/users-permissions/models/User.settings.json`\r\n4. Manually set `\"userTasks\"` property and set default field (see code snippet 1 below)\r\n5. Rebuild, restart server.\r\n6. Refresh the page, edit `\"userTasks\"` field, go to Advanced settings\r\n\r\n**Expected behavior**\r\n`{\"openTasks\": []}` should appear in the default value text field\r\n\r\n**Actual behavior**\r\n`[object Object]` appears in the text field (see screenshot 2)\r\n\r\n**Steps to reproduce the behavior (part 3)**\r\n1. Create new User\r\n2. Edit him in the Collection Types and update the `userTasks` field (see screenshot 3 below)\r\n3. Click Save\r\n4. Go to Content-Types Builder and edit the User type\r\n5. Try to add another field, for example Text -> Short text\r\n6. Click Finish -> click Save\r\n\r\n**Expected behavior**\r\nChanges saved successfully, server restarted\r\n\r\n**Actual behavior**\r\nThe screen becomes white, error message in the console\r\n\r\n**Screenshots**\r\n1\r\n![image](https://user-images.githubusercontent.com/1457782/79126242-43946d80-7da8-11ea-9957-34983b25654f.png)\r\n2\r\n![image](https://user-images.githubusercontent.com/1457782/79127287-4beda800-7daa-11ea-8647-bd542fd4cd3d.png)\r\n3\r\n![image](https://user-images.githubusercontent.com/1457782/79127938-62483380-7dab-11ea-8275-444202be4791.png)\r\n\r\n\r\n**Code snippets**\r\n1. \r\n```\r\n\"userTasks\": {\r\n      \"type\": \"json\",\r\n      \"default\": {\"openTasks\": []}\r\n    },\r\n```\r\n\r\n**System**\r\n- Node.js version: v13.5.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: MongoDB\r\n- Operating system: Windows 10 Pro\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nI want to clear the date that was set on a field\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a type with a date field that is not required\r\n2. Create an instance of the type with a value in the date field and save it\r\n3. Edit the instance and clear the date field\r\n4. It cannot be cleared\r\n5. Make a GraphQL request to clear the field\r\n6. The request errors\r\n\r\n\r\n**Expected behavior**\r\nYou can clear the field in the UI\r\nThe GraphQL mutation works\r\n\r\n**Code snippets**\r\n```\r\nmutation UnsetDate($id: ID!) {\r\n  updateYourType(input:{\r\n    where:{\r\n      id: $id\r\n    },\r\n    data: {\r\n      date_field: null\r\n    }\r\n  }) {\r\n    your_type { \r\n      id\r\n      date_field\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis returns `\"message\": \"Expected type Date, found \\\"\\\"; Date cannot represent an invalid date-string .\"`\r\n\r\n**System**\r\n- Node.js version: 13.7\r\n- Yarn version: 1.22\r\n- Strapi version: 3b19.5\r\n- Database: Mongo 4.2.5\r\n- Operating system: Arch Linux 4.19-97\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a new component in a `Dynamic Zone`, there is a minor bug : the focus is not well managed between the name of the component and the input for searching icons. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to **Plugins** > **Content Types Builder**\r\n2. Choose a *collection*\r\n3. Add a new *dynamic zone* field on it\r\n4. Click on *Add a component*\r\n5. Click on *Create a new component*\r\n6. Click on the magnifying glass for searching icons\r\n7. Type in the `Name` field\r\n8. You should see that after one keyup, the focus goes to the input for searching icons\r\n\r\n**Expected behavior**\r\nThe focus should stay on the input `Name` when we type in it. \r\n\r\n\r\n**Screenshots**\r\n![bugStrapi3](https://user-images.githubusercontent.com/23191482/79064980-87567c80-7cad-11ea-9914-b5350c5f9790.gif)\r\n\r\n\r\n**System**\r\n- Strapi version: `v3.0.0-beta.19.5`\r\n- Operating system: OS X\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIf you have a component (repeatable or simple) in a collection and you try to populate an empty field that you changed to required the validation doesn't let you modify it because it says:\r\n```\r\nValidationError: project validation failed: fieldOfScience: Path `fieldOfScience` is required.\r\n```\r\n\r\nThe only case that the collection updates correctly is when you have an empty simple component or no components at all but if you have:\r\n- A populated simple component\r\n- An empty repeatable component\r\n- A populated repeatable component\r\n\r\nI suppose that with an empty simple component works because you are sending a **null** in this case in the POST.\r\n\r\n**Steps to reproduce the behavior**\r\n1. The collection must have a no populated field that is not required and a repeatable component. For example, in this case **abstract** is not required:\r\n![Screen Shot 2020-04-15 at 12 48 19 PM](https://user-images.githubusercontent.com/9059044/79329079-6db86d80-7f17-11ea-8a81-9a8d91d6e4c8.png)\r\n2. Create a new entry:\r\n![Screen Shot 2020-04-15 at 12 51 19 PM](https://user-images.githubusercontent.com/9059044/79329299-d43d8b80-7f17-11ea-966f-1593b893ef3f.png)\r\n3. Now change the **abstract** field of the collection to required:\r\n![Screen Shot 2020-04-15 at 12 52 09 PM](https://user-images.githubusercontent.com/9059044/79329373-fb945880-7f17-11ea-9c2f-b04882db6f0a.png)\r\n4. Go to that collection, try to populate the **abstract** field and see the error:\r\n![Screen Shot 2020-04-15 at 12 53 49 PM](https://user-images.githubusercontent.com/9059044/79329514-3ac2a980-7f18-11ea-92c8-6e42210666ca.png)\r\n\r\n**Expected behavior**\r\nIt should update the collection like when you don't have the component in the collection.\r\n\r\n**System**\r\n- Node.js version: v13.12.0\r\n- NPM version: 6.14.4\r\n- Strapi version: 3.0.0-beta.19.5\r\n- Database: MongoDB\r\n- Operating system: MacOS Catalina 10.15.3\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nRunning the command **`yarn create strapi-app backend --quickstart --no-run `** does not return the control back to the consile user\r\n\r\n**Steps to reproduce the behavior**\r\n1. Run **`yarn create strapi-app backend --quickstart --no-run`** and observe that the control does not return back to you. You would have to use \"break\" signal (\"Ctrl-C\") to get the control back.\r\n\r\n3. Run **`yarn create strapi-app backend --no-run`** (omit specifying the **`--quickstart`** argument), and specify that argument when prompted for it - and to command runs as expected:\r\n\r\n**Expected behavior**\r\nCases 1. and 2. above should behave the same way \r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/2712405/78957780-49423880-7ab4-11ea-8138-1da862452d88.png)\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v12.14.0 <!-- Please ensure you are using the Node LTS version (v12) -->\r\n- NPM version: 6.13.6\r\n- Yarn version: 1.22.4\r\n- Strapi version: 3.0.0-beta.19.5) <!-- Please make sure you are on the latest version -->\r\n- Database: default\r\n- Operating system: Windows 10 PRO, version 1903\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"https://github.com/strapi/strapi/blob/7b9d72e210bb5da6ad6b793b12efcc3438e36473/packages/strapi-connector-mongoose/lib/buildQuery.js#L524\r\n\r\n## PROBLEM\r\n\r\nusing deep filters and deep populate with strapi-connector-mongoose like 'model.slug'='veehicle-01' i throws error .split() is undefined, because my populate items is an object and it expects a string.\r\n\r\nIt's nice to mention that the populate with object works if no filters are given to the method. Giving the impression that some test cases are missing if the behavior is intentional.\r\n\r\nGET to /vehicles?model.slug='veehicle-01'\r\n```\r\nstrapi.query('vehicle').find(filters, [{\r\n  path: 'model',\r\n  populate: {\r\n    path: 'slug'\r\n  }\r\n}])\r\n```\r\n\r\nIs there another way to use populate besides string? Because deep associations like 'model.brand' with mongoose doesn't work at all for me, using `3.0.0-beta.19.5`\r\n\r\n[EDIT]\r\n\r\nLooking further, `computePopulatedPaths` does the trick for both deep filtering and populates, since populate in mongoose can be used as object, there should be a way to handle with path as object for populate there.\r\n\r\n### STEPS TO REPRODUCE\r\n\r\n#### STEP 1:\r\n- Create 3 models: brand, model, vehicle with title as text field for example:\r\n\r\nbrand belongsToMany models\r\nmodels hasMany brands\r\nmodels belongsToMany vehicles\r\nmodels hasMany vehicles\r\n\r\n#### STEP 2:\r\n- populate the collections with the admin panel.. 2 of each for testing api query filters..\r\n\r\n#### STEP 3:\r\n- override the vehicle api controller find() to always populate with ['model.brand']\r\n\r\n#### STEP 4: \r\n- run GET http://127.0.0.1:8080/vehicles\r\n\r\n##### Notice that populate didn't work\r\n\r\ninstead use the mongoose populate...\r\n\r\n```\r\n\t{\r\n\t\tpath: 'model',\r\n\t\tpopulate: {\r\n\t\t\tpath: 'brand',\r\n\t\t}\r\n\t},\r\n```\r\n\r\nThen it populates correctly.\r\n\r\n#### STEP 5:\r\n\r\n- run GET http://127.0.0.1:8080/vehicles?model.brand.title=filter-a-brand\r\n\r\nThen the exception is thrown:\r\n\r\n```\r\nerror TypeError: path.split is not a function\r\n    at findModelPath (/home/.../node_modules/strapi-connector-mongoose/lib/buildQuery.js:524:22)\r\n    at populate.map.map.path (/home/.../node_modules/strapi-connector-mongoose/lib/buildQuery.js:175:18)\r\n    at Array.map (<anonymous>)\r\n    at computePopulatedPaths (/home/.../node_modules/strapi-connector-mongoose/lib/buildQuery.js:175:6)\r\n    at buildDeepQuery (/home/.../node_modules/strapi-connector-mongoose/lib/buildQuery.js:64:41)\r\n    at Object.buildQuery (/home/.../node_modules/strapi-connector-mongoose/lib/buildQuery.js:28:10)\r\n    at buildQuery (/home/.../node_modules/strapi-connector-mongoose/node_modules/strapi-utils/lib/buildQuery.js:145:6)\r\n    at Object.find (/home/.../node_modules/strapi-connector-mongoose/lib/queries.js:391:12)\r\n    at Query.find (/home/.../node_modules/strapi-database/lib/queries/create-query.js:48:32)\r\n    at Object.find (/home/.../api/vehicle/services/vehicle.js:54:33)\r\n    at Object.find (/home/.../node_modules/strapi/lib/core-api/controller.js:72:34)\r\n    at dispatch (/home/.../node_modules/koa-router/node_modules/koa-compose/index.js:44:32)\r\n    at next (/home/.../node_modules/koa-router/node_modules/koa-compose/index.js:45:18)\r\n    at dispatch (/home/.../node_modules/koa-compose/index.js:42:32)\r\n    at policies.push (/home/.../node_modules/strapi/lib/middlewares/router/utils/routerChecker.js:77:28)\r\n    at dispatch (/home/.../node_modules/koa-compose/index.js:42:32)\r\n    at module.exports (/home/.../node_modules/strapi-plugin-users-permissions/config/policies/permissions.js:97:9)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n[2020-04-14T16:18:44.215Z] debug GET /vehicles?model.brand.title=Audi (421 ms) 500\r\n```\r\n\r\n\r\n### POSSIBLE SOLUTION\r\n\r\nAdd this: \r\n\r\n```\r\nconst pathObjToPathString = (pathObj, pathStr = '') => {\r\n\tif(!pathObj.path) return pathObj;\r\n\t\r\n\tpathStr += (pathStr === '')\r\n\t\t? pathObj.path\r\n\t\t: '.' + pathObj.path\r\n\t\r\n\tif(pathObj.populate) {\r\n\t\tpathStr = pathObjToPathString(pathObj.populate, pathStr);\r\n\t}\r\n\r\n\treturn pathStr;\r\n};\r\n```\r\n\r\nChange this:\r\n\r\n```\r\nconst computePopulatedPaths = ({ model, populate = [], where = [] }) => {\r\n  const castedPopulatePaths = populate\r\n\t\t.map(el => (Array.isArray(el) \r\n\t\t\t? el.join('.') \r\n\t\t\t: (el.path) \r\n\t\t\t\t? pathObjToPathString(el)\r\n\t\t\t\t: el))\r\n\r\n...\r\n```"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nUpdating the view for an entity of model always fails\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to your content type\r\n2. Click on the gear dropdown and select \"Configure the view\"\r\n3. Change any of the settings and click 'Save'\r\n4. Click the Confirm button in the modal\r\n5. You are presented with a notification \"An error occurred\", the server log output shows a 400 response and the http response body is \"{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":{\"name\":\"validationError\",\"errors\":[\"this field cannot have keys not specified in the object shape\"]},\"data\":{\"name\":\"validationError\",\"errors\":[\"this field cannot have keys not specified in the object shape\"]}}\"\r\n\r\n**Expected behavior**\r\nThe update succeeds\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Code snippets**\r\nN/A\r\n\r\n**System**\r\n- Node.js version: 12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.5\r\n- Database: Postgres 11\r\n- Operating system: macOS 10.15.4\r\n\r\n**Additional context**\r\nN/A\r\n"},{"labels":[null,"bug"],"text":"\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nIn Strapi 19.5 and 19.4 Dev environment we are unable to submit PUT requests without generating an error.  When I roll back to 19.3 put requests work fine. \r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. submit a simple unauthenticated put request via postman:\r\n\r\nhttps://myapi.com/myendpoint/5e8e9dd3fb6cd54caca09b6d\r\n\r\n{\r\n        \"status\": \"Checked\"\r\n    }\r\n\r\n2. Response is:\r\n\r\n{\"statusCode\":404,\"error\":\"Not Found\",\"message\":\"entry.notFound\"}\r\n\r\n**Expected behavior**\r\nPUT requests succeeds.\r\n\r\n**System**\r\n- Node.js version: <!-- Please ensure you are using the Node LTS version (v12) -->\r\nV12.0.0\r\n- NPM version: 6.14.2\r\n- Strapi version: <!-- Please make sure you are on the latest version --> 19.5 and 19.4\r\n- Database: Mongodb\r\n- Operating system:\r\nUbuntu\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\n\r\nThe value posted to the database is not the same as what is entered into the \\<date\\> field when adding a new (or saving an existing) record.\r\n\r\nSpecific issues:\r\n<ol>\r\n<li>Entering in a date of *April 8, 2020* will be posted as *April 7, 2020* in the database.</li>\r\n<li>If the date is not modified in the edit screen, any subsequent *saving* of the data will cause the posted date to go back by one day.  e.g. in issue#1 above, April 7 will turn into April 6, etc... </li>\r\n</ol>\r\n\r\n**Steps to reproduce the behavior**\r\n<ol>\r\n<li>Create a DATE field in a collection</li>\r\n<li>Add a new record and populate the DATE field</li>\r\n<li>Save the record</li>\r\n<li>See error (date will go back by one day)</li>\r\n<li>Go back to the record and go into edit mode</li>\r\n<li>Press *save* without modifying anything</li>\r\n<li>See error (date will go back by another day)</li>\r\n</ol>\r\n\r\n**Expected behavior**\r\n\r\nDate value posted in the database should be exactly the same as what was entered into the \\<date\\> field initially.\r\n\r\n**System**\r\n- Node.js version: 13.3.0\r\n- NPM version: 6.13.2\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: sqlite\r\n- Operating system: MacOSx\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI want to extending my model service following instruction from this [documentation](https://strapi.io/documentation/3.0.0-beta.x/concepts/services.html#extending-a-model-service)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Just copy & paste the code from [documentation](https://strapi.io/documentation/3.0.0-beta.x/concepts/services.html#extending-a-model-service) in \"create\" tab to my service file\r\n![image](https://user-images.githubusercontent.com/47018830/78753993-ef048300-79a0-11ea-8946-e0f6449f8cea.png)\r\n2. Hit my API Endpoint using postman\r\n3. Return 500\r\n![image](https://user-images.githubusercontent.com/47018830/78754132-2bd07a00-79a1-11ea-9e2d-5ec66bd82d15.png)\r\n![image](https://user-images.githubusercontent.com/47018830/78754635-04c67800-79a2-11ea-91aa-6c5505e1438a.png)\r\n\r\n**Expected behavior**\r\nA new data is created.\r\n\r\n**System**\r\n- Node.js version: v12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.5\r\n- Database: mysql\r\n- Operating system: Linux\r\n\r\nis there something i miss?\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nCannot delete file already deleted in Cloudinary when using strapi-provider-upload-cloudinary.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Use Cloudinary provider.\r\n2. Upload a file.\r\n3. Delete the file directly from Cloudinary (use the Cloudinary UI for example).\r\n4. Go to Strapi's File Upload page and click the trashcan icon of the uploaded file.\r\n\r\n**Expected behavior**\r\nThe file information would be removed from Strapi.\r\n\r\n**Actual behavior**\r\nError message is displayed. The file information is not removed.\r\n\r\n**Screenshots**\r\n![2020-04-07_10-56-47](https://user-images.githubusercontent.com/831144/78644415-83e28000-78be-11ea-9fd7-9415b3746079.png)\r\n"},{"labels":[null,null,"bug"],"text":"## Describe the bug\r\n\r\nWhen I want to change the **permissions** of a role, I confront an unexpected error so that it couldn't be updated: ***'entry.notFound'***\r\n\r\n![error](https://user-images.githubusercontent.com/20626510/78069708-caf8de80-73af-11ea-8ac3-b8398a7d1230.png)\r\n\r\n---\r\n\r\nI **traced** the logs and found out where the error originated in (*\"node_modules/strapi-connector-mongoose/lib/queries.js\"*):\r\n\r\n![traced](https://user-images.githubusercontent.com/20626510/78070064-68eca900-73b0-11ea-8219-198ea2aad594.png)\r\n\r\nSo I printed the value of `params` (the input parameter of the function mentioned above):\r\n```\r\n{ id: \"5e8338177069c5230a321064\" }\r\n```\r\nand this value was being passed into the `findOne` function of MongoDB model.\r\nNow it's obvious why this error occurred. It's because of the lack of this document in the MongoDB `users-permissions_role` collection:\r\n\r\n```\r\n{\r\n        \"_id\" : ObjectId(\"5e8338177069c5230a321064\"),\r\n        \"name\" : \"Authenticated\",\r\n        \"description\" : \"Default role given to authenticated user.\",\r\n         ...\r\n}\r\n```\r\n\r\n**The problem is**:\r\n\r\n- the parameter key must be `_id`, not `id` \r\n- the parameter value must be `ObjectId(\"5e8338177069c5230a321064\")`, not `\"5e8338177069c5230a321064\"`\r\n\r\nbecause of these problems, the function `findOne` returns a null value and the error blows.\r\n\r\nPlease fix this issue :)\r\n\r\n\r\n## Steps to reproduce the behaviour\r\n\r\n1. create a **quick-start** strapi project.\r\n2. create some content types and APIs in **development mode**.\r\n3. think about having changed the database from **SQLite3** to **MongoDB** in **production mode**.\r\n4. change the **database configs** in *./config/environments/production/database.json* from the root of the project directory\r\n5. start the strapi project in production mode and see all the functionalities work very well with MongoDB (you need to configure some stuffs for using MongoDB though)\r\n6. go to the **Roles and Permissions** tab of the admin panel and try to update permission and click save button (check/uncheck one of the action boxes).\r\n7. duh, see nothing happens.\r\n8. open the console of your browser and see there was an error in the API request.\r\n9. check the terminal that the strapi server is running on.\r\n10. now see the low-detailed error :(\r\n\r\n## Expected behaviour\r\n\r\nUpdating the permission for a role.\r\n\r\n\r\n## System\r\n\r\n- Node.js Version: 12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: v3.0.0-beta.19.4\r\n- Database: Mongodb v4.2.5\r\n- Operating system: Ubuntu 16.04\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nStrapi server crashes on `GET` `/connect/vk`. After it asks for app's permission on collecting your data, it redirects you to your endpoint and server crashes.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Turn on VK provider\r\n2. Fill all the fields\r\n3. GET /connect/vk\r\n4. See error\r\n\r\n**Expected behavior**\r\nIt should return JWT token with all the other information\r\n\r\n**Code snippets**\r\nNothing was changed in original code\r\n\r\n**System**\r\nNode.js version: 10.16.3 / 13.12.0\r\nNPM version: 6.9.0\r\nStrapi version: 3.0.0-beta.19.3\r\nDatabase: postgre\r\nOperating system: Windows 10 / Linux\r\n\r\n**Additional context**\r\nGoogle provider for example works as intended. VK doesn't work both in production and development mode and on both Linux and Windows.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI've created a single type `Frontpage` that contains a multiple media type `pictures`. Limiting the query results for returned `pictures` does not seem to work.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a single type with multiple media type field `pictures` (with graphql plugin installed)\r\n2. Upload 3 items to `pictures` via admin UI \r\n3. Try to limit the number of returned items from multiple media type field with `limit` parameter in graphql query.\r\n4. See that always all items from `pictures` are returned.\r\n\r\n**Expected behavior**\r\nI expect the number of items returned to be limited to the given number.\r\n\r\n**Code snippets**\r\nfrom auto-generated schema.graphql:\r\n```\r\ntype Frontpage {\r\n  id: ID!\r\n  created_at: DateTime!\r\n  updated_at: DateTime!\r\n  pictures(sort: String, limit: Int, start: Int, where: JSON): [UploadFile]\r\n}\r\n```\r\n```\r\n\"\"\"The `Upload` scalar type represents a file upload.\"\"\"\r\nscalar Upload\r\n\r\ntype UploadFile {\r\n  id: ID!\r\n  created_at: DateTime!\r\n  updated_at: DateTime!\r\n  name: String!\r\n  hash: String!\r\n  sha256: String\r\n  ext: String\r\n  mime: String!\r\n  size: Float!\r\n  url: String!\r\n  provider: String!\r\n  provider_metadata: JSON\r\n  related(sort: String, limit: Int, start: Int, where: JSON): [Morph]\r\n}\r\n```\r\nthese two queries yield the same result (there are a total of 3 items in `pictures`)\r\n```\r\nquery {\r\n  frontpage {\r\n    pictures (limit: 1){\r\n      url\r\n    }\r\n  }\r\n}\r\n\r\nquery {\r\n  frontpage {\r\n    pictures {\r\n      url\r\n    }\r\n  }\r\n}\r\n```\r\nyields\r\n```\r\n{\r\n  \"data\": {\r\n    \"frontpage\": {\r\n      \"pictures\": [\r\n        {\r\n          \"url\": \"/uploads/f8c46ebe6e84405e8cae5fb5b91e5c3b.png\"\r\n        },\r\n        {\r\n          \"url\": \"/uploads/1c4076ecbbfe4b20a76fce410fa754f9.png\"\r\n        },\r\n        {\r\n          \"url\": \"/uploads/e02d507892b247c8a54948bf14d45564.png\"\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version: v3.0.0-beta.19.3\r\n- Database: sqlite\r\n- Operating system: Fedora 31 Linux\r\n\r\n**Additional context**\r\ndevelopment mode, using  strapi-docker\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWYSIWYG Editor Performance is very slow for huge files/content of size more than 1.2MB and taking around 4-5 min to load and causing Browser crash.\r\n\r\nI am using WYSIWYG editor for our API docs which is in `md` file, has around 20,000 lines of content\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a WYSIWYG field\r\n2. Add or copy/paste `md` content of around 20,000 lines to WYSIWYG field\r\n3. Save the article\r\n4. Now try to open it the same article\r\n\r\n**Observed Behavior**\r\nIt's taking around 5 minutes to load & causing very slowness & sometime causing Browser to crash\r\n\r\n**Expected behavior**\r\nFaster loading though we use huge files/content\r\n\r\n**NOTE:** Earlier we used Strapi `Alpha` version & it was much faster compared to the recent Beta version\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Mongo\r\n- Operating system: MAC\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nAccording to the documentations, filters on nested queries should be possible with graphql.\r\nBut none of the filter parameters, “**limit**”, “**start**”, “**sort**” and “**where**” seems to work.\r\n\r\nFor example,\r\n```\r\nquery {\r\n\tstocks {\r\n\t\tid\r\n\t\tname\r\n\t\tsku,\r\n\t\tquantity\r\n\t\timages (limit: 3) {\r\n\t\t\tid\r\n\t\t\turl\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nI would have expected only 3 images per stock to be returned but instead it is returning all images (7 of them to be exact)\r\n\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.12.0\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: PostgreSQL v11.3\r\n- Operating system: Ubuntu 1404 (via vagrant vbox)\r\n"},{"labels":[null,null,null,null,"bug"],"text":"As requested by @lauriejim this is a new bug report related to #4025\r\n\r\n**Describe the bug**\r\nWhen using relations, which by default shows up as IDs, searching and selecting IDs doesn't work. Random/wrong IDs are shown.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a relation between two collections\r\n2. Try searching for specific IDs in the autocomplete field\r\n\r\n**Expected behavior**\r\nIDs should show up when searching for them in the autocomplete.\r\n\r\n**Screenshots**\r\n![](https://user-images.githubusercontent.com/2780160/75895784-6b51f680-5e36-11ea-89b4-0868b39cde9a.gif)\r\nAn entry starting with 5d1 is clearly present in the list, yet it doesn't show up when searching for it.\r\n\r\n**System**\r\n- Node.js version: 12\r\n- NPM version: ?\r\n- Strapi version: beta 19\r\n- Database: MongoDB\r\n- Operating system: Ubuntu\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a new content type, and selecting UID as a field, application crashes with the error `TypeError: undefined is not an object (evaluating 'option.value')`.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new content type.\r\n2. Click on UID field.\r\n3. Error appearing.\r\n\r\n**Expected behavior**\r\nBe able to generate a UID field.\r\n\r\n**Screenshots**\r\n<img width=\"2032\" alt=\"Bildschirmfoto 2020-03-21 um 21 40 47\" src=\"https://user-images.githubusercontent.com/27866874/77236196-aedd8c00-6bbc-11ea-8e34-dfa4a1ba0972.png\">\r\n<img width=\"2032\" alt=\"Bildschirmfoto 2020-03-21 um 21 40 56\" src=\"https://user-images.githubusercontent.com/27866874/77236199-b3a24000-6bbc-11ea-8b7a-5ba23f01ba09.png\">\r\n\r\n**System**\r\n- Node.js version: 12.6.0\r\n- NPM version: 6.14.2\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Postgres\r\n- Operating system: Mac OS"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nAfter saving an administrator profile, I receive: \"An error occurred during record fetch\". The console shows this: `[2020-03-20T23:58:54.222Z] debug GET /content-manager/explorer/strapi::administrator/&_page=0&_limit=0&_sort=id (57 ms) 404`\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install strapi using `npx create-strapi-app my-project --quickstart`\r\n2. Create a new admin user\r\n3. Once logged in, click on the user's name and then profile\r\n4. Edit the password and hit save\r\n5. Receive the error.\r\n\r\n**Expected behavior**\r\nIt should not display the error/hang/404.\r\n\r\n**System**\r\n- Node.js version: <!-- Please ensure you are using the Node LTS version (v10) --> v12.16.1\r\n- NPM version: 6.14.2\r\n- Strapi version: <!-- Please make sure you are on the latest version --> 3.0.0-beta.19.3\r\n- Database: sqlite (but that doesn't seem to matter - it also happens with mysql)\r\n- Operating system: Debian (also happens in the strapi docker container)\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI created 2 relations between 2 content types (A and B), and each of them has more than 60 elements.\r\nA see the relation B, and i select to display its string field named email.\r\n\r\nWhen i created a new element on B with email field (test@test.com).\r\nI go to Content Type A, and i want to add the new B element (test@test.com) to any of the A element.\r\nI go to the select option, and I input the test@test.com, and the following happens:\r\n1. test@test.com appears by 1 second, and the it disappears without being able to select it.\r\n2. test@test.com doesn't appear at all.\r\n\r\nFunny thins, If i scroll down till the end of the select i can see test@test.com option available to selection.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\nPreconditions: You need to have 2 content types (A and B), and please populate one of them with more than 30 elements.\r\n\r\n1. Go to 'Content type B', and create 30 elements, take into account a string field to this content type, let's say email.\r\n2. Configure the layout of A to see the email field on the select of the relation with B.\r\n3. Copy one email of the B's 30 elements  (the email attribute).\r\n4. Go to 'Content type A', and input the copied email.\r\n5. See error:\r\na. Maybe the email appears for 1 second and the it goes away.\r\nb. The email doesn't appear at all.\r\n\r\nAs i mentioned on the description if you scroll down till the end, the email will show up.\r\n\r\n**Expected behavior**\r\nI expect when i input the email correctly, the option of B will appear (obviously with the email info), and I can select it without a problem.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![error-select](https://user-images.githubusercontent.com/1701423/77191492-0be81d80-6aa9-11ea-9bab-8fb054b470eb.gif)\r\n\r\n*Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Mongo\r\n- Operating system: Happens on MacOs Mojave and Ubuntu 18.04\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen using the ses provider errors are not returned with a status or description. Would be helpful to know why the email.send() function failed.\r\n\r\n**Expected behavior**\r\nStandard Strapi error object to be returned with status and messages e.g. \"500 - AWS SES connection parameters incorrect\"\r\n\r\n**Code snippets**\r\n[2020-03-20T15:43:56.332Z] error undefined\r\n\r\n  AssertionError [ERR_ASSERTION]: Cannot wrap non-Error object\r\n      at Function.boomify (/usr/app/node_modules/boom/lib/index.js:107:14)\r\n      at /usr/app/node_modules/strapi/lib/middlewares/boom/index.js:80:22"},{"labels":[null,null,null,"bug"],"text":"**Bug description**\r\nI have reproduced this on multiple different repeatable components and so am pretty sure this is a bug. I'm new to strapi I hope these aren't too frequent :(\r\n\r\nIf you simply use repeatable components, and change the fieldname that sets up the repeatable component, the api starts returning incorrect data that looks like this:\r\n\r\n{\r\n\"_id\": \"5e68d688c0c615169ce924b2\",\r\n\"kind\": \"ComponentLinkLink\",\r\n\"ref\": \"5e68d60f43eeb628b07576b3\"\r\n},\r\nas a reference of some sort, instead of the actual object. If you rename it back, suddenly the object appears properly again. \r\n\r\n{\r\n\"_id\": \"5e68d688c0c615169ce924b5\",\r\n\"normal properties on that type go here\": \"etc\",\r\n}\r\n\r\n**System**\r\n- Node.js version: v12.13\r\n- NPM version: 6.12\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Mongodb\r\n- Operating system: Windows\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThe urlRegex in webhookvalidator can not match '_';\r\n\r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi-admin/controllers/Webhooks.js#L14\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. settings/webhooks/add new webhook\r\n2.type 'http://ab_cd.test.com\"  as url\r\n3. fill other fields\r\n4. submit\r\n5. \"An error occurred\"\r\n\r\n**Expected behavior**\r\n\"_\" is a legal charactor in host.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi-admin/controllers/Webhooks.js#L14\r\n```\r\nconst urlRegex = /^(?:([a-z0-9+.-]+):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/;\r\n```\r\n\r\n\r\n**System**\r\n- Node.js version: v12.16.1\r\n- NPM version: 6.13.4\r\n- Strapi version:  3.0.0-beta.19.3\r\n- Database: mysql 5.7\r\n- Operating system: macos\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"With the following model:\r\n\r\n```\r\n{\r\n  \"kind\": \"collectionType\",\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"targets\",\r\n  \"info\": {\r\n    \"name\": \"target\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"coordinate\": {\r\n      \"type\": \"component\",\r\n      \"repeatable\": false,\r\n      \"component\": \"target.coordinate\",\r\n      \"required\": true\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\nAnd the following component:\r\n\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"components_target_coordinates\",\r\n  \"info\": {\r\n    \"name\": \"Coordinate\",\r\n    \"icon\": \"radiation\"\r\n  },\r\n  \"options\": {},\r\n  \"attributes\": {\r\n    \"latitude\": {\r\n      \"type\": \"float\",\r\n      \"required\": true,\r\n      \"max\": 90,\r\n      \"min\": -90\r\n    },\r\n    \"longitude\": {\r\n      \"type\": \"float\",\r\n      \"required\": true,\r\n      \"min\": -180,\r\n      \"max\": 180\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe type is produced in the `exports/graphql/schema.graphql` file as such:\r\n\r\n```\r\ntype Target {\r\n  coordinate: ComponentTargetCoordinate\r\n}\r\n```\r\n\r\n**Expected behavior**\r\n\r\nThat the schema would be non-nullable. This effects graphql-codegen and makes the types optional in Typescript later.\r\n\r\n```\r\ntype Target {\r\n  coordinate: ComponentTargetCoordinate!\r\n}\r\n```\r\n\r\nOr you don't have the ability to mark the field as required.\r\n\r\n\r\n**System**\r\n- Node.js version: 13.3.0\r\n- NPM version: 6.13.1\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Postgres\r\n- Operating system: MacOS\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI cannot access `ctx.state.user` in custom GraphQL resolver. It happened after I migrate from `3.0.0-beta.18.7` to `3.0.0-beta.19.3` in my project.\r\nI've also tried it in `examples/getstarted` of cloned repository, it's same.\r\n\r\n**Steps to reproduce the behavior**\r\nI will try to explain with https://github.com/strapi/strapi/tree/master/examples/getstarted project.\r\n1. Create `address/config/schema.graphql`\r\n```js\r\nmodule.exports = {\r\n  definition: `\r\n  `,\r\n  query: `\r\n    testing: String\r\n  `,\r\n  mutation: `\r\n  `,\r\n  resolver: {\r\n    Query: {\r\n      testing: {\r\n        resolverOf: 'application::address.address.find',\r\n        resolver: (obj, options, { context }) => {\r\n          console.log('context.state.user', context.state.user);\r\n\r\n          return 'testing';\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n```\r\n2. Create an user and get token with login mutation.\r\n```js\r\nmutation Login {\r\n  login(input: {identifier: \"test\", password: \"test1234\"}) {\r\n    jwt\r\n    user {\r\n      id\r\n      username\r\n      email\r\n      confirmed\r\n      blocked\r\n    }\r\n  }\r\n}\r\n```\r\n3. Give the user `address.find` permission and run the test query.\r\n```js\r\nquery testing {\r\n  testing\r\n}\r\n```\r\n4. Check the terminal.\r\n```js\r\ncontext.state.user undefined\r\n```\r\n\r\n**Expected behavior**\r\nI should have had access to the `ctx.state.user` object.\r\n\r\n**System**\r\n- Node.js version:  node v12.14.1<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 6.13.4\r\n- YARN version: 1.12.1\r\n- Strapi version: 3.0.0-beta.19.3 <!-- Please make sure you are on the latest version -->\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n\r\n**Additional context**\r\nIt's `context.state` object I printed out in resolver.\r\n```js\r\ncontext.state {\r\n  session: Session {\r\n    _sessCtx: ContextSession {\r\n      ctx: [Object],\r\n      app: [Object],\r\n      opts: [Object],\r\n      store: undefined,\r\n      session: [Circular]\r\n    },\r\n    _ctx: {\r\n      request: [Object],\r\n      response: [Object],\r\n      app: [Object],\r\n      originalUrl: '/graphql',\r\n      req: '<original node req>',\r\n      res: '<original node res>',\r\n      socket: '<original node socket>'\r\n    },\r\n    isNew: true\r\n  },\r\n  i18n: I18n {\r\n    devMode: true,\r\n    directory: '/Users/chisus/Develop/strapi-test/strapi/examples/getstarted/config/locales',\r\n    locales: {\r\n      cs_cz: [Object],\r\n      en_us: [Object],\r\n      es_es: [Object],\r\n      fr_fr: [Object],\r\n      it_it: [Object],\r\n      ja_jp: [Object],\r\n      ru_ru: [Object],\r\n      tr_tr: [Object],\r\n      vi_vn: [Object]\r\n    },\r\n    defaultLocale: 'en_us',\r\n    modes: [ 'query', 'subdomain', 'cookie', 'header', 'url', 'tld' ],\r\n    cookieName: 'locale',\r\n    extension: '.json',\r\n    locale: 'en_us',\r\n    whitelist: [ 'Query', 'Subdomain', 'Cookie', 'Header', 'Url', 'TLD' ],\r\n    request: { method: 'POST', url: '/graphql', header: [Object] }\r\n  },\r\n  __: [Function: bound __],\r\n  __n: [Function: bound __n],\r\n  getLocale: [Function: bound getLocale],\r\n  isPreferredLocale: [Function: bound isPreferredLocale]\r\n}\r\n```\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nAbility to register new account on frontend with empty username. Username validation is not working.\r\n\r\nextensions/users-permissions/models/users.settings.json\r\n\r\n```\r\n\"attributes\": {\r\n    \"username\": {\r\n      \"type\": \"string\",\r\n      \"minLength\": 3,\r\n      \"unique\": true,\r\n      \"configurable\": false,\r\n      \"required\": true\r\n    },\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n```\r\nawait axios.post(`${process.env.REACT_APP_STRAPI_URL}/auth/local/register`, {\r\n      email: email,\r\n      password: password,\r\n      confirmPassword: confirmPassword,\r\n      username: username\r\n    });\r\n\r\n```\r\n\r\n**Screenshots**\r\n![screen1](https://user-images.githubusercontent.com/32324644/76513317-6b657e00-6456-11ea-8d9d-0f305afc4a77.png)\r\n\r\n\r\n**System**\r\n- Node.js version: v11.15.0\r\n- NPM version: 6.7.0\r\n- Strapi version: https://github.com/strapi/strapi/releases/tag/v3.0.0-beta.19.3\r\n- Database: mysql,  10.3.7-MariaDB-1:10.3.7+maria\r\n- Operating system:  debian 9\r\nere.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen a plugin is uninstalled from admin panel, the overlay message is same as the one shown when installing a plugin. It should be different\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Admin Panel\r\n2. Click on plugins\r\n3. Click on delete button for a plugin (e.g. graphql)\r\n4. Confirm the delete pop up\r\n\r\n**Expected behavior**\r\nThe message shown during plugin removal/deletion should say so, instead it says downloading\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/21662960/76390200-fe3ce480-6392-11ea-9dae-55d6cf83b753.png)\r\n\r\n**Code snippets**\r\n\r\n**System**\r\n- Node.js version:  v12.14.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.3\r\n- Database: Postgres\r\n- Operating system: Windows\r\n\r\nIt's not a major issue but should be noted."},{"labels":[null,null,null,null,"bug"],"text":"**Reproduction**\r\n1. Add to: _extensions/users-permissions/models/User.settings.json_\r\n```\r\n    \"slug\": {\r\n      \"type\": \"uid\",\r\n      \"targetField\": \"username\",\r\n      \"required\": true,\r\n      \"minLength\": 3\r\n    },\r\n```\r\n2. Send POST registration request to: _auth/local/register_\r\n```\r\n{\r\n  \"username\": \"test1\",\r\n  \"email\": \"test1@test.pl\",\r\n  \"password\": \"test\"\r\n}\r\n```\r\n3. You get incorrect information: _Username already taken_ \r\n```{\r\n  \"statusCode\": 400,\r\n  \"error\": \"Bad Request\",\r\n  \"message\": [\r\n    {\r\n      \"messages\": [\r\n        {\r\n          \"id\": \"Auth.form.error.username.taken\",\r\n          \"message\": \"Username already taken\"\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  \"data\": [\r\n    {\r\n      \"messages\": [\r\n        {\r\n          \"id\": \"Auth.form.error.username.taken\",\r\n          \"message\": \"Username already taken\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n**Expected behavior**\r\nInformation about missing slug.\r\n\r\n**Screenshots**\r\n![Zrzut ekranu z 2020-03-09 17-48-04](https://user-images.githubusercontent.com/52074703/76237385-83f34f80-622e-11ea-94e2-103f2afc772c.png)\r\n\r\n**System**\r\n- Node.js version: 12.16.1\r\n- NPM version: 6.14.2\r\n- Strapi version: beta 19.1\r\n- Database: PostgreSQL 11.7\r\n- Operating system: Debian 10.3"},{"labels":[null,null,null,"bug"],"text":"**Describe the issues**\r\nStrapi doesn't check for reserved words like \"media\" [new collection].\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'new collection type'\r\n2. Call it 'Media'\r\n3. Add several fields and save it.\r\n4. The server doesn't restart, need to rename api/media and edit all files.\r\n\r\n[2020-03-08T08:10:00.269Z] info File created: ..\\strapi\\backend\\api\\media\\controllers\\media.js\r\n[2020-03-08T08:10:03.414Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-03-08T08:10:03.416Z] error Error: Field \"Query.media\" can only be defined once.\r\n\r\n**Expected behaviour**\r\nStrapi should rise an error or report the use of reserved/already used words.\r\n\r\n**System**\r\n- Node.js version: V12.16.1\r\n- NPM version: 6.14.2\r\n- Strapi version: v12.16.1\r\n- Database: Sqlite\r\n- Operating system: Windows 10\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nFollowing the instructions on https://strapi.io/documentation/3.0.0-beta.x/concepts/middlewares.html#node-modules-structure to enable responseTime middleware does not add the header `X-Response-Time`. However if I create a custom middleware with the contents of https://github.com/strapi/strapi/blob/master/packages/strapi/lib/middlewares/responseTime/index.js I can get the `X-Response-Time` header.\r\n\r\n**Steps to reproduce the behavior**\r\n1. add the following to config/environments/**/middleware.json\r\n`{\r\n  \"responseTime\": {\r\n    \"enabled\": true\r\n  }\r\n}`\r\n2. View the response headers of an API call in a browser\r\n3. `X-Response-Time` header is not present\r\n\r\n**Expected behavior**\r\nThe  `X-Response-Time` header should be present when the responseTime middleware is enabled.\r\n\r\n**System**\r\n- Strapi version: 3.0.0-beta.18.7 & v3.0.0-beta.19.2\r\n- Database: MongoDb\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nAfter upgrading strapi to 3.0.0-beta.19 / 3.0.0-beta.19.2 i get an error (output shown below). I basically followed this guideline: https://strapi.io/documentation/3.0.0-beta.x/migration-guide/migration-guide-beta.18-to-beta.19.html\r\n\r\n```\r\n[2020-03-05T19:28:54.191Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-03-05T19:28:54.194Z] error TypeError: Cannot use 'in' operator to search for 'excludeEmptyString' in url must be a valid URL\r\n    at StringSchema.matches (/Users/gjorgekarakabakov/Development/my-project/node_modules/strapi-utils/node_modules/yup/lib/string.js:107:51)\r\n    at Object.<anonymous> (/Users/gjorgekarakabakov/Development/my-project/node_modules/strapi-admin/controllers/Webhooks.js:21:8)\r\n    at Module._compile (internal/modules/cjs/loader.js:1147:30)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1167:10)\r\n    at Module.load (internal/modules/cjs/loader.js:996:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:896:14)\r\n    at Module.require (internal/modules/cjs/loader.js:1036:19)\r\n    at require (internal/modules/cjs/helpers.js:72:18)\r\n    at loadFiles (/Users/gjorgekarakabakov/Development/my-project/node_modules/strapi/lib/load/load-files.js:35:17)\r\n    at async Promise.all (index 0)\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! my-project@0.1.0 develop: `strapi develop`\r\nnpm ERR! Exit status 1\r\nnpm ERR! \r\nnpm ERR! Failed at the my-project@0.1.0 develop script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /Users/gjorgekarakabakov/.npm/_logs/2020-03-05T19_28_54_211Z-debug.log\r\nerror Command failed.\r\nExit code: 1\r\nCommand: /usr/local/bin/create-strapi-app\r\nArguments: my-project --quickstart\r\nDirectory: /Users/gjorgekarakabakov/Development\r\nOutput:\r\n\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Follow migration guideline on https://strapi.io/documentation/3.0.0-beta.x/migration-guide/migration-guide-beta.18-to-beta.19.html and update all dependencies to 3.0.0-beta.19.2.\r\n2. Remove `/node_modules`, `/build`, `/.cache` and run `yarn install`\r\n3. Run `yarn develop` (tried running `yarn build` just in case, no luck)\r\n4. See error\r\n\r\n**Expected behavior**\r\nShould build and run the server without errors.\r\n\r\n\r\n**System**\r\n- Node.js version: 13.10.1 (tried with older version as well)\r\n- NPM version: 6.13.7\r\n- Strapi version: 3.0.0-beta.19.2\r\n- Database: SQLite\r\n- Operating system: MacOS / Windows\r\n\r\n**Additional context**\r\nThis issue wasn't happening on 3.0.0-beta.18.4. Also tried to create new strapi app with `yarn create strapi-app my-app` but the same error ocurred.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf the input of your UID textfield takes more space than the UID textfield width, the last characters of your input are not visible. Even if I move my cursor to the end of the line.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a Content Type with an UID field.\r\n2. Add a Content Type to your collection with a long UID.\r\n\r\n**Expected behavior**\r\nI am able to view and access the last characters of my UID.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/38924650/75910681-90526380-5e4e-11ea-9b7a-1b8ba4328db9.png)\r\n\r\n\r\n**System**\r\n- Node.js version: v10.18.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.19.1\r\n- Database: mongodb\r\n- Operating system: linux\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThere's no way AFAIK to login with facebook if your facebook account has no email. When signin up on facebook, you can either use your email or your mobile phone. In the second case (an account that is only using the mobile phone) the login won't work.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Configure your facebook provider.\r\n2. Create a facebook account using a mobile phone number instead of email.\r\n3. Wait 60 minutes (facebook restriction to add app integrations on new accounts)\r\n4. Try to log-in using facebook, and it will loudly fail.\r\n\r\n**Expected behavior**\r\nGiven that facebook accounts are not required to have an email. Facebook log-in flow should not depend on that. \r\n\r\n**Code snippets**\r\n\r\nHere's the code that requests the email from facebook:\r\nhttps://github.com/strapi/strapi/blob/0f3fd09a1c8499da15908de6932cf3ad1d9000b3/packages/strapi-plugin-users-permissions/services/Providers.js#L174-L187\r\n\r\nAnd here's the code that fails when email is unavailable\r\nhttps://github.com/strapi/strapi/blob/0f3fd09a1c8499da15908de6932cf3ad1d9000b3/packages/strapi-plugin-users-permissions/services/Providers.js#L39-L42\r\n\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.8\r\n- Database: MySQL\r\n- Operating system: Windows (dev) | Docker on AppService (prod)\r\n\r\n**Additional context**\r\nThis problem is also happening if you use an account without a validated email. We had kind of a hard time looking for the problem because of #3339 but we finally saw the \"Email was not available.\" error phrase. We know we can solve this by upgrading strapi to a version that has #3339 fixed and showing some alert when this error occurs. But, given that this is not a requirement from Facebook, **shouldn't we support every kind of Facebook account?**\r\n\r\nRegards,\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type like this. This is not the concrete model I use, it is just an example: \r\n\r\n![image](https://user-images.githubusercontent.com/3729515/75695976-23529880-5cab-11ea-8b6a-9966c195c81d.png)\r\n\r\n2. Create 2 categories (A and B)\r\n3. Set B to A as subCategory (it works fine)\r\n4. Now set A to B as subCategory (you can't set (it hangs), however after this action the categories explorer is empty 😮)\r\n\r\nAfter this, in a few minutes my server has stopped with the following error:\r\n\r\n```\r\n\r\n<--- Last few GCs --->\r\n\r\n[23682:0x1042a6000]   463716 ms: Scavenge 2037.8 (2052.0) -> 2036.6 (2052.0) MB, 13.1 / 0.0 ms  (average mu = 0.167, current mu = 0.007) allocation failure \r\n[23682:0x1042a6000]   463786 ms: Scavenge 2038.0 (2052.0) -> 2037.0 (2052.8) MB, 6.5 / 0.0 ms  (average mu = 0.167, current mu = 0.007) allocation failure \r\n[23682:0x1042a6000]   466512 ms: Mark-sweep 2038.5 (2052.8) -> 2037.4 (2053.0) MB, 2630.5 / 0.0 ms  (average mu = 0.136, current mu = 0.100) allocation failure scavenge might not succeed\r\n\r\n\r\n<--- JS stacktrace --->\r\n\r\n==== JS stack trace =========================================\r\n\r\nSecurity context: 0x0737cfb80921 <JSObject>\r\n    0: builtin exit frame: captureStackTrace(this=0x0737cfb81799 <JSFunction Error (sfi = 0x737748cc099)>,0x07379d371139 <MongooseTimeoutError map = 0x737422c5b71>,0x0737cfb81799 <JSFunction Error (sfi = 0x737748cc099)>)\r\n\r\n    1: /* anonymous */(aka /* anonymous */) [0x7379d371001] [/Users/macbookpro/dev/strapi-corp/rep-comp-with-ref/node_modules/mongoose/lib/query.js:~4357] [pc=0xc01df10900e](th...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\r\n 1: 0x100093bd5 node::Abort() [/usr/local/bin/node]\r\n 2: 0x100093d9b void node::FPrintF<char const*&, char const*&>(__sFILE*, char const*, char const*&, char const*&) [/usr/local/bin/node]\r\n 3: 0x1001d40f7 v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [/usr/local/bin/node]\r\n 4: 0x1001d4093 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [/usr/local/bin/node]\r\n 5: 0x100356b65 v8::internal::Heap::FatalProcessOutOfMemory(char const*) [/usr/local/bin/node]\r\n 6: 0x100358244 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [/usr/local/bin/node]\r\n 7: 0x100354fde v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [/usr/local/bin/node]\r\n 8: 0x100352fc6 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [/usr/local/bin/node]\r\n 9: 0x10035e94a v8::internal::Heap::AllocateRawWithLightRetrySlowPath(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [/usr/local/bin/node]\r\n10: 0x10035e9d1 v8::internal::Heap::AllocateRawWithRetryOrFailSlowPath(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [/usr/local/bin/node]\r\n11: 0x10032bb85 v8::internal::Factory::AllocateRawArray(int, v8::internal::AllocationType) [/usr/local/bin/node]\r\n12: 0x10032a3fd v8::internal::Factory::NewFixedArrayWithFiller(v8::internal::RootIndex, int, v8::internal::Object, v8::internal::AllocationType) [/usr/local/bin/node]\r\n13: 0x10032d2fa v8::internal::Factory::NewFrameArray(int) [/usr/local/bin/node]\r\n14: 0x100301937 v8::internal::(anonymous namespace)::CaptureStackTrace(v8::internal::Isolate*, v8::internal::Handle<v8::internal::Object>, v8::internal::(anonymous namespace)::CaptureStackTraceOptions) [/usr/local/bin/node]\r\n15: 0x10030216e v8::internal::Isolate::CaptureAndSetSimpleStackTrace(v8::internal::Handle<v8::internal::JSReceiver>, v8::internal::FrameSkipMode, v8::internal::Handle<v8::internal::Object>) [/usr/local/bin/node]\r\n16: 0x100261c58 v8::internal::Builtin_Impl_ErrorCaptureStackTrace(v8::internal::BuiltinArguments, v8::internal::Isolate*) [/usr/local/bin/node]\r\n17: 0x1009a7eb9 Builtins_CEntry_Return1_DontSaveFPRegs_ArgvOnStack_BuiltinExit [/usr/local/bin/node]\r\n✨  Done in 471.81s.\r\n```\r\n\r\n**Expected behavior**\r\nI would like to use this kind of \"circular referencing\" in my app and it should not cause any problems.\r\n\r\n**System**\r\n- Node.js version: 13.9.0\r\n- NPM version: 6.14.1\r\n- Strapi version:  v3.0.0-beta.18.7\r\n- Database: mongo\r\n- Operating system: osx\r\n"},{"labels":[null,null,null,"bug"],"text":"Hello,\r\n\r\n- [ ] I have created an RFC on the [Strapi RFC Repo](https://github.com/strapi/rfcs)\r\n- [x] I have checked for existing RFCs before creating this discussion topic\r\n\r\n\r\n**Describe the topic**\r\nThis feature concern the `strapi-plugin-upload` with \"_**Multiple Medias**_\" version.\r\n\r\nWhen I `DELETE ​/upload​/files​/{id}` a file, the relation is not removed and an array with empty element are returned from the API.\r\n\r\nFor now : \r\n- I need to rewrite API response into Client in order to remove manually all empty data from the JSON response.\r\n- I need to \"cron\" a task that remove all relations from removed media (_madness_)\r\n\r\n**Your suggestions for this topic**\r\nWhen I want to remove a file, with the route `DELETE ​/upload​/files​/{id}`, this will remove the relation in `upload_file_morph` and the entry in `upload_file`.\r\n\r\n**Screenshots**\r\n_None for now._\r\n\r\n**Code snippets**\r\n_None for now._\r\n\r\n**Additional context**\r\n- Relate maybe with #4918 \r\n\r\n**Environment**\r\n- Strapi beta 18.8\r\n- Bookshelf: MySQL\r\n- Provider : test with local & Google Cloud Storage"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI was trying to create a model with polymorphic relation. \r\nI have read docs - https://strapi.io/documentation/3.0.0-beta.x/concepts/models.html#relations\r\n\r\nSo I defined model and as I expected admin panel doesn't work. So I was trying to create one using API endpoint.\r\nWhen I was trying to create it was throwing error. After I switch from polymorphic relation `*` into an exact define model then it was working fine.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Content Type Builder\r\n2. Define new model with anykind of fields, for example `Favourite`\r\n3. Go to created files and edit JSON schema file( `favourite.settings.json`)\r\n4. In section, attributes add polymorphic field\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"favourites\",\r\n  \"info\": {\r\n    \"name\": \"favourite\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\",\r\n      \"required\": true\r\n    },\r\n    \"contentItems\": {\r\n      \"collection\": \"*\",\r\n      \"filter\": \"field\"\r\n    }\r\n  }\r\n}\r\n```\r\n5. Try to post on endpoint `POST http://localhost:1337/favourites`\r\nIn array is id of `Event` object, I have `Events` collection and it's id tooked after created.\r\n\r\n```\r\n{\r\n  \"title\":\"Title1\",\r\n  \"contentItems\": [\"5e56dc4d8d9153820f228bab\"]\r\n} \r\n```\r\n6. You will get \r\n```\r\n{\r\n  \"statusCode\": 500,\r\n  \"error\": \"Internal Server Error\",\r\n  \"message\": \"An internal server error occurred\"\r\n}\r\n``` \r\nand in Strapi conosole\r\n```\r\n[2020-02-27T20:47:00.530Z] error TypeError: Cannot read property 'associations' of undefined\r\n    at newValue.forEach.obj (/node_modules/strapi-connector-mongoose/lib/relations.js:234:51)\r\n    at Array.forEach (<anonymous>)\r\n    at params.parseRelationships.Object.keys.reduce (/node_modules/strapi-connector-mongoose/lib/relations.js:219:28)\r\n    at Array.reduce (<anonymous>)\r\n    at Function.update [as updateRelations] (/node_modules/strapi-connector-mongoose/lib/relations.js:38:59)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n```\r\n7. Change polymorphic into exact defined collection\r\n```\r\n    \"contentItems\": {\r\n      \"collection\": \"*\",\r\n      \"filter\": \"field\"\r\n    }\r\n```\r\ninto \r\n```\r\n    \"contentItems\": {\r\n      \"collection\": \"event\",\r\n      \"filter\": \"field\"\r\n    }\r\n```\r\n8. Try to post same request\r\n9. An object will be created with success.\r\n\r\n**Expected behavior**\r\n An object will be created with success. I can put there any kind of model and it should work.\r\n\r\n**System**\r\n\r\n- Node.js version: 10.18.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: MongoDB\r\n- Operating system: macOS Catalina\r\n\r\n**Additional context**\r\nI would love to help with fixing it.\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I create an enum with some values being the same the server cannot restart.\r\n\r\n**Example**\r\nEnum:\r\n```\r\nff\r\nother\r\nff\r\n```\r\n\r\n\r\n**Expected behavior**\r\nI should be able to create an enum with multiple times the same value\r\n\r\n**System**\r\n- Node.js version: 10\r\n- NPM version: 6\r\n- Strapi version: beta.18.8\r\n- Database: sqlite\r\n- Operating system: debian\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIt happened with creating an account via local provider API. \r\nWebhook doesn't trigger on User.create event. It's triggered for other events such as User.update, User.delete. On other models, all events are triggered properly. Not sure if this is intended.\r\n\r\n**Steps to reproduce the behavior**\r\nAdmin Page -> Webhooks -> Create a webhook ... Events Entry - tick all check boxes\r\n\r\n**Expected behavior**\r\nWebhook to trigger User.create when a new User's created.\r\n\r\n\r\n\r\n**System**\r\n- Node.js version: 10+\r\n-  NPM version:\r\n- Strapi version: 3.0.0-beta.18.6\r\n- Database: mongodb\r\n- Operating system: mac os x\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nServer doesn't start when Graphql shadowCRUD is set to false\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install graphql plugin\r\n2. Adding the [configuration file](https://strapi.io/documentation/3.0.0-beta.x/plugins/graphql.html#configurations)\r\n3. Update ShadowCRUD to false\r\n4. start the server with ```yarn develop```\r\n5. The server doesn't start  \r\n\r\n**Error logs**\r\n```\r\nyarn run v1.19.1\r\n$ strapi develop\r\n[2020-02-25T09:40:25.321Z] debug ⛔️ Server wasn't able to start properly.\r\n[2020-02-25T09:40:25.321Z] error Error: Unknown type \"UserInput\".\r\n\r\nUnknown type \"UploadFile\". Did you mean \"Upload\"?\r\n\r\nUnknown type \"UploadFile\". Did you mean \"Upload\"?\r\n    at assertValidSDL (/Users/skavinvarnan/Projects/strapi/vega/node_modules/graphql/validation/validate.js:108:11)\r\n    at Object.buildASTSchema (/Users/skavinvarnan/Projects/strapi/vega/node_modules/graphql/utilities/buildASTSchema.js:71:34)\r\n    at Object.buildSchemaFromTypeDefinitions (/Users/skavinvarnan/Projects/strapi/vega/node_modules/graphql-tools/dist/generate/buildSchemaFromTypeDefinitions.js:25:28)\r\n    at makeExecutableSchema (/Users/skavinvarnan/Projects/strapi/vega/node_modules/graphql-tools/dist/makeExecutableSchema.js:26:29)\r\n    at Object.generateSchema (/Users/skavinvarnan/Projects/strapi/vega/node_modules/strapi-plugin-graphql/services/Schema.js:300:22)\r\n    at Object.initialize (/Users/skavinvarnan/Projects/strapi/vega/node_modules/strapi-plugin-graphql/hooks/graphql/index.js:59:50)\r\n    at /Users/skavinvarnan/Projects/strapi/vega/node_modules/strapi/lib/hooks/index.js:37:28\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n\r\n**Expected behavior**\r\nThe server should without any shadowCRUD queries or mutation \r\n\r\n**Code snippets**\r\n```\r\n{\r\n  \"endpoint\": \"/graphql\",\r\n  \"tracing\": false,\r\n  \"shadowCRUD\": false,\r\n  \"playgroundAlways\": false,\r\n  \"depthLimit\": 7,\r\n  \"amountLimit\": 100\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- NPM version: 6.12.0\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: Mongo\r\n- Operating system: Mac\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nCan't set **unique** on a **rich text** field => getting an error when saving.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new Content-Type\r\n2. Add a Rich Text Field\r\n3. In Advanced Setting, set \"Unique field\"\r\n4. Click on finish and save => error\r\n\r\n**Expected behavior**\r\nThe \"unique field\" setting should not exist for Rich Text fields.\r\n\r\n**System**\r\n- Node.js version: 12.14.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nUninstall script for documentation plugin doesn't work.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install documentation plugin\r\n2. Add some new content types.\r\n3. Try to uninstall documentation plugin\r\n```\r\nyarn strapi uninstall documentation\r\n```\r\n4. See error. \r\n```\r\n╰─ yarn strapi uninstall documentation                                                                                                                                                                                                     ─╯\r\nyarn run v1.21.1\r\n$ strapi uninstall documentation\r\n? Do you want to delete the plugin generated files in the extensions folder? Yes\r\n✔ Uninstalling dependencies\r\nThe \"path\" argument must be one of type string, Buffer, or URL. Received type undefined\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n5. Run Strapi and `Documentation` section is still in the admin panel but throws an error when we try to open it.\r\n\r\n**Expected behavior**\r\nDocumentation plugin is removed without error and admin panel UI is updated correctly.\r\n\r\n**System**\r\n- Node.js version: 10.18.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: MongoDB\r\n- Operating system: macOS Catalina\r\n\r\n\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nAfter we add a polymorphic relation to any model and we have installed a documentation plugin strapi crash.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Edit any model `*.settings.json`\r\n2. Add \r\n```\r\n \"attributes\": {\r\n     ...\r\n    \"polymorphicField\": {\r\n      \"collection\": \"*\",\r\n    }\r\n  }\r\n```\r\n3. Try to run Strapi\r\n4. See error\r\n\r\n**Expected behavior**\r\nStrapi should start without errors.\r\n\r\n**Code snippets**\r\n```\r\n[2020-02-24T09:50:35.185Z] error TypeError: Cannot read property 'toLowerCase' of undefined\r\n    at Object.keys.reduce (/node_modules/strapi-plugin-documentation/services/Documentation.js:642:33)\r\n```\r\n\r\nProblem is that when we have relation nature `manyMorphToMany` then it cannot get proper collection/model for it so I think it should put here some kind generic name like `any` or something like this.\r\n\r\n**System**\r\n- Node.js version: 10.18.1\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: MongoDB\r\n- Operating system: macOS Catalina\r\n\r\n**Additional context**\r\nWhen we disable documentation plugin Strapi starts normally. \r\n\r\nI would love to help with fixing this error ;) \r\n"},{"labels":[null,null,null,"bug"],"text":"\r\n**Describe the bug**\r\nWhen you try to reorder components with richText field in dynamic zone content of richText field is not updating in UI\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create component with richText field\r\n2. Create content type with dynamic zone and use created component there\r\n3. Create new instance of content type with two components (with richText) in dynamic zone\r\n4. Try to reorder used components. You will see that content inside richText is not updating.\r\n\r\n**Expected behavior**\r\nWhen you reorder components with richText field in dynamic zone content of richText will display correct value\r\n\r\n**Screenshots**\r\n![screen_1](https://user-images.githubusercontent.com/20889796/74736610-72341300-5253-11ea-9698-873c63ca97e2.png)\r\n![screen_2](https://user-images.githubusercontent.com/20889796/74736628-77915d80-5253-11ea-8213-7e82b839ca19.png)\r\n![screen_3](https://user-images.githubusercontent.com/20889796/74736632-7a8c4e00-5253-11ea-9abb-d3a4edaa3641.png)\r\n\r\n**System**\r\n- Node.js version: v12.16.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Operating system: Ubuntu 18.04.1 LTS\r\n\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhile using forgot-password in Strapi, the email with link to reset password is sent but the axios.post request throws a 500 Internal Server Error. Strapi console logs an error \"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\"\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new user in Strapi admin panel \r\n2. Go to Postman\r\n3. Create post request to http://localhost:1337/auth/forgot-password\r\n4. Use { email: user_email } as data \r\n\r\n**Expected behavior**\r\nStrapi forgot-password sends and email without throwing an error at the same time \r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/39009379/74593744-d924b280-502e-11ea-9635-612a99054d13.png)\r\n\r\n![image](https://user-images.githubusercontent.com/39009379/74593755-02454300-502f-11ea-8541-a3ad6b1fc143.png)\r\n\r\n**System**\r\n- Strapi version: 3.0.0-beta.18.4\r\n- Database: mongoDB\r\n- Operating system: Windows10\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI'm trying to customise the login template of documentation plugin but my custom template gets replaced by the original.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to /extensions/documentation/public/login.html\r\n2. Remove Strapi logo line as example\r\n3. Go to documentation link: http://localhost:1337/documentation/v1.0.0\r\n4. You will see the original version\r\n5. Checking /extensions/documentation/public/login.html again, is a copy of file located in\r\nnode_modules/strapi-plugin-documentation/public/login.html\r\n\r\n**Expected behavior**\r\nI expect to keep login.html customised.\r\n\r\n**System**\r\n- Node.js version: v10 LTS\r\n- NPM version: 6.13.7\r\n- Strapi version: v3.0.0-beta.18.7\r\n- Database: data.db (default)\r\n- Operating system: MacOS Mojave\r\n\r\n**Additional context**\r\nI'm new with Strapi but I've worked with other CMS and I think that this is a bug. I've also tried creating an /extensions/documentation/overrides/public/login.html but I had the same behaviour.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nHi,\r\nIf you try to modify a content-type through the admin panel, then the `gloalId` property will be removed from the model.settings.json file.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type through admin panel \r\n2. Add some fields and save the content type\r\n3. Go `model.settings.json` file and add `globalId` property\r\n4. Go content-type builder, add a new field to the content-type and save.\r\n5. See `model.settings.json` file doesn't have `globalId` property anymore.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10.13.0\r\n- NPM version:6.4.1\r\n- Strapi version: 3.0.0-beta.18.7 (node v10.13.0)  \r\n- Database: postgresql\r\n- Operating system: macos catalina\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi, I'm sorry to file this, because it looks very similar to #5151 and #4819, but I've been looking at both of them and I'm pretty sure this is distinct.\r\nIt's similar to #5151, but in this case the models are all singular. And it's different from #4819 because the resolvers are just the built in controller functions.\r\n\r\n\r\n**Describe the bug**\r\n\r\nWhen you have a model with multiple words (so the uid ends up being camel cased) and you run a mutation a policy before a Graphql mutation, the policy code does not get executed. The policies do run for Queries!\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a local or global policy\r\n2. create a model which has camel cased name (so the directory ends up being kebab-cased)\r\n3. configure the schema.graphql for a Mutation (update) & a Query (findOne) so that they use the policy\r\n4. run the query, the policy is invoked before the resolver method.\r\n5. run the mutation, the policy code does not execute, and the server runs the mutation\r\n\r\n\r\n**Expected behavior**\r\nI would expect the policy to be invoked before the mutation!\r\n\r\n\r\n**Code snippets**\r\nI created a repo with a reproduction here: https://github.com/dmcclory/strapi-graphql-camelcase-bug-repro\r\n\r\napi/camel-case/config/schema.graphql\r\n```\r\nmodule.exports = {\r\n\r\n resolver: {\r\n   Query: {\r\n     camelCase: {\r\n       resolver: \"camel-case.findOne\",\r\n       policies: [\r\n         \"global.ownershipPolicy\"\r\n       ]\r\n     }\r\n   },\r\n   Mutation: {\r\n     updateCamelCase: {\r\n       resolver: \"camel-case.update\",\r\n       policies: [\r\n         \"global.ownershipPolicy\"\r\n       ]\r\n     }\r\n   }\r\n }\r\n}\r\n```\r\n\r\n\r\nthe policy code is very simple:\r\n```\r\n'use strict';\r\n\r\nmodule.exports = async (ctx, next) => {\r\n\r\n  console.log(\"I am a global policy and I am running!\")\r\n  console.log(Object.keys(ctx.request.body))\r\n  console.log(ctx.request.body.operationName)\r\n  console.log(ctx.request.body.title)\r\n  return await next()\r\n}\r\n```\r\n\r\nAnd I used these graphql queries\r\n```\r\nquery GetMovie {\r\n  movie(id: 1) {\r\n    title\r\n  }\r\n}\r\n\r\nmutation UpdateTitle {\r\n  \r\n  updateMovie(input: {\r\n    where: {id: 1},\r\n    data: { title: \"Better Movie\"}\r\n  }) {\r\n    movie {\r\n      title\r\n    }\r\n  }\r\n}\r\n\r\nquery GetCamelCase {\r\n  camelCase(id: 1) {\r\n    title\r\n  }\r\n}\r\n\r\nmutation UpdateCamelCase {\r\n  updateCamelCase(input: {\r\n    where: {id: 1},\r\n    data: { title: \"Neutral Camel\"}\r\n  }) {\r\n    camelCase {\r\n      title\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Screenshots**\r\nHere's console output after running those 4 mutations in order:\r\n\r\n![Screen Shot 2020-02-14 at 9 59 35 AM](https://user-images.githubusercontent.com/1952789/74543834-19434280-4f14-11ea-99a8-534c39f2b0b8.jpg)\r\n\r\n\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.18.7\r\n- strapi-plugin-graphql version: 3.0.0-beta.18.7\r\n- Database: postgres\r\n- Operating system: OSX\r\n\r\nThanks for taking a look at it! This is a great project!\r\n"},{"labels":[null,null,null,"bug"],"text":"when uploading a file even if its size is less then the size the limit the response's status was 400\r\nand it was due to the size limit\r\nfile size = 853.40\r\nlimit size =  5000000000\r\n\r\nif i changed the code to parse the tow numbers it will work correctly\r\n\r\n\r\n**Code snippets**\r\nif (parseFloat(file.size) > parseFloat(config.sizeLimit)) {\r\n\r\n**System**\r\n- Node.js version: 10.15.0\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: mongodb\r\n- Operating system: linux\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen authoring a content type item that has a dynamic zone with a component that contains a repeatable component itself there is an issue when clicking on the up / down arrow to re-order. The re-ordering on the UI changes the order of the wrong list of components.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content type \"Quiz\" that has a field \"Questions\" of dynamic zone (Multiple Choice Question)\r\n2. Create a new component (Multiple Choice Question) that has a field \"Questions) of repeatable component (Multiple Choice Answer) and a question field of type text\r\n3. Create a new component (Multiple Choice Answer) with answer field of type text\r\n4. Create content item of type \"Quiz\" and add two multiple choice questions with multiple choice answers\r\n5. Click up or down arrow and observe the list of questions moving but the question text field stays in the current position.\r\n\r\n**Expected behavior**\r\nWhen clicking up or down it should move the component at the highest level that the up / down icon is attached too, not the components at the lowest level.\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: MySQL\r\n- Operating system: MAC OS 10.14.6\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nAfter updating the user content type, adding in a required date field and clicking \"Save,\" Strapi attempts to restart but fails. An error is produced:\r\n\r\n[2020-02-09T17:08:37.518Z] error Impossible to register the 'user' model.\r\n[2020-02-09T17:08:37.519Z] error error: column \"Birthdate\" contains null values\r\n\r\nThis is without attempting to add a new user. This happened directly after I added a new date type field to the User content type.\r\n\r\nStrapi is unable to start again. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Content type builder\r\n2. Click on User\r\n3. Add a date field content type, required type\r\n4. Click save\r\n\r\n**Expected behavior**\r\nStrapi restarts to save the changes, and loads back up just fine.\r\n\r\n**System**\r\n- Node.js version: v10.14.1\r\n- NPM version: 6.4.1\r\n- Strapi version: Unsure\r\n- Database: Postgres running on docker container\r\n- Operating system: Strapi is on windows 10, postgres is on a docker container using official image.\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nIf you enter a Latin alphabet after a few Korean characters including spaces, the cursor moves to the beginning of the line.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to a text editing page.\r\n2. Input Korean characters with two or more spaces.\r\n3. Enter Latin alphabet.\r\n\r\n**Expected behavior**\r\nThe cursor should be at the end of the line.\r\n\r\n**Screenshots**\r\n![Untitled](https://user-images.githubusercontent.com/31977180/74082587-e1b14200-4a9e-11ea-8d6a-e24c9a477364.gif)\r\n\r\n**System**\r\n- Node.js version: v12.14.1\r\n- NPM version: v6.13.4\r\n- Strapi version: v3.0.0-beta.18.7\r\n- Database: SQLite (I guess this is the default option of `--quickstart`, correct?)\r\n- Operating system: macOS 10.15.3 (Catalina)\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a content type that ends in the letter \"s\", Strapi automatically creates the table in the database using \"es\" for the plural. The problem is that if you have a component within that content type, the column with the ID added to the component table is correct without the \"es\", but Strapi looks for it just without the \"s\". \r\n\r\nFor example:\r\nContent Type: \"about_us\"\r\nTable name: \"about_uses\" (sounds funny, but whatever)\r\nA component is added to the \"about_us\" content type. In the component table, the \"about_us_id\" column is added, but Strapi looks for the column \"about_us**e**_id\".\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create type: \"about_us\"\r\n2. Create a component and add it to the content type.\r\n3. Start Strapi and create an item of content type \"about_us\".\r\n4. Try saving. An error is returned.\r\n\r\n**Expected behavior**\r\nThe item should be saved and Strapi should look for the column without the \"e\" that it added to the name.\r\n\r\n**System**\r\n- Node.js version: 10.18.1\r\n- Strapi version: 3.0.0-beta.18.6\r\n- Database: Postgres\r\n- Operating system: Linux\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIf you have 2 content-types which are related via the name of \"domain\", causes this exception:\r\n```\r\n[2020-02-05T13:55:22.399Z] error TypeError: domain.enter is not a function\r\n    at Child.EventEmitter.emit (domain.js:459:10)\r\n    at eventNames.forEach (/node_modules/bookshelf/lib/base/events.js:75:17)\r\n    at Array.forEach (<anonymous>)\r\n    at Child.trigger (/node_modules/bookshelf/lib/base/events.js:74:29)\r\n    at Builder.builder.on (/node_modules/bookshelf/lib/bookshelf.js:544:47)\r\n    at Builder.emit (events.js:182:13)\r\n    at Builder.EventEmitter.emit (domain.js:442:20)\r\n    at Runner.query (/node_modules/knex/lib/runner.js:132:18)\r\n    at /node_modules/knex/lib/runner.js:39:23\r\n    at tryCatcher (/node_modules/bluebird/js/release/util.js:16:23)\r\n    at /node_modules/bluebird/js/release/using.js:185:26\r\n    at tryCatcher (/node_modules/bluebird/js/release/util.js:16:23)\r\n    at Promise._settlePromiseFromHandler (/node_modules/bluebird/js/release/promise.js:547:31)\r\n    at Promise._settlePromise (/node_modules/bluebird/js/release/promise.js:604:18)\r\n    at Promise._settlePromise0 (/node_modules/bluebird/js/release/promise.js:649:10)\r\n    at Promise._settlePromises (/node_modules/bluebird/js/release/promise.js:729:18)\r\n    at Promise._fulfill (/node_modules/bluebird/js/release/promise.js:673:18)\r\n    at PromiseArray._resolve (/node_modules/bluebird/js/release/promise_array.js:127:19)\r\n    at PromiseArray._promiseFulfilled (/node_modules/bluebird/js/release/promise_array.js:145:14)\r\n    at Promise._settlePromise (/node_modules/bluebird/js/release/promise.js:609:26)\r\n    at Promise._settlePromise0 (/node_modules/bluebird/js/release/promise.js:649:10)\r\n    at Promise._settlePromises (/node_modules/bluebird/js/release/promise.js:729:18)\r\n[2020-02-05T13:55:22.400Z] debug GET /content-manager/explorer/application::video.video/1 (9 ms) 500\r\n```\r\n\r\nI have `videos` and `domains` content-types that are connected with a \"has many\" relation. See the screenshots below.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type named \"video\"\r\n2. Create a content type named \"domain\"\r\n3. Create such a \"has many\" relation:\r\nVideo Field name: domain\r\nDomain Field name: videos\r\nDomain  has many Videos\r\n4. Go to Videos and try to add new record\r\n5. See the error\r\n\r\n**Expected behavior**\r\nCreate a relationship with a field named \"domain\".\r\nIt seems that is caused because of a dependency uses the deprecated [domain](https://nodejs.org/docs/latest-v10.x/api/domain.html) API of Node.js.\r\n\r\n**Screenshots**\r\n<img width=\"908\" alt=\"Ekran Resmi 2020-02-05 16 58 00\" src=\"https://user-images.githubusercontent.com/13666448/73848256-d361ec80-4838-11ea-8509-4503fca9db62.png\">\r\n\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 10.13.0\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.18.7 (node v10.13.0)\r\n- Database: postgresql 12.1\r\n- Operating system: macos catalina\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nOriginal bug here: https://github.com/strapi/strapi/issues/4080\r\n\r\nI've noticed some slow performance whenever the amount of relations started growing of an entry. I thought the fix mentioned in #4080 already fixed this, but after some testing, I've come up with the following results (same query/same output fields):\r\n\r\nREST: 110-120ms\r\nGraphQL: 900-910ms\r\n\r\nThat's a big difference. After reading the original issue, I started to dig through the graphql plugin and started fiddling with the populate settings on line 155 in services/Loader.js (as already mentioned in the original post). Setting the populate to a hard coded [] results in a huge boost:\r\n\r\nGraphQL: 120-140ms\r\n\r\nThe funny thing here is, the fields that originally are populated in the params, are still queryable after setting the populate to [].\r\nHowever, this does not seem to have effect when deep filtering. I not sure why, but i'll try to figure that out sometime this week.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to services/Loader.js in the graphql-plugin\r\n2. Set the populate option on line 155 to []\r\n3. Fire up a GraphQL sandbox\r\n4. Witness the speed increase.\r\n\r\n**Expected behavior**\r\nA performance of GraphQL which is near the same as the REST performance.\r\n\r\n**System**\r\n- Node.js version: 10.17.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: MongoDB (latest Docker image)\r\n- Operating system: MacOS 10.15.2\r\n\r\n**Additional context**\r\nIt seems the impact on performance is happening when there are many-to-* relations on a content type. I'm not sure why setting an empty array as the populate value still results in populated fields (or are those populated on request when stating them in the query?). I haven't fully debugged the code, but this was the result of a quick test.\r\n\r\nI'll try to look into this issue this week if i've got some spare time. Maybe I can help around :)\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI'm try to use Policy in GraphQL Mutation, but policy not execute when i'm send a post to graphql endpoint.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Call GraphQL and GraphQL still return a output than no output in console\r\n\r\n**Expected behavior**\r\ni want use a policy to check a user owner of data, this is works good in REST API\r\n\r\n**Screenshots**\r\n![Screenshot from 2020-02-01 16-57-44](https://user-images.githubusercontent.com/31454084/73590876-84574700-451a-11ea-9292-12af43729e5c.png)\r\n\r\n**Code snippets**\r\n- GraphQL Mutation Request\r\n```\r\nmutation {\r\n  createQuestion (input: {\r\n      data: {\r\n        name: \"testing\"\r\n      }\r\n  }) {\r\n    question {\r\n      id\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n- GraphQL Responses Output\r\n```\r\n{\r\n  \"data\": {\r\n    \"createQuestion\": {\r\n      \"question\": {\r\n        \"id\": \"5e354b89deb3d553456d0d49\",\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n- /api/questions/config/schema.graphql\r\n```\r\nmodule.exports = {\r\n    resolver: {\r\n        Mutation: {\r\n            createQuestion: {\r\n                policies: [\"global.Debug\"],\r\n                resolver: \"Questions.create\"\r\n            }\r\n        },\r\n    },\r\n};\r\n```\r\n\r\n- /config/policies/Debug.js\r\n```\r\n'use strict';\r\n/**\r\n * `Debug` policy.\r\n */\r\nmodule.exports = async (ctx, next) => {\r\n  console.log('error test')\r\n};\r\n```\r\n\r\n**System**\r\n- Node.js version: 10.18.1\r\n- NPM version:6.13.4\r\n- Yarn version: 1.21.1\r\n- Strapi version: 3.0.0-beta.18.6\r\n- Database: MongoDB Latest (Docker)\r\n- Operating system: Ubuntu 19.04\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nAfter adding an enum to a content type, my server crashes with the error:\r\n\r\n```\r\nerror error: syntax error at or near \"check\"\r\n    at Connection.parseE (/fakepath/node_modules/pg/lib/connection.js:605:11)\r\n    at Connection.parseMessage (/fakepath/node_modules/pg/lib/connection.js:401:19)\r\n    at TLSSocket.<anonymous> (/fakepath/node_modules/pg/lib/connection.js:121:22)\r\n    at TLSSocket.emit (events.js:223:5)\r\n    at addChunk (_stream_readable.js:309:12)\r\n    at readableAddChunk (_stream_readable.js:290:11)\r\n    at TLSSocket.Readable.push (_stream_readable.js:224:10)\r\n    at TLSWrap.onStreamRead (internal/stream_base_commons.js:181:23)\r\n```\r\n\r\nRunning `DEBUG=* yarn strapi develop` points to the following query:\r\n\r\n```\r\n  knex:query alter table \"jobsitems\" alter column \"stage\" type text check (\"stage\" in ('draft', 'test', 'published')) using (\"stage\"::text check (\"stage\" in ('draft', 'test', 'published'))) trx22 +9ms\r\n```\r\n\r\nWhich maybe would be more valid like so:\r\n\r\n```\r\n  knex:query alter table \"jobsitems\" alter column \"stage\" type text\r\n  knex:query alter table \"jobsitems\" add constraint name check (\"stage\" in ('draft', 'test', 'published')) using (\"stage\"::text check (\"stage\" in ('draft', 'test', 'published')))\r\n```\r\n\r\n(I'm not an expert in knex but this seems like valid syntax)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Add an enum to a content type\r\n2. Server crashes and error appears. Can't restart it\r\n\r\n**Expected behavior**\r\n/\r\n\r\n**Screenshots**\r\n/\r\n\r\n**Code snippets**\r\n/\r\n\r\n**System**\r\n- Node.js version: 12.14.1\r\n- NPM version:6.13.4\r\n- Strapi version: 3.0.0-beta.18.7\r\n- Database: Postgresql 10.6\r\n- Operating system: MacOS\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen the content type name ends with 'XXXs' and the plural form is 'XXXses' upon saving of new entry i get this error:\r\n\r\n```\r\nselect distinct `lotuses_components`.* from `lotuses_components` where `field` = 'translations' and `component_type` in ('components_lotuses_translations') and `lotuses_components`.`lotuse_id` in (6) order by `order` asc - ER_BAD_FIELD_ERROR: Unknown column 'lotuses_components.lotuse_id' in 'where clause'\r\n```\r\nThe column in the table is properly named - lotuses_components.lotus_id not lotuses_components.lotuse_id\r\n\r\nStack trace:\r\n\r\n```\r\nerror Error: ER_BAD_FIELD_ERROR: Unknown column 'XXXses_components.XXXse_id' in 'where clause'\r\n    at Query.Sequence._packetToError (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/sequences/Sequence.js:47:14)\r\n    at Query.ErrorPacket (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/sequences/Query.js:79:18)\r\n    at Protocol._parsePacket (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/Protocol.js:291:23)\r\n    at Parser._parsePacket (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/Parser.js:433:10)\r\n    at Parser.write (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/Parser.js:43:10)\r\n    at Protocol.write (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/Protocol.js:38:16)\r\n    at Socket.<anonymous> (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/Connection.js:88:28)\r\n    at Socket.<anonymous> (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/Connection.js:526:10)\r\n    at Socket.emit (events.js:193:13)\r\n    at addChunk (_stream_readable.js:295:12)\r\n    at readableAddChunk (_stream_readable.js:276:11)\r\n    at Socket.Readable.push (_stream_readable.js:231:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:154:17)\r\n    --------------------\r\n    at Protocol._enqueue (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/protocol/Protocol.js:144:48)\r\n    at Connection.query (/home/userdir/strapi/my_project_v3_2/node_modules/mysql/lib/Connection.js:198:25)\r\n    at /home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/dialects/mysql/index.js:130:18\r\n    at Promise._execute (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/debuggability.js:384:9)\r\n    at Promise._resolveFromExecutor (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/promise.js:518:18)\r\n    at new Promise (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/promise.js:103:10)\r\n    at Client_MySQL._query (/home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/dialects/mysql/index.js:124:12)\r\n    at Client_MySQL.query (/home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/client.js:158:17)\r\n    at /home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/transaction.js:331:24\r\n    at Promise._execute (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/debuggability.js:384:9)\r\n    at Promise._resolveFromExecutor (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/promise.js:518:18)\r\n    at new Promise (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/promise.js:103:10)\r\n    at Client_MySQL.trxClient.query (/home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/transaction.js:326:12)\r\n    at Runner.query (/home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/runner.js:135:36)\r\n    at /home/userdir/strapi/my_project_v3_2/node_modules/knex/lib/runner.js:39:23\r\n    at tryCatcher (/home/userdir/strapi/my_project_v3_2/node_modules/bluebird/js/release/util.js:16:23)\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content type lotus, use defaults\r\n2. Create component license with text filed license  \r\n3. Create component translations with fields: name - text, description rich text, add the license component as single use, make it required\r\n4. Add the translations component to lotus as repeatable use\r\n3. Go and create an entry\r\n4. See the error\r\n\r\nI reproduced it with the following models:\r\n**lotus** content type\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"lotuses\",\r\n  \"info\": {\r\n    \"name\": \"lotus\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"translations\": {\r\n      \"type\": \"component\",\r\n      \"repeatable\": false,\r\n      \"component\": \"lotuses.translations\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**license** component\r\n```\r\n{\r\n  \"info\": {\r\n    \"name\": \"license\",\r\n    \"icon\": \"ad\"\r\n  },\r\n  \"options\": {},\r\n  \"attributes\": {\r\n    \"number\": {\r\n      \"type\": \"string\"\r\n    }\r\n  },\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"components_common_licenses\"\r\n}\r\n```\r\n\r\n**translations** component\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"components_lotuses_translations\",\r\n  \"info\": {\r\n    \"name\": \"translations\",\r\n    \"icon\": \"adjust\"\r\n  },\r\n  \"options\": {},\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"description\": {\r\n      \"type\": \"richtext\",\r\n      \"required\": true\r\n    },\r\n    \"license\": {\r\n      \"type\": \"component\",\r\n      \"repeatable\": false,\r\n      \"component\": \"common.license\",\r\n      \"required\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nThe query should be properly generated based on the actual column name which is lotus_id.\r\nAnd the entry should save without an issue.\r\n \r\n\r\n**System**\r\n- Node.js version: v11.15.0\r\n- NPM version: 6.7.0\r\n- Strapi version: 3.0.0-beta.18.6\r\n- Database: Mysql\r\n- Operating system: Ubuntu\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI'm using Strapi as a CMS to control the content of my website. I wanted to be able to control every bigger element on my page via Strapi, so I've created this pretty flexible content-type (which is also pretty big). Unfortunately, when the Dynamic Zone field has already ~10 entries, the form becomes totally unusable (there's a massive lag on input).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Clone https://github.com/sarneeh/strapi-strapi-issues-5111\r\n2. Run Strapi `npm i && npm run develop`\r\n2. Go to Pages -> \"Test\" entry (the database is included)\r\n3. Try to type anything into a text field\r\n\r\nLogin credentials: `test/test1234`\r\n\r\n**Expected behavior**\r\nI expect the form to work fast.\r\n\r\n**Screenshots**\r\n![strapi-issue](https://user-images.githubusercontent.com/11553624/73243747-a9f5f080-41a8-11ea-8234-f8b6ebb8733d.gif)\r\n\r\n**System**\r\n- Node.js version: 12\r\n- NPM version: 6\r\n- Strapi version: beta.18.6\r\n- Database: SQLite\r\n- Operating system: MacOS"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf you create ContentType with name Attribute and then use this type as a relation one to many and add column \"attributes\" into the other ConentType, eg AtributeGroup, -- you'll have a constant crash either during the creation of a new AtributeGroup entry or when you trying to load entries on the AtributeGroup page.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create AttributeGroup ContentType with one text field 'Name'\r\n2. Create Attribute ContentType. Add relation Many-to-One to AttributeGroup. Use default names for columns. It will be the 'attributes' column in an AttributeGroup ContentType.\r\n3. Try to create a new entry for AttributeGroup. \r\n4. When you'll try to save this entry you'll see a dialog with error 'attributes is not defined on the model.'\r\n\r\n**Expected behavior**\r\nEither \"Attribute\" should be forbidden to use as a ContentType name, or forbid to use 'attributes' name for relation's columns.\r\n\r\n\r\n**System**\r\n- Node.js version: v13.7.0\r\n- NPM version: 6.13.6\r\n- Strapi version:  3.0.0-beta.18.6\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen I try to add a new field in a content type the admin panel shows \"An error occurred\" popup and `debug PUT /content-type-builder/content-types/application::ads.ads (308 ms) 400` log message is displayed in the terminal window.\r\n\r\nI have tried to downgrade to 18.6 but the error still persists. I also created a new strapi project and copied my api and extensions folders to the new project, but the same issue occurred there as well. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Start in dev mode and go to Content Type Builder\r\n2. Edit an existing content type and add a new field of any type\r\n3. Click on save\r\n4. An error occured message pops up\r\n\r\n**Expected behavior**\r\nAdding a new field in a Content Type and saving it afterwards should save the content type with the updated fields. Everything was working like this previously.\r\n\r\n**System**\r\n- Node.js version: 13.2.0\r\n- NPM version: 6.13.1\r\n- Yarn version: 1.19.2\r\n- Strapi version: beta 18.6\r\n- Database: mongoDB\r\n- Operating system: Ubuntu 18.04 LTS\r\n\r\n**Additional context**\r\nI also tried to create a new administrator and use that to edit content types but the error persisted. It might be an issue with my specific environment but any sort of help to troubleshoot this issue will be very helpful.\r\n\r\nThank you!"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n(Using DEV environment) Changed content type `collection name`, but `Roles & Permissions` section's `APPLICATION - Define all your project's allowed actions` shows old `collection name` even after restarting server\r\n\r\n**Steps to reproduce the behavior**\r\n1. `strapi dev`\r\n2. Create a new Content Type (`Content Type A`)\r\n3. Checked `Permissions` in `Create A New Role`, name shown as expected\r\n4. Changed `collection name` of the `Content Type A`\r\n5. Repeat Step 3 but name is not as expected; restarting server doesn't fix anything\r\n\r\n**Expected behavior**\r\nExpect step 3 above to show the collection name of `Content Type A` after changing\r\n\r\n**Resolution/Steps Taken**\r\n\r\nNo resolution found. Steps taken are as follows:\r\n\r\n* I deleted `Content Type A` and recreated one with the exact same name and `collection name`\r\n* Run `strapi dev`.\r\n* Error message: \r\n\r\n```\r\n[2020-01-25T07:36:47.378Z] error Impossible to register the 'family-member' model.\r\n[2020-01-25T07:36:47.378Z] error Error: SQLITE_ERROR: duplicate column name: parent\r\n```\r\n\r\nand Strapi will not start. (Removing from DB and `/api` folder fixed this, though I lost my work.)\r\n\r\nDeletion + recreation does successfully show the new information in Roles & Permissions.\r\n\r\nSo maybe the cause of this bug is the Content Type is not getting thoroughly updated, or the Roles & Permissions is not seeing the updated data somehow.\r\n\r\n**System**\r\n- Node.js version: LTS\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.18.4 (node v12.11.1)\r\n- Database: SQLite (default)\r\n- Operating system: OS X latest\r\n\r\n----\r\n\r\nI checked issues for existing issue similar to this but could not find it."},{"labels":[null,null,null,"bug"],"text":"When creating a component with a number field named 'id' as integer the system errors.\r\nThe system cannot be restarted after this. \r\n\r\nThe workaround is to find the model under `components/' and remove the offending json file. \r\n\r\n**Steps to reproduce the behavior**\r\n> content builder\r\n> new component\r\n> Add another field, name \"id\" numeric \"integer\"\r\n\r\n> shutdown strapi\r\n> start strapi \r\n\r\nError prevents startup: \r\n```\r\nyarn run v1.21.1\r\n$ strapi start\r\n[2020-01-24T16:46:27.643Z] error Impossible to register the 'field1.field' model.\r\n[2020-01-24T16:46:27.643Z] error error: column \"id\" specified more than once\r\n    at Connection.parseE (/idc/node_modules/pg/lib/connection.js:604:13)\r\n    at Connection.parseMessage (/idc/node_modules/pg/lib/connection.js:403:19)\r\n    at Socket.<anonymous> (/idc/node_modules/pg/lib/connection.js:123:22)\r\n    at Socket.emit (events.js:198:13)\r\n    at addChunk (_stream_readable.js:288:12)\r\n    at readableAddChunk (_stream_readable.js:269:11)\r\n    at Socket.Readable.push (_stream_readable.js:224:10)\r\n    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)\r\nFrom previous event:\r\n    at Client_PG._query (/idc/node_modules/knex/lib/dialects/postgres/index.js:234:12)\r\n    at Client_PG.query (/idc/node_modules/knex/lib/client.js:158:17)\r\n    at Runner.query (/idc/node_modules/knex/lib/runner.js:135:36)\r\n    at Runner.queryArray (/idc/node_modules/knex/lib/runner.js:224:14)\r\n    at /idc/node_modules/knex/lib/runner.js:37:25\r\nFrom previous event:\r\n    at Runner.run (/idc/node_modules/knex/lib/runner.js:25:16)\r\n    at SchemaBuilder.Target.then (/idc/node_modules/knex/lib/interface.js:14:43)\r\nerror Command failed with exit code 1.\r\n```\r\n**Expected behavior**\r\nA field name that will conflict is not allowed to be added to the GUI, the user informed of error.\r\nNo offending json files will be created into components/ directory\r\nThe system will start \r\n\r\n** System \r\n3.0.0-beta.18.6 (node v10.18.1) \r\n\r\n**Additional context**\r\nWorkaround is to head into components/ dir find the form file and edit out the offending json.\r\nThis is problematic in a microservice as the filesystem is not accessible. "},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nGiven a content type named `Nested`, which has a dynamic zone containing any type of components, and a content type `Base` with a relation \"Base belongs to many Nesteds\", `strapi-plugin-graphql` will always return null for the dynamic zone field when querying `findOne` `Base`. Querying `findOne` `Nested` works as expected.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Clone this repo: https://github.com/MeLlamoPablo/strapi-graphql-dynamic-zones-bug-repro\r\n2. Set it up with `yarn` and run it with `yarn develop`\r\n3. Go to the admin panel at `http://localhost:1337/admin`\r\n4. Create a `Nested` with test data.\r\n5. Create a `Base` including this `Nested`.\r\n6. Query it from graphql.\r\n\r\n**Expected behavior**\r\nThe content from the dynamic zone is included in the response, as it happens with REST:\r\n\r\n```\r\n$ curl -H \"Authorization: Bearer $token\" localhost:1337/bases/1\r\n```\r\n\r\n```json\r\n{\r\n  \"id\": 1,\r\n  \"title\": \"test\",\r\n  \"created_at\": \"2020-01-24T16:13:27.795Z\",\r\n  \"updated_at\": \"2020-01-24T16:13:27.795Z\",\r\n  \"nesteds\": [\r\n    {\r\n      \"id\": 1,\r\n      \"title\": \"test\",\r\n      \"created_at\": \"2020-01-24T16:13:21.614Z\",\r\n      \"updated_at\": \"2020-01-24T16:13:27.807Z\",\r\n      \"components\": [\r\n        {\r\n          \"__component\": \"a.a\",\r\n          \"id\": 2,\r\n          \"text_field\": \"hello world\"\r\n        },\r\n        {\r\n          \"__component\": \"b.b\",\r\n          \"id\": 2,\r\n          \"number_field\": 123\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n**Code snippets**\r\n\r\nThis is the query used to retreive the data.\r\n\r\n```graphql\r\nquery {\r\n  base(id:1) {\r\n    title\r\n    nesteds {\r\n      title\r\n      components {\r\n        ... on ComponentAA {\r\n          text_field\r\n        }\r\n        ... on ComponentBB {\r\n          number_field\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  nested(id:1) {\r\n    title\r\n    components {\r\n      ... on ComponentAA {\r\n        text_field\r\n      }\r\n      ... on ComponentBB {\r\n        number_field\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis is the data returned from the query:\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"base\": {\r\n      \"title\": \"test\",\r\n      \"nesteds\": [\r\n        {\r\n          \"title\": \"test\",\r\n          \"components\": null\r\n        }\r\n      ]\r\n    },\r\n    \"nested\": {\r\n      \"title\": \"test\",\r\n      \"components\": [\r\n        {\r\n          \"text_field\": \"hello world\"\r\n        },\r\n        {\r\n          \"number_field\": 123\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNotice how the `components` field is missing when we query the `Nested` through `Base`, but is present when we query it directly.\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- NPM version: v6.2.10\r\n- Strapi version: `3.0.0-beta.18.6`\r\n- Database: sqlite\r\n- Operating system: Ubuntu 18.04\r\n\r\n**Additional context**\r\nInterestingly enough, this happens for `belongs to many` relations, but not for `has many`.\r\n\r\nThank you for your time.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nDue to no transactional synchronous SQL calls API initialization warns or fails for multiple reasons:\r\n\r\n1. `ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"` (warn)\r\n2. `ERROR: Impossible to register the '...' model.` (fail)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create any simple API.\r\n2. Commit API to store models.\r\n3. Try `strapi start` on fresh instance.\r\n\r\n**Expected behavior**\r\nStrapi starts a new instance with all model created and no bugs/errors on initialization.\r\n\r\n**Logs**\r\n\r\nAd 1)\r\n```\r\npostgres_1 | ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"\r\npostgres_1 | DETAIL:  Key (extname)=(pg_trgm) already exists.\r\npostgres_1 | STATEMENT:  CREATE EXTENSION IF NOT EXISTS pg_trgm\r\napi_1      | warn The SQL database indexes haven't been generated successfully. Please enable the debug mode for more details.\r\npostgres_1 | ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"\r\npostgres_1 | DETAIL:  Key (extname)=(pg_trgm) already exists.\r\npostgres_1 | STATEMENT:  CREATE EXTENSION IF NOT EXISTS pg_trgm\r\napi_1      | warn The SQL database indexes haven't been generated successfully. Please enable the debug mode for more details.\r\npostgres_1 | ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"\r\npostgres_1 | DETAIL:  Key (extname)=(pg_trgm) already exists.\r\npostgres_1 | STATEMENT:  CREATE EXTENSION IF NOT EXISTS pg_trgm\r\napi_1      | warn The SQL database indexes haven't been generated successfully. Please enable the debug mode for more details.\r\npostgres_1 | ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"\r\npostgres_1 | DETAIL:  Key (extname)=(pg_trgm) already exists.\r\npostgres_1 | STATEMENT:  CREATE EXTENSION IF NOT EXISTS pg_trgm\r\napi_1      | warn The SQL database indexes haven't been generated successfully. Please enable the debug mode for more details.\r\npostgres_1 | ERROR:  duplicate key value violates unique constraint \"pg_extension_name_index\"\r\npostgres_1 | DETAIL:  Key (extname)=(pg_trgm) already exists.\r\npostgres_1 | STATEMENT:  CREATE EXTENSION IF NOT EXISTS pg_trgm\r\napi_1      | warn The SQL database indexes haven't been generated successfully. Please enable the debug mode for more details.\r\n```\r\n\r\nAd 2)\r\n```\r\nerror: Impossible to register the '...' model.\r\nerror: relation \"core_store\" does not exist\r\n    at Connection.parseE (/srv/app/node_modules/pg/lib/connection.js:606:11)\r\n    at Connection.parseMessage (/srv/app/node_modules/pg/lib/connection.js:403:19)\r\n    at Socket.<anonymous> (/srv/app/node_modules/pg/lib/connection.js:123:22)\r\n    at Socket.emit (events.js:210:5)\r\n    at addChunk (_stream_readable.js:308:12)\r\n    at readableAddChunk (_stream_readable.js:289:11)\r\n    at Socket.Readable.push (_stream_readable.js:223:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:182:23)\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n**System**\r\n- Node.js version: 12.13.0\r\n- Strapi version: any, including 3.0.0-beta.18.6\r\n- Database: postgres\r\n- Operating system: irrelevant (but it's debian:stretch)\r\n\r\n**Additional context**\r\nBoth error are happening because of asynchronous SQL init calls.\r\n\r\n```\r\nCREATE EXTENSION IF NOT EXISTS pg_trgm\r\nduplicate key value violates unique constraint \"pg_extension_name_index\"\r\n```\r\nHappens because of multiple queries that want to accomplish creation of an extension. While first success query creates this extension – other fails with \"duplicate key\".\r\n\r\n```\r\nerror: Impossible to register the '...' model.\r\nerror: relation \"core_store\" does not exist\r\n```\r\nHappens less often, but is also the same case – `core_storage` is created asynchronously which causes dependent queries to fail if the table is not yet created. To fix this you just need to re-run Strapi – table `core_storage` will then be existing and other queries will succeed."},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n~~Big integer field values have zero decimal in the default database (SQLite), eg. 12454623.0~~\r\nCreating a new field with the same name as the earlier deleted field doesn't update the data type in the database.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Setup Strapi instance with the default database (SQLite).\r\n2. Create a new content type.\r\n3. Add a short text field named 'Foo' to the content type. Save the content type.\r\n4. Delete the text field created in step 2. Save the content type.\r\n5. Create a new big integer field named 'Foo' to the Content type. Save the content type.\r\n6. Now the UI shows that the field type is Number.\r\n7. Check the database and see that the actual type in the database is varchar(225). This causes the problem I opened this issue with. See 'Describe the bug' section.\r\n\r\n**Expected behavior**\r\nOptions:\r\n1. Deleting the field will delete it from the database. (Add a warning?)\r\n2. Creating a field clashing with the existing database column will cause an error.\r\n3. Creating a field clashing with the existing database column will cause a warning that the previous data will be overridden and the column type is changed. User can select to proceed or cancel.\r\n\r\n**System**\r\n- Node.js version: v12.14.1\r\n- NPM version: 6.13.6\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen using GraphQL, you are not able to pull a single Role by ID.\r\n\r\n**Steps to reproduce the behavior**\r\nRun the following in http://localhost:1337/graphql:\r\n\r\n```\r\nquery {\r\n  role(id: \"5e1e5392793daa2610f139d8\") {\r\n    name\r\n    description\r\n  }\r\n}\r\n```\r\n\r\nYou get the following error: \r\n\r\n```\r\n\"message\": \"Cannot destructure property 'id' of 'ctx.params' as it is undefined.\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 2,\r\n          \"column\": 3\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"role\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n```\r\n\r\nHere is the stack trace directly: \r\n```\r\n\"TypeError: Cannot destructure property 'id' of 'ctx.params' as it is undefined.\",\r\n            \"    at Object.getRole (c:\\\\projects\\\\projectName\\\\node_modules\\\\strapi-plugin-users-permissions\\\\controllers\\\\UsersPermissions.js:102:13)\",\r\n            \"    at resolver (c:\\\\projects\\\\projectName\\\\node_modules\\\\strapi-plugin-users-permissions\\\\config\\\\schema.graphql:71:42)\",\r\n            \"    at c:\\\\projects\\\\projectName\\\\node_modules\\\\strapi-plugin-graphql\\\\services\\\\Query.js:300:25\",\r\n            \"    at processTicksAndRejections (internal/process/task_queues.js:97:5)\"\r\n```\r\n\r\n**Expected behavior**\r\nReturn the role back to you with specified information.\r\n\r\n\r\n**System**\r\n- Node.js version: v13.5\r\n- NPM version: 6.13.6\r\n- Strapi version: v3.0.0-beta.18.4\r\n- Database: Mongo\r\n- Operating system: Windows 10\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI am developing a shift management app. Currently, there is only one new Content-Type which is like this:\r\n![jobs](https://user-images.githubusercontent.com/55078059/72473142-bbc1b600-37ee-11ea-9b13-8f98acf496c3.png)\r\n\r\nImportant note: **Creator** is a one-to-one relationship with User and **Enrollers** is a one-to-many relationship with User\r\n\r\nI make multiple instances for Users and Jobs\r\n\r\nAnd here is the result if I get all jobs ##Request1\r\n![3jobsintotal](https://user-images.githubusercontent.com/55078059/72475384-73f15d80-37f3-11ea-92b1-50037897b349.png)\r\n\r\nAnd here is the result if I get all job which includes \"trungemployee\" in enrollers ##Request2\r\n![trungemployeejobs](https://user-images.githubusercontent.com/55078059/72475691-1c9fbd00-37f4-11ea-92f5-0dd4ba07a682.png)\r\nThis should not be correct here as all Jobs Enrollers has the user with username trungemployee\r\n\r\nEven funnier this is the result if I get all job which includes \"trinhemployee\" in enrollers ##Request3\r\n![trinhemployeejob](https://user-images.githubusercontent.com/55078059/72475871-81f3ae00-37f4-11ea-9659-2af2aeb27546.png)\r\nThe only one result does not even have trinhemployee as the employee\r\n\r\nAdditionally, I tried the test with **enrollers id 1** ##Request4 \r\n![enrolleridjob](https://user-images.githubusercontent.com/55078059/72476246-6c32b880-37f5-11ea-8183-40a4e25d6200.PNG)\r\nThis should show nothing as I dont have jobs with enrollers id equal to 1\r\n\r\nOne final test, I tried to test it with **enrollers id 4** ##Request5\r\n![enrollerid4](https://user-images.githubusercontent.com/55078059/72476671-73a69180-37f6-11ea-9f11-4650ab47a0c4.PNG)\r\nIs it referencing **job id** instead of **enrollers id** here?\r\n\r\nFinal note: all queries using **creator** in **where** with the above conditions result in expected behaviors. So I am not sure what is the case with **enrollers**.\r\n\r\n**Steps to reproduce the behavior**\r\nYou can make the same Content-Type, and some instances to reproduce this issue.\r\n\r\n**Expected behavior**\r\n1/ Expect ##Request2 to response jobs with id 1, 2, 4 (right now none are responded)\r\n2/ Expect ##Request3 to response jobs with id 1 and 2 (right now job id 4 is responded)\r\n3/ Expect ##Request4 to response jobs with no jobs (right now job id 1 is responded)\r\n3/ Expect ##Request5 to response jobs with id 1, 2(right now job id 4 is responded)\r\n\r\n**Screenshots**\r\nProvided above\r\n\r\n**Code snippets**\r\nProvided above\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version:6.4.1\r\n- Strapi version: \"3.0.0-beta.18.4\",\r\n- Database: sqlite\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\n[sorry] –– unaware at which point and the cause, but the below error has started popping up with each server start. No context is provided. Perhaps someone knows how to dig deeper into this case?\r\n\r\n**Screenshot**\r\n![image](https://user-images.githubusercontent.com/11737572/72228966-2b2e7000-3579-11ea-92ef-a3daeda2abe5.png)\r\n\r\n**Code snippets**\r\n`package.json``\r\n```javascript\r\n  \"dependencies\": {\r\n    \"knex\": \"^0.20.7\",\r\n    \"sqlite3\": \"latest\",\r\n    \"strapi\": \"3.0.0-beta.18.4\",\r\n    \"strapi-admin\": \"3.0.0-beta.18.4\",\r\n    \"strapi-connector-bookshelf\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-content-manager\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-content-type-builder\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-email\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-graphql\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-upload\": \"3.0.0-beta.18.4\",\r\n    \"strapi-plugin-users-permissions\": \"3.0.0-beta.18.4\",\r\n    \"strapi-utils\": \"3.0.0-beta.18.4\"\r\n  },\r\n```\r\n**System**\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: 18.4\r\n- Database: Postgres\r\n- Operating system: MacOS\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nAfter creating a one belong to many relations between items from the same table (something like _Food has many Foods_ in the table Food), when I try to enter the relationship (Meat isParent of Meatballs), the list of options available are not the whole table, but just 20 items. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Create the table Food\r\n2. Go to Content Type Builder\r\n3. Create a hasParent _**Food** has many Foods **hasChild**_ relation in the Food table\r\n4. Create a relationship\r\n5. Check the items available in the dropdown menu and see if you can choose among all the items in the Food table\r\n\r\n**Expected behavior**\r\nI can choose among any item\r\n\r\n**System**\r\n- Node.js version: v10.15.2\r\n- NPM version: 6.13.4\r\n- Strapi version: Strapi v3.0.0-beta.18.4\r\n- Database: postgresql\r\n- Operating system: Ubuntu 19.10\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI wanted to override some of the methods from `strapi-plugin-content-manager/services/ContentManager.js` (create/edit/delete), but they're not being used.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Copy/paste the `node_modules/strapi-plugin-content-manager/services/ContentManager.js` file to `extensions/content-manager/ContentManager.js`\r\n2. Add some `console.log`'s to the methods\r\n3. Go to the admin panel to invoke some of those\r\n\r\n**Expected behavior**\r\nThe overriden methods from extensions folder should be used.\r\n\r\n**Notes**\r\n**It did work properly on 3.0.0-beta.17.x. After I migrated to 3.0.0-beta.18.x, it stopped working.**\r\n\r\n**System**\r\n- Node.js version: 12.10.0\r\n- NPM version: 6.10.30\r\n- Strapi version: 3.0.0-beta.18.4\r\n- Database: MongoDB\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI have created content type which has media attachment. When I am deleting content type it does not delete attachment as well so when I am opening Files upload dashboard it throws an error as it tries to find a related model which is deleted\r\n\r\n**Expected behavior**\r\nEither it should delete related attachment or it will show correctly on the Files upload dashboard\r\n\r\n**System**\r\n- Node.js version: 12.6.0\r\n- NPM version: yarn v1.17.3\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: Mongoose\r\n- Operating system: macOS Mojave\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen using the strapi-hook-mongoose lib and trying to ```findOne``` on a model, if you're giving a primary key as one of the params, the rest is ignored. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a model with a boolean \"private\" for example\r\n2. Create an entry with private at true\r\n3. From its controller, create a findOne method that will findOne of your model with the ctx.params + ```private: false```\r\n4. Allow this api route as public\r\n5. You can retrieve your entry with the api despite it being a \"private\" entry\r\n\r\n**Expected behavior**\r\nYou should be able to have multiple params to a findOne (it's not findById)\r\n\r\n**Code snippets**\r\nSource for the findOne in strapi-hook-mongoose:\r\n```\r\n  async function findOne(params, populate) {\r\n    const primaryKey = getPK(params);\r\n\r\n    if (primaryKey) {\r\n      // Here params is redefined completely\r\n      params = {\r\n        [model.primaryKey]: primaryKey,\r\n      };\r\n    }\r\n\r\n    const entry = await model\r\n      .findOne(params)\r\n      .populate(populate || defaultPopulate);\r\n\r\n    return entry ? entry.toObject() : null;\r\n  }\r\n````\r\n\r\n**System**\r\n\r\n- Node.js version: v11.12.0\r\n\r\n- NPM version: 6.7.0\r\n\r\n- Strapi version: beta.17.8\r\n\r\n- Database: Mongodb\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I create a new ContentType-Entry with a given time, it shows \"Invalid Date\" in ContentType-Overview. It works correctly in  ContentType-Edit-View.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create ContentType \"Test\" with date (date-field), time (time-field), datetime (datetime-field)\r\n2. Create ContentType-Entry with date/time/datetime for 1. January 2020 at 7 o´clock am (Germany --> UTC+1)\r\n3. Display in \"Test\"-Overview: 5e0ed831880ea509c1090af0 (Id) | Wednesday, January 1st 2020 (Date) | Wednesday, January 1st 2020 (Datetime) | Invalid date (Time)\r\n\r\n**Expected behavior**\r\n- Should show correct Time\r\n- Should also show Time information for Datetime.\r\n\r\n**System**\r\n- Node.js version: v13.1.0\r\n- NPM version: 6.12.1\r\n- Strapi version: v3.0.0-beta.18.3\r\n- Database: Mongo\r\n- Operating system: OSX\r\n\r\n**Additional context**\r\nI also do not understand why creating and updating date-fields have different request-parameters, is it on purpose?\r\n- Creating with 1. January 2020 at 7 o´clock am:\r\n`data: {\"date\":\"2020-01-01T11:00:00.000Z\",\"datetime\":\"2020-01-01T06:00:00.000Z\",\"time\":\"07:00:00\"}` (why 11:00:00.000Z?)\r\n- Updating to 8 o´clock am:\r\n`data: {\"_id\":\"5e0ed831880ea509c1090af0\",\"date\":\"2020-01-01\",\"datetime\":\"2020-01-01T07:00:00.000Z\",\"time\":\"08:00:00\",...}`\r\n\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThe public middleware can't be disabled.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Rename the `public/index.html` to whatever you want.\r\n2. Set the `config/environments/**/middleware.json` with\r\n```javascript\r\n{\r\n  \"public\": {\r\n    \"enabled\": false\r\n  }\r\n}\r\n```\r\n3. Start Strapi `yarn develop`\r\n4. Strapi return an error \r\n```shell\r\nerror Error: ENOENT: no such file or directory, open 'D:\\www\\miaCode-dev\\public\\index.html'\r\n    at Object.openSync (fs.js:436:3)\r\n    at Object.readFileSync (fs.js:341:35)\r\n    at Object.initialize (D:\\www\\miaCode-dev\\node_modules\\strapi\\lib\\middlewares\\public\\index.js:39:24)\r\n    at Promise.resolve.then (D:\\www\\miaCode-dev\\node_modules\\strapi\\lib\\middlewares\\index.js:45:28)\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n**Expected behavior**\r\nStrapi shouldn't throw an error if the public middleware is disabled and there is no `public/index.html` file.\r\n\r\n\r\n**System**\r\n- Node.js version: 10.13\r\n- NPM version: 6.4.1\r\n- Strapi version: Beta 18.3\r\n- Database: PostgreSQL\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\nAfter checking the states of middlewares in `strapi/lib/middlewares/index.js`, the list of enabled middleware return \r\n```\r\n[ 'boom',\r\n  'cors',\r\n  'favicon',\r\n  'language',\r\n  'logger',\r\n  'parser',\r\n  'public', <== shouldn't be there!\r\n  'responses',\r\n  'router',\r\n  'session',\r\n  'xframe',\r\n  'xss',\r\n  'users-permissions',\r\n  'active' ]\r\n```\r\nThe public middleware is still enabled, looks like it doesn't take the modification in `config/environments/**/middleware.json`\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi,\r\n\r\n**Describe the bug**\r\nI can't access some data via GraphQL versus simple fetch.\r\n\r\n**Steps to reproduce the behavior**\r\n1- Create a new _avatar_ media field on users. \r\n2- Try to get that avatar via the below GraphQL query:\r\n````graphql\r\nquery {\r\n  me {\r\n    username\r\n    avatar {url}\r\n  }\r\n}\r\n````\r\n3)- You'll get the below error:\r\n_\"Cannot query field \\\"avatar\\\" on type \\\"UsersPermissionsMe\\\".\"_ with a _GRAPHQL_VALIDATION_FAILED_ code.\r\n\r\n**Code snippets**\r\nThe below fetch if returning the avatar object:\r\n\r\nhttp://localhost:1337/users/me/\r\n\r\n````json\r\n{\r\n    \"id\": 20,\r\n    \"username\": \"***\",\r\n    \"email\": \"***@gmail.com\",\r\n    \"provider\": \"local\",\r\n    \"confirmed\": true,\r\n    \"blocked\": null,\r\n    \"created_at\": \"2019-12-26T19:17:36.847Z\",\r\n    \"updated_at\": \"2020-01-01T20:11:46.181Z\",\r\n    \"avatar\": {\r\n        \"id\": 12,\r\n        \"url\": \"/uploads/8dd5de998ffa4de09fc264c0fab924ab.jpg\"\r\n    }\r\n}\r\n````\r\n\r\n**System**\r\n- Node.js version: 10.17.0\r\n- NPM version: 6.11.3\r\n- Strapi version: v3.0.0-beta.18.3\r\n- Database: sqlite\r\n- Operating system: macod\r\n\r\n**Expected behavior**\r\nI should be able to get the avatar data from GraphQL"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I try to submit forgot password form I received 400 bad request error with following response.\r\n`{\r\n\"statusCode\":400,\r\n\"error\":\"Bad Request\",\r\n\"message\":[{\"messages\":[{\"id\":\"Auth.form.error.email.invalid\"}] }]\r\n}`\r\nAfter that I got React minified error.  I opened it with react error decoder and here's what I got `Objects are not valid as a React child (found: object with keys {id}).`\r\n\r\n**Expected behavior**\r\nSend the email and display success or error message\r\n\r\n**Screenshots**\r\n![Screenshot (83)](https://user-images.githubusercontent.com/47513639/71639062-6a191780-2c95-11ea-85ef-715895bdbb47.png)\r\n\r\n**System**\r\n- Node.js version: v12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: MongoDB\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\nIn response, it says entered email is not valid but it is the correct email. When I try to submit the form with correct email it takes 1-2 seconds to print errors in console but if I try to submit the form with wrong email it immediately print the same error message in the console\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\n\r\nWhen creating any relation with the `user` Content-Type the server crashes and isn't able to start.\r\n\r\nAfter removing the relation from both settings files for the given models the server is able start again.\r\n(e.g. `/api/user-data/models/user-data.settings.json` removing the `user` relation under `attributes`)\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new model in the admin UI\r\n2. Edit the `user` model to be related to the newly created model, also in the admin ui\r\n\r\n**Expected behavior**\r\n\r\nThe relation is created and works.\r\n\r\n**Screenshots**\r\n-\r\n\r\n**Code snippets**\r\nThe Terminal log:\r\n\r\n```\r\nStarting your app...\r\n[2019-12-31T07:12:30.491Z] error Something went wrong in the model `User-data` with the attribute `user`\r\n[2019-12-31T07:12:30.492Z] error TypeError: Cannot read property 'attributes' of undefined\r\n  at Object.getNature (/srv/app/node_modules/strapi-utils/lib/models.js:150:33)\r\n  at /srv/app/node_modules/strapi-connector-bookshelf/lib/mount-models.js:156:21\r\n  at Array.forEach (<anonymous>)\r\n  at /srv/app/node_modules/strapi-connector-bookshelf/lib/mount-models.js:149:40\r\n  at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n  at async Promise.all (index 2)\r\n  at async Promise.all (index 1)\r\n  at async Promise.all (index 0)\r\n  at async DatabaseManager.initialize (/srv/app/node_modules/strapi-database/lib/database-manager.js:39:7)\r\n  at async Strapi.load (/srv/app/node_modules/strapi/lib/Strapi.js:362:5)\r\n  at async Strapi.start (/srv/app/node_modules/strapi/lib/Strapi.js:196:7)\r\n```\r\n\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: mongoDB\r\n- Operating system: Ubuntu 18.04.3 LTS\r\n\r\n**Additional context**\r\n- Using strapi docker"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf you query a content type with a dynamic zone by graphql you are not able to receive the content of the components.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type\r\n2. Add a dynamic zone with minimum two components inside\r\n3. Query the content type by graphql\r\n\r\n**Expected behavior**\r\nReceive the components content.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/38924650/71546235-31c3c180-2995-11ea-9e07-75d109ac0c2d.png)\r\n\r\n**Code snippets**\r\nIf you query the content type by REST the component content is accessible:\r\n\r\n```\r\n[\r\n  {\r\n    \"id\":1,\r\n    \"title\":\"Hello World\",\r\n    \"created_at\":\"2019-12-28T16:05:25.987Z\",\r\n    \"updated_at\":\"2019-12-28T16:05:25.987Z\",\r\n    \"content\":[\r\n      {\r\n        \"__component\":\"content.text\",\r\n        \"id\":1,\r\n        \"content\":\"This is an example content entry. Its the first entry.\"\r\n      },\r\n      {\r\n        \"__component\":\"content.image\",\r\n        \"id\":1,\r\n        \"caption\":\"A simple caption.\",\r\n        \"image\":{\r\n          \"id\":1,\r\n          \"name\":\"c4935c879aef4c788fc744c5f05065b0.jpg\",\r\n          \"hash\":\"51e30fe22a42401c96c16a8de56379e5\",\r\n          \"sha256\":\"5zb6O1wyGreFnqW8KaV1bBuzOBO33aJfPKRbwtCGOc8\",\r\n          \"ext\":\".jpg\",\r\n          \"mime\":\"image/jpeg\",\r\n          \"size\":14573.84,\r\n          \"url\":\"/uploads/51e30fe22a42401c96c16a8de56379e5.jpg\",\r\n          \"provider\":\"local\",\r\n          \"provider_metadata\":null,\r\n          \"created_at\":\"2019-12-28T16:05:26.133Z\",\r\n          \"updated_at\":\"2019-12-28T16:05:26.133Z\"\r\n        }\r\n      },\r\n      {\r\n        \"__component\":\"content.text\",\r\n        \"id\":2,\r\n        \"content\":\"This is an example content entry. Its the second entry.\"\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: MongoDb\r\n- Operating system: Linux\r\n"},{"labels":[null,null,null,"bug"],"text":"\r\n**Describe the bug**\r\nIf I have a content type with many fields and want to add one of the fields to the list view under \"Configure The View->View\" the height of the dropdown menu behind the \"+\"-Button is calculated wrong.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type with more then 7 fields\r\n2. Add some content and go to the list view\r\n3. Press the gear button in the right corner and click \"Configure The View\"\r\n4. In the \"View\" section click the \"+\"-button and you cant see only 6 fields. If you check the open dropdown with the dev tools you will see that all fields are there but the CSS prevents the display of all of them\r\n\r\n**Expected behavior**\r\nYou can see all fields or overflow-y is set to scroll\r\n\r\n**Screenshots**\r\n***Current behavior***\r\n<img width=\"959\" alt=\"strapi_error\" src=\"https://user-images.githubusercontent.com/5557208/71533116-510c1180-28f7-11ea-82e6-38a61d282a25.png\">\r\n***Expected behavior***\r\n<img width=\"960\" alt=\"strapi_right\" src=\"https://user-images.githubusercontent.com/5557208/71533238-02ab4280-28f8-11ea-940e-e24e85cfa103.png\">\r\n\r\n**System**\r\n- Node.js version: 12.10.0\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: mongo db\r\n- Operating system: MacOS Catalina with Chrome 79.0.3945.88\r\n"},{"labels":[null,null,"bug"],"text":"Hi guys,\r\n\r\nI am pretty new to Strapi so please forgive me if I am wrong with sth.\r\n\r\nI tried to create some custom mutation, which seems to work but it is returning no values.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content type `idea`\r\n2. Within `idea/config` create `schema.graphql`\r\n3. Write custom mutation (see snippets below)\r\n4. Create custom resolver in `idea/controllers/idea.js`\r\n\r\n**Expected behavior**\r\nIn my example instead of null `title` should show `Test`.\r\n\r\n**Screenshots**\r\n<img width=\"910\" alt=\"Bildschirmfoto 2019-12-26 um 18 53 43\" src=\"https://user-images.githubusercontent.com/11420688/71485391-1c258f00-2811-11ea-9348-3172e7662c7d.png\">\r\n\r\n**Code snippets**\r\n\r\nSchema (`idea/config/schema.graphql`):\r\n```\r\nmodule.exports = {\r\n    definition: `\r\n        type IdeaPayload {\r\n            title: String\r\n        }\r\n    `,\r\n    mutation: `\r\n        updateIdeaState(input: JSON): IdeaPayload\r\n    `,\r\n    resolver: {\r\n        Mutation: {\r\n            updateIdeaState: {\r\n                resolver: 'Idea.updateIdeaState'\r\n            },\r\n        },\r\n    },\r\n};\r\n``` \r\n\r\nResolver function (`idea/controllers/idea.js`):\r\n```\r\nmodule.exports = {\r\n  async updateIdeaState(ctx) {\r\n    return { \r\n      title: 'Test'\r\n    };\r\n  }\r\n};\r\n```\r\n\r\n**System**\r\n- Node.js version: v12.14.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: SQLite\r\n- Operating system: MacOS Catalina"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nCurrently my component that I created with two \"media\" fields is sharing the same file upload. So when a file is removed from one of the media inputs, the other media input has its file removed. And vice versa for uploading. (Happens for both single and multi upload media fields)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to content type with component\r\n2. Upload a pdf in one of the media input fields\r\n3. Click Save\r\n4. Come back to component entry in content type to see both media input fields being filled\r\n\r\n**System**\r\n- Node.js version: v12.14.0\r\n- NPM version: 6.13.4\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: MongoDB\r\n- Operating system: Ubuntu 18.04\r\n\r\n**Additional context**\r\nOriginally built Strapi with beta 17.8. Afterwards I saw 18.3 fixed some issues we were having and so we made an upgrade. We followed the migration guide and everything worked well. First I created a component with only one media input field. And I made some uploads to them. However, I realized that I was missing another media input field afterwards. So I went back to the content type builder for the component and added another input field. After creating it, I noticed the new field was pre-populated with the file from the previous media input field. After experimenting around, I started facing the issues described above.\r\n"},{"labels":[null,null,null,"bug"],"text":"Hello!\r\nCan't do with mutations\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create any local or global controller for graphql mutation\r\n2. Create any local or global policy\r\n3. Describe the mutation in API schema and add the controller for it\r\n4. Run graphql query with this mutation and see at console that controller runs, even if our policy returning ctx.unauthorized.\r\n![image](https://user-images.githubusercontent.com/2592568/71415277-5c9bd600-2674-11ea-8cff-9eb7e9ceeaa0.png)\r\n\r\n\r\n**Expected behavior**\r\nController shouldn't run if policy gives unauthorized responce.\r\n\r\n**Code snippets**\r\n\r\nController (./api/secret/controllers/Secret.js)\r\n```javascript\r\nmodule.exports = {\r\n  someSecret: async ctx => {\r\n    console.log(\"In someSecret controller instead :-(\");    \r\n    return true;\r\n  }\r\n};\r\n```\r\n\r\nPolicy (./config/policies/isOwner.js)\r\n```javascript\r\nmodule.exports = async (ctx, next) => {\r\n  console.log(\"In isOwner policy\");\r\n  ctx.unauthorized(\"Not permitted\");\r\n  return await next();\r\n};\r\n```\r\nSchema (.\\api\\secret\\config\\schema.graphql)\r\n```javascript\r\nmodule.exports = {    \r\n  mutation: `\r\n    someSecret(id: ID): Boolean\r\n  `,\r\n  resolver: {\r\n    Mutation: {\r\n      someSecret: {\r\n        policies: ['global.isOwner'],\r\n        resolver: 'secret.someSecret'\r\n      },\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: v3.0.0-beta.17.8\r\n- Database: Mongo\r\n- Operating system: Win 10\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nMySQL by spec doesn't support wildcard prepend on `... MATCH ... AGAINST`. \r\n([Spec](https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html), [StackOverflow](https://stackoverflow.com/questions/16720443/prepending-an-asterisk-to-a-fulltext-search-in-mysql))\r\n\r\nStrapi prepends wildcard on every query:\r\nhttps://github.com/strapi/strapi/blob/8d0c6848ba421680570e974e5d8606314735de3e/packages/strapi-connector-bookshelf/lib/queries.js#L768-L773\r\n\r\nIn some implementations it works, but in some (e.g. Amazon Aurora based on MySql 5.6.10a) it return empty results for any search.\r\n\r\n**Steps to reproduce the behavior**\r\n- Use aurora database on amazon\r\n- Create entities \r\n- Search for entities in admin panel\r\n- No results will be shown\r\n\r\n**Expected behavior**\r\n- Show relevant entities\r\n\r\n**Code snippets**\r\n```sql\r\n#doesn't work:\r\nselect ... where MATCH(...) AGAINST('*a*' IN BOOLEAN MODE) limit 1\r\n#works:\r\nselect ... where MATCH(...) AGAINST('a*' IN BOOLEAN MODE) limit 1\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version:6.9.0\r\n- Strapi version: 3.0.0-beta.18.3\r\n- Database: Mysql Aurora (5.6.10a)\r\n- Operating system: Ubuntu 18.04.2 LTS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nStrapi fails to create `owner_components`-table if the `owner` content type ids are uuid.\r\n\r\nStrapi tries to create column `owner_id integer` and foreign key constraint `owner_id references owner (id)`. This cause error because integer and uuid are incompatible types.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create simple `owner` content type.\r\n2. Set `owner` `idAttributeType: uuid`\r\n3. Create simple `child` component type\r\n3. Add repeatable `child` component to `owner`\r\n4. Remove database tables and start Strapi\r\n5. See errors and wrong column types in `owner_components` table\r\n\r\n**Expected behavior**\r\nComponent table `owner_id` column type should be uuid instead integer.\r\n\r\n**Screenshots**\r\nThe database tables:\r\n\r\n![image](https://user-images.githubusercontent.com/15654964/71359096-e162f300-2593-11ea-9ddd-52da3ab6af91.png)\r\n\r\n\r\n**Code snippets**\r\nOwner content type model:\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"owner\",\r\n  \"info\": {\r\n    \"name\": \"Owner\"\r\n  },\r\n  \"options\": {\r\n    \"idAttributeType\": \"uuid\",\r\n    \"uuid\": true,\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"child\": {\r\n      \"type\": \"component\",\r\n      \"repeatable\": true,\r\n      \"component\": \"default.child\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nChild component:\r\n```\r\n{\r\n  \"info\": {\r\n    \"name\": \"Child\",\r\n    \"icon\": \"address-book\"\r\n  },\r\n  \"options\": {},\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    }\r\n  },\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"child\"\r\n}\r\n```\r\n**System**\r\n- Node.js version:  v12.13.1 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: v6.12.1\r\n- Strapi version: 3.0.0-beta.18 <!-- Please make sure you are on the latest version -->\r\n- Database: postgresql\r\n- Operating system: macOS Catalina"},{"labels":["bug"],"text":"**Describe the bug**\r\nI have updated Strapi to latest beta version (18.2 when writing this) and it fails on Windows 10 when creating a new API. After some tries I have scrolled back to 17.8 and it worked without problem. I tried doing npm install -g strapi@beta as unprivileged user and as root and executing strapi new api with cmd, Powershell and MinTTY but it always fails with \r\n`⛔️ Connection test failed: spawn npm; ENOENT`\r\n\r\nComplete log with --debug flag\r\n```\r\n⛔️ Connection test failed: spawn npm; ENOENT\r\n\r\nFull error log:\r\n{ Error: spawn npm; ENOENT\r\n    at notFoundError (C:\\Users\\alvaro\\AppData\\Roaming\\npm\\node_modules\\strapi\\node_modules\\cross-spawn\\lib\\enoent.js:6:26)\r\n    at verifyENOENT (C:\\Users\\alvaro\\AppData\\Roaming\\npm\\node_modules\\strapi\\node_modules\\cross-spawn\\lib\\enoent.js:40:16)\r\n    at ChildProcess.cp.emit (C:\\Users\\alvaro\\AppData\\Roaming\\npm\\node_modules\\strapi\\node_modules\\cross-spawn\\lib\\enoent.js:27:25)\r\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)\r\n  code: 'ENOENT',\r\n  errno: 'ENOENT',\r\n  syscall: 'spawn npm;',\r\n  path: 'npm;',\r\n  spawnargs:\r\n   [ 'install',\r\n     '--prefix',\r\n     'C:\\\\Users\\\\alvaro\\\\AppData\\\\Local\\\\Temp\\\\strapid6aeff1c94d1',\r\n     'strapi-connector-mongoose@3.0.0-beta.18.2' ],\r\n  stdout:\r\n   '\\nUsage: npm <command>\\n\\nwhere <command> is one of:\\n    access, adduser, audit, bin, bugs, c, cache, ci, cit,\\n    clean-install, clean-install-test, completion, config,\\n    create, ddp, dedupe, deprecate, dist-tag, docs, doctor,\\n    edit, explore, get, help, help-search, hook, i, init,\\n    install, install-ci-test, install-test, it, link, list, ln,\\n    login, logout, ls, org, outdated, owner, pack, ping, prefix,\\n    profile, prune, publish, rb, rebuild, repo, restart, root,\\n    run, run-script, s, se, search, set, shrinkwrap, star,\\n    stars, start, stop, t, team, test, token, tst, un,\\n    uninstall, unpublish, unstar, up, update, v, version, view,\\n    whoami\\n\\nnpm <command> -h  quick help on <command>\\nnpm -l            display full usage info\\nnpm help <term>   search for help \r\non <term>\\nnpm help npm      involved overview\\n\\nSpecify configs in the ini-formatted file:\\n    C:\\\\Users\\\\alvaro\\\\.npmrc\\nor on the command line via: npm <command> --key value\\nConfig info can be viewed via: npm help config\\n\\nnpm@6.7.0 C:\\\\Users\\\\alvaro\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\npm\\n\\n',\r\n  stderr: '',\r\n  failed: true,\r\n  signal: null,\r\n  cmd:\r\n   'npm; install --prefix C:\\\\Users\\\\alvaro\\\\AppData\\\\Local\\\\Temp\\\\strapid6aeff1c94d1 strapi-connector-mongoose@3.0.0-beta.18.2',\r\n  timedOut: false,\r\n  killed: false }\r\n```\r\n\r\nThe error raises when strapi installer tries to connect with mongo, but mongo is installed and working. And going back to 17.8 works as usual so this is not the problem.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Update Strapi to Beta 18.2 in Windows 10\r\n2. Try to create a new API with MongoDB and default settings\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.7.0\r\n- Strapi version: Beta 18.2\r\n- Database: MongoDB\r\n- Operating system: Windows 10"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe URL of the admin's profile is invalid and causes `KOA` to throw `500` on page refresh\r\n\r\n**Steps to reproduce the behavior**\r\n1. Login as admin (perhaps as any other user as well)\r\n2. Click on the User menu on the top right\r\n3. Click on the \"profile\" menu option\r\n4. The URL should now be `/admin/plugins/content-manager/strapi::administrator/1?redirectUrl=/plugins/content-manager/strapi::administrator/?_page=0&_limit=0&_sort=id`\r\n5. Refresh the page using the browser's refresh button\r\n6. Page shows `{\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"An internal server error occurred\"}`\r\n7. Error Log shows `error AssertionError [ERR_ASSERTION]: pathname required\r\n    at send (/node_modules/koa-send/index.js:39:3)`\r\n\r\n**Expected behavior**\r\nThe page appears exactly as before the page refresh\r\n\r\n**Screenshots**\r\nShouldn't be needed\r\n\r\n**Code snippets**\r\nShouldn't be needed\r\n\r\n**System**\r\n- Node.js version: v12.13.1\r\n- NPM version:6.12.1\r\n- Strapi version: v3.0.0-beta.18.2\r\n- Database: postgreSQL\r\n- Operating system: Fedora 31 (workstation)\r\n\r\n**Additional context**\r\nI think having two `?` in the URL is what is causing the problem because KOA request expects only one\r\nhttps://github.com/koajs/koa/blob/master/docs/api/request.md\r\nreplacing the second `?` with `&` fixes the issue, like so\r\n`/admin/plugins/content-manager/strapi::administrator/1?redirectUrl=/plugins/content-manager/strapi::administrator/&_page=0&_limit=0&_sort=id`\r\nor encoding it `%3F`...\r\n\r\nAnd to be honest, I am not even sure why that `redirectUrl` param is even there.\r\nWhen I go to other menus like \"Manage the Administrators\" the URL is like so `/admin/plugins/content-manager/strapi::administrator` without that parameter...\r\n\r\n(In both cases, I am logged in...)"},{"labels":["bug"],"text":"\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nWhen I attempt to  do a REST PUT request to a content type that has a repeatable group. The PUT request fails and generated an error when I include \"id\" or \"_id\" in the request.\r\n\r\n{\r\n    \"statusCode\": 400,\r\n    \"error\": \"Bad Request\",\r\n    \"message\": \"Some of the provided groups in files are not related to the entity\"\r\n}\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nAn example here is a repeatable group called files. \r\n\r\n\"files\": [\r\n            {\r\n               \"_id\": \"5ddba9e520e078157db72b59\",\r\n               \"filename\": myfile.txt\",\r\n                \"status\": \"To Check\",\r\n                \"edited\": \"2019-11-25T10:15:55.190Z\",\r\n                \"fliesize\": 9882836\r\n            }\r\n        ], \r\n\r\nIf I attempt to put this to content type the request fails.\r\n\r\nIf I remove \"_id\" the PUT request works.\r\n\r\n\"files\": [\r\n            {\r\n               \"filename\": myfile.txt\",\r\n                \"status\": \"To Check\",\r\n                \"edited\": \"2019-11-25T10:15:55.190Z\",\r\n                \"fliesize\": 9882836\r\n            }\r\n        ], \r\n\r\n**Expected behavior**\r\n\r\nI should be able to make a put request and update a group in a content type with the original  \"_id\"\r\n\r\n**Screenshots**\r\nNA\r\n\r\n**Code snippets**\r\nSee above\r\n\r\n**System**\r\n- Node.js version: <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 12\r\n- Strapi version: V3.0.0-beta.17.8\r\n- Database: Mongodb\r\n- Operating system: Ubuntu\r\n\r\n**Additional context**\r\nNA\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nI have a blogpost model, as well as a category model. Each post can have multiple categories. So I want to only display posts which have, let's say, the categories 1 and 5. But instead, it returns me all posts which have either of them (not necessarily both). I think this is the expected behavior of _in but not \"exact\".\r\n\r\n**Steps to reproduce the behavior**\r\nThis is the query I am using:\r\n```\r\nblogposts(where: { categories: { id: [1, 5] } }) {\r\n...\r\n}\r\n```\r\nIt behaves the same as:\r\n```\r\nblogposts(where: { categories: { id_in: [1, 5] } }) {\r\n...\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nOnly blogposts which have both categories (1 and 5) will be returned.\r\n\r\n**Screenshots**\r\n![Screenshot_2019-12-08 Playground - http localhost 1337 graphql](https://user-images.githubusercontent.com/18631757/70396862-16583d00-1a0d-11ea-8266-dc26a071bbcd.png)\r\nAs you can clearly see, the value\r\n\r\n**System**\r\n- Node.js version: 10.15.3\r\n- Strapi version: Should be latest\r\n- Database: SQLite (standard installation, I didn't change anything)\r\n- Operating system: Windows 10\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nOn a brand new project, scaffolding API breaks the project with error:\r\n\r\n>npm run develop\r\n>[2019-12-06T10:23:27.143Z] debug ⛔️ Server wasn't able to start properly.\r\n>[2019-12-06T10:23:27.144Z] error TypeError: Cannot read property 'bind' of undefined\r\n\r\n**Steps to reproduce the behavior**\r\n1. On the command line: `strapi generate:api auth`\r\n\r\n**Expected behavior**\r\nRoutes, controllers...etc are generated but\r\nI expect the server to run and my new API to be functional.\r\n\r\n**Screenshots**\r\nnot applicable\r\n\r\n**Code snippets**\r\nnot applicable\r\n\r\n**System**\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: 3.0.0-beta.17.8\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nReference from https://github.com/strapi/strapi/issues/4280#issuecomment-561102731\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nCheck this queries. Whitespace issue?\r\n\r\n<img width=\"1215\" alt=\"Screenshot 2019-12-03 at 11 24 52\" src=\"https://user-images.githubusercontent.com/1007051/70042759-bb16ec80-15bf-11ea-8add-284442923e46.png\">\r\n<img width=\"1215\" alt=\"Screenshot 2019-12-03 at 11 26 50\" src=\"https://user-images.githubusercontent.com/1007051/70042820-d5e96100-15bf-11ea-92fd-f6893eed33e6.png\">\r\n<img width=\"1215\" alt=\"Screenshot 2019-12-03 at 11 25 29\" src=\"https://user-images.githubusercontent.com/1007051/70042761-bbaf8300-15bf-11ea-8f15-8e26153b3f1b.png\">\r\n\r\n**System**\r\n- Node.js version: `v10`\r\n- NPM version: `v6`\r\n- Strapi version: `v3.0.0-beta.17.8`\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI have 2 content types: Firefighter & Case. I designed them in order to have a relation between them (One-to-One). My Case has 3 Group (BPM, Gyroscope, Accelerometer). When I call the Case endpoint I get everything (Field + Group) as following :\r\n```\r\n#GET /cases\r\n[\r\n    {\r\n        \"id\": 1,\r\n        \"serial\": \"YD8Y-JX74-ES8R-BGOC\",\r\n        \"firefighter\": {\r\n            \"id\": 1,\r\n            \"serial\": \"S3GN75HLSF\",\r\n            \"created_at\": \"2019-11-28T04:21:40.716Z\",\r\n            \"updated_at\": \"2019-11-28T05:01:30.805Z\",\r\n            \"case\": 1\r\n        },\r\n        \"created_at\": \"2019-11-28T04:43:43.140Z\",\r\n        \"updated_at\": \"2019-11-28T05:01:30.806Z\",\r\n        \"BPM\": {\r\n            \"id\": 1,\r\n            \"value\": 75,\r\n            \"alert\": false\r\n        },\r\n        \"Gyroscope\": {\r\n            \"id\": 1,\r\n            \"x\": 0,\r\n            \"y\": 0,\r\n            \"z\": 0,\r\n            \"alert\": false\r\n        },\r\n        \"Accelerometer\": {\r\n            \"id\": 2,\r\n            \"x\": 0,\r\n            \"y\": 0,\r\n            \"z\": 0,\r\n            \"alert\": false\r\n        },\r\n        \"GPS\": {\r\n            \"id\": 1,\r\n            \"longitude\": 5.3676044,\r\n            \"latitude\": 43.3102998\r\n        }\r\n    }\r\n]\r\n```\r\nBut when I call the Firefighter endpoint the case object doesn't contain it group and it's very problematic because for my dashboard I must call the firefighter instead of the case.\r\n```\r\n#GET /firefighters\r\n[\r\n    {\r\n        \"id\": 1,\r\n        \"serial\": \"S3GN75HLSF\",\r\n        \"created_at\": \"2019-11-28T04:21:40.716Z\",\r\n        \"updated_at\": \"2019-11-28T05:01:30.805Z\",\r\n        \"case\": {\r\n            \"id\": 1,\r\n            \"serial\": \"YD8Y-JX74-ES8R-BGOC\",\r\n            \"firefighter\": 1,\r\n            \"created_at\": \"2019-11-28T04:43:43.140Z\",\r\n            \"updated_at\": \"2019-11-28T05:01:30.806Z\"\r\n        }\r\n    }\r\n]\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'Content Type builder'\r\n2. Create 2 Content Type. One with 3 Group (BPM, Gyroscope, Accelerometer).\r\n3. Set a OneToOne relation between the 2 Content Type\r\n4. Then try to get the content type that has no Group. You'll see that you can't see the Group populate in the relation content type.\r\n\r\n**Expected behavior**\r\nHaving all Group populate through relation search.\r\n\r\n**System**\r\n- Node.js version: 12.13.1\r\n- NPM version: 6.12.1\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: PostgreSQL\r\n- Operating system: Unix"},{"labels":[null,null,null,null,"bug"],"text":"As title, when using the graphql plugin and marking a relation field as private, the server does not start with this error:\r\n\r\n```\r\n2019-12-04T16:08:46.404Z] error TypeError: Cannot read property 'replace' of undefined\r\n    at isPrimitiveType (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:23:22)\r\n    at extractType (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:145:10)\r\n    at C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:282:21\r\n    at C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:74:26\r\n    at C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:914:11\r\n    at C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:4905:15\r\n    at baseForOwn (C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:2990:24)\r\n    at C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:4874:18\r\n    at baseReduce (C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:911:5)\r\n    at Function.reduce (C:\\tests\\strapi-final-test\\node_modules\\lodash\\lodash.js:9681:14)\r\n    at getFieldsByTypes (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:70:12)\r\n    at generateConnectionFieldsTypes (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:279:27)\r\n    at formatConnectionGroupBy (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:316:19)\r\n    at Object.formatModelConnectionsGQL (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Aggregator.js:486:25)\r\n    at C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Resolvers.js:483:42\r\n    at Array.reduce (<anonymous>)\r\n    at Object.buildShadowCRUD (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Resolvers.js:281:30)\r\n    at Object.generateSchema (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\services\\Schema.js:137:36)\r\n    at Object.initialize (C:\\tests\\strapi-final-test\\node_modules\\strapi-plugin-graphql\\hooks\\graphql\\index.js:59:50)\r\n    at C:\\tests\\strapi-final-test\\node_modules\\strapi\\lib\\hooks\\index.js:43:28\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n```\r\n\r\n**System**\r\n- Node.js version: 12.13.0\r\n- Strapi version: 3.0.0-beta.17.8\r\n- Database: mongodb\r\n- Operating system: windowds 10 x64"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI need to add `autoPopulate: false` to relational fields (one-to-many), and later get the data.\r\nE.g. Project has many Reports, when I add `\"autoPopulate\": false` to `reports`, then the whole reports field won't return. I hope to know the ids for further use.\r\n```\r\n\"reports\": {\r\n      \"collection\": \"report\",\r\n      \"via\": \"project\",\r\n      \"autoPopulate\": false\r\n    },\r\n```\r\nIn N-1 relation, if set `autoPopulate: false`, it will return the id, e.g. `project: 1`.\r\nThis problem occurs when the field is 1-N and N-N relations. The field won't return.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to a one-to-many relational fields, e.g. Project has many reports\r\n2. Add `autoPopulation: false` to reports field\r\n3. GET /projects/1\r\n4. The report field doesn't return.\r\n\r\n**Expected behavior**\r\nI think it should behave the same, return `reports: [1, 2, 3]` or `reports: [{id: 1}, {id: 2}, {id: 3}]`\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"projects\",\r\n  \"info\": {\r\n    \"name\": \"project\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"unique\": true,\r\n      \"required\": true,\r\n      \"type\": \"string\"\r\n    },\r\n    \"reports\": {\r\n      \"collection\": \"report\",\r\n      \"via\": \"project\"\r\n    },\r\n    \"comments\": {\r\n      \"collection\": \"comment\",\r\n      \"via\": \"project\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n**System**\r\n- Node.js version: 10.16.1\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.17.6\r\n- Database: SQLite\r\n- Operating system: Windows\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nMy company firewall blocked all the external connection,\r\nso `/users-permissions/roles/{{:id}}` unable to use.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Set firewall to block external connection \r\n2. Open `/users-permissions/roles/2`\r\n3. You will be waiting and waiting forever.\r\n\r\n**Expected behavior**\r\nusers-permissions should working under firewall.\r\n\r\n**Screenshots**\r\n\r\n\r\n**Code snippets**\r\n```javascript\r\n// path: /strapi-plugin-users-permissions/services/UsersPermissions.js\r\n// line: 103\r\n\r\n  getPlugins(plugin, lang = 'en') {\r\n    return new Promise(resolve => {\r\n      request(\r\n        {\r\n          uri: `https://marketplace.strapi.io/plugins?lang=${lang}`,\r\n          json: true,\r\n          headers: {\r\n            'cache-control': 'max-age=3600',\r\n          },\r\n        },\r\n        (err, response, body) => {\r\n          if (err || response.statusCode !== 200) {\r\n            return resolve([]);\r\n          }\r\n\r\n          resolve(body);\r\n        }\r\n      );\r\n    });\r\n  },\r\n\r\n```\r\n\r\n**System**\r\n- Node.js version: 10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.17.6\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nGraphQL connection queries ignores Public Role permissions and don't return forbidden\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a Model\r\n2. Add some entries\r\n3. Remove all permissions for Public role\r\n4. Perform a GraphQL connection query ie.\r\n![image](https://user-images.githubusercontent.com/19965325/69672648-89090600-1066-11ea-8ff3-77361de80aa4.png)\r\n\r\n**Expected behavior**\r\nIt returns the results without being authenticated, as it is shown here \r\n![image](https://user-images.githubusercontent.com/19965325/69672695-a1792080-1066-11ea-8144-87ed6e18dae8.png)\r\n\r\n**System**\r\n- Node.js version: v12.11.1\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: MongoDB\r\n- Operating system: Mac OS Mojave\r\n\r\n**Additional context**\r\nI don't know If this is a bug, or I'm doing something wrong and I need to set permissions for connection graphql queries in a different place than /admin/plugins/users-permissions/roles\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI have a content type, which has a upload field with many files\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to edit a given content type which has 7 files attached\r\n2. You see 1/7 but cant identify their names (for example, to delete some of them)\r\n\r\n**Expected behavior**\r\nClearly see the file name\r\n\r\n**Screenshots**\r\n\r\n<img width=\"439\" alt=\"Captura de Pantalla 2019-11-25 a la(s) 10 14 37\" src=\"https://user-images.githubusercontent.com/517228/69545764-2c77ef00-0f71-11ea-8d37-4a35331463ef.png\">\r\n\r\n\r\n**System**\r\n- Node.js version: v13.1.0\r\n- NPM version: v6.12.1\r\n- Strapi version: v3.0.0-beta.17.5\r\n- Database: mongodb\r\n- Operating system: macOS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\ni have a model `posts` that have a group `comments`,\r\n when creating the first comment it works fine, but adding new comments gives me this : \r\n`Error: Some of the provided groups in comments are not related to the entity`\r\nusing sqlite works, the problem is when using mongodb\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a repeatable field and add it to a content type\r\n2. in the content type controller add code to insert the new entries to the group\r\n\r\n\r\n\r\n\r\n\r\n\r\n**Code snippets**\r\n```javascript\r\n    const entity = await strapi.services.posts.findOne({ id: formData.id });\r\n...\r\n    let newComment = [\r\n      ...entity.comments,\r\n      {\r\n        user: user,\r\n        content: formData.comment\r\n      }\r\n    ];\r\n\r\n...\r\nstrapi.services.posts.update({ id: formData.id },{comments : newComment});\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.15.2\r\n- NPM version: 6.4.1\r\n- Strapi version: beta 17.4\r\n- Database: mongo:latest\r\n- Operating system: macos\r\n\r\n**Update**\r\ni was able to add entries to a group by remapping previous ones ( removing the field _id )\r\n```javascript\r\n     let newComment = [\r\n      ...entity.comments.map(com => {\r\n        delete com._id;\r\n        return com;\r\n      }),\r\n      {\r\n        user: user.id,\r\n        content: formData.comment\r\n      }\r\n    ];\r\n```\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nusing api filter gives an error :\r\n`Your filters contain a field 'id' that doesn't appear on your model definition nor it's relations`\r\nfo instance something like this url (replacing `id`by `_id` works fine  : \r\n - `https://strapiexample.foo/foos?state=active&id=dd664b531e57c0006ea9972`\r\n\r\nor via the admin dashboard when using filters :\r\n - id [is] dd664b531e57c0006ea9972\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a fresh installation with mongodb as database\r\n2. create some content type\r\n3. add some data to the content type\r\n4. try using the filter on the dashboard, or give `find` permission to the public user and try the api filter\r\n\r\n\r\n**System**\r\n- Node.js version: node:10.13.0-alpine\r\n- NPM version: node:10.13.0-alpine\r\n- Strapi version: 17.4\r\n- Database: mongo:latest\r\n- Operating system: docker (gcp VM)\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nIn Auth module `register` lowercasing email, but `forgotPassword` is not.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Register as user@email.com\r\n2. Send forgot password for User@email.com\r\n3. Get an error `Auth.form.error.user.not-exist`\r\n\r\n**Expected behavior**\r\nEmail should be send to user@email.com\r\n\r\n\r\n**Code snippets**\r\nhttps://github.com/strapi/strapi/blob/1162698778aa721522081f4f4e70ecb30521f83e/packages/strapi-plugin-users-permissions/controllers/Auth.js#L274-L286\r\n\r\n**System**\r\n- Strapi version: 3.0.0-beta.11\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nUsing graphql, when querying a relationship + a group field inside the relationship the group field returns null.\r\n\r\nFor example...\r\n\r\n```\r\nquery group_fields_in_relationship {\r\n  parent(where: { some_prop: \"some_value\" }) {\r\n    id\r\n    related_content_type {\r\n      group_field {\r\n        title\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n`parent.related_content_type.group_field` will be `null`\r\n\r\nBut, if I query the `related_content_type` directly the `group_field` returns correctly.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a group field and add it to a content type\r\n2. Relate the content type with a group field in it to another content type\r\n3. Try to query the group field through the content type relationship\r\n4. See the group fielod in the query return `null`\r\n\r\n**Expected behavior**\r\nThe group field to return what it contains\r\n\r\n**System**\r\n- Node.js version: 12.6.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: postgres\r\n- Operating system: macOS mojave\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nCreating a content type called \"Number\" overwrites the JavaScript Number global class causing server to crash with \"TypeError: Number.isSafeInteger is not a function\".\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new installation (I'm using PostgreSQL, but I'm not sure if this is relevant to the issue).\r\n2. Create your Admin account\r\n3. Create a new Content Type called \"Number\"\r\n4. Save it\r\n\r\n**Expected behavior**\r\nContent type names should either prohibit safe words like Number or Object -- or they should not overwrite the default JavaScript global classes.\r\n\r\n**Screenshots**\r\n```\r\n$ npm run develop\r\n\r\n> personal-strapi@0.1.0 develop /home/xxxxxxxx/strapi-application\r\n> strapi develop\r\n\r\ninternal/async_hooks.js:118\r\n  if (!Number.isSafeInteger(asyncId) || asyncId < -1) {\r\n              ^\r\n\r\nTypeError: Number.isSafeInteger is not a function\r\n    at validateAsyncId (internal/async_hooks.js:118:15)\r\n    at emitBeforeScript (internal/async_hooks.js:349:3)\r\n    at processTicksAndRejections (internal/process/task_queues.js:70:7)\r\n```\r\n\r\n**System**\r\n- Node.js versions: v10.17.0 and v12.13.1\r\n- NPM version: v6.11.3 and v6.12.1\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: PostgreSQL 11 (GCP)\r\n- Operating system: Ubuntu 19.04 (disco) - Pop!_OS 19.04\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThis is very inconsistent to reproduce but the most likely scenario is to go to a model that has relationships.  Go to the relationship and attempt to edit it.  Eventually, the `SAVE` button will never show and is the `...` loading indicator.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to a model with relationships.\r\n2. Click on the relationship to edit.\r\n3. See error\r\n\r\n**Expected behavior**\r\nThe `Save` button show show up and honestly, probably should not make content editable until that point.  Otherwise, users will enter data and all of a sudden lose every change because the `Save` button is not enabled.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/44671008/69098579-7cf5c680-0a1e-11ea-86a3-f5e652c93a6a.png)\r\n\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.17.5\r\n- Database: MongoDB\r\n- Operating system: Linux AMI\r\n\r\n\r\n**Other**\r\nOnly thing I can see from console/network when getting this error is this:\r\n`Refused to load the image 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' because it violates the following Content Security Policy directive: \"img-src 'self' http:\".`"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf I try to name a content type \"function,\" along with the AWS provider plugin, the build process will fail.\r\n\r\nThe error in the console is:\r\n```\r\n[2019-11-15T17:46:57.644Z] error Bootstrap function in plugin \"upload\" failed\r\n[2019-11-15T17:46:57.645Z] error TypeError: this._reset is not a function\r\n```\r\n**Steps to reproduce the behavior**\r\n1. Create an application with a MySQL DB\r\n2. Install strapi-provider-upload-aws-s3\r\n3. Create a content type named \"function\"\r\n4. Application restart/build will fail.\r\n\r\n**Expected behavior**\r\nObviously, the application should not fail.\r\n\r\n**System**\r\n- Node.js version: 10\r\n- NPM version: 6.9\r\n- Strapi version: Beta 17.5\r\n- Database: MySQL 8\r\n- Operating system: CentOS in Docker\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nEmail templates can be managed directly in Mailgun. But the related Strapi provider doesn't support them.\r\nMoreover, according to the examples provided by Mailgun, the `text` and `html` properties should not be sent, but if you do so, the following error is returned by the Mailgun API because the `template` property is not sent:\r\n```\r\nError: Need at least one of 'text' or 'html' parameters specified\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. install and setup the strapi-provider-email-mailgun\r\n2. try to send an email with a `template` but without a `text` or `html` property\r\n\r\n**Expected behavior**\r\nThe email should be sent using the right Mailgun template.\r\n\r\n**Screenshots**\r\n\r\n**Code snippets**\r\nHere's an example of a code that should work properly.\r\n```\r\n      const data = {\r\n        to: 'foo@bar.com',\r\n        from: 'bar@foo.com',\r\n        subject: `Some subject`,\r\n        template: 'my-template',\r\n        'h:X-Mailgun-Variables': JSON.stringify({ param: 'value' })\r\n      };\r\n\r\n      await strapi.plugins['email'].services.email.send(data);\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: PostgreSQL 11.4\r\n- Operating system: MacOS 10.13.6\r\n\r\n**Additional context**\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nUsing npx create-strapi-app, I generated manually a project linked to a local mongo database.\r\nWhile doing so I typed to quickly and set ssl to true (instead of false, since I'm running locally). \r\nThe second attempt (with ssl: false) was successfully able to connect to the db so my project generation ended up properly.\r\n\r\nThe issue is that when I used to start the development server (`npm run develop`) it could not start because unable to reach the database.\r\n\r\nI noticed that my development `database.js` was like\r\n```js\r\n{\r\n  \"defaultConnection\": \"default\",\r\n  \"connections\": {\r\n    \"default\": {\r\n      \"connector\": \"strapi-hook-mongoose\",\r\n      \"settings\": {\r\n        \"database\": \"test_strapi\",\r\n        \"host\": \"127.0.0.1\",\r\n        \"srv\": false,\r\n        \"port\": 27017,\r\n        \"username\": \"\",\r\n        \"password\": \"\"\r\n      },\r\n      \"options\": {\r\n        \"authenticationDatabase\": \"admin\",\r\n        \"ssl\": true\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nIt looks like the first attempt's settings were kept to generate this file.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. npx create-strapi-app my-app\r\n2. Follow the steps and choose mongo as database\r\n3. Set your local db params and choose ssl=true \r\n4. It will fail and prompt params again\r\n5. Re enter the same settings but using ssl=false instead\r\n6. Wait generation to finish\r\n7. Open config/environments/development/database.js\r\n\r\n> You will notice that ssl is set to true\r\n\r\n**Expected behavior**\r\nI expected the generated file to match my latest attempt\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Code snippets**\r\nN/A\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: mongo\r\n- Operating system: ubuntu 18.04\r\n\r\n**Additional context**\r\nN/A\r\n\r\n\r\n\r\nThis is not a critical bug but I spent time figuring out how to resolve it so it may discourage new users !\r\nBTW thanks for this awesome tool, I especially enjoy the relation creation tool which is definitely a time saver for models definition !\r\n"},{"labels":[null,null,null,"bug"],"text":"Hello,\r\nI think i found some bug in deep filtering data with relations. \r\n\r\nI have freshly installed new version of strapi cms on my computer and i create two new Content Types in it. In that case it will be Restaurants (width field name and description) and Tags (with field name). And now in Restaurants i create relations with Tags just like on image below\r\n![relations](https://user-images.githubusercontent.com/1165339/68512140-d0765080-0277-11ea-9022-6e1de05f148f.png)\r\n\r\nI put some random data and when i go to `/restaurants` endpoint i see something like this:\r\n![relations_example](https://user-images.githubusercontent.com/1165339/68512454-bab55b00-0278-11ea-9ecd-d30ad90b47b4.png)\r\n\r\nEverything looks god until i try to filter restaurants by tag name and go to `/restaurants?tags.name=food`. Filtering data resturn a `500 internal server error` and in console i have:\r\n![relations_console](https://user-images.githubusercontent.com/1165339/68512707-6d85b900-0279-11ea-9e48-84c6c31fdf52.png)\r\n\r\nWhen i try change relations type to other everyting is fine, but with that last one i have always same error. Is it a bug? or it is my mistake?\r\n\r\n**System**\r\n- Node.js version: 12.13.0\r\n- NPM version: 6.12.0\r\n- Strapi version: Strapi v3.0.0-beta.17.5\r\n- Database: SQLite\r\n- Operating system: Windows 10 / Ubuntu Digital Ocean\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI have a model which name is `sku`. So the collection name and associated DB table are pluralized as `skus`.\r\n[The `pluralize.singular('skus')` function returns `skus`, and this what is used when the column referencing the primary key of the `skus` table is created in the join table between the `skus` table and the group tables.](https://github.com/strapi/strapi/blob/master/packages/strapi-hook-bookshelf/lib/generate-group-relations.js#L51)\r\nThe problem is that when browsing in the administration to list existing entries, I have the following error : `Unhandled rejection error: column skus_groups.sku_id does not exist`.\r\n\r\nMy guess is that we don't use the `pluralize` lib for queries, but after searching for a while, I can't find where the `skus_groups.sku_id` field name is generated for the query.\r\n\r\n**I would like to highlight on the fact that I can't reproduce the issue on any other acronym than \"sku\".** [I think there's a bug in the `pluralize` lib.](https://github.com/blakeembrey/pluralize/issues/137)\r\nBut still, I think that we should always rely on the `pluralize` lib everywhere.\r\nWhat do you think?\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a model with \"sku\" as name\r\n2. create a group and add it to the model\r\n3. try to create a new entry on the model\r\n4. the page should not load and you should have an error in the logs\r\n\r\n**Expected behavior**\r\nWe should be able to add a group on a model which has an acronym for name.\r\n\r\n**Screenshots**\r\n\r\n**Code snippets**\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: PostgreSQL 11.4\r\n- Operating system: MacOS 10.13.6\r\n\r\n**Additional context**\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIn the Search bar on the Strapi Admin interface, search does not filter items correctly\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type, Category\r\n2. Create a field, category_name, with a type of string\r\n3. Create two categories based on the Category content type, one called 'Appliances' and one called 'Electric'\r\n4. In the search bar on the top of the strapi admin interface, type 'Electric' - you could put anything and it still doesn't filter\r\n5. Notice that both 'Appliances' and 'Electric' are shown still\r\n\r\n**Expected behavior**\r\nSearch should filter the results correctly\r\n\r\n**Screenshots**\r\n<img width=\"723\" alt=\"Screen Shot 2019-11-07 at 7 53 58 PM\" src=\"https://user-images.githubusercontent.com/6739329/68440278-80748c80-0198-11ea-871b-a068963d322b.png\">\r\n\r\n**System**\r\n- Node.js version: 11.3.0\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database: sqlite\r\n- Operating system: High Sierra\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nGraphQL server breaks if you create a content type with name `map`. This will prevent any query sent to the server and return below error.\r\n```json\r\n{\r\n  \"error\": {\r\n    \"errors\": [\r\n      {\r\n        \"message\": \"Cannot read property 'maxAge' of undefined\",\r\n        \"extensions\": {\r\n          \"code\": \"INTERNAL_SERVER_ERROR\",\r\n          \"exception\": {\r\n            \"stacktrace\": [\r\n              \"TypeError: Cannot read property 'maxAge' of undefined\",\r\n              \"    at CacheControlExtension.computeOverallCachePolicy (/Users/ollebroms/Documents/my-project/node_modules/apollo-cache-control/dist/index.js:85:22)\",\r\n              \"    at Object.<anonymous> (/Users/ollebroms/Documents/my-project/node_modules/apollo-server-core/dist/requestPipeline.js:174:79)\",\r\n              \"    at Generator.next (<anonymous>)\",\r\n              \"    at fulfilled (/Users/ollebroms/Documents/my-project/node_modules/apollo-server-core/dist/requestPipeline.js:5:58)\"\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install a clean install of Strapi\r\n2. Create content type and name it `map`. Create a string field and name it `title`.\r\n3. Install official strapi Graphql plugin.\r\n4. Run any graphql query to replicate error in the Graphql playground.\r\n\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10.16.2\r\n- NPM version:\r\n- Strapi version: 3.0.0-beta.17.5\r\n- Database:\r\n- Operating system:\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nRenaming a Content Type that has media uploads loses the media associated with it\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'Content Type Builder'\r\n2. Rename a Content Type with Media\r\n3. View the Content entries\r\n\r\n**Expected behavior**\r\nThe upload_file.related.kind in the database should be updated when a content type is renamed.\r\nIf I change it manually in the database everything works again.\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- Strapi version: v3.0.0-beta.17.4\r\n- Database: Mongodb 4.2.1\r\n--\r\n\r\n\r\n\r\n- Operating system:\r\nLinux Docker Host\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThis took me a while to find out:\r\nQuerying for data in a many-to-many relation returns no data if related model includes a column named 'length' **and** contains data (not null).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to admin area to menu 'Content Type Builder' and add a random Content Type with a Number field named 'length'. E.g. Movie with String field 'name' and Number field 'length. Also add a relation field with a random other Content Type, e.g. User. Make sure you pick a 'has and belongs to many' relation.\r\n2. Go to Content Type 'Movies' and add data entries, make sure that length field contains data.\r\n3. Go to Content Type 'Users' and add or edit an entry and add some Movie items from Movies dropdown on the right side and save.\r\n4. Reopen currenty added/edited entry. No relations with Movies are shown. Try to query the relation data through REST or GraphQL, also no results, even though Database contains data correctly.\r\n\r\n**Expected behavior**\r\nRelation Data should be queried/shown correctly in the described scenario. \r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- Yarn version: 1.19.0\r\n- Strapi version: beta17.4\r\n- Database: mysql (MariaDB)\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nStrapi allows to register user with invalid email. Behavior depends on `email confirmation` config:\r\n- **Case 1:** When `email confirmation` is disabled Strapi creates user with invalid email and `auth/local/register` returns `200`. \r\n- **Case 2:** When `email confirmation` is enabled user with an invalid email is saved to the database, but the error occurs when trying to send a confirmation email(Nodemailer in my case) and `auth/local/register` returns `400` with body:\r\n```\r\n{\r\n  \"statusCode\": 400,\r\n  \"error\": \"Bad Request\",\r\n  \"message\": {\r\n    \"code\": \"EENVELOPE\",\r\n    \"command\": \"API\"\r\n  }\r\n}\r\n``` \r\n\r\n**Steps to reproduce the behavior**\r\n- **Case 1:**:\r\n1. Send request to `auth/local/register` with example payload:\r\n```\r\n{\r\n  \"username\": \"exampleUserName\",\r\n  \"email\": \"invalidUserEmail\",\r\n  \"password\": \"examplePassword\"\r\n}\r\n```\r\n2. Respnse code `200` and invalid email in response `\"email\": \"invalidUserEmail\"`\r\n\r\n- **Case 2:**:\r\n1. Enable `email confirmation` in `Roles & Permissions` -> `Advenced Settings`\r\n2. Send request to `auth/local/register` with example payload:\r\n```\r\n{\r\n  \"username\": \"exampleUserName\",\r\n  \"email\": \"invalidUserEmail\",\r\n  \"password\": \"examplePassword\"\r\n}\r\n```\r\n3. Respnse code `400` with body:\r\n```\r\n{\r\n  \"statusCode\": 400,\r\n  \"error\": \"Bad Request\",\r\n  \"message\": {\r\n    \"code\": \"EENVELOPE\",\r\n    \"command\": \"API\"\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nThere should be bad request response with error when email given during user registration not match regex(`emailRegExp`) defined in `strapi-plugin-users-permissions/controllers/Auth.js`\r\n\r\n**Code snippets**\r\nFor example it could be handle in `else` clausal in `strapi-plugin-users-permissions/controllers/Auth.js`:\r\n```\r\nif (isEmail) {\r\n    params.email = params.email.toLowerCase();\r\n} else {\r\n    return ctx.badRequest(\r\n        null,\r\n        formatError({\r\n            id: 'Auth.form.error.email.invalid',\r\n            message: 'Email invalid.',\r\n        })\r\n    );\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v12.13.0\r\n- NPM version: 6.12.0\r\n- Strapi version: 3.0.0-beta.17.4\r\n- Database: postgres:12\r\n- Operating system: Ubuntu Linux with dockerized Strapi\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nQueried nested objects still returning null with GraphQL. With REST it's working fine.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Query items with nested objects\r\n\r\nData that is returned from the service `find` function:\r\n```\r\n[{\r\n\t\"_id\": \"5d0115b57ef653a4e9759b5f\",\r\n\t\"name\": \"Europa\",\r\n\t\"type\": \"continent\",\r\n\t\"description\": \"Europa\",\r\n\t\"id\": \"5d0115b57ef653a4e9759b5f\",\r\n\t\"children\": [{\r\n\t\t\"_id\": \"5cf8d0e15b084a7ab560746c\",\r\n\t\t\"name\": \"Spanje\",\r\n\t\t\"description\": \"\",\r\n\t\t\"id\": \"5cf8d0e15b084a7ab560746c\",\r\n\t\t\"parent\": \"5d0115b57ef653a4e9759b5f\",\r\n\t\t\"type\": \"country\",\r\n\t\t\"blogDetails\": {\r\n\t\t\t\"count\": 1\r\n\t\t}\r\n\t}],\r\n\t\"blogDetails\": {\r\n\t\t\"count\": 0\r\n\t}\r\n}]\r\n```\r\n\r\nData returned by GraphQL:\r\n```\r\n{\r\n  \"data\": {\r\n    \"destinations\": [\r\n      {\r\n        \"name\": \"Europa\",\r\n        \"blogDetails\": {\r\n          \"count\": 0\r\n        },\r\n        \"children\": [\r\n          {\r\n            \"name\": \"Spanje\",\r\n            \"blogDetails\": null\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nReturn the object of the nested object instead of null\r\n\r\n**Code snippets**\r\nGraphQL query:\r\n```\r\nquery {\r\n  destinations(where: { name: \"Europa\" }) {\r\n    name\r\n    blogDetails{\r\n      count\r\n    }\r\n    children{\r\n      name\r\n      blogDetails{\r\n        count\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.1\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.17.4\r\n- Database: MongoDB\r\n- Operating system: MacOS"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nRelational dropdowns behavior were fine in alpha, but since beta they're pretty annoying to work with. This issue is about the annoyance because I couldn't reproduce my original issue (where I strictly couldn't get more than 21 elements in my dropdown).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Get [this repo](https://github.com/TheRealBarenziah/strapi-reproduce-issue) (credentials are in readme)\r\n2. There are 26 mommies (for each letter of alphabet) and a baby (which has only one mommy).\r\n3. Before clicking on the 'babies' tab, open your browser developer tools, Network tab. Clear it.\r\n4. Now edit the baby: we want to link it to its mom (which is 'z'). You can see the HTTP request made by the dropdown when you clicked the baby entry: `http://localhost:1337/content-manager/explorer/mommy?_limit=20&_start=0&source=content-manager`\r\n5. Click the 'mommy' dropdown and scroll down to see it effectively fetched the 20 first mommies. As you get to the end of the dropdown, you can see the log of a new request: `http://localhost:1337/content-manager/explorer/mommy?_limit=20&_start=1&source=content-manager`\r\n6. You still can't attribute the baby it's mom 'z', you only see moms up to 'u'\r\n7. To find the mom 'z' you have to repeat the process of hitting the end of dropdown several times (scroll up, scroll down, scroll up, scroll down...): see how the `_start` param is incremented by 1 each time you hit the end of dropdown\r\n\r\n**Expected behavior**\r\nI expected a smooth experience like in alpha where the `_start` parameter were incremented by 20 each time we hit the bottom of the dropdown. My teammate work with those dropdowns a lot so he instantly noticed the change.\r\n\r\n**Code snippets**\r\nMy workaround atm is to change [this line](https://github.com/strapi/strapi/blob/473d7002085eb987578ccb2b495e9c24093242c8/packages/strapi-plugin-content-manager/admin/src/components/SelectWrapper/index.js#L118) (`./node_modules/strapi-plugin-content-manager/admin/src/components/SelectWrapper/index.js` L118 )\r\nThis const:\r\n```\r\n  const onMenuScrollToBottom = () => {\r\n    setState(prevState => ({ ...prevState, _start: prevState._start + 1 }));\r\n    ref.current();\r\n  };\r\n```\r\nbecomes: \r\n```\r\n  const onMenuScrollToBottom = () => {\r\n    setState(prevState => ({ ...prevState, _start: prevState._start + 20 }));\r\n    ref.current();\r\n  };\r\n```\r\nDid a `yarn build` after that, and now things are better (fetching entries 20 by 20)\r\n\r\n**System**\r\n- Node.js version: 12.10.0\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-beta.17.4\r\n- Database: SQLite (same behavior with mySQL, and I assume, with all DBs)\r\n- Operating system: Linux Mint 19.2 Tina / Amazon RedHat\r\n\r\n**Additional context**\r\nI can live with this issue by doing my workaround and rebuilding the app. In case anybody else is annoyed by this, the fix should do it. Basically this function is called on the event of hitting the end of dropdown. I don't like the new way of handling this (for my baby & mom example, the dropdown have to go make several requests before you're able to find 'z', and each more mommy would add another request). It's not a critical problem (the fix is easy and works well enough for me) but it deserved to be documented imo."},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nCan't aggregate count the User model\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Run this GraphQL query:\r\n\r\n```\r\nquery GetUsers {\r\n  usersConnection(limit: 2) {\r\n    aggregate {\r\n      count\r\n    }\r\n    values {\r\n      username\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n2. See the error:\r\n`\"message\": \"The model user can't be found.\"`\r\n\r\n**Expected behavior**\r\n\r\nReturn the count.\r\n\r\n**System**\r\n- Node.js version: `v10`\r\n- NPM version: `v6`\r\n- Strapi version: `v3.0.0-beta.17.4`\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nSuppose that we have a content type \"Post\".\r\nIn \"Post\" we have an \"Images\" field with type \"Media\" that has \"Allow multiple files\" checked.\r\nIf any of the files added in \"Media\" for a Post are deleted in the \"Files Upload\" section under Plugins, then the Post will no longer be editable; for any further visits upon Post content type, the admin panel will ouput this error:\r\n```\r\nTypeError: Cannot read property 'split' of undefined\r\n\r\n    in Es\r\n    in td\r\n    in As\r\n    in withRouter(undefined)\r\n    in tr\r\n    in t\r\n    in styled.tr\r\n    in tbody\r\n    in table\r\n    in t\r\n    in styled.table\r\n    in Cs\r\n    in Cs\r\n    in withRouter(undefined)\r\n    in div\r\n    in div\r\n    in div\r\n    in t\r\n    in styled.div\r\n    in div\r\n    in t\r\n    in styled.div\r\n    in hi\r\n    in ac\r\n    in ac\r\n    in k\r\n    in t\r\n    in t\r\n    in Unknown\r\n    in _g\r\n    in k\r\n    in mainComponent\r\n    in t\r\n    in div\r\n    in ar\r\n    in ar\r\n    in t\r\n    in t\r\n    in div\r\n    in div\r\n    in div\r\n    in t\r\n    in k\r\n    in withSaga(Connect(t))\r\n    in withReducer(withSaga(Connect(t)))\r\n    in t\r\n    in ro\r\n    in t\r\n    in div\r\n    in div\r\n    in io\r\n    in k\r\n    in t\r\n    in t\r\n    in IntlProvider\r\n    in t\r\n    in k\r\n    in t\r\n\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type \"Post\".\r\n2. Add a field named \"Images\" of type \"Media\" and check \"Allow multiple files\"\r\n3. Create a new \"Post\" and upload an image file to its \"Images\" field.\r\n4. On the left side under Plugins click \"Files Upload\"\r\n5. Delete the file that was uploaded in step 3 using the trash can icon.\r\n6. Go back and edit the Post, see that instead of edit panel the above error will be shown.\r\n\r\n**Expected behavior**\r\n\r\nDeleting the file would not break any functionality and for content types that already hold a reference to that file, the reference get cleared as well.\r\n\r\n**Screenshots:**\r\n\r\n**Screenshot: 1**\r\n![67575108-b0f40980-f748-11e9-92ff-4a31621533e8](https://user-images.githubusercontent.com/53266765/67724574-b2e1f500-f9f4-11e9-85f1-671578282b69.png)\r\n\r\n**Screenshot: 2**\r\n![67575664-e816ea80-f749-11e9-87a3-9ebcd97ba1ff](https://user-images.githubusercontent.com/53266765/67724770-5c28eb00-f9f5-11e9-8457-ee49eb1a6d28.png)\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 12.11.1\r\n- Strapi version: 16.8\r\n- Database: postgres\r\n- Operating system: windows 10 x64\r\n\r\n**Additional context**\r\ni tried to remove the file using destroy endpoint ``(\"upload/files/:id\")`` and when i retrieved the content type, the field holding file references was an array with **one empty object** **(Screenshot: 2)** and i guess that's the problem. cheers!"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\nHello guys,\r\n**Describe the bug**\r\nI'm trying to use polymorphic relations in Strapi however every time when I save a document  strapi overrides the array with relations instead of adding new relations to it.\r\n\r\nRelation details: \r\n**Image.settings.json**\r\n```js\r\n{\r\n   // ...\r\n \"attributes\": {\r\n    \"related\": {\r\n      \"collection\": \"*\",\r\n      \"filter\": \"field\",\r\n      \"configurable\": false\r\n    },\r\n}\r\n```\r\n\r\n**Test.settings.json**\r\n```js\r\n{\r\n   // ...\r\n  \"attributes\": {\r\n    \"type\": {\r\n      \"type\": \"string\",\r\n      \"required\": true,\r\n      \"unique\": true,\r\n      \"configurable\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a single **Image** document\r\n2. Create 2 different documents based on **Test** model - both should refer to the same Image\r\n3. The `related` array on Image document (in MongoDb) will contain only 1 entry \r\n```js\r\n    \"related\" : [ \r\n        {\r\n            \"_id\" : ObjectId(\"5db6fe8e3972213740a54857\"),\r\n            \"ref\" : ObjectId(\"5db6f769e69d90323e808ba9\"),\r\n            \"kind\" : \"MypluginTest\",\r\n            \"field\" : \"FirstImage\"\r\n        }\r\n    ],\r\n```\r\n**Expected behavior**\r\nRelated array shouldn't be overridden.\r\n\r\n**Code**\r\nIn my humble opinion the code in the function `addRelationMorph` in `/strapi-hook-mongoose/lib/relations.js` is wrong as the `const value = []` will always give an empty array. It seems that value should be populated based on the existing value from the database.  Someting like:\r\n```js\r\nconst value = entry[params.alias] || []; // not tested yet\r\n```\r\nIn the current solution checking if some relation already exists in array will return `false` every time. Here is the full code of that method: \r\n```js\r\naddRelationMorph: async function(params) {\r\n    let entry = await this.findOne({\r\n      [this.primaryKey]: getValuePrimaryKey(params, this.primaryKey),\r\n    });\r\n\r\n    if (entry) {\r\n      entry = entry.toJSON();\r\n    }\r\n\r\n    const value = [];\r\n\r\n    // Retrieve association.\r\n    const association = this.associations.find(\r\n      association => association.alias === params.alias\r\n    );\r\n\r\n    if (!association) {\r\n      throw Error(\r\n        `Impossible to create relationship with ${params.ref} (${params.refId})`\r\n      );\r\n    }\r\n\r\n    // Resolve if the association is already existing.\r\n    const isExisting = value.find(obj => {\r\n      if (\r\n        obj.kind === params.ref &&\r\n        obj.ref.toString() === params.refId.toString() &&\r\n        obj.field === params.field\r\n      ) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    });\r\n\r\n    // Avoid duplicate.\r\n    if (isExisting) {\r\n      return Promise.resolve();\r\n    }\r\n\r\n    // Push new relation to the association array.\r\n    value.push({\r\n      ref: params.ref,\r\n      refId: params.refId,\r\n      kind: params.ref,\r\n      field: params.field,\r\n    });\r\n\r\n    entry[params.alias] = value;\r\n\r\n    return module.exports.update.call(this, {\r\n      id: params.id,\r\n      values: entry,\r\n    });\r\n  },\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.17.1\r\n- Database: MongoDb\r\n- Operating system: Ubuntu 18\r\n\r\nI hope I'm right and I haven't missed anything important. ;) \r\n\r\nRegards,\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA url query that contains both a deep filter and a timestamp based param always returns zero results.\r\n \r\n**Steps to reproduce the behavior**\r\n1. Send a query to a model with both a deep filter and a timestamp param, like `www.example.com/events?user.office=Beijing&createdAt_gt=2019-1024\r\n2. Result will be an empty array.\r\n\r\n**Expected behavior**\r\nResult should be an array containing documents that match the query parameters.\r\n\r\n**Code snippets**\r\nI found a few lines in strapi-utils/lib/buildQuery.js that could be contributing to the problem:\r\n\r\n1. This line returns `undefined` for `createdAt` and `updatedAt` attributes. I think it should be returning `timestamp`:\r\nhttps://github.com/strapi/strapi/blob/038bbb3e206b27b2d60b5d1689c4451faebe6b3a/packages/strapi-utils/lib/buildQuery.js#L125\r\n\r\n2. Because `type` is `undefined`, this function returns the attribute value as a `string`, but it needs to be a `Date` (or converted elsewhere to a MongoDB `ISODate` for the query to perform as expected:\r\nhttps://github.com/strapi/strapi/blob/038bbb3e206b27b2d60b5d1689c4451faebe6b3a/packages/strapi-utils/lib/buildQuery.js#L62-L84\r\n\r\nFor now I'm working around this by:\r\n``` \r\nif (attribute == 'createdAt' || attribute == 'updatedAt') { \r\n    type = 'timestamp' \r\n} \r\n```\r\nafter line 128, and then:\r\n```\r\n    case 'timestamp':\r\n      return new Date(value)\r\n```  \r\nin the `castValueToType` function, but it's a pretty hacky solution so I'm not going to open a PR. Just flagging this for someone who knows their way around the amazing ❤️Strapi❤️ better than I do.\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.17.4\r\n- Database: MongoDB\r\n- Operating system: Ubuntu flavored WSL\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI have an id (primary key) type set to uuid and a column referencing another table column with the association \"oneWay\". Unfortunately, this second column (addressId) will take the type uuid instead of an integer.\r\n\r\n**Steps to reproduce the behavior**\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"establishments\",\r\n  \"info\": {\r\n    \"name\": \"establishment\",\r\n    \"description\": \"Établissement\"\r\n  },\r\n  \"options\": {\r\n    \"idAttribute\": \"id\",\r\n    \"idAttributeType\": \"uuid\",\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"required\": true,\r\n      \"type\": \"string\"\r\n    },\r\n    \"frequency\": {\r\n      \"type\": \"float\",\r\n      \"required\": true\r\n    },\r\n    \"addressId\": {\r\n      \"model\": \"address\"\r\n    }\r\n  }\r\n}\r\n```\r\n**Expected behavior**\r\nAn entity with a uuid as a primary key should be able to relate to another entity using the integer id as a foreign key\r\n\r\n**Screenshots**\r\n<img width=\"299\" alt=\"Screenshot 2019-10-23 at 16 20 55\" src=\"https://user-images.githubusercontent.com/11333362/67402616-1ca36e80-f5b1-11e9-8d28-1de1ed1fcac2.png\">\r\n\r\n**System**\r\n- Node.js version: 12.1.0\r\n- NPM version:\r\n- Strapi version: 3.0.0-beta.17.3\r\n- Database: postgres\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"### Introduction\r\nI create this issue to avoid other issues related to the same topic.\r\n\r\n## Description\r\nCurrently, if you are adding a `min` / `max` limit or `default value`,  will not be applied in the REST routes.\r\nOnly `required` and `unique` constraints work.\r\n\r\n`min` / `max` will only be applied in the admin panel.\r\n\r\n## Contribution\r\n\r\nIf you want to work on this topic, I suggest you open an RFC on the following repo [strapi/rfcs](https://github.com/strapi/rfcs)"},{"labels":[null,"bug"],"text":"**Describe the bug**\r\nWhen I query my user object with `users(id: \"2)` and access the relation of the subfield strapi throws error.\r\n\r\n`Your filters contain a field 'undefined' ...`\r\n\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. create a contenttype groups \r\n2. create a contenttype question with a title field called title\r\n3. add relation so:\r\n\r\nA group can have many questions, a question can only have one group.\r\n\r\n3. add relation to user so:\r\n\r\nUser can have many groups, a group can have many users.\r\n\r\n4. try to query for the user with his id, get his groups and find what question titles he has. (see query for example)\r\n\r\n**Expected behavior**\r\nIt should return the relation of the subfield instead of a error.\r\n\r\n**Code snippets**\r\n ```\r\n user(id: \"2\") {\r\n    groups {questions{title}}\r\n  }\r\n```\r\nreturns the error.\r\n\r\n**System**\r\n- Node.js version: v10\r\n- NPM version: 6.12\r\n- Strapi version: 3.0.0-beta.17.3\r\n- Database: MongoDB\r\n- Operating system: Ubuntu\r\n"},{"labels":[null,null,"bug"],"text":"### query:\r\n```graphql\r\n{\r\n usersConnection {\r\n    groupBy {\r\n      createdUser {\r\n        key\r\n        connection {\r\n          values {\r\n            username\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n### result:\r\n```json\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cast to ObjectId failed for value \\\"{ _bsontype: 'ObjectID', id: ']�ʒ�sX���$�' }\\\" at path \\\"createdUser\\\" for model \\\"UsersPermissionsUser\\\"\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 7,\r\n          \"column\": 11\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"usersConnection\",\r\n        \"groupBy\",\r\n        \"createdUser\",\r\n        0,\r\n        \"connection\",\r\n        \"values\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"message\": \"Cast to ObjectId failed for value \\\"{ _bsontype: 'ObjectID', id: ']�ʒ�sX���$�' }\\\" at path \\\"createdUser\\\" for model \\\"UsersPermissionsUser\\\"\",\r\n          \"name\": \"CastError\",\r\n          \"stringValue\": \"\\\"{ _bsontype: 'ObjectID', id: ']�ʒ�sX���$�' }\\\"\",\r\n          \"kind\": \"ObjectId\",\r\n          \"value\": {\r\n            \"_bsontype\": \"ObjectID\",\r\n            \"id\": \"]�ʒ�sX���$�\"\r\n          },\r\n          \"path\": \"createdUser\",\r\n          \"stacktrace\": [\r\n            \"CastError: Cast to ObjectId failed for value \\\"{ _bsontype: 'ObjectID', id: ']�ʒ�sX���$�' }\\\" at path \\\"createdUser\\\" for model \\\"UsersPermissionsUser\\\"\",\r\n            \"    at new CastError (.\\\\node_modules\\\\mongoose\\\\lib\\\\error\\\\cast.js:29:11)\",\r\n            \"    at ObjectId.cast (.\\\\node_modules\\\\mongoose\\\\lib\\\\schema\\\\objectid.js:244:11)\",\r\n            \"    at ObjectId.SchemaType.applySetters (.\\\\node_modules\\\\mongoose\\\\lib\\\\schematype.js:948:12)\",\r\n            \"    at ObjectId.SchemaType._castForQuery (.\\\\node_modules\\\\mongoose\\\\lib\\\\schematype.js:1362:15)\",\r\n            \"    at ObjectId.SchemaType.castForQuery (.\\\\node_modules\\\\mongoose\\\\lib\\\\schematype.js:1352:15)\",\r\n            \"    at ObjectId.SchemaType.castForQueryWrapper (.\\\\node_modules\\\\mongoose\\\\lib\\\\schematype.js:1331:15)\",\r\n            \"    at cast (.\\\\node_modules\\\\mongoose\\\\lib\\\\cast.js:252:34)\",\r\n            \"    at cast (.\\\\node_modules\\\\mongoose\\\\lib\\\\cast.js:50:18)\",\r\n            \"    at model.Query.Query.cast (.\\\\node_modules\\\\mongoose\\\\lib\\\\query.js:4608:12)\",\r\n            \"    at model.Query.Query._castConditions (.\\\\node_modules\\\\mongoose\\\\lib\\\\query.js:1790:10)\",\r\n            \"    at model.Query.<anonymous> (.\\\\node_modules\\\\mongoose\\\\lib\\\\query.js:1817:8)\",\r\n            \"    at model.Query._wrappedThunk [as _find] (.\\\\node_modules\\\\mongoose\\\\lib\\\\helpers\\\\query\\\\wrapThunk.js:16:8)\",\r\n            \"    at .\\\\node_modules\\\\kareem\\\\index.js:278:20\",\r\n            \"    at _next (.\\\\node_modules\\\\kareem\\\\index.js:102:16)\",\r\n            \"    at process.nextTick (.\\\\node_modules\\\\kareem\\\\index.js:499:38)\",\r\n            \"    at process._tickCallback (internal/process/next_tick.js:61:11)\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n### model:\r\n```json\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"users-permissions_user\",\r\n  \"info\": {\r\n    \"name\": \"user\",\r\n    \"description\": \"Manage users and permissions.\"\r\n  },\r\n  \"options\": {\r\n    \"timestamps\": [\r\n      \"createdAt\",\r\n      \"updatedAt\"\r\n    ]\r\n  },\r\n  \"attributes\": {\r\n    \"username\": {\r\n      \"type\": \"string\",\r\n      \"minLength\": 3,\r\n      \"unique\": true,\r\n      \"configurable\": false,\r\n      \"required\": true\r\n    },\r\n    \"email\": {\r\n      \"type\": \"email\",\r\n      \"minLength\": 6,\r\n      \"configurable\": false,\r\n      \"required\": true\r\n    },\r\n    \"provider\": {\r\n      \"type\": \"string\",\r\n      \"configurable\": false\r\n    },\r\n    \"password\": {\r\n      \"type\": \"password\",\r\n      \"minLength\": 6,\r\n      \"configurable\": false,\r\n      \"private\": true\r\n    },\r\n    \"resetPasswordToken\": {\r\n      \"type\": \"string\",\r\n      \"configurable\": false,\r\n      \"private\": true\r\n    },\r\n    \"confirmed\": {\r\n      \"type\": \"boolean\",\r\n      \"default\": false,\r\n      \"configurable\": false\r\n    },\r\n    \"blocked\": {\r\n      \"type\": \"boolean\",\r\n      \"default\": false,\r\n      \"configurable\": false\r\n    },\r\n    \"isActive\": {\r\n      \"required\": true,\r\n      \"default\": true,\r\n      \"type\": \"boolean\"\r\n    },\r\n    \"createdUser\": {\r\n      \"model\": \"user\",\r\n      \"plugin\": \"users-permissions\"\r\n    },\r\n    \"updatedUser\": {\r\n      \"model\": \"user\",\r\n      \"plugin\": \"users-permissions\"\r\n    },\r\n    \"role\": {\r\n      \"model\": \"role\",\r\n      \"via\": \"users\",\r\n      \"plugin\": \"users-permissions\"\r\n    },\r\n    \"shouldChangePassword\": {\r\n      \"type\": \"boolean\"\r\n    },\r\n    \"isLockout\": {\r\n      \"type\": \"boolean\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 1.19.0\r\n- Strapi version: 3.0.0-beta.17.1\r\n- Database: MongoDB\r\n- Operating system:\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI saw that similar bug have existed before, this one is related to many-to-many (bi-directional) relationship only.\r\n\r\nObjects located deeper than 2 levels with many-to-many relationship always return empty array when querying using GraphQL.  \r\n\r\n**Steps to reproduce the behavior**\r\nExample of graphql:\r\n\r\n ```graphql\r\nquery {\r\n  building(id:1) {\r\n  \tapartments {\r\n      name\r\n       rooms {\r\n       name\r\n      }\r\n    }      \r\n  }   \r\n}\r\n```\r\n\r\nActual Result:\r\n ```json\r\n{\r\n  \"data\": {\r\n    \"building\": {\r\n      \"apartments\": [\r\n        {\r\n          \"name\": \"Apartment 1\",\r\n          \"rooms\": []\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nJSON models:\r\n\r\n```json\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"buildings\",\r\n  \"info\": {\r\n    \"name\": \"building\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"rooms\": {\r\n      \"collection\": \"room\",\r\n      \"via\": \"buildings\",\r\n      \"dominant\": true\r\n    },\r\n    \"apartments\": {\r\n      \"collection\": \"apartment\",\r\n      \"dominant\": true,\r\n      \"via\": \"buildings\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```json\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"apartments\",\r\n  \"info\": {\r\n    \"name\": \"apartment\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"rooms\": {\r\n      \"columnName\": \"rooms\",\r\n      \"collection\": \"room\",\r\n      \"via\": \"apartments\",\r\n      \"dominant\": true\r\n    },\r\n    \"buildings\": {\r\n      \"collection\": \"building\",\r\n      \"via\": \"apartments\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```json\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"rooms\",\r\n  \"info\": {\r\n    \"name\": \"room\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"buildings\": {\r\n      \"collection\": \"building\",\r\n      \"via\": \"rooms\"\r\n    },\r\n    \"apartments\": {\r\n      \"collection\": \"apartment\",\r\n      \"via\": \"rooms\",\r\n      \"columnName\": \"apartments\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nIt should return the rooms as well.\r\n\r\n \r\n**System**\r\n- Node.js version: v12.12.0\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-alpha.26 / 3.0.0-beta.17.1\r\n- Database: sqlite\r\n- Operating system: Ubuntu\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nThe response of GraphQL queries with multiple models are wrong.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Make a query with multiple models. Example:\r\n\r\n```javascript\r\nquery {\r\n  users(limit: 2) {\r\n    username\r\n    name\r\n  }\r\n  matchdays(limit: 2) {\r\n    name\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Expected behavior**\r\n\r\nReturn the right response.\r\n\r\n**Screenshots**\r\n\r\n<img width=\"1223\" alt=\"Screenshot 2019-10-18 at 15 40 00\" src=\"https://user-images.githubusercontent.com/1007051/67076393-a7562900-f1bf-11e9-9308-31ca5c32263f.png\">\r\n<img width=\"1217\" alt=\"Screenshot 2019-10-18 at 15 40 46\" src=\"https://user-images.githubusercontent.com/1007051/67076396-a7562900-f1bf-11e9-9568-ab878c817089.png\">\r\n\r\n**System**\r\n- Node.js version: `v10`\r\n- NPM version: `v6`\r\n- Strapi version: `v3.0.0-beta.17.1`\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nLacking permission to for initial admin account setup\r\n\r\nConsole Error `http://localhost:1337/users-permissions/init 403 (Forbidden)`\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nStep 1\r\n`strapi new test-project --quickstart`\r\nStep 2\r\nNavigate to localhost:1337/admin\r\n\r\nSee console error with 403 forbidden \r\n\r\n**Expected behavior**\r\nShould allow for regular initial setup.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n\r\n**System**\r\nVersions:\r\nStrapi: `3.0.0-beta.16.8`\r\nnpm: `6.9.0`\r\nnode: `10.16.1`\r\ndatabase: `sqllite`\r\nOS: `windows 10`\r\n\r\n**Additional context**\r\nFound multiple other issues but the none of the solved my problem. Found a potential work around but [here](https://github.com/strapi/strapi/issues/3284#issue-445319771) but i don't seem to have a plugins folder or defaults.json.\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nIf the model has two groups and the second group will be updated, and the first group is empty, then the second group will not save the changes.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create new record in model 'post'\r\n2. Fill only 'title' field\r\n3. Save record\r\n4. Open record for update\r\n5. Fill group 'meta' and leave group 'description' empty\r\n6. Save record\r\n7. Open this record but 'meta' is empty\r\n\r\n**Code snippets**\r\nModel post\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"post\",\r\n  \"info\": {\r\n    \"name\": \"post\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": [\r\n      \"created_at\",\r\n      \"updated_at\"\r\n    ],\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\",\r\n      \"required\": true\r\n    },\r\n    \"description\": {\r\n      \"group\": \"description\",\r\n      \"type\": \"group\"\r\n    },\r\n    \"meta\": {\r\n      \"group\": \"meta\",\r\n      \"type\": \"group\"\r\n    }\r\n  }\r\n}\r\n```\r\nGroup description\r\n```\r\n{\r\n  \"info\": {\r\n    \"name\": \"description\",\r\n    \"description\": \"\"\r\n  },\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"groups_descriptions\",\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"detail\": {\r\n      \"type\": \"richtext\"\r\n    }\r\n  }\r\n}\r\n```\r\nGroup meta\r\n```\r\n{\r\n  \"info\": {\r\n    \"name\": \"meta\",\r\n    \"description\": \"\"\r\n  },\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"groups_metas\",\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"keywords\": {\r\n      \"type\": \"text\"\r\n    },\r\n    \"description\": {\r\n      \"type\": \"text\"\r\n    },\r\n    \"canonicalLink\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"picture\": {\r\n      \"model\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\",\r\n      \"required\": false\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.1\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.16.8 \r\n- Database: mysql\r\n- Operating system: MacOS\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI recently updated to 3.0.0-beta.16.8 and switched from '_id'  to 'id' in my GraphQL-Queries.\r\nNow I'm having a problem with my existing filters, that have been worked before:\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create an entity `strapi.services.pet.create({name: 'Steve'});`\r\n2. Update entity from frontend via GraphQL with filter `input: { where: { id: $id }, data: $pet}` \r\n3. GraphQL-Error: `Your filters contain a field 'id' that doesn't appear on your model definition nor it's relations\"\r\n\r\n**Expected behavior**\r\nI would expect to filter on the given `id`-parameter\r\n\r\n**System**\r\n- Node.js version: v12.10.0\r\n- NPM version: v6.10.3\r\n- Strapi version: v3.0.0-beta.16.8\r\n- Database: MongoDB\r\n- Operating system: MacOS\r\n\r\n**Additional context**\r\nI see the `_id` field in the database collection but no `id`-field after creation. Is this correct? Who is responsible for writing the `id` to the database?\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nLanguage change does not cause text change in application.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to admin panel.\r\n2. Click language menu in the upper-right\r\n3. Change language\r\n4. UI Does not update\r\n\r\n**Expected behavior**\r\nThe UI should update to the new language\r\n\r\n**System**\r\n- Node.js version: v10 latest\r\n- NPM version: 6.9\r\n- Strapi version: Beta 16.8\r\n- Database: MySQL\r\n- Operating system: CentOS in Docker\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a local plugin that contains a custom model, installing strapi-plugin-graphql will break the build at runtime\r\n\r\n**Steps to reproduce the behavior**\r\n1: spin up a new strapi project `strapi new strapi-test`\r\n2: install graphql plugin `strapi install graphql`\r\n3: create a custom plugin `strapi generate:plugin awsome-plugin`\r\n4: create a custom model for that plugin `strapi generate:model awsomething --plugin=awesome-plugin`\r\n5: go to the `plugins/awesome-plugin/models/models` and move your models up a level to `plugins/awesome-plugin/models` because it creates a duplicate folder on generate (another bug i think ????)\r\n6: try and run it `strapi develop`\r\n7: see error\r\n```\r\n[2019-10-09T20:31:11.874Z] error Error: Cannot find the controller's action custommodel.findOne\r\n    at /Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Query.js:163:16\r\n    at Object.composeQueryResolver (/Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Query.js:199:7)\r\n    at /Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Resolvers.js:331:19\r\n    at Array.reduce (<anonymous>)\r\n    at Object.buildShadowCRUD (/Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Resolvers.js:269:30)\r\n    at /Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Schema.js:147:23\r\n    at Array.reduce (<anonymous>)\r\n    at Object.generateSchema (/Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/services/Schema.js:141:48)\r\n    at Object.initialize (/Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi-plugin-graphql/hooks/graphql/index.js:59:50)\r\n    at /Users/grahamcrackers/dev/tfs-svm/strapi-graphql/node_modules/strapi/lib/hooks/index.js:43:28\r\n```\r\n\r\n**Expected behavior**\r\nThe server should start without an error.\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: beta16.5-16.8\r\n- Database: sqlite,mongodb\r\n- Operating system: macOS 10.14.6\r\n\r\n**Additional context**\r\nThis is a fresh install with no other moving parts. I've also tried to put an empty schema.graphql file that only contains `module.exports = {}` in the plugins config folder like the getstarted project in the strapi monorepo, and it still fails at runtime.\r\n"},{"labels":[null,null,"bug"],"text":"Hello !\r\nI'm running into a small bug with the new group feature (which I love by the way).\r\n\r\n**Describe the bug**\r\nWhen adding multiple media files (jpg, svg, etc.) inside a repeatable group element, only one remain after saving.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a _group_\r\n2. Add an _image field_ and check \"allow multiple files\"\r\n3. Use the group inside a _content type_ and make it repeatable\r\n4. Add multiple files to the media field\r\n5. Save\r\n6. Go back to see only one image inside the group (or query the images to see only one response)\r\n\r\n**Expected behavior**\r\nAll the media files should be saved inside the group.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.16.8\r\n- Database: sqlite\r\n- Operating system: MacOS 10.14.6\r\n\r\n**Additional context**\r\nMultiple media files is working fine on media field outside the group.  \r\n**It is working fine when the group is not repeatable.** Changing this setting after uploading multiple files to a non repeatable group makes the next entries bug but not the first.\r\n\r\nThanks a lot!"},{"labels":[null,null,"bug"],"text":"I have a content-type **Order** with field **Items** is a group **OrderItem**.\r\nIn **OrderItem** have a relation to content-type **Product**.\r\nIn swagger it run normal, but in graphql when query product it fail.\r\n\r\nResult swagger:\r\n```json\r\n{\r\n    \"total\": 14600689,\r\n    \"discount\": 12312312,\r\n    \"_id\": \"5d99dee073d6cb1d883fac41\",\r\n    \"deliveryDate\": \"2019-10-01T17:00:00.000Z\",\r\n    \"subtotal\": 14600689,\r\n    \"description\": \"qwewqeq\",\r\n    \"items\": [\r\n      {\r\n        \"discount\": 0,\r\n        \"_id\": \"5d99dee073d6cb1d883fac43\",\r\n        \"quantity\": 12,\r\n        \"amount\": 1477476,\r\n        \"createdAt\": \"2019-10-06T12:32:32.833Z\",\r\n        \"updatedAt\": \"2019-10-06T12:32:32.952Z\",\r\n        \"__v\": 0,\r\n        \"product\": {\r\n          \"isActive\": true,\r\n          \"_id\": \"5d99de5773d6cb1d883fac37\",\r\n          \"name\": \"test\",\r\n          \"slug\": \"/test\",\r\n          \"price\": {\r\n            \"amount\": 123123,\r\n            \"currency\": \"VND\",\r\n            \"id\": \"5d99dea573d6cb1d883fac3f\"\r\n          },\r\n          \"createdAt\": \"2019-10-06T12:30:15.129Z\",\r\n          \"updatedAt\": \"2019-10-06T13:19:45.736Z\",\r\n          \"__v\": 2,\r\n          \"image\": \"/uploads/769903a4058a48618779cd50674e0a2b.png\",\r\n          \"id\": \"5d99de5773d6cb1d883fac37\"\r\n        },\r\n        \"id\": \"5d99dee073d6cb1d883fac43\"\r\n      }\r\n    ],\r\n    \"__v\": 1,\r\n    \"id\": \"5d99dee073d6cb1d883fac41\"\r\n  }\r\n```\r\n\r\nIn graphql\r\n```graphql\r\n{\r\n  order(id: \"5d99e03073d6cb1d883fac46\") {\r\n    total\r\n    items {\r\n      quantity\r\n      product{\r\n        name\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n```json\r\n  {\"errors\": [\r\n    {\r\n      \"message\": \"Cannot read property 'load' of undefined\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 6,\r\n          \"column\": 7\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"order\",\r\n        \"items\",\r\n        0,\r\n        \"product\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"TypeError: Cannot read property 'load' of undefined\",\r\n            \"    at resolver.(anonymous function) (\\\\node_modules\\\\strapi-plugin-graphql\\\\services\\\\Resolvers.js:190:75)\",\r\n            \"    at field.resolve (\\\\node_modules\\\\graphql-extensions\\\\src\\\\index.ts:274:18)\",\r\n            \"    at resolveFieldValueOrError (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:503:18)\",\r\n            \"    at resolveField (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:470:16)\",\r\n            \"    at executeFields (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:311:18)\",\r\n            \"    at collectAndExecuteSubfields (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:747:10)\",\r\n            \"    at completeObjectValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:737:10)\",\r\n            \"    at completeValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:626:12)\",\r\n            \"    at completeValueCatchingError (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:531:19)\",\r\n            \"    at \\\\node_modules\\\\graphql\\\\execution\\\\execute.js:651:25\",\r\n            \"    at Array.forEach (<anonymous>)\",\r\n            \"    at forEach (\\\\node_modules\\\\iterall\\\\index.js:83:25)\",\r\n            \"    at completeListValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:647:24)\",\r\n            \"    at completeValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:609:12)\",\r\n            \"    at completeValueCatchingError (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:531:19)\",\r\n            \"    at resolveField (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:471:10)\",\r\n            \"    at executeFields (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:311:18)\",\r\n            \"    at collectAndExecuteSubfields (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:747:10)\",\r\n            \"    at completeObjectValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:737:10)\",\r\n            \"    at completeValue (\\\\node_modules\\\\graphql\\\\execution\\\\execute.js:626:12)\",\r\n            \"    at \\\\node_modules\\\\graphql\\\\execution\\\\execute.js:528:16\",\r\n            \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ]}\r\n \r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- Yarn version: v1.19.0\r\n- Strapi version: 3.0.0-beta.16.8\r\n- Database: MongoDB\r\n- Operating system: Windows\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nFile Upload API image url is wrong when using S3. It still has the localhost URL, however s3 has it's own URL and doesn't need the localhost url be appended\r\n\r\n**Steps to reproduce the behavior**\r\n1. Activate S3 as your File Upload source\r\n2. Upload a file\r\n3. Check the details of the file via API, ie. `/upload/files/2`\r\n4. See the `url` key.\r\n\r\n**Expected behavior**\r\n`url` key should not append `localhost` url if the source is other than local ie. s3.\r\n\r\n**Screenshots**\r\n![mow-api-www_jbcx0ghd0_at_d2c_io_upload_files_1](https://user-images.githubusercontent.com/587603/66189973-8e2c8300-e6bd-11e9-8f6a-0d29b96586b3.jpg)\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: v6.4.1\r\n- Strapi version: beta 16\r\n- Database: MySQL\r\n- Operating system: Mac OS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nA linked Image isn't lockable (configurable: false).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Install latest beta version\r\n2. create a new content type and add an image field via the UI \r\n3. Lock the field/ set configurable to false\r\n4. Refresh the Content Manager and check the filed. The edit button is still visible. No lock sign\r\n\r\n\r\n**Expected behavior**\r\nImage entry should not be editable. \r\n\r\n**Screenshots**\r\n<img width=\"1024\" alt=\"Screenshot 2019-10-02 at 11 59 06\" src=\"https://user-images.githubusercontent.com/12811012/66035819-2420ac00-e50c-11e9-9861-b4d37bd880bb.png\">\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.11.3\r\n- Strapi version: v3.0.0-beta.16.7\r\n- Database: sqllite\r\n- Operating system: mac os (latest)\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nContent type builder always remove \"autoPopulate\" options in models\r\n\r\n**Steps to reproduce the behavior**\r\n1. create many to many relationship with 2 models\r\n2. edit model setting to disable autoPopulate by adding `\"autoPopulate\": false`\r\n3. add some field in one of model using content type builder. and save it.\r\n4. see the different using `git diff`\r\n```\r\n-    \"chapters\": {\r\n-      \"collection\": \"chapter\",\r\n-      \"via\": \"novel\",\r\n-      \"autoPopulate\": false\r\n-    },\r\n\r\n\r\n+    \"chapters\": {\r\n+      \"collection\": \"chapter\",\r\n+      \"via\": \"novel\"\r\n+    },\r\n\r\n```\r\n\r\n**Expected behavior**\r\ndont remove edited custom model while using content type builder\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v12.9.1<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 6.10.2\r\n- Strapi version: 3.0.0-beta.16.1 <!-- Please make sure you are on the latest version -->\r\n- Database: mongodb\r\n- Operating system: ubuntu\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI created a group with number fields. I am setting the number fields default value and saving the group. When editing the number fields of that group and resetting their default value to an empty value I am then getting the following error message when saving the group: default must be a `number` type, but the final value was: `\"\"`\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Content manager and create a group with some number fields\r\n2. Give a default value for those number fields and save the group\r\n3. Edit that same group and remove the default value of one of the number fields and save the group\r\n4. See error (xxxxdefault must be a `number` type, but the final value was: `\"\"`)\r\n\r\n**Expected behavior**\r\nGroup should be saving with empty default value for number field\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/4890827/65828228-d7816a80-e298-11e9-87ef-02958607cfd5.png)\r\n\r\n**System**\r\n- Node.js version: v12\r\n- Strapi version: beta.16.5\r\n- Database: Mongodb 4.0.6\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nInside the admin panel, when viewing a user that has a relation, clicking on the relation results in a 404.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a one-to-one relation between a user and another content type (profile for example), in the content type builder.\r\n2. Create a user entry.\r\n3. Create a profile entry linked to the user.\r\n4. Open the user Entry\r\n5. Refresh the page (make sure the profile isn't cached)\r\n6. click on detail for the profile link within the user entry view.\r\n8. page will show a not found error with a 404\r\nnetwork response: \r\n```\r\n{statusCode: 404, error: \"Not Found\", message: \"contentType.notFound\"}\r\n```\r\n\r\n**Expected behavior**\r\nThe relation (profile) page will load from a user link.\r\n\r\n\r\n**Code snippets**\r\nthe URLs are different. \r\nWhen finding the profile directly through the profile content type: \r\n`http://localhost:1337/admin/plugins/content-manager/profile/5d89563da74b759a0ba5f06f?redirectUrl=/plugins/content-manager/profile?source=content-manager`\r\n\r\nwhen finding the profile through the detail link in user: \r\n`http://localhost:1337/admin/plugins/content-manager/profile/5d89563da74b759a0ba5f06f?redirectUrl=/plugins/content-manager/user/5d8be07ed6caf8d3c7bc4905?redirectUrl=/plugins/content-manager/user?source=users-permissions`\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.10.0\r\n- Strapi version: v3.0.0-beta.16.6\r\n- Database: mongo\r\n- Operating system: osx / linux \r\n\r\n**Additional context**\r\nthis started happening after I upgraded from v3.0.0-beta.15 to v3.0.0-beta.16.6"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nIf you create a group and one of the fields is a relationship with a model which have inside more relationships, when you fetch this data, it shows the id of the nested relationship as a object with the order of the character as key and the character as a value, in the same way as if you do {...\"idString\"}\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a group with a relation to a model with more relationships\r\n2. Add the group to a model\r\n\r\n**Expected behavior**\r\nThe nested relationship should show the id of the related content as a normal string\r\n\r\n**Postman response**\r\n```\r\n[\r\n    {\r\n        \"_id\": \"5d8db9bf0dc976285007b04d\",\r\n        \"items\": [\r\n            {\r\n                \"_id\": \"5d8db9bf0dc976285007b04e\",\r\n                \"notes\": \"qwe\",\r\n                \"qty\": 2,\r\n                \"createdAt\": \"2019-09-27T07:26:55.574Z\",\r\n                \"updatedAt\": \"2019-09-27T07:26:55.601Z\",\r\n                \"__v\": 0,\r\n                \"product\": {\r\n                    \"_id\": \"5d6fbbe94e7c9554792b22b4\",\r\n                    \"name\": \"product11\",\r\n                    \"description\": \"tggyyfff77\",\r\n                    \"createdAt\": \"2019-09-04T13:28:09.311Z\",\r\n                    \"updatedAt\": \"2019-09-17T13:02:42.835Z\",\r\n                    \"__v\": 0,\r\n                    \"organization\": {\r\n                        \"0\": \"5\",\r\n                        \"1\": \"d\",\r\n                        \"2\": \"6\",\r\n                        \"3\": \"e\",\r\n                        \"4\": \"2\",\r\n                        \"5\": \"f\",\r\n                        \"6\": \"e\",\r\n                        \"7\": \"2\",\r\n                        \"8\": \"8\",\r\n                        \"9\": \"e\",\r\n                        \"10\": \"6\",\r\n                        \"11\": \"7\",\r\n                        \"12\": \"5\",\r\n                        \"13\": \"7\",\r\n                        \"14\": \"3\",\r\n                        \"15\": \"8\",\r\n                        \"16\": \"7\",\r\n                        \"17\": \"a\",\r\n                        \"18\": \"c\",\r\n                        \"19\": \"7\",\r\n                        \"20\": \"6\",\r\n                        \"21\": \"0\",\r\n                        \"22\": \"3\",\r\n                        \"23\": \"7\"\r\n                    },\r\n                    \"productgroup\": {\r\n                        \"0\": \"5\",\r\n                        \"1\": \"d\",\r\n                        \"2\": \"6\",\r\n                        \"3\": \"f\",\r\n                        \"4\": \"b\",\r\n                        \"5\": \"b\",\r\n                        \"6\": \"d\",\r\n                        \"7\": \"7\",\r\n                        \"8\": \"4\",\r\n                        \"9\": \"e\",\r\n                        \"10\": \"7\",\r\n                        \"11\": \"c\",\r\n                        \"12\": \"9\",\r\n                        \"13\": \"5\",\r\n                        \"14\": \"5\",\r\n                        \"15\": \"4\",\r\n                        \"16\": \"7\",\r\n                        \"17\": \"9\",\r\n                        \"18\": \"2\",\r\n                        \"19\": \"b\",\r\n                        \"20\": \"2\",\r\n                        \"21\": \"2\",\r\n                        \"22\": \"b\",\r\n                        \"23\": \"2\"\r\n                    },\r\n                    \"factory\": {\r\n                        \"0\": \"5\",\r\n                        \"1\": \"d\",\r\n                        \"2\": \"6\",\r\n                        \"3\": \"e\",\r\n                        \"4\": \"4\",\r\n                        \"5\": \"5\",\r\n                        \"6\": \"7\",\r\n                        \"7\": \"c\",\r\n                        \"8\": \"7\",\r\n                        \"9\": \"6\",\r\n                        \"10\": \"2\",\r\n                        \"11\": \"f\",\r\n                        \"12\": \"2\",\r\n                        \"13\": \"d\",\r\n                        \"14\": \"4\",\r\n                        \"15\": \"8\",\r\n                        \"16\": \"f\",\r\n                        \"17\": \"0\",\r\n                        \"18\": \"6\",\r\n                        \"19\": \"8\",\r\n                        \"20\": \"8\",\r\n                        \"21\": \"8\",\r\n                        \"22\": \"6\",\r\n                        \"23\": \"d\"\r\n                    },\r\n                    \"client\": {\r\n                        \"0\": \"5\",\r\n                        \"1\": \"d\",\r\n                        \"2\": \"6\",\r\n                        \"3\": \"e\",\r\n                        \"4\": \"4\",\r\n                        \"5\": \"2\",\r\n                        \"6\": \"4\",\r\n                        \"7\": \"0\",\r\n                        \"8\": \"2\",\r\n                        \"9\": \"8\",\r\n                        \"10\": \"8\",\r\n                        \"11\": \"e\",\r\n                        \"12\": \"d\",\r\n                        \"13\": \"e\",\r\n                        \"14\": \"4\",\r\n                        \"15\": \"7\",\r\n                        \"16\": \"1\",\r\n                        \"17\": \"e\",\r\n                        \"18\": \"7\",\r\n                        \"19\": \"2\",\r\n                        \"20\": \"6\",\r\n                        \"21\": \"1\",\r\n                        \"22\": \"0\",\r\n                        \"23\": \"3\"\r\n                    },\r\n                    \"sku\": \"12345\",\r\n                    \"id\": \"5d6fbbe94e7c9554792b22b4\"\r\n                },\r\n                \"id\": \"5d8db9bf0dc976285007b04e\"\r\n            }\r\n]```\r\n\r\n**System**\r\n- Node.js version: v10.5\r\n- NPM version: v6.7\r\n- Strapi version: Beta 16.6\r\n- Database: MongoDB\r\n- Operating system: Windows 10\r\n\r\n**Possible solution**\r\nNow the id recovers its normal form with Object.values(strangeObjectID).reduce((a,b) => a+b, \"\"), maybe it lacks this in some point of the code. Or maybe there's a playful spread operator messing the string ID\r\n"},{"labels":[null,null,null,"bug"],"text":"Users-Permissions plugin graphql schema resolvers are loading the Context variable with brackets {}, which returns undefined. If I remove brackets it works. \r\n\r\n![image](https://user-images.githubusercontent.com/1816294/65742654-4a64d700-e11b-11e9-91dd-7f346bd1c53a.png)\r\n\r\nYou can test on graphql playground:\r\n`query {\r\n  roles {\r\n    name\r\n  }\r\n}`\r\nError: Cannot read property 'badRequest' of undefined\r\n\r\n![image](https://user-images.githubusercontent.com/1816294/65742556-e3dfb900-e11a-11e9-9232-cad8d7fab3c4.png)\r\n\r\n**If I remove brackets it works:**\r\n\r\n![image](https://user-images.githubusercontent.com/1816294/65743612-96197f80-e11f-11e9-87e4-d86c76255fae.png)\r\n\r\n![image](https://user-images.githubusercontent.com/1816294/65743644-b5b0a800-e11f-11e9-80c6-f07ef30cc935.png)\r\n\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.6\r\n- Database: mongo\r\n- Operating system: windows 10\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nClicking on the \"Settings\" button on the PluginCard for plugin Content Manager causes the admin UI to break with the error \"Something went wrong.\" It's basically the same bug that has been reported in #3942 but in another place.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to 'Marketplace'\r\n2. Click on 'Settings' on the Content Manager PluginCard.\r\n3. See the \"Something went wrong\" error.\r\n\r\n**Expected behavior**\r\nI expect to see the settings page for Content Manager plugin. \r\n\r\n**Screenshots**\r\n<img width=\"1123\" alt=\"Skärmavbild 2019-09-26 kl  09 48 56\" src=\"https://user-images.githubusercontent.com/149738/65669415-ca1f7280-e043-11e9-9353-08a82823d044.png\">\r\n\r\n<img width=\"1127\" alt=\"Skärmavbild 2019-09-26 kl  09 56 14\" src=\"https://user-images.githubusercontent.com/149738/65669463-e7ecd780-e043-11e9-9b33-f2442085ce15.png\">\r\n\r\n**System**\r\n- Node.js version: v10.15.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.16.5\r\n- Database: \r\n- Operating system: macOS\r\n\r\nI know how to fix this so I'm willing to contribute with a PR to solve the incorrect url. Let me know if you would like me to do so."},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen table has no `id` property (e.g. column_id) `idAttribute` mentioned in [Model options](https://strapi.io/documentation/3.0.0-beta.x/guides/models.html#model-information) does not work, since it's hardcoded here\r\nA clear and concise description of what the bug is.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a database with table that has PK with different name rather than 'id'\r\n2. Create a model for this table\r\n3. You cannot use your custom id to perform CRUD requests in admin panel\r\n\r\n**Expected behavior**\r\n- Id shouldn't be visible in list view in admin panel. \r\n- User could tap on entity to go to edit screen (now undefined)\r\n- Resolve crash by value [hardcoded here](https://github.com/strapi/strapi/blob/b2a81821dcc5be8b870c8137a6225ac3f978535d/packages/strapi-hook-bookshelf/lib/mount-models.js#L48)\r\n\r\n**Screenshots**\r\n<img width=\"295\" alt=\"Screen Shot 2019-09-24 at 03 20 43\" src=\"https://user-images.githubusercontent.com/1626752/65474096-d99f8f80-de7a-11e9-9868-b5bc4930f2f0.png\">\r\n\r\n**Code snippets**\r\nAttribute 'id' hardcoded everywhere across `strapi-plugin-content-manager`\r\n\r\n**System**\r\n- Node.js version: tried with v10.15.3 and v12.4.0 \r\n- NPM version: v6.11.3\r\n- Strapi version: latest\r\n- Database: mysql\r\n- Operating system: Mac OS \r\n\r\n**Additional context**\r\nThere are also bookshelf plugin that managing synchronization needs to be resolved with proper id attributes.\r\n\r\n"},{"labels":[null,"bug"],"text":"**Describe the bug**\r\nWhen I do a GraphQL query to fetch one content type item GraphQL is responding really slow, from 3 seconds to sometimes 8 or 9 seconds. When I try the same call with REST it's response time is +/- 300ms.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Import a lot of items (in my case 5407 items)\r\n2. Query one of that item with GraphQL\r\n\r\n**Expected behavior**\r\nA quick response\r\n\r\n**Screenshots**\r\nREST (deals/5d6a8e91e6927e01756bd892)\r\n![image](https://user-images.githubusercontent.com/39594925/65423952-a1606880-de0a-11e9-9129-2d219d1aff4b.png)\r\nGraphQL (graphql?id=5d6a8e91e6927e01756bd892)\r\n![image](https://user-images.githubusercontent.com/39594925/65424136-0fa52b00-de0b-11e9-8d83-5de1e1c8c230.png)\r\n\r\n**Code snippets**\r\nGraphQL query:\r\n`query {\r\n  deal(id: \"5d6a8e91e6927e01756bd892\") {\r\n    id\r\n    automatic\r\n    title\r\n    intro\r\n    price\r\n    days\r\n    nights\r\n    date\r\n    persons\r\n    slug\r\n    show_on_homepage\r\n    automatic\r\n    additional_html\r\n    website {\r\n      id\r\n      country_code\r\n    }\r\n    providers {\r\n      id\r\n      name\r\n    }\r\n    arrival_airport {\r\n      id\r\n      name\r\n    }\r\n    departure_airport {\r\n      id\r\n      name\r\n    }\r\n    dealtypes {\r\n      id\r\n      name\r\n    }\r\n    booking_examples {\r\n      id\r\n      title\r\n      url\r\n      image {\r\n        id\r\n        url\r\n      }\r\n    }\r\n    board_type {\r\n      id\r\n      name\r\n    }\r\n    dealproviders {\r\n      id\r\n      deeplink\r\n      original_link\r\n      active\r\n      not_affiliate\r\n      provider {\r\n        id\r\n      }\r\n    }\r\n    providers {\r\n      id\r\n      name\r\n    }\r\n    notes\r\n    including_flight\r\n    including_transfer\r\n    including_rentalcar\r\n    including_accommodation\r\n    accommodation {\r\n      id\r\n      name\r\n    }\r\n    selected_media\r\n    destination {\r\n      id\r\n      name\r\n      parent {\r\n        name\r\n      }\r\n    }\r\n    affiliate_url\r\n    publish_date\r\n    expire_date\r\n    alternative_date\r\n    formula_price_4_lg\r\n    formula_price_4_hp\r\n    formula_price_4_ai\r\n    formula_price_8_lg\r\n    formula_price_8_hp\r\n    formula_price_8_ai\r\n    formula_price_15_lg\r\n    formula_price_15_hp\r\n    formula_price_15_ai\r\n    discount\r\n    discount_expire\r\n    created_by {\r\n      email\r\n      username\r\n    }\r\n    edited_by {\r\n      email\r\n      username\r\n    }\r\n    createdAt\r\n    updatedAt\r\n    hide_partners\r\n    published_deal {\r\n      wordpress_id\r\n    }\r\n  }\r\n}\r\n`\r\n\r\n**System**\r\n- Node.js version: v10.16.1\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.5\r\n- ~~Database: Mongoose (MongoDB Atlas)~~\r\n- Operating system: Ubuntu 18.04\r\n\r\nEdit by @derrickmehaffy Issue appears on all Databases Mongo, MySQL, and Postgres"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nstrapi-plugin-content-manager: boolean field should set default (to false)\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content type with boolean field, set required to true, and default value is false\r\n2. Create new content then save\r\n3. See error: \"field is required\".\r\n4. You can click false/off -- which is already default -- to save it properly\r\n\r\n**Expected behavior**\r\n\r\nDefault is false, as intended by content type, so can immediately save.\r\n\r\n**System**\r\n- Node.js version: v10.16.3 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 6.11.3\r\n- Strapi version: v3.0.0-beta.16.5 <!-- Please make sure you are on the latest version -->\r\n- Database: MongoDB\r\n- Operating system: Windows 10 1903\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nAll content types are not visible in the roles & permissions tab under public. I have confirmed that routes are associated with these content types.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Download Strapi Docker\r\n2. Create MySQL project with newest Beta (16.4)\r\n3. Create various content types.\r\n4. Check permissions for \"public.\"\r\n\r\n**Expected behavior**\r\nI should see all content types under permissions.\r\n\r\n**Screenshots**\r\n<img width=\"1013\" alt=\"Screen Shot 2019-09-18 at 2 13 06 PM\" src=\"https://user-images.githubusercontent.com/28883798/65174245-82369500-da1e-11e9-8cc4-d391036b8b1b.png\">\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 10 LTS\r\n- NPM version: 6.9.0\r\n- Yarn version: v1.17.3\r\n- Strapi version: Beta 16.4\r\n- Database: MySQL 8\r\n- Operating system: CentOS in Docker\r\n\r\n**Additional context**\r\nI re-cloned my repo to build a fresh local database volume. In my primary app, only one content type is not appearing. In my re-cloned project with a fresh database, nearly no types are appearing. Of note, in my primary project, along with the missing type, an option for delete is missing for one type.\r\n<img width=\"770\" alt=\"Screen Shot 2019-09-18 at 2 16 51 PM\" src=\"https://user-images.githubusercontent.com/28883798/65174593-333d2f80-da1f-11e9-8750-d7976661055f.png\">\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI noticed that i can use user mutations, f.e. deleteUser, without any auth. Shouldnt that be secured by default?\r\nOtherwise user can randomly be deleted.\r\n\r\nWhen i check the graphql schema in\r\nnode_modules/strapi-plugin-users-permissions/config/schema.graphql:110\r\ni see it should use the controller and actually permissions should be applied, no?\r\n>await strapi.plugins['users-permissions'].controllers.user.destroy(context);\r\n\r\nBut in tests or apollo client no JWT token is provided and user still gets deleted.\r\n\r\nMaybe the `plugins.users-permissions.isAuthenticated` policy needs to be applied?\r\n\r\n**Steps to reproduce the behavior**\r\n1. Bootstrap strapi\r\n2. Install graphQL plugin\r\n3. Create a user in backend\r\n4. Go to apollo client and run\r\n```\r\nmutation deleteUser {\r\n  deleteUser(input: { where: { id: 1 } }) {\r\n    user {\r\n      id\r\n      username\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Expected behavior**\r\nPermissions for authenticated & public should not allow deletion of non owned users.  \r\nDeletion should fail without a valid admin or owner JWT token.\r\n\r\n**Code snippets**\r\nTests:\r\n```\r\ndescribe('POST /auth/local/register', () => {\r\n    it('should register new user', async () => {\r\n      await request(strapi.config.url)\r\n        .post('/auth/local/register')\r\n        .send({\r\n          username: 'tester',\r\n          email: 'test@test.io',\r\n          password: 'testPassword'\r\n        })\r\n        .expect(200)\r\n        .expect('Content-Type', /json/)\r\n        .then(res => {\r\n          userId = res.body.user.id\r\n          console.log(res.error)\r\n        })\r\n    })\r\n    it('should delete user', async () => {\r\n      await request(strapi.config.url)\r\n        .post('/graphql')\r\n        .send(\r\n          {\r\n            query: `mutation deleteUser { \r\n              deleteUser(input: { where: { id: ${userId} }) {\r\n                user {\r\n                      username\r\n                    }\r\n              }\r\n            }`\r\n          })\r\n        .expect(200)\r\n        .expect('Content-Type', /json/)\r\n        .then(res => {\r\n          console.log(res.error) \r\n        })\r\n    })\r\n  })\r\n```\r\n\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- Yarn version: 1.17.3 \r\n- Strapi version: 3.0.0-beta.16.4\r\n- Database: Postgres\r\n- Operating system: Ubuntu\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen creating a relation between a group and another content type the server crashes\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to the content type builder and create a group \r\n2. Add a relation with any model\r\n3. save\r\n4. the server crashes\r\n\r\n**Expected behavior**\r\nThe server should restart properly\r\n\r\n**Screenshots**\r\n<img width=\"1205\" alt=\"Screenshot 2019-09-17 at 10 02 52\" src=\"https://user-images.githubusercontent.com/13311463/65023032-563de580-d932-11e9-9e51-df65fef069d1.png\">\r\n\r\n\r\n**System**\r\n- Node.js version: 12.10.0\r\n- NPM version: 6\r\n- Strapi version: beta 16.3\r\n- Database: sqlite\r\n- Operating system:\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen I have a group that have a relation with the **User** model, I have an issue to fetch **Users** data when I want to create a group entry.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a group with a relation with **User** (don't care the relation type)\r\n2. Add your group in a content type (activate the repeatable option)\r\n3. Try to add a group entry.\r\n\r\n**Expected behavior**\r\nBe able to fetch **Users**.\r\n\r\n**Investigation**\r\nHere is the request that fail\r\n`http://localhost:1337/content-manager/explorer/user?_limit=20&_start=0&source=content-manager`\r\nThat try to fetch **Users** via the source `content-manager`\r\nBut for **Users** it should be `users-permissions`\r\n\r\n**System**\r\n- Node.js version: 12.6.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.3\r\n- Database: MongoDB\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nThe relation autocomplete doesn't work well.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\nUse any relation autocomplete.\r\n\r\n**Screenshots**\r\n\r\n![Sep-17-2019 09-21-25](https://user-images.githubusercontent.com/1007051/65019999-8f735700-d92c-11e9-9ef7-0b485cf6b5d8.gif)\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: v6.11.3\r\n- Strapi version: v3.0.0-beta.16.3\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to content type builder and create 2 content types `test` and `anothertest`\r\n2. Create a new group that has a relation with `anothertest`\r\n3. Add a repeatable group to `test`\r\n4. Add some entries to `anothertest` content type using the content manager\r\n5. add some entries to `anothertest` and especially link some relations in the group section.\r\n6. try navigating back and forth using the link from the group relation field \r\n7. See the app crashes\r\n\r\n**Expected behavior**\r\nThe app shouldn't crash\r\n\r\n**Screenshots**\r\n<img width=\"1202\" alt=\"Screenshot 2019-09-16 at 17 46 04\" src=\"https://user-images.githubusercontent.com/13311463/64972641-ea179f00-d8a9-11e9-806d-6f6f9a688ac9.png\">\r\n\r\n\r\n**System**\r\n- Node.js version: v12.10.0\r\n- NPM version: 6.10.3\r\n- Strapi version: beta 16 (experimental branch)\r\n- Database: sqlite\r\n- Operating system: macOS Mojave\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nSee the `findOne` controller `ctx.params` from HTTP API (`id`) vs GraphQL query (`_id`):\r\n\r\n<img width=\"588\" alt=\"Screenshot 2019-09-14 at 14 50 46\" src=\"https://user-images.githubusercontent.com/1007051/64945800-aacd5c00-d871-11e9-89c9-d7b5e725de20.png\">\r\n\r\n<img width=\"510\" alt=\"Screenshot 2019-09-14 at 14 34 31\" src=\"https://user-images.githubusercontent.com/1007051/64945801-abfe8900-d871-11e9-9841-20a36eb160d2.png\">\r\n\r\nAlso if I change the `path` in the `routes.json` from:\r\n\r\n```\r\n\"path\": \"/battles/:id\",\r\n```\r\n\r\nTo:\r\n\r\n```\r\n\"path\": \"/battles/:other\",\r\n```\r\n\r\nThe HTTP API returns `other`, but the GraphQL query returns `_id`.\r\n\r\n**Expected behavior**\r\nReturn the name from the `routes.json` variable.\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: v6.11.3\r\n- Strapi version: v3.0.0-beta.16.3\r\n- Database: MongoDB\r\n- Operating system: macOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a group with a number field and a relation field\r\n2. Add this newly created group as a repeatable group to a content type\r\n3. Go to this content type page and create a new item\r\n4. Fill in the content type fields and add multiple group items (add a number and select in the drop down a value for the relation)\r\n5. Save the entry\r\n6. You go back to the list view, click on the newly created item to go to the details page\r\n7. go to the repeatable group and you will see that the number field has a value but that the relation field does not show up\r\n8. go to http://localhost:1337/graphql and create a query to check if the data was saved\r\n9. you will see that the value you selected in your relation field in persister in the db but just not visible in the admin UI\r\n\r\n**Expected behavior**\r\nThe selected value in the repeatable group relation field should be visible\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/4890827/64914038-516b0d00-d74b-11e9-895a-85a85497c3e2.png)\r\n\r\n**System**\r\n- Node.js version: v12\r\n- Strapi version: beta.16.3\r\n"},{"labels":[null,null,null,"bug"],"text":"Hi, sorry for my english I'm french :/\r\n\r\n**Describe the bug**\r\nWhen I use filter on date there is no result  with Sqlite but with same data and MariaDB this is working.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to model file\r\n2. Create a afterCreate hook\r\n3. Try a find with this param : \r\n`.find({created_at_gt: \"2019-09-11T05:57:55.175Z\"})`\r\n4. Check result\r\n\r\n**Expected behavior**\r\nAn array of entries that match\r\n\r\n\r\n**System**\r\n- Node.js version: 12.10.0\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.16.3\r\n- Database: Sqlite\r\n- Operating system: Debian\r\n\r\n**Additional context**\r\nThis is working on MariaDB\r\n"},{"labels":[null,null,"bug"],"text":"Hi.\r\n\r\n**System**\r\nNode.js version: v10.16.3\r\nNPM version: v6.9.0\r\nStrapi version: 3.0.0-beta.16.3\r\nDatabase: MongoDB\r\nOperating system: Windows\r\n\r\n**Question**\r\nHow do I extend the back-end queries to get nested objects? \r\nIs there a Strapi guide?\r\n\r\n![image](https://user-images.githubusercontent.com/1944368/64911410-734b9c00-d719-11e9-9da5-408a0ff65640.png)\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIt's impossible to create model with a Date that is set to unix timestamp 0.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content type.\r\n2. Add a Date field. Set default value to 1970, 1 Januari, 00:00:00.\r\n3. Try to create a model of that content type you created.\r\n4. See error\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/476567/64903772-2935cc80-d6bf-11e9-8168-ec04ff4bad38.png)\r\n\r\n![image](https://user-images.githubusercontent.com/476567/64903769-1a4f1a00-d6bf-11e9-8522-cacd502d3b4d.png)\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.3\r\n- Database: postgres\r\n- Operating system: Windows 10\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nWhen I try to create a Strapi app using the `npx` command, I get the following error:\r\n```\r\nBuilding your admin UI with development configuration ...\r\n\r\n● Webpack █████████████████████████ after hashing (88%)  \r\n \r\n\r\n/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1994\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t^\r\n\r\nError: Conflict: Multiple assets emit to the same filename 4b01bcdb1773d629a105a7754dc9ded1.png\r\n    at Compilation.emitAsset (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1994:11)\r\n    at Compilation.createModuleAssets (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:2075:11)\r\n    at hooks.optimizeTree.callAsync.err (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1375:9)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/xxx/workspace/my-project/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:9:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/home/xxx/workspace/my-project/node_modules/tapable/lib/Hook.js:154:20)\r\n    at Compilation.seal (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1323:27)\r\n    at compilation.finish.err (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compiler.js:675:18)\r\n    at hooks.finishModules.callAsync.err (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1242:4)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/xxx/workspace/my-project/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:31:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/home/xxx/workspace/my-project/node_modules/tapable/lib/Hook.js:154:20)\r\n    at Compilation.finish (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1234:28)\r\n    at hooks.make.callAsync.err (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compiler.js:672:17)\r\n    at _done (eval at create (/home/xxx/workspace/my-project/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:9:1)\r\n    at _err1 (eval at create (/home/xxx/workspace/my-project/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:32:22)\r\n    at _addModuleChain (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1166:12)\r\n    at processModuleDependencies.err (/home/xxx/workspace/my-project/node_modules/webpack/lib/Compilation.js:1078:9)\r\n```\r\n**Steps to reproduce the behavior**\r\n1. Run `npx create-strapi-app my-project --quickstart`\r\n\r\n**Expected behavior**\r\nThe project should be created and run in development mode without errors\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 10.16.3 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 6.9.0\r\n- Strapi version: I assume `npx` gets the latest Strapi version <!-- Please make sure you are on the latest version -->\r\n- Database: MongoDB\r\n- Operating system: Ubuntu 18.04\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"Describe the bug\r\nWhen adding or editing a String field of a content type, the minimum and maximum values seem to be ignored.\r\n\r\nSteps to reproduce the behavior\r\n\r\nGo to Content Type Builder\r\nClick on an existing Content Type with at least one String type field\r\nClick the edit icon on a Number field\r\nGo to Advanced\r\nCheck minimum value\r\nEnter a minimum value of 10\r\nCheck maximum value\r\nEnter a maximum value of 12\r\n\r\nExpected behavior\r\nPOSTing to the end point with strings that are too short or too long should return 500 error.\r\n\r\nSystem\r\n\r\nNode.js version: v10.16.3\r\nNPM version: 6.9.0\r\nStrapi version: 3.0.0-beta.16.2\r\nDatabase: default\r\nOperating system: Linux Container\r\n\r\nNotes\r\n\r\nThe functionality works for ints, but not strings at all via REST POST. It doesn't work for strings no matter which combination of minimum and maximum I set. However, it does seem to work for Strings in the web UI if you select 'Create an entry'.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nThe Error appeared after entering \"%\" symbol into the Search input field\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Content Types \r\n2. Fill in the Search input field by % symbol \r\n3. See error\r\n\r\n**Expected behavior**\r\nA searched entry that contains % has found\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/51051832/64780368-76e7f300-d560-11e9-8bf5-f22695cc5dc4.png)\r\n\r\n**System**\r\n- Strapi version: Strapi v3.0.0-beta.14\r\n- Operating system: Windows 10\r\n- Database: MongoDB v. 4.0.11\r\n- Browser: Google Chrome  Version 77.0.3865.75 (Official Build) (64-bit)"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a repeatable group\r\n2. go to content manager and click on the repeatable group you just created\r\n3. Change the entry title or add a placeholder to one of the group's fields then the save button will appear. Click on the save button to save the changes]\r\n4. you get an error message 'error has occured' (no log messages)\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nAfter editing the layout of a repeatable group in the content manager, I should be able to save it without error messages\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n![image](https://user-images.githubusercontent.com/4890827/64731275-28474400-d4e1-11e9-9430-9da100cd5fc2.png)\r\n\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10\r\n- NPM version:\r\n- Strapi version: 3.0.0-beta.16.2\r\n- Database: MongoDB 4.0.6\r\n- Operating system: OSX\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nA simple scaffolding and creating a api on a plugin seems broken.\r\n\r\n**Steps to reproduce the behavior**\r\n```bash\r\n$ strapi new myapp\r\n$ cd myapp/\r\n\r\n$ strapi generate:plugin myplugin\r\n$ strapi generate:api -p myplugin mymodel first:string second:string\r\n\r\n$ yarn develop\r\n\r\n$ strapi develop\r\n[2019-09-11T14:52:25.574Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-09-11T14:52:25.579Z] error TypeError: Cannot read property 'bind' of undefined\r\n    at routerChecker (/Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/router/utils/routerChecker.js:33:43)\r\n    at /Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/router/utils/composeEndpoint.js:16:34\r\n    at _.forEach.value (/Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/router/index.js:63:15)\r\n    at /Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:4905:15\r\n    at baseForOwn (/Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:2990:24)\r\n    at /Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:4874:18\r\n    at Function.forEach (/Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:9342:14)\r\n    at _.forEach (/Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/router/index.js:60:13)\r\n    at /Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:4905:15\r\n    at baseForOwn (/Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:2990:24)\r\n    at /Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:4874:18\r\n    at Function.forEach (/Users/ollebroms/Documents/testing/myapp/node_modules/lodash/lodash.js:9342:14)\r\n    at Object.initialize (/Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/router/index.js:49:11)\r\n    at Promise.resolve.then (/Users/ollebroms/Documents/testing/myapp/node_modules/strapi/lib/middlewares/index.js:54:28)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n**Expected behavior**\r\nI except the application to start and it should show the model in the sidebar and I don't except that I need to provide any controller actions.\r\n\r\nThis will work if it's not inside a plugin and I don't have to provide controller actions.\r\n```bash\r\n$ strapi new myapp\r\n$ cd myapp/\r\n\r\n$ strapi generate:api mymodel first:string second:string\r\n\r\n$ yarn develop\r\n```\r\nIt will automatically show up in the sidebar:\r\n![image](https://user-images.githubusercontent.com/476567/64710298-fd94c580-d4b7-11e9-9fb5-73553965eee6.png)\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16.1\r\n- Database: any\r\n- Operating system: any\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nAfter updating to 3.0.0-beta16, the update User endpoint now requires `email`, `username`, `password` in the body.\r\n\r\nNote: If this is not intended, I believe it should take these fields from `ctx.state.user` rather than `ctx.request.body`.\r\n\r\neg:  \r\nReplace ```const { email, username, password } = ctx.request.body;``` with   \r\n```const { email, username, password } = ctx.state.user;```\r\n\r\nLet me know if you would like a Pull Request 👍 \r\n\r\n**Steps to reproduce the behavior**\r\n1. Make PUT request to /users/:id\r\n2. Update any field in the User model\r\n\r\n**Expected behavior**\r\nAble to update the field.\r\n\r\n**Code snippets**\r\n```\r\n{\r\n    \"statusCode\": 400,\r\n    \"error\": \"Bad Request\",\r\n    \"message\": \"missing.email\"\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.11.3\r\n- Strapi version: 3.0.0-beta16\r\n- Database: MongoDB\r\n- Operating system: macOS"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI used to create entry by following algorithm:\r\n1. Uploading and compressing images\r\n2. Creating entry with a reference to uploaded file.\r\nExample of payload\r\n```\r\n{\r\n  \"name\": \"New company 2\",\r\n  \"description\": \"<p>New company description</p>\",\r\n  \"isVIP\": false,\r\n  \"logo\": {\r\n    \"_id\": \"5d775bbf08e55100175e9f0e\",\r\n    \"name\": \"310x204-@WALLPAPERS.jpg\",\r\n    \"sha256\": \"eLqaq6VQDA0ba4fIJwvFci0ze7f88hC7qzksfAOm7jY\",\r\n    \"hash\": \"70b90cb05be048058f9dc56e538af3e2\",\r\n    \"ext\": \".jpg\",\r\n    \"mime\": \"image/jpeg\",\r\n    \"size\": \"3.91\",\r\n    \"url\": \"https://s3.eu-west-3.amazonaws.com/mc2.ub.am-uploads/70b90cb05be048058f9dc56e538af3e2.jpg\",\r\n    \"provider\": \"aws-s3\",\r\n    \"related\": [],\r\n    \"createdAt\": \"2019-09-10T08:15:59.621Z\",\r\n    \"updatedAt\": \"2019-09-10T08:15:59.636Z\",\r\n    \"__v\": 0,\r\n    \"id\": \"5d775bbf08e55100175e9f0e\"\r\n  },\r\n  \"addresses\": [],\r\n  \"phones\": [],\r\n  \"positions\": [],\r\n  \"links\": [],\r\n  \"region\": \"cern\",\r\n  \"lang\": \"en\",\r\n  \"categories\": [\r\n    \"5d50129334b6a093412b568e\"\r\n  ]\r\n}\r\n```\r\nBut in beta.16 I get\r\n```\r\n[2019-09-10T08:15:59.827Z] error TypeError: Cannot read property 'globalId' of undefined \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at /app/node_modules/strapi-hook-mongoose/lib/relations.js:214:38 \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at Array.map (<anonymous>) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at /app/node_modules/strapi-hook-mongoose/lib/relations.js:210:43 \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at Array.reduce (<anonymous>) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at Function.update [as updateRelations] (/app/node_modules/strapi-hook-mongoose/lib/relations.js:38:59) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at runMicrotasks (<anonymous>) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at processTicksAndRejections (internal/process/task_queues.js:93:5) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async Promise.all (index 0) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async Function.update [as updateRelations] (/app/node_modules/strapi-hook-mongoose/lib/relations.js:300:5) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async Object.create (/app/node_modules/strapi/lib/core-api/service.js:52:21) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async Object.create (/app/api/company/controllers/Company.js:49:21) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async /app/node_modules/strapi/lib/middlewares/router/utils/routerChecker.js:67:22 \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async module.exports (/app/node_modules/strapi-plugin-users-permissions/config/policies/permissions.js:49:14) \r\nSep 10 01:16:00 mc2-api-stage app/web.1:      at async /app/node_modules/strapi-utils/lib/policy.js:111:7 \r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16\r\n- Database: MongoDB\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen clicking on the settings gear for the content-manager plugin in the plugins menu a \"Something went wrong\" appears and you have to close the adminUI and reopen it\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Plugins\r\n2. Click on the gear icon next to Content-Manager. \r\n3. See error\r\n\r\n**Expected behavior**\r\nThat button needs to be removed would be my guess\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/8593673/64591204-1db07180-d35e-11e9-8e8d-c3dfd47e232a.png)\r\n\r\n![image](https://user-images.githubusercontent.com/8593673/64591234-30c34180-d35e-11e9-81e5-9bd8f7be65e3.png)\r\n\r\n**System**\r\n- Node.js version: v12\r\n- NPM version: v6\r\n- Strapi version: beta.16\r\n- Database: MariaDB 10.4\r\n- Operating system: Ubuntu 18.04 LTS\r\n\r\n**Additional context**\r\nN/A\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n\r\nIn FireFox or Safari, it's not possible to submit a field that has a decimal value, due to HTML validation.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. In Content Type Builder, create a number type and set as either float or decimal.\r\n2. Add a new entry using either FF or Safari. Enter a value with a decimal like `92.4` and hit submit.\r\n\r\n**Expected behavior**\r\n\r\nThe form should accept the value.\r\n\r\n**Actual behavior**\r\n\r\nIn FF and Safari, HTML validation says this value is not acceptable.\r\n\r\n**Screenshots**\r\n\r\nFF:\r\n<img width=\"350\" alt=\"msrp decimal\" src=\"https://user-images.githubusercontent.com/50032291/64567089-f00bfe00-d346-11e9-9b74-099131af6bf6.png\">\r\n\r\nSafari:\r\n<img width=\"208\" alt=\"safari decimal\" src=\"https://user-images.githubusercontent.com/50032291/64567114-ff8b4700-d346-11e9-8586-ad23fc245b05.png\">\r\n\r\n**Code snippets**\r\n\r\n```\r\n<input class=\"input__node_modules-strapi-helper-plugin-dist-dseeff__42fsd form-control\" id=\"TEST\" name=\"TEST\" placeholder=\" \" step=\"1\" tabindex=\"0\" type=\"number\" value=\"34.55\">\r\n```\r\n\r\n**Cause**\r\n\r\nCause is the `step=\"1\"` on the HTML attirbute. If I inspect the HTML and edit it to `step=\"any\"`, then it submits and accepts the decimal value.\r\n\r\n**Suggested solution**\r\n\r\nShort term, to fix this asap, use `step=\"any\"`. Long term, default to `step=\"any\"` and allow a user to define the desired step size when creating a field in Content Type Builder.\r\n\r\n**System**\r\n\r\n- Strapi version: beta 16\r\n- Database: Sqlite\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nUpdating strapi from beta-15 to beta-16 leads to an error:\r\n```\r\n[2019-09-09T16:30:16.843Z] error Bootstrap function in plugin \"users-permissions\" failed\r\n[2019-09-09T16:30:16.845Z] error TypeError: Cannot read property 'id' of null\r\n    at permissions.reduce (/Users/nicolaniro/dev/strapi/node_modules/strapi-plugin-users-permissions/services/UsersPermissions.js:437:116)\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. `strapi new strapi` (this will install strapi beta-15)\r\n2. select mysql (i have amazon RDS free tier)\r\n3. `cd strapi`\r\n4. `npm install`\r\n\r\n5. Do the migration from 15 to 16 following [the official guide](https://strapi.io/documentation/3.0.0-beta.x/migration-guide/migration-guide-beta.15-to-beta.16.html#bootstrap-function), in particular update from 15 to 16 these packages:\r\n```\r\n    \"strapi\": \"3.0.0-beta.16\",\r\n    \"strapi-admin\": \"3.0.0-beta.16\",\r\n    \"strapi-utils\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-settings-manager\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-content-type-builder\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-content-manager\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-graphql\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-users-permissions\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-email\": \"3.0.0-beta.16\",\r\n    \"strapi-plugin-upload\": \"3.0.0-beta.16\",\r\n    \"strapi-hook-bookshelf\": \"3.0.0-beta.16\",\r\n    \"strapi-hook-knex\": \"3.0.0-beta.16\",\r\n```\r\n\r\n6. modify /strapi/config/functions/bootstrap.js \r\n\r\n```\r\nconst doingNothing = () => console.log(\"Doing nothing\")\r\nmodule.exports = async () => {\r\n  await doingNothing();\r\n};\r\n```\r\n7. `npm install`\r\n8. `rm -rf ./build`\r\n9. `npm run build`\r\n10. `npm run dev`\r\n\r\n\r\n\r\n**Expected behavior**\r\nexpected strapi to start\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: beta-15 upgrating to 16\r\n- Operating system: MAC O/S 10.14 MOJAVE\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nImpossible to find content type permission of a content type I created.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type names `restaurant`\r\n2. Go to Roles & Permissions\r\n3. Check Application permissions in any role (you will see `Restaurant` permissions)\r\n4. Go in the content type builder and delete the `restaurant` content type.\r\n5. Recreate a content type with the same name.\r\n5. Recheck the role, the `Restaurant` permissions don't exist.\r\n\r\n**Expected behavior**\r\nI expected to have the ability to manage `Restaurant` permissions.\r\n\r\n**System**\r\n- Node.js version: v12.6.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.16\r\n- Database: SQLite\r\n- Operating system: MacOS\r\n\r\n**Additional context**\r\nWe can notice the permissions for the `Authenticated` role works fine!\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI have two table: terms & links\r\n\"link\" record is used to describe the relationship between two terms\r\nThe content types can be saved without problem, but when I was trying to add a link record for two terms, i cannot save successfully.\r\n\r\n**Steps to reproduce the behavior**\r\n1. create 'term' content type\r\n2. create 'link' content type, add two relation columns: 1) 'subj' relate to Term via 'terms' in many-to-one 2) 'obj' relate to Term via 'terms' in many-to-one \r\n3. Add two term records, it's ok\r\n4. Add a link record for above-mentioned term records, I cannot save, error message is \"links is not defined on the model.\"\r\n\r\n**Expected behavior**\r\nlink record can be saved\r\n\r\n**Screenshots**\r\nnone\r\n\r\n**Code snippets**\r\nnone.\r\n\r\n**System**\r\n- Node.js version: 12.5\r\n- NPM version:\r\n- Strapi version: 3.0.0-beta\r\n- Database: mysql\r\n- Operating system: win10 x64\r\n\r\n**Additional context**\r\nnone.\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nRun command:  `strapi generate:model userinfo --plugin foo`\r\nYou get `project/plugins/foo/models/models/userinfo`\r\n\r\n**Expected behavior**\r\nShould be `project/plugins/foo/models/userinfo`\r\n\r\n**System**\r\n- Node.js version: 11.11.0\r\n- NPM version: 6.11.1\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: Mongo\r\n- Operating system: macOS\r\n\r\n"},{"labels":[null,null,"bug"],"text":"I'm reporting 3 issues, all related to GraphQL policies. I've also created a pull request to address these issues. Some of these issues have been reported before (will reference them), but have not been resolved.\r\n\r\n- Node.js version: 10.15.1\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: Postgres\r\n- Operating system: Mac OSX Mojave\r\n\r\n### Issue 1: Inaccurate Documentation on GraphQL Policies\r\nThe official Strapi [documentation for using policies in GraphQL resolvers](https://strapi.io/documentation/3.0.0-beta.x/guides/graphql.html#execute-a-policy-before-a-resolver) says to use `policy: []`, but the code ([here](https://github.com/strapi/strapi/blob/0b822a641bff67c9386b3c4e6dc1f21b387edd20/packages/strapi-plugin-graphql/services/Mutation.js#L29) and [here](https://github.com/strapi/strapi/blob/0b822a641bff67c9386b3c4e6dc1f21b387edd20/packages/strapi-plugin-graphql/services/Query.js#L95)) actually searches for a `policies: []` key. \r\n\r\nFurthermore, REST API routes also use `policies` (and not `policy`). Even though GraphQL can have different policies per action than REST, it still doesn't make sense for these keys to be different. \r\n\r\nAs such, documentation should be updated to instead use `policies`.\r\n\r\n### Issue 2: Policies not triggering for custom Mutations\r\nGraphQL Mutations policies defined in `schema.graphql`, specifically only those that link to **custom** actions inside controllers do not trigger. \r\n\r\nMutations that link to shadow CRUD mutations (i.e. createPost) work just fine however.\r\n\r\nFor example:\r\n\r\nIn `api/posts/config/schema.graphql`\r\n\r\n```\r\nmodule.exports = {\r\n  resolver: {\r\n    Mutation: {\r\n      customMutation: {\r\n        policies: [\"global.myCustomPolicy\"], // <-- Does not trigger\r\n        resolver: \"Post.customMutation\"\r\n      },\r\n      createPost: {\r\n        policies: [\"global.myCustomPolicy\"], // <-- Triggers alright\r\n        resolver: \"Post.create\"\r\n      },\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nRelated issues:\r\nhttps://github.com/strapi/strapi/pull/3735 - Didn't seem to fix it.\r\nhttps://github.com/strapi/strapi/issues/2766 - Predecessor to above issue\r\nhttps://github.com/strapi/strapi/issues/3413\r\n\r\n### Issue 3: Policies don't have `ctx.state.user`\r\nPolicies for **ALL** GraphQL mutations and queries (both custom and shadow crud) don't have access to `ctx.state.user`.\r\n\r\nFor example, in `config/policies/myCustomPolicy.js`\r\n```\r\n\"use strict\";\r\n\r\n/**\r\n * `myCustomPolicy` policy.\r\n */\r\n\r\nmodule.exports = async (ctx, next) => {\r\n  console.log(ctx.state.user); // Returns undefined\r\n\r\n  await next();\r\n};\r\n```\r\n\r\nIt seems that `ctx.state.user` is being populated just fine via the `permissions.js` policy in `strapi-plugin-users-permissions` [as seen here](https://github.com/strapi/strapi/blob/0b822a641bff67c9386b3c4e6dc1f21b387edd20/packages/strapi-plugin-users-permissions/config/policies/permissions.js#L21).\r\n\r\nHowever, this policy is appended to the end of the policies list (i.e. **only after all other custom policies** (as seen [here](https://github.com/strapi/strapi/blob/0b822a641bff67c9386b3c4e6dc1f21b387edd20/packages/strapi-plugin-graphql/services/Query.js#L238-L240) and [here](https://github.com/strapi/strapi/blob/0b822a641bff67c9386b3c4e6dc1f21b387edd20/packages/strapi-plugin-graphql/services/Mutation.js#L157-L159))), and thus is not accessible.\r\n\r\nRelated issue:\r\nhttps://github.com/strapi/strapi/issues/3413\r\n\r\n-----\r\n\r\nHere's the pull request:\r\n~https://github.com/strapi/strapi/pull/3881~\r\nhttps://github.com/strapi/strapi/pull/4008 (Updated for 3.0.0-beta.16.3)"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nBookshelf search query builder strips unicode/cyrillic characters preventing search in non-english languages.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a model with a text field\r\n2. Create an object of that model which has some cyrillic/unicode text in the field\r\n    Example: `{ \"title\": \"Објект\" }`)\r\n3. Run a REST request on /<model-name>?_q=\"Објект\" \r\n\r\n**Expected behavior**\r\nIt should return an array of one object following the previous example, but returns an empty array due to the query being replaced to an empty string due to the regex in `packages/strapi/lib/core-api/queries/bookshelf.js`.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nRelevant snippet causing the issue:\r\n\r\nhttps://github.com/strapi/strapi/blob/5dd0cadafe0fca6e357d12cbcd062aced196fe93/packages/strapi/lib/core-api/queries/bookshelf.js#L141\r\n\r\n**Potential fix**\r\n\r\n```js\r\nconst query = (params._q || '').replace(/[^\\u0400-\\u04FFa-zA\\+-Z0-9.-\\s]+/g, '');\r\n```\r\n\r\nChanges made:\r\n1. Added `\\u0400-\\u04FF` unicode range to cover cyrillic languages\r\n2. Added `\\+` as an exception to enable multi-word search.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta7 but applicable to all upper versions as well\r\n- Database: Postgres\r\n- Operating system: Linux"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nConsider a GET request with a policy to restrict the user to access his data.\r\n\r\nwhen i try to set ctx.query.owner in an empty ctx.query its not reflected but when the ctx.query has any other values in it means its reflected.\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a Policy with `ctx.query.owner = \"anything\";` \r\n2. Assign it to any api \r\n3. Access the api **with query string** in url - **owner will be set**\r\n4. Access the api **with no query string** in url - **owner will not be set** \r\n\r\n**Expected behavior**\r\nNo matter the the query string is empty or not i should be able to set the a key value pair in ctx.query\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: MongoDb\r\n- Operating system: Ubuntu 18.04\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIn fact, the unique fields are required even if you don't set the `required` property to true.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new Content-Type\r\n2. Add a unique field and don't mark the required checkbox\r\n5. Try to create at least two records of the created Content-Type without setting a value for the unique field\r\n6. Encounter a 500 internal server error\r\n\r\n**Expected behavior**\r\nSince the field is not required we should be able to create records with no value specified for the unique field.\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.9\r\n- Database: MongoDB\r\n- Operating system: Ubuntu\r\n\r\n**Additional context**\r\nhttps://dba.stackexchange.com/questions/211522/mongodb-show-duplicate-key-is-null"},{"labels":[null,null,null,null,"bug"],"text":"\r\ni created a polymorphic relationship to have 2 tables together in an endpoint but the content -Manager does not work in the admin\r\n\r\n<img width=\"733\" alt=\"Captura de pantalla 2019-08-29 a las 13 48 09\" src=\"https://user-images.githubusercontent.com/14913444/63941006-fb1f7e00-ca6a-11e9-8b61-b35843542d7d.png\">\r\n\r\nYou could also make an endpoint for the polymorphic table to obtain only the related data, it would be very useful for tables that are not related\r\n"},{"labels":[null,"bug"],"text":"**Describe the bug**\r\nIn model lifecycle hooks `afterDestroy` doesn't include deleted data.\r\n\r\n**Steps to reproduce the behavior**\r\n1. add content data\r\n2. delete content data with \"recycle\" button.\r\n3. lifecycle hooks `afterDestory` executed.\r\n4. in `model.attributes` was an empty object.\r\n\r\n**Expected behavior**\r\nIt should have deleted object.\r\n\r\n**Code snippets**\r\n\r\n```javascript\r\nafterDestroy: async (model, attrs, options) => {\r\n    console.log(model.attributes); // Object {}\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: v6.9.0\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: postgre\r\n- Operating system: MAC OS\r\n\r\n**Additional context**\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nAfter creating a many-to-many relationship field, try updating the label for that. The label in the Edit View of a record shows the old label. \r\n\r\n**Steps to reproduce the behavior**\r\nCreate a new many-to-many relationship field. \r\nEdit the label of this relationship field in Edit View settings. \r\n\r\n**Expected behavior**\r\nThe new label should be shown when visiting the record in the edit view. Instead, the old one is still there.\r\n\r\n**System**\r\n- Node.js version: 10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: SQLite\r\n- Operating system: macOS 10.14.5\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Document Created with Wrong Relation Field ID and Duplicate ID**\r\n\r\nLet's Say You have a relational field named `categoryID` in `users` collection to link with `Categories` collection, and also this field has a check as `unique` fields option in advanced settings. So when new user created it should have a valid `categoryID` which already exists, \r\n\r\nNow There are three cases and please make sure my case is 2nd and 3rd  as first one already asked in previous issues.\r\n\r\n1. `categoryID` not supplied then user created successfully (not my issue as I know there is notrequired fields feature currently in strapi and it's already asked)\r\n\r\n2. wrong `categoryID` supplied and user still created (that's my case), means you can pass any valid 24 digit mongodb ID from any collection (not from `categories`) and it will be accepted without any error ?\r\n\r\n3. use the same ID again and again it will created new user despite `unique` fields is checked in advanced settings in relational field??\r\n \r\n**Steps to reproduce the behavior**\r\n1. Go to 'Admin Panel Content Builder'\r\n2. Add new Content Type `Categories`\r\n3. Go to `user` collections and add relational field name `categoryID` to Categories\r\n4. Go in advanced settings tab and check the `unique field`\r\n5. Create New User from Front End using Strapi SDK or axios with any valid mongodb 24 digit ID and it will created without any error\r\n\r\n**Expected behavior**\r\nIt should not create `user` and throw error that `Category with specific ID is not exists` or `invalid category Id`.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-next.11\r\n- Database: MongoDB 3.0.14 Community\r\n- Operating system: Linux Ubuntu 14.04"},{"labels":[null,null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen adding or editing a Numer field of a content type, the minimum and maxamum values cannot be set to 0.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to Content Type Builder\r\n2. Click on an existing Content Type with at least one Number type field\r\n3. Click the edit icon on a Number field\r\n4. Go to Advanced\r\n5. Check minimum value\r\n6. Try to enter a minimum value of 0\r\n\r\n(Steps 2 and 3 can be replaced with adding a new Number field to an existing Content Type, or by creating a new Content Type and creating a new Number field).  \r\n\r\n**Expected behavior**\r\n0 to appear in the field and content added with a minimum value of less than 0 being invalid.\r\n\r\n**System**\r\n- Node.js version: v10.16.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: [whatever quickstart sets up]\r\n- Operating system: Linux\r\n\r\n**Additional context**\r\n- 0 doesn't appear in the text box but I can save without validation errors.\r\n- After saving the field with a blank minumum value, I am able to add content with a minimum value of -1.\r\n- This issue looks related to #3162 but extends to all Number types (not just integer).\r\n"},{"labels":[null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIt's not possible to edit favicon or meta titles.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Change the favicon path settings at `/config/application.json` like suggested here https://strapi.io/documentation/3.0.0-beta.x/configurations/configurations.html#application\r\n2. Watch nothing change\r\n\r\nOR\r\n\r\n1. Replace the favicon.ico in any folder\r\n2. Watch nothing change\r\n\r\n**Expected behavior**\r\nIt to be possible to override favicon and titles globally\r\n\r\n**System**\r\n- Node.js version: 12.6.0\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: Postgres\r\n- Operating system: MacOS Mojave 10.14.5\r\n\r\n**Additional context**\r\n\r\nI’ve tried...\r\n- adding a favicon to the root, public and admin directories and modified the config at /config/application.json.\r\n- Completely rebuilding strapi (deleting .cache and build folders)\r\n- Refreshing cache, trying incognito\r\n- Editing the favicon settings in middleware.json instead of application.json\r\n- Trying to override the favicon middleware with a custom middleware\r\n\r\nThe thing won't budge 😅"},{"labels":[null,null,null,"bug"],"text":"I have a relation between an user and its blog posts. Updating from beta.14 to beta.15 which contains this \"fix\" about \"Populate more user informations on POST /auth/login\" causes the following problem: when i log in with my user , i'm now getting a very BIG post result on auth, containing ALL blog posts from ALL history (which is  A LOT) giving me avatars, etc which is a LOT of data; i' storing on browser that result in `localStorage` which is now exhausting the available space, and getting this error i'm attaching.\r\n\r\n![error](https://user-images.githubusercontent.com/517228/63350036-08ce5880-c333-11e9-945e-54f386d0be38.png)\r\n\r\nGetting ALL info about an user on doing auth is not very clever i think.... going back to beta.14 and hoping for a fix on this."},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nCreating a .gitkeep file in plugins directory causes an error preventing Strapi from starting.\r\n```\r\nerror Error: ENOTDIR invalid cwd /home/user/strapi-test/plugins/.gitkeep/middlewares\r\n    at Glob._readdirError (/home/user/Socure/dev-hub/node_modules/glob/glob.js:592:21)\r\n    at /home/user/Socure/dev-hub/node_modules/glob/glob.js:553:12\r\n    at FSReqCallback.oncomplete (fs.js:153:23)\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. touch plugins/.gitkeep\r\n2. strapi develop \r\n3. See error\r\n\r\n**Expected behavior**\r\nPlugins directory should be manageable via Git.\r\n\r\n**System**\r\n- Node.js version: 12.8.0\r\n- NPM version:6.10.2\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: sqlite\r\n- Operating system: Linux\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nDeleting an entry through Graphql endpoint returns an empty object with all fields set to null.\r\n\r\nWhen running a deletePost mutation I get an error saying:\r\n`\"message\": \"Cannot return null for non-nullable field Post.id.\",`\r\n\r\nI have a content type post with two fields: \r\n* name (required)\r\n* comments \r\n\r\nWhen executing the following mutation\r\n```\r\nmutation deletePost {\r\n  deletePost(input: { where: { id: 1 } }) {\r\n    post {\r\n      id\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe entry gets deleted from the database, but the following error occurs:\r\n```\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cannot return null for non-nullable field Post.id.\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 12,\r\n          \"column\": 7\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"deletePost\",\r\n        \"post\",\r\n        \"id\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"Error: Cannot return null for non-nullable field Post.id.\",\r\n            \"    at completeValue (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:596:13)\",\r\n            \"    at completeValueCatchingError (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:531:19)\",\r\n            \"    at resolveField (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:471:10)\",\r\n            \"    at executeFields (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:311:18)\",\r\n            \"    at collectAndExecuteSubfields (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:747:10)\",\r\n            \"    at completeObjectValue (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:737:10)\",\r\n            \"    at completeValue (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:626:12)\",\r\n            \"    at completeValueCatchingError (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:531:19)\",\r\n            \"    at resolveField (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:471:10)\",\r\n            \"    at executeFields (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:311:18)\",\r\n            \"    at collectAndExecuteSubfields (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:747:10)\",\r\n            \"    at completeObjectValue (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:737:10)\",\r\n            \"    at completeValue (/Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:626:12)\",\r\n            \"    at /Users/me/strapi/strapi-api/node_modules/graphql/execution/execute.js:528:16\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"data\": {\r\n    \"deletePost\": null\r\n  }\r\n}\r\n```\r\nThe same error occurs when querying for the required `name` field.\r\n\r\nWhen a not required field in the mutation, it throws no error, but returns null:\r\n```\r\nmutation deletePost {\r\n  deletePost(input: { where: { id: 4 } }) {\r\n    post {\r\n      comments\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nResult:\r\n```\r\n{\r\n  \"data\": {\r\n    \"deletePost\": {\r\n      \"post\": {\r\n        \"comments\": null\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n0. Have the strapi graphql plugin installed\r\n1. Create a new Content Type Post \r\nwith 2 fields: `name` (required) and `comments` (not required)\r\n3. Create a Post entry\r\n2. Allow the Public User all Permissions for Post\r\n3. Go to the Graphql Interface and test the deletion query:\r\n```\r\nmutation deletePost {\r\n  deletePost(input: { where: { id: 1 } }) {\r\n    post {\r\n      id\r\n    }\r\n  }\r\n}\r\n```\r\n4. See the error\r\n\r\n**Expected behavior**\r\nI expected Strapi to return the attributes of the entry that I just deleted, but instead it only returns `null` values.\r\n\r\n**System**\r\n- Node.js version: v12.8.0\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: PostgreSQL\r\n- Operating system: macOS Mojave 10.14.5\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nLink to plugin documentation settings not translatable.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to admin\r\n2. Change to random language\r\n3. See that link to **Documentation** not changed\r\n\r\n**Expected behavior**\r\nLink must be translated to selected language.\r\n\r\n**Screenshots**\r\n<img width=\"219\" alt=\"Screenshot 2019-08-12 at 00 55 27\" src=\"https://user-images.githubusercontent.com/982358/62893921-0e410700-bd65-11e9-9505-adc09f4086c6.png\">\r\n\r\n**System**\r\n- Node.js version: v12.7.0\r\n- NPM version: 6.10.3\r\n- Strapi version: 3.0.0-beta.15\r\n- Database: SQLite\r\n- Operating system: macOS Mojave 10.14.6"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nAfter first updating entry with json fields, json fields becomes strings.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create model with json fields\r\n2. Create entry with some json data\r\n3. Update created entry (IMPORTANT: Do this through generated API, not through Admin Panel)\r\n3. Look at the response\r\n\r\n**Expected behavior**\r\nCreated entry has json data inside fields which created with json type\r\n\r\n**Code snippets**\r\nUpdate model request\r\n```\r\naddresses: []\r\ncategories: [1]\r\ndescription: null\r\nid: \"50\"\r\nisVIP: 0\r\nlang: \"ru\"\r\nlinks: []\r\nname: \"dsadas\"\r\nphones: []\r\npositions: [{category: 1, position: 1}]\r\nregion: \"cern\"\r\n```\r\nResponse\r\n```\r\naddresses: \"[]\"\r\ncategories: [{id: 1, name: \"Housing\", lang: \"en\", parent: null, slug: \"Housing\",…}]\r\ncreated_at: \"2019-08-10T21:35:15.281Z\"\r\ndescription: null\r\nid: 50\r\nisVIP: 0\r\nlang: \"ru\"\r\nlinks: \"[]\"\r\nname: \"dsadas\"\r\nphones: \"[]\"\r\npositions: \"[{\"category\":1,\"position\":1}]\"\r\nregion: \"cern\"\r\nslug: \"dsadas-423617\"\r\nupdated_at: \"2019-08-10T21:35:24.678Z\"\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: sqlite\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nAs the title says, in quickstart project _q returns all entries. Example: With a field 'title' in content type 'blog', and creating 2-3 entries.\r\nNo matter what blogs?_q=query is, all entries is returned.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create content-type 'blog'.\r\n2. Create field 'title'.\r\n3. Create 2-3 entries for type.\r\n4. GET request for blogs?_q=query\r\n5. All entries is returned, no matter what the query matches.\r\n\r\n**Expected behavior**\r\nOnly return entries matching the query.\r\n\r\n**Screenshots**\r\n[Screenshot](https://strapi.slack.com/files/U90SU3GBS/FM2QJH4CU/image.png)\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: v10\r\n- NPM version: 6.4.1\r\n- Strapi version: beta14\r\n- Database: SQLite\r\n- Operating system: Windows\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen we add user with strapi admin dashboard \r\n\r\n**Steps to reproduce the behavior**\r\n1. Add new user, name it \"server\"\r\n2. Add new role, name it also \"server\"\r\n3. server role disappears.\r\n\r\n**Expected behavior**\r\nI'm not sure if it problem with \"server\" name or if we have user and role with the same name\r\n\r\n**Screenshots**\r\nI have 6 roles (3 are hidden [1 is named server and 2 are created with different name but I renamed id to server and dissapeared])\r\nOn the list we can see only 3\r\n\r\n![image](https://user-images.githubusercontent.com/7165997/62427088-cd564c00-b6ed-11e9-9321-89f471284078.png)\r\n\r\nwhen we add user we have many roles with the same name\r\n\r\n![image](https://user-images.githubusercontent.com/7165997/62427109-26be7b00-b6ee-11e9-810f-3ad5875cae07.png)\r\n\r\n\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.\r\n\r\n**System**\r\n- Node.js version: 10.15.1\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: mongodb\r\n- Operating system: linux mint 18.2 cinnamon\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\nHi,\r\n\r\nUsing a field name of \"id\" inside an sql relation is allow, but collides with the auto-generated one at ORM/SQL layer.\r\n\r\n**Steps to reproduce the behavior**\r\nAdd a new content type.\r\nAdd a new field to it.\r\nUse \"id\" as a field name.\r\n\r\n**Expected behavior**\r\nWe may, at the most basic point, provide an extra logic inside react input to invalidate \"id\" string submission. That's just a quick fix. We may add an extra block of logic at model generator/updator layer . I'm new to strapi, no dev env set, I've just completed the quick start guide for now. If someone can provide insights about location and a bit of core logic I would handle one of the solutions with a bit of time.\r\n\r\n**Logs**\r\n```\r\n{ [Error: SQLITE_ERROR: duplicate column name: id] errno: 1, code: 'SQLITE_ERROR' }\r\n[2019-08-02T07:50:12.209Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-08-02T07:50:12.210Z] error Error: SQLITE_ERROR: duplicate column name: id\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! my-project@0.1.0 develop: `strapi develop`\r\nnpm ERR! Exit status 1\r\nnpm ERR!\r\nnpm ERR! Failed at the my-project@0.1.0 develop script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     C:\\Users\\Utilisateur\\AppData\\Roaming\\npm-cache\\_logs\\2019-08-02T07_50_12_248Z-debug.log\r\n```\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: Sqlite\r\n- Operating system: Win 64 or GNU/Linux Debian\r\n\r\nPS vraiment top de voir une initiative Française. Bonne journée !\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nI can not use camel case (or underscores or dashes) in model names to separate words in multi-word name.\r\n\r\nI have 2 models - Question and QuestionType and I want to create a one-to-many relationship between them.\r\n\r\nWhen I generate `strapi generate:api QuestionType` all seems working. Problems start when I add a relation field to QuestionType.questions (many : 1 ) Question.questionType.\r\nIt finishes without issues but then: \r\n\r\n1. it breaks admin UI. See screenshot (it renamed QuestionType to Questiontype and added questionType which is a field!, not a content type). Notice inconsistency that \"Question Type\" in Content type builder is still correct (but with space - which I think is nice formatting but adds more to confusion).\r\n\r\n2. \"QuestionType\" becomes unusable in admin UI. When I try to add one record, screen loads indefinitely. (see screenshot 2)\r\n\r\n(3. with graphql plugin, this will crash the server so I had to uninstall it)\r\n\r\n(4. generate:api allows using CamelCase for model names, but Admin UI doesn't - it forces you to all lowercase first time, but you can rename it later - which causes same issues as when generating.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create Question type in UI  with string field \"name\"\r\n2. generate QuestionType api `strapi generate:api QuestionType` or create it in UI with lowercase and then rename it to QuestionType (because of the bug 4.)\r\n3. in UI create relation field QuestionType.questions (many : 1 ) Question.questionType. (see screenshot\r\n4. in UI try to add new Quest\r\n\r\n**Expected behavior**\r\nI can name my models with camel case (or underscores or dashes to make multi-word models clearly understandable) and be able to use relations and clear UI.\r\n\r\n**Screenshots**\r\n![scr1](https://user-images.githubusercontent.com/7701755/62336467-c673e180-b513-11e9-8742-076c499ca3e4.png)\r\n![scr2](https://user-images.githubusercontent.com/7701755/62336466-c673e180-b513-11e9-8134-50ca2c50be7f.png)\r\n![scr3](https://user-images.githubusercontent.com/7701755/62336465-c5db4b00-b513-11e9-974e-a58d9f4fe4b1.png)\r\n\r\n\r\n\r\n**System**\r\n- Node.js version: 10.15.1\r\n- NPM version: 6.8.0\r\n- Strapi version: Strapi v3.0.0-beta.14\r\n- Database: PostgreSQL\r\n- Operating system: MacOS 10.14.6\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nwhile running CLI command \"strapi generate:model category --api product\" it generate model folder inside api/product/model\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to strapi CLI \r\n2. Run strapi generate:model category --api product to generate new model inside existing product api\r\n\r\n**Expected behavior**\r\nignore creating new model folder if existing already\r\n\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version:6.4.1\r\n- Strapi version: 3.0.0-beta.14\r\n- Database: MongoDB\r\n- Operating system: Windows 10\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\n\r\nAfter creating a new user via the content-manager, the `afterCreate` hook fails to execute. (Other hooks fail as well)\r\n\r\n**Steps to reproduce the behavior**\r\n\r\n1. Create a new, confirmed user from [content manager](http://localhost:1337/admin/plugins/content-manager/user?_limit=10&_page=1&_sort=_id&source=users-permissions)\r\n2. Look for console output confirm hook ran / didn't run: `console.log('afterCreate hook, user: ${model}')`\r\n\r\n**Expected behavior**\r\n\r\nAfter creating a new user, strapi should execute the afterCreate hook, enabling us to send welcome emails & to complete other _new user_  provisioning tasks.\r\n\r\n**Code snippets**\r\n\r\npath: `extensions/users-permissions/models/User.js`\r\n\r\n```\r\n'use strict';\r\n\r\nmodule.exports = {\r\n  afterCreate: async (model, result) => {\r\n    console.info(`afterCreate hook, user: ${model}`);\r\n    // send welcome email using user's email address\r\n  },\r\n  afterSave: async (model, result) => {\r\n    console.info(`afterSave hook`);\r\n  },\r\n  afterUpdate: async (model, result) => {\r\n    console.info(`afterUpdate hook`);\r\n  }\r\n};\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.2\r\n- Database: MongoDB via Atlas\r\n- Operating system: MacOS High Sierra, 10.13.6\r\n\r\n**Additional context**\r\n\r\nThis routine / approach worked with a previous (1.X) version of strapi. We followed the [plugin migration guide](https://strapi.io/documentation/3.0.0-beta.x/migration-guide/migration-guide-alpha.26-to-beta.html#migrating-plugins) and are able to create new users, but these hooks never fire."},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nIf the admin path is modified in config/environments/**/server.json, the link included in a password reset email does not reflect the configured path but uses the default '/admin' path. Clicking on the link in the email redirects to an invalid URL.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Configure a custom admin path in config/environments/development/server.json, i.e., \"/panel\"\r\n2. Rebuild strapi admin\r\n3. Go to 'http://example.com/panel/plugins/users-permissions/auth/login'\r\n2. Click on 'Forgot your password?....'\r\n3. Enter your user's email address and click on 'Send Mail'\r\n4. Check the link in the Reset Password email sent to your email address. It uses the default \"/admin/...\" path when it should be \"/panel/...\"\r\n\r\n**Expected behavior**\r\nThe Reset Password email should include a link using the customized admin path rather than the default path.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9\r\n- Strapi version: beta.3\r\n- Database: mongod\r\n- Operating system: Ubuntu 18.04 LTS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\n\r\n- `Enable email confirmation` is on, and email service properly configured\r\n- and database is SQLite for development environment\r\n- Call register API to create an user, and check confirmation email. By clicking that confirmation URL, I see that, `IsConfirmed` field/switch is `ON` in admin panel, it means the user is confirmed.\r\n- But I can not login, got error `Your account email is not confirmed`\r\n\r\n**Steps to reproduce the behavior**\r\n1. Environment is `development`, database is `SQLite 3`\r\n2. Enable email confirmation\r\n3. Register and open confirmation URL in email\r\n4. Call login API\r\n5. Got `Your account email is not confirmed`\r\n\r\n**Expected behavior**\r\n\r\nIn admin panel, i see my account is confirmed, so i should login successfully\r\n\r\n**Screenshots**\r\n\r\nand i checked the users-permissions and got this:\r\n\r\n![image](https://user-images.githubusercontent.com/11701531/61616459-0b3d8400-ac9b-11e9-9d3f-a2211b088b40.png)\r\n\r\n\r\n`user.confirmed !== true`, user.confirmed is `1`(number, not true), so...\r\n\r\n**Code snippets**\r\n\r\n\r\n**System**\r\n- Node.js version: `v10.16.0`\r\n- NPM version: `6.10.1`\r\n- Strapi version: `3.0.0-beta.13`\r\n- Database: `SQLIte`\r\n- Operating system: `Mac OS X`\r\n\r\n**Additional context**\r\nin package.json: \r\n\r\n```\r\nstrapi-plugin-users-permissions\": \"3.0.0-beta.13\",\r\n```\r\n"},{"labels":[null,"bug"],"text":"Hello everyone,\r\n\r\n**The problem**\r\n\r\nMy admin panel is stuck in infinite loading after generating a plugin.\r\n\r\n**Information:**\r\nStrapi version: v3.0.0-beta.13\r\nNodejs version: 10.16.0\r\nNPM version: 6.9.0\r\nOS: Windows 10\r\n\r\n**Steps to reproduce the problem**\r\n\r\nI installed Strapi using: `strapi new my-project --quickstart`\r\n\r\nThe admin panel starts just fine.\r\n\r\nI then generated a plugin using: `strapi generate:plugin my-plugin`\r\n\r\nThe admin panel is now stuck in infinite loading. The console is giving me the error:\r\n`Error: only one instance of babel-polyfill is allowed`\r\n\r\nIf I remove the newly generated plugin the Admin panel once again starts.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe plugin is generated and the Admin panel still works.\r\n\r\n"},{"labels":[null,"bug"],"text":"The following snippet is taken from official Strapi documentation \r\nhttps://strapi.io/documentation/3.0.0-beta.x/guides/email.html#usage\r\n\r\n```\r\nawait strapi.plugins['email'].services.email.send({\r\n      to: 'somebody@estee-lauder.co.uk',\r\n      from: 'no-reply@estee-lauder.co.uk',\r\n      replyTo: 'no-reply@estee-lauder.co.uk',\r\n      subject: 'test',\r\n      text: 'test,\r\n      html: 'test'\r\n});\r\n```\r\nI injected it into an API controller which is usually located in \r\n{PROJECT_DIRECTORY}/api/{ENDPOINT}/controllers/{CONTROLLER}\r\n\r\nIt works fine every time I call this API method and email is sent out as expected, however, \r\nwhen the `to` parameter contains hyphen the below error is returned \r\n\r\n> Error: Cannot wrap non-Error object \r\n>   at Object.exports.assert (/node_modules/hoek/lib/index.js:740:11) \r\n>   at Object.exports.wrap (/node_modules/boom/lib/index.js:95:10) \r\n>   at strapi.app.use (/node_modules/strapi/lib/middlewares/boom/index.js:47:22)       \r\n>   at process._tickCallback (internal/process/next_tick.js:68:7)\r\n\r\n**System**\r\nUbuntu 18.04.2 LTS\r\nNode v10.16.0\r\nStrapi 3.0.0-beta.9 "},{"labels":[null,null,"bug"],"text":"Hey community,\r\n\r\n**Describe the bug**\r\nI try to run my fresh strapi app on production environment (latest strapi version), but i've this error after build : \r\n\r\n`TypeError: Cannot read property 'replace' of undefined`\r\n\r\n**Screenshots**\r\n\r\n![image](https://user-images.githubusercontent.com/4712791/61003076-584c5c80-a363-11e9-93d6-2908a1ea1fbf.png)\r\n\r\n**System**\r\n- Node.js version: 10.15.1\r\n- Yarn version: 1.16.0\r\n- Strapi version: latest\r\n- Database: default\r\n- Operating system: Ubuntu\r\n\r\n**Additional context**\r\nYou can see my project on [this repo](https://github.com/stephane-r/Youtube-Audio-Player-Api).\r\n\r\nThank you community !\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nUnable to set zh_Hans  language\r\n\r\n**Steps to reproduce the behavior**\r\n1. ![WX20190710-160304](https://user-images.githubusercontent.com/536297/60973543-115a6900-a35b-11e9-9643-c68a426d597a.png)\r\n2. ![WX20190710-160242](https://user-images.githubusercontent.com/536297/60973568-19b2a400-a35b-11e9-8b10-054224a6edba.png)\r\n3. ![WX20190710-160207](https://user-images.githubusercontent.com/536297/60973599-27682980-a35b-11e9-8747-be1b2b994530.png)\r\n4. ![WX20190710-160148](https://user-images.githubusercontent.com/536297/60973617-2e8f3780-a35b-11e9-8f1c-91225cfa334c.png)\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-beta.9\r\n- Operating system: Mac OS\r\n"},{"labels":[null,null,"bug"],"text":"It's currently not possible to search with the createdAt and updatedAt fields, because these fields not included here: https://github.com/strapi/strapi/blob/master/packages/strapi-utils/lib/buildQuery.js#L8\r\n\r\n**Steps to reproduce the behavior**\r\n`curl 'http://localhost:1337/whatever?createdAt_gt=2019-07-10T12:11:51.402Z'` will fail with the following message: \"Your filters contain a field 'createdAt' that doesn't appear on your model definition nor it's relations\"\r\n\r\n**Expected behavior**\r\nSearching by createdAt and updatedAt should work, it's a common feature.\r\nIt would be even better if we could also use HTTP fields like `If-Modified-Since`...\r\n\r\n**Code snippets**\r\n\r\n```const isAttribute = (model, field) => _.has(model.allAttributes, field) || model.primaryKey === field || field == \"createdAt\" || field == \"updatedAt\";``` \r\nwould probably fix the issue.\r\n\r\n**System**\r\n- Node.js version: official docker image\r\n- NPM version:\r\n- Strapi version: 3.0.0-alpha-26.2\r\n- Database: mongodb\r\n- Operating system: linux\r\n\r\n**Additional context**\r\n\r\nI need to use strapi as a \"mostly static\" CMS, and will keep data in a local cache (VERY high query rate): updatedAt and createdAt would help a lot for cache invalidation."},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen setting a boolean value through the adminUI and trying to create or update an entry the adminUI doesn't properly pass the required `1` or `0` value and instead sends the value as `true` or `false` resulting in the below error\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a model with a Boolean value\r\n2. Attempt to create an entry\r\n3. See error in strapi terminal console\r\n\r\n*Note*: it appears this does not affect data sent over rest or GraphQL as you can see in the example provided from postman\r\n\r\n**Expected behavior**\r\nThe adminUI or the backend needs to convert the user visible `true/false` to the proper bookshelf/knex form on MySQL which is `1/0` respectively as the field used in MySQL for boolean values in `tinyint`\r\n\r\n**Screenshots**\r\nPostman screenshot of REST POST request: \r\n\r\n![image](https://user-images.githubusercontent.com/8593673/60883577-62554a80-a1ff-11e9-940c-290df6ec14dd.png)\r\n\r\n**Code snippets**\r\nLog from the Strapi console:\r\n\r\n```\r\n[2019-07-09T11:06:16.571Z] error Error: ER_TRUNCATED_WRONG_VALUE_FOR_FIELD: Incorrect integer value: 'false' for column `strapi`.`posts`.`published` at row 1\r\n```\r\n\r\nModel used to test:\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"posts\",\r\n  \"info\": {\r\n    \"name\": \"post\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true,\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"title\": {\r\n      \"required\": true,\r\n      \"type\": \"string\"\r\n    },\r\n    \"body\": {\r\n      \"required\": true,\r\n      \"type\": \"text\"\r\n    },\r\n    \"published\": {\r\n      \"type\": \"boolean\"\r\n    },\r\n    \"header\": {\r\n      \"model\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\"\r\n    },\r\n    \"publishDate\": {\r\n      \"required\": true,\r\n      \"type\": \"date\"\r\n    },\r\n    \"author\": {\r\n      \"model\": \"user\",\r\n      \"plugin\": \"users-permissions\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10\r\n- NPM version: v6\r\n- Strapi version: Beta.10\r\n- Database: MariaDB 10.4\r\n- Operating system: Ubuntu 18.04\r\n"},{"labels":[null,null,"bug"],"text":"\r\n\r\n**Describe the bug**\r\nIn content with some boolean parameter isn't possible to filter.\r\n\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a content type with a boolean field for example `enabled`.\r\n2. Make the content type public.\r\n3. Create some documents.\r\n3. Make a request to the API with this param. For example: `/films?enabled=true`.\r\n4. You should get an empty response.\r\n\r\n**Expected behavior**\r\nGet the documents with the filter applyed.\r\n\r\n**Screenshots**\r\nExample content type\r\n<img width=\"868\" alt=\"imagen\" src=\"https://user-images.githubusercontent.com/5782286/60730204-f8952200-9f1a-11e9-8a66-614d7cfb148c.png\">\r\n\r\n<img width=\"1154\" alt=\"imagen\" src=\"https://user-images.githubusercontent.com/5782286/60730430-7c4f0e80-9f1b-11e9-864c-9666f27c9374.png\">\r\n\r\nempty response\r\n<img width=\"464\" alt=\"imagen\" src=\"https://user-images.githubusercontent.com/5782286/60730471-9b4da080-9f1b-11e9-8433-59411a1c619b.png\">\r\n\r\n**Code snippets**\r\n```\r\ncurl http://localhost:1337/films?enabled=true\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.9\r\n- Database: mongo\r\n- Operating system: mac os\r\n\r\n"},{"labels":[null,null,"bug"],"text":"Sometimes when trying to create new entity vie API (post) the relationship one to one are missed.\r\n\r\nIt's easy to reproduce with remote and slow database server but happen in local too.\r\n\r\n**Steps to reproduce**\r\n\r\n1. Create two entities\r\n2. Create a \"relation\" field type and set that one to one \r\n3. Use postman to call the POST api to create one of these entities setting in the body the relation field\r\n4. Try many times\r\n5. Sometimes the relation was unsetted\r\n\r\nWhen this happen the \"external keys\" is setted only in one of the two tables.\r\nNo error reported by application\r\n\r\nNode.js version: 10.16\r\nNPM version: 6.9.0\r\nStrapi version: beta and alpha\r\n\r\nSee screenshots of the same call with same data. \r\n<img width=\"979\" alt=\"Schermata 2019-07-04 alle 14 41 55\" src=\"https://user-images.githubusercontent.com/46871541/60668074-6255f300-9e6b-11e9-8851-6dca3d752764.png\">\r\n<img width=\"990\" alt=\"Schermata 2019-07-04 alle 14 41 44\" src=\"https://user-images.githubusercontent.com/46871541/60668075-6255f300-9e6b-11e9-8968-f2339136a5f3.png\">\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nA Graphql query that also contains images is very slow.\r\nWithout images it works normally.\r\n\r\n**Steps to reproduce the behavior**\r\nI have an online staging site. feel free to:\r\n1. Go to https://api.zerbinis.gr/graphql\r\n2. Run the query:\r\n```\r\nquery{\r\n  categories{\r\n    name\r\n    books(limit:10){\r\n      title\r\n    }\r\n  }\r\n}\r\n```\r\nthe speed is normal.\r\n\r\n3. Now run this query to also contain image ids:\r\n```\r\nquery{\r\n  categories{\r\n    name\r\n    books(limit:10){\r\n      title\r\n      image{\r\n        id\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nThe query takes forever and thats just with 10 books.\r\nIt is unusable when images are requested.\r\n\r\n4. Now try to request directly with rest:\r\nhttps://api.zerbinis.gr/categories\r\nIt is lighting fast while returning everything.\r\n\r\n**Expected behavior**\r\nGraphql to be almost as fast as rest\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.6\r\n- Database: Mongo Atlas\r\n- Operating system: OSX Dev & Centos 7 Production"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nCannot get the file by id, because of an error:\r\n\r\n```\r\nerror TypeError: Cannot read property 'url' of null\r\n    at findOne (/Users/alexanderkim/Sites/dmvno-cms/node_modules/strapi-plugin-upload/controllers/Upload.js:135:41)\r\n    at async /Users/alexanderkim/Sites/dmvno-cms/node_modules/strapi/lib/middlewares/router/utils/routerChecker.js:70:22\r\n    at async module.exports (/Users/alexanderkim/Sites/dmvno-cms/node_modules/strapi-plugin-users-permissions/config/policies/permissions.js:39:14)\r\n    at async /Users/alexanderkim/Sites/dmvno-cms/node_modules/strapi-utils/lib/policy.js:111:7\r\n    at async validator (/Users/alexanderkim/Sites/dmvno-cms/node_modules/koa-joi-router/joi-router.js:407:32)\r\n    at async noopMiddleware (/Users/alexanderkim/Sites/dmvno-cms/node_modules/koa-joi-router/joi-router.js:267:10)\r\n    at async specExposer (/Users/alexanderkim/Sites/dmvno-cms/node_modules/koa-joi-router/joi-router.js:448:5)\r\n    at async prepareRequest (/Users/alexanderkim/Sites/dmvno-cms/node_modules/koa-joi-router/joi-router.js:460:3)\r\n[2019-06-30T19:07:05.398Z] debug GET /upload/files/1 (14 ms)\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Make a GET request as follows:\r\n\r\n```\r\ncurl -X GET \"http://localhost:1337/upload/files/1\" -H \"accept: application/json\" -H \"Authorization: Bearer tokenID_here\"\r\n```\r\n\r\n**Expected behavior**\r\nGetting a file in response if file exists, if not - return the error, that \"file was not found\". Now it returns error 500 and message above.\r\n\r\n**System**\r\n- Node.js version: 10 LTS\r\n- NPM version: 6.9.0\r\n- Strapi version: Strapi v3.0.0-beta.8\r\n- Database: PostgreSQL 10.8\r\n- Operating system: MacOS / Ubuntu\r\n\r\n**Additional context**\r\nThis happens in all environments - dev, staging, production."},{"labels":[null,null,"bug"],"text":"### Describe the bug\r\n\r\nHello,\r\nI try to upload an image directly with graphQl mutation but it doesn't seem to work.\r\n\r\n### Steps to reproduce the behavior\r\n\r\nI work on Vue.js project\r\nI have form with input file.\r\n```\r\n      <input\r\n        @change=\"upload($event)\"\r\n        ref=\"file\"\r\n        type=\"file\"\r\n        name=\"fileInput[]\"\r\n        id=\"fileInput\"\r\n        class=\"inputfile inputfile-upload\"\r\n        capture=\"user\"\r\n      >\r\n```\r\n\r\n#### function upload:\r\n```\r\nupload (event) => {\r\n  const formData = new FormData()\r\n\r\n  formData.append('files', event.target.files[0])\r\n  axios.post('https://db.smapps.app/graphql', {\r\n          query: `\r\n            mutation UploadFile($file: Upload!) {\r\n              upload(file: $file) {\r\n                id\r\n                hash\r\n                url\r\n              }\r\n            }\r\n          `,\r\n          variables: {\r\n            file: formData,\r\n          },\r\n        })\r\n}\r\n```\r\n\r\nI have this error with 400 status:\r\n```\r\n{\"errors\":[{\"message\":\"Bad Request\",\"locations\":[{\"line\":3,\"column\":13}],\"path\":[\"upload\"],\"extensions\":{\"code\":\"INTERNAL_SERVER_ERROR\",\"exception\":{\"data\":\"Files are empty\",\"isBoom\":true,\"isServer\":false,\"output\":{\"statusCode\":400,\"payload\":{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"Bad Request\"},\"headers\":{}},\"message\":\"Bad Request\",\"stacktrace\":[\"Error: Bad Request\",\"    at Object.strapi.app.response.(anonymous function) [as badRequest] (/var/www/api/node_modules/strapi/lib/middlewares/boom/index.js:74:34)\",\"    at Object.proto.(anonymous function) [as badRequest] (/var/www/api/node_modules/delegates/index.js:40:31)\",\"    at Object.upload (/var/www/api/node_modules/strapi-plugin-upload/controllers/Upload.js:30:18)\"]}}}],\"data\":null}\r\n```\r\n\r\n### Expected behavior\r\n\r\nI would like to upload image with graphQl mutation.\r\n\r\n### Supplements\r\n\r\nI try to send to ```/graphql``` files directly instead of form Data() like : \r\n```\r\n      axios.post('https://db.smapps.app/graphql', {\r\n        query: `\r\n          mutation UploadFile($file: Upload!) {\r\n            upload(file: $file) {\r\n              id\r\n              hash\r\n              url\r\n            }\r\n          }\r\n        `,\r\n        variables: {\r\n          file: [event.target.files[0]],\r\n        },\r\n      })\r\n```\r\n\r\nAnd I have this error with 200 status:\r\n```\r\n{\"errors\":[{\"message\":\"The \\\"path\\\" argument must be one of type string, Buffer, or URL. Received type undefined\",\"locations\":[{\"line\":3,\"column\":13}],\"path\":[\"upload\"],\"extensions\":{\"code\":\"INTERNAL_SERVER_ERROR\",\"exception\":{\"stacktrace\":[\"TypeError [ERR_INVALID_ARG_TYPE]: The \\\"path\\\" argument must be one of type string, Buffer, or URL. Received type undefined\",\"    at Object.open (fs.js:408:3)\",\"    at ReadStream.open (internal/fs/streams.js:110:12)\",\"    at new ReadStream (internal/fs/streams.js:99:10)\",\"    at Object.createReadStream (fs.js:1732:10)\",\"    at Promise.all.files.map (/var/www/api/node_modules/strapi-plugin-upload/services/Upload.js:37:40)\",\"    at Array.map (<anonymous>)\",\"    at Object.bufferize (/var/www/api/node_modules/strapi-plugin-upload/services/Upload.js:36:13)\",\"    at Object.upload (/var/www/api/node_modules/strapi-plugin-upload/controllers/Upload.js:34:65)\"]}}}],\"data\":null}\r\n\r\n```\r\n\r\n### System\r\n\r\nNode.js version: 10.13.0\r\nNPM version: 6.4.1\r\nStrapi version: 3.0.0-beta.7\r\nMysql: Version 14.14 Distrib 5.7.26, for Linux (x86_64)\r\n\r\n\r\nThanks a lot for response."},{"labels":[null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nNot correct creating model with more than one avatar which has reference to the same image.\r\n\r\n**Steps to reproduce the behavior**\r\n1. You have just uploaded some image and some model with more than one avatar attributes\r\n2. Create new model instance by graphql mutation where every avatar has reference to the same image\r\n3. Only one field (avatar attribute) will have reference to the uploaded image the last fields will have undefined. Getting undefined is randomly.\r\n\r\n**Another steps to reproduce the behavior**\r\n1. You have just uploaded some image and some model instance with avatar attribute wich has reference to uploaded image\r\n2. Create new model instance by graphql mutation where every avatar has reference to the same image\r\n3. Reference to the image for previous model instance will be detach\r\n\r\n**Expected behavior**\r\nAvatars of model could has reference to the same image.\r\n\r\n**System**\r\n- Node.js version: 10.15.3\r\n- NPM version:  6.4.1\r\n- Strapi version: 3.0.0-beta.7\r\n- Database: MongoDB\r\n- Operating system: Mac OS"},{"labels":[null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWhen doing a POST to /upload to add an upload, it seems the Content-Type is REQUIRED. I was getting an error because of that missing. The fix was to add  `Content-Type: application/octet-stream`, but would be nice if strapi can handle that and give some clear error.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Build a multipart form manually with some binary file, without the `Content-Type` part header\r\n2. POST to /upload\r\n\r\n**Expected behavior**\r\nWould be nice if strapi can handle `stream.type == null`  in\r\nhttps://github.com/strapi/strapi/blob/6159fd0d569af38f5dbdea73376e8538878d851b/packages/strapi-plugin-upload/services/Upload.js#L54\r\n\r\n**System**\r\n- Node.js version:10\r\n- NPM version: 6.9\r\n- Strapi version: 3.0.0-beta.7\r\n- Database: mongo\r\n- Operating system: macOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen creating a field name in the following pattern: `Title_en`, `Title_gr` it breaks content filtering in admin panel.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create new content type (let's call it `page`)\r\n2. Add new field, for example a string type with the following name - `Title_en`\r\n3. Go to: `/admin/plugins/content-manager/page?source=content-manager`\r\n4. Open filters panel, choose `Title_en` is `123`, press enter\r\n5. You will see the following filter text:\r\n\r\n![image](https://user-images.githubusercontent.com/5739191/60212219-81102480-9882-11e9-97ae-f47073c6b4e7.png)\r\n\r\nSo it cannot search because of this.\r\n\r\n**Expected behavior**\r\nUnderscores shouldn't cause an issue with content filtering, or at least describe this behavior in documentation \r\n\r\n**System**\r\n- Node.js version: 10\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta6\r\n- Database: PostgreSQL\r\n- Operating system: MacOS 10.14.5"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI've updated my Strapi App from beta.6 to beta.7 (in order to fix some bug) but this new version has broken the Facebook connection provider (and maybe other provider...).\r\n\r\n**Steps to reproduce the behavior**\r\n1. Update to Strapi Beta.7\r\n2. Try to connect with Facebook\r\n3. An error 500 occurs\r\n\r\n```\r\nerror TypeError: Middleware stack must be an array!\r\n    at compose (node_modules/koa-compose/index.js:20:41)\r\n    at connect (extensions/users-permissions/controllers/Auth.js:269:12)\r\n```\r\n_I've overload the Auth.js but with the \"original\" version, the bug still happen._\r\n\r\n**Expected behavior**\r\nI can logged with the Facebook Provider\r\nI can registered with the Facebook Provider\r\n\r\n**System**\r\n- Node.js version: v10.14.2\r\n- NPM version: 6.9.0\r\n- Strapi version:  3.0.0-beta.7\r\n- Database: Bookshelf mysql\r\n- Operating system: Mac OS X, Debian\r\n\r\nEverything's working with **3.0.0-beta.6** (I've rollbacked twice to be sure)"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen I create a new admin, I set the password in plaintext and it gets encrypted with the hash and stored in the DB. But if I then go and edit that newly created admin, and set a new password, that password is now stored in the database as plaintext.\r\n\r\n*Note: this issue occurred using a postgres DB from Heroku*.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to [https://localhost:1337/admin/plugins/content-manager/administrator?source=admin](https://localhost:1337/admin/plugins/content-manager/administrator?source=admin)\r\n2. Click on `Add new administrator`\r\n3. Fill in the fields as normal and click `Save`\r\n4. View the `strapi_administrator` table in the postgres DB (you should see the new admin created and a hashed password)\r\n5. Now click the pencil icon to edit the admin you just created. Update the password and click `Save`\r\n6. View the `strapi_administrator` table in the postgres DB (you should see the admin password now set as plaintext in the DB, and now you cannot log back in using the new password set)\r\n\r\n**Expected behavior**\r\nThe admin password to be encrypted when being saved after editing, and being able to log in with the newly set password.\r\n\r\n**Screenshots**\r\n![1__bash](https://user-images.githubusercontent.com/1713859/60029522-3aaba180-9699-11e9-87e8-f4bd5a0a33b6.png)\r\n\r\n*Note: I only set this password to test it out, I normally set much better passwords* 😅 \r\n\r\n**System**\r\n- Node.js version: `v10.16.0`\r\n- NPM version: `6.9.0`\r\n- Strapi version: `3.0.0-beta.6`\r\n- Database: `postgres`\r\n- Operating system: `macOS Mojave 10.14.5`"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nSince many month, when I upload new files for an entity, all older files are removed from the relation table _upload_file_morph_.\r\nI wait many new Strapi update with the hope of this problem will be fixed, but not...\r\nI try to reinstall all from the beginning, but the same bug appears.\r\nI've found similar bugs fixed, but for other database system.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Upload many files to server for an entity \r\n2. Refresh and check all files are ok\r\n3. Upload new files to server for the same entity\r\n4. Refresh and check all older files and new files are ok\r\n4. See than all previous files are unlink from _upload_file_morph_ relations table\r\n\r\n**Expected behavior**\r\nIf I upload multiple files on an entity, I want to keep all relations in _upload_file_morph_ table\r\n\r\n**Model example**\r\n```\r\n    \"detail_card\": {\r\n      \"default\": \"\",\r\n      \"type\": \"string\"\r\n    },\r\n    \"card_validated\": {\r\n      \"type\": \"boolean\"\r\n    },\r\n    \"media_card\": {\r\n      \"model\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\"\r\n    },\r\n    \"media_pictures\": {\r\n      \"collection\": \"file\",\r\n      \"via\": \"related\",\r\n      \"plugin\": \"upload\"\r\n    }\r\n```\r\n- Field _media_card_ : 1 picture\r\n- Field _media_pictures_ : multiple pictures\r\n\r\n**System**\r\n- **Node.js version**: v10.14.2\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-beta.6\r\n- **Database**: bookshelf - mysql\r\n- **Operating system**: Mac OS, Debian\r\n\r\n**Additional context**\r\n- **Upload system** : Google Cloud Storage and Local\r\nThe bug appears with upload-local system or any other upload system.\r\n\r\nI used the default upload plugin without modification."},{"labels":[null,null,"bug"],"text":"# WORKAROUND \r\n\r\nA possible workarround is to lock the version of the buggy pacakge in your own project package.json \r\n[solution](https://github.com/strapi/strapi/issues/3476#issuecomment-503065437)\r\nLocking the culprit dependency like so:\r\n`\"caniuse-lite\": \"1.0.30000974\"`\r\n\r\nIt might need a cache clean of your modules and your lock file for it to work.\r\n\r\n---\r\n**Describe the bug**\r\nStrapi new project from strapi@beta-5 with postgreSQL. Strapi new without errors. Strapi admin ui build exits with error while using strapi develop.\r\n\r\n**Steps**\r\n1. npm install strapi@beta -g\r\n2. strapi new project-title: db postgresSQL.\r\n3. strapi develop\r\n\r\n**Expected behavior**\r\nNo error and strapi start.\r\n\r\n**Code snippets**\r\n`Error: ./.cache/admin/src/components/InstallPluginPopup/styles.scss\r\nModule build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\r\nModuleBuildError: Module build failed (from ./node_modules/postcss-loader/src/index.js):\r\nBrowserslistError: Unknown browser query `android all`. Maybe you are using old Browserslist or made typo in query.\r\n    at unknownQuery (/Users/FOLDER/strapi-test/strapi-test/node_modules/browserslist/index.js:204:10)\r\n    at /Users/FOLDER/strapi-test/strapi-test/node_modules/browserslist/index.js:296:11\r\n    at Array.reduce (<anonymous>)\r\n    at resolve (/Users/FOLDER/strapi-test/strapi-test/node_modules/browserslist/index.js:237:18)\r\n    at browserslist (/Users/FOLDER/strapi-test/strapi-test/node_modules/browserslist/index.js:361:16)\r\n    at supportedBrowsers.some.supportedBrowser (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss-preset-env/index.js:438:105)\r\n    at Array.some (<anonymous>)\r\n    at stagedFeatures.filter.feature (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss-preset-env/index.js:438:80)\r\n    at Array.filter (<anonymous>)\r\n    at postcss$1.plugin.opts (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss-preset-env/index.js:438:44)\r\n    at creator (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss/lib/postcss.js:133:35)\r\n    at plugins.map.plugin (/Users/FOLDER/strapi-test/strapi-test/node_modules/precss/index.js:23:52)\r\n    at Array.map (<anonymous>)\r\n    at postcss.plugin.rawopts (/Users/FOLDER/strapi-test/strapi-test/node_modules/precss/index.js:23:38)\r\n    at creator (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss/lib/postcss.js:133:35)\r\n    at Object.<anonymous> (/Users/FOLDER/strapi-test/strapi-test/node_modules/strapi-admin/postcss.config.js:6:35)\r\n    at runLoaders (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/NormalModule.js:302:20)\r\n    at /Users/FOLDER/strapi-test/strapi-test/node_modules/loader-runner/lib/LoaderRunner.js:367:11\r\n    at /Users/FOLDER/strapi-test/strapi-test/node_modules/loader-runner/lib/LoaderRunner.js:233:18\r\n    at context.callback (/Users/FOLDER/strapi-test/strapi-test/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\r\n    at Promise.resolve.then.then.catch (/Users/FOLDER/strapi-test/strapi-test/node_modules/postcss-loader/src/index.js:208:9)\r\n    at compiler.run (/Users/FOLDER/strapi-test/strapi-test/node_modules/strapi-admin/index.js:140:23)\r\n    at finalCallback (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compiler.js:220:39)\r\n    at hooks.done.callAsync.err (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compiler.js:236:13)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:24:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/Hook.js:154:20)\r\n    at onCompiled (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compiler.js:234:21)\r\n    at hooks.afterCompile.callAsync.err (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compiler.js:631:15)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:6:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/Hook.js:154:20)\r\n    at compilation.seal.err (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compiler.js:628:31)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:9:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/Hook.js:154:20)\r\n    at hooks.optimizeAssets.callAsync.err (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compilation.js:1325:35)\r\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:9:1)\r\n    at AsyncSeriesHook.lazyCompileHook (/Users/FOLDER/strapi-test/strapi-test/node_modules/tapable/lib/Hook.js:154:20)\r\n    at hooks.optimizeChunkAssets.callAsync.err (/Users/FOLDER/strapi-test/strapi-test/node_modules/webpack/lib/Compilation.js:1316:32)`\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0@beta-5\r\n- Database: PostgreSQL 11\r\n- Operating system: OSX Mojave\r\n\r\nHow can I update the browser list version?"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nThe `afterFetchAll` lifecycle is triggered correctly after searching for some documents, with or without filters. But when the filter is about a nested relation, then the lifecycle method will not be triggered anymore.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new Strapi 3.0.0-beta.5 project with Mongoose\r\n2. Add a User document\r\n3. Create an API for the Post collection with the following fields: title (string), author (\"has\" relation towards User)\r\n4. Uncomment `afterFetchAll` of Post and put a `console.log(results)` inside\r\n5. Add a Post document\r\n6. Perform a GET Request on `/posts` or `/posts?title=something`\r\n7. Perform a GET Request on `/posts/author.username=something`\r\n\r\n**Expected behavior**\r\nPoint 6 should behave as point 5, triggering the `afterFetchAll` lifecycle method.\r\n\r\n<!--**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Code snippets**\r\nIf applicable, add code samples to help explain your problem.-->\r\n\r\n**System**\r\n- Node.js version: v10.16.0 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.5 <!-- Please make sure you are on the latest version -->\r\n- Database: MongoDB v3.6.8\r\n- Operating system: Ubuntu 19.04\r\n\r\n<!--**Additional context**\r\nAdd any other context about the problem here.-->\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\n1. Unable to remove request prefix, it was empty by default.\r\n    (Can be solved by editing `config/environments/development/request.json` for now)\r\n2. Check boxes wrong behaviour.\r\n\r\n**Steps to reproduce the behavior**\r\n1. In the \"Configurations\" -> \"Request\" page.\r\n2. In the \"Roles & Permissions\" page.\r\n\r\n**Expected behavior**\r\n1. Make the Prefix input optional instead of required.\r\n2. Checking \"Select All\" should always select all.\r\n\r\n**Screenshots**\r\n1.\r\n<img src=\"https://user-images.githubusercontent.com/1941540/59593639-e185c000-9124-11e9-88a7-9e5d1483bdc0.png\" width=\"274px\">\r\n2.\r\n<img src=\"https://user-images.githubusercontent.com/1941540/59593858-47724780-9125-11e9-9f71-29e29a37f596.gif\" width=\"387px\">\r\n\r\n**Code snippets**\r\nn/a\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: v3.0.0-beta.5\r\n- Database: default\r\n- Operating system: macOS Mojave\r\n\r\n**Additional context**\r\nn/a\r\n\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nI created a new content type named 'series', if installed the 'graphql' plugin, the server can't be started. Uninstalled the 'graphql' plugin, then it works.\r\n\r\n```\r\n➜  strapi strapi develop\r\n[2019-06-17T02:05:46.079Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-06-17T02:05:46.082Z] error Error: Field \"Query.series\" can only be defined once.\r\n    at assertValidSDL (/Users/fengyu/Code/strapi/node_modules/graphql/validation/validate.js:89:11)\r\n    at Object.buildASTSchema (/Users/fengyu/Code/strapi/node_modules/graphql/utilities/buildASTSchema.js:78:34)\r\n    at Object.buildSchemaFromTypeDefinitions (/Users/fengyu/Code/strapi/node_modules/graphql-tools/dist/generate/buildSchemaFromTypeDefinitions.js:23:28)\r\n    at makeExecutableSchema (/Users/fengyu/Code/strapi/node_modules/graphql-tools/dist/makeExecutableSchema.js:26:29)\r\n    at Object.generateSchema (/Users/fengyu/Code/strapi/node_modules/strapi-plugin-graphql/services/Schema.js:263:22)\r\n    at Function.initialize (/Users/fengyu/Code/strapi/node_modules/strapi-plugin-graphql/hooks/graphql/index.js:52:50)\r\n    at /Users/fengyu/Code/strapi/node_modules/strapi/lib/hooks/index.js:52:31\r\n    at after (/Users/fengyu/Code/strapi/node_modules/strapi/lib/hooks/index.js:153:39)\r\n    at /Users/fengyu/Code/strapi/node_modules/lodash/lodash.js:9999:23\r\n    at Strapi.once (/Users/fengyu/Code/strapi/node_modules/strapi/lib/hooks/index.js:164:17)\r\n    at Object.onceWrapper (events.js:286:20)\r\n    at Strapi.emit (events.js:198:13)\r\n    at onFinish (/Users/fengyu/Code/strapi/node_modules/strapi/lib/hooks/index.js:44:12)\r\n    at Promise.all.then (/Users/fengyu/Code/strapi/node_modules/strapi-hook-bookshelf/lib/index.js:890:56)\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.2\r\n- Database: sqlite(--quickstart)\r\n- Operating system: macOS\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\n`strapi generate:api` prevents Strapi from starting if used with attribute names containing \"_\".\r\n\r\n**Steps to reproduce the behavior**\r\n1. `strapi -- generate:api stuff cms_name:string´\r\n2. `strapi develop` or `strapi start`\r\n\r\nGet this error:\r\n```\r\n[2019-06-16T10:13:18.489Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-06-16T10:13:18.491Z] error GraphQLError: Syntax Error: Expected :, found Name \"name\"\r\n```\r\n\r\nProbable reason: strapi generate:api replaces \"_\" with \" \", which messes up GraphQL syntax.\r\n\r\n**Expected behavior**\r\nstrapi and plugins should work with all names `generate:api` generates. `generate:api` should either respect \"_\" or fail if names include underline.\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0@beta.3\r\n- Database: Postgres\r\n- Operating system: MacOS\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nCannot add new administrators.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to user dropdown\r\n2. Click on 'Manage administrators'\r\n3. Click 'Add new administrator'\r\n4. See error\r\n\r\n**Expected behavior**\r\nShould see form to add a new administrator\r\n\r\n**Screenshots**\r\n![Capto_Capture 2019-06-14_04-14-38_PM 2019-06-14 16_25_20](https://user-images.githubusercontent.com/2541728/59536186-0bd74380-8ec1-11e9-8ace-1e22dfb02045.gif)\r\n\r\n**System**\r\n- Node.js version: 10.15.3\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0-beta.5\r\n- Database: MySQL 5.7\r\n- Operating system: MacOS & Linux\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nBased on the new PR to fix loading the Documentation plugin settings, it appears that the doc plugin `config/routes.json` is being dumped into the `full_documentation.json` file.\r\n\r\nRelatedPR: https://github.com/strapi/strapi/pull/3443\r\n\r\n**Steps to reproduce the behavior**\r\nUse that PR and regenerate the documentation you will see them being populated at the top of the file.\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n![image](https://user-images.githubusercontent.com/8593673/59525974-a1a4ab80-8e8c-11e9-9d11-9d60b96c18c9.png)\r\n\r\n\r\n**Code snippets**\r\nhttps://github.com/strapi/strapi/blob/4f642c9c8003f8bb5a35f176eaa9c631f3778155/packages/strapi-plugin-documentation/services/Documentation.js#L496\r\n\r\n**System**\r\n- Node.js version: 10\r\n- NPM version: 6\r\n- Strapi version: Monorepo (beta.6)\r\n- Database: N/A\r\n- Operating system: Ubuntu 18.04\r\n\r\n**Additional context**\r\nN/A\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIn the alpha version, I was able to create a directory `config/environments/qa` and specify database connection settings in `database.json` (and obviously other settings but this was my specific use case). I could then set the NODE_ENV environment variable to `qa` and the settings in the qa directory would be used. This does not appear to be working the same way in the beta version. Was this functionality removed from the beta version or is it a bug?\r\n\r\n**Steps to reproduce the behavior**\r\n1. Make a copy `config/environment/staging` and rename it to qa.\r\n2. Run `NODE_ENV=qa strapi start`.\r\n3. You should see the following error.\r\n\r\n```\r\nTypeError: Cannot read property 'defaultConnection' of undefined\r\n    at module.exports (/home/david/Src/tse/proxima/cms/node_modules/strapi/lib/core/bootstrap.js:25:47)\r\n    at Strapi.load (/home/david/Src/tse/proxima/cms/node_modules/strapi/lib/Strapi.js:270:11)\r\n```\r\n\r\n**Expected behavior**\r\nStrapi should run using the settings in `config/environment/qa`\r\n\r\n**System**\r\n- Node.js version: v10.15.0\r\n- NPM version: 6.4.1\r\n- Strapi version: beta.4\r\n- Database: Postgres\r\n- Operating system: Ubuntu 18.04.2\r\n"},{"labels":[null,null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nIf proxy is configured in `server.json`, eg:\r\n\r\n```\r\n{                                        \r\n  \"host\": \"localhost\",                   \r\n  \"port\": 1337,                          \r\n  \"proxy\": {                             \r\n    \"enabled\": true,                     \r\n    \"ssl\": true,                         \r\n    \"host\": \"api.stratosphereapp.io\",    \r\n    \"port\": 443                          \r\n  },                                     \r\n  ...\r\n```\r\n\r\nThis generates a confirmation URL correctly, for example:\r\n\r\n```\r\nhttps://sub.host.tld/auth/email-confirmation?confirmation=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDAyNGMxOTI1YmI2MTAwMjdjNTQ4MDAiLCJpZCI6IjVkMDI0YzE5MjViYjYxMDAyN2M1NDgwMCIsImlhdCI6MTU2MDQzMTY0MSwiZXhwIjoxNTYzMDIzNjQxfQ.dEbjkrRB_bXGyNAglwiDFkq83Sshf-jdyE_U0gJhSug\r\n```\r\n\r\nHowever clicking on this link redirects to `localhost:1337` rather than the proxy URL.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Turn on `Enable email confirmation`\r\n2. Register via `/auth/local/register`\r\n3. Click on link inside incoming email\r\n\r\n**Expected behavior**\r\nShould redirect to the defined proxy URL.\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: beta.4\r\n- Database: MongoDB\r\n- Operating system: Ubuntu\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen I create a settings.json file at ./extensions/documentation/config/settings.json it's not overriding the default settings.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Add the settings.json file at ./extensions/documentation/config/settings.json\r\n2. Make a change in the settings.json file\r\n3. Restart the server\r\n4. Regenerate documentation\r\n5. Check for changes\r\n\r\n**Expected behavior**\r\nChanges made in the settings.json file are visible at the /documentation/v1.0.0 endpoint\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/39594925/59306022-b79f4a00-8c9b-11e9-81f4-7c3bb785973e.png)\r\n![image](https://user-images.githubusercontent.com/39594925/59306067-cbe34700-8c9b-11e9-91c0-01c801f3b612.png)\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.beta\r\n- Database: MongoDB\r\n- Operating system: Ubuntu 18.06"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen attempting to find or update a user, I get the following 400 Bad request error:\r\n\r\n```\r\n{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"select \\\"users-permissions_user\\\".* from\r\n\\\"users-permissions_user\\\" where \\\"users-permissions_user\\\".\\\"_id\\\" = $1 limit $2 - column\r\n users-permissions_user._id does not exist\"}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Fresh install strapi@beta with Postgres\r\n\r\n2. Make a request:\r\n\r\n```\r\n.put(`http://localhost:1337/users/1]`, {email: \"name@email.com\"}, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      })\r\n      .then(response => {\r\n        console.log(response);\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response);\r\n      });\r\n```\r\n\r\n**Expected behavior**\r\nA 200 OK, with the updated user object.\r\n\r\n**System**\r\n- Node.js version: 10.0.0\r\n- NPM version: 5.60\r\n- Strapi version: 3.0.0-beta.3\r\n- Database: Postgres 9.6\r\n- Operating system: MacOS 10.14.4\r\n\r\n**Additional context**\r\nI'm also experiencing this problem in https://github.com/strapi/strapi/issues/3382. Is it possible it's related?\r\n"},{"labels":[null,"bug"],"text":"**Describe the bug**\r\nIf you create a `text` field and turn on the WYSIWYG editor, the editor remains if you try to change that same field to a `string` field. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Create a new `text` field on a content type.\r\n2. Turn on the WYSIWYG editor for that new `text` field.\r\n3. Save the field.\r\n4. Change that `text` field to a `string` field.\r\n5. Add a new entry to your content type that contains said field.\r\n6. See that the WYSIWYG editor remains, when it should just be an input field.\r\n\r\n**Expected behavior**\r\nWhen changing a `text` field to a `string` field, I expect that just a simple one line input field is available to edit the field. Instead, the old WYSIWYG editor remains.\r\n\r\n**System**\r\n- Node.js version: LTS 10.16\r\n- NPM version: 6.9.0\r\n- Strapi version: Strapi v3.0.0-beta.2\r\n- Database: Default MongoDB\r\n- Operating system: Windows 10\r\n"},{"labels":[null,"bug"],"text":"When creating a many to many relationship on users with another entity, a write error is returned. Each entity that has a relationship to users is updated to have the \"plugin\":\"users-permissions\" removed. \r\n\r\n**Steps to reproduce the behavior**\r\n1. Go to users entity\r\n2. Click to add relationship\r\n3. Create a many to many relationship with another entity\r\n4. You will get a write error pop up\r\n5. Look at your terminal. You should see that the related entity files have been updated and the \"plugin\":\"users-permissions\" property removed.\r\n\r\n**System**\r\n- Node.js version: v12.2.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3..0.0-beta.2\r\n- Database: Mongo\r\n- Operating system: Mac OS\r\n"},{"labels":[null,null,"bug"],"text":"<!--\r\nHello 👋 Thank you for submitting an issue.\r\n\r\nBefore you start, please make sure your issue is understandable and reproducible.\r\nTo make your issue readable make sure you use valid Markdown syntax.\r\n\r\nhttps://guides.github.com/features/mastering-markdown/\r\n-->\r\n\r\n**Describe the bug**\r\nWe have just upgraded our project to Strapi version 3-beta, and the custom GraphQL schema that we have defined for user model in `/extensions/users-permissions/config/schema.graphql` is not working anymore, it's like this file is being ignored, although I haven't seen any change about this on the docs. It used to work in the latest alpha version `#alpha.26`.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Write some custom GraphQL schema\r\n2. Start the project\r\n3. Use the custom query/mutation\r\n4. See error\r\n\r\n**Expected behavior**\r\nThe custom query/mutations that I've provided should work.\r\n\r\n**Screenshots**\r\n![Screen Shot 2019-06-09 at 16 45 23](https://user-images.githubusercontent.com/13555552/59158875-131fdb00-8ad6-11e9-9f93-8d1ac01104bd.png)\r\n\r\n**Code snippets**\r\nHere is the schema `/extensions/users-permissions/config/schema.graphql`:\r\n```\r\nmodule.exports = {\r\n  query: `\r\n    userSearch(_q: String!): [UsersPermissionsUser]\r\n  `,\r\n  resolver: {\r\n    Query: {\r\n      userSearch: {\r\n        resolver: {\r\n          plugin: 'users-permissions',\r\n          handler: 'User.search'\r\n        }\r\n      },\r\n    }\r\n  }\r\n};\r\n```\r\n\r\nHere is the query that will get sent to GraphQL endpoint:\r\n```\r\nquery ($_q: String!) {\r\n    userSearch(_q: $_q) {\r\n        id\r\n        first_name\r\n        last_name\r\n    }\r\n}\r\n```\r\n\r\nHere is the error, when we request to that query:\r\n\r\n```\r\n{\r\n    \"errors\": [\r\n        {\r\n            \"message\": \"Cannot query field \\\"userSearch\\\" on type \\\"Query\\\". Did you mean \\\"users\\\"?\",\r\n            \"locations\": [{ \"line\": 2, \"column\": 3 }],\r\n            \"extensions\": {\r\n                \"code\": \"GRAPHQL_VALIDATION_FAILED\",\r\n                \"exception\": {\r\n                    \"stacktrace\": [\r\n                        \"GraphQLError: Cannot query field \\\"userSearch\\\" on type \\\"Query\\\". Did you mean \\\"users\\\"?\",\r\n                        \"    at Object.Field (/project/node_modules/graphql/validation/rules/FieldsOnCorrectType.js:64:31)\",\r\n                        \"    at Object.enter (/project/node_modules/graphql/language/visitor.js:332:29)\",\r\n                        \"    at Object.enter (/project/node_modules/graphql/language/visitor.js:383:25)\",\r\n                        \"    at visit (/project/node_modules/graphql/language/visitor.js:250:26)\",\r\n                        \"    at Object.validate (/project/node_modules/graphql/validation/validate.js:63:22)\",\r\n                        \"    at validate (/project/node_modules/apollo-server-core/dist/requestPipeline.js:211:32)\",\r\n                        \"    at Object.<anonymous> (/project/node_modules/apollo-server-core/dist/requestPipeline.js:124:42)\",\r\n                        \"    at Generator.next (<anonymous>)\",\r\n                        \"    at fulfilled (/project/node_modules/apollo-server-core/dist/requestPipeline.js:4:58)\",\r\n                        \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: beta-3\r\n- Database: PostgreSQL\r\n- Operating system: MacOS\r\n\r\nI have also asked this in StackOverflow: https://stackoverflow.com/q/56514188/5073175"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nWhen setting up a  many-to-many relation between to entities: A relation table is created (as expected) and the relation seems to work properly. If strapi reboots it will not start again, giving this error:\r\n```\r\n[2019-06-08T17:04:37.306Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-06-08T17:04:37.307Z] error error: relation \"entity1_entity2__entity2_entity1\" already exists\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Create many-to-many relation between two entities (relation table is created as expected)\r\n2. shut down strapi\r\n3. start up strapi again\r\n__error message from above__\r\n\r\nIf i remove the relation table,Ii am able to start up strapi again. The relations is then (of course) lost between the entities.\r\n\r\n**Expected behavior**\r\nstrapi should start, even with relations defined.\r\n\r\n**System**\r\nNode.js version: v10.15.3\r\nNPM version: 6.4.1\r\nStrapi version: 3.0.0@beta.3\r\nDatabase: postgres\r\nOperating system: MacOS\r\n\r\n**Additional context**\r\nNot sure if related, but the relation table gets a name that exceeds postgres 63 byte name limit. The name is hence truncated upon creation.\r\n"},{"labels":[null,null,null,"bug"],"text":"**Describe the bug**\r\nDevelopment databases show as mongo, even though configured as Postgres. Works on staging and production.\r\n\r\n**Steps to reproduce the behavior**\r\nAdd database connections to one database per environment. All Postgres (can be on same DB-instance). Open admin interface and see how they appear differently.\r\n\r\n**Expected behavior**\r\nPostgres database connections should always appear as Postgres, never as mongo.\r\n\r\n**Screenshots**\r\n![Screenshot 2019-06-05 at 16 20 09](https://user-images.githubusercontent.com/9053945/58964038-8364ee80-87ae-11e9-924f-bb25a199d8fd.png)\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0@beta.1\r\n- Database: postgres\r\n- Operating system: MacOS"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nIf you search something using the search field on the top of any list page in the backend, you cannot select records using the checkboxes inside the list view on the left side. So its impossible to bulk delete these entries. Sometimes I can select one or more of the checkboxes. This problem affect all data types I have created.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Setup fresh strapi instance\r\n2. Create a new data type with a text field\r\n3. Create some entries\r\n4. Switch to the list view and search for some entries\r\n5. Try to select one ore more entries using the checkbox\r\n\r\n**Expected behavior**\r\nCheck one ore more entries and show the bulk edit options.\r\n\r\n**System**\r\n- **Node.js version**: 10.6.0\r\n- **NPM version**: 6.1.0\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n"},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nThis is a known bug, probably related to uglifying / minifying. See https://github.com/webpack-contrib/terser-webpack-plugin/issues/21, https://github.com/nuxt/nuxt.js/issues/2921 and a lot of other google results.\r\n\r\n**Steps to reproduce the behavior**\r\nSetup EC2 t2.micro, setup a new Strapi project, try to build. Build freezes at 91%. Once at 91% the machine eats up all the memory (from approx 30% of 1GB before 90%). Machine crashes after 20 min.\r\n\r\n**Expected behavior**\r\nBuild should complete.\r\n\r\n**Screenshots**\r\n<img width=\"545\" alt=\"Screenshot 2019-06-04 at 12 13 46\" src=\"https://user-images.githubusercontent.com/9053945/58898881-dfbb0600-86fb-11e9-9448-a95f36b2ffdf.png\">\r\n<img width=\"752\" alt=\"Screenshot 2019-06-04 at 13 09 16\" src=\"https://user-images.githubusercontent.com/9053945/58898888-e5b0e700-86fb-11e9-82c3-97f01cfeb4e8.png\">\r\n\r\n**System**\r\n- Node.js version: 10.16.0\r\n- NPM version: 6.9.0\r\n- Strapi version: 3.0.0@beta.1\r\n- Database: NA\r\n- Operating system: AWS Ubuntu 18.04.2\r\n\r\n**Additional context**\r\nBuild completes if I change `optimization: { minimize: true, ...}` to false in `node_modules/strapi-admin/webpack.configure.js`. Issue might also be fixed by updating terser-webpack-plugin, but I haven't tried that."},{"labels":[null,null,null,"bug"],"text":"Hello,\r\n\r\nThe following may not be a bug, I have done my best to follow the available documentation, but if there is a correct way to do this then please let me know.\r\n\r\nI am trying to use the[ login example](https://github.com/strapi/strapi-examples/tree/master/login-react) with Strapi deployed to Heroku (as this is how I need to use Strapi in production) rather than localhost.  The example works fine for me locally.\r\n\r\nHowever, in order to get it to work I have to edit the the file in plugins/users-permissions/config/functions/bootstrap.js to include the following\r\n\r\n**UPDATE:**  This is now happening in config/functions/bootstrap.js, since the plugins have been moved to dependencies in the latest beta version.  However, apart from this minor difference, nothing else has been fixed.\r\n\r\n```\r\n{\r\n...\r\nredirect_uri: \"https://...herokuapp.com/connect/google/callback\r\n}\r\n```\r\n\r\nBefore doing this I also tried editing the file config/environments/production/server.js to specify the host and port (it was not clear from the documentation that this would be required either -- the front-end shows the heroku host in the provider settings dialog regardless)\r\n\r\n```\r\n{\r\n...\r\n\"host\": \"https://...herokuapp.com\",\r\n\"port\": \"${process.env.PORT || 1337}\"\r\n}\r\n```\r\n\r\nHowever, this does not work, since Heroku will use a different port each time, so while Strapi then correctly uses the right host it also attaches the port, so the redirect becomes \"https://...herokuapp.com:PORT/connect/google/callback\", which fails because this isn't an approved url (it is also not possible to allow wildcards in the list of approved urls).  Even if wildcards were allowed, going to https://...herokuapp.com:PORT also doesn't even work, since Heroku doesn't actually expose this port number.\r\n\r\nHaving to directly edit bootstrap.js feels like a hack.  It also introduces strange behavior in the Strapi front end.  Please see the image below.\r\n\r\n![screenshot](https://user-images.githubusercontent.com/16106511/58759439-1a972f80-857e-11e9-9f51-58cc7cf8985c.PNG)\r\n\r\nIn summary\r\n\r\n- have to edit bootstrap.js to get Facebook and Google login\r\n- the providers setting dialog in the screenshot now includes a duplicate field.\r\n- The last field \"The redirect URL to add in your Facebook application configurations\" doesn't actually represent the redirect address that is used (even if you don't update the deployed host in server.json, it will still show the heroku host but will actually redirect to localhost).\r\n\r\nAny help or suggestions for how to resolve this would be very much appreciated."},{"labels":[null,null,"bug"],"text":"**Describe the bug**\r\nWhen uploading multiple media images through the interface, using the strapi-provider-upload-aws-s3 it only uploads some of the images. Often times only uploading one of the photos.\r\n\r\n**Steps to reproduce the behavior**\r\n1. Have strapi-provider-upload-aws-s3 installed, configured\r\n2. Set up content type with multi media\r\n3. Go to content type containing multi media\r\n4. Attempt to upload multiple images\r\n5. View results\r\n\r\n**Expected behavior**\r\nExpect all images to upload\r\n\r\n**Screenshots**\r\nhttps://www.youtube.com/watch?v=aCYlsY5j-r4&feature=youtu.be\r\n\r\n**System**\r\n- Node.js version: v10.15.3\r\n- NPM version: 6.4.1\r\n- Strapi version: 3.0.0-alpha.26.2\r\n- Database: postgres\r\n- Operating system: ubuntu 16\r\n"},{"labels":[null,null,"bug"],"text":"\r\n**Describe the bug**\r\n```\r\npostsConnection {\r\n  groupBy {\r\n    published {\r\n      key\r\n      connection {\r\n        aggregate {\r\n          avg {\r\n            nb_likes\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce the behavior**\r\n1. Follow the https://strapi.io/documentation/3.x.x/guides/graphql.html#aggregation-grouping\r\n2. Both nb_likes is 10\r\n```\r\n{\r\n  data: {\r\n    postsConnection: {\r\n      groupBy: {\r\n        published: [\r\n          {\r\n            key: true,\r\n            connection: {\r\n              aggregate: {\r\n                avg {\r\n                  nb_likes: 10\r\n                }\r\n              }\r\n            }\r\n          },\r\n          {\r\n            key: false,\r\n            connection: {\r\n              aggregate: {\r\n                avg {\r\n                  nb_likes: 10 <-should be 0, groupby not works\r\n                }\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\n```\r\n{\r\n  data: {\r\n    postsConnection: {\r\n      groupBy: {\r\n        published: [\r\n          {\r\n            key: true,\r\n            connection: {\r\n              aggregate: {\r\n                avg {\r\n                  nb_likes: 10\r\n                }\r\n              }\r\n            }\r\n          },\r\n          {\r\n            key: false,\r\n            connection: {\r\n              aggregate: {\r\n                avg {\r\n                  nb_likes: 0\r\n                }\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**System**\r\n- Node.js version: v12.1.0\r\n- NPM version:6.9.0\r\n- Strapi version: 3.0.0-alpha.26.2\r\n- Database: mongodb\r\n- Operating system: Mac OS 10.14.5\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  v11.10.0\r\n- **NPM version**: 6.8.0\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: MongoDB\r\n- **Operating system**: MacOS High Sierra \r\n\r\n**What is the current behavior?**\r\n\r\nGraphql response time is 800-1000Ms while for the same query for the REST is 80Ms\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a model with a two-way relation to the second model"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.10.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: v3.0.0-alpha.26.2\r\n- **Database**: \r\n- **Operating system**: \r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nReason of error returned by Strapi is empty when webapp uses Facebook login but the user declines to share his or her email address.\r\n\r\nThis happens because parameters were inverted in file plugins/users-permissions/services/Providers.js, function getProfile:\r\n\r\n`      // We need at least the mail.\r\n      if (!profile.email) {\r\n        return reject([{\r\n          message: 'Email was not available.'\r\n        }, null]);\r\n      }`\r\n\r\n\"Null\" should be the first param passed to reject, and the message should be the second param.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Call /connect/facebook. \r\n2. You will be redirected to the Facebook login page if you are not yet logged in to Facebook. Enter your Facebook username and password.\r\n3. You will be redirected to the Facebook authorization page. Choose **not** to share your email.\r\n4. You will be redirected to your web page with the following error: {\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"Bad Request\"}\r\n\r\n**What is the expected behavior?**\r\n\r\nAt step 4, Strapi should return the following error (note the reason for the error): \r\n{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"Email was not available.\"}\r\n\r\nA reason for the error is required in order to know why the login failed and to instruct the user on how to solve the problem.\r\n\r\nIt is just a matter of putting the params in the right order in the code above.\r\n\r\n**Suggested solutions**\r\n\r\nReplace reject call in code above with:\r\n`return reject([null, 'Email was not available.']);`\r\n\r\nAs a side note, I would suggest the Strapi team adds a page in the doc to clarify how error handling works, so that contributors stick to the same pattern. I am confused because I see two patterns throughout the code: one with only a message (as was intended in the code above) and one with an error id, such as this example taken a few lines further down the file:\r\n\r\n`return resolve([null, [{ messages: [{ id: 'Auth.advanced.allow_register' }] }], 'Register action is actualy not available.']);`\r\n\r\nThat would also help on issue https://github.com/strapi/strapi/issues/2673\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 11.1.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.x.x\r\n- **Database**:  Postgresql\r\n- **Operating system**: MacOS\r\n- **Link to your Project**: Not required\r\n\r\n**What is the current behavior?**\r\nIn the afterCreate callback, when a model has an upload field, it is not present on the model object. \r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a content type with an Upload field.\r\n2. Add a afterCreate callback with a console log on the model object.\r\n3. Through the admin, create a new resource, including some image on the upload field.\r\n4. Inspect the Console Log from your callback.\r\n\r\n**What is the expected behavior?**\r\nThe upload data should be included in the Model object.\r\n\r\n**Suggested solutions**\r\nNot sure if only happens with afterCreate (haven't tested other callbacks), but the callbacks should give you an option to include Relations like this, since they are expressly defined on the Content Type, but they don't appear on the callback data.\r\nThis could be defined on the Admin itself, or they could be a default at least for Upload fields (since they are a shipped implementation)"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Strapi version**: 3.0.0-alpha.26.2\r\n- **Database**:  mongo\r\n- **Operating system**: \r\n\r\n**What is the current behavior?**\r\nGetting error `Error: Your filters contain a field 'email' that doesn't appear on your model definition nor it's relations`\r\n\r\n\r\n**Steps to reproduce the problem**\r\nTry doing the graphql query \r\n```\r\n{\r\n  users(where: {email_contains: \"@nexion.com.ar\"}) {\r\n    email\r\n    username\r\n    avatar {\r\n      url\r\n      __typename\r\n    }\r\n    __typename\r\n  }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nGet results\r\n\r\n**Suggested solutions**\r\n\r\n\r\n\r\n![graphql-users](https://user-images.githubusercontent.com/517228/58349821-af8d8080-7e3a-11e9-9c77-31af943e94a1.png)\r\n"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.6.0\r\n- **NPM version**: 6.1.0\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n- **(Optional) Link to your Project**: \r\n\r\n**What is the current behavior?**\r\nStrapi will crash if you start typing into a relational dropdown field that is already filled\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a new strapi project\r\n2. Create a new content type named \"product\" with only one string field called \"name\"\r\n3. Create a second content type called \"shop\" with a string field called \"name\"\r\n4. Create a One-To-One relational field on the \"product\" type that links to the shop documents. \r\n5. Create your first shop by switching to the shop list and give it a name like \"testshop\"\r\n6. Create your first product \"test product\" and link it to the new shop\r\n7. Reopen the newly ceated product and focus the relational shop dropdown field\r\n8 Start typing something\r\n\r\n**What is the expected behavior?**\r\nShow the list with the search results\r\n\r\n**Suggested solutions**\r\nI have discovered that this bug only occures if the field is already filled with a relation. If you delete the relation using the X button inside the field, the problem will not occure.\r\n\r\nThere is also a very strange HTTP-Request that might fail and cause the server to crash: \r\n\r\n`http://192.168.188.116:1337/content-manager/explorer/shop/[object Object]?source=content-manager&name_contains=foo`\r\n\r\nThis request should query the search results after every input. But the [object Object] in the URL makes not much sense.\r\n\r\nAs I already mentioned this error has something todo with already connected relations. If I use the X button first the request will look like expected if I start typing:\r\n\r\n`http://192.168.188.116:1337/content-manager/explorer/shop/?source=content-manager&name_contains=media`"},{"labels":[null,null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: strapi v3.0.0-alpha.26.1\r\n- **Database**: MongoDB\r\n- **Operating system**: macOs Mojave\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nAccording to this closed [ticket](https://github.com/strapi/strapi/issues/432), you can add a `uri` params in your database configuration to connect to a mongo database. I found that strapi completely ignores the database specified in the `uri`.\r\n\r\nExample: `mongodb+srv://admin:root@somewhere.net/yourDB`\r\n`yourDB` is not used.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1 - Use Mongo Atlas free tier account\r\n2 - Create a brand new repo with strapi with the `uri` for Mongo Atlas\r\n3 - Run strapi\r\n4 - Create a user\r\n5 - Check Mongo Atlas and you'll find a new database named `strapi` instead of the intended database specified in the `uri`\r\n\r\n**What is the expected behavior?**\r\n\r\nI expect strapi to use the database specified in the `uri`\r\n\r\n**Suggested solutions**\r\n\r\nIn case you're struggling  with this issue, I found a fix: add the `uri` and the `database` with your database name. This way Strapi will connect to the proper database.\r\n"},{"labels":[null,null,null,"bug"],"text":"added a row with an \"id\" column. Didn't give me a warning not to do it, then it crashes and won't start.\r\n\r\n```\r\n[2019-05-18T07:18:23.895Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-05-18T07:18:23.902Z] error \r\n                        CREATE TABLE `items` (\r\n                          id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\r\n`id` varchar(255)  NULL ,\r\n`summary` longtext  NULL ,\r\n`title` varchar(255)  NULL ,\r\n`created_at` timestamp DEFAULT CURRENT_TIMESTAMP  NULL ,\r\n`updated_at` timestamp DEFAULT CURRENT_TIMESTAMP  NULL \r\n                        )\r\n                       - SQLITE_ERROR: duplicate column name: id\r\n{ [Error: SQLITE_ERROR: duplicate column name: id] errno: 1, code: 'SQLITE_ERROR' }\r\n```"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v12.1.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: v3.0.0-alpha.26.2\r\n- **Database**: PostgreSQL 11.3\r\n\r\n**What is the current behavior?**\r\n\r\n```\r\n[2019-05-15T18:12:33.185Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-05-15T18:12:33.187Z] error no pg_hba.conf entry for host \"xxx\", user \"avnadmin\", database \"applaudience\", SSL off\r\nerror: no pg_hba.conf entry for host \"xxx\", user \"avnadmin\", database \"applaudience\", SSL off\r\n    at Connection.parseE (/Users/gajus/Documents/dev/applaudience/applaudience-data-management-web-app/applaudience-data-management-web-app/node_modules/pg/lib/connection.js:602:11)\r\n    at Connection.parseMessage (/Users/gajus/Documents/dev/applaudience/applaudience-data-management-web-app/applaudience-data-management-web-app/node_modules/pg/lib/connection.js:399:19)\r\n    at Socket.<anonymous> (/Users/gajus/Documents/dev/applaudience/applaudience-data-management-web-app/applaudience-data-management-web-app/node_modules/pg/lib/connection.js:121:22)\r\n    at Socket.emit (events.js:196:13)\r\n    at addChunk (_stream_readable.js:290:12)\r\n    at readableAddChunk (_stream_readable.js:271:11)\r\n    at Socket.Readable.push (_stream_readable.js:226:10)\r\n    at TCP.onStreamRead (internal/stream_base_commons.js:166:17) {\r\n  name: 'error',\r\n  length: 159,\r\n  severity: 'FATAL',\r\n  code: '28000',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: undefined,\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'auth.c',\r\n  line: '512',\r\n  routine: 'ClientAuthentication'\r\n}\r\n\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nConfiguration:\r\n\r\n```json\r\n{\r\n  \"defaultConnection\": \"Mother\",\r\n  \"connections\": {\r\n    \"default\": {\r\n      \"connector\": \"strapi-hook-bookshelf\",\r\n      \"settings\": {\r\n        \"client\": \"sqlite\",\r\n        \"filename\": \".tmp/data.db\"\r\n      },\r\n      \"options\": {\r\n        \"useNullAsDefault\": true\r\n      }\r\n    },\r\n    \"Mother\": {\r\n      \"connector\": \"strapi-hook-bookshelf\",\r\n      \"settings\": {\r\n        \"client\": \"postgres\",\r\n        \"host\": \"xxx\",\r\n        \"port\": 21291,\r\n        \"database\": \"applaudience\",\r\n        \"username\": \"avnadmin\",\r\n        \"password\": \"xxx\"\r\n      },\r\n      \"options\": {\r\n        \"ssl\": true\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nSuccessful connection to the database.\r\n\r\n**Suggested solutions**\r\n\r\nN/A"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  6.9.0\r\n- **Strapi version**: 3.0.0-alpha.26.2<!-- Please make sure you are on the latest version -->\r\n- **Database**: mongo\r\n- **Operating system**: windows 7\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nPolymorphics collection failed \r\n\r\n**Path —** `Page.settings.json` \r\n```json\r\n\"related\": {\r\n  \"collection\": \"*\",\r\n  \"filter\": \"field\"\r\n}\r\n```\r\n\r\n**Path —** `Statics.settings.json`\r\n```json\r\n\"page\": {\r\n  \"model\": \"page\",\r\n  \"via\": \"related\"\r\n}\r\n```\r\n\r\n**Steps to reproduce the problem**\r\nwhen i create this relation, i create one page, i create some static object and set the page to the unique page. when i do that, only the last static object have the relation to the page. When a call the WS to get all page, in the related field, we seen only the last static objet edited.\r\n\r\n**What is the expected behavior?**\r\nIn a one to many polymorphics relation, we need to have a collection and all object set inside this collection.\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.3 \r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.26.2\r\n- **Database**: Mongo\r\n- **Operating system**: Debian \r\n\r\n**What is the current behavior?**\r\n\r\nSetting CORS Origin to anything other than * results in:\r\n\r\n```\r\n  InternalServerError: http://<ip>:1337 is not a valid origin\r\n      at Object.throw (/home/owens/stratosphere-api/node_modules/koa/lib/context.js:97:11)\r\n      at Object.origin (/home/owens/stratosphere-api/node_modules/strapi/lib/middlewares/cors/index.js:41:35)\r\n  ...\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nStrarpi / KOA should use whatever we set in the CORS Origin field.\r\n\r\n![image](https://user-images.githubusercontent.com/83678/57462456-e4001a80-7246-11e9-9593-e9fe4a41cca0.png)\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.26.2\r\n- **Database**: PostgreSQL 9.6.12\r\n- **Operating system**: Ubuntu 16.04, kernel 4.4.0-146-generic\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nerror 500 is returned with this error messsage:\r\n```\r\n{ error: relation \"public.posts\" does not exist\r\n    at Connection.parseE (/home/strapi-cms/node_modules/pg/lib/connection.js:601:11)\r\n    at Connection.parseMessage (/home/strapi-cms/node_modules/pg/lib/connection.js:398:19)\r\n    at Socket.<anonymous> (/home/strapi-cms/node_modules/pg/lib/connection.js:120:22)\r\n    at Socket.emit (events.js:189:13)\r\n    at addChunk (_stream_readable.js:284:12)\r\n    at readableAddChunk (_stream_readable.js:265:11)\r\n    at Socket.Readable.push (_stream_readable.js:220:10)\r\n    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)\r\n  name: 'error',\r\n  length: 111,\r\n  severity: 'ERROR',\r\n  code: '42P01',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '60',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'parse_relation.c',\r\n  line: '1139',\r\n  routine: 'parserOpenTable' }\r\n```\r\nthe sql is always using \"public\" as the schema name when join another table\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. create a new strapi instance using postgresql as backend database\r\n2. create schema in postgresql database\r\n3. manually update config/environments/development/database.json by adding schema like this:\r\n```\r\n{\r\n  \"defaultConnection\": \"default\",\r\n  \"connections\": {\r\n    \"default\": {\r\n      \"connector\": \"strapi-hook-bookshelf\",\r\n      \"settings\": {\r\n        \"client\": \"postgres\",\r\n        \"host\": \"localhost\",\r\n        \"port\": 5432,\r\n        \"database\": \"strapi-cms\",\r\n        \"username\": \"adminroot\",\r\n        \"password\": \"*****\",\r\n        \"schema\": \"strapi\"\r\n      },\r\n      \"options\": {\r\n         \"debug\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n4.restart strapi to re-init the database\r\n5.create \"post\" and \"comment\" content type and with post has many comments relation\r\n6.make these two content types can be accessed by public \r\n7.call api `GET /comments/count?post=1`\r\n\r\n**What is the expected behavior?**\r\ncount is correct returned\r\n\r\n\r\n**Suggested solutions**\r\nif enable debug log, the sql lead to error is\r\n```\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ '1' ],\r\n  __knexQueryUid: 'b9cea7b9-cfc3-49d5-8cec-d8e1e27b7932',\r\n  sql:\r\n   'select distinct count(*) as \"count\" from \"likes\" left join \"strapi-cms\".\"public\".\"posts\" as \"posts_1\" on \"posts_1\".\"id\" = \"likes\".\"post\" where \"posts_1\".\"id\" = ?' }\r\n```\r\n\r\nAnd it's very clear the issue comes from this line: https://github.com/strapi/strapi/blob/master/packages/strapi-hook-bookshelf/lib/index.js#L32\r\nschema name is hard coded as \"public\" when doing join\r\nso the solution should be: check if schema is defined in the database configuration, if so, use it instead of \"public\""},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\nNode v10.15.3\r\nnpm 6.9.0\r\nstrapi 3.0.0-alpha.26\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-alpha.26<!-- Please make sure you are on the latest version -->\r\n- **Database**: Mongodb\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I add and save a relation between 2 differents content type, all other relations are removed.\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\nCreate 4 content types.\r\nAdd relation attributes between 1 content towards the 3 others (no matter which relation type). \r\nCreate 1 entry of each content types.\r\nAdd 2 relations to the first entry and save.\r\nAdd an new relation towards the last entry, the to others will be removed. \r\n\r\nEach time, only configurated relations are saved and other relations previously configured are removed.\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\nRelations previously configured should stay saved when I configure a new one.\r\n\r\n\r\n**Suggested solutions**\r\nno solution suggested..."},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.2.1\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-alpha.26\r\n- **Database**: MongoDB (Atlas)\r\n- **Operating system**: Windows\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI can't access the CSRF/XSRF token in any way.\r\nXSRF cookie is not being set and documentation about how to use Strapi CSRF token are lack/non-existing.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nIt's just not set any cookie and I can't get the current CSRF token in any way.\r\n\r\n**What is the expected behavior?**\r\n\r\nTo be able to access the current CSRF token.\r\n\r\n**Suggested solutions**\r\n\r\nImprove documentation and fix the XSRF cookie (which is not being set at all)."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.13.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: 3.0.0-alpha.26.1\r\n- **Database**: Postgres\r\n- **Operating system**: MacOs\r\n\r\n**What is the current behavior?**\r\nCreating a ManyToMany relationship between the User model and any other content type AND naming the field on the other content type _users_ initiates some sort of bug that continually kicks you out on login. \r\n\r\nOnce you change the the name of the relation field on the other model, it will work.\r\n\r\n**Steps to reproduce the problem**\r\nCreate a ManyToMany relationship on any model with the User model and name it 'users'. (Which is the default suggested name.)\r\n\r\n**What is the expected behavior?**\r\nIt should work as any other ManyToMany relationship.\r\n\r\n**Suggested solutions**\r\nChange the default to something else / prevent the name 'users' / figure out the root cause."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.1<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-alpha.26.1 <!-- Please make sure you are on the latest version -->\r\n- **Database**: MySQL\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\nI am trying to use deep filtering for a relation between my model and users permission plugin (manyToMany). Here is the users attribute on the model :\r\n```\r\n    \"users\": {\r\n      \"collection\": \"user\",\r\n      \"via\": \"campaigns\",\r\n      \"dominant\": true,\r\n      \"plugin\": \"users-permissions\"\r\n    }\r\n```\r\nThe intermediate table generated by strapi (i am using bookshelf and mysql) contains the following columns : id, **user_id**, campaign_ id\r\nWhen I try to filter campaign using user_id (with parameter users_in=x in the fetchAll params argument), the generated query fails, here is the query :\r\n```\r\nselect distinct count(*) as `count` from `campaigns` left join `db`.`campaigns_users__users_campaigns` as `campaigns_users__users_campaigns_1` on `campaigns_users__users_campaigns_1`.`campaign_id` = `campaigns`.`id` left join `db`.`users-permissions_user` as `users-permissions_user_1` on `campaigns_users__users_campaigns_1`.`userspermissionsuser_id` = `users-permissions_user_1`.`id` where `users-permissions_user_1`.`id` in (2)\r\n```\r\nIt is assuming that the intermediate table between campaigns and users contains a userspermissionsuser_id column...\r\nHere is the error :\r\n```\r\ncode: 'ER_BAD_FIELD_ERROR',\r\n  errno: 1054,\r\n  sqlMessage:\r\n   'Unknown column \\'campaigns_users__users_campaigns_1.userspermissionsuser_id\\' in \\'on clause\\'',\r\n  sqlState: '42S22',\r\n  index: 0,\r\n```\r\nIf I rename the **userspermissionsuser_id** column to **user_id**, the request works fine, but then if I insert a new campaign with a related user, the **user_id** column is recreated by strapi and filled with the concerned user, **userspermissionsuser_id** is null\r\n\r\nTL;DR: When using manyToMany with users plugin, strapi is generating an intermediate table containing column **user_id**, deep filtering asssumes that this very same column is named **userspermissionsuser_id**\r\n\r\n**Steps to reproduce the problem**\r\nCreate a content type with a manyToMany relation to users-permission plugin. (using a relational database > bookshelf)\r\n\r\nQuery this content type using params \"users_in=x\", the request fails because the expected column name in the intermediate table is wrong\r\n\r\n\r\n**What is the expected behavior?**\r\nStrapi should expect the column name in the intermediate table for a mtm relation to be the one it generated\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: 3.0.0-alpha.26.1\r\n- **Database**: Mongo\r\n- **Operating system**:  Mojave\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I use sqlite upload it works normally, but when I use Mongo client I get an error message\r\n\r\n`'Schema hasn\\'t been registered for model \"UploadFile\".\\nUse mongoose.model(name, schema)'` when saving new entry (content type has media fields), and when on the plugin/upload page I get an error message `{\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"An internal server error occurred\"}`\r\n\r\nI use `strapi-provider-upload-cloudinary` ver 3.0.0-alpha.26.1\r\n**Steps to reproduce the problem**\r\nAdd new connections with mongo clients, change upload configuration to cloudinary provider, add content type with mongo connection, add media (upload) field, try to add new entry.\r\n\r\n\r\n**What is the expected behavior?**\r\nworks normally like sqlite client\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **NPM version**: v6\r\n- **Strapi version**: v26.1\r\n- **Database**: MariaDB 10.3\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n**What is the current behavior?**\r\n\r\nAttempting to filter (any filter) on the automated `created_at` or `updated_at` fields result in the following error:\r\n\r\n```\r\n{\r\n\"statusCode\": 400,\r\n\"error\": \"Bad Request\",\r\n\"message\": \"Your filters contain a field 'created_at' that doesn't appear on your model definition nor it's relations\"\r\n}\r\n```\r\n\r\nLikewise with graphql:\r\n\r\n```\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Your filters contain a field 'created_at' that doesn't appear on your model definition nor it's relations\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 2,\r\n          \"column\": 3\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"fmreports\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"status\": 400\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"data\": {\r\n    \"fmreports\": null\r\n  }\r\n}\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nAttempt to filter on the date fields\r\n\r\n**What is the expected behavior?**\r\n\r\nShould function as regular fields\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3  <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: latest 26.1 alpha<!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: Windows Server 2012\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nIf a value is filtered with greater than 101 and less than 102, when value is 100, only the last filter property is respected.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create new project with mongoDB\r\n2. Create content type test with numeric field \"test\".\r\n3. Create entry with value 100\r\n4. Filter in either Admin UI or REST request with test?test_gt=101&test_lt103\r\n5. returns value 100 anyways\r\n\r\n**What is the expected behavior?**\r\nValue 100 should be filtered out and not returned.\r\n\r\n**Suggested solutions**\r\nSeems to be mongoDB only problem, and has something to do with the last filter applied only being respected. the filter function doesnt `{gt: 101 AND lt: 102}` and might only set the last only."},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  10.15.0<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**:  latest cli install today <!-- Please make sure you are on the latest version -->\r\n- **Database**: PostgresSQL 11 local brew install\r\n- **Operating system**:  MacOS latest\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**  Server crashing when changing database name from default to anything else.  Unrecoverable, crashing restart also needs reinstall\r\n\r\n\r\n\r\n**Steps to reproduce the problem**  \r\n\r\n1. New manual install using local Postgresql\r\n2.  Login new credentials\r\n3.  Go to Configuration -> databases and change name from default to anything else\r\n4.  On SAVE server crashes\r\n\r\n```\r\n[2019-04-24T21:27:18.828Z] debug PUT /settings-manager/configurations/databases/default/development (23 ms)\r\nerror TypeError: strapi.models.core_store.forge is not a function\r\n\r\nerror TypeError: strapi.models.core_store.forge is not a function\r\n    at Object.get (/usr/local/lib/node_modules/strapi/lib/core/store.js:55:47)\r\n    at module.exports (/Users/Numchucks/development/client/forms/cms/plugins/content-manager/config/functions/bootstrap.js:312:42)\r\n    at Promise (/usr/local/lib/node_modules/strapi/lib/Strapi.js:299:13)\r\n    at new Promise (<anonymous>)\r\n    at execBootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:287:11)\r\n    at Promise.all.Object.values.map.x (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:44)\r\n    at Array.map (<anonymous>)\r\n    at Strapi.bootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:35)\r\n    at Strapi.start (/usr/local/lib/node_modules/strapi/lib/Strapi.js:109:18)\r\n(node:95769) UnhandledPromiseRejectionWarning: TypeError: strapi.models.core_store.forge is not a function\r\n    at Object.get (/usr/local/lib/node_modules/strapi/lib/core/store.js:55:47)\r\n    at module.exports (/Users/Numchucks/development/client/forms/cms/plugins/settings-manager/config/functions/bootstrap.js:17:26)\r\n    at Promise (/usr/local/lib/node_modules/strapi/lib/Strapi.js:299:13)\r\n    at new Promise (<anonymous>)\r\n    at execBootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:287:11)\r\n    at Promise.all.Object.values.map.x (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:44)\r\n    at Array.map (<anonymous>)\r\n    at Strapi.bootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:35)\r\n    at Strapi.start (/usr/local/lib/node_modules/strapi/lib/Strapi.js:109:18)\r\n(node:95769) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 4)\r\n(node:95769) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n(node:95769) UnhandledPromiseRejectionWarning: TypeError: strapi.models.core_store.forge is not a function\r\n    at Object.get (/usr/local/lib/node_modules/strapi/lib/core/store.js:55:47)\r\n    at module.exports (/Users/Numchucks/development/client/forms/cms/plugins/users-permissions/config/functions/bootstrap.js:96:45)\r\n    at Promise (/usr/local/lib/node_modules/strapi/lib/Strapi.js:299:13)\r\n    at new Promise (<anonymous>)\r\n    at execBootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:287:11)\r\n    at Promise.all.Object.values.map.x (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:44)\r\n    at Array.map (<anonymous>)\r\n    at Strapi.bootstrap (/usr/local/lib/node_modules/strapi/lib/Strapi.js:326:35)\r\n    at Strapi.start (/usr/local/lib/node_modules/strapi/lib/Strapi.js:109:18)\r\n(node:95769) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 5)\r\n(node:95769) UnhandledPromiseRejectionWarning: ReferenceError: config is not defined\r\n    at fs.readdir (/Users/Numchucks/development/client/forms/cms/plugins/email/config/functions/bootstrap.js:68:40)\r\n(node:95769) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 7)\r\n(node:95769) UnhandledPromiseRejectionWarning: ReferenceError: config is not defined\r\n    at fs.readdir (/Users/Numchucks/development/client/forms/cms/plugins/upload/config/functions/bootstrap.js:70:40)\r\n(node:95769) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 9)\r\n```\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nChange default database name\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: Node v10.13.0  <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: alpha.26.1 <!-- Please make sure you are on the latest version -->\r\n- **Database**: mongo\r\n- **Operating system**: Mac OS 10.14.3\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen running a query that includes multiple relations to the same model via different names, only the results of one of those relations is returned. \r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. create a content type. For example Recipes. \r\n2. create a many to many relation between Recipes and users called \"favorites\" \r\n3. create a many to many relation between recipes and users called  \"upvotes\"\r\n4. create an entry for Recipes with DIFFERENT users for each relation to \"favorites\" and \"upvotes\" \r\n5.  run a graphql query for the recipe including favorites and upvotes:\r\n```\r\nquery {\r\n  recipe(id: \"5cb7828b7f0980f2e9dd9723\") {\r\n    favorites {\r\n      id\r\n    }\r\n    upvotes {\r\n      id\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nResult: only the first relation relation \"favorites\" will be returned. upvotes will be an empty array. \r\n```\r\n{\r\n  \"data\": {\r\n    \"recipe\": {\r\n      \"favorites\": [\r\n        {\r\n          \"id\": \"5c1bece5893dd4718a8cc0e9\"\r\n        }\r\n      ],\r\n      \"upvotes\": []\r\n    }\r\n  }\r\n```\r\n\r\n\r\n**What is the expected behavior?**\r\nboth relations will return their values. \r\n\r\n**Suggested solutions**\r\nIn loader.js change the indexQueries const inside the extractQueries function, to include alias. \r\n```\r\n      // Find similar query.\r\n      const indexQueries = queries.findIndex(query =>\r\n        _.isEqual(\r\n          { options: query.options, alias: query.alias },\r\n          { options, alias: association ? association.alias : undefined }\r\n        )\r\n      );\r\n```\r\n\r\nSince PR aren't being accepted right now I'll leave this here until it's resolved."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.14.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: v3.0.0-alpha.21 (I know it's not the last version but I can't see any topic related to this issue in the higher versions Changelog)\r\n- **Database**: mongoDB\r\n- **Operating system**: Mac OS X\r\n\r\n\r\n\r\n**What is the current behavior?**\r\nI followed the strapi documentation with the exact same example. https://strapi.io/documentation/3.x.x/guides/i18n.html#internationalization\r\n`/hello/John?locale=en_US` and `/hello/John?locale=fr_FR` everything works as expected in development env but in staging and production env, it's always take the key as fallback\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1) Create the route\r\n\r\n```json\r\n{\r\n  \"routes\": [\r\n    {\r\n      \"method\": \"GET\",\r\n      \"path\": \"/hello/:name\",\r\n      \"handler\": \"Hello.sayHello\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n2) Create the controller\r\n\r\n```javascript\r\nmodule.exports = {\r\n  // GET /hello/:name\r\n  sayHello: async (ctx) => {\r\n    ctx.send(ctx.i18n.__('Foo %s', ctx.params.name));\r\n  }\r\n};\r\n```\r\n\r\n3) Create the i18n (fr_FR.json and en_EN.json)\r\n```json\r\n{\r\n  \"Foo %s\": \"Bonjour %s\"\r\n}\r\n```\r\n\r\n```json\r\n{\r\n  \"Foo %s\": \"Hello %s\"\r\n}\r\n```\r\n\r\nI also forced the french in my config/language.json but it's always the key that appears `Foo Benjamin`\r\n```json\r\n{\r\n  \"enabled\": true,\r\n  \"defaultLocale\": \"fr_fr\",\r\n  \"modes\": [\r\n    \"query\",\r\n    \"subdomain\",\r\n    \"cookie\",\r\n    \"header\",\r\n    \"url\",\r\n    \"tld\"\r\n  ],\r\n  \"cookieName\": \"locale\"\r\n}\r\n```\r\n\r\n\r\n**What is the expected behavior?**\r\nThe query parameter locale have to works in the production and staging environments like it already does in development environment.\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **NPM version**: v6\r\n- **Strapi version**: v26.1\r\n- **Database**: MariaDB 10.3\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: https://github.com/canonn-science/CAPIv2-Strapi\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n![image](https://user-images.githubusercontent.com/8593673/56572144-51d3f300-6573-11e9-82d5-da6bbaf2524c.png)\r\n\r\nWhen using the `_lte` filter if you try to filter on \"less than or equal to zero\" the filter no longer applies\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a model with some float, biginteger, or decimal fields and create data that is a negative or less than zero and attempt to filter on them.\r\n\r\n**What is the expected behavior?**\r\n\r\nIt should filter the values as -10 is less than or equal to 0 :stuck_out_tongue: \r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"**Information**\r\n- **Node.js version**: v10.15.3\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.26\r\n- **Database**: SQLite\r\n- **Operating system**: macOS 10.13.6\r\n\r\n**What is the current behavior?**\r\nWhen deleting a model's attribute via the admin UI (and saving), the Strapi API still returns the attribute in the JSON results—even after restarting the server, making the call in a new browser, and restarting the machine.\r\n\r\nIn the admin UI, `model.settings.json` file, and even `core_store` table, the attributes do not show. They only exist in the SQLite db.\r\n\r\nOld instances of the model will continue to return their values, whereas new instances will return null.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- Create a new quick-started strapi project (or non-quickstart and choose SQLite).\r\n- Register a new root user.\r\n- In the admin UI, add a new content type called `article`, with two string fields: `title`, `summary`; save.\r\n- Under the Articles content type, Add New Article with values \"hello world\" and \"this is the first amazing article\"; save.\r\n- Add the find and findone permissions on the Article resources to the Public role; save\r\n- Visit http://localhost:1337/articles/1 to confirm the model attributes and values return as expected.\r\n- Back in the admin UI, delete the _summary_ field from the Article content type; save.\r\n- _(optional)_ Quit the strapi server in the terminal, and `strapi start` again\r\n- Refresh http://localhost:1337/articles/1\r\n\r\n**What is the expected behavior?**\r\nThe `summary` field should not be included in the JSON results.\r\n\r\n**Suggested solutions**\r\nI understand that:\r\n\r\n- On the database side, there is an enhancement currently under consideration on the roadmap: https://portal.productboard.com/strapi/c/22-delete-unnecessary-tables-collections-columns-in-the-databases\r\n- SQLite has limited alter table functionality, so dropping columns requires cloning and recreating tables as outlined here: https://www.sqlite.org/lang_altertable.html#otheralter\r\n\r\nHowever, I am not sure why the API does not honor the model. I am a newbie, so I wasn't exactly sure of the expected behavior. But according to someone from the Slack chat, it seems that this issue works as expected when using MongoDB.\r\n\r\nI am not a Node.js dev, but one thing I did notice in the code was that the service template does not pass column names to the `bookshelf.model.fetch` call:\r\n\r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi-generate-api/templates/bookshelf/service.template#L51-L53\r\n\r\nBut then I tried changing the `Article.fetch` service function in my test project to pass the column names as so:\r\n\r\n```js\r\nreturn Article.forge(_.pick(params, 'id')).fetch({\r\n  columns: ['name'],\r\n  withRelated: populate\r\n});\r\n```\r\n\r\nBut that doesn't return the related fields, i.e. `created_at` and `updated_at` or if I had a media type attribute it wouldn't be returned either, just:\r\n\r\n```js\r\n{\"id\":\"1\",\"name\":\"hello world\"}\r\n```\r\n\r\nIn any case, my suggested solution would be to ensure the API honors the model rather than the database."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: Node v10.13.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: alpha.26\r\n- **Database**: Mongoose \r\n- **Operating system**: Mac OS 10.14.3\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I update an entry in the front end. It removes existing relationships that are one-to-many. \r\n**Steps to reproduce the problem**\r\n1. Create two new content types: Product and Category \r\n2. Create a one-to-many relation. one Category has many products. \r\n3. Create a new Category \r\n4. Create a new product\r\n5. Open the new category and add the new product as a relation and save.\r\n6. Open the new category again and save again. \r\n7. Open the new category again\r\nResult: previously added product is gone. \r\n\r\n\r\n**What is the expected behavior?**\r\npreviously added relations (products) will remain after updating a category.\r\n\r\n\r\n**Suggested solutions**\r\nI hit a dead end while debugging. in plugins/content-manager/config/queries/mongoose.js, the method this.updateRelations is called and I can't find where this method is defined. But I assume that the error happens in this method. "},{"labels":[null,null,"bug"],"text":"Node v10.6.0\r\nNPM 6.1.0\r\nMongoDB  v4.0.9\r\nstrapi 3.0.0-alpha.26\r\nMongoDB\r\nMacOS 10.14.1\r\n\r\n\r\nWhat is the current behavior?\r\nOn a fresh install, a deep filtered query within the playground returns no object for the deep filtered item\r\n\r\n```\r\n{\r\n  puppies(where:{breeds:{name_contains:\"affenpinscher\"}}){\r\n    _id\r\n    name\r\n    breeds{\r\n      _id\r\n      name\r\n    }\r\n  }\r\n}\r\n```\r\nResults correctly :\r\n```\r\n{\r\n  \"data\": {\r\n    \"puppies\": [\r\n      {\r\n        \"_id\": \"5cb781e3d803f9b7e4594af3\",\r\n        \"name\": \"sammy\",\r\n        \"breeds\": null\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\nBut breed is null, and breed should result an ID and a name\r\n\r\nSteps to reproduce the problem\r\n1. Make sure the latest strapi is installed (npm i -g strapi@alpha)\r\n2. strapi new project\r\n3. Mongo Db, and create a project\r\n4. Add the grapqhl plugin from the marketplace (or install it with NPM)\r\n5. add two content-types in the content-type builder\r\nfor example:\r\na) puppies\r\nb) breeds\r\n\r\nboth contentypes have a field 'name'\r\nI added two puppies, and two breeds, (affenpinscher, poodle ;-)\r\n\r\nIn content-type builder I added a relation, actually I tried all 5 of them.\r\nBut in my opion, a puppy 'has and belongs to one breed'\r\n\r\nWhat is the expected behavior?\r\n\"breeds\": null should return:\r\n\r\n```\r\n\"breeds\": [\r\n          {\r\n            \"_id\": \"5cb781d6d803f9b7e4594af1\",\r\n            \"name\": \"affenpinscher\"\r\n          }\r\n        ]\r\n```\r\nSuggested solutions\r\nI have no clue. Maybe I have to reinstall my mongoDB again. \r\nOr test on another machine\r\n\r\nMy puppies model:\r\n\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"puppies\",\r\n  \"info\": {\r\n    \"name\": \"puppies\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"breed\": {\r\n      \"model\": \"breeds\",\r\n      \"via\": \"puppy\"\r\n    }\r\n  }\r\n}\r\n```\r\nMy breeds model\r\n\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"breeds\",\r\n  \"info\": {\r\n    \"name\": \"breeds\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"name\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"test\": {\r\n      \"type\": \"string\"\r\n    },\r\n    \"puppy\": {\r\n      \"model\": \"puppies\",\r\n      \"via\": \"breed\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **NPM version**: v6\r\n- **Strapi version**: v26\r\n- **Database**: MySQL\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: https://github.com/canonn-science/CAPv2-Strapi\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nIn my case I have two databases:\r\n1) capiv2_base\r\n2) capiv2_user\r\n\r\nAll tables are on the `capiv2_base` EXCEPT for the `users-permission_user` table which is on the `capiv2_user` database.\r\n\r\n@alexandrebodin and I have traced the problem down to the fix for the counts of users per role on the adminUI attempting to use a SQL Join between two databases without the database prefix:\r\n\r\n```\r\n  code: 'ER_NO_SUCH_TABLE',\r\n  errno: 1146,\r\n  sqlMessage:\r\n   'Table \\'capiv2_user.users-permissions_role\\' doesn\\'t exist',\r\n  sqlState: '42S02',\r\n  index: 0,\r\n  sql:\r\n   'select distinct count(*) as `count` from `users-permissions_user` left join `users-permissions_role` as `users-permissions_role_1` on `users-permissions_role_1`.`id` = `users-permissions_user`.`role` where `users-permissions_role_1`.`id` = 1' }\r\n```\r\n\r\nStrapi is assuming that both these tables on the same database.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nSplit the users table into it's own database and attempt to query the adminUI for roles or permissions/advanced settings\r\n\r\n**What is the expected behavior?**\r\n\r\nStrapi should use the database name prefix before the table to prevent this issue, given this will only work if the tables are on the same DB server (which is common).\r\n\r\nMy reason for doing this is such that if a user updated their password on my Production server, they can still use that account to access my Staging server (for testing their applications before throwing load at my production one)\r\n\r\nThis is fairly common with larger APIs that they offer a \"Test\" server to play on without fear of hurting the production one, or filling the prod server with fake or useless data.\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: 3.0.0-alpha.26\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWith one `sort`, it works:\r\n\r\n![Screenshot 2019-04-17 at 11 51 46](https://user-images.githubusercontent.com/1007051/56279331-2d59c000-6108-11e9-8d34-6013166a6462.png)\r\n\r\nBut if I add multiples `sort`s, it doesn't work:\r\n\r\n![Screenshot 2019-04-17 at 11 59 56](https://user-images.githubusercontent.com/1007051/56279417-5712e700-6108-11e9-8a83-e2d73ba68532.png)\r\n\r\n![Screenshot 2019-04-17 at 11 52 01](https://user-images.githubusercontent.com/1007051/56279332-2d59c000-6108-11e9-82a6-44f0bda36481.png)\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCheck the previous screenshots.\r\n\r\n**What is the expected behavior?**\r\n\r\nComplete results.\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.26\r\n- **Database**: MySQL (tested with --quickstart too)\r\n- **Operating system**: macOS\r\n\r\n**What is the current behavior?**\r\n\r\nAfter a fresh install of latest Strapi, I'm unable to start the generated project.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- `npm i -g strapi@alpha`\r\n- `strapi new test`\r\n- Select MySQL, config database\r\n- `cd test`\r\n- `strapi start`\r\n- Got this error:\r\n```\r\n(node:6012) UnhandledPromiseRejectionWarning: TypeError: orm.load(...).buildQuery is not a function\r\n    at buildQuery (/Users/Zooly/Documents/DEV/gatsby/api/plugins/users-permissions/node_modules/strapi-utils/lib/buildQuery.js:116:21)\r\n    at Function.count (/Users/Zooly/Documents/DEV/gatsby/api/plugins/users-permissions/config/queries/bookshelf.js:22:23)\r\n    at Object.initialize (/Users/Zooly/Documents/DEV/gatsby/api/plugins/users-permissions/services/UsersPermissions.js:339:67)\r\n    at module.exports (/Users/Zooly/Documents/DEV/gatsby/api/plugins/users-permissions/config/functions/bootstrap.js:167:65)\r\n(node:6012) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2)\r\n(node:6012) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2019-04-16T19:37:52.569Z] warn Bootstrap is taking unusually long to execute its callback 3500 miliseconds).\r\n[2019-04-16T19:37:52.571Z] warn Perhaps you forgot to call it?\r\n```"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: 6.5\r\n- **Strapi version**: alpha 26\r\n- **Database**: mysql\r\n- **Operating system**: macOS 10.14\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I query a related model using graphql I'm getting an internal server error:\r\n<img width=\"1433\" alt=\"Screenshot 2019-04-16 13 20 21\" src=\"https://user-images.githubusercontent.com/547583/56234369-c1655200-604a-11e9-9d4f-45bfe2c44982.png\">\r\n\r\nAnd here's a look at the `blends_management_systems__managementsystems_blends` table Strapi created:\r\n<img width=\"318\" alt=\"Screenshot 2019-04-16 13 26 39\" src=\"https://user-images.githubusercontent.com/547583/56234629-549e8780-604b-11e9-9a2a-6d69138fb025.png\">\r\n\r\n\r\n**Steps to reproduce the problem**\r\nPrior to upgrading to alpha 26 I had 2 models, `blend` and `managementsystem`. Under **Advanced -> Collection Name** I had `blends` and `management_systems`. As of alpha 22 I was able to query the nested resource successfully.\r\n\r\n\r\n**What is the expected behavior?**\r\nI should be able to query the nested resources.\r\n\r\n\r\n**Suggested solutions**\r\nWhen I look at the error message I'm seeing Strapi construct the model name using 2 different methods. It seems like when creating the table name and querying Strapi uses the `Collection Name` entered when creating the model. But when creating the join id column in the database it uses the standard model name. Note that these tables were created with a version of strapi well before version alpha 22 (maybe alpha 16). So I'm not sure if something has changed since then. Am I going to have to manually rename all my database columns?"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha25.2\r\n- **Database**: Mongo DB\r\n- **Operating system**: Mac OSX mojave\r\n\r\n**What is the current behavior?**\r\n\r\nI have created a custom graphql schema for one of my content types. This custom graphql schema contains a singular query override and a plural query override (e.g. contact and contacts). Overriding the contact query is working fine with a plugin policy combined with a local policy. For the contacts query, i added a plugin policy and all works fine but when i add a local policy i am getting the following error message: `error Ignored attempt to bind to GraphQL query \"contacts\" with unknown policy \"getOnlyManagedContacts\"`. When I move the policy to a plugin or at global level and then update it in the graphql schema for the contacts query then it is working.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. create a new content type\r\n2. add a local policy in /api/myContentType/config/policies\r\n3. create a custom graphql schema in /api/myContentType/config\r\n4. assign the local policy to the myContentTypes graphql query as follow:\r\n\r\n```\r\nmodule.exports = {\r\n  resolver: {\r\n    Query: {\r\n      myContentType: {\r\n        description: 'Returns the exact myContentType',\r\n        policies: ['plugins.users-permissions.permissions', 'isOwnerOfMyContentType'],\r\n        resolver: 'MyContentType.findOne'\r\n      },\r\n      myContentTypes: {\r\n        description: 'Returns a list of myContentTypes',\r\n        policies: ['plugins.users-permissions.permissions', 'onlyGetManagedMyContentType'],\r\n        resolver: 'MyContentType.find'\r\n      },\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nthe expected behavior is when restarting the server then no error message binding the myContentTypes graphql query to onlyGetManagedMyContentType local policy is displayed and that the local policy is applied to the non singular query\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.0.0.\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: Strapi v3.0.0-alpha.26\r\n- **Database**: sqlite\r\n- **Operating system**: MacOS 10.14.5\r\n\r\n**What is the current behavior?**\r\nWhen I am using the cloudinary upload provider and add multiple images in a model where the \"asset\" field supports multiple files, I can see them correctly uploaded to Cloudinary but only one asset is linked to the entry. I can see the files in the the \"Files Upload\" menu though.\r\nNo errors are displayed in the console. When I try to add more files in the 'edit' it only adds one file again.\r\nThis works only the first time if I'm using the \"local upload\" provider. After adding more files to an existing content type it does not work \r\n\r\n**Steps to reproduce the problem**\r\n1. Install cloudinary provider\r\n\r\n       cd plugins/upload\r\n       npm i --save strapi-provider-upload-cloudinary\r\n\r\n1. configure it\r\n1. Create a \"Post\" content type with a 2 types of media fields (\"cover\" with a single value, and \"gallery\" with multiple values)\r\n1. Create an entry and add multiple files (gallery) and a single file (cover)\r\n1. After saving see that it is all updated in cloudinary but incorrectly in the UI or in the model (graphql)\r\n\r\n\r\n**What is the expected behavior?**\r\nMultiple files are correctly linked to a \"post\" entity.\r\n\r\n\r\n**Suggested solutions**\r\nNot sure, no errors in console.\r\nI think it's a UI problem as I can reproduce it to local upload provider as well. "},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x --> \r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> 10.15.1\r\n- **NPM version**:   6.9.0\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->  v3.0.0-alpha-25.2\r\n- **Database**:  Mongo DB\r\n- **Operating system**:  Ubuntu\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nProvider mailgun is not showing in email plugin settings.\r\n\r\n**Steps to reproduce the problem**\r\nInstalled the npm module from this page : https://www.npmjs.com/package/strapi-provider-email-mailgun and then restarted server but plugin not shown but showing in Dev mode.\r\n\r\n**What is the expected behavior?**\r\nIt should be visible in Production mode too.\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.3<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2<!-- Please make sure you are on the latest version -->\r\n- **Database**: MySQL (Most likely affects other databases too)\r\n- **Operating system**: Ubuntu 18.04.2 LTS (Bionic Beaver)\r\n\r\n**What is the current behavior?**\r\nI have a content type with a field called `key`. When I select that content type from the menu and start searching for an entry, I get an error message saying `An error occured`.\r\n\r\nAfter checking the logs, the query that is being executed is the following\r\n```sql\r\nselect count(*) as `count` from `some_table` where MATCH(key,some_column,another_column) AGAINST('*a*' IN BOOLEAN MODE);\r\n```\r\n**Steps to reproduce the problem**\r\nSee above. Create a content type with a field called `key` and search for entries in it.\r\n\r\n**What is the expected behavior?**\r\nThe search functionality should work as usual, regardless of what a field is called.\r\n\r\n**Suggested solutions**\r\nThe query should be\r\n```sql\r\nselect count(*) as `count` from `some_table` where MATCH(`key`,some_column,another_column) AGAINST('*a*' IN BOOLEAN MODE);\r\n```\r\n\r\nThe column name `key` should be surrounded by two backticks. The same is expected for any other reserved keywords in MySQL."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x --> \r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: Node v10.15.3 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  npm 6.4.1 \r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> 3.0.0-alpha.25.2\r\n- **Database**: postgresql v9.6.5\r\n- **Operating system**: ubuntu 16.04, kernel 4.4.0-145-generic\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nusing strapi-javascript-sdk, passing array as author_in value to apply whereIn  filter, like\r\n```\r\n{\r\n  author_in: [1,3]\r\n}\r\n```\r\nquery string will become author_in[0]=1&author_in[1]=3, which leads to error on backend\r\nlog shows\r\n```\r\nTypeError: The operator \"undefined\" is not permitted\r\n    at Formatter.operator (/home/strapi-cms/node_modules/knex/lib/formatter.js:179:13)\r\n    at QueryCompiler_PG.whereBasic (/home/strapi-cms/node_modules/knex/lib/query/compiler.js:567:100)\r\n    at QueryCompiler_PG.where (/home/strapi-cms/node_modules/knex/lib/query/compiler.js:350:34)\r\n    at components.map.component (/home/strapi-cms/node_modules/knex/lib/query/compiler.js:96:67)\r\n    at Array.map (<anonymous>)\r\n    at QueryCompiler_PG.select (/home/strapi-cms/node_modules/knex/lib/query/compiler.js:96:35)\r\n    at QueryCompiler_PG.toSQL (/home/strapi-cms/node_modules/knex/lib/query/compiler.js:50:29)\r\n    at Builder.toSQL (/home/strapi-cms/node_modules/knex/lib/query/builder.js:72:44)\r\n    at /home/strapi-cms/node_modules/knex/lib/runner.js:37:34\r\n    at tryCatcher (/home/strapi-cms/node_modules/bluebird/js/release/util.js:16:23)\r\n    at /home/strapi-cms/node_modules/bluebird/js/release/using.js:185:26\r\n    at tryCatcher (/home/strapi-cms/node_modules/bluebird/js/release/util.js:16:23)\r\n    at Promise._settlePromiseFromHandler (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:512:31)\r\n    at Promise._settlePromise (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:569:18)\r\n    at Promise._settlePromise0 (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:614:10)\r\n    at Promise._settlePromises (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:694:18)\r\n    at Promise._fulfill (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:638:18)\r\n    at PromiseArray._resolve (/home/strapi-cms/node_modules/bluebird/js/release/promise_array.js:126:19)\r\n    at PromiseArray._promiseFulfilled (/home/strapi-cms/node_modules/bluebird/js/release/promise_array.js:144:14)\r\n    at Promise._settlePromise (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:574:26)\r\n    at Promise._settlePromise0 (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:614:10)\r\n    at Promise._settlePromises (/home/strapi-cms/node_modules/bluebird/js/release/promise.js:694:18)\r\n    at _drainQueueStep (/home/strapi-cms/node_modules/bluebird/js/release/async.js:138:12)\r\n    at _drainQueue (/home/strapi-cms/node_modules/bluebird/js/release/async.js:131:9)\r\n    at Async._drainQueues (/home/strapi-cms/node_modules/bluebird/js/release/async.js:147:5)\r\n    at Immediate.Async.drainQueues [as _onImmediate] (/home/strapi-cms/node_modules/bluebird/js/release/async.js:17:14)\r\n    at runCallback (timers.js:705:18)\r\n    at tryOnImmediate (timers.js:676:5)\r\n    at processImmediate (timers.js:658:5)\r\n[2019-04-10T07:43:05.498Z] debug GET /post?author_in[]=1&author_in[]=3 (10 ms)\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n1. create a content type Post, with field author,title and content\r\n2. add some post\r\n3. use strapi-javascript-sdk to call\r\n```\r\nlet authors = [1,3]\r\nlet results = await this.strapi.getEntries('posts', {\r\n                    author_in: authors\r\n                });\r\n```\r\n\r\n**What is the expected behavior?**\r\ncan use array in strapi-javascript-sdk to do whereIn filter directly\r\n\r\n\r\n**Suggested solutions**\r\ncurrent workaround is in the service, to trim off [n] of params before pass to covertParams like this:\r\n```\r\nconst ARRAY_PARAMETERS = /\\[[0-9]+\\]$/;\r\n\r\nfunction fixParams(params) {\r\n    return Object.entries(params).reduce((a,c) => {\r\n        if (ARRAY_PARAMETERS.test(c[0])) {\r\n            let key = c[0].replace(ARRAY_PARAMETERS,'');\r\n            let array = a[key] || [];\r\n            array.push(c[1]);\r\n            a[key] = array;\r\n        } else {\r\n            a[c[0]] = c[1];\r\n        }\r\n        return a;\r\n    },{});\r\n}\r\n\r\nfetchAll: (params) => {\r\n     // Convert `params` object to filters compatible with Bookshelf.\r\n    const filters = strapi.utils.models.convertParams('post', fixParams(params));\r\n...\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.3\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: doesnt matter\r\n- **Operating system**: ubuntu 18.04 lts\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nNew customs field in Role cant be edited from interface. After creating often crash project with error: \r\n![image](https://user-images.githubusercontent.com/36981278/55782261-8dbb8280-5ab4-11e9-8421-9782b02a90ee.png)\r\n\r\n**Steps to reproduce the problem**\r\nContent Type Builder -> Role -> Add New Field -> String/Enumeration with any name\r\nsometimes created, sometimes crash project\r\nif field created, i cant see them in interface by any created role for edit\r\n\r\nnew enum field in Role\r\n![image](https://user-images.githubusercontent.com/36981278/55783599-75993280-5ab7-11e9-99f4-6a6265aaf273.png)\r\n\r\nconfigure content manager:\r\n![image](https://user-images.githubusercontent.com/36981278/55783639-8cd82000-5ab7-11e9-98e2-ba30b10bc512.png)\r\n![image](https://user-images.githubusercontent.com/36981278/55783651-92356a80-5ab7-11e9-8675-697c08e825d8.png)\r\n\r\nlist ignore my view config:\r\n![image](https://user-images.githubusercontent.com/36981278/55783687-a37e7700-5ab7-11e9-9a32-899591748e7d.png)\r\n\r\nand editing same:\r\n![image](https://user-images.githubusercontent.com/36981278/55783700-b133fc80-5ab7-11e9-864b-f26d487e79bb.png)\r\n\r\n\r\n**What is the expected behavior?**\r\nContent Manager has configurable position field and should work by settings\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.13.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**:  3.0.0-alpha.25.2\r\n- **Database**: Mongo db\r\n- **Operating system**: Windows\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n In Description field , select any content and cut the content.click save button.The content is not getting removed.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\nThe content should be  removed.\r\n\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.3\r\n- **NPM version**: 6.9.0\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: MySQL\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: https://gitlab.com/selfagencyllc/kifa-cms\r\n\r\n**What is the current behavior?**\r\n\r\nIn development, it works fine. In production, when attempting to add a new user, I get a blank screen and the following console error:\r\n\r\n```\r\nTypeError: \"o is undefined\"\r\n    renderAttr main.js:48\r\n    value main.js:48\r\n    Co main.js:16\r\n    Oo main.js:16\r\n    Bo main.js:16\r\n    wn main.js:16\r\n    An main.js:16\r\n    Wn main.js:16\r\n    Hn main.js:16\r\n    Bn main.js:16\r\n    En main.js:16\r\n    enqueueSetState main.js:24\r\n    setState main.js:40\r\n    onStateChange main.js:72\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    l main.js:45\r\n    n main.js:37\r\n    e main.js:45\r\n    dispatch main.js:45\r\n    F main.js:45\r\n    x main.js:45\r\n    n main.js:45\r\n    s main.js:45\r\n    r main.js:45\r\n    x main.js:45\r\n    b main.js:45\r\n    h main.js:45\r\n    o main.js:45\r\nmain.js:16\r\n    tn main.js:16\r\n    callback main.js:16\r\n    Zo main.js:16\r\n    Xo main.js:16\r\n    yn main.js:16\r\n    bn main.js:16\r\n    qn main.js:16\r\n    unstable_runWithPriority main.js:53\r\n    qn main.js:16\r\n    Wn main.js:16\r\n    Hn main.js:16\r\n    Bn main.js:16\r\n    En main.js:16\r\n    enqueueSetState main.js:24\r\n    setState main.js:40\r\n    onStateChange main.js:72\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    notify main.js:37\r\n    notifyNestedSubs main.js:37\r\n    onStateChange main.js:37\r\n    l main.js:45\r\n    n main.js:37\r\n    e main.js:45\r\n    dispatch main.js:45\r\n    F main.js:45\r\n    x main.js:45\r\n    n main.js:45\r\n    s main.js:45\r\n    r main.js:45\r\n    x main.js:45\r\n    b main.js:45\r\n    h main.js:45\r\n    o main.js:45\r\n```\r\n\r\n**Steps to reproduce the problem**\r\nNavigate to `https://YOURSITE/admin/plugins/content-manager/user/create?redirectUrl=/plugins/content-manager/user?_limit=10&_page=1&_sort=id&source=users-permissions`\r\n\r\n**What is the expected behavior?**\r\nFor the page to load."},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.4.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.25.2\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI can't remove a relation in the content manager. Normally there is a \"minus\" button on the right of the relation item, but because the text is too long so it doesn't appear. This is a one to many relation, and zooming out reveals the button. A simple CSS patch should fix the issue.\r\n\r\n<img width=\"299\" alt=\"Capture d’écran 2019-04-04 à 10 47 46\" src=\"https://user-images.githubusercontent.com/8087692/55542354-2756ee80-56c7-11e9-9fba-9eb8d02aadb9.png\">\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- Mozilla Firefox version : 66.0.2 (64-bit)\r\n- **Operating system**: Windows\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhile having multiple content-types, we can't see Genral Section > Global Settings & all other menus, as menu is not scrolling down like in Google Chrome.\r\nIn Firefox:\r\n![strapi-scrolling-bug-firefox](https://user-images.githubusercontent.com/5942572/55440832-91d43580-55c6-11e9-8108-edca8e27706a.PNG)\r\n\r\n\r\n**Steps to reproduce the problem**\r\nAccess Strapi Dashboard in firefox.\r\n\r\n**What is the expected behavior?**\r\nIt should be scrollable so we can select other menu's as well.\r\nIn Chrome:\r\n![strapi-scrolling-bug-firefox-working-fine-chrome](https://user-images.githubusercontent.com/5942572/55440848-9dbff780-55c6-11e9-92e8-449507cf4f08.PNG)\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2\r\n- **Database**: MongoDB\r\n- **Operating system**: Windows 10\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nRemoving the content type removes the relation from other content type but doesn't remove data.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create 2 content types\r\n2. Add relation\r\n3. Add content to both\r\n4. Delete one content type\r\n5. Check API old content still exists\r\n\r\n\r\n**What is the expected behavior?**\r\nIt should remove the data from API.\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.1\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: mongodb\r\n- **Operating system**: Ubuntu16.04 64bit\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nThe drop down for relation doesn't show more than 20. \r\nTested both my local and demo.strapi.io.\r\nCannot see the entries more than 20.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nLike this: https://github.com/strapi/strapi/issues/2665\r\n\r\n\r\n**What is the expected behavior?**\r\nLike this: https://github.com/strapi/strapi/issues/2665\r\n\r\n\r\n**Suggested solutions**\r\nLike this: https://github.com/strapi/strapi/issues/2665\r\n\r\n> Actually what happened is it loads the next 20 items when the scroll reaches the end in the dropdown menu.\r\n\r\nBut I tested with the latest version, also the demo.strapi.io, the relation ship entry more than 20 cannot be loaded. Is there any configuration I'm missing?"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  6.2.0\r\n- **Strapi version**: alpha 0.25 <!-- Please make sure you are on the latest version -->\r\n- **Database**:  mysql\r\n- **Operating system**: WSL/Ubuntu \r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI can't update dates anymore via strapi admin\r\n![image](https://user-images.githubusercontent.com/2950505/55040531-0a684e80-5029-11e9-93e7-07afbc2f8651.png)\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\ncreate a model with a date field\r\nchange field with built-in datepicker\r\npress save\r\n\r\n**What is the expected behavior?**\r\n\r\ndates should be written in correct format\r\n\r\n**Suggested solutions**\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.2 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2 <!-- Please make sure you are on the latest version -->\r\n- **Database**: mongodb v4.0.3\r\n- **Operating system**: macOS 10.13.6\r\nuname says: \r\n```\r\nDarwin ******.local 17.7.0 Darwin Kernel Version 17.7.0: Thu Dec 20 21:47:19 PST 2018; root:xnu-4570.71.22~1/RELEASE_X86_64 x86_64\r\n```\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nconsole shows message:\r\n```\r\nSyntaxError: Unexpected token < in JSON at position 0 at n (main.js:1)\r\n```\r\nscreenshot: \r\n<img width=\"1178\" alt=\"strapi-spinner-of-death\" src=\"https://user-images.githubusercontent.com/8559668/54806104-4751d100-4c36-11e9-80c7-fe162a21d843.png\">\r\n\r\n\r\n**Steps to reproduce the problem**\r\nmind your own business while adding content types. add a content type called \"app\". add fields, save content type, refresh page. kaboom!\r\n\r\nrestart strapi in terminal using:\r\n```\r\ncd strapi/project/root/dir\r\nstrapi start\r\n```\r\n\r\ndarn. still spinner of doom. \r\n\r\n\r\n**What is the expected behavior?**\r\nadmin backend is visible instead of spinner of doom.\r\n\r\n\r\n**Suggested solutions**\r\nStart over from scratch? Make backups using git and mongodump after adding every model field? </snark> ... in all seriousness I'll probably do that anyway since strapi makes it SO easy to build out your models. Thanks for Strapi guys; fracking love the app!"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.3 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2<!-- Please make sure you are on the latest version -->\r\n- **Database**:  mongo\r\n- **Operating system**:  win10（wsl Ubuntu）\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link --> null\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n![image](https://user-images.githubusercontent.com/28495915/54755739-93dee180-4c21-11e9-8567-3762310763e2.png)\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n> According to the official website\r\n```bash\r\ngit clone git@github.com:strapi/strapi.git\r\n-\r\ncd strapi && npm run setup\r\n-\r\ncd .. && strapi new myDevelopmentProject --dev\r\n-\r\ncd myDevelopmentProject && strapi start\r\n-\r\ncd /path/to/myDevelopmentProject && strapi generate:plugin my-plugin\r\n-\r\ncd plugins/my-plugins\r\n-\r\nnpm link strapi-helper-plugin\r\n-\r\ncd /admin && npm run setup\r\n-\r\nnpm start\r\n-\r\n-> localhost：4000 / admin\r\n```\r\n\r\n\r\n**What is the expected behavior?**\r\nI'm sorry that my English is not very good, I want to write a plug-in, but at this stage I can't make progress because of the error\r\n\r\n\r\n**Suggested solutions**"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **NPM version**: 6.2.0\r\n- **Strapi version**: alpha 25\r\n- **Database**: mysql\r\n- **Operating system**: WSL/Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n![image](https://user-images.githubusercontent.com/2950505/54690897-a7575300-4b22-11e9-982c-d3aa145b7b09.png)\r\n\r\nAs you can see, the element of the help with the videos covers the last row.\r\n\r\n**Steps to reproduce the problem**\r\n\r\ncreate many content types  or fields or resize the window to see that the last item can't be edited.\r\n\r\n**What is the expected behavior?**\r\n\r\nShould be able to click the last rows actions. There is also no more space to scroll :)\r\n\r\n**Suggested solutions**\r\nhave the floating action button either:\r\n* Only be as big as the button, when videos are hidden\r\n* Or make the button/videos dismissable\r\n* Or move button to lower left into the menu\r\n* Add more space to EVERY single admin page.\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.7.0 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.8.0\r\n- **Strapi version**: 3.0.0-alpha.25 <!-- Please make sure you are on the latest version -->\r\n- **Database**: Mongodb\r\n- **Operating system**: Windows 10\r\n\r\n**What is the current behavior?**\r\nClick to change page in Content Manager\r\n\r\n**Steps to reproduce the problem**\r\n- In \"Content Types menu\", click a item\r\n- Find and move mouse to page 2 link\r\n- Click to go to page 2\r\n\r\n**What is the expected behavior?**\r\n- Unable to click page 2 link\r\n- It happen on small and medium window viewport with 10 or more items in table."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: SQLite\r\n- **Operating system**: Ubuntu 16.04\r\n\r\n\r\n**What is the current behavior?**\r\nChanging the case of the name of a content type property will cause migration and therefore server start up to fail.\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a content type with property Title\r\n2. Save\r\n3. Rename property Title to title\r\n4. Save\r\n5. Restart the strapi server, error log will report Duplicate column name and bookshelf will timeout.\r\n\r\n**What is the expected behavior?**\r\nChanging the case of a content type property name should be migrated in the database successfully.\r\n\r\n**Suggested solutions**\r\nUse SQLite's `Rename Column` feature instead to rename the column instead of creating a new column with the same name.\r\n\r\nOR\r\n\r\nCreate a check when editing content type properties that doesn't allow the user to edit a property name to a value that is case-insensitively identical to an existing property title.\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  10.14.2 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.25.2 <!-- Please make sure you are on the latest version -->\r\n- **Database**: mongodb \r\n- **Operating system**: Mac OS X and Linux (heroku)\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nDouble qoutes are sometimes removed from a text field.\r\n\r\nI currently have some string fields that are double quotes and the quote-chars are removed when I saved the field.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nAdd a text field with the text `\"foo\"` save and the quotes are removed.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe double quotes are not removed\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: MongoDB\r\n- **Operating system**: MacOS\r\n\r\n**What is the current behavior?**\r\nWhen I have a good number of users (let's say +6000 users) assigned to the `Authenticated` role I can't modify the `Roles & Permissions` for that specific Role due to the next error:\r\n```\r\nFailed to load resource: the server responded with a status of 413 (Request Entity Too Large)\r\n```\r\nAnd I suppose that this is due to the body of the request because we are sending all the users in the request:\r\n```\r\n{\r\n  description: \"Default role given to authenticated user.\"\r\n  name: \"Authenticated\",\r\n  permissions: { ... },\r\n  users: [ ... ] (array with more than 6000 objects)\r\n}\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n- Have 6000 users assigned to `Authenticated` role.\r\n- Modify the permissions of `Authenticated` role.\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x --> 10.0.0\r\n<!-- npm 6.x.x --> 6.0.0\r\n<!-- The latest version of Strapi. -->yes\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) -->10.0.0\r\n- **NPM version**: 6.0.0\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->latest\r\n- **Database**: Mongo \r\n- **Operating system**: MacOS 10.14.1\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nIf you pass in x-forwarded-host, nearly all security modules are completely bypassed. This is a dangerous vulnerability that should be fixed immediately as it nearly renders the app completely insecure. \r\n\r\n**Steps to reproduce the problem**\r\n\r\nEnabled all of the policies and then pass in that header. You'll see the security isn't there. Here is one example:\r\n\r\n1. Enable the cors policy in the correct environment and set origin to whatever domain you want:\r\n```\r\n\"cors\": {\r\n    \"enabled\": true,\r\n    \"origin\": \"https://fun-app.com\",\r\n    \"expose\": [\r\n      \"WWW-Authenticate\",\r\n      \"Server-Authorization\"\r\n    ],\r\n    \"maxAge\": 31536000,\r\n    \"credentials\": false,\r\n    \"methods\": [\r\n      \"GET\",\r\n      \"POST\",\r\n      \"PUT\",\r\n      \"PATCH\",\r\n      \"DELETE\",\r\n      \"HEAD\"\r\n    ],\r\n    \"headers\": [\r\n      \"Content-Type\",\r\n      \"Authorization\",\r\n      \"X-Frame-Options\",\r\n      \"Origin\"\r\n    ]\r\n  }\r\n```\r\n\r\n2. Run this curl command:\r\n```\r\ncurl -isk -X OPTIONS \r\n-H 'x-forwarded-host: strapi' \r\n-H 'Access-Control-Request-Method: GET' \r\n-H 'Origin: https://fake.com' \r\nhttp://localhost:1337/content-manager/explorer/marketingtemplate/\\?source\\=content-manager\r\n```\r\n\r\n**What is the expected behavior?**\r\nThe expected behavior is that it will say https://fake.com is not a valid origin. Instead it allows the request through the app.\r\n\r\n**Suggested solutions**\r\n\r\nThis should really be removed. It's only in the codebase to make interactions with the admin panel easier. However, it would be better if security were in place between the admin panel and the server. "},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.8.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: v19 but this bug was tested on v25\r\n- **Database**: mongoDB\r\n- **Operating system**: macOS, ubuntu 18.04\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nForgotten password does not work for any user but the admin user.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nUse the guide here:\r\nhttps://strapi.io/documentation/3.x.x/guides/authentication.html#forgotten-password\r\nOR\r\nuse the login for the admin panel and click forgot password\r\nOR use Strapi SDK\r\nhttps://github.com/strapi/strapi-sdk-javascript\r\n\r\n\r\n**What is the expected behavior?**\r\nForgotten password should work for any registered user.\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> v10.15.3\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> 3.0.0-alpha.24.1\r\n- **Database**: MongoDB v3.6.3\r\n- **Operating system**: Linux Ubuntu 18.10\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nPossibly related to #1887, I'm just trying to apply some policies to the default Shadow CRUD but I can't seem to make the custom schema to work.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create a strapi project and add the graphql plugin.\r\n\r\n2. Create a Patient API with the command:\r\n\r\n```bash\r\nstrapi generate:api Patient\r\n```\r\n\r\n3. Create a custom schema for the Patient API:\r\n\r\n```js\r\nmodule.exports = {\r\n  definition: ``,\r\n  query: ``,\r\n  mutation: ``,\r\n  type: {},\r\n  resolver: {\r\n    Query: {\r\n      patients: {\r\n        policies: ['global.filterByOwner'],\r\n      }\r\n  }\r\n}\r\n```\r\n\r\n4. Run strapi: it won't boot due to the following error:\r\n\r\n```\r\n(node:24953) UnhandledPromiseRejectionWarning: Error: Resolver Query.patients must be object or function\r\n```\r\n\r\n5. Add a resolver to every query/mutation:\r\n\r\n```js\r\nmodule.exports = {\r\n  definition: ``,\r\n  query: ``,\r\n  mutation: ``,\r\n  type: {},\r\n  resolver: {\r\n    Query: {\r\n      patients: {\r\n        resolver: 'Patient.find',\r\n        policies: ['global.filterByOwner'],\r\n      }\r\n  }\r\n}\r\n```\r\n\r\n6. Run strapi: server boots this time\r\n\r\n7. Perform a query on GraphiQL:\r\n\r\n```graphql\r\nquery {\r\n  patients {\r\n    _id\r\n  }\r\n}\r\n```\r\n\r\nQuery breaks, even if I comment out the policy from the custom schema. Here's the error message on GraphiQL:\r\n\r\n```js\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cannot read property 'primaryKey' of undefined\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 2,\r\n          \"column\": 3\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"patients\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"TypeError: Cannot read property 'primaryKey' of undefined\",\r\n            \"    at <PROJECT_DIR>/plugins/graphql/services/Query.js:263:72\",\r\n            \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"data\": {\r\n    \"patients\": null\r\n  }\r\n}\r\n```\r\n\r\n8. Remove the custom query \"patients\", boot strapi, perform the query: everything works as expected\r\n\r\n**What is the expected behavior?**\r\n\r\nThe custom schema should have just applied my policies, even without specifying a resolver. Instead, when I create a custom schema I cannot seem to make it work properly.\r\n\r\nThe issue is different from #1887 in that I'm just trying to override default behavior, not add new one.\r\n\r\n**Suggested solutions**\r\n\r\nSorry, no clue"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I have any model with a private relationship, GraphQL plugin doesn't work.\r\nExample (note the `\"private\": true`):\r\n```\r\n    \"votes\": {\r\n      \"collection\": \"vote\",\r\n      \"via\": \"user\",\r\n      \"private\": true\r\n    }\r\n```\r\n\r\nError in the `strapi start`:\r\n\r\n```\r\n(node:5941) UnhandledPromiseRejectionWarning: TypeError: Cannot read property 'replace' of undefined\r\n    at Object.isPrimitiveType (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:21:24)\r\n    at Object.extractType (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:155:17)\r\n    at primitiveFields.getFieldsByTypes (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:401:28)\r\n    at _.reduce (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:86:28)\r\n    at /Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:914:11\r\n    at /Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:4911:15\r\n    at baseForOwn (/Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:2996:24)\r\n    at /Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:4880:18\r\n    at baseReduce (/Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:911:5)\r\n    at Function.reduce (/Users/abdonrd/my-api/plugins/graphql/node_modules/lodash/lodash.js:9683:14)\r\n    at Object.getFieldsByTypes (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:82:14)\r\n    at Object.generateConnectionFieldsTypes (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:398:34)\r\n    at Object.formatConnectionGroupBy (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:435:26)\r\n    at Object.formatModelConnectionsGQL (/Users/abdonrd/my-api/plugins/graphql/services/Aggregator.js:333:32)\r\n    at models.reduce (/Users/abdonrd/my-api/plugins/graphql/services/Resolvers.js:244:44)\r\n    at Array.reduce (<anonymous>)\r\n    at Object.shadowCRUD (/Users/abdonrd/my-api/plugins/graphql/services/Resolvers.js:41:19)\r\n    at strapi.plugins.graphql.config.shadowCRUD.Object.keys.reduce (/Users/abdonrd/my-api/plugins/graphql/services/Schema.js:150:27)\r\n    at Array.reduce (<anonymous>)\r\n    at /Users/abdonrd/my-api/plugins/graphql/services/Schema.js:144:46\r\n    at Object.generateSchema (/Users/abdonrd/my-api/plugins/graphql/services/Schema.js:164:11)\r\n    at Function.initialize (/Users/abdonrd/my-api/plugins/graphql/hooks/graphql/index.js:148:50)\r\n    at /Users/abdonrd/my-api/node_modules/strapi/lib/hooks/index.js:19:29\r\n    at after (/Users/abdonrd/my-api/node_modules/strapi/lib/hooks/index.js:122:39)\r\n    at /Users/abdonrd/my-api/node_modules/lodash/lodash.js:9999:23\r\n    at Strapi.once (/Users/abdonrd/my-api/node_modules/strapi/lib/hooks/index.js:133:17)\r\n    at Object.onceWrapper (events.js:276:13)\r\n    at Strapi.emit (events.js:188:13)\r\n(node:5941) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:5941) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2019-03-12T12:40:38.014Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-03-12T12:40:38.015Z] error (hook:graphql) takes too long to load\r\n(hook:graphql) takes too long to load\r\n```\r\n\r\nIf I just remove the `\"private\": true`, everything works."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> 10.0.0\r\n- **NPM version**: 6.0.0\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->\r\n- **Database**: Mongodb\r\n- **Operating system**: Mojave 10.14.1\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nIf a user passes this header: 'x-forwarded-host: strapi', then ctx.request.admin is set to true. Then, in the CORS implementation, if ctx.request.admin is set to true, then the origin is set to *, completely discarding the cors configuration. Therefore, anyone passing this header can send requests because the origin is set to *. Here are the relevant lines of code:\r\n\r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi/lib/middlewares/index.js (line 13 - set to true if that header is passed).\r\n\r\nhttps://github.com/strapi/strapi/blob/master/packages/strapi/lib/middlewares/cors/index.js  (line 22 - if the ctx.request.admin is true, then the origin is set to *)\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1) Enable the cors policy in the correct environment and set origin to whatever domain you want:\r\n\r\n```\r\n\"cors\": {\r\n    \"enabled\": true,\r\n    \"origin\": \"https://fun-app.com\",\r\n    \"expose\": [\r\n      \"WWW-Authenticate\",\r\n      \"Server-Authorization\"\r\n    ],\r\n    \"maxAge\": 31536000,\r\n    \"credentials\": false,\r\n    \"methods\": [\r\n      \"GET\",\r\n      \"POST\",\r\n      \"PUT\",\r\n      \"PATCH\",\r\n      \"DELETE\",\r\n      \"HEAD\"\r\n    ],\r\n    \"headers\": [\r\n      \"Content-Type\",\r\n      \"Authorization\",\r\n      \"X-Frame-Options\",\r\n      \"Origin\"\r\n    ]\r\n  }\r\n```\r\n2) Run this curl command: \r\n\r\n```\r\ncurl -isk -X OPTIONS \\\r\n-H 'x-forwarded-host: strapi' \\\r\n-H 'Access-Control-Request-Method: GET' \\\r\n-H 'Origin: https://fake.com' \\\r\nhttp://localhost:1337/content-manager/explorer/marketingtemplate/\\?source\\=content-manager\r\n```\r\n\r\n**What is the expected behavior?**\r\nThe expected behavior is that it will say https://fake.com is not a valid origin. Instead it allows the request through the app. \r\n\r\n\r\n**Suggested solutions**\r\n\r\nCheck that strapi.config.currentEnvironment.security.cors.enabled is enabled before checking the ctx.request.admin. \r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: v6.9.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nCan't update user info, if user signed in with provider because the password min length:\r\n\r\n<img width=\"939\" alt=\"Screenshot 2019-03-11 at 17 30 18\" src=\"https://user-images.githubusercontent.com/1007051/54140523-17c7eb00-4424-11e9-91f0-29434b22dbfb.png\">\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Sign in user with any provider\r\n2. Try to update any field of the user info\r\n\r\n**What is the expected behavior?**\r\n\r\nAs the password field is not required, having a minimum of characters should not stop the submit.\r\n"},{"labels":[null,null,"bug"],"text":"I am using: [strapi-docker](https://github.com/strapi/strapi-docker)\r\n\r\n**Informations**\r\n- **Node.js version**: 10.0.1\r\n- **NPM version**:  npm 6.4.1\r\n- **Strapi Version**: Strapi Docker\r\n- **Database**:  mongo\r\n- **Operating system**:  Ubuntu 18.04 Server\r\n- **Server Type:**: Nginx Proxy\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I create any text fields (with and w/o wysiwyg) the editor and edit view works as expected.\r\nBut when I request a list of items or the item itself there is nothing indicating the line breaks in the string,\r\nit is just separated by single spaces.\r\n\r\n**Steps to reproduce the problem**\r\n* Setup Strapi Docker\r\n* Make a simple text field with multiple lines\r\n* request the item via api\r\n\r\n**What is the expected behavior?**\r\nApi response includes information about linebreaks, so simple text blocks can be rendered as intended.\r\n\\n, \\r, or double spaces (markdown)\r\n\r\n\r\n**Suggested solutions**\r\nstore strings encoded in mongodb? "},{"labels":[null,null,"bug"],"text":"**Information**\r\n- **Node.js version**: v10.13.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: MySQL\r\n- **Operating system**: MacOS \r\n\r\n\r\n**What is the current behavior?**\r\n**Steps to reproduce the problem**\r\n- Create a new content type \"Event\". Create a many-to-many relation on \"User\" to \"Event\". Page refreshes and get sent to `http://localhost:1337/admin/plugins/users-permissions/auth/login`. On correct login, a flash of the dashboard and then refresh and redirected to `http://localhost:1337/admin/plugins/users-permissions/auth/login`\r\n\r\n\r\n**What is the expected behavior?**\r\nNot get logged out, or be able to login.\r\n\r\n\r\n**Suggested solutions**\r\nn/a"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.2\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: Strapi v3.0.0-alpha.24.1\r\n- **Database**: Postgresql 11\r\n- **Operating system**: Ubuntu 18.04\r\n- **Browser**: Firefox 65.0.2 (64-bit)\r\n\r\n**What is the current behavior?**\r\n(Just read Steps to reproduce below, might be easier to understand.)\r\nSuppose we have a content type \"Post\".\r\nIn \"Post\" we have an \"Images\" field with type \"Media\" that has \"Allow multiple files\" checked.\r\nIf any of the files added in \"Media\" for a Post are deleted in the \"Files Upload\" section under Plugins, then the Post will no longer be editable. When saving there will be a javascript error in the console:\r\n\r\n```\r\nuncaught at a at a \r\n at o \r\n at r \r\n at s \r\n s/<@http://thedomain.com:1337/admin/content-manager/main.js:48:528484\r\n....\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a content type \"Post\" and add a field named \"Name\".\r\n2. Add a field named \"Images\" of type \"Media\" and check \"Allow multiple files\"\r\n3. Create a new \"Post\" and upload an image file to its \"Images\" field. Add a Name and save the Post.\r\n4. On the left side under Plugins click \"Files Upload\"\r\n5. Delete the file that was uploaded in step 3 using the trash can icon.\r\n6. Go back and edit the Post created in step 3. See that it showing as if there is a file, but no image is displayed.\r\n7. Try changing the Name of the Post. Then click Save. See that nothing happens.\r\n8. Open Browser JavaScript error console and see JavaScript error.\r\n9. See that can no longer save changes to this Post.\r\n\r\n**What is the expected behavior?**\r\nI'm not sure if I'm doing anything wrong, but strapi shouldn't allow deleting the file from the \"Files Upload\" screen in this case, because the file is being used by another content entry. \r\n\r\nIdeally it should be possible to see all content entries that are referencing a file, and see files that are not referenced at all. At least through the 'Media' type fields. If can also scan for the file in WYSIWYG text fields too then would be a plus.\r\n\r\nWithout this functionality, there isn't much use to having Media type fields as they don't help with managing which content owns which files.\r\n\r\n**Suggested solutions**\r\n- The \"File Uploads\" plugin should check for references to files before allowing to delete them (or at least asking for confirmation)\r\n- Content entries whose files are missing should still allow saving without JavaScript errors.\r\n- The \"File Uploads\" plugin should allow viewing all references to each file.\r\n- In the other direction, ideally, when deleting a content entry that references uploaded files, it should offer to also delete any uploaded files that are no longer referenced by any other content entries.\r\n- Also same as above for when removing or replacing a file from a Media field\r\n\r\nI think these suggestions would greatly improve strapi in terms of \"content management\" as someone who is going to use it to manage content.\r\n\r\nEDIT: Just tried it without \"Allow multiple files\" and it also breaks the same way.\r\n\r\nEDIT: Reviewing the actual database, it looks like there is an `upload_file_morph` table that stores the references. However, upon deletion of files and content entries, this upload_file_morph still contains all the relations. It is good though that this relation data is available to implement the above suggested solutions ... and for umm manual queries / cleanup if needed."},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\nHello, I'm not sure yet, but I think there's a typo in `bookshelf/service.template`\r\n\r\n**What is the current behavior?**\r\n\r\n```js\r\nmodel.fetchAll({\r\n  width: populate\r\n  ^^^^^\r\n})\r\n```\r\nhttps://github.com/strapi/strapi/blob/f2bac2a59abfb0d05ddda3883b854718614245a7/packages/strapi-generate-api/templates/bookshelf/service.template#L239:L241\r\n\r\n**Suggested solutions**\r\n\r\n```js\r\nmodel.fetchAll({\r\n  withRelated: populate\r\n})\r\n```\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Information**\r\n- **Node.js version**: 10.15.3\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: SQLite (using default settings, unconfigured)\r\n- **Operating system**: Ubuntu 18.04.2\r\n- **(Optional) Link to your Project**: --\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- quickstart new project\r\n- define new content type\r\n- add new string field\r\n  - check *Required field*\r\n  - leave *Default value* blank\r\n- save\r\n\r\n**What is the expected behavior?**\r\n\r\nNew required field gets added.\r\n\r\n**What is the current behavior?**\r\n\r\n```\r\n(node:16263) UnhandledPromiseRejectionWarning: Error: SQLITE_ERROR: Cannot add a NOT NULL column with default value NULL\r\n    at Client_SQLite3._query (/home/tga/tmp/test1/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n    at Client_SQLite3.query (/home/tga/tmp/test1/node_modules/knex/lib/client.js:192:17)\r\n    at Runner.<anonymous> (/home/tga/tmp/test1/node_modules/knex/lib/runner.js:138:36)\r\nFrom previous event:\r\n    at /home/tga/tmp/test1/node_modules/knex/lib/runner.js:47:21\r\n    at processImmediate (timers.js:637:19)\r\n    at process.topLevelDomainCallback (domain.js:126:23)\r\nFrom previous event:\r\n    at Runner.run (/home/tga/tmp/test1/node_modules/knex/lib/runner.js:33:30)\r\n    at Raw.Target.then (/home/tga/tmp/test1/node_modules/knex/lib/interface.js:23:43)\r\n(node:16263) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:16263) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2019-03-06T12:02:16.740Z] debug ⛔️ Server wasn't able to start properly.\r\n\r\n```\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.2\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: Postgres\r\n- **Operating system**: Ubuntu 18\r\n\r\n\r\n**What is the current behavior?**\r\n`/upload/files` returns an error:\r\n`{\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"An internal server error occurred\"}`\r\nFrom the log:\r\n\r\n> TypeError: Invalid attempt to destructure non-iterable instance\r\n>     at /root/library/node_modules/babel-runtime/helpers/slicedToArray.js:48:13\r\n>     at Object.morphCandidate (/root/library/node_modules/bookshelf/lib/helpers.js:37:47)\r\n>     at /root/library/node_modules/bookshelf/lib/eager.js:115:34\r\n>     at /root/library/node_modules/lodash/lodash.js:13402:38\r\n>     at /root/library/node_modules/lodash/lodash.js:4911:15\r\n>     at baseForOwn (/root/library/node_modules/lodash/lodash.js:2996:24)\r\n>     at Function.mapValues (/root/library/node_modules/lodash/lodash.js:13401:7)\r\n>     at EagerRelation.morphToFetch (/root/library/node_modules/bookshelf/lib/eager.js:114:43)\r\n>     at EagerRelation.eagerFetch (/root/library/node_modules/bookshelf/lib/eager.js:85:21)\r\n>     at EagerRelation.<anonymous> (/root/library/node_modules/bookshelf/lib/base/eager.js:74:33)\r\n> From previous event:\r\n>     at /root/library/node_modules/bookshelf/lib/eager.js:152:75\r\n> From previous event:\r\n>     at EagerRelation._eagerLoadHelper (/root/library/node_modules/bookshelf/lib/eager.js:140:35)\r\n>     at Sync.<anonymous> (/root/library/node_modules/bookshelf/lib/eager.js:89:23)\r\n> From previous event:\r\n>     at EagerRelation.eagerFetch (/root/library/node_modules/bookshelf/lib/eager.js:88:114)\r\n>     at EagerRelation.<anonymous> (/root/library/node_modules/bookshelf/lib/base/eager.js:74:33)\r\n> From previous event:\r\n>     at Child._handleEager (/root/library/node_modules/bookshelf/lib/collection.js:459:73)\r\n>     at Child.<anonymous> (/root/library/node_modules/bookshelf/lib/collection.js:154:21)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/root/library/node_modules/bookshelf/lib/collection.js:152:6)\r\n> From previous event:\r\n>     at Child.fetchAll (/root/library/node_modules/bookshelf/lib/model.js:872:8)\r\n>     at Function.find (/root/library/plugins/upload/config/queries/bookshelf.js:29:8)\r\n>     at Object.fetchAll (/root/library/plugins/upload/services/Upload.js:137:8)\r\n>     at find (/root/library/plugins/upload/controllers/Upload.js:120:65)\r\n>     at dispatch (/usr/lib/node_modules/strapi/node_modules/koa-router/node_modules/koa-compose/index.js:44:32)\r\n>     at next (/usr/lib/node_modules/strapi/node_modules/koa-router/node_modules/koa-compose/index.js:45:18)\r\n>     at dispatch (/usr/lib/node_modules/strapi/node_modules/koa-compose/index.js:42:32)\r\n>     at policies.push (/usr/lib/node_modules/strapi/lib/middlewares/router/utils/routerChecker.js:59:26)\r\n>     at dispatch (/usr/lib/node_modules/strapi/node_modules/koa-compose/index.js:42:32)\r\n>     at module.exports (/root/library/plugins/users-permissions/config/policies/permissions.js:68:9)\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- Create content type with file field\r\n\r\n- Create entry of content type with an uploaded file\r\n\r\n- Delete file field on content type\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\n- Should not break `upload/files` when removing a file field.\r\n\r\n**Suggested solutions**\r\n\r\n- Remove files after removing file field?\r\n\r\n- Leave files in non-relational purgatory after removing file field?\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\nNode.js version: v10.15.1\r\nNPM version: 6.4.1\r\nStrapi version: 3.0.0-alpha.24.1\r\nDatabase: mysql Ver 14.14 Distrib 5.7.25, for Linux (x86_64)\r\nOperating system: Ubuntu 18.04.2 LTS\r\n\r\n**Steps to reproduce the problem**\r\ni'm doing what written in the documentation.\r\n\r\n1. Fork + cd strapi && npm run setup\r\n2. cd .. && strapi new myDevelopmentProject --dev.\r\n3. cd myDevelopmentProject && strapi start To start the strapi project\r\n4. cd /path/to/myDevelopmentProject && strapi generate:plugin my-plugin\r\n5. cd ./admin && npm run setup\r\n6. **fix test plugin errors - replace \"-\" with \"_\" in selectors; fix translations**\r\n7. npm start => error on strapi helper, we solve it in 2 ways \r\n7.1 cd myDevelopmentProject/plugins/my-plugin && npm install.\r\n7.2 cd /path/to/myDevelopmentProject && npm run setup ---plugins.\r\n**Would you recommend the above? If so which one would be the better option?** \r\n\r\n8. cd ~/strapi && npm run setup:build \r\n9. strapi new project\r\n\r\n**What is the current behavior?**\r\nno plugin in strapi packages\r\nno plugin in the new project  \r\n\r\nwe solve it by copy&&paste the plugin from the dev project \r\n**what is the correct way/approach, is there a better way to accomplish that.\r\nwhat do i miss ?** \r\n\r\n**What is the expected behavior?**\r\nmy plugin in the parent repo so i can crate new projects with my custom plugins \r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.8.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: MongoDB\r\n- **Operating system**: MacOS\r\n\r\n\r\n**What is the current behavior?**\r\nI have a query to get all users (users-permissions_user) and a custom Content-Type (e.g. categories):\r\n```\r\nquery ListCategoriesAndUsers {\r\n  categories {\r\n    _id\r\n  }\r\n  users {\r\n      _id\r\n    }\r\n  }\r\n```\r\nsometimes it returns correct:\r\n```\r\n{\r\n  \"data\": {\r\n    \"categories\": [\r\n      {\r\n        \"_id\": \"5c697c9ba801582375a3d487\"\r\n      },\r\n      {\r\n        \"_id\": \"5c697caba801582375a3d488\"\r\n      },\r\n      {\r\n        \"_id\": \"5c697cb9a801582375a3d489\"\r\n      },\r\n      {\r\n        \"_id\": \"5c697cc4a801582375a3d48a\"\r\n      }\r\n    ],\r\n    \"users\": [\r\n      {\r\n        \"_id\": \"5c695b204dded412739eaef3\"\r\n      },\r\n      {\r\n        \"_id\": \"5c7704ea2811721acd75139c\"\r\n      },\r\n      {\r\n        \"_id\": \"5c77ab6387cd83139588b1ae\"\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\nbut sometimes it returns just a duplicate of users for categories:\r\n```\r\n{\r\n  \"data\": {\r\n    \"categories\": [\r\n      {\r\n        \"_id\": \"5c695b204dded412739eaef3\"\r\n      },\r\n      {\r\n        \"_id\": \"5c7704ea2811721acd75139c\"\r\n      },\r\n      {\r\n        \"_id\": \"5c77ab6387cd83139588b1ae\"\r\n      }\r\n    ],\r\n    \"users\": [\r\n      {\r\n        \"_id\": \"5c695b204dded412739eaef3\"\r\n      },\r\n      {\r\n        \"_id\": \"5c7704ea2811721acd75139c\"\r\n      },\r\n      {\r\n        \"_id\": \"5c77ab6387cd83139588b1ae\"\r\n      }\r\n    ]\r\n  }\r\n}\r\n````\r\n\r\n\r\n**Steps to reproduce the problem**\r\n- `strapi install graphql`\r\n- Create a Custom ContentType \"Category\"\r\n- Create users and categories\r\n- Run query in GraphQL Playground\r\n\r\n\r\n**What is the expected behavior?**\r\nAlways return the correct data"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: * 3.0.0-alpha.23.1\r\n- **Database**: SQLite\r\n- **Operating system**: Linux\r\n\r\n**What is the current behavior?**\r\n\r\nWhen `modelOne` is not have relation attribute, but `modelTwo` have relation attribute with next code `{ \"collection\": \"modelOne\"` (without via) I receive next unhandled error:\r\n\r\n```\r\nUnhandledPromiseRejectionWarning: TypeError: Cannot read property 'toLowerCase' of undefined\r\n    at Function.plural (src/backend/node_modules/pluralize/pluralize.js:133:24)\r\n    at _.get._.map.table (src/backend/node_modules/strapi-hook-bookshelf/lib/index.js:857:80)\r\n```\r\n\r\nAfter fixing it I receive `SQLITE_ERROR: near \"ALTER\": syntax error`\r\n\r\nWhen I destroy all tables all works as expected\r\n\r\n**Steps to reproduce the problem**\r\n1. Create model with settings like this one:\r\n\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"\",\r\n  \"info\": {\r\n    \"name\": \"featureKey\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"key\": {\r\n      \"type\": \"string\",\r\n      \"required\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n2. Create second model with settings like this:\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"\",\r\n  \"info\": {\r\n    \"name\": \"feature\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"timestamps\": true\r\n  },\r\n  \"attributes\": {\r\n    \"key\": {\r\n      \"collection\": \"featureKey\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n3. Run strapi\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nShould display error message like \"Something wrong with `modelTwo`\""},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: * 3.0.0-alpha.23.1\r\n- **Database**: SQLite\r\n- **Operating system**: Linux\r\n\r\n**What is the current behavior?**\r\n\r\nSQLITE_ERROR: table `basket` already exists\r\nlogged in console\r\nstrapi can't start\r\n\r\n**Steps to reproduce the problem**\r\n1. Create many api when strapi is started\r\n2. Try to change one of them\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nStrapi should start\r\n\r\n**Suggested solutions**\r\nRecreate table from model settings"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.1\r\n- **NPM version**: \r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: Postgre 10\r\n- **Operating system**: MacOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI'm encountering several issues, I believe they're related to the data type JSON.\r\n\r\nAt first, I was using node 11 (forgot to change) and I was getting `this found is already taken` as toast error message when creating an entity. I switched to node 10 and encounter the following:\r\n\r\n![image](https://user-images.githubusercontent.com/3807458/53304855-95afc200-387a-11e9-9d39-00e3cc613833.png)\r\n\r\n![image](https://user-images.githubusercontent.com/3807458/53304859-9ba5a300-387a-11e9-97fd-06a0355b3d12.png)\r\n> [2019-02-24T20:23:05.938Z] error update \"campuses\" set \"formationTypes\" = $1, \"name\" = $2, \"programs\" = $3, \"state\" = $4, \"contacts\" = $5, \"label\" = $6, \"school\" = $7, \"id\" = $8, \"updated_at\" = $9 where \"id\" = $10 - invalid input syntax for type json\r\n\r\nIf I replace my array by an empty object, it saves the entity properly.\r\nI believe a better error message would be useful, especially by identifying the error field.\r\n\r\nAlso, aren't arrays valid JSON? And if they're not supported, why does the editor doesn't warn about it?\r\n\r\nI tried saving a JSON object as a property as follow, and it worked fine:\r\n\r\n```json\r\n{\r\n  \"a\": []\r\n}\r\n```\r\n\r\nBut the following didn't work:\r\n```json\r\n[{}, {}]\r\n```\r\n\r\nI guess arrays aren't allowed at top level? Is it designed behaviour or a DB limitation?\r\n\r\nMy use case with arrays was that I expect the structure to change soon in the future and want to avoid creating a whole Content Type for something that'll likely change a lot in a short future."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: SQLite\r\n- **Operating system**: Linux\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nBoolean parameters written as Integer to SQLite (email-confirmation -> confirmed: true written as confirmed: 1)\r\n\r\nSo that (as example) user can't use any routes, because system expect true in confirmed.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Enable email confirmation in admin panel\r\n2. Register account\r\n3. Confirm it via email link\r\n\r\n**What is the expected behavior?**\r\n\r\nStrapi writes boolean params as boolean,\r\nso that after confirmation user can use routes for his permission group.\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.24.1 <!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\nThe WYSIWYG editor gets stuck prompting me to select a file to upload after using drag and drop functionality with text, ie. selecting text and dragging it into the text area. The text area gets grayed out and when clicked prompts the user to upload a file. When aborted nothing changes, when the text area is clicked you get prompted again. When a file is selected the same thing happens, the file does not get uploaded. This makes it impossible to continue writing until the page has been reloaded (potentially making you lose progress).\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Select text anywhere on the web page (even selecting text within the text editor works)\r\n2. Click on the text and drag it into the text editor\r\n3. The text editor is now grayed out and you can no longer edit text.\r\n\r\n\r\n**What is the expected behavior?**\r\nDrag and drop with text should either paste in the text or do nothing at all. Should work similarly to native text inputs.\r\n\r\n\r\n**Suggested solutions**\r\nFixing the bug. If there is a temporary workaround, such as disabling the drag and drop functionality, I would appreciate it."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.9.0\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: 3.0.0-alpha.21\r\n- **Database**: MongoDB\r\n- **Operating system**: mac os\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I try to query \"me\" from graphql ui, I get the error \"Cannot read property 'associations' of undefined'\". The error :\r\n\r\n```\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cannot read property 'associations' of undefined\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 2,\r\n          \"column\": 3\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"me\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"TypeError: Cannot read property 'associations' of undefined\",\r\n            \"    at .../api/plugins/graphql/services/Query.js:270:32\",\r\n            \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"data\": {\r\n    \"me\": null\r\n  }\r\n}\r\n```\r\n**Steps to reproduce the problem**\r\n\r\nQuery \"me\" from graphql ui with this query : \r\n\r\n```\r\n{\r\n   me {\r\n      _id\r\n      username\r\n      email\r\n   }\r\n}\r\n```\r\nand the headers : \r\n\r\n```\r\n{\r\n   \"Authorization\": \"mytokenhere\"\r\n}\r\n```\r\n**What is the expected behavior?**\r\n\r\nReturning the user with selected fields :\r\n\r\n```\r\n{\r\n  \"data\": {\r\n    \"me\": {\r\n      \"_id\": \"xxxxxxx\",\r\n      \"username\": \"username\",\r\n      \"email\": \"email\"\r\n    }\r\n  }\r\n}\r\n```\r\n**Suggested solutions**\r\n\r\nDo not care about population when model is not defined :\r\n\r\n```\r\nconst _populate = model \r\n   ? model.associations.filter(a => !a.dominant && _.isEmpty(a.model)).map(a => a.alias)\r\n   : [];\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.1 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.24.1 <!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen saving a new instance of an object using the admin panel, an error will occur if one of the fields is an enum and the selected value for this field is the first one in the list. The error message I got from the UI is: \"This Question,validation,failed,type,is,not,a,valid,enum,value,for,path,type is already taken\" (the extraneous commas in the error message are a bug too).\r\n\r\n**Steps to reproduce the problem**\r\nWith the Content Type Builder, create an objet type and name it Question. \r\n\r\nAdd one field named \"type\", of type \"enumeration\", and put \"text,number,boolean,choice\" as possible values for the enum. \r\n\r\nStill with the admin UI, create one object of type Question. In field \"type\", select \"text\" (the first item). Then save.\r\n\r\nAn red rectangle will briefly appear, saying \"This Question,validation,failed,type,is,not,a,valid,enum,value,for,path,type is already taken\".\r\n\r\n**What is the expected behavior?**\r\nObject should be saved successfully.\r\n\r\n\r\n**Suggested solutions**\r\nThe problem does not occur when creating object through the api.\r\n\r\nThe problem does not occur when selecting another value other than the first one (index 0) in the enum.\r\n\r\nThe problem does not occur when updating an existing object. You can create a Question, select another type like \"number\" (the second choice), then save it, and then changing type for \"text\" (the first choice) and this time it will save successfully.\r\n\r\nThe problem occurs even if there is no other object, so the \"is already taken\" part of the error message is hard to explain.\r\n\r\nI looked for the error message in the source code and found it in packages/strapi-hook-mongoose/node_modules/mongoose/lib/schema/string.js, function SchemaString.prototype.enum. Therefore, it might happen only with MongoDB. However, I can't trace the problem further.\r\n\r\nIt might be a conversion problem of index \"0\" to empty string or null when passing parameters when creating the object, but I am wild-guessing here. "},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.15.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.24.1\r\n- **Database**: SQLite (default option)\r\n- **Operating system**: Mac OS\r\n\r\n\r\n**What is the current behavior?**\r\nAfter trying to add a field to a content type strapi crashed. Upon trying to restart it through `strapi start` the following error keeps occurring:\r\n\r\n> ```(node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_ERROR: table `tmp_releases` already exists\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Raw.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n> (node:4159) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n> (node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_READONLY: attempt to write a readonly database\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Builder.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1118:36)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1117:125)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1000:8)\r\n> From previous event:\r\n>     at storeTable (/Users/josvlaar/Projects/diffstrapi/node_modules/strapi-hook-bookshelf/lib/index.js:535:72)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_READONLY: attempt to write a readonly database\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Builder.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1118:36)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1117:125)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1000:8)\r\n> From previous event:\r\n>     at storeTable (/Users/josvlaar/Projects/diffstrapi/node_modules/strapi-hook-bookshelf/lib/index.js:535:72)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 3)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_READONLY: attempt to write a readonly database\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Builder.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1118:36)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1117:125)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1000:8)\r\n> From previous event:\r\n>     at storeTable (/Users/josvlaar/Projects/diffstrapi/node_modules/strapi-hook-bookshelf/lib/index.js:535:72)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 4)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_READONLY: attempt to write a readonly database\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Builder.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1118:36)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1117:125)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1000:8)\r\n> From previous event:\r\n>     at storeTable (/Users/josvlaar/Projects/diffstrapi/node_modules/strapi-hook-bookshelf/lib/index.js:535:72)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 5)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Error: SQLITE_READONLY: attempt to write a readonly database\r\n>     at Client_SQLite3._query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/dialects/sqlite3/index.js:108:12)\r\n>     at Client_SQLite3.query (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/client.js:192:17)\r\n>     at Runner.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:138:36)\r\n> From previous event:\r\n>     at /Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:47:21\r\n> From previous event:\r\n>     at Runner.run (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/runner.js:33:30)\r\n>     at Builder.Target.then (/Users/josvlaar/Projects/diffstrapi/node_modules/knex/lib/interface.js:23:43)\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1118:36)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1117:125)\r\n>     at runCallback (timers.js:705:18)\r\n>     at tryOnImmediate (timers.js:676:5)\r\n>     at processImmediate (timers.js:658:5)\r\n>     at process.topLevelDomainCallback (domain.js:120:23)\r\n> From previous event:\r\n>     at Child.<anonymous> (/Users/josvlaar/Projects/diffstrapi/node_modules/bookshelf/lib/model.js:1000:8)\r\n> From previous event:\r\n>     at storeTable (/Users/josvlaar/Projects/diffstrapi/node_modules/strapi-hook-bookshelf/lib/index.js:535:72)\r\n> (node:4159) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 6)\r\n> [2019-02-19T14:34:03.956Z] debug ⛔️ Server wasn't able to start properly.\r\n> [2019-02-19T14:34:03.957Z] error (hook:bookshelf) takes too long to load\r\n> (hook:bookshelf) takes too long to load```\r\n\r\n\r\n**Steps to reproduce the problem**\r\nAll other fields I added previously worked fine, I'm not sure what caused this field (it was a simple string field with no extra requirements) to crash strapi.\r\n\r\n\r\n**What is the expected behavior?**\r\nFor strapi to start\r\n\r\n\r\n**Suggested solutions**\r\nAs looking the terminal output suggests it's something to do with the strapi-hook-bookshelf, unfortunately I don't know much more than that."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: sqlite\r\n- **Operating system**: Mac OS 10.14\r\n\r\n**What is the current behavior?**\r\nWhen I create an API via the CLI, and try to create a new entry for this object via the UI, the 'new entry' form is stuck with a spinner\r\n\r\n\r\n**Steps to reproduce the problem**\r\n- Create a new api:\r\n`strapi generate:api test title:string description:text price:integer`\r\nOR\r\n`strapi generate:api -t bookshelf test title:string description:text price:integer`\r\n- Start strapi\r\n`strapi start`\r\n- Login, and in the admin panel, in the `Content Type` section, visit the 'Test' page\r\n- Click on 'New Entry'\r\n- I am stuck at a not loading page\r\n\r\n**What is the expected behavior?**\r\n- The form loads and I can create a new entry\r\n\r\n**Suggested solutions**\r\n- There may be something I should have added beforehand - let me know what I missed!\r\n- Maybe an actual bug\r\n\r\n**Notes**\r\nI have seen #154, #637 and #2101, but couldn't find the right answer\r\n\r\nThanks for your help!"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.4.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: PostgreSQL 10 or 11\r\n- **Operating system**: OSX\r\n\r\n**What is the current behavior?**\r\n![image](https://user-images.githubusercontent.com/13287948/52893937-ff362d80-31f5-11e9-8a8d-1741edbb1a03.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13287948/52893943-1117d080-31f6-11e9-9ad2-666eefdfc9b4.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13287948/52893958-3c022480-31f6-11e9-806e-91b6dd3b90e1.png)\r\n\r\n***\r\n\r\n**Steps to reproduce the problem**\r\n1. Install the latest Strapi and run:\r\n\r\n```shell\r\n$ npm i -g strapi@alpha\r\n$ strapi new strapi23\r\n...\r\n$ cd strapi23\r\n$ strapi start\r\n```\r\n\r\n2. Add content types *Article* and *ArticleSetting*\r\n![image](https://user-images.githubusercontent.com/13287948/52893984-a61ac980-31f6-11e9-994c-3674163fc488.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13287948/52894004-e0846680-31f6-11e9-8cee-58f46b8c2133.png)\r\n\r\n3. Go to *ArticleSettings* and...\r\n![image](https://user-images.githubusercontent.com/13287948/52894013-01e55280-31f7-11e9-9743-94c077403e14.png)\r\n\r\n**What is the expected behavior?**\r\nIt should be allowed to add an entry for *ArticleSettings*, even all the fields are Relation type\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.4.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: PostgreSQL 10.6 or 11.1\r\n- **Operating system**: OSX 10.11.6\r\n\r\n\r\n**What is the current behavior?**\r\n![image](https://user-images.githubusercontent.com/13287948/52893181-d27e1800-31ed-11e9-81f6-57bcccb110d9.png)\r\n\r\n```\r\nerror: function lower(timestamp with time zone) does not exist\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/13287948/52893200-022d2000-31ee-11e9-81f7-c14e6a384588.png)\r\n\r\n***\r\n\r\n## Steps to reproduce the problem\r\n\r\n1. Install the latest Strapi and run:\r\n\r\n```shell\r\n$ npm i -g strapi@alpha\r\n$ strapi new strapi23\r\n...\r\n$ strapi start\r\n```\r\n\r\n2. Add an content type **Activity**:\r\n![image](https://user-images.githubusercontent.com/13287948/52893248-88496680-31ee-11e9-83e6-a0eac879610d.png)\r\n\r\n3. Add an new activity and save:\r\n![image](https://user-images.githubusercontent.com/13287948/52893275-ca72a800-31ee-11e9-8665-dbc3b72986a7.png)\r\n\r\n4. Search and an error occurs:\r\n![image](https://user-images.githubusercontent.com/13287948/52893285-e5ddb300-31ee-11e9-9e13-083daa83e05c.png)\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.1.0<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23<!-- Please make sure you are on the latest version -->\r\n- **Database**: Mongo\r\n- **Operating system**: macOs\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nI do have a Model contact that includes an Attribute work which is a one-to-many relation and \r\nI'm not able to get all the relations in the database when querying with a limit higher than about 12. This only happens with GraphQL not with a simple get request, where the result is complete.\r\n\r\nI'm just beginning to grasp the inner workings of strapi so I'm actually not sure whether I'm on to something with the solution I found for my problem or whether this is going to break something else I didn't realise yet.\r\n\r\n**Suggested solutions?**\r\nWithin plugins/graphql/services/Loaders.js in the function makeQuery on line 123 there is a limit defined:\r\n```\r\n    const params = {\r\n      ...query.options,\r\n      populate,\r\n      query: query.options.where || {},\r\n      start: 0,\r\n      skip: 0,\r\n      limit: 100,\r\n    };\r\n\r\n    params.query[query.alias] = _.uniq(query.ids.filter(x => !_.isEmpty(x) || _.isInteger(x)).map(x => x.toString()));\r\n\r\n    if (['id', '_id'].includes(query.alias)) {\r\n      // However, we're applying a limit based on the number of entries we've to fetch.\r\n      // We'll apply the real `skip`, `start` and `limit` parameters during the mapping above.\r\n      params.limit = params.query[query.alias].length;\r\n    }\r\n```\r\nAs far as I understand there is one query used to get all the relations from all the works I'm requesting with graphql and since, in my case, all of the contacts do have many related works, the limit of 100 isn't enough to get all the works with a relation to any of the contacts.\r\n\r\nAnd I'm also not able to figure out what the line ` if (['id', '_id'].includes(query.alias))`actually does, since query.alias, at least from what I could find, is never going to be id or _id and then `params.limit = params.query[query.alias].length`basically defines that there can only be as many related works as fetched contacts in each query.\r\n\r\nBasically what fixes the problem for me right now is:\r\n```\r\n    const params = {\r\n      ...query.options,\r\n      populate,\r\n      query: query.options.where || {},\r\n      start: 0,\r\n      skip: 0,\r\n      limit: 100,\r\n    };\r\n\r\n    params.query[query.alias] = _.uniq(query.ids.filter(x => !_.isEmpty(x) || _.isInteger(x)).map(x => x.toString()));\r\n\r\n//    if (['id', '_id'].includes(query.alias)) {\r\n      // However, we're applying a limit based on the number of entries we've to fetch.\r\n      // We'll apply the real `skip`, `start` and `limit` parameters during the mapping above.\r\n      params.limit = params.query[query.alias].length*100;\r\n//    }\r\n```\r\nBut as I said, I'm not sure whether this makes any sense at all."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23<!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen we upload files, if the files are empty we received an HTTP Code 200 with a body equals to true\r\n\r\n**Steps to reproduce the problem**\r\nCall upload api with an empty files attribute\r\n\r\n\r\n**What is the expected behavior?**\r\nWe more expect to receive an error message with an http code 400\r\n\r\n\r\n**Suggested solutions**\r\nIn plugins\\upload\\controllers\\Upload.js replace the line \r\n`if (_.isEmpty(files)) {\r\n      return ctx.send(true);\r\n    }`\r\nby\r\n`if (_.isEmpty(files)) {\r\n    return ctx.badRequest(null, 'Files are empty');\r\n    }`"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**:  10.4.1\r\n- **NPM version**:  6.1.0\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: MongoDB Version 4.0.6\r\n- **Operating system**: wsl ubuntu 16.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I add media to a content type it isn't saved to the object but it's stored in the database.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n![strapi](https://user-images.githubusercontent.com/15120985/52713666-37403500-2f98-11e9-9cab-4acd70256def.gif)\r\n\r\n\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.15.1\r\n- **NPM version**: v6.7.0\r\n- **Strapi version**: alpha.23\r\n- **Database**: mongo\r\n- **Operating system**: osx & node:11.1.0-alpine for staging & production\r\n- **(Optional) Link to your Project**: N/A\r\n\r\n**What is the current behavior?**\r\nAfter creating a content type in development, committing and pushing the code and then deploying to staging and production, we cannot create new instances of that content type on staging and production. There's just a page with the menu and a spinner, indicating something is loading. On development this does work, however.\r\n\r\n**Steps to reproduce the problem**\r\nSee above.\r\n\r\n**What is the expected behavior?**\r\nThat we're able to create new instances of of newly created and deployed content types on staging and production.\r\n\r\n**Suggested solutions**\r\nAs a workaround, we now copy the `plugin_content-manager_schema` document from `core_store` in dev over to staging and production, which obviously is a hassle."},{"labels":[null,null,"bug"],"text":"**What is the current behavior?**\r\n\r\nStarting strapi with the command \"strapi start\" works but throws the following error:\r\n\r\n> { Error: Command failed: osascript resources/openChrome.applescript \"http://localhost:1337/admin\"\r\n>     at checkExecSyncError (child_process.js:601:13)\r\n>     at execSync (child_process.js:641:13)\r\n>     at startBrowserProcess (/Users/user/projects/project/node_modules/strapi/lib/utils/openBrowser.js:79:7)\r\n>     at Strapi.openBrowser (/Users/user/projects/project/node_modules/strapi/lib/utils/openBrowser.js:151:14)\r\n>     at <anonymous>\r\n>     at process._tickDomainCallback (internal/process/next_tick.js:228:7)\r\n>   error: null,\r\n>   cmd: 'osascript resources/openChrome.applescript \"http://localhost:1337/admin\"',\r\n>   file: '/bin/sh',\r\n>   args: \r\n>    [ '/bin/sh',\r\n>      '-c',\r\n>      'osascript resources/openChrome.applescript \"http://localhost:1337/admin\"' ],\r\n>   options: \r\n>    { cwd: '/Users/user/projects/project/node_modules/strapi/lib/utils',\r\n>      stdio: [ [Object], [Object], [Object] ],\r\n>      shell: true,\r\n>      file: '/bin/sh',\r\n>      args: \r\n>       [ '/bin/sh',\r\n>         '-c',\r\n>         'osascript resources/openChrome.applescript \"http://localhost:1337/admin\"' ],\r\n>      envPairs: \r\n>       [ 'NODE_ENV=development',\r\n>         '__CF_USER_TEXT_ENCODING=0x1F5:0x0:0x0',\r\n>         '_=/Users/user/.npm-global/bin/strapi',\r\n>         'LC_CTYPE=UTF-8',\r\n>         'LOGNAME=user',\r\n>         'SHLVL=1',\r\n>         'HOME=/Users/user',\r\n>         'XPC_SERVICE_NAME=0',\r\n>         'XPC_FLAGS=0x0',\r\n>         'PWD=/Users/user/projects/project',\r\n>         'PATH=/Users/user/.npm-global/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin',\r\n>         'SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.T2XNP6K4cC/Listeners',\r\n>         'USER=user',\r\n>         'TERM_SESSION_ID=E98923CE-61CE-43B9-8A8E-87C506DB9337',\r\n>         'TERM_PROGRAM_VERSION=421.1',\r\n>         'Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.Wp4Llg1ENz/Render',\r\n>         'TMPDIR=/var/folders/7v/t7z0bggn75x_wpd9t3v8m3400000gn/T/',\r\n>         'SHELL=/bin/bash',\r\n>         'TERM=xterm-256color',\r\n>         'TERM_PROGRAM=Apple_Terminal' ],\r\n>      killSignal: undefined },\r\n>   envPairs: \r\n>    [ 'NODE_ENV=development',\r\n>      '__CF_USER_TEXT_ENCODING=0x1F5:0x0:0x0',\r\n>      '_=/Users/user/.npm-global/bin/strapi',\r\n>      'LC_CTYPE=UTF-8',\r\n>      'LOGNAME=user',\r\n>      'SHLVL=1',\r\n>      'HOME=/Users/user',\r\n>      'XPC_SERVICE_NAME=0',\r\n>      'XPC_FLAGS=0x0',\r\n>      'PWD=/Users/user/projects/project',\r\n>      'PATH=/Users/user/.npm-global/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin',\r\n>      'SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.T2XNP6K4cC/Listeners',\r\n>      'USER=user',\r\n>      'TERM_SESSION_ID=E98923CE-61CE-43B9-8A8E-87C506DB9337',\r\n>      'TERM_PROGRAM_VERSION=421.1',\r\n>      'Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.Wp4Llg1ENz/Render',\r\n>      'TMPDIR=/var/folders/7v/t7z0bggn75x_wpd9t3v8m3400000gn/T/',\r\n>      'SHELL=/bin/bash',\r\n>      'TERM=xterm-256color',\r\n>      'TERM_PROGRAM=Apple_Terminal' ],\r\n>   stderr: null,\r\n>   stdout: null,\r\n>   pid: 1565,\r\n>   output: [ null, null, null ],\r\n>   signal: null,\r\n>   status: 1 }\r\n\r\n**Steps to reproduce the problem**\r\n\r\nAt one point the terminal asked me if I allow it to control Chrome and I chose No.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe error not to be thrown."},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.21\r\n- **Database**: Cosmos DB (Mongo)\r\n- **Operating system**: Mac\r\n\r\n**What is the current behavior?**\r\nA new field that recently have been added to the Content Type gets rendered multiple times when I want to add a new Content Type item (Product\r\n<img width=\"1729\" alt=\"screen shot 2019-02-12 at 11 40 33\" src=\"https://user-images.githubusercontent.com/4882345/52633420-389c2f80-2ebc-11e9-98e8-c50b08b59cc2.png\">\r\n). \r\n\r\n\r\n**Steps to reproduce the problem**\r\nAdd a new field (string) in your Content Type. Purge your plugin_content-manager_schema in core_store and restart the app. Then every time you restart it the new field will be rendered +1 times. \r\n\r\nThe new field has been added by adding the below in `api/ContentType/models/ContentType.settings.json`\r\n\r\n```\r\n\"year\": {\r\n      \"default\": \"\",\r\n      \"type\": \"string\"\r\n    }\r\n```\r\n\r\nAlso when you go to Content Manager plugin of that particular Content Type (Product) then the app crashes. \r\n\r\nPlease can someone point me to the right direction? I would like to make a PR on this. \r\n\r\nThanks!\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n### Informations\r\n- **Node.js version**: 10.15.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.22\r\n- **Database**: PostgreSQL 10\r\n- **Operating system**: Windows 10\r\n\r\n**What is the current behavior?**\r\n* Admin panel (11h slower, maybe it's displayed in UTC format):\r\n  ![image](https://user-images.githubusercontent.com/13287948/52612545-4bbff700-2ede-11e9-8c07-5e511d27e2f5.png)\r\n\r\n* Database GUI:\r\n  ![image](https://user-images.githubusercontent.com/13287948/52612551-54183200-2ede-11e9-9a92-e43fee0d0f15.png)\r\n\r\n> P.S. Here is Melbourne (AEDT, UTC+11)\r\n\r\n**Suggested solutions**\r\nAdmin panel should respect the original data, or allow to set a default timezone."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.14.2\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: SQLite\r\n- **Operating system**: MacOS\r\n- **(Optional) Link to your Project**: -\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I update a content type, I have `Error: SQLITE_ERROR: near \"ALTER\": syntax error` error\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create a content type `article`\r\n2. Add `title` attribute (string)\r\n3. Save the content type\r\n4. Visit an other page to ovoid this issue https://github.com/strapi/strapi/issues/2793\r\n5. Add `content` attribute (text)\r\n6. Save the content type\r\n\r\n**What is the expected behavior?**\r\n\r\nI should not have an error.\r\n\r\n**Suggested solutions**\r\n\r\nSource of the issue https://github.com/strapi/strapi/blob/master/packages/strapi-hook-bookshelf/lib/index.js#L625"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.14.2\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23.1\r\n- **Database**: Postgres\r\n- **Operating system**: MacOS\r\n- **(Optional) Link to your Project**: -\r\n\r\n**What is the current behavior?**\r\n\r\n`collectionName` of a content type is lost when we update the content type after created it without changing pages.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create a content type `article`\r\n2. Add `title` attribute (string)\r\n3. Save the content type\r\n> It create the `article` API with `articles` as `collectionName` in the model settings file\r\n4. Add `description` attribute (text)\r\n5. Save the content type\r\n> It update the model setting file but the `collectionName` is not send in the request so it's lost\r\n\r\n**What is the expected behavior?**\r\n\r\n`collectionName` have to persist and have to be send in the update request\r\n\r\n**Suggested solutions**\r\n\r\n@soupette will have a suggested solutions"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.23\r\n- **Database**: MySQL\r\n- **Operating system**: Mac OSX\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behaviour?**\r\n\r\nIf I enable the \"email confirmation\" for new users, I receive successfully an email with a link which includes a token. That token is actually the same JWT token that I receive on the JSON payload when I register. That means that someone could register a new user with a fake email, store the JWT token received on the JSON payload and without having to open the confirmation email, inject the token in the confirmation link and the user is confirmed.\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Register new user: POST /auth/local/register (with username, email, password);\r\n2. Copy the value of the \"jwt\" property received in the JSON payload after executing the above request;\r\n3. Open /auth/email-confirmation?confirmation=**paste jwt value here** ;\r\n4. The user is confirmed without validating the email;\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nIf there's an email confirmation, the user shouldn't be able to confirm it without actually receiving and opening an email.\r\n\r\n**Suggested solutions**\r\n\r\nAs a quick fix (not an ideal solution) we shouldn't send the jwt token when registering if email confirmation is on.\r\n\r\nIn the **register** method of the **Auth.js** Controller, we could modify a line with the following code:\r\n\r\n``` javascript\r\nctx.send({\r\n  jwt: !settings.email_confirmation ? jwt : null,\r\n  user: _.omit(user.toJSON ? user.toJSON() : user, ['password', 'resetPasswordToken'])\r\n});\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ==================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- ==================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using: -->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: v6.7.0\r\n- **Strapi version**: v3.0.0-alpha.23\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nAfter update to `v3.0.0-alpha.22` (also after update `v3.0.0-alpha.23`):\r\nWhen I click on the Save button from an existed User, it doesn't work:\r\n\r\n<img width=\"687\" alt=\"screenshot 2019-02-06 at 22 59 32\" src=\"https://user-images.githubusercontent.com/1007051/52406868-0a3ede80-2acf-11e9-9e3e-29b2d9f49856.png\">\r\n\r\n> TypeError: Cannot read property 'payload' of undefined\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a project and add this to the User model attributes:\r\n\r\n```json\r\n\"birthdate\": {\r\n  \"default\": \"\",\r\n  \"type\": \"date\"\r\n},\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nWorking :)\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: alpha.22\r\n- **Database**: tried with mysql 5.7 or SqlLite\r\n- **Operating system**: macosx mojave\r\n\r\n**What is the current behavior?**\r\n\r\nthis query will note execute, whatever the content type you have created\r\n\r\n```\r\n  module(id: \"1\") {\r\n    name\r\n  }\r\n```\r\nand this is the error:\r\n\r\n\"message\": \"Undefined binding(s) detected when compiling SELECT query: select `modules`.* from `modules` where `modules`.`id` = ? limit ?\"\r\n\r\nas a side note, maybe related, also this query doesn't work\r\n\r\n```\r\n  me {\r\n    email\r\n  }\r\n```\r\n\r\n**Steps to reproduce the problem**\r\ninstall strapi version alpha.22\r\nstrapi new project\r\ninstall graphql plugin\r\nmodule (has one attribute \"title\") \r\ncreate two records in modules \r\nlaunch this query\r\n\r\n```\r\n module(id: \"1\") {\r\n    name\r\n  }\r\n```\r\n\r\n**What is the expected behavior?**\r\nshould return the query as expected\r\n\r\n\r\n**Suggested solutions**\r\nmust investigate\r\nthe most recent version to be working in this repsect is alpha.19 (also alpha.21 and alpha.20 do not work)\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.15.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: strapi@3.0.0-alpha.21\r\n- **Database**: mongo\r\n- **Operating system**: Mac OS\r\n\r\n**What is the current behavior?**\r\nEven a string is defined in custom graphql schema, it did nothing when executing the mutation and no error reported.\r\n\r\n**Steps to reproduce the problem** \r\n1. Setup custom graphql schema in ./api/**/config/schema.graphql\r\n```\r\nresolver: {\r\n    Mutation: {\r\n      sendPromotion: {\r\n        description: 'Send promotion coupon to customer',\r\n        resolver: 'Promotion.send'\r\n      }\r\n    }\r\n  },\r\n```\r\n2. Run the graphql mutation\r\n\r\n**What is the expected behavior?**\r\nIt will executed `send` function defined in `Promotion` controller.\r\n\r\n\r\n**Suggested solutions**\r\nIt works after i modified some changes in the GraphQL plugin\r\nSchema.js:211\r\n```\r\ncase 'Mutation':\r\n              // TODO: Verify this...\r\n              acc[type][resolver] = Mutation.composeMutationResolver(\r\n                strapi.plugins.graphql.config._schema.graphql,\r\n                plugin,\r\n                acc[type][resolver],\r\n              );\r\n              break;\r\n```\r\n\r\nMutation.js\r\n```\r\nconst controller = _.get(\r\n        controllers,\r\n        action !== undefined\r\n          ? `${name}.${action === 'delete' ? 'destroy' : action}`\r\n          : _.toLower(name),\r\n      );\r\n```\r\n\r\nClearly, it is not a sophisticated fix, please advise an appropriate solution."},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **NPM version**:  6.2.0\r\n- **Strapi version**: alpha v22\r\n- **Database**:  psql\r\n- **Operating system**:  WSL/Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nPostgres is case sensitive.\r\nIn order to support the `_contains` (case insensitive) filter on APIs, we would need to make a postgres-specific change in the bookshelf hook plugin. Maybe there is also an alternative that works for both pg and mysql\r\n\r\n**Steps to reproduce the problem**\r\n\r\n* create a content type \"pet\"\r\n* add a `name` field\r\n* create a new object with name `Cat`\r\n* query for `pets/?name_contains=cat`\r\n* get no results\r\n\r\n**What is the expected behavior?**\r\n\r\nactually, you should get results.\r\n\r\n**Suggested solutions**\r\n\r\nThere are some solutions, but they are not really nice:\r\nhttps://stackoverflow.com/questions/7005302/postgresql-how-to-make-case-insensitive-query\r\n\r\n* Postgres comes with an `ILIKE` case insensitive operator but is really slow.\r\n* turn to lowercase, but make indexes meaningless: `WHERE LOWER(name)=LOWER('Administrator')`\r\n\r\nSome other article that points that out: http://mwiki.gichd.org/IM/Difference_MySQL_PostGreSQL"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**: 6.7.0\r\n- **Strapi version**: alpha.21\r\n- **Database**: mysql 5.7\r\n- **Operating system**: macosx mojave\r\n- **(Optional) Link to your Project**: https://github.com/giona69/strapi.21.graphql\r\n\r\n**What is the current behavior?**\r\n\r\nthis query will note execute:\r\nin the case of many-to-many relation (ex: modules under courses) it will respond with an empty array, in the case of a one-to-many relation (ex: language under modules) it will give an error “message”: “The operator \\“undefined\\” is not permitted”\r\nuntil version strapi.19 it was working.\r\n\r\n```\r\n{\r\n  courses {\r\n    name\r\n    modules {\r\n      id\r\n      title\r\n    }\r\n  }\r\n  languages {\r\n    idLang\r\n  }\r\n  modules {\r\n    id\r\n    title\r\n    summary\r\n    language {\r\n      idLang\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\ninstall strapi version alpha.21\r\nstrapi new project\r\ninstall graphql plugin\r\ncreate tre content types:\r\ncourse (has many modules)\r\nmodule (has one language) \r\nlanguages\r\ncreate two record in languages\r\ncreate two records in modules and associate to one language each\r\ncreate one record in course\r\nlaunch this query\r\n\r\n```\r\n{\r\n  courses {\r\n    modules {\r\n      id\r\n    }\r\n  }\r\n  languages {\r\n    id\r\n  }\r\n  modules {\r\n    id\r\n    language {\r\n      id\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\nshould return the query as expected\r\n\r\n\r\n**Suggested solutions**\r\nmust investigate\r\n"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: node 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0.alpha.21\r\n- **Database**: mysql\r\n- **Operating system**: linux\r\n\r\n**What is the current behavior?**\r\n\r\nReturns 500 error, in console not handled error Invalid token\r\n\r\n**Steps to reproduce the problem**\r\n1. Create account\r\n2. Follow to link from email\r\n3. Observe result of query\r\n\r\n**What is the expected behavior?**\r\n\r\nError should be handled\r\n"},{"labels":[null,null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: node 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.21\r\n- **Database**: mysql\r\n- **Operating system**: Linux\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nLayout very strange and error \"This value is required.\" is displayed\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create provider with\r\n`\r\nauth: {\r\n  any_field_name: {\r\n    label: 'any_description',\r\n    type: 'checkbox'\r\n  }\r\n}\r\n`\r\n2. Try to save auth config in admin panel\r\n\r\n**What is the expected behavior?**\r\n\r\nForm should be saved."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> v10.15.0\r\n- **NPM version**: v6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> v3.0.0-alpha.21\r\n- **Database**: MongoDB v4.0.5\r\n- **Operating system**: Windows 10 Pro or Ubuntu 18.04 or Manjaro 18.0\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link --> https://github.com/gilhardl/strapi-delete-error\r\n\r\n\r\n**What is the current behavior?**\r\nRemoving an entry of the dominant model of a many-to-many relation will right remove the entry and update associated models but will return a Mongo error : \r\n```\r\n{ MongoError: '$pull' is empty. You must specify a field like so: {$pull: {<field>: ...}}\r\n    at Function.create (C:\\Users\\LG\\Work\\LG\\strapi-delete-error\\node_modules\\mongodb-core\\lib\\error.js:43:12)\r\n    at toError (C:\\Users\\LG\\Work\\LG\\strapi-delete-error\\node_modules\\mongodb\\lib\\utils.js:149:22)\r\n    at coll.s.topology.update (C:\\Users\\LG\\Work\\LG\\strapi-delete-error\\node_modules\\mongodb\\lib\\operations\\collection_ops.js:1399:39)\r\n    at C:\\Users\\LG\\Work\\LG\\strapi-delete-error\\node_modules\\mongodb-core\\lib\\connection\\pool.js:532:18\r\n    at process._tickCallback (internal/process/next_tick.js:61:11)\r\n  driver: true,\r\n  name: 'MongoError',\r\n  index: 0,\r\n  code: 9,\r\n  errmsg:\r\n   '\\'$pull\\' is empty. You must specify a field like so: {$pull: {<field>: ...}}',\r\n  [Symbol(mongoErrorContextSymbol)]: {} }\r\n```\r\n\r\nBut, this works well when I try to remove the same model from Strapi Admin panel...\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1.  clone my example repo : https://github.com/gilhardl/strapi-delete-error\r\n2. install dependencies and start the app\r\n3. create the first admin user\r\n4. go to \"Roles & Permission\" > \"Public\" and allow all actions for Teams and Supporters\r\n5. create a Team using the Content Manager plugin\r\n6. remove created team using a tool like Postman\r\n\r\n\r\n**What is the expected behavior?**\r\nDon't return an error\r\n"},{"labels":[null,null,"bug"],"text":"**Information**\r\n\r\n- **Node.js version**: v10.11.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.21\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS 10.14.1\r\n\r\n**What is the current behavior?**\r\n\r\nTurning off \"editable field\" for a JSON field in the Content Manager (to _disable_ editing the field) has no effect; the field is still editable and saving the document commits any changes to it as though it were still enabled.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a content type with the Content Type Builder, give it a JSON field. Modify that content type in the Content Manager and edit the options for the JSON field, setting the 'editable field' option to 'OFF'. Create a new document using this content type or edit an existing one; the JSON field will still be completely editable and saveable.\r\n\r\n**What is the expected behavior?**\r\n\r\nDisabling field edits should have the same effect on JSON fields as any other.\r\n\r\n**Suggested solutions**\r\n\r\nMost fields seem to just use `disabled=\"\"` to turn off editing, but I realize that isn't exactly an option since the JSON field uses a code editor. My recommendation is to use [CodeMirror's `readOnly` option](https://codemirror.net/doc/manual.html#option_readOnly) since the text should still be rendered in CodeMirror as normal."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.6\r\n- **NPM version**: v6.5\r\n- **Strapi version**: Alpha 21 (confirmed too in Alpha 14.1.1 and Alpha 18)\r\n- **Database**: MongoDB 3.6.3\r\n- **Operating system**: Amazon Linux AMI release 2017.09\r\n\r\n**What is the current behavior?**\r\nIf you create a Many to Many relation with the Content-Type builder between the Users-Permissions plugin it fails because the relation it creates isn't bidireccional\r\n\r\n**Steps to reproduce the problem**\r\nIf you create a relation like this one...\r\n![image](https://user-images.githubusercontent.com/37783365/51904236-711d1300-23be-11e9-8fbc-9feeba6bf08f.png)\r\n\r\n...you get this...\r\n```\r\n[2019-01-29T10:51:53.934Z] error Something went wrong in the model `User` with the attribute `followed`\r\n[2019-01-29T10:51:53.937Z] error The attribute `followedBy` is missing in the model User (plugin - users-permissions)\r\n```\r\n\r\n... because it only writes this in User.settings.json\r\n```\r\n    \"followers\": {\r\n      \"collection\": \"user\",\r\n      \"via\": \"followedBy\",\r\n      \"dominant\": true,\r\n      \"plugin\": \"users-permissions\"\r\n    }\r\n```\r\n\r\n**What is the expected behavior?**\r\nIt should create a bidirectional relation in between the same plugin, like this\r\n```\r\n    \"followers\": {\r\n      \"collection\": \"user\",\r\n      \"via\": \"followedBy\",\r\n      \"dominant\": true,\r\n      \"plugin\": \"users-permissions\"\r\n    },\r\n    \"followedBy\": {\r\n      \"collection\": \"user\",\r\n      \"via\": \"followers\",\r\n      \"plugin\": \"users-permissions\"\r\n    }\r\n```\r\n\r\nIn fact, if you edit User.settings.json manually it work as expected.\r\n\r\nThis issue seems related to #2499 but not completely, I have problems with the model but not with the database, and a manual edit of the model fix the problem.\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **NPM version**: 6.6.0\r\n- **Strapi version**: 3.0.0-alpha.21\r\n- **Database**: Mongo DB 4.0.4\r\n- **Operating system**: Linux (Ubuntu)\r\n- **(Optional) Link to your Project**: -\r\n\r\n\r\n**What is the current behavior?**\r\nRequired fields do not have sum/avg/min/max added to the generated aggregator types in the GraphQL plugin.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Setup Strapi with the GraphQL plugin enabled\r\n2. Add a content type with a number field that is required.\r\n3. Go to localhost:1337/graphql and open the (green) schema button\r\n4. Navigate to the aggregator for the content type we just created and it has only the count attribute \r\n\r\n\r\n**What is the expected behavior?**\r\nEvery numeric type (required or not) should be part of the aggregate.\r\n\r\n\r\n**Suggested solutions**\r\nAs a workaround, I disabled the field from being required. Actual solution would be in plugins/graphql/services/Aggregator.js:454, where the numeric fields are extracted, the main error is caused by the function isNumericType on line 60. If the field is required, the type would be Int! or Float!, which will fail the isNumberType check. The code below would fix this.\r\n```js\r\n  isNumberType: type => {\r\n    if (type.endsWith('!')) {\r\n      type = type.slice(0, -1);\r\n    }\r\n\r\n    return type === 'Int' || type === 'Float';\r\n  },\r\n```\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> v10.15.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> 3.0.0-alpha.18\r\n- **Database**: mongodb\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen an error occurs while trying to send an email, the API responds with a bad request bearing an object as the error message:\r\n\r\n{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":[{\"messages\":[{\"id\":\"Auth.form.error.email.invalid\"}]}]} \r\n\r\n**Steps to reproduce the problem**\r\nCreate a user with email: \"abc+1@gmail.com\".\r\n\r\nCall /auth/forgot-password with that email as a parameter.\r\n\r\n\r\n**What is the expected behavior?**\r\n\"Message\" in response should have the same format as everywhere else in the plugin module and Strapi generated controllers, that is: contain only a string, not an object. For example:\r\n{\"statusCode\":400,\"error\":\"Bad Request\",\"message\":\"This email is invalid.\"}  \r\n\r\n\r\n**Suggested solutions**\r\nIn plugins/users-permissions/controllers/Auth.js, function forgotPassword and function register, in the following block of code:\r\n\r\n    try {\r\n      // Send an email to the user.\r\n      await strapi.plugins['email'].services.email.send({\r\n        to: user.email,\r\n        from: (settings.from.email || settings.from.name) ? `\"${settings.from.name}\" <${settings.from.email}>` : undefined,\r\n        replyTo: settings.response_email,\r\n        subject: settings.object,\r\n        text: settings.message,\r\n        html: settings.message\r\n      });\r\n    } catch (err) {\r\n      return ctx.badRequest(null, err);\r\n    }\r\n\r\nReplace last line with:\r\n`return ctx.badRequest(null, err.message);`\r\n\r\nThe replacement I suggest is based on the last line of function register:\r\n`ctx.badRequest(null, ctx.request.admin ? [{ messages: [{ id: adminError }] }] : err.message);`\r\n\r\n\r\n\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.6.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: alpha 20\r\n- **Database**: mysql\r\n- **Operating system**: macOS 10.14.2\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen searching on a boolean value using graphql I get incorrect results.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nGiven this query:\r\n```\r\nquery{\r\n  projects(where: {completed: true}){\r\n    name\r\n    completed\r\n    is_published\r\n  }\r\n}\r\n```\r\nI see results where `completed = false`.\r\n\r\n\r\n**What is the expected behavior?**\r\nI expect to only see results where `completed = true`.\r\n\r\n\r\n**Suggested solutions**\r\nThe problem seems to lie in the following code. It's only expecting boolean types which have been set by a string value of `true` or `false`. But when using graphql since it's strongly typed, it's actually passing in boolean `true` or `false` values.\r\n\r\nhttps://github.com/strapi/strapi/blob/86d6ba62ac17973db48588781b58b611212cda4e/packages/strapi-utils/lib/models.js#L486-L490\r\n\r\nPossible something like this might work?\r\n```js\r\nconst suffix = key.split('_');\r\n// Mysql stores boolean as 1 or 0\r\nif(typeof value === 'string'){\r\n  formattedValue = value === 'true' ? '1' : '0';\r\n} else {\r\n  formattedValue = value;\r\n}\t\r\n```\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10\r\n- **NPM version**: 6\r\n- **Strapi version**: v19\r\n- **Database**: MariaDB 10.3 (MySQL)\r\n- **Operating system**: Ubuntu 18.04\r\n- **(Optional) Link to your Project**: https://github.com/canonn-science/CAPIv2-Strapi\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nError while updating via console: \r\n```\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ 1, 1 ],\r\n  __knexQueryUid: '5c1267fd-cb9d-45a7-9120-165b040fa5e7',\r\n  sql:\r\n   'select `users-permissions_user`.* from `users-permissions_user` where `users-permissions_user`.`id` = ? limit ?' }\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ 1 ],\r\n  __knexQueryUid: 'c6170a9e-e68f-4cbc-b524-d82c8b739216',\r\n  sql:\r\n   'select `users-permissions_role`.* from `users-permissions_role` where `users-permissions_role`.`id` in (?)' }\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ '1', 1 ],\r\n  __knexQueryUid: '91555762-4f63-4c76-a838-95a14c9b16e5',\r\n  sql:\r\n   'select `excludeclients`.* from `excludeclients` where `excludeclients`.`id` = ? limit ?' }\r\n{ method: 'update',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings:\r\n   [ 1,\r\n     'testclient',\r\n     'Testing 2',\r\n     '2019-01-21T06:42:15.000Z',\r\n     '2019-01-21T06:42:15.000Z',\r\n     1 ],\r\n  __knexQueryUid: 'de9e98ab-192c-4d3f-8571-78c0bca8c830',\r\n  sql:\r\n   'update `excludeclients` set `id` = ?, `version` = ?, `reason` = ?, `created_at` = ?, `updated_at` = ? where `id` = ?' }\r\n[2019-01-21T06:42:21.161Z] error update `excludeclients` set `id` = 1, `version` = 'testclient', `reason` = 'Testing 2', `created_at` = '2019-01-21T06:42:15.000Z', `updated_at` = '2019-01-21T06:42:15.000Z' where `id` = 1 - ER_TRUNCATED_WRONG_VALUE: Incorrect datetime value: '2019-01-21T06:42:15.000Z' for column `capiv2_example`.`excludeclients`.`created_at` at row 1\r\n```\r\n\r\nIt appears you can create new entry it works fine, however attempting to update the time format is wrong. @soupette just a heads up with MySQL the update format has to be `YYYY-MM-DD HH:MM:SS` in the raw queries. \r\n\r\n**Steps to reproduce the problem**\r\n\r\nSpin up a v19 app, create a model, add an entry, then try and update it.\r\n\r\n**What is the expected behavior?**\r\n\r\nUpdates should work :stuck_out_tongue: \r\n\r\n**Suggested solutions**\r\n\r\nTo be honest I seriously think the dates should not be formatted via whatever is being used (moment.js ?) Even the API responds with a different date format than what it actually accepts:\r\n\r\n![image](https://user-images.githubusercontent.com/8593673/51457550-09582f80-1d0f-11e9-8e64-287c2a4f576b.png)\r\n\r\nNotice in that screenshot I am sending `\"updated_at\": \"2019-01-21 06:53:15\"` which is the only way to get put requests work. Whatever format that is being used that generates `\"updated_at\": \"2019-01-21T06:42:15.000Z\"` this format should be removed in my opinion"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0 alpha 18\r\n- **Database**: Postrges\r\n- **Operating system**: Linux/Mac\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nThis is related to issue #2631 and PR #2632 \r\n\r\nThe content-manager routes us the parameter name id in updates to plugin data. \r\nThe user-permissions routes to update a user record uses _id as the route parameter. \r\n\r\nThe update function in the Users controller receives a different parameter depending on whether the update is made in the admin portal or from an API.\r\n\r\nIn the user update function it performs a check to make sure that the email address is not already in the database\r\n\r\n\r\n**Steps to reproduce the problem**\r\nUpdate a user record using the Admin portal.\r\n\r\nTry updating the same user record, but this time using an API call\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nThe user record should be updated in the same way in the Admin portal and via an API call.\r\n\r\n**Suggested solutions**\r\n\r\nI have submitted a PR that fixes this issue"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<img width=\"1380\" alt=\"screen shot 2019-01-14 at 8 47 49 pm\" src=\"https://user-images.githubusercontent.com/11130449/51157843-f3de9380-183e-11e9-8875-5f5e10b18683.png\">\r\n\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.18\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu 16.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen sorting your uploaded files by the Size, it is sorting by numerical value, rather than actual file size.\r\n\r\ni.e. When sorting by ascending order,  a filesize of 80kb will be sorted higher than a file of 4mb (see screenshot)\r\n\r\n\r\n**Steps to reproduce the problem**\r\nUpload multiple file sizes such as 4mb --> 80kb --> 150 kb. The sort order would be 150kb --> 4mb --> 80kb\r\n\r\n\r\n**What is the expected behavior?**\r\nShould sort by the actual file size, so the largest file is at the end of the list.\r\n\r\n\r\n**Suggested solutions**\r\nYou could sort by the value rather than the size. \r\n`\r\nconst { divider, unit } = this.getUnit(item[value]);\r\n                const size = item[value]/divider;\r\n`\r\npass the value along with the size, display the size but sort by value."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.18\r\n- **Database**: PostgreSQL\r\n- **Operating system**: MacOS High Sierra 10.13.6\r\n\r\n\r\n**What is the current behavior?**\r\nWhen adding new items to a relation, the select component (UI) presents duplicates. This happens if I click the select dropdown twice (the first time says there are no more items, but the second time it shows an already selected item). This is a many-to-many relation.\r\nI recorded the problem:\r\n[relations_bug.zip](https://github.com/strapi/strapi/files/2753293/relations_bug.zip)\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create a simple model with no relations\r\n2. Create a second model with many-to-many relations with the previous model\r\n3. Create a record of the first type of model\r\n4. Create a record of the second type of model and add the previous record as a relation (don't save yet)\r\n5. Click the select dropdown once: it says \"No results found\" as it should.\r\n6. Click the select dropdown again: it shows the first record erroneously.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe second click should say \"No results found\"\r\n\r\n\r\n**Suggested solutions**\r\nI've not looked into the code yet, because I'm still testing Strapi in a spike to assert if it is the best option for a project of a client of mine. So far, nice job guys 👍 🚀 \r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) -->\r\nv10.11.0\r\n- **NPM version**: \r\n6.5.0\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->\r\n3.0.0-alpha.18\r\n- **Database**: \r\npostgres\r\n- **Operating system**: \r\nMac OS Mojave\r\n\r\n**What is the current behavior?**\r\nWhen adding a required field to a content type where records already exist there is an error thrown because the existing records are not getting the default value set on save.\r\n\r\n```\r\n(node:28797) UnhandledPromiseRejectionWarning: error: column \"testing\" contains null values\r\n    at Connection.parseE (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/pg/lib/connection.js:555:11)\r\n    at Connection.parseMessage (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/pg/lib/connection.js:380:19)\r\n    at Socket.<anonymous> (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/pg/lib/connection.js:120:22)\r\n    at Socket.emit (events.js:182:13)\r\n    at Socket.EventEmitter.emit (domain.js:442:20)\r\n    at addChunk (_stream_readable.js:283:12)\r\n    at readableAddChunk (_stream_readable.js:264:11)\r\n    at Socket.Readable.push (_stream_readable.js:219:10)\r\n    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:94:17)\r\nFrom previous event:\r\n    at Client_PG._query (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/dialects/postgres/index.js:240:12)\r\n    at Client_PG.query (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/client.js:192:17)\r\n    at Runner.<anonymous> (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/runner.js:138:36)\r\nFrom previous event:\r\n    at /Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/runner.js:47:21\r\n    at runCallback (timers.js:694:18)\r\n    at tryOnImmediate (timers.js:665:5)\r\n    at processImmediate (timers.js:647:5)\r\n    at process.topLevelDomainCallback (domain.js:121:23)\r\nFrom previous event:\r\n    at Runner.run (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/runner.js:33:30)\r\n    at Raw.Target.then (/Users/Trent/Projects/airship/babypalooza/babypalooza-api/node_modules/knex/lib/interface.js:23:43)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n(node:28797) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:28797) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2019-01-13T13:39:00.011Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-01-13T13:39:00.012Z] error (hook:bookshelf) takes too long to load\r\n(hook:bookshelf) takes too long to load\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Click 'Content Type Builder' in main navigation under Plugins.\r\n2. Click on the 'User' row in the table.\r\n3. Click Add New Field\r\n4. Select the Number field type and under Advanced Settings, choose Required field and set the default to 0.\r\n5. Click Continue\r\n6. Click Save in the top right. \r\n\r\nWhen the serve tries a restart, you will receive the error.\r\n\r\n**What is the expected behavior?**\r\nI would expect that the default value is required if you choose the Required field setting and I would also expect all existing records to be updated to that default value.\r\n\r\n\r\n**Suggested solutions**\r\nI am still learning this code base so I do not yet have a solution in mind. I am trying to determine if this is a knex/bookshelf issue or a Strapi issue.\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: v3.0.0-alpha.18\r\n- **Database**:  MongoDB 3.6.9\r\n- **Operating system**:  Debian 9\r\n\r\n**What is the current behavior?**\r\nIssuing delete requests causes 500 internal error. but the entry gets deleted anyway. in a non-custom install. only some content types added\r\n\r\nThe delete request: /products/5c3a52af383fe663810f0abc\r\n\r\n```\r\n(node:613) DeprecationWarning: collection.findAndModify is deprecated. Use findOneAndUpdate, findOneAndReplace or findOneAndDelete instead.\r\n{ ObjectParameterError: Parameter \"obj\" to Document() must be an object, got 5c3a995fc4859602655bfe33\r\n    at new ObjectParameterError\r\n```\r\n\r\n**Steps to reproduce the problem**\r\nsetup insomina. create content type. issue delete request\r\n\r\n**What is the expected behavior?**\r\nNo internal error\r\n\r\n**Suggested solutions**\r\nNo idea atm."},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: MySQL 5.7.23\r\n- **Operating system**: Windows 10 (dev) / Ubuntu 16.04 (prod)\r\n\r\n\r\n**What is the current behavior?**\r\nUsing a \"where\" filter on a subset of a query does not get interpreted correctly and ultimately results in a broken SQL query (can't provide info on what happens with MongoDB, might be affected as well). Using \"where\" on the root set is fine, the issue seems to occur only when the \"where\" prop gets merged with a generated \"where\" condition that limits the selection to the id of a parent data record.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a strapi project with the graphql plugin installed\r\n2. Create two content types, type A and type B, where type A has a one-to-many relation to type B\r\n3. Create at least two entries for type A and at least four for type B, link the first half of the type B entries to entry 1 of type A and the other half to entry 2 of type A.\r\n4. Open your playground and write a query that fetches all records of type A containing its sub-records of type B, but limit both the main set and its subset to those records where \"id\" is greater than 1.\r\nExample:\r\n```\r\nquery {\r\n  categories(sort: \"name:asc\", where: { id_gt: 1 }) {\r\n    id\r\n    name\r\n    entries(where: { id_gt: 1 }) {\r\n      id\r\n      name\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n5. Execute and observe the output. You will be informed that there is an error in the SQL syntax, because the generated query is broken. For the example code used above, the broken query listed in the error message will look like this:\r\n``\"select `entries`.* from `entries` where `category` = 1 and `id` = {\\\"symbol\\\":\\\">\\\",\\\"value\\\":1} limit 100``\r\nThe data will contain a list of \"Category\" records, but the \"entries\" property of each will have a value of null (not even an empty array, which would be the expected result for a collection type).\r\n\r\n**What is the expected behavior?**\r\nFollowing the code example above, there should be no error messages in the returned data set and it should contain a list of \"Category\" records (containing only one record unless more than two were created), each of which containing an array of \"Entry\" records (again, should also contain one record, unless more than two were linked to the parent \"Category\" record). Internally, the generated SQL query string for the \"entries\" subset for the first record of \"categories\" should look like this:\r\n``\"select `entries`.* from `entries` where `category` = 1 and `id` > 1 limit 100``\r\n\r\n\r\n**Suggested solutions**\r\nThe root of the problem seems to be the merge operation of the implicit \"where\" condition that limits the sub-records to those belonging to the current parent in the loop and the explicitly defined one in the query. For some reason it seems to expect the second argument to be a number or string but of course the parser correctly recognized this as a custom condition and provides an object containing information about the type of comparison and the value to be compared. That object will therefore be simply put through a toString conversion and thus breaks the query. \r\nIt seems pretty obvious, that instead of queueing up chains of what will likely look like this:\r\n`field_name + ' = ' + data`\r\nthe operation to perform should be something along the lines of this instead:\r\n``(typeof data === 'Object' ? `${field_name} ${data.symbol} ${data.value}` : `${field_name} = ${data}`)``\r\nThis is of course all hypothetical pseudo code and surely incomplete because it doesn't even account for more complex \"where\" clauses that would generate a join (to filter for example for all entries of which the name starts with the letter A), those fail as well and generate a bunch of \"mixed.hasOwnProperty is not a function\" error messages. \r\nI have no idea where the actual responsible piece of code might be located, I've been searching for it, but sadly to no avail."},{"labels":[null,null,"bug"],"text":"--specs--\r\nnode v10.6.0\r\nstrapi\": \"3.0.0-alpha.18\r\nstrapi-plugin-graphql@3.0.0-alpha.17\r\nnpm: npm: '6.1.0',\r\ndb: mongodb\r\nos: mac osx El capitan 10.11.6\r\n--/specs--\r\n\r\n**what**\r\nHello, i'm having a graphql error on a simple query to number fields (decimals)\r\nThe field is not required, so I suppose I could leave it blank. i can save it within the admin without errors. But in the frontend I get an error.\r\n\r\nThe apollo error\r\n```\r\nError: \"GraphQL error: Cast to Number failed for value \"{ message: 'Cast to Number failed for value \"\" at path \"dadsweight\"',\r\n  name: 'CastError',\r\n  stringValue: '\"\"',\r\n  kind: 'Number',\r\n  value: '',\r\n  path: 'dadsweight',\r\n  reason: null }\" at path \"dadsweight\"\r\nGraphQL error: Cast to Number failed for value \"{ message: 'Cast to Number failed for value \"\" at path \"momsweight\"',\r\n  name: 'CastError',\r\n  stringValue: '\"\"',\r\n  kind: 'Number',\r\n  value: '',\r\n  path: 'momsweight',\r\n  reason: null }\" at path \"momsweight\"\r\nGraphQL error: Cast to Number failed for value \"{ message: 'Cast to Number failed for value \"\" at path \"price\"',\r\n  name: 'CastError',\r\n  stringValue: '\"\"',\r\n  kind: 'Number',\r\n  value: '',\r\n  path: 'price',\r\n  reason: null }\" at path \"price\"\"\r\n\tApolloError http://localhost:3000/_nuxt/vendors.app.js:3979:21\r\n\tqueryListenerForObserver http://localhost:3000/_nuxt/vendors.app.js:2994:41\r\n```\r\n\r\n**steps**\r\nField in contenttype with a number: decimal\r\n![schermafbeelding 2019-01-07 om 08 43 06](https://user-images.githubusercontent.com/23075300/50755830-850ba400-125a-11e9-8d71-0aaf515847e7.png)\r\n\r\nthe query\r\n```\r\n//get the puppies by a slug\r\nexport const GET_PUPPY = gql`\r\nquery findPuppy($id: ID!) {\r\n  puppy(id: $id) {\r\n    _id\r\n    name\r\n    gender,\r\n    birthdate,\r\n    colors,\r\n    pattern,\r\n    registry,\r\n    dadsweight,\r\n    momsweight,\r\n    price\r\n    breed{\r\n      _id\r\n      name\r\n    }\r\n    images{\r\n      url\r\n    }\r\n    kennels {\r\n      _id\r\n    }\r\n  }\r\n}`;\r\n```\r\nIf i fill in all the fields there is no error\r\n\r\n```\r\n {\r\n  \"_id\": \"5c330764f6971f04016e5b68\",\r\n  \"name\": \"test 3\",\r\n  \"gender\": \"female\",\r\n  \"birthdate\": null,\r\n  \"colors\": {},\r\n  \"pattern\": \"harlequin\",\r\n  \"registry\": \"11\",\r\n  \"dadsweight\": 11,\r\n  \"momsweight\": 11,\r\n  \"price\": 11,\r\n  \"breed\": null,\r\n  \"images\": [],\r\n  \"kennels\": null,\r\n  \"__typename\": \"Puppies\"\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.15.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha-17\r\n- **Database**: mongoDB\r\n- **Operating system**: MacOS 10.14.2\r\n\r\n**What is the current behavior?**\r\n\r\nI have seen the document [here](https://strapi.io/documentation/3.x.x/guides/graphql.html#execute-a-policy-before-a-resolver) and want to apply custom policy to createPost\r\n\r\n**Steps to reproduce the problem**\r\n```\r\n// file: api/post/configs/schema.graphql\r\n\r\nmodule.exports = {\r\n  resolver: {\r\n    Mutation: {\r\n      createPost: {\r\n        description: 'Create a new post',\r\n        policy: ['global.isPageOwner'], // <---- apply custom policy\r\n      },\r\n    },\r\n  },\r\n};\r\n```\r\n\r\n```\r\n// file: config/policies/isPageOwner.js\r\n// this file only test this issue - with default content by generate\r\n\r\nmodule.exports = async (ctx, next) => {\r\n  if (ctx.state.user) {\r\n    // Go to next policy or will reach the controller's action.\r\n    return await next();\r\n  }\r\n\r\n  ctx.unauthorized(`You're not logged in!`);\r\n};\r\n```\r\n\r\nTHEN: run command `strapi start`\r\n\r\n```\r\nstrapi start\r\n\r\n(node:4145) DeprecationWarning: collection.ensureIndex is deprecated. Use createIndexes instead.\r\n(node:4145) UnhandledPromiseRejectionWarning: Error: Resolver Mutation.createContent must be object or function\r\n(node:4145) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:4145) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2019-01-03T03:14:47.732Z] debug ⛔️ Server wasn't able to start properly.\r\n[2019-01-03T03:14:47.733Z] error (hook:graphql) takes too long to load\r\n(hook:graphql) takes too long to load\r\n```\r\n\r\n**What is the expected behavior?**\r\nGraphQL Plugin can't load\r\n`error (hook:graphql) takes too long to load`"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.0.0 <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.5.0\r\n\r\n- **Strapi version**:3.0.0-alpha.17 <!-- Please make sure you are on the latest version -->\r\n- **Database**: \r\n- **Operating system**: MacOS Mojave\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nI'm unable to upload upload a file using apollo and unsure what the issue is.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nUsing\r\n - [apollo-client-upload](https://github.com/jaydenseric/apollo-upload-client)\r\n - [cloudinary provider](https://www.npmjs.com/package/strapi-upload-cloudinary)\r\n\r\nAnd following the [upload example](https://github.com/strapi/strapi-examples/blob/f20733121ec960136ae9487e1ceee092cccbb79d/apollo-upload-graphql/app/components/upload-file.js)\r\n\r\nApollo-Link Config\r\n\r\n```\r\nconst uploadLink = createUploadLink({\r\n  uri: GRAPHQL_URI,\r\n})\r\n```\r\nMutation query\r\n```\r\nUPLOAD_FILE = gql`\r\n  mutation UploadFile($file: Upload!, $ref: String!, $refId: String, $field: String) {\r\n    upload(file: $file, ref: $ref, refId: $refId, field: $field) {\r\n      _id\r\n      name\r\n      mime\r\n      url\r\n      __typename\r\n    }\r\n  }\r\n`\r\n```\r\nApollo Mutation component\r\n```\r\n<Mutation\r\n  mutation={UPLOAD_FILE}>\r\n  {(uploadFile, res) => {\r\n    console.log(res)\r\n    return (\r\n      <Fragment>\r\n        <Avatar src={community.image ? community.image.url : '/static/logo.png'} width={105} height={105} />\r\n        <IconButton name=\"edit\" size={16} color=\"white\" fill=\"white\" />\r\n        <FileInput\r\n          type=\"file\"\r\n          name=\"file\"\r\n          onChange={({ target: { validity, files: [file] }}) => {\r\n            console.log(file)\r\n            validity.valid && uploadFile({ \r\n              variables: { file, ref: `UploadFile`, refId: id, field: 'image' }\r\n            })\r\n          }}/>\r\n      </Fragment>\r\n  )}}\r\n</Mutation>\r\n```\r\n\r\n<img width=\"1310\" alt=\"screen shot 2018-12-28 at 17 48 35\" src=\"https://user-images.githubusercontent.com/3650761/50530422-41cb6b80-0acb-11e9-9b1e-09ed2bfd5403.png\">\r\n\r\n<img width=\"783\" alt=\"screen shot 2018-12-28 at 18 05 52\" src=\"https://user-images.githubusercontent.com/3650761/50530427-47c14c80-0acb-11e9-8afb-93f16e2eca24.png\">\r\n\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.5.0\r\n- **NPM version**: 6.4.0\r\n- **Strapi version**: 3.0.0-alpha.17\r\n- **Database**: MongoDB 3.6.4\r\n- **Operating system**: Ubuntu\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I create a role, permission won't get loaded (http://localhost:1337/users-permissions/permissions - returns 404).  The default roles are loading the permissions correctly.\r\n\r\n**Steps to reproduce the problem**\r\nJust create a new app from scratch and add a role. \r\n\r\n\r\n**What is the expected behavior?**\r\nthat the permissions get shown up. \r\n\r\n\r\n**Suggested solutions**\r\nIf not a bug maybe add correct way to documentation. "},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.17\r\n- **Database**: Mongo\r\n- **Operating system**:  OSX Mojave\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nInfinite loading when clearing the name field of a role in the users-permissions plugin\r\n\r\n\r\n**Steps to reproduce the problem**\r\n- Click on the Role & Permissions link\r\n- Click on the Public role\r\n- Clear the name field\r\n\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\n- The loader shouldn't appear\r\n\r\n**Suggested solutions**\r\n\r\nChange these lines https://github.com/strapi/strapi/blob/e4dc27be54f36a956a06d35cab5f1ae11f2b9836/packages/strapi-plugin-users-permissions/admin/src/containers/EditPage/index.js#L110-L114\r\n\r\nBy:\r\n\r\n```\r\n  showLoaderForm = () => {\r\n    const { editPage: { modifiedData }, match: { params: { actionType } } } = this.props;\r\n\r\n    return actionType !== 'create' && isEmpty(modifiedData);\r\n  }\r\n```"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: v10.14.2\r\n- **Strapi version**: 3.0.0-alpha.17\r\n- **Database**: MySQL\r\n- **Operating system**: Mac\r\n\r\n**What is the current behavior?**\r\nI'm trying the login-react example and configured login with Facebook. (BTW, now Facebook requires the url for the redirect to be SSL enabled, so I just used https://www.npmjs.com/package/local-ssl-proxy to create a local SSL proxy with `local-ssl-proxy --source 4337 --target 1337` and configured the Proxy in Configurations -> Server -> Proxy Enable: On, Proxy Host: localhost, Proxy Port 4337, Proxy SSL: On. Hope that helps others)\r\n\r\nThe OAuth flow is mostly working, but in the final call of the flow where the access_token is provided back from Facebook and the backend queries to get the user based on the email I'm getting a 400 Bad Request.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n* Get a strapi server up and running and configure the Facebook Provider in it.\r\n* Try logging in with the login-react example. You'll see the last request to be something like: `https://localhost:4337/auth/facebook/callback?access_token=SSHHHSECRETBAOdDq4lZC6uXzvT75RyjI9zCUNEHRQeH9EBngt3dc5kZBt1ZBQuYNcHAYQgz9RlM2gMw0lWARf04PwfZBNIM4Iz1q0lXRBhHGZCCZCoDHGV9MpLYcBBLRbLZBxzQXBuGxXMRvGlEbUJg2OJPUXYgCsjDSEnZCptOZCAZDZD&raw%5Baccess_token%5D=SECRETTOOAOdDq4lZC6uXzvT75RyjI9zCUDDDDDDDDDDDBQuYNcHAYQgz9RlM2gMw0lWARf04PwfZBNIM4Iz1q0lXRBhHGZCCZCoDHGV9MpLYcBBLRbLZBxzQXBuGxXMRvGlEbUJg2OJPUXYgCsjDSEnZCptOZCAZDZD&raw%5Btoken_type%5D=bearer&raw%5Bexpires_in%5D=5183445#_=_`\r\n* The request returns a 400 Bad Request\r\n\r\n**What is the expected behavior?**\r\nIt should log you in\r\n\r\n**Suggested solutions**\r\nAfter some debugging (which, BTW was difficult because the exception was swallowed and not logged anywhere), I realised that the issue was that when the user-permissions module is trying to load the user it's having issues with building the query.\r\nThis was the trace that gave me the clue (which I got by adding logging in plugins/users-permissions/services/Providers.js in line 91, in the catch):\r\n```\r\nTypeError: The operator \"undefined\" is not permitted\r\n    at Formatter.operator (/Users/pragone/code/plan4event-api/node_modules/knex/lib/formatter.js:179:13)\r\n    at QueryCompiler_MySQL.whereBasic (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/compiler.js:567:100)\r\n    at QueryCompiler_MySQL.where (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/compiler.js:350:34)\r\n    at components.map.component (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/compiler.js:96:67)\r\n    at Array.map (<anonymous>)\r\n    at QueryCompiler_MySQL.select (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/compiler.js:96:35)\r\n    at QueryCompiler_MySQL.toSQL (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/compiler.js:50:29)\r\n    at Builder.toSQL (/Users/pragone/code/plan4event-api/node_modules/knex/lib/query/builder.js:72:44)\r\n    at /Users/pragone/code/plan4event-api/node_modules/knex/lib/runner.js:37:34\r\n    at tryCatcher (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/util.js:16:23)\r\n    at /Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/using.js:185:26\r\n    at tryCatcher (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/util.js:16:23)\r\n    at Promise._settlePromiseFromHandler (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:512:31)\r\n    at Promise._settlePromise (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:569:18)\r\n    at Promise._settlePromise0 (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:614:10)\r\n    at Promise._settlePromises (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:694:18)\r\n    at Promise._fulfill (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:638:18)\r\n    at PromiseArray._resolve (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise_array.js:126:19)\r\n    at PromiseArray._promiseFulfilled (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise_array.js:144:14)\r\n    at Promise._settlePromise (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:574:26)\r\n    at Promise._settlePromise0 (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:614:10)\r\n    at Promise._settlePromises (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/promise.js:694:18)\r\n    at _drainQueueStep (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/async.js:138:12)\r\n    at _drainQueue (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/async.js:131:9)\r\n    at Async._drainQueues (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/async.js:147:5)\r\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pragone/code/plan4event-api/node_modules/bluebird/js/release/async.js:17:14)\r\n    at runCallback (timers.js:705:18)\r\n    at tryOnImmediate (timers.js:676:5)``` \r\n\r\nI'll submit a PR for it. "},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->\r\n- **Database**:  Mongo\r\n- **Operating system**: OSX Mojave\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nThe boostrap.js of the documentation plugin has an error so the server can't start\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- Create a Product model\r\n - name: string\r\n- Delete the `config` key from one of the route in `./api/product/config/routes.json`\r\n- Install the documentation plugin `strapi install documentation``\r\n- Start your server\r\n\r\n**What is the expected behavior?**\r\n\r\nThe server should start\r\n\r\n**Suggested solutions**\r\n\r\nChange this:\r\nhttps://github.com/strapi/strapi/blob/e4dc27be54f36a956a06d35cab5f1ae11f2b9836/packages/strapi-plugin-documentation/services/Documentation.js#L393-L405\r\n\r\nBy:\r\n\r\n```\r\nconst verbObject = {\r\n        deprecated: false,\r\n        description: this.generateVerbDescription(\r\n          verb,\r\n          current.handler,\r\n          key,\r\n          endPoint.split('/')[1],\r\n          _.get(current, 'config.description'),\r\n        ),\r\n        responses: this.generateResponses(verb, current, key),\r\n        summary: '',\r\n        tags: _.isEmpty(tags) ? [_.upperFirst(key)] : [_.upperFirst(tags)],\r\n      };\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: PostgreSQL 11.1\r\n- **Operating system**:  Ubuntu 16.04\r\n- **(Optional) Link to your Project**: N/A\r\n\r\n\r\n**What is the current behavior?**\r\nDuring a graphql update mutation, when using the where filter to specify the id of the model, an Error is thrown as follows:\r\n`Unhandled rejection error: column \"_id\" of relation <<relation name>> does not exist`\r\n\r\nThis is causing a weird behavior where a table that does not contain a JSON field will NOT FAIL to update, but tables that do WILL FAIL to update.\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a strapi project with graphql plugin installed\r\n2. Create two models, one with no JSON fields (modelA), and the other with a JSON field (modelB). Create seed data for them.\r\n3. Suppose we have a `Post` model that contains only `id` -> ID and `description` -> string fields. And another model `Article` with `id` -> ID and `json_data` -> json fields.\r\n4. Open your playground or graphiql and execute the following mutations:\r\n```\r\nmutation {\r\n  updatePost(\r\n    input: { \r\n      where: { id: 1 }, \r\n      data: { description: \"abcd\" } \r\n    }\r\n  ){\r\n    post {\r\n      id,\r\n      description\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```\r\nmutation {\r\n  updateArticle(\r\n    input: {\r\n      where: { id: 1 },\r\n      data: {\r\n        json_data: \"[5, 4, 3]\"\r\n      }\r\n    }\r\n  ){\r\n   article {\r\n     id,\r\n     json_data\r\n   }\r\n  }\r\n}\r\n\r\n```\r\n5. Check your console. You will see the errors I mentioned above.\r\n6. Check your database. You will find that `Post` with `id = 1` was updated and `Article` with `id = 1` was not updated.\r\n\r\n**What is the expected behavior?**\r\nNo errors are thrown regarding the `_id` or `id` and model row should be updated\r\n\r\n\r\n**Suggested solutions**\r\nI have tried changing `convertToParams` function to not change the filter params if it equals \"id\" and it works. I'm not sure whether this is a proper solution since I'm not aware if it will break other databases/naming conventions.\r\n```\r\n/* /strapi/packages/strapi-plugin-graphql/services/Query.js:20 */\r\n\r\n  convertToParams: params => {\r\n    return Object.keys(params).reduce((acc, current) => {\r\n      return Object.assign(acc, {\r\n        [`_${current}`]: params[current],\r\n      });\r\n    }, {});\r\n  },\r\n```\r\n```\r\n  convertToParams: params => {\r\n    return Object.keys(params).reduce((acc, current) => {\r\n      if (current === \"id\") return Object.assign(acc, { [current]: params[current] })\r\n      return Object.assign(acc, {\r\n        [`_${current}`]: params[current],\r\n      });\r\n    }, {});\r\n  },\r\n```"},{"labels":[null,null,null,"bug"],"text":"`amountLimit` in `config/settings.json` of plugin `graphql` only apply when `limit` param has been set:\r\n```\r\n// ex: amountLimit: 50\r\nquery {\r\n   posts(limit: 100) {\r\n      _id\r\n      title\r\n   }\r\n}\r\n```\r\n=> this results have 50 record (it's right)\r\n\r\n**BUT**\r\n```\r\n// amountLimit: 50 & without limit param\r\nquery {\r\n   posts {\r\n      _id\r\n      title\r\n   }\r\n}\r\n```\r\n=> this results have all record in your database (not limit apply)\r\n\r\n-----\r\n**Solution to Fix**\r\n```\r\n/* \r\n* file: services/Query.js\r\n* line: 34 - 42\r\n* line 37: if(!params.limit) -> set  params.limit = strapi.plugins.graphql.config.amountLimit;\r\n*/\r\namountLimiting: params => {\r\n    if (params.limit && params.limit < 0) {\r\n      params.limit = 0;\r\n    } else if (!params.limit || params.limit > strapi.plugins.graphql.config.amountLimit) {\r\n      params.limit = strapi.plugins.graphql.config.amountLimit;\r\n    }\r\n\r\n    return params;\r\n  }\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x --> \r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: <!-- Please ensure you are using the Node LTS version (v10) --> v10.14.2\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> 3.0.0-alpha.17\r\n- **Database**: PostgreSQL\r\n- **Operating system**: Windows 10\r\n- **(Optional) Link to your Project**: <!-- To speedup support, if you have your project on github/gitlab you can provide a link -->\r\n\r\n\r\n**What is the current behavior?**\r\nCan not connect to heroku PostgreSQL\r\n\r\n**Steps to reproduce the problem**\r\nRunning the following command in the terminal:\r\n\r\n`strapi new Test --dbclient=postgres --dbhost=herokuHost --dbport=5432 --dbname=herokuDbName --dbusername=herokuUsername --dbpassword=herokuPassword --dbssl=false --dbauth=herokuDbName\r\n`\r\n\r\nError returned: \r\n\r\n`Start creating your Strapi application. It might take a minute, please take a coffee`\r\n`Lets configurate the connection to your database:`\r\n`Database determined by CLI args: postgres`\r\n`Testing database connection...`\r\n`Database connection has failed! Make sure your \"herokuDbName\" database exist.`\r\n\r\n**What is the expected behavior?**\r\n\r\nConnection is created successfully \r\n\r\n**Suggested solutions**\r\n\r\n..."},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: node 10.12.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: alpha.17\r\n- **Database**: mongodb\r\n- **Operating system**: windows 10\r\n\r\nI'm getting this error when updating a document using GraphQL:\r\n```\r\nTypeError: Cannot read property 'assignee' of undefined\"\r\n    at params.parseRelationships.Object.keys.reduce (C:\\Users\\downl\\code\\work-e9\\ems\\crm-server\\node_modules\\strapi-hook-mongoose\\lib\\relations.js:43:119)\"\r\n    at Array.reduce (<anonymous>)\"\r\n    at Function.update [as updateRelations] (C:\\Users\\downl\\code\\work-e9\\ems\\crm-server\\node_modules\\strapi-hook-mongoose\\lib\\relations.js:28:129)\"\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n```\r\n\r\nYou can see [the code that causes the error](https://github.com/strapi/strapi/blob/master/packages/strapi-hook-mongoose/lib/relations.js#L43)\r\n```javascript\r\ncase 'oneToOne':\r\n     if (response[current] !== params.values[current]) {\r\n          const value = _.isNull(params.values[current]) ? response[current] : params.values;\r\n          const recordId = _.isNull(params.values[current]) ? getValuePrimaryKey(value, this.primaryKey) : value[current];\r\n          const model = module.exports.getModel(details.model || details.collection, details.plugin);\r\n```\r\n\r\n[Line 43](https://github.com/strapi/strapi/blob/master/packages/strapi-hook-mongoose/lib/relations.js#L43) throws the exception, but I think the real problem is on [line 41](https://github.com/strapi/strapi/blob/master/packages/strapi-hook-mongoose/lib/relations.js#L41).\r\n\r\nThe error occurs if a property on an existing document is null, and the update attempts to set it to `undefined`. The conditional sees that the old and new values are not exactly the same and seems to assume the new value is an object of some kind.\r\n\r\nI'm not totally sure what needs to change to fix this issue. I worked around it for now by adding some code around line 31\r\n\r\n```\r\nif(params.values[current] === undefined) {\r\n  params.values[current] = null;\r\n}\r\n```\r\n\r\nto ensure that incoming undefined values are converted to null. Does this need to be fixed in the graphql plugin though? Should it be converting undefineds to nulls before passing the params to mongoose?\r\n\r\nEDIT: It also happens if the document has no property for the update key, but the updated value is `null`. Workaround was instead to replace line 41 with\r\n\r\n`if (response[current] !== params.values[current] && !(response[current] == null && params.values[current] == null)) {`"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.14.2\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.17\r\n- **Database**: Mongo 4.0.4-1\r\n- **Operating system**: Arch Linux\r\n- **(Optional) Link to your Project**: https://github.com/LuisHCK/api\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I try to create a new role it shows me an error notification.\r\n![screenshot_20181220_160010](https://user-images.githubusercontent.com/5175137/50314415-617fe580-0474-11e9-916f-57724774f459.png)\r\nThere are also no errors in the terminal \r\n\r\nIf I save the Role, I can not change the permissions of the role because it stays loading\r\n![strapi roles permissions2](https://user-images.githubusercontent.com/5175137/50315198-67c39100-0477-11e9-9a08-da74efc08e9a.png)\r\n\r\n**Steps to reproduce the problem**\r\nClone my repo\r\n\r\n**What is the expected behavior?**\r\nTo edit a role as the default roles\r\n![strapi roles permissions](https://user-images.githubusercontent.com/5175137/50315232-8c1f6d80-0477-11e9-9fe4-62bf0e3e81b6.png)\r\n\r\n\r\n**Suggested solutions**\r\nDowngrading to 3.0.0-alpha.16 fix the problem for now\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 11.1.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: MySQL\r\n- **Operating system**: Ubuntu 18\r\n\r\n\r\n**What is the current behavior?**\r\nI've just finished a custom plugin and I'm trying to add it to my project admin. When I copy the plugin folder and try to run `npm run setup --plugins` on the root folder, I got the following error:\r\n```\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 2\r\nnpm ERR! strapi-plugin-notifications@0.0.0 build: `node ./node_modules/strapi-helper-plugin/node_modules/.bin/cross-env NODE_ENV=production node node_modules/strapi-helper-plugin/node_modules/.bin/webpack --config node_modules/strapi-helper-plugin/lib/internals/webpack/webpack.prod.babel.js --color -p --progress`\r\nnpm ERR! Exit status 2\r\nnpm ERR!\r\nnpm ERR! Failed at the strapi-plugin-notifications@0.0.0 build script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /home/odelucca/.npm/_logs/2018-12-19T05_49_49_984Z-debug.log\r\n\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! strapi-admin@3.0.0-alpha.16 setup: `node ./scripts/setup.js`\r\nnpm ERR! Exit status 1\r\nnpm ERR!\r\nnpm ERR! Failed at the strapi-admin@3.0.0-alpha.16 setup script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /home/odelucca/.npm/_logs/2018-12-19T05_49_50_003Z-debug.log\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! yurah-admin@0.1.0 setup: `cd admin && npm run setup`\r\nnpm ERR! Exit status 1\r\nnpm ERR!\r\nnpm ERR! Failed at the yurah-admin@0.1.0 setup script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /home/odelucca/.npm/_logs/2018-12-19T05_49_50_011Z-debug.log\r\n```\r\n\r\nIf I just run npm run setup it works, but, when I do strapi start to test it I got only a loading screen on the browser, and nothing more.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. I've created a admin\r\n2. Then, I've configurated that admin, adding some Contents Types and so on\r\n3. Afterwards, I've created another project, following the docs, setting it to be --dev and developed the plugin there\r\n4. With the plugin finished, I copied the plugin folder and pasted it on my other admin\r\n5. Then, the problems starts\r\n\r\n\r\n**What is the expected behavior?**\r\nI want to migrate my plugin from one project to another one"},{"labels":[null,"bug"],"text":"Hello,\r\nI followed the documentation on graphql mutations : create, update and delete\r\nhttps://strapi.io/documentation/3.x.x/guides/graphql.html\r\n\r\nCreate does work however, update doesnt update, and delete gives me an error.\r\nMaybe I'm doing it al wrong here, but I'm stuck for hours now, so let's see.\r\n\r\nnodejs v10.6.0\r\n**fresh installation**\r\n\"strapi\": \"3.0.0-alpha.16\",\r\n\"strapi-hook-bookshelf\": \"3.0.0-alpha.16\",\r\n\"strapi-hook-knex\": \"3.0.0-alpha.16\",\r\ngraphql \"version\": \"3.0.0-alpha.16\"\r\n\r\n\r\n- Contenttype 'help', with one field 'title'\r\n- Permissions authenticated all checked\r\n\r\n\r\nmutation **update**\r\n```\r\nmutation {\r\n  updateHelp(input: {\r\n    where: {\r\n      id: 1\r\n    },\r\n    data: {\r\n      title: \"John\"\r\n    }\r\n  }) {\r\n    help {\r\n      title\r\n    }\r\n  }\r\n}\r\n```\r\n\r\ngives me back\r\n```\r\n{\r\n  \"data\": {\r\n    \"updateHelp\": {\r\n      \"help\": {\r\n        \"title\": \"test\"\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n```\r\nSo nothing is updated\r\n\r\nAnd mutation **delete**\r\n```\r\nmutation {\r\n  deleteHelp(input: {\r\n    where: {\r\n      id: 1\r\n    }\r\n  }) {\r\n    help {\r\n      title\r\n    }\r\n  }\r\n}\r\n```\r\n_throws an error:_\r\n\r\n`\"message\": \"A model cannot be destroyed without a \\\"where\\\" clause or an idAttribute.\"\r\n`\r\n```\r\n \"stacktrace\": [\r\n            \"Error: A model cannot be destroyed without a \\\"where\\\" clause or an idAttribute.\",\r\n            \"    at Sync.<anonymous> (/AMPPS/www/strapi/project/server/node_modules/bookshelf/lib/sync.js:219:13)\",\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.2\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: Latest Git\r\n- **Database**: MongoDB 4.0.4\r\n- **Operating system**: Arch Linux\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nThe Many to Many relationship does not work correctly in Plugins. Each new \"create\" entry deletes all relations from all previous entries and the relation remains only in the newest \"create\".\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a plugin using the official manual: https://strapi.io/documentation/3.x.x/plugin-development/quick-start.html\r\n2. Create a Many to Many relationship with own plugin and the `users-permissions` plugin with the `users` table.\r\n3. Add the entry with relations to the plugin.\r\n4. Add another entry with relation to the plugin.\r\n\r\n**What is the expected behavior?**\r\nCreating a new entry with the relationship should not clean up the relationship of all previously created entries.\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.2\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: MongoDB version 4.0.3\r\n- **Operating system**: Windows 10\r\n\r\n\r\nI got problem on save new content with required decimal field. I create a new content-type Product. Inside it I created a field price (decimal) and this is a required field. When I enter the data and click save it show a toast for error \"This Product,validation,failed,price,this,constructor is already taken\". I created a new content type for testing with a decimal field and without required and this one can be saved normally. Please help me.\r\n\r\nThanks\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n• *Node.js version*: 11.4.0\r\n• *NPM version*: 6.4.1\r\n• *Strapi version*: 3.0.0-alpha.16\r\n• *Database*: MySQL 5.7\r\n• *Operating system*: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I finished content type setup i tried to rename labels used in the content manager forms using Content Manager plugin. All the fields are being updated correctly except for the relational field field \"Label\".\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create two content types\r\n2. Relate two created content types via a relational field called \"somanybugs\"\r\n3. Go to Content Manager Plugin and select one of the created relational fields\r\n4. Try to update a label to \"So Many Bug's\", then save\r\n5. Go back to the content manager and try adding data to this newly created content type. \r\n6. You will notice that a label is still being pulled from the content type builder as \"somanybugs\" instead of the one defined in the manager section.\r\n\r\n\r\n**What is the expected behavior?**\r\nLabel should update with desired label\r\n\r\n\r\n**Suggested solutions**\r\nFix a bug :)"},{"labels":[null,null,"bug"],"text":"• *Node.js version*: 11.4.0\r\n• *NPM version*: 6.4.1\r\n• *Strapi version*: 3.0.0-alpha.16\r\n• *Database*: MySQL 5.7\r\n• *Operating system*: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nCreated content type was originally called Approval which was renamed to Status.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a content type under content type builder called \"Approval\"\r\n2. Add a new field called Status\r\n3. Add a couple of content values like Approved, Pending, Published under the new content type\r\n4. Go back to content type builder and rename content type from \"approval\" to \"status\"\r\n5. Strapi crashes and it wont restart.\r\n\r\n\r\n**What is the expected behavior?**\r\nExpected behavior is for Strapi to rename all the relevant fields in the database and not crash\r\n\r\n\r\n**Suggested solutions**\r\nIf there is no way to fix this for now implement validation or disable field editing to avoid this from happening for now."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.4.0<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.16<!-- Please make sure you are on the latest version -->\r\n- **Database**: Postgres\r\n- **Operating system**: MacOS\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I create two many-to-many relations on a Content Type, only the first one is created in the Postgres database.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n - Create two Content Types (`post` and `tags` for example)\r\n - Create a post\r\n - Create a many-to-many relation between posts and tags\r\n - Create a many-to-many relation between post and users\r\n - Edit the post\r\n\r\n```\r\n{ error: relation \"pages_posts__posts_pages\" does not exist\r\n    at Connection.parseE (/Users/pierreburgy/Desktop/blog/node_modules/pg/lib/connection.js:554:11)\r\n    at Connection.parseMessage (/Users/pierreburgy/Desktop/blog/node_modules/pg/lib/connection.js:379:19)\r\n    at Socket.<anonymous> (/Users/pierreburgy/Desktop/blog/node_modules/pg/lib/connection.js:119:22)\r\n    at Socket.emit (events.js:189:13)\r\n    at Socket.EventEmitter.emit (domain.js:441:20)\r\n    at addChunk (_stream_readable.js:288:12)\r\n    at readableAddChunk (_stream_readable.js:269:11)\r\n    at Socket.Readable.push (_stream_readable.js:224:10)\r\n    at TCP.onStreamRead [as onread] (internal/stream_base_commons.js:145:17)\r\nFrom previous event:\r\n    at Client_PG._query (/Users/pierreburgy/Desktop/blog/node_modules/knex/lib/dialects/postgres/index.js:240:12)\r\n    at Client_PG.query (/Users/pierreburgy/Desktop/blog/node_modules/knex/lib/client.js:192:17)\r\n    at Runner.<anonymous> (/Users/pierreburgy/Desktop/blog/node_modules/knex/lib/runner.js:138:36)\r\nFrom previous event:\r\n    at /Users/pierreburgy/Desktop/blog/node_modules/knex/lib/runner.js:47:21\r\nFrom previous event:\r\n    at Runner.run (/Users/pierreburgy/Desktop/blog/node_modules/knex/lib/runner.js:33:30)\r\n    at Builder.Target.then (/Users/pierreburgy/Desktop/blog/node_modules/knex/lib/interface.js:23:43)\r\n    at processImmediate (timers.js:632:19)\r\n    at process.topLevelDomainCallback (domain.js:120:23)\r\n  name: 'error',\r\n  length: 124,\r\n  severity: 'ERROR',\r\n  code: '42P01',\r\n  detail: undefined,\r\n  hint: undefined,\r\n  position: '158',\r\n  internalPosition: undefined,\r\n  internalQuery: undefined,\r\n  where: undefined,\r\n  schema: undefined,\r\n  table: undefined,\r\n  column: undefined,\r\n  dataType: undefined,\r\n  constraint: undefined,\r\n  file: 'parse_relation.c',\r\n  line: '1180',\r\n  routine: 'parserOpenTable' }\r\n```\r\n\r\n**What is the expected behavior?**\r\nThe relation table should be created.\r\n\r\n\r\n**Suggested solutions**\r\nIf you move up the in second relation in `Page.settings.json`, it will be created."},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.4.0\r\n- **NPM version**: 6.5.0\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: MongoDB\r\n- **Operating system**: Mac OS 10.12.6\r\n\r\n\r\n**What is the current behavior?**\r\nIf I create and save content types with fields that contain spaces or special characters (like \"@\") in the name, the server attempts to restart and fails due to GraphQL syntax errors in the names of the content types.\r\n\r\n**Steps to reproduce the problem**\r\n1) Start Strapi\r\n2) add GraphQL to the project\r\n3) create a content type\r\n4) add fields to the content type where the field names of the content type include special characters or spaces. \r\n\r\n**What is the expected behavior?**\r\nThere should be some kind of input validation on the content type fields so that they can't be saved if they are invalid (i.e. would produce GraphQL syntax errors)\r\n\r\n**Suggested solutions**\r\n1) Add input validation to the field input forms for Content Type Builder so that it's no longer possible to save inputs that generate GraphQL syntax errors. Allowed Content Type field names should follow GraphQL specs:\r\nhttps://facebook.github.io/graphql/June2018/#sec-Names\r\n2) Possibly convert spaces to underscores"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.0.0\r\n- **NPM version**: v6.0.0\r\n- **Strapi version**: v3.0.0-alpha.16\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n**Steps to reproduce the problem**\r\n\r\nI have `Battle` model with an `stage` attribute like this, because is an optional field:\r\n\r\n```\r\n\"stage\": {\r\n  \"default\": \"\",\r\n  \"type\": \"enumeration\",\r\n  \"enum\": [\r\n    \"\",\r\n    \"final\",\r\n    \"semiFinal\",\r\n    \"thirdAndFourthPlace\",\r\n    \"quarterFinals\",\r\n    \"roundOf16\",\r\n    \"groupStage\"\r\n  ]\r\n},\r\n```\r\n\r\nIt works with this query:\r\n\r\n```\r\n{\r\n  battles {\r\n    _id\r\n    team1 {\r\n      slug: username\r\n    }\r\n    team2 {\r\n      slug: username\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut it doesn't work if I add the `stage` attribute:\r\n\r\n```\r\n{\r\n  battles {\r\n    _id\r\n    team1 {\r\n      slug: username\r\n    }\r\n    team2 {\r\n      slug: username\r\n    }\r\n    stage\r\n  }\r\n}\r\n```\r\n\r\nThe error is:\r\n\r\n> `\"message\": \"Expected a value of type \\\"ENUM_BATTLE_STAGE\\\" but received: \\\"\\\"\",`\r\n\r\n**What is the expected behavior?**\r\n\r\nAllow empty `stage`, because it is not required and the default value is and empty string (`\"\"`).\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n**Node.js version**:\r\nv11.2.0\r\n**npm version**:\r\n6.4.1\r\n**Strapi version**:\r\n3.0.0-alpha.16\r\n**Operating system**:\r\nmacOS Mojave 10.14.1\r\n\r\n**Which example is causing problem?**\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n**What is the current behavior?**\r\n upload plugin is missing mutation multipleUpload, i tried editing the schema.graphql , if i pass the files variables the request is stuck in pending\r\n\r\n```\r\nconst _ = require('lodash');\r\n\r\nmodule.exports = {\r\n  mutation: `\r\n    upload(refId: ID, ref: String, source: String, file: Upload!): UploadFile!,\r\n    multipleUpload(refId: ID, ref: String, source: String, files: [Upload!]): [UploadFile!]\r\n  `,\r\n  resolver: {\r\n    Query: {\r\n      file: false,\r\n      files: {\r\n        description: 'Return files uploaded',\r\n        resolver: {\r\n          plugin: 'upload', \r\n          handler: 'Upload.find'\r\n        },\r\n      }\r\n    },\r\n    Mutation: {\r\n      createFile: false,\r\n      updateFile: false,\r\n      deleteFile: false,\r\n      upload: {\r\n        description: 'Upload one file',\r\n        resolver: async (obj, { file, ...fields}, { context }) => {\r\n          // Construct context to fit with koa-parser guidelines\r\n          // and avoid to update our business logic too much.\r\n          context.request.body = {\r\n            files: {\r\n              files: await file\r\n            },\r\n            fields\r\n          };\r\n\r\n          // Call controller action.\r\n          await strapi.plugins.upload.controllers.upload.upload(context);\r\n\r\n          // Handle case when the user is uploading only one file.\r\n          if (_.isArray(context.body) && context.body.length === 1) {\r\n            return context.body[0];\r\n          }\r\n\r\n          // Return response.\r\n          return context.body;\r\n        }\r\n      },\r\n      multipleUpload: {\r\n        description: 'Upload multiple files',\r\n        policy: ['plugins.users-permissions.isAuthenticated', 'isOwner'],\r\n        resolver: async (obj, { files, ...fields}, { context }) => {\r\n            console.log('###multipleUpload')\r\n          // Construct context to fit with koa-parser guidelines\r\n          // and avoid to update our business logic too much.\r\n          context.request.body = {\r\n            files: {\r\n              files: await files\r\n            },\r\n            fields\r\n          };\r\n\r\n          // Call controller action.\r\n         await strapi.plugins.upload.controllers.upload.upload(context);\r\n\r\n          // Handle case when the user is uploading only one file.\r\n          if (_.isArray(context.body) && context.body.length === 1) {\r\n            return context.body[0];\r\n          }\r\n\r\n          // Return response.\r\n          return context.body;\r\n        }\r\n      },\r\n    }\r\n  }\r\n};\r\n\r\n\r\n```"},{"labels":[null,null,null,"bug"],"text":"Within the `strapi-provider-upload-local` package it does not take into account if one were to change the public path in `./config/application.json`\r\n\r\n**What is the current behavior?**\r\n\r\nIt uploads to the wrong public directory.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n - Change `public.path` in `./config/application.json`\r\n -  Upload a file\r\n - Try and access it, you will get a 404, as file is still placed in ./public/uploads\r\n\r\n**What is the expected behavior?**\r\n\r\nThat it takes into account the path and puts the files in the correct place to be served.\r\n\r\n**Suggested solutions**\r\n\r\nMake use of `strapi.config.public.path` in place of `public` in: https://github.com/strapi/strapi/blob/master/packages/strapi-provider-upload-local/lib/index.js#L19\r\nAnd any fluff like checking dir exists etc\r\n\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: MongoDB shell version v3.4.18\r\n- **Operating system**: Ubuntu 16.04.5 LTS\r\n\r\n\r\n**What is the current behavior?**\r\nin development mode I added a content-type called 'event'\r\nadded an event through the content-manager, but had a small error for uploading an image. \r\nthe uploads directory did not exist. I created it and voila, the record was created.\r\nOpened content manager, there were now 10 records of the same event. Only the last one containing the image, the rest did not.\r\n\r\n**Steps to reproduce the problem**\r\nsee above\r\n\r\n\r\n**What is the expected behavior?**\r\nonly 1 record with the image\r\n\r\n\r\n**Suggested solutions**\r\nI don't know the code, but if there's a warning on 'save' / submit than no record should be created"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.12.0\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: 3.0.0-alpha.16\r\n- **Database**: MongoDB (4.0.4)\r\n- **Operating system**: Windows 10 \r\n\r\n**What is the current behavior?**\r\n\r\nUpdating a user model fails with error 400 \"Email is already taken\". \r\n\r\n**Steps to reproduce the problem**\r\n\r\nSend PUT request to <strapi url>/users/:_id when logged in as global Strapi admin.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe user object with the matching ID should be correctly updated and the server should return a 200 response.\r\n\r\n**Suggested solutions**\r\n\r\nIt looks like the in the route configuration for User.update the `_id` param is used (line 250 of \\<project\\>\\plugins\\users-permissions\\config\\routes.json):\r\n```\r\n{\r\n      \"method\": \"PUT\",\r\n      \"path\": \"/users/:_id\",\r\n      \"handler\": \"User.update\",\r\n      \"config\": {\r\n        \"policies\": [],\r\n        \"prefix\": \"\"\r\n      }\r\n    }\r\n```\r\nbut the handler checks for `id` (without underscore) in `ctx.params`, eg. over here (line 123 of \\<project\\>\\plugins\\users-permissions\\controllers\\User.js):\r\n```\r\nif (users && _.find(users, user => (user.id || user._id).toString() !== ctx.params.id)) {\r\n          return ctx.badRequest(null, ctx.request.admin ? [{ messages: [{ id: 'Auth.form.error.email.taken', field: ['email'] }] }] : 'Email is already taken.');\r\n        }\r\n```\r\nPossible solution - either change path configuration to '/users/:id' or check for '_id' in ctx.params"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**: alpha.16\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nbody.message has duplicated text\r\n\r\n**Steps to reproduce the problem**\r\n\r\nIn a simple controller, when signaling an error like this:\r\n\r\n```javascript\r\napi_method = async (ctx, next) {\r\n  ...\r\n  if (error_ condition) {\r\n      return ctx.throw(400, 'msg');\r\n  }\r\n  ...\r\n}\r\n```\r\n\r\nYou get this: \r\n\r\n```javascript\r\n{\r\n   message: 'msg: msg',\r\n   statusCode: 400,\r\n   error: 'Bad Request'\r\n}\r\n```\r\n**What is the expected behavior?**\r\n\r\nOn client get this:\r\n\r\n```javascript\r\n{\r\n   message: 'msg',\r\n   statusCode: 400,\r\n   error: 'Bad Request'\r\n}\r\n```\r\n**Suggested solutions**\r\n\r\nFix by not duplicating the message."},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.14.1<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0@alpha.16<!-- Please make sure you are on the latest version -->\r\n- **Database**: CosmosDB (mongo)\r\n- **Operating system**:  WSL\r\n\r\n\r\n**What is the current behavior?**\r\n```\r\nstrapi start\r\n[2018-12-06T15:36:08.487Z] debug ⛔️ Server wasn't able to start properly.\r\n[2018-12-06T15:36:08.489Z] error Unescaped slash in userinfo section\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\nUse a mongo password that includes special characters, such as / or =\r\n\r\n\r\n**What is the expected behavior?**\r\nSpecial characters should be escaped or URL encoded\r\n\r\n\r\n**Suggested solutions**\r\nEditing [strapi-hook-mongoose #85](https://github.com/strapi/strapi/blob/master/packages/strapi-hook-mongoose/lib/index.js#L85) to URL encode the password string, appears to resolve the issue.\r\n\r\n```\r\nawait instance.connect(uri || `mongodb${isSrv ? '+srv' : ''}://${username}:${encodeURIComponent(password)}@${host}${ !isSrv ? ':' + port : '' }/`, connectOptions); ```"},{"labels":[null,"bug"],"text":"<!-- :warning: If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- :warning: If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- :warning: Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- :warning: Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.12.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.15\r\n- **Database**: MongoDB\r\n- **Operating system**: Debian\r\n\r\nUpgrade of #2357\r\n\r\n**What is the current behavior?**\r\n\r\nWhen entering to create/edit User got blank page. with such error in console\r\n![48855275-09da5580-edb4-11e8-83bf-946e9a5cd1b2](https://user-images.githubusercontent.com/23247940/49296945-cff70680-f4b9-11e8-9ff6-92a4520cd88f.gif)\r\n\r\n```\r\nmain.js:16 TypeError: Cannot read property 'type' of undefined\r\n    at r.renderAttr (main.js:48)\r\n    at Array.map (<anonymous>)\r\n    at t.value (main.js:48)\r\n    at Mo (main.js:16)\r\n    at So (main.js:16)\r\n    at Fo (main.js:16)\r\n    at Jo (main.js:16)\r\n    at Zo (main.js:16)\r\n    at gn (main.js:16)\r\n    at fn (main.js:16)\r\nRo @ main.js:16\r\nmain.js:72 uncaught at o TypeError: Cannot read property 'type' of undefined\r\n    at r.renderAttr (https://mysite.com/admin/content-manager/main.js:48:311374)\r\n    at Array.map (<anonymous>)\r\n    at t.value (https://mysite.com/admin/content-manager/main.js:48:312290)\r\n    at Mo (https://mysite.com/admin/main.js:16:42968)\r\n    at So (https://mysite.com/admin/main.js:16:42763)\r\n    at Fo (https://mysite.com/admin/main.js:16:46086)\r\n    at Jo (https://mysite.com/admin/main.js:16:59256)\r\n    at Zo (https://mysite.com/admin/main.js:16:59637)\r\n    at gn (https://mysite.com/admin/main.js:16:65916)\r\n    at fn (https://mysite.com/admin/main.js:16:65296)\r\n```\r\n\r\n**Steps to reproduce the problem**\r\nI go 2 apps:\r\n- frontend =  http://127.0.0.1:8081 (vue)\r\n- backend =  http://127.0.0.1:1337 (strapi)\r\nBoth of them are served by Apache and got SSL. I made a proxy for the backend to achieve that admin panel is available under https://mysite.com/admin.\r\nExample of `apache2.conf`:\r\n\r\n```\r\n<VirtualHost *:80>\r\n\tServerName mysite.com\r\n\tServerAdmin admin@gmail.com\r\n\tRedirect permanent / https://mysite.com/\r\n\tCustomLog ${APACHE_LOG_DIR}/mysite-access.log combined\r\n        ErrorLog ${APACHE_LOG_DIR}/mysite-error.log\r\n</VirtualHost>\r\n<VirtualHost *:443>\r\n        ServerName mysite.com\r\n        ServerAdmin admin@gmail.com\r\n\r\n\tProxyPass /content http://127.0.0.1:1337\r\n\tProxyPassReverse /content http://127.0.0.1:1337\r\n\tProxyPass /admin http://127.0.0.1:1337/admin\r\n\tProxyPassReverse /admin http://127.0.0.1:1337/admin\r\n\tProxyPass /settings-manager http://127.0.0.1:1337/settings-manager\r\n\tProxyPassReverse /settings-manager http://127.0.0.1:1337/settings-manager\r\n\tProxyPass /content-manager http://127.0.0.1:1337/content-manager\r\n\tProxyPassReverse /content-manager http://127.0.0.1:1337/content-manager\r\n\tProxyPass /upload/ http://127.0.0.1:1337/upload/\r\n\tProxyPassReverse /upload/ http://127.0.0.1:1337/upload/\r\n\tProxyPass /auth http://127.0.0.1:1337/auth\r\n\tProxyPassReverse /auth http://127.0.0.1:1337/auth\r\n\tProxyPass /content-type-builder http://127.0.0.1:1337/content-type-builder\r\n\tProxyPassReverse /content-type-builder http://127.0.0.1:1337/content-type-builder\r\n\tProxyPass /users-permissions http://127.0.0.1:1337/users-permissions\r\n\tProxyPassReverse /users-permissions http://127.0.0.1:1337/users-permissions\r\n\t#ProxyPass /plugins http://127.0.0.1:1337/plugins\r\n        #ProxyPassReverse /plugins http://127.0.0.1:1337/plugins\r\n\r\n        ProxyPass / http://127.0.0.1:8081/\r\n        ProxyPassReverse / http://127.0.0.1:8081/\r\n        ProxyPreserveHost off\r\n\r\n\t#LogLevel debug\r\n        CustomLog ${APACHE_LOG_DIR}/mysite-access.log combined\r\n        ErrorLog ${APACHE_LOG_DIR}/mysite-error.log\r\n\tSSLEngine on\r\n\tSSLCertificateFile /etc/apache2/ssl/mysite.crt\r\n        SSLCertificateKeyFile /etc/apache2/ssl/mysite.key\r\n        SSLCACertificateFile /etc/apache2/ssl/intermediate.crt\r\n</VirtualHost>\r\n```\r\n\r\n**Important information:**\r\n- without ssl all is working fine without any bug\r\n- I found the difference between no ssl / with ssl: when I entering to edit \"User\", admin panel made request on this url `https://mysite.com/content-manager/explorer/user/5bc5ce527834a56e60853347?source=users-permissions`\r\n\r\n**Without SSL in responce I received:**\r\nITS GOOD!\r\n```\r\n{\r\n  \"confirmed\": true,\r\n  \"blocked\": false,\r\n  \"notification\": true,\r\n  \"_id\": \"5bc5ce527834a56e60853347\",\r\n  \"username\": \"admin\",\r\n  \"email\": \"myemail@gmail.com\",\r\n  \"password\": \"$2a$10$3Edxx0gxxH8gfh3.xEe9Wt7oxU7x6u4b.k325bpF1sI8UJOTe\",\r\n  \"__v\": 0,\r\n  \"id\": \"5bc5ce527834a56e60853347\",\r\n  \"role\": {\r\n    \"_id\": \"5b8932347836f94c9fd0222e\",\r\n    \"name\": \"Authenticated\",\r\n    \"description\": \"Default role given to authenticated user.\",\r\n    \"type\": \"authenticated\",\r\n    \"__v\": 0,\r\n    \"permissions\": null,\r\n    \"users\": null,\r\n    \"id\": \"5b8932347836f94c9fd0222e\"\r\n  },\r\n  \"resetPasswordToken\": \"69569be8bab53ff3x38d48404ba34ba7e12f6b153966996a2d9454223ba49cd17f74fca62f7d81bc92bc70afbe5ca8551c90bf0f4ee7a088327143926bf1e767\"\r\n}\r\n```\r\n\r\n**With SSL in responce I received:**\r\nIt`s bad, no password field :(\r\n```\r\n{\r\n  \"confirmed\": true,\r\n  \"blocked\": false,\r\n  \"notification\": true,\r\n  \"_id\": \"5bc5ce527834a56e60853347\",\r\n  \"username\": \"admin\",\r\n  \"email\": \"myemail@gmail.com\",\r\n  \"__v\": 0,\r\n  \"id\": \"5bc5ce527834a56e60853347\",\r\n  \"role\": {\r\n    \"_id\": \"5b8932347836f94c9fd0222e\",\r\n    \"name\": \"Authenticated\",\r\n    \"description\": \"Default role given to authenticated user.\",\r\n    \"type\": \"authenticated\",\r\n    \"__v\": 0,\r\n    \"permissions\": null,\r\n    \"users\": null,\r\n    \"id\": \"5b8932347836f94c9fd0222e\"\r\n  },\r\n  \"resetPasswordToken\": \"69569be8bab53ff3x38d48404ba34ba7e12f6b153966996a2d9454223ba49cd17f74fca62f7d81bc92bc70afbe5ca8551c90bf0f4ee7a088327143926bf1e767\"\r\n}\r\n```\r\n\r\n**Suggested solutions**\r\n\r\nMy  apache config is bad?  Should I change Apache to nginx? Can I add in another way SSL to strapi ? Some tips and advices will be nice! Thank you strapi team for help! \r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  10.14.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.15\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu and Windows\r\n\r\n\r\n**What is the current behavior?**\r\nUsing admin UI, when doing a `PUT` to a document with string filed, and supply the string field with a JSON string like `{\"foo\":\"bar\"}`, it fails with error `Cast to string failed for value \\\"{ foo: 'bar' }\\\" at path ...`\r\n\r\n\r\n**Steps to reproduce the problem**\r\nCreate a document type with a string field.\r\nCreate a new document for that type in Admin UI.\r\nType `{\"foo\":\"bar\"}` into the string field and click save.\r\nError shows up and document is not saved.\r\n\r\n**What is the expected behavior?**\r\nString field should allow any valid string input as long as it's a valid unicode string.\r\n\r\n\r\n**Suggested solutions**\r\nThanks"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.14.1\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.15\r\n- **Database**: MongoDB \r\n- **Operating system**: Ubuntu 16.04 LTS\r\n\r\n\r\n**What is the current behavior?**\r\nI am receiving duplicate entries for each item when queried via GraphQL\r\n\r\n**Steps to reproduce the problem**\r\nCreated new content type:\r\n![screenshot from 2018-12-02 14-48-03](https://user-images.githubusercontent.com/14224459/49341758-b2ad6e00-f65a-11e8-917d-60e7545c41e2.png)\r\n\r\nMade a GraphQL request as follows:\r\n![screenshot from 2018-12-02 14-46-30](https://user-images.githubusercontent.com/14224459/49341765-c22cb700-f65a-11e8-9560-412bdb7ed730.png)\r\n\r\nDuplicate records in response, despite MongoDB showing 4 distinct records:\r\n![screenshot from 2018-12-02 14-47-21](https://user-images.githubusercontent.com/14224459/49341769-d83a7780-f65a-11e8-9465-c1a7a7ab01a3.png)\r\n\r\n**What is the expected behavior?**\r\n4 items in response. Received 16. Each Carouselslide is returned 4 times in the response.\r\n\r\n**Suggested solutions**\r\nI am not sure why this is happening. I apologise if I am doing something wrong. :)"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v11.0.0\r\n- **NPM version**: v6.4.1\r\n- **Strapi version**: alpha.15\r\n- **Database**: redis\r\n- **Operating system**: ubuntu 18\r\n\r\n\r\n**background**\r\nThere is session/redis features in documents, and I try to save the session to local redis db (can be online redis db in productoin), while when I look into the document, there was no clear guideline how to do this, I tried with my poor understanding, but it not wok.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nwith the default setting of `./config/environments/developments/request.json`:\r\n```\r\n{\r\n  \"session\": {\r\n    \"enabled\": true,\r\n    \"client\": \"cookie\",\r\n    \"key\": \"strapi.sid\",\r\n    \"prefix\": \"strapi:sess:\",\r\n    \"secretKeys\": [\"mySecretKey1\", \"mySecretKey2\"],\r\n    \"httpOnly\": true,\r\n    \"maxAge\": 86400000,\r\n    \"overwrite\": true,\r\n    \"signed\": false,\r\n    \"rolling\": false\r\n  },\r\n  \"logger\": {\r\n    \"level\": \"info\",\r\n    \"exposeInContext\": true,\r\n    \"requests\": false\r\n  },\r\n  \"parser\": {\r\n    \"enabled\": true,\r\n    \"multipart\": true\r\n  }\r\n}\r\n```\r\nI change it to below code, following [this instruction](https://strapi.io/documentation/3.x.x/configurations/configurations.html#request)\r\n```\r\n{\r\n  \"session\": {\r\n    \"enabled\": true,\r\n    \"client\": \"redis\",\r\n    \"settings\": {\r\n      \"database\": 2,\r\n      \"port\": 6379,\r\n      \"host\": \"127.0.0.1\",\r\n      \"password\": \"\"\r\n    },\r\n    \"key\": \"strapi.sid\",\r\n    \"prefix\": \"strapi:sess:\",\r\n    \"secretKeys\": [\"mySecretKey1\", \"mySecretKey2\"],\r\n    \"httpOnly\": true,\r\n    \"maxAge\": 86400000,\r\n    \"overwrite\": true,\r\n    \"signed\": false,\r\n    \"rolling\": false\r\n  },\r\n  \"logger\": {\r\n    \"level\": \"debug\",\r\n    \"exposeInContext\": true,\r\n    \"requests\": true\r\n  },\r\n  \"parser\": {\r\n    \"enabled\": true,\r\n    \"multipart\": true\r\n  }\r\n}\r\n```\r\nbut the above code obviously do not consistent with other [database setting](https://strapi.io/documentation/3.x.x/configurations/configurations.html#database) ( it have settings field, by do not have connector etc, ), but anyway I try it firstly, run strapi start, below error will following:\r\n`error (middleware:session) please provide connection for the session store\r\n`\r\nthen I add \"connection\" key to the request.json file:\r\n```\r\n...\r\n \"session\": {\r\n    \"enabled\": true,\r\n    \"client\": \"redis\",\r\n    \"connection\":\"redis\",\r\n    \"settings\": {\r\n      \"database\": 2,\r\n      \"port\": 6379,\r\n      \"host\": \"127.0.0.1\",\r\n      \"password\": \"\"\r\n    },\r\n    \"key\": \"strapi.sid\",\r\n...\r\n```\r\nand also add database setting in `./config/environments/developments/database.json`, and install strpi-hook-redis :\r\n```\r\n...\r\n    \"redis\": {\r\n      \"connector\": \"strapi-hook-redis\",\r\n      \"settings\": {\r\n        \"client\": \"redis\",\r\n        \"database\": 2,\r\n        \"port\": 6379,\r\n        \"host\": \"127.0.0.1\",\r\n        \"password\": \"\"\r\n      },\r\n      \"options\": {\r\n        \"debug\": false\r\n      }\r\n    }\r\n...\r\n```\r\nafter that, run strapi start again, will got bellow error:\r\n```\r\ndebug ⛔️ Server wasn't able to start properly.\r\nerror Cannot find module '....../node_modules/koa-redis'\r\n```\r\nThen I install the koa-redis module,\r\nAfter these steps,  no errors was reported when server started normally.\r\n\r\n**but:** I could not get session stored in redis db (I had tested local redis db work well);\r\n\r\nI had not dive in core code to figure out how to debug this, \r\nOr probably I made some simple mistake, please check\r\n\r\n\r\n**Suggested solutions**\r\nnot yet"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  v11.2.0\r\n- **NPM version**:  6.4.1\r\n- **Strapi version**:3.0.0-alpha.14.5\r\n- **Database**: mongo\r\n- **Operating system**: ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\nI get >ERROR Error: \"GraphQL error: Unkown field: \"createdAt\"\"\r\n\r\nI'm using Angular 7 for front-end\r\n\r\n**Steps to reproduce the problem**\r\ndependencies for graphql queries, that I'm using in angular:\r\n    apollo-angular\r\n    graphql-tag\r\n\r\nmy query:\r\n\r\n> \r\n```\r\n{\r\n        reports( sort: \"createdAt:DESC\", limit: 20, start: ${page * 20}) {\r\n          _id\r\n          title\r\n          short\r\n          image{\r\n            url\r\n          }\r\n          creator {\r\n            username\r\n          }\r\n          createdAt\r\n          categories{\r\n            name\r\n          }\r\n        }\r\n      }\r\n```\r\n\r\nI'm using strapi in production. \r\n\r\n\r\n**What is the expected behavior?**\r\nGetting data object\r\n\r\n\r\n**Suggested solutions**\r\n?"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.15\r\n- **Database**: MongoDB 4.0.4\r\n- **Operating system**:  macOS Mojave\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n`GET /blogs` => i have 10 items returned\r\n`GET /blogs?_start=3&_limit=3` => empty result\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a simple standard API, create many instances\r\n\r\n**What is the expected behavior?**\r\n\r\nPagination should just work, like previous alpha\r\n\r\n**Suggested solutions**\r\n\r\nSearch for the bug and fix it!"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5\r\n- **Database**: MongoDB v4.0.4\r\n- **Operating system**: macOS 10.14.1\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nUnable to query data by decimal field.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a content type called test.\r\nAdd three fields, a string, a decimal number, an integer number. Input the same value for all three fields.\r\n\r\nThen I added two entries. This is my data below: http://localhost:1337/tests\r\n<img width=\"690\" alt=\"screen shot 2018-11-30 at 19 04 30\" src=\"https://user-images.githubusercontent.com/37067618/49326960-772f7880-f562-11e8-9c40-222d8e9ea6cd.png\">\r\n\r\nWhen I run the following query(filtering the integer field) http://localhost:1337/tests?payrollInteger_gt=2\r\nI get the first entry that is greater than 2 \r\n<img width=\"690\" alt=\"screen shot 2018-11-30 at 19 04 24\" src=\"https://user-images.githubusercontent.com/37067618/49326967-a9d97100-f562-11e8-9921-8f729c53eab1.png\">\r\n\r\nWhen I want to filter the decimal field. The data is empty. http://localhost:1337/tests?payrollDecimal_gt=2 or 2.00\r\n<img width=\"690\" alt=\"screen shot 2018-11-30 at 19 04 16\" src=\"https://user-images.githubusercontent.com/37067618/49326974-d097a780-f562-11e8-8777-2783fa5e1ced.png\">\r\n\r\nHere's my model file at Test.settings.json :\r\n<img width=\"263\" alt=\"screen shot 2018-11-30 at 19 06 19\" src=\"https://user-images.githubusercontent.com/37067618/49326976-e4430e00-f562-11e8-90b7-0442a187725c.png\">\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nShould be able to filter the query for the decimal values.\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.0<!-- Please ensure you are using the Node LTS version (v10) -->\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->3.0.0 alpha.15\r\n- **Database**: Mongodb 4.0.3\r\n- **Operating system**: mac 10.13.6\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI cant query data by integer field\r\n\r\n**Steps to reproduce the problem**\r\nsimply add a integer filed named vcode under model Apps, \r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nthen query Apps?vcode=12 or Apps?vcode_gt=12 \r\nit returns an empty array allways\r\n\r\nchange the query to http://localhost:1337/Apps?vcode_ne=12 It pulls all the data out\r\n\r\n**Suggested solutions**\r\ndont have a clue.I am new to nodejs"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.13.0\r\n- **NPM version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.15\r\n- **Database**: Mongo\r\n- **Operating system**: OSX\r\n**What is the current behavior?**\r\nin a Many to Many relation GraphQl on latest strapi throws:\r\n> \"Cannot read property 'isMongoId' of undefined\"\r\n> \"at valueToId (/Users/admin/Downloads/kon-strapi/node_modules/strapi-hook-mongoose/lib/utils/index.js:60:19)\"\r\n> \r\n\r\n**Steps to reproduce the problem**\r\nCreate two Collections and a many to many field, add a couple a values and query with graphql:\r\n```graphql\r\n{\r\n  categories {\r\n    name\r\n    Product{\r\n      Name\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\nTo return the results.\r\nIn 14.5 it was working fine but now it is not.\r\n\r\n**Suggested solutions**\r\nCouldn't find any. Seems relevant to issue [#1683](https://github.com/strapi/strapi/issues/1683#issue-346752826)"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **npm version**: v6\r\n- **Strapi version**: v15\r\n- **Database**: MariaDB 10.2\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nIf you attempt to use the new relational filters on a REST endpoint and the /count route, the filters are not applied.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate 2 models and populate with data that have a relation to each other.\r\nattempt to filter the count route of one of them while using a relational filter\r\n/count will respond with the total count as if no relational filter was applied\r\n\r\n**What is the expected behavior?**\r\n\r\nThe count route should respond with the actual count of the filtered results\r\n\r\n**Suggested solutions**\r\n\r\nModify the filter query logic to include filtering by relation"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.0.0\r\n- **npm version**: v6.0.0\r\n- **Strapi version**: v3.0.0-alpha.15\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nThe GraphQL sort desc doesn't work\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nAfter upgrading from `v3.0.0-alpha.14.5` to `v3.0.0-alpha.15`, this query doesn't work:\r\n\r\n```javascript\r\n{\r\n  seasons {\r\n    slug\r\n    editions {\r\n      slug\r\n      matchdays(sort: \"date:desc\") {\r\n        slug\r\n        date\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nError:\r\n\r\n```\r\n\"message\": \"Unkown order value: \\\"desc\\\", available values are: ASC, DESC\",\r\n```\r\n\r\nAnd after update to:\r\n\r\n```javascript\r\n{\r\n  seasons {\r\n    slug\r\n    editions {\r\n      slug\r\n      matchdays(sort: \"date:DESC\") {\r\n        slug\r\n        date\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe error is:\r\n\r\n```\r\n\"message\": \"Unkown field: \\\"date\\\"\",\r\n```\r\n\r\nBut if I remove the `(sort: \"date:DESC\")`, it works:\r\n\r\n```javascript\r\n{\r\n  seasons {\r\n    slug\r\n    editions {\r\n      slug\r\n      matchdays {\r\n        slug\r\n        date\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nWorking :)\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **npm version**: v6\r\n- **Strapi version**: v15\r\n- **Database**: MariaDB 10.2\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen trying to query nested data in GraphQL that may contain some NULL data, the following error is thrown:\r\n\r\n```\r\n{\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"The operator \\\"undefined\\\" is not permitted\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 19,\r\n          \"column\": 5\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"gssites\",\r\n        0,\r\n        \"activeGroups\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"TypeError: The operator \\\"undefined\\\" is not permitted\",\r\n            \"    at Formatter.operator (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/formatter.js:187:13)\",\r\n            \"    at QueryCompiler_MySQL.whereBasic (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/compiler.js:554:100)\",\r\n            \"    at QueryCompiler_MySQL.where (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/compiler.js:350:32)\",\r\n            \"    at /nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/compiler.js:127:31\",\r\n            \"    at Array.map (<anonymous>)\",\r\n            \"    at QueryCompiler_MySQL.select (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/compiler.js:126:33)\",\r\n            \"    at QueryCompiler_MySQL.toSQL (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/compiler.js:74:27)\",\r\n            \"    at Builder.toSQL (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/query/builder.js:70:44)\",\r\n            \"    at /nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/runner.js:39:32\",\r\n            \"    at runCallback (timers.js:705:18)\",\r\n            \"    at tryOnImmediate (timers.js:676:5)\",\r\n            \"From previous event:\",\r\n            \"    at Runner.run (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/runner.js:34:31)\",\r\n            \"    at Builder.Target.then (/nixstorage/Github/capi/CAPIv2-Strapi/node_modules/knex/lib/interface.js:20:43)\"\r\n          ]\r\n        }\r\n      }\r\n    },\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nYou can see my example query using my Development Strapi Server:\r\n\r\nQuery: https://github.com/canonn-science/CAPIv2-Strapi/blob/development/seed_files/GraphQL-Examples.MD\r\n\r\nDevelopment Server: https://api.canonn.tech:2083/graphql\r\n\r\nThere are cases within my data where a `GS Site` may not have the following relational data aka NULL data:\r\n\r\n`activeGroups` or `activeObelisks` removing those entries from my query results in a positive response with no major errors, however adding in those nested query options will result in the error above.\r\n\r\nYou are also welcome to clone my project and run it locally, to seed your MySQL database you can use the following seed file: https://github.com/canonn-science/CAPIv2-Strapi/blob/development/seed_files/SQL/example-development-20181128.sql\r\n\r\nDefault user created is:\r\n```\r\nuser: canonntest\r\npass: canonntest\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nGraphQL should provide the NULL response on missing data.\r\n\r\n**Suggested solutions**\r\n\r\nThere seems to have been a change between 14.5 and 15 that caused this error, it seems related to an improper knex query that is being passed for relational data that doesn't exist.\r\n\r\n@kamalbennani Not sure if you were working on the query part of the GraphQL plugin?"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.11.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS Sierra\r\n\r\n\r\n**What is the current behavior?** \r\n\r\nUsing [strapi-upload-cloudinary package](https://www.npmjs.com/package/strapi-upload-cloudinary), uploading _videos_ and other file types other than _image_ results to an error.\r\n\r\n![screen shot 2018-11-28 at 2 00 34 pm](https://user-images.githubusercontent.com/977413/49132180-1f043680-f316-11e8-9c48-e337606c45f1.png)\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Install strapi-upload-cloudinary package.\r\n> npm i strapi-upload-cloudinary\r\n2. Go to **Plugins** > **File Upload**.\r\n3. Choose **Cloudinary** from **Providers**.\r\n4. Set your **Cloud name**, **API Key** and **API Secret** and **Save**.\r\n5. Go to **Files Upload** and upload a video file like mp4. Get one here if you don't have one: https://sample-videos.com/\r\n6. Try PDF files or any other format other than image.\r\n7. OBSERVED. Can't upload videos or any other format like PDF.\r\n\r\n**What is the expected behavior?**\r\n\r\nShould be able to upload any file format. This works out of the box with the default one.\r\n\r\n**Suggested solutions**\r\n\r\nSet `resource_type` to `auto` for Cloudinary to automatically detect file type and take care including 'video', 'pdf' and other file types.\r\n\r\nExample code:\r\n\r\n```javascript\r\nconst upload_stream = cloudinary.uploader.upload_stream({})\r\n```\r\n\r\nto\r\n\r\n```javascript\r\nconst upload_stream = cloudinary.uploader.upload_stream({ resource_type: \"auto\" })\r\n```"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **npm version**:  6.4.1\r\n- **Strapi version**: v3.0.0-alpha.14.5\r\n- **Database**: mongodb 3.6.5\r\n- **Operating system**: Win10\r\n\r\n\r\n**What is the current behavior?**\r\nAfter the first successful authentication with google, additional attempts to authenticate, at least within the next minutes, fail at redirecting to GET /auth/google/callback as long as the user remains signed in with google in the browser. \r\nResponse is 500 at http://localhost:4200/auth/callback/google?error%5Berror%5D=invalid_grant&error%5Berror_description%5D=Malformed%20auth%20code.\r\n\r\nSigning off from Google fixes this issue and returns jwt and user response after redirecting to GET /auth/google/callback\r\n\r\n**Steps to reproduce the problem**\r\nAuthenticate with google\r\nStay signed in with google\r\nAuthenticate again with google\r\n\r\n\r\n**What is the expected behavior?**\r\nAfter the first authentication subsequent authentication attempts should also issue a new token.\r\n\r\n\r\n**Suggested solutions**\r\nI'm not quite sure why this happens since the initial redirect from accounts.google.com/o/oauth2/auth to /connect/google/callback looks pretty much the same on the first and subsequent calls, only difference i could recognize was that the first redirect is encoded while the next ones are not\r\n\r\nFirst attempt, working:\r\nhttp://localhost:1337/connect/google/callback?code=4%2FogD_bJ10kjNs7l8gqTF25hLsYQPUU-rkatS6jK5shBXcw-lLN0wlJpbSDbyx8zFP2yuDyVLDA1ScgSxLaZxxxxx&scope=openid+email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me\r\n\r\nNext attempt, failing: \r\nhttp://localhost:1337/connect/google/callback?code=4/ogCWJEaBayzfL2PoY4NJ3rL-11Wu4FNjrPOxRlFG003qPuGCy7nV6qCnlX1vvh_Dt1cUmJZrFn5ESxxxxx&scope=openid+email+https://www.googleapis.com/auth/plus.me+https://www.googleapis.com/auth/userinfo.email"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.13.0\r\n- **npm version**: v6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5\r\n- **Database**: MongoDB 4.0.4\r\n- **Operating system**: McaOS 10.14.1\r\n\r\n\r\n**What is the current behavior?**\r\nI create new content type Post and set 2 fields: title and images. The title defines as a String and Images defines as Media with multiple file uploading available. When I tried to upload files to the new saved Post I used the following API endpoint \"localhost:1337/upload\" and my Postman looks:\r\n![image](https://user-images.githubusercontent.com/7025939/48972034-d148af00-f033-11e8-9cb7-6fb7addc0110.png)\r\nAnd I got a response with newly uploaded files and I can see it in my local directory \"public/uploads\". But when I requested my Post there are no images, just empty array.\r\nMy model looks like this:\r\n![image](https://user-images.githubusercontent.com/7025939/48972054-41efcb80-f034-11e8-9997-ccf46a47143e.png)\r\nAnd API response like this:\r\n![image](https://user-images.githubusercontent.com/7025939/48972058-546a0500-f034-11e8-9ed1-1a3ff7aa3d57.png)\r\n\r\n**Steps to reproduce the problem**\r\n1. Create new Content type via the admin dashboard\r\n2. Create 2 fields \"title: String\" and \"images: Media\" with multiple files uploading checkbox\r\n3. Create new Post record using Postman\r\n4. Upload files using new created Post\r\n5. Files saved but there is nothing in \"images\" filed of Post\r\n\r\n\r\n**What is the expected behavior?**\r\nUploaded files should appear in \"images\" field\r\n\r\n\r\n**Suggested solutions**\r\nNo\r\n\r\nAny help will be very appreciated. Also, same behavior if I set images field as a single Media file."},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5<!-- Please make sure you are on the latest version -->\r\n- **Database**: mongodb\r\n- **Operating system**: mac OS\r\n\r\n\r\n\r\n**What is the current behavior?**\r\nSometimes, content types are missing in content manager.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nTry to create a few content types and check if all of them appear in content manager.\r\nThis may be hard to reproduce since it is related to the order of models loaded.\r\n\r\n\r\n**What is the expected behavior?**\r\nAll content types should appear in content manager.\r\n\r\n\r\n**Suggested solutions**\r\nAfter adding some logs to the code, I found that the problem comes from `getModels` method:\r\nhttps://github.com/strapi/strapi/blob/eeca356060e6754c14be4baf89e317f7015264ed/packages/strapi-plugin-content-manager/admin/src/containers/SettingsPage/index.js#L40-L58\r\n\r\nIn my case, one of the content types is iterated before `plugins` and is accumulated. After that the next content type is `plugins`, so `getModels` is called recursively. After returning from recursive calls, previous accumulated value is replaced by the return value, leading to missing content type in content manager.\r\n\r\nConcatenating the retuned result to previous accumulated value solves the problem."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5<!-- Please make sure you are on the latest version -->\r\n- **Database**: mongodb\r\n- **Operating system**: mac OS\r\n\r\n\r\n**What is the current behavior?**\r\nThe variable contentTypesToShow is always undefined.\r\nhttps://github.com/strapi/strapi/blob/c8d5fd1499d8b129814d8d7d486ca6156e6f7ed4/packages/strapi-admin/admin/src/components/LeftMenuLinkContainer/index.js#L44\r\n\r\n\r\n**Steps to reproduce the problem**\r\nCreate a project, add log to print the value \r\n\r\n\r\n**What is the expected behavior?**\r\nIt should give contentTypes as shown in /admin/layout\r\n\r\n\r\n**Suggested solutions**\r\nAfter reading the source codes, it probably relates to the following line:\r\nhttps://github.com/strapi/strapi/blob/c8d5fd1499d8b129814d8d7d486ca6156e6f7ed4/packages/strapi-admin/admin/src/containers/AdminPage/saga.js#L19\r\n\r\nPreviously, `layout` is assigned by:\r\n```\r\nconst layout = yield call(request, '/admin/layout', { method: 'GET' });\r\n```\r\nAnd it looks like this: { layout: { contentTypesToShow: {...} } } and hence ```get(layout, 'layout.contentTypesToShow');``` retrieves correct value.\r\n\r\nSince shorthand property is used, \"layout\" is no longer needed in path."},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.9.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5\r\n- **Database**: MongoDB v4.0.4\r\n- **Operating system**: Fedora 29\r\n\r\n\r\n**What is the current behavior?**\r\nThe UI shows a bad value for this parameter that the user has to add to the provider app setup: `.../auth/twitter/callback`. If the user add this one the process fails.\r\n![bad](https://user-images.githubusercontent.com/2753855/48787281-c7981200-ece8-11e8-9321-429929918a7a.png)\r\n\r\n**Steps to reproduce the problem**\r\nFollow the documentation to setup Twitter provider.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe UI should should the correct value for this parameter: `.../connect/twitter/callback`\r\n![good](https://user-images.githubusercontent.com/2753855/48787376-ed251b80-ece8-11e8-8923-39244c2fc288.png)\r\n\r\nMoreover, this would be consistent with the URI provided by the rest of the providers.\r\n![google](https://user-images.githubusercontent.com/2753855/48787428-04fc9f80-ece9-11e8-8418-f1701721eefe.png)\r\n![fb](https://user-images.githubusercontent.com/2753855/48787434-0928bd00-ece9-11e8-8060-22174cfa5ab4.png)\r\n![discord](https://user-images.githubusercontent.com/2753855/48787444-0ded7100-ece9-11e8-9291-f80104a66295.png)\r\n\r\n**Suggested solutions**\r\nTo add a new case to cover Twitter in this switch statement: https://github.com/strapi/strapi/blob/17e2063943f5410fc014f6a95dfba30ec3ae8a93/packages/strapi-plugin-users-permissions/admin/src/components/PopUpForm/index.js#L45\r\n\r\nI'm sending a PR."},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**:  10.13.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.5\r\n- **Database**: mongodb\r\n- **Operating system**: macos 10.14\r\n\r\n**What is the current behavior?**\r\nError updating an existing User record via graphql mutation with varying results\r\n\r\n**Steps to reproduce the problem**\r\n```\r\n// update field foo with value bar\r\n   mutation updateAccount($id: ID!) {\r\n        updateUser(input: {\r\n            where: {\r\n                id: $id\r\n            },\r\n            data: {\r\n                foo: \"bar\"\r\n            }\r\n        }) {\r\n            user {\r\n                foo\r\n            }\r\n        }\r\n    }\r\n```\r\n**Error:** Username and Email are required fields.\r\n```\r\n// update field foo with value bar \r\n// include username and email\r\n   mutation updateAccount($id: ID!, $username: String!, $email: String!) {\r\n        updateUser(input: {\r\n            where: {\r\n                id: $id\r\n            },\r\n            data: {\r\n                username: $username,\r\n                email: $email\r\n                foo: \"bar\"\r\n            }\r\n        }) {\r\n            user {\r\n                username\r\n                email\r\n                foo\r\n            }\r\n        }\r\n    }\r\n```\r\n**Error:** Email is already taken \r\n- Set username and email required to false in User.settings.json\r\n\r\n```\r\nError:\r\n{\r\n    \"errors\":[{\r\n        \"message\":\"Bad Request\",\r\n        \"locations\":[{\"line\":3,\"column\":5}],\r\n        \"path\":[\"updateUser\",\"user\"],\r\n        \"extensions\":{\r\n            \"code\":\"INTERNAL_SERVER_ERROR\",\r\n            \"exception\":{\r\n                \"data\":\"values.hasOwnProperty is not a function\",\r\n                \"isBoom\":true,\r\n                \"isServer\":false,\r\n                \"output\":{\r\n                    \"statusCode\":400,\r\n                    \"payload\":{\r\n                        \"statusCode\":400,\r\n                        \"error\":\"Bad Request\",\r\n                        \"message\":\"Bad Request\"\r\n                    },\r\n                    \"headers\":{}},\r\n                    \"message\":\"Bad Request\",\r\n                    \"stacktrace\":[\r\n                        \"Error: Bad Request\",\r\n                        \"    at Object.strapi.app.response.(anonymous function) [as badRequest] (/strapi/node_modules/strapi/lib/middlewares/boom/index.js:68:34)\",\"    at Object.proto.(anonymous function) [as badRequest] (/strapi/node_modules/delegates/index.js:40:31)\",\"    at update (/strapi/plugins/users-permissions/controllers/User.js:153:11)\",\"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n                    ]\r\n                }\r\n            \r\n        }\r\n    }],\r\n    \"data\":{\r\n        \"updateUser\":{\r\n            \"user\":null,\r\n            \"__typename\":\"updateUserPayload\"\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n**What is the expected behavior?**\r\nUpdate the user field foo with value bar\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **npm version**: v6\r\n- **Strapi version**: 14.5\r\n- **Database**: MySQL (MariaDB 10.2)\r\n- **Operating system**: Ubuntu 18.04 Server\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nIf you don't have the graphQL playground enabled (such as in production) the /graphql endpoint responses with `GET query missing.` And will not provide the schema to the client.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nStart Strapi in production without the playground enabled and attempt to make a query (such as using an example graphQL client like this one: https://altair-gql.sirmuel.design/\r\n\r\nYou can use in my case my servers as an example:\r\nDev: https://api.canonn.tech:2083/graphql\r\nProd: https://api.canonn.tech/graphql\r\n\r\nDev works fine as playground is enabled, prod does not as it is disabled there.\r\n\r\n**What is the expected behavior?**\r\n\r\nGraphQL should still respond even if playground is disabled.\r\n\r\n**Suggested solutions**\r\n\r\nFix routes"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10\r\n- **npm version**: v6\r\n- **Strapi version**: 14.5\r\n- **Database**: MySQL (MariaDB 10.2)\r\n- **Operating system**: Ubuntu 18.04 Server\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen querying against graphQL on models that use oneWay relations, the data is not properly referenced and the first \"entry\" is just repeated for all other entries.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nUnsure if this applies to a fresh project as I still need to test however I know the issue is on 14.5 with MySQL.\r\n\r\nIf you take a look at my restAPI endpoint: https://api.canonn.tech:2083/gssites\r\n\r\nYou will see something like (I've omitted some data to keep the log short):\r\n\r\n```\r\n{\r\n        \"id\": 1,\r\n        \"system\": {\r\n            \"id\": 1530,\r\n            \"systemName\": \"SYNUEFE LY-I B42-2\",\r\n            \"edsmID\": 9627367,\r\n            \"edsmID64\": 5079737705833,\r\n            ....\r\n            \"created_at\": \"2018-11-13T12:49:13.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:58:43.000Z\"\r\n        },\r\n        \"body\": {\r\n            \"id\": 1298,\r\n            \"system\": 1530,\r\n            \"bodyName\": \"C 2\",\r\n            ....\r\n            \"created_at\": \"2018-11-13T12:45:16.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:45:16.000Z\"\r\n        },\r\n        \"siteID\": 1,\r\n        \"extoolID\": null,\r\n        \"latitude\": 52.6791,\r\n        \"longitude\": 115.2503,\r\n        \"type\": {\r\n            \"id\": 3,\r\n            \"type\": \"Fistbump\",\r\n            \"journalName\": \"ancient_tiny_003\\r\"\r\n        },\r\n        \"hasDatabank\": false,\r\n        \"verified\": true,\r\n        \"visible\": true,\r\n        \"discoveredBy\": {\r\n            \"id\": 60,\r\n            \"cmdrName\": \"Doom666\",\r\n            \"created_at\": \"2018-11-13T12:45:42.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:45:42.000Z\"\r\n        },\r\n        \"created_at\": \"2018-11-13T12:48:02.000Z\",\r\n        \"updated_at\": \"2018-11-13T12:48:02.000Z\"\r\n    },\r\n    {\r\n        \"id\": 2,\r\n        \"system\": {\r\n            \"id\": 1672,\r\n            \"systemName\": \"VELA DARK REGION EG-X B1-1\",\r\n            \"edsmID\": 22967112,\r\n            \"edsmID64\": 2882862196089,\r\n            ....\r\n            \"created_at\": \"2018-11-13T12:49:13.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:59:02.000Z\"\r\n        },\r\n        \"body\": {\r\n            \"id\": 1458,\r\n            \"system\": 1672,\r\n            \"bodyName\": \"A 1\",\r\n            ....\r\n            \"created_at\": \"2018-11-13T12:45:16.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:45:16.000Z\"\r\n        },\r\n        \"siteID\": 2,\r\n        \"extoolID\": null,\r\n        \"latitude\": -31.1571,\r\n        \"longitude\": 99.4384,\r\n        \"type\": {\r\n            \"id\": 5,\r\n            \"type\": \"Bear\",\r\n            \"journalName\": \"ancient_small_002\\r\"\r\n        },\r\n        \"hasDatabank\": true,\r\n        \"verified\": true,\r\n        \"visible\": true,\r\n        \"discoveredBy\": {\r\n            \"id\": 219,\r\n            \"cmdrName\": \"Zebarmy\",\r\n            \"created_at\": \"2018-11-13T12:45:42.000Z\",\r\n            \"updated_at\": \"2018-11-13T12:45:42.000Z\"\r\n        },\r\n        \"created_at\": \"2018-11-13T12:48:02.000Z\",\r\n        \"updated_at\": \"2018-11-13T12:48:02.000Z\",\r\n    },\r\n```\r\n\r\nHowever if you use the graphQL playground to try and get the same data (GraphQL query below):\r\n\r\nhttps://api.canonn.tech:2083/graphql\r\n\r\n```\r\nquery {\r\n  gssites {\r\n    system {\r\n      systemName\r\n    }\r\n    body {\r\n      bodyName\r\n    }\r\n    siteID\r\n    latitude\r\n    longitude\r\n    type {\r\n      type\r\n    }\r\n    verified\r\n    discoveredBy {\r\n      cmdrName\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou can see the \"repeated\" data:\r\n\r\n```\r\n{\r\n  \"data\": {\r\n    \"gssites\": [\r\n      {\r\n        \"system\": {\r\n          \"systemName\": \"16 H ORIONIS\"\r\n        },\r\n        \"body\": {\r\n          \"bodyName\": \"ABC 2 C A\"\r\n        },\r\n        \"siteID\": 1,\r\n        \"latitude\": 52.6791,\r\n        \"longitude\": 115.2503,\r\n        \"type\": {\r\n          \"type\": \"Lacrosse\"\r\n        },\r\n        \"verified\": true,\r\n        \"discoveredBy\": {\r\n          \"cmdrName\": \"1_Unknown\"\r\n        }\r\n      },\r\n      {\r\n        \"system\": {\r\n          \"systemName\": \"16 H ORIONIS\"\r\n        },\r\n        \"body\": {\r\n          \"bodyName\": \"ABC 2 C A\"\r\n        },\r\n        \"siteID\": 2,\r\n        \"latitude\": -31.1571,\r\n        \"longitude\": 99.4384,\r\n        \"type\": {\r\n          \"type\": \"Lacrosse\"\r\n        },\r\n        \"verified\": true,\r\n        \"discoveredBy\": {\r\n          \"cmdrName\": \"1_Unknown\"\r\n        }\r\n      },\r\n```\r\n\r\nNotice that some of the data is the same as it should be such as ID, siteID, latitude, longitude, verified however anything that uses a `oneWay` relation type is not correct. In this case system, body, type, and discoveredBy all use the `oneWay`.\r\n\r\n**What is the expected behavior?**\r\n\r\noneWay lookups should resolve the proper data\r\n\r\n**Suggested solutions**\r\n\r\nAs I am not well versed in graphQL the error seems to be within graphQL as bookshelf is correctly getting the right data."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.12.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu 18.04 x64\r\n\r\n**What is the current behavior?**\r\nAfter setting the content type text fields  to use the wsywyg editor option whilst running in development, once deployed and ran in production the wsywyg editor no longer displays and the field is rendered as a regular text field.\r\n\r\n**What is the expected behavior?**\r\nI'd expect the option to be written to the model setting file but they do not seem to be.\r\n\r\nThe content type builder doesn't display when started in production so its not possible for me to check the box in the advanced settings, although i can when ran in development.\r\n\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v8.12.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: Mysql\r\n- **Operating system**: Win64\r\n\r\n\r\nmy model file: **[api\\list\\models\\List.js]**\r\n```\r\nmodule.exports = {\r\n  beforeSave: async (model, attrs, options) => {\r\n    console.log(\"beforeSave\");\r\n  },\r\n  beforeFetch: async (model, attrs, options) => {\r\n    console.log(\"beforeFetch\");\r\n  },\r\n  beforeFetchAll: async (model, columns, options) => {\r\n    console.log(\"beforeFetchAll\");\r\n  }\r\n};\r\n```\r\n\r\n- **[beforeSave]** it is ok \r\n- **[beforeFetch]** it is ok\r\n- **[beforeFetchAll]** not work!\r\n\r\n\r\nand [your documentation](https://strapi.io/documentation/3.x.x/guides/models.html#lifecycle-callbacks) not told database type (**bookshelf** & **mongoose**) difference for lifecycle callbacks."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  10.8.0\r\n- **npm version**:  6.2.0\r\n- **Strapi version**: alpha 14.4\r\n- **Database**: pg\r\n- **Operating system**: windows/wsl\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen I define the `where` clause of a related object for the parent ID, I get wrong information for nested properties.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nSo my model `event` consists of multiple `registrations`.\r\nI can ask either for \r\n1: `event(id: 6) {registrations{}}`\r\nor for\r\n2: `registrations(where: {event: 6}) {}`\r\n\r\nwhile `event(id)` delivers the correct data, `registrations(where)` does not.\r\n\r\n**Query 1:**\r\n``` \r\nevent(id: 6) {\r\n    registrations{\r\n        user {\r\n            id\r\n            username\r\n        }\r\n    }\r\n}\r\n```\r\n**Response 1:**\r\n```\r\n\"event\": {\r\n    \"registrations\": [\r\n        {\r\n          \"user\": {\r\n            \"id\": \"87\",\r\n            \"username\": \"kio\"\r\n          }\r\n        },\r\n        {\r\n          \"user\": {\r\n            \"id\": \"26\",\r\n            \"username\": \"chitatz\"\r\n          }\r\n        },\r\n        {\r\n          \"user\": {\r\n            \"id\": \"10\",\r\n            \"username\": \"akiru\"\r\n          }\r\n        },\r\n        {\r\n          \"user\": {\r\n            \"id\": \"56\",\r\n            \"username\": \"famis\"\r\n          }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**Query 2:**\r\n```\r\nregistrations(where: {event: 6}) {\r\n    id\r\n    user {\r\n        id\r\n        username\r\n    }\r\n}\r\n```\r\n**Response 2:**\r\n```\r\n{\r\n    \"registrations\": [\r\n        {\r\n            \"id\": \"17\",\r\n            \"user\": {\r\n                \"id\": \"39\",\r\n                \"username\": \"dawn\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"18\",\r\n            \"user\": {\r\n                \"id\": \"39\",\r\n                \"username\": \"dawn\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"19\",\r\n            \"user\": {\r\n                \"id\": \"39\",\r\n                \"username\": \"dawn\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"20\",\r\n            \"user\": {\r\n                \"id\": \"39\",\r\n                \"username\": \"dawn\"\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nrelation where selectors should behave as object(id) selector\r\n\r\n**Suggested solutions**\r\n\r\nI believe this might be sql specific, but I can't be sure.\r\nMake sure the related objects are properly resolved, I don't know why a user is returned that is not even in the list of registrations."},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 8.12.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0<!-- Please make sure you are on the latest version -->\r\n- **Database**: MongoDB\r\n- **Operating system**: MacOS\r\n\r\n\r\n**What is the current behavior?**\r\nIf two users have same `displayName` set in Google, the second user will not be able to register with google login as it will show User Name already taken.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nSignup with a google user.\r\nSignup again with another google user having same displayName\r\n\r\n\r\n**What is the expected behavior?**\r\nBoth users should be able to login.\r\n\r\n\r\n**Suggested solutions**\r\nIn Providers.js, google : \r\nuse this instead : `username: body.emails[0].split(\"@\")[0],`"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.13.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0 (dev mode)\r\n- **Database**: mongodb 4.0.3\r\n- **Operating system**: Archlinux\r\n- **mongoose version**: 5.3.8\r\n- **mongoose-float**: 1.0.2\r\n\r\n**What is the current behavior?**\r\nDecimal: 3.14159265358979\r\nFloat: 3.14159265358979\r\n\r\n**Steps to reproduce the problem**\r\nCreate a content type containing a decimal and a float\r\nFill both with pi = 3.1415926535897932384626\r\nThe result in admin panel is not correct...\r\n\r\n**What is the expected behavior?**\r\nDecimal: 3.14 **(Only two digits precision)**\r\nFloat: 3.14159265358979\r\n\r\n**Suggested solutions**\r\nThis issue was discovered when I trying to fix #2251 \r\nBecause mongoose-float will set the schema types when loadType() is called, actually there is only one float type exists in the mongoose instance's schema types. Therefore, both Decimal and Float would point to the the last type set by mongoose-float (Currently Float). \r\n\r\nI have no idea how to fix this (submit PR), so I open this issue."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 11.1.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: mLab\r\n\r\n**What is the current behavior?**\r\n\r\nGraphql playground and requests works fine on the local environment, but when I build it on Heroku I get this response when I request anything: \r\n\r\n`Status Code: 400 Bad Request`\r\n\r\nSometimes I get the data I want, other times server response is:\r\n\r\n`{\r\n  \"error\": \"Response not successful: Received status code 400\"\r\n}\r\n`\r\n\r\nI tried using the git of graphql as a dependency in the plugin, also downgrading to 0.13.2, but still the same issue. Could this be an issue with graphql-strapi or something to do with Heroku? I can recall that everything was working fine until I updated to Strapi 14.\r\n\r\nThanks for the help.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- Created a new Strapi project\r\n- Copied old generated apis\r\n- Installed graphql plugin\r\n- Pushed project to Heroku\r\n- Tried to make a request to /graphql\r\n\r\n**What is the expected behavior?**\r\n\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.9.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.14.4.0\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I create a new strapi project with a `.` in the name and if I keep the generated name for the database I get an error : \r\n```\r\nMongoError: database names cannot contain the character '.'\r\n    at Function.create (/tmp/strapifa462c8c1340/node_modules/mongodb-core/lib/error.js:43:12)\r\n    at validateDatabaseName (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/operations/db_ops.js:704:24)\r\n    at new Db (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/db.js:180:3)\r\n    at MongoClient.db (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/mongo_client.js:268:14)\r\n    at /tmp/strapifa462c8c1340/node_modules/mongoose/lib/connection.js:527:42\r\n    at result (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/utils.js:414:17)\r\n    at executeCallback (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/utils.js:406:9)\r\n    at err (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/operations/mongo_client_ops.js:286:5)\r\n    at connectCallback (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/operations/mongo_client_ops.js:241:5)\r\n    at process.nextTick (/tmp/strapifa462c8c1340/node_modules/mongodb/lib/operations/mongo_client_ops.js:463:7)\r\n    at process._tickCallback (internal/process/next_tick.js:61:11)\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\n`npx strapi@3.0.0-alpha.14.4 new cms-14.4` then just accept default settings for the database connection.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe generated data base name must be a valid mongo database name.\r\n\r\n\r\n**Suggested solutions**\r\n[From the official MongoDB doc](https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Database-Names-for-Windows) :\r\n> For MongoDB deployments running on Windows, database names cannot contain any of the following characters:\r\n> ```\r\n> /\\. \"$*<>:|?\r\n> ```\r\n>\r\n> For MongoDB deployments running on Unix and Linux systems, database names cannot contain any of the following characters:\r\n> ```\r\n> /\\. \"$\r\n> ```\r\n\r\nWe could use these regex to check if the database name is valid or not."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.11.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version --> v3.0.0-alpha.14.3\r\n- **Database**: Mongo\r\n- **Operating system**: macOS 10.14.1\r\n\r\n\r\n**What is the current behavior?**\r\nIf I modify `models/model.settings.json` and move a field up/down, it will duplicate that field on the frontend. If I put it back to the old order it will duplicate it again. And if I remove it, it will give a white page because it's looking for that field.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nAbove ^\r\n\r\n\r\n**What is the expected behavior?**\r\nIt should respect the `settings.json` file.\r\n\r\n\r\n**Suggested solutions**\r\nIn the DB `core_store.plugin_content-manager_schema` I found the duplicate. This is not the first time I have to modify this value.  Can anyone please tell me at least why this happens if it's not a bug?"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.0.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: MongoDB\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\nShowing error of \r\n\r\n> ID cannot represent value: { _bsontype: \\\"ObjectID\\\", id: <Buffer 5b dd fc 0d 66 0d 84 1c 64 0a b9 f0> }\r\n\r\n while` retrieving \"_id\" of any collection \r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nJust use \r\n\r\n>  query {\r\n>   locations{\r\n>     _id\r\n>   }\r\n> }\r\n\r\non any collection from playground, please add some values before check.\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nThis should return an _id of locations\r\n\r\n**Suggested solutions**\r\nShould clear the issue with mongoose ObjectId to string at GraphQL plugin"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.12.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.14.4.0\r\n- **Database**: MongoDB 4.0.3\r\n- **Operating system**: macOS Mojave 10.14.1\r\n\r\n\r\n**What is the current behavior?**\r\nThe app crashes when viewing the content types. Refreshing the page fixes the issue.\r\nScreen recording: https://streamable.com/udfwa\r\n\r\n**Steps to reproduce the problem**\r\nSee the recording posted above.\r\n1. Create a new app.\r\n2. Add a content type.\r\n3. View the content type.\r\n4. The page doesn't load with an error in the console.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe app shouldn't crash.\r\n\r\n\r\n**Suggested solutions**\r\n-"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.12.0\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: MongoDB\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\nWhen creating a number field, if \"Float\" or \"Decimal\" are selected from within Number Format, the server throws an error on restart: \r\n\r\n```\r\n(node:21608) UnhandledPromiseRejectionWarning: TypeError: Undefined type `Float` at `total`\r\n  Did you try nesting Schemas? You can only nest using refs or arrays.\r\n...\r\n(node:21608) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:21608) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n[2018-11-02T15:40:31.976Z] debug ⛔️ Server wasn't able to start properly.\r\n[2018-11-02T15:40:31.980Z] error (hook:mongoose) takes too long to load\r\n(hook:mongoose) takes too long to load\r\n\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\nI have a content type that I named \"order\" and at the moment I have the fields \"address: String\", \"city: String\", \"state: String\", \"zipcode: String\", products: JSON\", \"total: Decimal.\"\r\n\r\nThe problem arises regardless of whether you try setting a default value or not. \r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nThe field should be created without throwing any errors. \r\n\r\n**Suggested solutions**\r\nI did see a similar issue reported in the now closed issue #1859.  Not sure if this is related to that or not, but maybe it's a place to start. \r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  v10.10.0\r\n- **npm version**:  6.4.1\r\n\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: 3.6.4\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nGenerated api returns 404 response on all related routes.\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Install new project using command `strapi new projectname`\r\n2. Perform commands\r\n```\r\ncd projectname\r\nstrapi generate:api test\r\nstrapi start\r\n```\r\n3. Make sure generated api is working correctly, sending request from postman or browser:\r\n```\r\nGET http://localhost:1337/tests\r\n```\r\nExpected response:\r\n```\r\n{\r\n    \"statusCode\": 403,\r\n    \"error\": \"Forbidden\",\r\n    \"message\": \"Forbidden\"\r\n}\r\n```\r\nWe did not set up any permissions for this api, therefore it's forbidden by default.\r\n\r\n4. Create file with name v.js ( this could be any filename starting from letter 'v' - 'v123456.js', etc. ) at the folder `$PROJECT_ROOT/api/test/config `;\r\nThis file must export function, like this:\r\n```\r\nfunction testFunction() {\r\n  console.log(\"this function is not called\");\r\n}\r\n\r\nmodule.exports = testFunction;\r\n\r\n```\r\n\r\n5. Server will restart automatically. \r\n6. Perform the same request from step 3. Result will be:\r\n```\r\n{\r\n    \"statusCode\": 404,\r\n    \"error\": \"Not Found\",\r\n    \"message\": \"Not Found\"\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nExpected the same response as in step 3.\r\n\r\n**Suggested solutions**\r\nHave no idea."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.6.0\r\n- **npm version**: 6.1.0\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: mongo\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nVideo/Audio files not working in Safari 9+\r\n\r\n**Steps to reproduce the problem**\r\n\r\nThis could fall under a feature request, though I assume users would expect video/audio files to work in Safari out-the-box.\r\n\r\nOn a clean installation upload an MP4 file from the Strapi dashboard.\r\nClick record to copy file location to clipboard and then paste in Safari.\r\nVideo does not stream.\r\n\r\n**What is the expected behavior?**\r\n\r\nIt should stream the video as it does in Chrome and IE\r\n\r\n**Tested**\r\n\r\nTested opening video in Safari from desktop to ensure it's not an encoding/corrupt file issue.\r\n\r\n**Suggested solutions**\r\n\r\nAfter some research it seems the solution would be to add `Range` to request headers for these file types as this is now seems mandatory in Safari.\r\n\r\nThanks\r\n\r\n\r\n\r\n"},{"labels":[null,null,"bug"],"text":"**What is the expected behavior?**\r\nI've customized my model to have a `String` as the `id`. Then tried to query with graphql like this:\r\n```\r\nconst POST_QUERY = gql`\r\n  query BlogPost($id: String!) {\r\n    blog(id: $id) {\r\n      title\r\n      text\r\n      createdAt\r\n      author {\r\n        username\r\n        avatar {\r\n          url\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n```\r\nI've got the error:\r\n\r\n`variable \"$id\" of type \"String!\" used in position expecting type \"ID!\"`\r\n\r\nBy looking at the sources, i see that the graphql plugin, defines Query for any given model with `(id: ID)` without even looking at the model customization (change `ID` by `String`)\r\n\r\n## Proposed solution\r\n\r\nModify the logic to detect if there is a definition for the `id` attribute on the model, and use its type on the graphql Resolver definition."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v11.0.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.4.0\r\n- **Database**: PostgreSQL\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n**What is the current behavior?**\r\nI have one table RFQ (Request for Quotation) which has a Purchaser, a purchaser may have many RFQs.\r\nMy query is \r\n```\r\n{\r\n  rfqs {\r\n    id\r\n    date\r\n    purchaser {\r\n      id\r\n      name\r\n      email\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIn the database and Strapi Admin Interface I receive the right information about purchaser (id, name and email). But when I make a graphql request it returns wrong information. It repeats the info about the first purchaser in the first row.\r\nIt happens in other classes with relations as well.\r\n\r\n**Steps to reproduce the problem**\r\nCreate two tables with one to many relationship.\r\nMake a query retrieving related data.\r\n\r\n**What is the expected behavior?**\r\nReturn correct information for all rows\r\n\r\n**Suggested solutions**\r\nNo suggestion."},{"labels":[null,null,"bug"],"text":"- 10.12.0\r\n- 6.4.1\r\n- 3.0.0-alpha.14.4.0\r\n- 5.7.23\r\n- Mojave\r\n\r\n\r\n**What is the current behavior?**\r\nNewly created types do not appear in the content types list.\r\n\r\n**Steps to reproduce the problem**\r\nJust follow the Quick Start guide\r\n\r\n**What is the expected behavior?**\r\nThey should appear. I see them in the database and in the Content Manager.\r\n\r\n**Suggested solutions**\r\n🤷‍♂️"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.11.0\r\n- **npm version**:  6.4.1\r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->3.0.0-alpha.14.3\r\n- **Database**: Mongo\r\n- **Operating system**: Mac\r\n\r\n\r\n**What is the current behavior?**\r\nWhen you filter for content then try to remove a content, it gives an error\r\n```\r\n An error occurred during record deletion.\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n1- Go to content type\r\n2- filter for a content\r\n3- remove a content\r\n\r\n**What is the expected behavior?**\r\nIt should remove the content with no error\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.0.0\r\n- **npm version**: 6.0.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**:  MySQL 5.7.24\r\n- **Operating system**: macOS 10.14 (Mojave)\r\n\r\n\r\n**What is the current behavior?**\r\nHaving a many-to-many relation, graphql shows the list of all foreign elements of a relation when none is selected in an element.\r\n\r\n**Steps to reproduce the problem**\r\n1. fresh strapi install + graphql\r\n2. create content types:\r\n- song with title (string)\r\n- artist with name (string)\r\n3. add relation between song and artist (many to many)\r\n4. add some artists (A1, A2, A3...)\r\n5. add some songs (S1, S2, S3...)\r\n6. add in S1: A1\r\n7. add in S2: A2, A3\r\n8. request in graphql:\r\n\r\n`query {\r\n  songs {\r\n    title\r\n    artists {\r\n      name\r\n    }\r\n  }\r\n}`\r\n\r\nand get the result:\r\n\r\n`{\r\n  \"data\": {\r\n    \"songs\": [\r\n      {\r\n        \"title\": \"S1\",\r\n        \"artists\": [\r\n          {\r\n            \"name\": \"A1\"\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"title\": \"S2\",\r\n        \"artists\": []\r\n      },\r\n      {\r\n        \"title\": \"S3\",\r\n        \"artists\": [\r\n          {\r\n            \"name\": \"A1\"\r\n          },\r\n          {\r\n            \"name\": \"A2\"\r\n          },\r\n          {\r\n            \"name\": \"A3\"\r\n          },\r\n          {\r\n            \"name\": \"A4\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}`\r\n\r\nHere you can see, song \"S3\" shows the complete list of artists, although S3 has no artists.\r\n\r\nOptional: Verify REST call (correct result):\r\n\r\nVisit http://localhost:1337/songs and get:\r\n\r\n`[{\"id\":1,\"title\":\"S1\",\"created_at\":\"2018-10-24T11:13:15.000Z\",\"updated_at\":\"2018-10-24T11:13:46.000Z\",\"artists\":[{\"id\":1,\"name\":\"A1\",\"created_at\":\"2018-10-24T11:13:26.000Z\",\"updated_at\":\"2018-10-24T11:13:26.000Z\"}]},{\"id\":2,\"title\":\"S2\",\"created_at\":\"2018-10-24T11:13:18.000Z\",\"updated_at\":\"2018-10-24T11:23:50.000Z\",\"artists\":[{\"id\":3,\"name\":\"A3\",\"created_at\":\"2018-10-24T11:13:30.000Z\",\"updated_at\":\"2018-10-24T11:13:30.000Z\"},{\"id\":2,\"name\":\"A2\",\"created_at\":\"2018-10-24T11:13:28.000Z\",\"updated_at\":\"2018-10-24T11:13:28.000Z\"}]},{\"id\":3,\"title\":\"S3\",\"created_at\":\"2018-10-24T11:13:20.000Z\",\"updated_at\":\"2018-10-24T11:43:22.000Z\",\"artists\":[]}]`\r\n\r\nHere you can see: the artists array is empty for S3.\r\n\r\n**What is the expected behavior?**\r\n\r\nEmpty list/array when no objects are related.\r\n\r\n**Suggested solutions**\r\n\r\nFix code for graphql ;)"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: \r\n- **npm version**: \r\n- **Strapi version**: <!-- Please make sure you are on the latest version -->\r\n- **Database**: \r\n- **Operating system**: \r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI'm working with a React + Strapi project and when I ran strapi start in my terminal I get to my admin page. However, when I press Content Manager I am met by Content Manager\r\nConfigure the default settings for all your Content types where I can either Save or Cancel. Whichever one I choose sends me to a blank page called http://localhost:1337/admin/plugins/content-manager/ctm-configurations\r\nI cannot see any of my products or pics i uploaded a few weeks ago. \r\nWhat can i do? \r\n\r\n\r\n**Steps to reproduce the problem**\r\nI have updated my Strapi and restarted my computer but that did not solve the issue. \r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nI want to be able to see my content manager and all my uploaded data.\r\n\r\n**Suggested solutions**\r\n![screen shot 2018-10-23 at 12 19 53](https://user-images.githubusercontent.com/31923706/47354211-76333d80-d6be-11e8-86d3-e79b34b98021.png)\r\n"},{"labels":[null,null,"bug"],"text":"I am trying to model a relation of type many-to-many between records of the same content types.\r\n\r\nHere is an example use case. I am creating articles. Each article can be translated into multiple languages. I wish to end up with a list of translated articles. Here is how my WordPress looks like:\r\n\r\n![Wordpress Translations](http://www.adaltas.com/wp-content/uploads/2018/10/wordpress_translations.png)\r\n\r\nThe current implementation implies creating two fields (for example \"articles_targetting\" and \"articles_referencing\"). It works but it is quite inconvenient. It implies managing the translated articles on a per document basis. If a new translation is added, the relation must be created for every document. It would be more convenient to only have one field which references other records of the same content type.\r\n\r\nIt feels to me like this is a new type of many-to-many relation, or maybe is there another way to modelize this scenario which I didn't think about?\r\n\r\nNote, this is related to #1507\r\n\r\nThank for your hard work, I just discover Strapi and it looks very promising."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**: MySQL 5.7.12\r\n- **Operating system**: Ubuntu 18.04 on WSL\r\n\r\n**What is the current behavior?**\r\nError with index after changing field type from `string` to another thing.\r\n```\r\n  UnhandledPromiseRejectionWarning: Error: ER_BAD_FT_COLUMN: Column 'field_string' cannot be part of FULLTEXT index\r\n[...]\r\n  UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n  [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n1. On new project, create a model with a field of type `string`.\r\n2. After the creation of the table, modify the field type to another other valid value and restart the server.\r\nSee https://github.com/maturanomx/strapi-app/commit/7d14dd7c46273a70d0dfd92b747cbca7f193a790\r\n**What is the expected behavior?**\r\nChanges needed; no error.\r\n\r\n**Suggested solutions**\r\nRemove previous related index."},{"labels":[null,null,null,"bug"],"text":"NOTE: This a duplicate of this (closed) issue that was not submitted with a proper template: \r\nhttps://github.com/strapi/strapi/issues/2134\r\n\r\n**Informations**\r\n- Node.js version: 10.12.0\r\n- npm version: 6.4.1 \r\n- Strapi version:  3.0.0-alpha.14.3\r\n- Database: MongoDB (4.0.0)\r\n- Operating system: Mac OS 10.13.2\r\n\r\n(NOTE: also seeing same behavior on server configured as follows)\r\n- Node.js version: 9.9.0\r\n- npm version: 5.6.0 \r\n- Strapi version:  3.0.0-alpha.14.2\r\n- Database: MongoDB (4.0.0)\r\n- Operating system: Ubuntu 16.04.4\r\n\r\n**What is the current behavior?**\r\nRelations do not retain ordering on save.\r\n\r\n**Steps to reproduce the problem**\r\n- Create a new strapi\r\n```\r\nstrapi new testProject3\r\n# (accept defaults)\r\ncd testProject3\r\nstrapi start\r\n```\r\n- Open admin\r\n- Create two Content Types (foo & bar), each with a name (string) field.\r\n- Create a oneToMany relation from bar to foo.\r\n- Create three foos with name values 'foo1', 'foo2', and 'foo3'\r\n- Create a bar with name 'bar1'\r\n- Add each foo to the oneToMany relation in bar1; order them 'foo3', 'foo2', 'foo1'\r\n- Save bar1\r\n- Reopen bar1\r\n\r\nThe oneToMany relation UI now shows items in order 'foo1', 'foo2', 'foo3'.\r\nNOTE: this is also true with many-to-many relations, as shown in these screenshots.\r\n\r\nBefore save:\r\n<img width=\"283\" alt=\"screen shot 2018-10-18 at 10 53 16 am\" src=\"https://user-images.githubusercontent.com/791610/47174947-e741b200-d2c6-11e8-82b6-d1f81e0779ed.png\">\r\n\r\nAfter save:\r\n<img width=\"282\" alt=\"screen shot 2018-10-18 at 10 53 47 am\" src=\"https://user-images.githubusercontent.com/791610/47174992-03455380-d2c7-11e8-82a8-72bb85ac4c2c.png\">\r\n\r\n**What is the expected behavior?**\r\nThe oneToMany items retain their ordering.\r\n\r\n\r\n**Suggested solutions**\r\nNone at this point.\r\n\r\nThanks!"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.11.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**: mongo\r\n- **Operating system**: Amazon Linux AMI\r\n\r\n\r\n**What is the current behavior?**\r\nI have some content types that I can not create the field relation with other content types, but just with specifc content types.\r\nWhen I try to create any type of relation, in the Content Type Builder, I get the error that it says \"type value is already exists\", but there's no any relation between any content type in all the proyect.\r\nI deleted all of the content types and I created it again without any relation, so I started to create the relations with the content types with problem but it appears the error again.\r\nFor example, I have so many content types but when I want to create the relation between the Terms content type with Language content type, it appears the error and no matter what kind of relation I try to create, the error always appears. But this doesn't happen when I create a relation between Terms content type and Country content type also doesn't appear when I create a relation between Buy model and Language content type.\r\n![image](https://user-images.githubusercontent.com/38534086/47097054-c8bbb800-d1ed-11e8-80d1-119afa001e14.png)\r\n\r\n**Steps to reproduce the problem**\r\n-Create the content type language, with two string fields, name and code.\r\n-Create another content type, terms with a json field, terms, and a relation with country and other with language.\r\n\r\n\r\n**What is the expected behavior?**\r\nCreate the content type with the relation with any other content type without problems.\r\n\r\n\r\n**Suggested solutions**\r\nFIx it or tell me in what other way can I create the content type or the relations."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.11.1\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.3 <!-- Please make sure you are on the latest version -->\r\n- **Database**: mongo 4.01\r\n- **Operating system**: macOS 10.14\r\n\r\n\r\n**What is the current behavior?**\r\nusing the ${model}Connection query I do not receive the correct values\r\n\r\n**Steps to reproduce the problem**\r\nI'm trying to get the number of documents from a query. I have a Contact model, so I have the following query:\r\n![contacts_aggregation](https://user-images.githubusercontent.com/2061711/47039693-3257aa00-d18d-11e8-921f-16436a168978.png)\r\n\r\n(I know that only 2 documents fulfill this filtering.) The count is correct but in the values ​​those fields that I used for the filtering are not solved correctly.\r\n\r\n\r\n**What is the expected behavior?**\r\nGet the correct count and the correct values.\r\nAt the moment I had to do this:\r\n![resultadoesperado](https://user-images.githubusercontent.com/2061711/47042480-07248900-d194-11e8-899d-0dd5e4b15040.png)\r\n\r\n\r\n\r\n**Suggested solutions**\r\nno suggestion\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: `v10.11.0`\r\n- **npm version**: `6.4.1`\r\n- **Strapi version**: `3.0.0-alpha.14.3`\r\n- **Database**: `MongoDB`\r\n- **Operating system**:  `macOS Mojave 10.14 (18A391)`\r\n\r\n\r\n**What is the current behavior?**\r\nAdding the graphql plugin throws an error for content fields with the media type.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. `strapi new test-app` # then cd into strapi\r\n2. `strapi install graphql` # install graphql\r\n3. Run strapi locally and create a new content type of File with fields: `title` (type text) and `file` (type media)\r\n4. There will be an error thrown `Error: Cannot find the controller's action Upload.find`\r\n\r\n\r\n**What is the expected behavior?**\r\nThere shouldn't be an error thrown. I should be able to work with graphql with content types containing fields with any type.\r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**: mongodb\r\n- **Operating system**: macOS High Sierra 10.13.1\r\n\r\n\r\n**What is the current behavior?**\r\nClicking on the eye icons of files in File Upload section will alway open the first file in a new tab.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nUpload three files in File Upload section. Try to click the eye icons of files and check the url of opened files. Sometimes the second file is opened correctly, and the third file never get opened.\r\n\r\n**What is the expected behavior?**\r\nThe corresponding file should be opened when its eye icon is clicked.\r\n\r\n\r\n**Suggested solutions**\r\nI have created a commit [here](https://github.com/henrych4/strapi/commit/18d809ce66c46a363e9d1fd0ffb540d54225b9e2). Basically it is due to same id \"aTag\" for all <a> tags. \r\nhttps://github.com/strapi/strapi/blob/546f389746eb2875405af00555bcaf603d214625/packages/strapi-plugin-upload/admin/src/components/Li/index.js#L106\r\n\r\nWhen eye icon is clicked, it finds and opens the document with id \"aTag\" which is always the first file. Therefore my solution is to set the id to be the hash value of each file and it works as expected.\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.11.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: alpha.14.3\r\n- **Database**: MongoDB 3.6.6\r\n- **Operating system**: MacOS/Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I try to update a one-to-many relation with GraphQL the query fails with the following error:\r\n```\r\n{\r\n\t\"data\": {\r\n\t\t\"updatePage\": null\r\n\t},\r\n\t\"errors\": [{\r\n\t\t\"message\": \"Cannot read property 'toString' of undefined\",\r\n\t\t\"locations\": [{\r\n\t\t\t\"line\": 4,\r\n\t\t\t\"column\": 3\r\n\t\t}],\r\n\t\t\"path\": [\"updatePage\"],\r\n\t\t\"extensions\": {\r\n\t\t\t\"code\": \"INTERNAL_SERVER_ERROR\",\r\n\t\t\t\"exception\": {\r\n\t\t\t\t\"stacktrace\": [\"TypeError: Cannot read property 'toString' of undefined\", \"    at _.differenceWith (/usr/src/api/strapi/node_modules/strapi-hook-mongoose/lib/relations.js:101:36)\", \"    at arrayIncludesWith (/usr/src/api/strapi/node_modules/lodash/lodash.js:617:11)\", \"    at baseDifference (/usr/src/api/strapi/node_modules/lodash/lodash.js:2808:19)\", \"    at Function.<anonymous> (/usr/src/api/strapi/node_modules/lodash/lodash.js:7020:11)\", \"    at apply (/usr/src/api/strapi/node_modules/lodash/lodash.js:475:27)\", \"    at Function.differenceWith (/usr/src/api/strapi/node_modules/lodash/lodash.js:6569:16)\", \"    at params.parseRelationships.Object.keys.reduce (/usr/src/api/strapi/node_modules/strapi-hook-mongoose/lib/relations.js:100:31)\", \"    at Array.reduce (<anonymous>)\", \"    at Function.update [as updateRelations] (/usr/src/api/strapi/node_modules/strapi-hook-mongoose/lib/relations.js:28:129)\", \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"]\r\n\t\t\t}\r\n\t\t}\r\n\t}]\r\n}\r\n```\r\n\r\n**Steps to reproduce the problem**\r\nMy schema is similar to below and the relation between the content types is defined as a \"one-to-many relation\" (Page belongs to many Tags):\r\n\r\n```\r\ntype Page {\r\n  _id: ID!\r\n  tags(sort: String, limit: Int, start: Int, where: JSON): [Tag]\r\n}\r\n\r\ntype Tag {\r\n  _id: ID!\r\n  name: String!\r\n}\r\n```\r\n\r\nAfter inserting a couple of entries for both Page and Tag, I tried to update the list of tags that are related to a specific page. The query looks like below and results in the error mentioned above.\r\n\r\n```\r\nmutation pageUpdateMutation(\r\n  $input: updatePageInput!\r\n) {\r\n  updatePage(input: $input) {\r\n    page {\r\n      _id\r\n      tags {\r\n        _id\r\n        name\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n# variables:\r\n{\r\n  \"input\": {\r\n    \"data\": {\r\n      \"tags\": [\r\n        \"5b28ed8aaaa78d7639050a97\",\r\n        \"5b28ec8e35df4675325e0403\"\r\n      ]\r\n    },\r\n    \"where\": {\r\n      \"id\": \"5b473e1cb4198340e31c19a8\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIf I include other fields like ``name``, that will be updated correctly, just not the ``tags`` field.\r\n\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10\r\n- **npm version**: v6.1\r\n- **Strapi version**: 3.0.0-alpha.14.3\r\n- **Database**: MariaDB 10.2\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nIt seems GraphQL is having an issue in bookshelf if a value is null in a deeply nested query, this results in the response including improper or repeating data.\r\n\r\nGraphQL Query Log Errors:\r\n\r\n```\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cannot read property 'toJSON' of null\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 40,\r\n          \"column\": 9\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"gssites\",\r\n        11,\r\n        \"activeObelisks\",\r\n        3,\r\n        \"activeObelisk\",\r\n        \"gsCodexData\"\r\n      ],\r\n      \"extensions\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"exception\": {\r\n          \"stacktrace\": [\r\n            \"TypeError: Cannot read property 'toJSON' of null\",\r\n            \"    at Function.findOne (/srv/api/capi-dev/plugins/content-manager/config/queries/bookshelf.js:187:25)\",\r\n            \"    at process._tickCallback (internal/process/next_tick.js:68:7)\"\r\n          ]\r\n        }\r\n      }\r\n    },\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nI can provide my full query and my public development server, outside of that it seems the error is pretty straight forward dealing with bookshelf support and graphQL specifically here: `plugins/content-manager/config/queries/bookshelf.js:187:25`\r\n\r\n**What is the expected behavior?**\r\n\r\nGraphQL shouldn't have any errors :wink: \r\n\r\n**Suggested solutions**\r\n\r\nUnsure as I am not familiar with GraphQL or how it looks up data."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v8.11.4\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.14.3<!-- Please make sure you are on the latest version -->\r\n- **Database**: mongodb\r\n- **Operating system**: Ubuntu 18.04.1 LTS\r\n\r\n\r\n**What is the current behavior?**\r\nAdding a content type with a camel cased name (e.g. containing an uppercase letter) breaks the content manager and crud editor.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n- create a product named `sampleContent`, add a string field and save it.\r\n- try to edit it again, a blank page will appear: http://localhost:1337/admin/plugins/content-manager/ctm-configurations/samplecontent.\r\n- also trying to insert a new document in the db won't work, the creation page will display the loading spinner forever  ( http://localhost:1337/admin/plugins/content-manager/samplecontent/create?redirectUrl=/plugins/content-manager/samplecontent?_limit=10&_page=1&_sort=_id&source=content-manager )\r\n\r\n**What is the expected behavior?**\r\n\r\nEverything should work as with lowercased collections.\r\n\r\nHere's the content-manager blank page stacktrace.\r\n\r\n```\r\nTypeError: this.layout is undefined main.js:66\r\n\tvalue main.js:66\r\n\tvalue/< main.js:66\r\n\t../strapi-admin/node_modules/strapi-helper-plugin/node_modules/immutable/dist/immutable.js/</e.exports</We.prototype.__iterate main.js:6\r\n\tforEach main.js:6\r\n\tvalue main.js:66\r\n\te main.js:66\r\n\to/< main.js:60\r\n\tMe main.js:6\r\n\tMe main.js:6\r\n\tMe main.js:6\r\n\tMe main.js:6\r\n\tMe main.js:6\r\n\tMe main.js:6\r\n\t../strapi-admin/node_modules/strapi-helper-plugin/node_modules/immutable/dist/immutable.js/</e.exports</de.prototype.updateIn main.js:6\r\n\to main.js:60\r\n\t./node_modules/strapi-helper-plugin/node_modules/redux-immutable/dist/combineReducers.js/t.default/</</< main.js:76\r\n\tforEach self-hosted:268:13\r\n\t./node_modules/strapi-helper-plugin/node_modules/redux-immutable/dist/combineReducers.js/t.default/</< main.js:76\r\n\t../strapi-admin/node_modules/strapi-helper-plugin/node_modules/immutable/dist/immutable.js/</e.exports</de.prototype.withMutations main.js:6\r\n\t./node_modules/strapi-helper-plugin/node_modules/redux-immutable/dist/combineReducers.js/t.default/< main.js:76\r\n\tc main.js:76\r\n\tr/</</< main.js:76\r\n\te/</< main.js:76\r\n\tr/< main.js:76\r\n\tvalue main.js:60\r\n\ttn main.js:16\r\n\ten main.js:16\r\n\tQo main.js:16\r\n\tsn main.js:16\r\n\tBe main.js:16\r\n\tBe self-hosted:1031:17\r\n```"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.12.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: v3.0.0-alpha.14.3\r\n- **Database**: MongoDB v4.0.2\r\n- **Operating system**: macOS Sierra 10.12.6\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I add a new field after the Content Type is created it isn't visible in its browser but when adding a new object it is. It isn't visible in the Content Manager too.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Create a new Content Type named _test_ in Content Type Builder with a string field called _name_ and save.\r\n2. Go to _Tests_ visible on the left in the menu.\r\n3. The _name_ field is visible.\r\n4. Go to Content Type Builder and edit _test_ Content Type.\r\n5. Add a new number field named _number_ and save.\r\n6. Go to _Tests_ visible on the left in the menu.\r\n7. The _name_ field is visible in the table but _number_ is not.\r\n\r\n\r\n**What is the expected behavior?**\r\nThe _number_ field should be visible as a column in the table.\r\n\r\n\r\n**Suggested solutions**\r\n-"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10\r\n- **npm version**: 6.4.0\r\n- **Strapi version**: 3.0.0-alpha.14.2\r\n- **Database**: MySQL 5.7.23\r\n- **Operating system**: osx10.9 \r\n\r\n\r\n**What is the current behavior?**\r\n\r\nImages / Media are not being returned on relational models.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate 2 models, call one products and the other brands. Have multiple images on a single product and then associate that product to a single brand (one-to-one). Try query the API for brands and the associated products images are not returned or even come back as NULL.\r\n\r\n**What is the expected behavior?**\r\n\r\nAll media and images that are associated to the models should be returned in the response.\r\n\r\n**Suggested solutions**\r\n\r\nSpoken with @derrickmehaffy about this and he also has more clarity on the issue. "},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.11.0\r\n- **npm version**: 6\r\n- **Strapi version**: 3.0.0-alpha.14.2\r\n- **Database**: postgres 10\r\n- **Operating system**: mac\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n* what's working\r\n  * PR [1202: Make type of id configurable](https://github.com/strapi/strapi/pull/1682) made it possible to set uuid type as model's primary key. I'm able to create a model with it's id set to uuid type\r\n* what's not working\r\n  * idAttribute is not working, I've try to set it to `uuid`, but query related to model's relation will not be able to work. The id name of the table should be `uuid`, but it still is `id`. it is not created correctly. I found that it does not respect it when we create the table, in https://github.com/strapi/strapi/blob/master/packages/strapi-hook-bookshelf/lib/index.js#L530\r\n\r\n  * if such model has a relationship, one to one to user, any request to the change of the model failed. got error: \r\n\t\t```\r\n\t\tupdate \"ducks\" set \"id\" = $1, \"message\" = $2, \"user\" = $3, \"updated_at\" = $4 where \"id\" = $5 - invalid input syntax for type uuid:\r\n\t\t \"1\"\r\n\t\t```\r\n   * if such model has a one to many relation with user, for example, user has many ducks. the application enters a strange state, I am not able to login to admin panel anymore. \r\n\r\n   * I've tested deleted user table, and set user's primary key as uuid type. then the whole application won't start anymore. got error:\r\n\r\n```\r\n(node:28889) UnhandledPromiseRejectionWarning: error: invalid input syntax for type uuid: \"1\"\r\n```\r\n\r\nI think the first issue is easy to fix, but the 2, 3, 4 probably has something to do with model relations. any ideas? \r\n\r\n**What is the expected behavior?**\r\n\r\nmodel can have id as uuid field and user can configure it as they want. \r\n\r\n\r\n**Suggested solutions**\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- =============================================================================== -->\r\n<!-- ⚠️ If you are not using the current Strapi release, you will be asked to update. -->\r\n<!-- Please see the wiki for guides on upgrading to the latest release. -->\r\n<!-- =============================================================================== -->\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 10.x.x -->\r\n<!-- npm 6.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.0.0\r\n- **npm version**: 5.5.1\r\n- **Strapi version**: 3.0.0-alpha.14.2\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n\r\n\r\n**What is the current behavior?**\r\nRelation still break after 7 month.  :cry: :cry: :cry: :disappointed: :disappointed: :disappointed: :disappointed_relieved: :disappointed_relieved: :disappointed_relieved: I think it's a critical issue and need to fix soon. It's break all of project with one click. :disappointed: \r\n\r\n**Related issue**\r\n#802 \r\n#886 \r\n#1143\r\n#1237\r\n#1139\r\n#1490 \r\n\r\n**Steps to reproduce the problem**\r\n* Create a content type called `Article`\r\n* Create another content type called `Tag`\r\n* Create a relation between `Article` and `Tag` with `N:N` type.\r\n* Click save button.\r\n* Server crashed now and this is terminal result:\r\n```\r\n[2018-10-08T08:26:08.007Z] info The server is restarting\r\n\r\n[2018-10-08T08:26:11.534Z] error Something went wrong in the model `Article` with the attribute `tags`\r\n[2018-10-08T08:26:11.538Z] error The attribute `articles` is missing in the model Tag\r\n```\r\n\r\n\r\n**What is the expected behavior?**\r\nCreate `N:N` and `1:N` relation without headache.\r\n\r\n\r\n**Suggested solutions**\r\nFix it as you done it later in: #1490 \r\n\r\n**/CC:** @soupette @Aurelsicoko @lauriejim @derrickmehaffy @Pritoj"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v9.11.1\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MongoDB v4.0.1\r\n- **Operating system**: Alpine Linux v3.6\r\n\r\n\r\n**What is the current behavior?**\r\nWhen attempting to assign entries from a related collection to an entry in the content manager ui, only the first 20 entries from that related collection are available to be assigned.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- Create two content types in content type builder\r\n- Create a \"many-to-many\" relation between content type \"a\" and content type \"b\" in content type builder\r\n- Populate content type \"b\" with 20+ entries\r\n- Using content manager from admin ui, create an entry in content type \"a\" and attempt to assign related values from content type \"b\"\r\n- there is a limit of 20 entries to choose from \r\n\r\n\r\n**What is the expected behavior?**\r\nWhen trying to assign entries from a related content type while using the content manager ui, all values from related collection should be discoverable and assignable, not limited to 20.\r\n\r\n\r\n**Suggested solutions**\r\nWhen editing or creating a new entry for a content type, the content manager plugin will pull in the top 20 entries for each select menu associated with a *-to-many related collection. \r\n\r\nThe URL the plugin uses to make the request looks like this for each related collection field:\r\n`http://localhost:1337/content-manager/explorer/story?_limit=20&_start=0&source=content-manager`\r\n\r\nThe limit should be removed. But for very large collections this would maybe be a bottleneck. So, there should be some lazy loading or an ability to do text searches against the api and populate options based on that.\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **npm version**: .6.2.0\r\n- **Strapi version**: alpha 13.1 (didn't see any relevant fixes in 14.1?)\r\n- **Database**: **pg**\r\n- **Operating system**: WSL/Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nMaybe related to #1911 - mongoDB version of this issue.\r\n\r\nwhen asking for properties nested 3-4 levels deep, I get the following error:\r\n\r\n![image](https://user-images.githubusercontent.com/2950505/45945955-8ee10280-bfef-11e8-86b6-1c75b3ed7f7b.png)\r\n\r\nIt looks like the context is lost for these then.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate models with relations\r\nUse a related objects property\r\n\r\n**What is the expected behavior?**\r\n\r\nDisplay the properties no matter how nested\r\n\r\n**Suggested solutions**\r\n\r\n#1911 should be a similar problem, with the same implementation in the bookshelf code.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 9.11.1 \r\n- **npm version**: 5.6.0\r\n- **Strapi version**: Any older version \r\n- **Database**: not relevant\r\n- **Operating system**: not relevant\r\n\r\n\r\n**What is the current behavior?**\r\nIf you have strapi installed with an older version and try to init a new project. The root Project and the admin Panel would have the same version as the globally installed strapi but all the plugins are installed with the newest available version. This makes the system not working properly and leads to crashes.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n- Install an older version of Strapi\r\n- Init a new Project with it\r\n- You will see that the plugins using newest version and in the admin panel you will notice that you cannot add for example a new type properly and so on.\r\n\r\n**What is the expected behavior?**\r\nStrapi should use the version of root project for all strapi related dependencies to avoid this problems.\r\n\r\n\r\n**Suggested solutions**\r\nStrapi should use the version of root project for all strapi related dependencies\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.11.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.1.1\r\n- **Database**: Mlab.com Sandbox\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I use the cloudinary provider, for some reason it does not store the public_id from the upload in the mongo object, this makes it so that when I try to delete an image from the database I'm given an error because public_id doesn't exist inside of the object.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nStart a new project and implement the cloudinary provider, upload and image and see if public_id appears in the object.\r\n\r\n\r\n**What is the expected behavior?**\r\nWhen you upload the image, public_id should be an attribute of the object to allow deletion of an image\r\n\r\n\r\n**Suggested solutions**\r\nI have not been able to find the source of the issue so I don't have an idea as of now.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.5\r\n- **npm version**: 6.1.0\r\n- **Strapi version**: Alpha 14\r\n- **Database**: MongoDB v3.6.5\r\n- **Operating system**: Amazon Linux AMI release 2018.03\r\n\r\n\r\n**What is the current behavior?**\r\nWhen sending a POST request to a model with empty decimal fields inside saves the object\r\n`{\r\n   kind: \"The value you passed should be number\"\r\n   message: \"Cast to The value you passed should be number failed for value \"undefined\" at path \"undefined\"\"\r\n   name: \"CastError\"\r\n   stringValue: \"\"undefined\"\"\r\n}` instead of null. If the field is integer instead of decimal there's no problem.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nJust create a model with a decimal field and make a POST request to it without sending any data to this field.\r\n\r\n\r\n**What is the expected behavior?**\r\nIf the field is sent empty it should be filled with null, like every other data type.\r\n\r\n\r\n**Suggested solutions**\r\nIt seems to be a problem with the decimal data type and Mongoose but I don't know how to fix it.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.7.0 \r\n- **npm version**: 6.4.0\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: mongo\r\n- **Operating system**: ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I try to delete a file from the *File Upload* tab,  it fails. This is happening for the `strapi-upload-aws-s3` plugin.\r\nLogs: \r\n```\r\nMissingRequiredParameter: Missing required key 'Delete' in params\r\nUnexpectedParameter: Unexpected key 'Key' found in params\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n1. Create an strapi app\r\n2. Create a model that holds a collection of images\r\n3. Upload photos to an entity\r\n4. Go to the File Upload that\r\n5.  Try to delete an image\r\n6. An error appears \r\n\r\n\r\n**What is the expected behavior?**\r\n1. Create an strapi app\r\n2. Create a model that holds a collection of images\r\n3. Upload photos to an entity\r\n4. Go to the File Upload that\r\n5.  Try to delete an image\r\n6. The image is deleted\r\n\r\n\r\n**Suggested solutions**\r\nI found the line and the solution for this. But unfortunately, I don't have time to create a dev environment and submit a pull request.\r\nThis is the code to fix:\r\n```\r\n      delete: (file) => {\r\n        return new Promise((resolve, reject) => {\r\n          // delete file on S3 bucket\r\n          const path = file.path ? `${file.path}/` : '';\r\n          S3.deleteObjects({\r\n            Key: `${path}${file.hash}${file.ext}`\r\n          }, (err, data) => {\r\n            if (err) {\r\n              return reject(err);\r\n            }\r\n\r\n            resolve();\r\n          });\r\n        });\r\n      }\r\n```\r\nThis is the fix:\r\n```\r\n      delete: (file) => {\r\n        return new Promise((resolve, reject) => {\r\n          // delete file on S3 bucket\r\n          const path = file.path ? `${file.path}/` : '';\r\n          S3.deleteObjects({\r\n            Delete: {\r\n              Objects: [\r\n                {\r\n                  Key: `${path}${file.hash}${file.ext}`\r\n                }\r\n              ]\r\n            }\r\n        }, (err, data) => {\r\n            if (err) {\r\n              return reject(err);\r\n            }\r\n\r\n            resolve();\r\n          });\r\n        });\r\n      }\r\n```\r\nMore context from S3 sdk documentation: https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#deleteObjects-property\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ISSUE TEMPLATE -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  v9.10.1\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: mongodb\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\nCan not leave JSON fields empty when using Content Manager. It keeps reminding 'This doesn't match JSON format'.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Add a new field in JSON format in Content Type Builder.\r\n2. Open in Content Manager and save.\r\n\r\n![wx20180919-151221](https://user-images.githubusercontent.com/3782817/45784824-15c46280-bc1f-11e8-9e4d-fd9cfb668f96.png)\r\n\r\n\r\n**What is the expected behavior?**\r\nI expect JSON format fields support null or undefined, just like other formats. Thanks.\r\n\r\n\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n\r\n\r\n<!-- FEATURE REQUEST TEMPLATE -->\r\n\r\n<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.1.1\r\n- **Database**: postgres v10.5\r\n- **Operating system**: macOS High Sierra\r\n\r\n\r\n**What is the current behavior?**\r\nWhen using content-manager to Edit/Add entries with fields of `date` type, either up or down arrow of the `hour` will cause the value `hour` to decrease by 7 on releasing mouse button.\r\n\r\n**Steps to reproduce the problem**\r\nAdd a Content Type with a field of type `date`. Then edit or add entries in Content Manager\r\n\r\n\r\n**What is the expected behavior?**\r\nFunction normally as a time picker should.\r\n\r\n\r\n\r\n**Suggested solutions**\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: `10.4.0` (replicable in `8.9.4` and `9.9.0`)\r\n- **npm version**: `6.2.0` (also used `5.6.0`)\r\n- **Strapi version**: `3.0.0-alpha.14`\r\n- **Database**: MongoDB\r\n- **Operating system**: macOS Sierra\r\n\r\n\r\n**What is the current behavior?**\r\nHitting the `/email` API calls the `send` action in `plugins/email/controllers/Email.js` rather than its own controller within `api/email/controllers/Email.js`.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nCreate an email API using `strapi generate:api email`. Then, edit the newly generated `routes.json` to target a `send` action within its controller. \r\n\r\n```\r\n{\r\n  \"routes\": [\r\n    {\r\n      \"method\": \"POST\",\r\n      \"path\": \"/email\",\r\n      \"handler\": \"Email.send\",\r\n      \"config\": {\r\n        \"policies\": []\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\nNow create a new `send` action within `api/email/controllers/Email.js`. \r\n```\r\n// within 'api/email/controllers/Email.js'\r\nmodule.exports = {\r\n  send: async (ctx) => {\r\n    console.log(\"This is not called\")\r\n  }\r\n}\r\n```\r\nAny code within this action will not be called rather the call goes directly to the `send` action in  `plugins/email/controllers/Email.js` even though we have explicitly specified in the `routes.json` to make use of `send` within the controller of that specific API.\r\n\r\n**What is the expected behavior?**\r\nAs the `routes.json` is specified to call the `send` action within its own controller, the call should be going to `send` in `api/email/controllers/Email.js`.\r\n\r\n**Suggested solutions**\r\nNo suggested solutions.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 9.11.2\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: Master branch\r\n- **Database**: n/a\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nany commands that run the clean or clean:all scripts fail on windows because they run \"rm\"\r\n\r\n**Steps to reproduce the problem**\r\n\r\nrun `npm clean` on windows\r\n\r\n**What is the expected behavior?**\r\n\r\nclean script completes correctly\r\n\r\n**Suggested solutions**\r\n\r\nSwitch to a cross-platform npm module like rimraf.\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 8.12.0/9.11.2\r\n- **npm version**: 6.4.1/5.6.0\r\n- **Strapi version**: alpha14\r\n- **Database**: Mongo\r\n- **Operating system**: Windows 10\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n`Strapi new` connection test fails when creating a mongodb project. The CLI also reports it as a success.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nSince `strapi new` is currently broken in node 9 on windows, use the CLI to init a project\r\n```\r\nPS C:\\newsync\\Projects\\RestaurantApp\\app> strapi new server --dbclient=mongo --dbhost=lcalhost --dbport=27017 --dbname=\"mydb\" --dbusername=\"\" --dbpassword=\"\"\r\n🚀 Start creating your Strapi application. It might take a minute, please take a coffee ☕️\r\n\r\nLets configurate the connection to your database:\r\nDatabase determined by CLI args: mongo\r\n\r\n⏳ Testing database connection...\r\n{ <strong>Error: Cannot find module 'C:\\Users\\Nick\\AppData\\Local\\Temp\\strapifd3e9ff2ccd8\\node_modules\\mongoose'</strong>\r\n    at Function.Module._resolveFilename (module.js:548:15)\r\n    at Function.Module._load (module.js:475:25)\r\n    at Module.require (module.js:597:17)\r\n    at require (internal/module.js:11:18)\r\n    at module.exports (C:\\Users\\Nick\\AppData\\Local\\Temp\\strapifd3e9ff2ccd8\\node_modules\\strapi-hook-mongoose\\lib\\utils\\connectivity.js:8:20)\r\n    at Promise.all.then (C:\\Users\\Nick\\AppData\\Roaming\\npm\\node_modules\\strapi\\node_modules\\strapi-generate-new\\lib\\before.js:259:126)\r\n    at <anonymous>\r\n    at process._tickDomainCallback (internal/process/next_tick.js:229:7) code: 'MODULE_NOT_FOUND' }\r\n<strong>The app has been connected to the database successfully!</strong>\r\n\r\n🏗  Application generation:\r\n√ Copy dashboard\r\n√ Install plugin settings-manager.\r\n√ Install plugin content-type-builder.\r\n√ Install plugin content-manager.\r\n√ Install plugin users-permissions.\r\n√ Install plugin email.\r\n√ Install plugin upload.\r\n√ Link strapi dependency to the project.\r\n\r\n👌 Your new application server is ready at C:\\newsync\\Projects\\RestaurantApp\\app\\server.\r\n\r\n⚡️ Change directory:\r\n$ cd server\r\n\r\n⚡️ Start application:\r\n$ strapi start\r\n```\r\n\r\nFirst we have the path that is executed\r\n![image](https://user-images.githubusercontent.com/7891759/45462761-d3ef6580-b6ce-11e8-963b-faf2d89efc8f.png)\r\n\r\nIn connectivity.js\r\n![image](https://user-images.githubusercontent.com/7891759/45463332-4feaad00-b6d1-11e8-8c4d-81d3f57d131c.png)\r\n\r\n\r\nBut the structure is\r\n<pre>\r\n${tempPath}/node_modules/\r\n    strapi-hook-mongoose/\r\n       lib/\r\n       package.json\r\n       ...some other stuff\r\n       node_modules/\r\n           ...a bunch of modules... including\r\n           <strong>mongoose/</strong>\r\n</pre>\r\n\r\n**What is the expected behavior?**\r\n\r\n1. Mongoose is imported correctly and the project is created correctly.\r\n2. When something errors, the success callback shouldn't be called...\r\n\r\n\r\n\r\n**Suggested solutions**\r\n\r\nWhy do we even need to do some hacky path building to require mongoose? part of the whole point of require is that it's relative to the module. Just `require('mongoose')` should be fine right?"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14.1\r\n- **Database**: 10.2.17-MariaDB\r\n- **Operating system**: Linux Mint 19 // Ubuntu Server 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nAfter installing GraphQL plugin the AdminUI will no longer load other plugins, below is a screenshot of a fresh v14.1 project (right) and my upgraded project with graphql installed (left)\r\n\r\n![image 1](https://user-images.githubusercontent.com/8593673/45454972-6a556400-b69a-11e8-812f-5d3f1969ca01.png)\r\n\r\n\r\nAfter removing the graphql plugin the adminUI loads all the plugins and functions normally.\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a Strapi v14.1 project, start it, create user, confirm adminUI works ~~(with bookshelf)~~\r\n\r\nKill server, install graphql plugin and start (note that the plugins no longer load, login page also isn't shown)\r\n\r\nKill Server and remove graphql plugin, restart to confirm adminUI goes back to normal.\r\n\r\n**What is the expected behavior?**\r\n\r\nGraphQL should not cause the other plugins to fail.  \r\n\r\n**Suggested solutions**\r\n\r\n~~issue likely stems from recent additions to graphql for mongoose only, and not for bookshelf. These features likely aren't being disabled and are failing to load properly.~~\r\n\r\n**note** will provide more feedback in a few hours when I can work with @soupette to figure this out.\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: latest\r\n- **npm version**: latest\r\n- **Strapi version**: 3.00@alpha14\r\n- **Database**: MongoDB latest stable with GraphQL API\r\n- **Operating system**: Linux Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nConfiguration Server Host IP does not get saved. When I change the IP and save settings it automatically resets back to localhost. This is a problem as I am trying to develop using a digital ocean server instance so that my team can all use the same database, but it also means that email confirmation will not work because the auth link is always set to localhost:1337.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Go to configurations\r\n2. Server\r\n3. enter new IP in IP field\r\n4. Click save\r\n5. Bug appears\r\n\r\n**What is the expected behavior?**\r\nIt should update to what is inputed\r\n\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.10.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: 10.2.17-MariaDB\r\n- **Operating system**: Linux Mint 19 (Ubuntu 18.04)\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nCurrently attempting to filter on a boolean value always returns an empty array `[ ]`\r\n\r\n**Note** Attempting to use 0 or 1 also does not work.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a model with a boolean value on MySQL and add some entries, attempt to filter on them.\r\n\r\nAs an example you can use my development server here: https://api.canonn.tech:2083/bmreport\r\n\r\nAttempt to filter for `added` = `false`\r\n\r\nhttps://api.canonn.tech:2083/bmreport?added=false\r\n\r\n**What is the expected behavior?**\r\n\r\nYou should be able to filter on boolean values\r\n\r\n**Suggested solutions**\r\n\r\nUnsure what the reason is\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.0.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: mongo 3.6.6\r\n- **Operating system**: macOS High Sierra 10.13.6\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nSingle objects located deeper than 2 levels doesn't seem to be populated properly when querying using GraphQL. The error message I get is:\r\n```\r\nCastError: Cast to ObjectId failed for value \"<Buffer 5b 91 41 22 c6 a9 5a 32 af bf 32 ae>\" at path \"_id\" for model \"Genre\"\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. Create 3 object types, ``Character``, ``Movie`` and ``Genre``.\r\n2. Add relationships:\r\n - \"Character belongs to many movies\"\r\n - \"Movie has one Genre\"\r\n3. Add a name-field for each object and set it to respectively; \"Luke\", \"Star Wars\" and \"Sci-Fi\"\r\n4. In /api/character/services/Character.js make sure nested objects are populated:\r\n```\r\nfetchAll: (params) => {\r\n    const filters = strapi.utils.models.convertParams('character', params);\r\n    const populate = Character.associations\r\n      .filter(ast => ast.autoPopulate !== false)\r\n      .map(ast => ast.alias)\r\n      .join(' ');\r\n\r\n    return Character\r\n      .find()\r\n      .where(filters.where)\r\n      .sort(filters.sort)\r\n      .skip(filters.start)\r\n      .limit(filters.limit)\r\n      .populate(populate)\r\n      \r\n\t// Populate nested objects <---------\r\n\t.populate({\r\n        path: 'movies',\r\n        populate: {\r\n          path: 'genre',\r\n        },\r\n      });\r\n  },\r\n```\r\n5. Go to ``http://localhost:1337/character ``. Nested objects gets properly populated as below:\r\n```\r\n[{\r\n\tname: \"Luke Skywalker\",\r\n\t_id: \"5b91414bc6a95a32afbf32b0\",\r\n\tcreatedAt: \"2018-09-06T15:01:31.722Z\",\r\n\tupdatedAt: \"2018-09-06T15:25:15.067Z\",\r\n\t__v: 0,\r\n\tid: \"5b91414bc6a95a32afbf32b0\",\r\n\tmovies: [{\r\n\t\tname: \"Star Wars\",\r\n\t\t_id: \"5b914532be604834a846a6e2\",\r\n\t\tcreatedAt: \"2018-09-06T15:18:10.018Z\",\r\n\t\tupdatedAt: \"2018-09-06T15:22:08.216Z\",\r\n\t\t__v: 0,\r\n\t\tid: \"5b914532be604834a846a6e2\",\r\n\t\tcharacter: \"5b91414bc6a95a32afbf32b0\",\r\n\t\tgenre: {\r\n\t\t\tname: \"Sci-Fi\",\r\n\t\t\t_id: \"5b914122c6a95a32afbf32ae\",\r\n\t\t\tcreatedAt: \"2018-09-06T15:00:50.246Z\",\r\n\t\t\tupdatedAt: \"2018-09-06T15:18:10.720Z\",\r\n\t\t\t__v: 0,\r\n\t\t\tid: \"5b914122c6a95a32afbf32ae\",\r\n\t\t\tmovie: \"5b914532be604834a846a6e2\"\r\n\t\t}\r\n\t}]\r\n}]\r\n```\r\n6. Now go to ``http://localhost:1337/playground`` and the query ...\r\n```\r\nquery {\r\n  characters {\r\n    name\r\n    movies {\r\n      name\r\n      genre {\r\n        name\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n... results in the following error:\r\n\r\n```\r\n{\r\n  \"data\": {\r\n    \"characters\": [\r\n      {\r\n        \"name\": \"Luke Skywalker\",\r\n        \"movies\": [\r\n          {\r\n            \"name\": \"Star Wars\",\r\n            \"genre\": null\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  \"errors\": [\r\n    {\r\n      \"message\": \"Cast to ObjectId failed for value \\\"<Buffer 5b 91 41 22 c6 a9 5a 32 af bf 32 ae>\\\" at path \\\"_id\\\" for model \\\"Genre\\\"\",\r\n      \"locations\": [\r\n        {\r\n          \"line\": 6,\r\n          \"column\": 7\r\n        }\r\n      ],\r\n      \"path\": [\r\n        \"characters\",\r\n        0,\r\n        \"movies\",\r\n        0,\r\n        \"genre\"\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nAlso, if the movies-genre relationship is changed to \"Movie belongs to many genres\", the query above works!\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.11.2\r\n- **npm version**: v5.6.0\r\n- **Strapi version**: v3.0.0-alpha.14\r\n- **Database**: mongodb v3.6.3\r\n- **Operating system**: Ubuntu 18.04 LTS (on VirtualBox)\r\n\r\n\r\n**What is the current behavior?**\r\nWe receive 500 error code on attempt to re-create content type with old name which recently was removed\r\n\r\n\r\n**Steps to reproduce the problem**\r\n1. Start empty project and login with admin account\r\n2. Create Content Type with name \"test1\" (and String filed with name \"Name\") through \"Content Type Builder\"\r\n3. Remove \"test1\" Content Type\r\n4. Try to create Content Type with name \"test1\" (and Number filed with name \"Priority\") through \"Content Type Builder\"\r\n\r\n\r\n**What is the expected behavior?**\r\nWe should be able to re-create content type with old name\r\n\r\n\r\n**Suggested solutions**\r\n- \r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.9.0\r\n- **npm version**: 6.2.0\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MongoDB v3.4.16\r\n- **Operating system**: CentOS Linux release 7.5.1804 (on AWS Lightsail) \r\n\r\n\r\n**What is the current behavior?**\r\nOnce I created content type w/ 'Name' field contains any white-spaces at Content Type Builder, then it freeze completely at loading status when I try to add new content. \r\n\r\n**What is the expected behavior?**\r\nPreferred: Warn 'Name contains invalid character' or something before create the content type at Builder, and fail to create record.\r\n\r\n**Suggested solutions**\r\nInsert no spaces when input a name of content type.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **npm version**: .6.2.0\r\n- **Strapi version**: alpha 13.1\r\n- **Database**: **pg**\r\n- **Operating system**: WSL/Ubuntu\r\n\r\n**What is the current behavior?**\r\n\r\nThe count for users on the overview is wrong. This is probably a problem with bookshelf/mysql/postgres.\r\n\r\n![image](https://user-images.githubusercontent.com/2950505/45014955-79943c00-b020-11e8-85fe-9a4ace7b6547.png)\r\n\r\nThis is especially meaningless for guests.\r\n\r\n**However**\r\n\r\nIf I click on detail view, I get only one user: \r\n\r\n![image](https://user-images.githubusercontent.com/2950505/45015461-12778700-b022-11e8-9001-8bf4291f9357.png)\r\n\r\nNow if I add the user instead to `admin` instead of authenticated, the overview just shows the total amount of globally existing users, but not per role.\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- create a second user\r\n- check overview\r\n\r\n**What is the expected behavior?**\r\n\r\n- show 1 for guest - always\r\n- show 1 for authenticated\r\n- show 1 for admins\r\n\r\n**Suggested solutions**\r\n\r\nIs there something wrong with the `count` function/rest call in pg/mysql? that is where I would first investigate.\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.11.1\r\n- **npm version**: 6.4.0\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: mongo:4.0.1\r\n- **Operating system**: OSX 10.13.6\r\n\r\n\r\n**What is the current behavior?**\r\nThe policies are not executed in my graphql custom schema\r\n\r\n\r\n**Steps to reproduce the problem**\r\nThis is my schema.graphql into api/contacts/config/\r\n```js\r\nmodule.exports = {\r\n  definition: `\r\n    type Contacts {\r\n      count: Int!\r\n      rows: [Contact]!\r\n    }\r\n  `,\r\n  query: `\r\n    _contacts(sort: String, limit: Int, start: Int, where: JSON): Contacts\r\n  `,\r\n  resolver: {\r\n    Query: {\r\n      _contacts: {\r\n        description: `Contacts`,\r\n        policy: ['plugins.users-permissions.isAuthenticated'],  // <-------\r\n        resolver: async (obj, options, ctx) => {\r\n          let params = {\r\n            _limit: options.limit ? options.limit : 10,\r\n            _sort: options.sort ? options.sort : '',\r\n            _start: options.start ? options.start : 0\r\n          }\r\n\r\n          if ( options.where ) {\r\n            params = Object.assign(params, { ...options.where })\r\n          }\r\n\r\n          const rows = await strapi.services.contact.fetchAll(params);\r\n          const count = await strapi.services.contact.count(params);\r\n          return { count, rows };\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\nThe policy executed\r\n\r\n\r\n**Suggested solutions**\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.9.0\r\n- **npm version**: 6.4.1\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MariaDB 10 \r\n- **Operating system**: Ubuntu 16.04\r\n\r\n**Issue**\r\nIn a scenario where you have more than one ManyToMany relation with the same table usin a Relational database such as MySql, the ContentManager make a wrong SQL that may delete the date from the wrong table. The problem is than the engine get wrongly the name of ManyToMany relation SQL table.\r\n\r\n**Steps to reproduce the problem**\r\nCreate Content Types: Company, People, Takeover\r\n- A Company have more people as Investors (ManyToMany Relation)\r\n- A Takeover have more people as Investors (ManyToMany Relation)\r\n\r\nIf I delete an Investor in Company it should use the table company_investors to delete the record, instead it delete from the table operation_investors !!! \r\n\r\nThe problem is exactly that both Entities have the same ManyToMany Relation field \"Investors\", if you rename the relation field it works right.\r\n\r\nWrong SQL, delete ALL occurrences!! : \r\n`delete from `takeover_investors` where `pmi_id` = ?'`\r\n\r\n**What is the expected behavior?**\r\n\r\nExpected SQL:\r\n`delete from `company_investors` where `pmi_id` = ?' and `company_id` = ?'`\r\n\r\n\r\n**Suggested solutions**\r\n\r\nCheck the function that return the relation table name ad Fix it\r\n\r\n**Json Schema to reproduce the Issue**\r\nTable: **Company**\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"companies\",\r\n  \"info\": {\r\n    \"name\": \"company\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true,\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"Name\": {\r\n      \"default\": \"\",\r\n      \"type\": \"string\"\r\n    },\r\n    \"investors\": {\r\n      \"collection\": \"people\",\r\n      \"via\": \"companies\",\r\n      \"dominant\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nTable: **People**\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"people\",\r\n  \"info\": {\r\n    \"name\": \"people\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true,\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"Name\": {\r\n      \"default\": \"\",\r\n      \"type\": \"string\"\r\n    },\r\n    \"Email\": {\r\n      \"default\": \"\",\r\n      \"type\": \"email\"\r\n    },\r\n    \"takeOvers\": {\r\n      \"collection\": \"takeover\",\r\n      \"via\": \"investors\"\r\n    },\r\n    \"companies\": {\r\n      \"collection\": \"company\",\r\n      \"via\": \"investors\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nTable: **Takeover**\r\n```\r\n{\r\n  \"connection\": \"default\",\r\n  \"collectionName\": \"takeovers\",\r\n  \"info\": {\r\n    \"name\": \"takeover\",\r\n    \"description\": \"\"\r\n  },\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"timestamps\": true,\r\n    \"comment\": \"\"\r\n  },\r\n  \"attributes\": {\r\n    \"Date\": {\r\n      \"default\": \"\",\r\n      \"type\": \"date\"\r\n    },\r\n    \"investors\": {\r\n      \"collection\": \"people\",\r\n      \"via\": \"takeOvers\",\r\n      \"dominant\": true\r\n    },\r\n    \"Description\": {\r\n      \"default\": \"\",\r\n      \"type\": \"string\"\r\n    }\r\n  }\r\n}\r\n```"},{"labels":[null,"bug"],"text":"**Informations**\r\n- Node v10.6.0\r\n- NPM 6.1.0\r\n- Strapi 3.0.0-alpha.14 (current tested) / 3.0.0-alpha.13 (tested too)\r\n- Mongo v4.0.0\r\n- Mac OSX 10.13.6\r\n\r\n\r\n**Issue**\r\nTrying to use any method from `mongoose` into model hook returns unexpected results. Running `Model.remove({ _id: model.id })` returns `{ n:0, ok:1 }` or `Model.findOne({ _id: model.id })` returns `null`. I wanted to confirm my queries were correct so i started strapi with `DEBUG=mquery*` and noticed the same queries are being run when i delete stuff from admin but there it works.\r\n\r\nLog from model hook:\r\n`mquery remove project { _id: 5b8d242c8ed455254a124969 } {} +12ms`\r\n\r\nLog after deleting from admin:\r\n`mquery remove project { _id: 5b8d242c8ed455254a124969 } {} +2ms`\r\n\r\n**Steps to reproduce the problem**\r\nin `afterCreate` hook of any model:\r\n```\r\n// After creating a value.\r\n// Fired after an `insert` query.\r\nafterCreate: async (model) => {\r\n  const res = await Model.remove({ _id: model.id || model._id });\r\n  console.log(res); // { n:0, ok: 1 }\r\n}\r\n```\r\n**What is the expected behavior?**\r\nAll methods called from global model should run correctly.\r\n```\r\n// After creating a value.\r\n// Fired after an `insert` query.\r\nafterCreate: async (model) => {\r\n  const res = await Model.remove({ _id: model.id || model._id });\r\n  console.log(res); // { n:1, ok: 1 }\r\n}\r\n```\r\n\r\n\r\n**Suggested solutions**\r\nStill investigating this odd issue as the query looks exactly the same but dont get the reason why it works for admin by using `strapi.query().deleteOne()` and not `Model.deleteOne()` for example."},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 9.11.2\r\n- **npm version**:  5.6.0\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MySQL\r\n- **Operating system**: Ubuntu 16.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen registering a new user the server crashes:\r\n\r\n```\r\nTypeError: Cannot read property 'unique_email' of undefined\r\n    at register (app/plugins/users-permissions/controllers/Auth.js:288:106)\r\n    at <anonymous>\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nThe request coded below will cause the error on the server.\r\n\r\n```\r\nfetch('https://<host>/auth/local/register', {\r\n  body:\"{\\\"username\\\":\\\"a@a.com\\\",\\\"email\\\":\\\"a@a.com\\\",\\\"password\\\":\\\"aa\\\"}\",\r\n  method: \"POST\",\r\n  headers: {\r\n    \"Content-Type\":\"application/json\"\r\n  }\r\n})\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nThat the server successfully creates a new user.\r\n\r\n**Suggested solutions**\r\n\r\n--\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n![image](https://user-images.githubusercontent.com/19570043/44961820-9bee6280-af17-11e8-89fc-df0012f58a3b.png)\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\nNode 9.11.1\r\n<!-- npm 5.x.x -->\r\nNpm 6.4.1\r\n<!-- The latest version of Strapi. -->\r\nAlpha 14\r\n\r\n**Informations**\r\n- **Node.js version**:\r\n- **npm version**:\r\n- **Strapi version**:\r\n- **Database**:\r\n- **Operating system**:\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\n\r\n\r\n**Suggested solutions**\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.9.0\r\n- **npm version**:  - (yarn was used, more to come here)\r\n- **Strapi version**: 3.0.0 alpha\r\n- **Database**: Postgres\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n**What is the current behavior?**\r\n\r\nPlugin directory creation fails while running `strapi new app_name`. App can still be run even when the installation succeed while failing plugin installation steps, the plugins cannot be installed from the market place.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nInstall strapi using `yarn global add strapi@alpha` and then `strapi new app_name` and follow the on-screen instructions\r\n\r\n**What is the expected behavior?**\r\n\r\nShould succeed in creating the plugins directory and install the standard set of plugins\r\n\r\n**Suggested solutions**\r\n\r\nThe `pluginPath` variable needs to be set correctly if the app is not installed using npm.\r\n\r\nhttps://github.com/strapi/strapi/blob/f5eae7d4c226017e8a5d975a907ada04360cd7fe/packages/strapi/bin/strapi-install.js#L61-L67\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.11.2\r\n- **npm version**:5.6.0\r\n- **Strapi version**: 3.0.0-alpha-14\r\n- **Database**: MySQL\r\n- **Operating system**: Ubuntu 16.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nrequest_uri for the facebook provider is generated with http. http uris are rejected by facebook (except localhost uris for dev)\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nSetup facebook provider and send GET <host>/connect/facebook\r\n\r\n**What is the expected behavior?**\r\n\r\nrequest_uri is accepted by facebook.\r\n\r\n**Suggested solutions**\r\n\r\nUse a configurable protocol instead of an hard coded one in `plugins/users-permissions/controllers/Auth.js` in the following lines:\r\n\r\n```\r\n_.defaultsDeep(grantConfig, {\r\n      server: {\r\n        protocol: 'http',\r\n        host: `${strapi.config.currentEnvironment.server.host}:${strapi.config.currentEnvironment.server.port}`\r\n      }\r\n});\r\n```\r\n\r\n\r\nI tried just hard coding https so that facebook accepts the request_uri, but it will trigger another error down the line in the `plugins/users-permissions/services/Providers.js`. More specifically in the following lines:\r\n\r\n```\r\nconst users = await strapi.query('user', 'users-permissions').find({\r\n          where: {\r\n            email: profile.email\r\n          }\r\n});\r\n```\r\n\r\nIt will throw an object as error that is caught and passed to the reject function. The error object is empty so I have no idea for what might be the cause.\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.1.0\r\n- **npm version**: 6.0.1\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n\r\n\r\n**What is the current behavior?**\r\nCreating a new entry containing a *date* field returns the error:\r\n```\r\nCastError: Cast to date failed for value \"o\" at path \"date\"\r\n```\r\nwhich is otherwise not easily debuggable because the error gets catched [here](https://github.com/strapi/strapi/blob/60a7e99d11a2ac15317c7aeb378dec5022fb7776/packages/strapi-plugin-content-manager/config/queries/mongoose.js#L111) displaying: \r\n```\r\nThis Cast,to,date,failed,for,value,o,at,path,date is already taken\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n- Create a new *Type* using the *Content Type Builder*\r\n- Add a *date* field\r\n- Create a new *Entry* of the new *Type*\r\n- Fill out the input fields\r\n- Click on *Save*\r\n\r\n**What is the expected behavior?**\r\nThe new entry gets created\r\n\r\n**Suggested solutions**\r\nMaybe this error printed in the console will help further:\r\n```\r\nDeprecation warning: value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\r\n```\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.1.0\r\n- **npm version**: 6.0.1\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: MongoDB\r\n- **Operating system**: Linux\r\n\r\n\r\n**What is the current behavior?**\r\nCreating a new entry containing a *float* field returns the error:\r\n```\r\nError:  not a valid Decimal128 string\r\n```\r\nwhich is otherwise not easily debuggable because the error gets catched [here](https://github.com/strapi/strapi/blob/60a7e99d11a2ac15317c7aeb378dec5022fb7776/packages/strapi-plugin-content-manager/config/queries/mongoose.js#L111) displaying: \r\n```\r\nThis not,a,valid,Decimal,128,string is already taken\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n- Create a new *Type* using the *Content Type Builder*\r\n- Add a *float* field\r\n- Create a new *Entry* of the new *Type*\r\n- Fill out the input fields\r\n- Click on *Save*\r\n\r\n**What is the expected behavior?**\r\nThe new entry gets created\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:\r\nv9.11.2\r\n- **npm version**:\r\n5.6.0\r\n- **Strapi version**:\r\n3.0.0-alpha.14\r\n\r\n- **Database**:\r\nMongodb\r\n\r\n- **Operating system**:\r\nUbuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen posting to ``/email``, I get a server error on the client. The server error is the following:\r\n\r\n```\r\nServices: { getProviderConfig: [AsyncFunction: getProviderConfig],\r\n  send: [AsyncFunction: send] }\r\nTypeError: strapi.plugins.email.services.send is not a function\r\n    at send (/home/henri/Documents/2018/content-manager/plugins/email/controllers/Email.js:35:41)\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:182:7)\r\n```\r\n\r\n\r\n**Steps to reproduce the problem**\r\nInstall Strapi\r\nUse postman and pots to ``/email``\r\n\r\n\r\n**What is the expected behavior?**\r\nSending the email\r\n\r\n\r\n**Suggested solutions**\r\nI just added replace the following line in ``/plugins/email/controllers/Email.js``\r\n```js\r\nawait strapi.plugins.email.services.send(options, config);\r\n```\r\nby\r\n```js\r\nawait strapi.plugins.email.services.email.send(options, config);\r\n```\r\nAnd it works like a charm. Didn't check any further.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 8.11.1\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: v3.0.0-alpha.14\r\n- **Database**: postgress\r\n- **Operating system**: windows 10\r\n\r\n\r\n**What is the current behavior?**\r\nDisplay fields component just closes (without filed hiding) after click on any element in firefox. In chrome it works as expected.\r\n![alt text](https://screenshotscdn.firefoxusercontent.com/images/41483ee0-f94d-404a-ae28-4c98769a7143.png)\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\nTry to hide any field in firefox from ListView.\r\n\r\n**What is the expected behavior?**\r\n\r\nElement should not be closed after click on checkboxes.\r\n\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.9\r\n- **npm version**: 6.2.0\r\n- **Strapi version**: 3.0.0-alpha14\r\n- **Database**: postgres 10\r\n- **Operating system**: macos\r\n\r\nEnumeration fields aren't validated, meaning they can be left empty:\r\n<img width=\"689\" alt=\"screen shot 2018-08-30 at 2 32 35 pm\" src=\"https://user-images.githubusercontent.com/176984/44868610-b39cc100-ac61-11e8-88ec-2136b15ec3e5.png\">\r\n\r\n..this ultimately leads to a broken site:\r\n```javascript\r\n[2018-08-30T15:28:35.771Z] debug POST /content-type-builder/models/ (131 ms)\r\n[2018-08-30T15:28:35.771Z] info The server is restarting\r\n\r\n(node:62864) UnhandledPromiseRejectionWarning: error: zero-length delimited identifier at or near \"\"\"\"\r\n    at Connection.parseE (/Users/jbergstroem/wrk/oss/fbtest/node_modules/pg/lib/connection.js:553:11)\r\n    at Connection.parseMessage (/Users/jbergstroem/wrk/oss/fbtest/node_modules/pg/lib/connection.js:378:19)\r\n    at Socket.<anonymous> (/Users/jbergstroem/wrk/oss/fbtest/node_modules/pg/lib/connection.js:119:22)\r\n    at Socket.emit (events.js:182:13)\r\n    at Socket.EventEmitter.emit (domain.js:442:20)\r\n    at addChunk (_stream_readable.js:283:12)\r\n    at readableAddChunk (_stream_readable.js:264:11)\r\n    at Socket.Readable.push (_stream_readable.js:219:10)\r\n    at TCP.onread (net.js:639:20)\r\nFrom previous event:\r\n    at Client_PG._query (/Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/dialects/postgres/index.js:260:12)\r\n    at Client_PG.query (/Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/client.js:202:17)\r\n    at Runner.<anonymous> (/Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/runner.js:146:36)\r\nFrom previous event:\r\n    at /Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/runner.js:48:21\r\n    at runCallback (timers.js:693:18)\r\n    at tryOnImmediate (timers.js:664:5)\r\n    at processImmediate (timers.js:646:5)\r\n    at process.topLevelDomainCallback (domain.js:121:23)\r\nFrom previous event:\r\n    at Runner.run (/Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/runner.js:34:31)\r\n    at Raw.Target.then (/Users/jbergstroem/wrk/oss/fbtest/node_modules/knex/lib/interface.js:20:43)\r\n(node:62864) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\r\n(node:62864) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n```\r\n\r\n..and in postgres:\r\n\r\n```sql\r\n2018-08-30 15:29:02.561 UTC [183] ERROR:  zero-length delimited identifier at or near \"\"\"\" at character 168\r\n2018-08-30 15:29:02.561 UTC [183] STATEMENT:  \r\n\t                        CREATE TABLE \"foo\" (\r\n\t                          id SERIAL NOT NULL PRIMARY KEY,\r\n\"a date\" timestamp with time zone,\r\n\"a title\" varchar(255),\r\n\"\" varchar(255),\r\n\"created_at\" timestamp with time zone,\r\n\"updated_at\" timestamp with time zone\r\n\t                        )\r\n```"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 9.10.1\r\n- **npm version**: 5.6.0\r\n- **Strapi version**:3.0.0-alpha.13.1\r\n- **Database**:mongodb\r\n- **Operating system**: Mac OS 10.12.6\r\n\r\n\r\n**What is the current behavior?**\r\nI am using the WYSIWG on a Text field. I am seeing this if I edit an existing piece of content (not when creating a new piece of content):\r\n\r\nWhen dragging and dropping an image into the WYSIWG, if you make no other edits and click save, the changes are not saved to the DB. If you make any other edits (like adding more text) then clicking save saves the changes.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nEdit a piece of existing content\r\nDrag and drop any image onto the WYSIWG and click Save without making any other edits.\r\n\r\n\r\n**What is the expected behavior?**\r\nThat the content will be updated with the image that I dragged and dropped.\r\n\r\n\r\n**Suggested solutions**\r\nI am assuming that there is some kind of variable which indicates that content has been changed that is not getting set when dragging and dropping an image (but that is changed when making normal text edits).\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 9.11.1\r\n- **npm version**: > 5\r\n- **Strapi version**: latest\r\n- **Database**: mongo\r\n- **Operating system**: gitlab-ci, docker image node:9.11.1-alpine\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nI would like run build step via Gitlab-Ci, but the admin building step return an error :\r\n\r\n```\r\nAdministration Panel\r\n📦 Installing packages...\r\nPackaged installed successfully\r\n\r\n> strapi-admin@3.0.0-alpha.13.1 setup /builds/user/project/strapi-app/admin\r\n> node ./scripts/setup.js\r\n\r\n🏗 Building the admin...\r\ninternal/modules/cjs/loader.js:550\r\nthrow err;\r\n^\r\n\r\nError: Cannot find module 'immutable'\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nYou can see my gitlab-ci.yml build config :\r\n\r\n```\r\nbuild:\r\n  image: node:9.11.1-alpine\r\n  stage: build\r\n  script:\r\n    - apk --update add g++ make bash zlib-dev libpng-dev git autoconf automake build-base libtool nasm python2 python\r\n    - cd strapi-app\r\n    - npm i\r\n    - npm run setup\r\n  artifacts:\r\n    expire_in: 1 day\r\n    paths:\r\n      - dist\r\n```\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nI've try same step with same node version of my build config on my Ubuntu Os (not Linux alpine) and all step work... \r\n\r\nI've this error only on gitlab ci\r\n\r\nAnyone can help me ?\r\n\r\nThank you community ! "},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\nRelated to: https://github.com/strapi/strapi/issues/1828\r\n\r\n**What is the expected behavior?**\r\n```\r\ngit clone git@strapi... strapi\r\ncd strapi\r\nnpm run setup:build\r\n  ...\r\n✅  Strapi has been succesfully installed.\r\n```\r\n\r\nAt the moment, we have many problems when trying to setup strapi on a windows platform.\r\nThis issue is here to:\r\n\r\n- List the current problems.\r\n- Discuss the possible solutions.\r\n- Address them in a coordinated way.\r\n\r\n## The `basedir=$(dirname \"$(echo \"$0\" | sed -e 's,\\\\,/,g')\")`  error\r\n\r\nRelated to: issue (#415) \r\n\r\n### Error log:\r\n```\r\n$ npm start\r\n\r\n> strapi-admin@3.0.0-alpha.12.6 prestart E:\\Proyectos\\third-party\\strapi\\packages\\strapi-admin\r\n> node ./node_modules/strapi-helper-plugin/node_modules/.bin/cross-env NODE_ENV=development PORT=4000 IS_ADMIN=true node ./node_modules/strapi-helper-plugin/lib/internals/scripts/loadAdminConfigurations.js\r\n\r\nE:\\Proyectos\\third-party\\strapi\\packages\\strapi-helper-plugin\\node_modules\\.bin\\cross-env:2\r\nbasedir=$(dirname \"$(echo \"$0\" | sed -e 's,\\\\,/,g')\")\r\n          ^^^^^^^\r\n\r\nSyntaxError: missing ) after argument list\r\n    at createScript (vm.js:80:10)\r\n    at Object.runInThisContext (vm.js:139:10)\r\n    at Module._compile (module.js:607:28)\r\n    at Object.Module._extensions..js (module.js:654:10)\r\n    at Module.load (module.js:556:32)\r\n    at tryModuleLoad (module.js:499:12)\r\n    at Function.Module._load (module.js:491:3)\r\n    at Function.Module.runMain (module.js:684:10)\r\n    at startup (bootstrap_node.js:187:16)\r\n    at bootstrap_node.js:608:3\r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! strapi-admin@3.0.0-alpha.12.6 prestart: `node ./node_modules/strapi-helper-plugin/node_modules/.bin/cross-env NODE_ENV=development PORT=4000 IS_ADMIN=true node ./node_modules/strapi-helper-plugin/lib/internals/scripts/loadAdminConfigurations.js`\r\nnpm ERR! Exit status 1\r\nnpm ERR!\r\nnpm ERR! Failed at the strapi-admin@3.0.0-alpha.12.6 prestart script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     C:\\Users\\Woofi\\AppData\\Roaming\\npm-cache\\_logs\\2018-06-30T19_57_00_377Z-debug.log\r\n```\r\n\r\n### Cause/Resolution:\r\n\r\n#### Cause:\r\ndetailed here: https://github.com/strapi/strapi/issues/415#issuecomment-416565172\r\n\r\n#### Resolution Proposal:\r\nThe root of this error is the 'tricky' way the cross-dependencies calls are made into the package.json scripts.\r\nI made some proposals on the linked issue. Not sure any of them is a silver bullet. I'm really open to suggestion for this one.\r\n\r\n### Impacted files:\r\n\r\nThe resolution of this issue will probably need changes on:\r\n\r\n```\r\npackages/*/package.json\r\nscripts/createSymlinkDependencies.js (maybe, depending on the solution choose)\r\n```\r\n\r\n## The `IS_MONOREPO=`  && `APP_PATH=` error\r\n\r\n### Error log:\r\n```\r\n🏗  Building admin...\r\n'IS_MONOREPO' n'est pas reconnu en tant que commande interne\r\nou externe, un programme executable ou un fichier de commandes.\r\n...\r\n'APP_PATH' n'est pas reconnu en tant que commande interne\r\nou externe, un programme executable ou un fichier de commandes.\r\n```\r\n\r\n### Cause/Resolution:\r\n\r\n#### Cause:\r\nThis issue is simply related to the way ENV vars are setted between OS's AND between shells.\r\n\r\nWe should avoid at the maximum to repose on the shell behavior, since it can hugely change between environment.\r\n\r\n#### Resolution Proposal:\r\nSo, to achieve this, all the env changes into `package.json` scripts must be preceded with `cross-env`.\r\n\r\nAll the environment variables who need to be set for some shelljs command should be passed as command option (see: [childProcess](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)) to avoid shell differences between `export X=Y` || `setenv X=Y` || `env X=Y` || `X=Y`.\r\n\r\n### Impacted files:\r\n```\r\npackages/*/package.json\r\nscripts/setup.js\r\npackages/strapi-admin/scripts/setup.js\r\n```\r\n\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"**Informations**\r\n- **Node.js version**: v10.9.0\r\n- **npm version**: 6.4.0\r\n- **Strapi version**: 3.0.0-alpha.14\r\n- **Database**: 10.2.17-MariaDB\r\n- **Operating system**: Linux Mint 19 (Ubuntu 18.04)\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen using the option added in this PR: https://github.com/strapi/strapi/pull/1682 like so:\r\n\r\n```\r\n  \"options\": {\r\n    \"increments\": true,\r\n    \"idAttributeType\": \"uuid\",\r\n    \"timestamps\": true,\r\n    \"comment\": \"\"\r\n  },\r\n```\r\n\r\nWhen attempting to add an entry I am getting the following error:\r\n\r\n```\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ 1, 1 ],\r\n  __knexQueryUid: 'fd42edd8-c275-4735-a7f6-5680da517022',\r\n  sql:\r\n   'select `users-permissions_user`.* from `users-permissions_user` where `users-permissions_user`.`id` = ? limit ?' }\r\n{ method: 'select',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings: [ 1 ],\r\n  __knexQueryUid: '52805595-42c7-497b-8481-e67e109a3de1',\r\n  sql:\r\n   'select `users-permissions_role`.* from `users-permissions_role` where `users-permissions_role`.`id` in (?)' }\r\n{ method: 'insert',\r\n  options: {},\r\n  timeout: false,\r\n  cancelOnTimeout: false,\r\n  bindings:\r\n   [ 'test', 2018-08-28T12:02:22.753Z, 2018-08-28T12:02:22.753Z ],\r\n  __knexQueryUid: '75b69ce8-a7eb-4b1b-a556-3248f74826fd',\r\n  sql:\r\n   'insert into `cmdrs` (`cmdrName`, `created_at`, `updated_at`) values (?, ?, ?)' }\r\n[2018-08-28T12:02:22.758Z] error insert into `cmdrs` (`cmdrName`, `created_at`, `updated_at`) values ('test', '2018-08-28 05:02:22.753', '2018-08-28 05:02:22.753') - ER_NO_DEFAULT_FOR_FIELD: Field 'id' doesn't have a default value\r\n[2018-08-28T12:02:22.759Z] debug POST /content-manager/explorer/cmdr/?source=content-manager (33 ms)\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\nCreate a model and set the `idAttributeType` to any of the string based fields like `uuid` and attempt to save an entry. There is currently no function to generate a random uuid on MySQL.\r\n\r\n**What is the expected behavior?**\r\n\r\nStrapi should generate a random uuid value to send to the database as MySQL / Postgres does not have a function built in to do this.\r\n\r\n**Suggested solutions**\r\n\r\n@kuongknight can you modify your code to generate a random string for bookshelf\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 9.9.0\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: *\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nWhen setting up a 'development' environment to contribute, then, running `npm run test` to check if everything is setup properly. I've seen that when a database connection fail for one the the test, the program get stuck into an infinite 'Database connection attempt failed!' loop.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nGit clone project.\r\nSetup dev environment as explained in documentation.\r\nSetup a valid mongo database.\r\nDon't setup postgres database.\r\n`npm run test`\r\n\r\n\r\n**What is the expected behavior?**\r\nDisplay an error message, then, continue to run the tests on other databases.\r\n\r\n\r\n**Suggested solutions**\r\nI think I've identified the error, it come from `test/start.js`.\r\n\r\nFirst, a promise rejection into `generate` are not properly handled. Resulting of an 'unhandled promise' error.\r\nThen, `exec` is used to spawn the child process, but some of this child process (appCreate) spawn sub-childrens. Making the `child.kill()` not properly killing all the child process: see https://github.com/nodejs/node-v0.x-archive/issues/1811\r\n\r\nA solution to fix this is to use `spawn` instead of `exec` with the proper options, to kill all the subchildrens (cf: https://azimi.me/2014/12/31/kill-child_process-node-js.html).\r\n\r\nI've already made the changes on my side, can submit a PR if the bug are confirmed as impacting other people.\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **npm version**: 6.2.0\r\n- **Strapi version**: alpha 13.1\r\n- **Database**: pg\r\n- **Operating system**: WSL/Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nValue is set on model, model has a default value, field is required, but I get `null` via API.\r\nOnly if the value is the second entry, I get the correct string.\r\n\r\n**Steps to reproduce the problem**\r\n\r\nValue is set in the created item:\r\n![image](https://user-images.githubusercontent.com/2950505/44627679-0a3c8f00-a932-11e8-9d27-19a42d0994da.png)\r\n\r\nModel has a field called `usage` that is either `general` or `event`\r\n![image](https://user-images.githubusercontent.com/2950505/44627644-87b3cf80-a931-11e8-8b85-baca61b47534.png)\r\n\r\nHas a default set, and is required\r\n![image](https://user-images.githubusercontent.com/2950505/44627654-a4500780-a931-11e8-8232-1b2278d40b22.png)\r\n\r\nAPI shows `null`\r\n![image](https://user-images.githubusercontent.com/2950505/44627636-6ce15b00-a931-11e8-811a-80b9ee1cda21.png)\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nShow the correct string (general) \r\n\r\n**Suggested solutions**\r\n\r\nCheck if default is used and give advice/hint if the default is not valid?\r\nAm I using a reserved keyword or something?\r\nMaybe the bookshelf adapter for non-mongo dbs has the enum not implemented correctly?\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,"bug"],"text":"**Informations**\r\n- **Node.js version**: 10.9.0\r\n- **npm version**: 6.2.0\r\n- **Yarn version**: 1.9.4\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu 18.04\r\n\r\n\r\n**What is the current behavior?**\r\nWhen I run the command `strapi new my-project` the installation was completed but not any plugin is installed.\r\nFor each plugins I have this kind of error:\r\n```\r\nAn error occurred during upload plugin installation.\r\n{ Error: Command failed: node /home/*/.config/yarn/global/node_modules/strapi/bin/strapi.js install upload \r\nmkdir: missing operand\r\nTry 'mkdir --help' for more information.\r\nShellJS: internal error\r\nError: ENOENT: no such file or directory, open './plugins/upload/package.json'\r\n    at Object.openSync (fs.js:434:3)\r\n    at touchFile (/home/*/.config/yarn/global/node_modules/shelljs/src/touch.js:67:19)\r\n    at /home/*/.config/yarn/global/node_modules/shelljs/src/touch.js:46:5\r\n    at Array.forEach (<anonymous>)\r\n    at Object._touch (/home/*/.config/yarn/global/node_modules/shelljs/src/touch.js:45:9)\r\n    at Object.touch (/home/*/.config/yarn/global/node_modules/shelljs/src/common.js:399:25)\r\n    at Command.module.exports (/home/*/.config/yarn/global/node_modules/strapi/bin/strapi-install.js:65:13)\r\n    at Command.listener (/home/*/.config/yarn/global/node_modules/strapi-utils/node_modules/commander/index.js:315:8)\r\n    at Command.emit (events.js:182:13)\r\n    at Command.EventEmitter.emit (domain.js:442:20)\r\n    at ChildProcess.exithandler (child_process.js:289:12)\r\n    at ChildProcess.emit (events.js:182:13)\r\n    at ChildProcess.EventEmitter.emit (domain.js:442:20)\r\n    at maybeClose (internal/child_process.js:961:16)\r\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:250:5)\r\n  killed: false,\r\n  code: 1,\r\n  signal: null,\r\n  cmd:\r\n   'node /home/*/.config/yarn/global/node_modules/strapi/bin/strapi.js install upload ' }\r\n```\r\n\r\nAnd when I start the app and access to the admin panel there is -indeed- zero plugin installed.\r\n\r\n\r\n**Steps to reproduce the problem**\r\nJust run `strapi new my-project`.\r\n\r\n**What is the expected behavior?**\r\nA complete installation with all default plugins."},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ISSUE TEMPLATE -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**:  v9.10.1\r\n- **npm version**: 5.6.0\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: mongodb\r\n- **Operating system**: macOS\r\n\r\n\r\n**What is the current behavior?**\r\nTrying to use dev strapi project to debug plugin. \r\nFollowed the [steps in contribution docs](https://github.com/strapi/strapi/blob/master/CONTRIBUTING.md) to create a dev strapi project, `admin/install-plugin` and `admin/list-plugins` keep loading, and there are a few console errors.\r\n\r\n![screen shot 2018-08-23 at 11 24 23 am](https://user-images.githubusercontent.com/3782817/44544731-e6761080-a6c7-11e8-874f-f2861eaea8b3.png)\r\n\r\n\r\n\r\n**Steps to reproduce the problem**\r\n\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\n\r\n\r\n**Suggested solutions**\r\nIt is not urgent. The only problem is hard to debug and test plugin.\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n\r\n\r\n\r\n<!-- FEATURE REQUEST TEMPLATE -->\r\n\r\n<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v10.9.0\r\n- **npm version**: 6.2.0\r\n- **Strapi version**: 3.0.0-alpha.13.1\r\n- **Database**: 10.2.17-MariaDB\r\n- **Operating system**: Linux Mint 19 Tara (Ubuntu 18.04)\r\n\r\n\r\n**What is the current behavior?**\r\n\r\nSee the following Issues Comments:\r\nhttps://github.com/strapi/strapi/issues/1213#issuecomment-406311304\r\nhttps://github.com/strapi/strapi/issues/1213#issuecomment-406312931\r\n\r\nCreating a user using the AdminUI sets the user's provider to `-` instead of `local`\r\nUsing Postman to send the same user register request properly sets the provider to `local`\r\n\r\n**Steps to reproduce the problem**\r\n\r\nAttempt to create a user on the AdminUI, and double check the users list, provider will show as `-`\r\n\r\n**What is the expected behavior?**\r\n\r\nUsers submitted via POST Request and via the AdminUI should be set to local accounts, you shouldn't be setting other providers (currently) that are not local.\r\n\r\n**Suggested solutions**\r\n\r\nUnsure of cause, but likely an AdminUI code related issue @soupette \r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: 10.8.0\r\n- **npm version**: 6.2.0\r\n- **Strapi version**: alpha 13.1\r\n- **Database**: pg\r\n- **Operating system**: WSL/Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n\r\n![image](https://user-images.githubusercontent.com/2950505/44455908-8caa1380-a5ff-11e8-9119-b521a76d1570.png)\r\n\r\n**Steps to reproduce the problem**\r\n\r\n- request a password reset\r\n- put in the same value in both fields\r\n- submit\r\n\r\n**What is the expected behavior?**\r\n\r\nreset the password\r\n\r\n**Suggested solutions**\r\n\r\nCheck comparison function\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n9.11.2\r\n\r\n<!-- npm 5.x.x -->\r\n5.6.0\r\n\r\n<!-- The latest version of Strapi. -->\r\nv3.0.0-alpha.13\r\n\r\n**Information**\r\n- **Database**: MongoDB\r\n- **Operating system**: Ubuntu\r\n\r\n\r\n**What is the current behavior?**\r\n![image](https://user-images.githubusercontent.com/11928206/44430226-068ebe00-a568-11e8-8029-04c7ae8dff7e.png)\r\n\r\n\r\nUploaded media (audio, images, etc.) return null when they're nested in a relation. Here, tour has many toursections.\r\n\r\nI've tried to apply the solution from Issue #877 but haven't had much luck as of yet.\r\n\r\n![image](https://user-images.githubusercontent.com/11928206/44430766-be709b00-a569-11e8-8499-d1fb1d0b6089.png)\r\n\r\n\r\n**Steps to reproduce the problem**\r\nI've created a Tour content type and a Toursection content type. Tour has many Toursections. The descriptions and anything text-based aren't null, but the media is. \r\n\r\n\r\n**What is the expected behavior?**\r\nTo have data available where null is returned.\r\n\r\n**Suggested solutions**\r\nI've tried modifying the deep populating myself as that's the only solution I've been able to find but am still stuck. Any help would be appreciated!"},{"labels":[null,null,"bug"],"text":"<!-- ⚠️ If you do not respect this template your issue will be closed. -->\r\n\r\n<!-- ⚠️ Before writing your issue make sure you are using:-->\r\n<!-- Node 9.x.x -->\r\n<!-- npm 5.x.x -->\r\n<!-- The latest version of Strapi. -->\r\n\r\n**Informations**\r\n- **Node.js version**: v9.10.0\r\n- **npm version**: v5.6.0\r\n- **Strapi version**: v3.0.0-alpha.13.1\r\n- **Database**: Mongo\r\n- **Operating system**: Mac OS High Sierra 10.13.3\r\n\r\n\r\n**What is the current behavior?**\r\nSince the migration v3.0.0-alpha.13.1. When I start the local server and I edit a file (a controller for instance) the app detect changes but the the server never restart. \r\n```\r\napi_1  | [2018-08-21T20:27:55.438Z] info File changed: /usr/src/api/api/bootstrap/controllers/Bootstrap.js\r\napi_1  | [2018-08-21T20:28:00.442Z] info File changed: /usr/src/api/api/bootstrap/controllers/Bootstrap.js\r\napi_1  | [2018-08-21T20:28:05.456Z] info File changed: /usr/src/api/api/bootstrap/controllers/Bootstrap.js\r\napi_1  | [2018-08-21T20:28:10.461Z] info File changed: /usr/src/api/api/bootstrap/controllers/Bootstrap.js\r\n```\r\n\r\n**Steps to reproduce the problem**\r\n\r\n1. `strapi start`\r\n2. Edit a file from your api\r\n\r\n**What is the expected behavior?**\r\n\r\nThe dev server have to restart when when a file is updated\r\n\r\n\r\n<!-- ⚠️ Make sure to browse the opened and closed issues before submitting your issue. -->\r\n"}]