[{"labels":["Awaiting More Feedback","In Discussion","feature-request"],"text":"<!-- \r\n\r\nHalf of all issues filed here are duplicates, answered in the FAQ, or not appropriate for the bug tracker. Even if you think you've found a *bug*, please read the FAQ first, especially the Common \"Bugs\" That Aren't Bugs section!\r\n\r\nPlease help us by doing the following steps before logging an issue:\r\n  * Search: https://github.com/Microsoft/TypeScript/search?type=Issues\r\n  * Read the FAQ: https://github.com/Microsoft/TypeScript/wiki/FAQ\r\n\r\nPlease fill in the *entire* template below.\r\n-->\r\n\r\n<!--\r\nPlease try to reproduce the issue with the latest published version. It may have already been fixed.\r\nFor npm: `typescript@next`\r\nThis is also the 'Nightly' version in the playground: http://www.typescriptlang.org/play/?ts=Nightly\r\n-->\r\n**TypeScript Version:**  3.9.0-beta\r\n\r\n<!-- Search terms you tried before logging this (so others can find this issue more easily) -->\r\n**Search Terms:** recursive, recursive generic\r\n\r\n**Code**\r\n\r\n```\r\ntype Intersect<U extends any[], R = unknown> =\r\n    ((...u: U) => any) extends ((h: infer H, ...t: infer T) => any)\r\n        ? Intersect<T, R & H>\r\n        : R\r\n\r\nconst value: Intersect<[{a: number}, {b: number}]> = {\r\n    a: 1,\r\n    b: 2\r\n}\r\n```\r\n\r\n*Note: the usual workaround of an immediately-indexed intermediate object type still works.*\r\n\r\n**Expected behavior:** It to type check without warnings\r\n\r\n**Actual behavior:**\r\n\r\n- At line 1: `Type alias 'Intersect' circularly references itself. (2456)`\r\n- At line 3: `Type 'Intersect' is not generic. (2315)`\r\n- At line 6: `Type 'Intersect' is not generic. (2315)`\r\n\r\n**Playground Link:** <!-- A link to a TypeScript Playground \"Share\" link which demonstrates this behavior --> [Link](https://www.typescriptlang.org/play?ts=3.9.0-beta#code/C4TwDgpgBAkgdsCAnAzhAxsAPAVShAD0TgBMUoBDOEAbQF0AaKAJSgF4oBXOAazgHsA7nAB87AFBQpUABQyAdIs4AuKDgCU7MVRCbCxMrJkALVQEs4AM2RQAEk0Xzg5qzYAqmtturrJ0-wD8sAjIaJhYbkysAGR2In7+UqrM4uLo-HAowFAAbhQANpwQqvCIqBjYNADeFKpwnAC2AEbIAL5MVU11jS1IrXRiHFUJlKoAjAwjXVAATOKtQA)\r\n\r\n**Related Issues:** <!-- Did you find other bugs that looked similar? -->\r\n\r\n- #37426 (root cause might be this)\r\n- #37344\r\n- Probably about 25%-30% of all other recursive type issues.\r\n- My use case is basically solving #26058 in userland, and doing [this](https://stackoverflow.com/questions/50374908/transform-union-type-to-intersection-type/50375286#50375286) with `SomeTuple[number]` won't work because I don't want to recurse.\r\n"},{"labels":["Fix Available","feature-request"],"text":"I was asked by the VS Code team to move this bug report upstream to the TypeScript project.\r\n\r\n- [x] searched existing issues to avoid creating duplicates\r\n- [x] tested using the latest insiders build to make sure issue has not already been fixed\r\n- [x] issue occurs when all extensions are disabled\r\n\r\n\r\n- VSCode Version: 1.37.1\r\n- VSCode Insiders Version: 1.38.0-insider\r\n- OS Version: MacOS Mojave 10.14.6\r\n- **TypeScript Version:**  3.7.0-dev.20190828\r\n\r\n**Search Terms:**\r\n\"VS Code\", \"d.ts\", \"unused\", \"editor.showUnused\"\r\n\r\nSteps to Reproduce:\r\n\r\n1. Ensure `editor.showUnused` is set to `true` for user, workspace, and folder.\r\n1. Create a file with extension `.d.ts`\r\n1. Add valid import statement such as\r\n```import { User } from 'types/users';```\r\n\r\n**Actual behavior**: Import statement is not faded even though it hasn't been used.\r\n**Expected behavior**: Import statement should be faded out as per setting.\r\n\r\nAdditional steps:\r\n\r\n1. convert filename to have only the `.ts` extension (drop the `.d`)\r\nNote: import line is dimmed as expected. The issue appears to only be affected by `.d.ts` files.\r\n\r\n**Related Issues:**\r\nPossibly:\r\nhttps://github.com/microsoft/TypeScript/issues/32196\r\nhttps://github.com/microsoft/TypeScript/issues/30260\r\n"},{"labels":["feature-request"],"text":"NodeJS 12.7 added support for a (currently experimental) feature for custom package imports and exports in `package.json`: https://github.com/jkrems/proposal-pkg-exports/\r\n\r\nIn short, this feature allows a package author to redirect exports in their package to alternate locations:\r\n\r\n```jsonc\r\n{\r\n  \"name\": \"pkg\",\r\n  /* [...] */\r\n  \"exports\": {\r\n    \"./foo\": \"./target.js\",\r\n    \"./bar/\": \"./dist/nested/dir/\"\r\n  }\r\n}\r\n```\r\n\r\nThis is currently only available when `--experiemental-exports` is passed to NodeJS, however we should continue to track the development of this feature as it progresses."},{"labels":["Domain: Quick Fixes","Experience Enhancement","Suggestion","feature-request"],"text":"## Search Terms\r\n\r\nfixit quick fix jsx flag tsconfig\r\n\r\n## Suggestion\r\n\r\nHitting \"Quick Fix\" in this error could offer to add the flag for you\r\n![{8446CBC8-3BA3-4F37-89F9-BD81DAEE9B26} png](https://user-images.githubusercontent.com/49038/59621991-48838480-90e5-11e9-80b5-fef5c5b62373.jpg)\r\n\r\n## Use Cases\r\n\r\nAnyone starting a reactproject\r\n\r\n## Checklist\r\n\r\nMy suggestion meets these guidelines:\r\n\r\n* [x] This wouldn't be a breaking change in existing TypeScript/JavaScript code\r\n* [x] This wouldn't change the runtime behavior of existing JavaScript code\r\n* [x] This could be implemented without emitting different JS based on the types of the expressions\r\n* [x] This isn't a runtime feature (e.g. library functionality, non-ECMAScript syntax with JavaScript output, etc.)\r\n* [x] This feature would agree with the rest of [TypeScript's Design Goals](https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals).\r\n\r\n"},{"labels":["In Discussion","Suggestion","feature-request"],"text":"<!-- \r\n\r\nHalf of all issues filed here are duplicates, answered in the FAQ, or not appropriate for the bug tracker. Please read the FAQ first, especially the \"Common Feature Requests\" section.\r\n\r\n-->\r\n\r\n## Search Terms\r\n\r\njsx object invalid data attribute nested component react\r\n\r\n## Suggestion\r\n\r\n<!-- A summary of what you'd like to see added or changed -->\r\n\r\nWe have this behaviour for JSX:\r\n\r\n> Note: If an attribute name is not a valid JS identifier (like a data-* attribute), it is not considered to be an error if it is not found in the element attributes type.\r\n\r\nhttps://www.typescriptlang.org/docs/handbook/jsx.html#attribute-type-checking\r\n\r\n``` ts\r\nimport React, { FC } from 'react';\r\n\r\nconst MyComponent: FC<{ myProp: string }> = props => null;\r\n<MyComponent myProp=\"foo\" data-test=\"foo\" />;\r\n```\r\n\r\nI want this same behaviour but for object types. This is necessary for times when we want to pass some props as a nested object (for whatever reason). Currently this errors:\r\n\r\n``` ts\r\nconst MyComponent2: FC<{ props: { myProp: string } }> = props => null;\r\n<MyComponent2 props={{ myProp: 'foo', 'data-test': 'foo' }} />;\r\n```\r\n\r\nAs far as I'm aware, there's currently no way to extend the above props type to allow for this behaviour.\r\n\r\n## Checklist\r\n\r\nMy suggestion meets these guidelines:\r\n\r\n* [x] This wouldn't be a breaking change in existing TypeScript/JavaScript code\r\n* [x] This wouldn't change the runtime behavior of existing JavaScript code\r\n* [x] This could be implemented without emitting different JS based on the types of the expressions\r\n* [x] This isn't a runtime feature (e.g. library functionality, non-ECMAScript syntax with JavaScript output, etc.)\r\n* [x] This feature would agree with the rest of [TypeScript's Design Goals](https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals).\r\n\r\n"},{"labels":["Question","feature-request"],"text":"related: https://github.com/Microsoft/TypeScript/issues/14419\r\n\r\nSome third-party plugins that provide different APIs form transformer: \r\n\r\nhttps://github.com/kimamula/ts-transformer-keys#how-to-use-the-custom-transformer\r\n\r\n```\r\n// rollup\r\n{ transformers: [service => ({\r\n  before: [ keysTransformer(service.getProgram()) ],\r\n  after: []\r\n}\r\n\r\n// awesome-typescript-loader\r\ngetCustomTransformers: program => ({\r\n    before: [\r\n       keysTransformer(program)\r\n    ]\r\n})\r\n```\r\n\r\n----\r\n\r\nSo I raised this question: What parameters(ts.LanguageService or ts.Program ) do we need to pass to the third-party transformer?\r\n\r\nI want to design the [typescript-macros](https://github.com/xiaoxiangmoe/typescript-macros) API closer to the [Transformer Plugin API](https://github.com/Microsoft/TypeScript/issues/16607) that TypeScript will provide in the future.\r\n\r\n\r\n\r\n---\r\n\r\nsome usage example for typescript-macros:\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/blob/master/examples/console-scope.tsmacro/README.md\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/blob/master/examples/hooks.tsmacro/README.md\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/tree/master/examples/uppercase.tsmacro"},{"labels":["Domain: Quick Fixes","Experience Enhancement","Suggestion","feature-request"],"text":"Based on code in acorn:\r\n\r\n```js\r\nvar TokenType = function TokenType(label, conf) {\r\n  this.label = label\r\n  this.binop = conf.binop || null\r\n}\r\n\r\n/**\r\n * @param {string} name\r\n * @param {number} prec\r\n */\r\nfunction x(name, prec) {\r\n  return new TokenType(name, { binop: prec })\r\n}\r\n```\r\n\r\n**Expected behavior:**\r\n\r\nTokenType's inferred type should be `(label: string, conf: { binop: string })` based on usage in `x`.\r\n\r\n**Actual behavior:**\r\nTokenType's inferred type is `(label: any, conf: { binop: null })`, based only on usage inside `TokenType` itself.\r\n\r\nI don't think infer-from-usage supports any JS assignment patterns; this is just the first one I ran into.\r\n"},{"labels":["Suggestion","feature-request"],"text":"## Search Terms\r\n\r\ninfer from usage suggestion\r\n\r\n## Suggestion\r\n\r\nThe infer from usage codefix only triggers from noImplicitAny errors, which are only available with noImplicitAny on. In particular, this makes it a lot less likely that JS users will use the codefix after #27610 is merged. Instead, noImplicitAny errors should be suggestions, which can trigger.\r\n\r\n## Use Cases\r\n\r\n```js\r\nfunction f(x) {\r\n  return x + 1\r\n}\r\n// in JS, the codefix should produce this:\r\n/**\r\n * @param {number} x\r\n */\r\nfunction f(x) {\r\n  return x + 1\r\n}\r\n```\r\n\r\nThis suggestion has a couple of problems:\r\n\r\n1. It would be difficult or at least slow to generate no-implicit-any errors without noImplicitAny: true, since the code paths are often quite different.\r\n2. inferFromUsage is not quite mature enough to be suggested everywhere to everybody all the time.\r\n\r\nI'm working on (2), and (1) might not actually be a problem. A prototype is probably a good next step."},{"labels":["cat/deployment","feature"],"text":"# Feature Proposal\r\nAdd serverless plan command to AWS provider\r\n\r\n## Description\r\nIt would be useful to have a plan command that shows a detailed log of the changes from a CloudFormation changeset. Similar to `terraform plan`, see https://www.terraform.io/docs/commands/plan.html\r\n\r\n#  What is the use case that should be solved?\r\nAs a developer, I want to see a detailed log of changes before executing the deployment to AWS CloudFormation so that I don't deploy unintended changes.\r\n\r\n# Implementation proposal\r\n- create a new AWS provider-specific command called plan\r\n- when plan is called then do the following\r\n  - spawn serverless deploy preventing the execution of the stack update\r\n  - create a changeset from the stack update\r\n  - print the changeset details to the console\r\n  - destroy the changeset and its corresponding files\r\n\r\n# Contribution\r\nThere's a fork that I'd like to use to gather feedback before creating a pull request as recommended in the contribution guidelines. Changes can be reviewed in the last commit of the branch at https://github.com/edgarpoce/serverless/commits/feature/awsplan\r\n\r\nCode from other open source projects was included and refactored as necessary. These projects are distributed under MIT license and the refactored files contain the corresponding copyright notice\r\nhttps://github.com/trek10inc/serverless-cloudformation-changesets \r\nhttps://github.com/sjakthol/cfn-execute-change-set\r\n\r\n# Similar issues:\r\n\r\n- #4179\r\n"},{"labels":["cat/deployment","feature","help wanted"],"text":"# Feature Proposal\r\nSet Rollback Configuration using AWS provider configuration.\r\n\r\n## Description\r\nI would like our serverless framework deployments to be safer. CloudFormation can automatically [monitor and roll back stack operations]. I just need the serverless framework to set the `RollbackConfiguration` in calls to createStack, [updateStack] or createChangeSet.\r\n\r\nI think that it is natural to specify the configuration with a new `rollbackConfiguration` property in `serverless.yml`. For example:\r\n\r\n```yaml\r\nprovider:\r\n  name: aws\r\n  rollbackConfiguration:\r\n    MonitoringTimeInMinutes: 20\r\n    RollbackTriggers:\r\n      - Arn: arn:aws:cloudwatch:us-east-1:000000000000:alarm:health\r\n        Type: AWS::CloudWatch::Alarm\r\n      - Arn: arn:aws:cloudwatch:us-east-1:000000000000:alarm:latency\r\n        Type: AWS::CloudWatch::Alarm\r\n```\r\n\r\n## Similar or dependent issues\r\n[serverless-plugin-canary-deployments] serves a similar role. However, it only works with certain triggers (I need CloudFront triggers, which are not supported). The plugin only affects rollback of the lambda function version, which leaves us vulnerable to configuration problems in the CloudFormation template.\r\n\r\n[monitor and roll back stack operations]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-rollback-triggers.html\r\n[updateStack]: https://github.com/serverless/serverless/blob/f93b27bf684d9a14b1e67ec554a7719ca3628135/lib/plugins/aws/lib/updateStack.js#L54\r\n[serverless-plugin-canary-deployments]: https://github.com/davidgf/serverless-plugin-canary-deployments"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"Support HTTP API:\r\n\r\nhttps://aws.amazon.com/blogs/compute/announcing-http-apis-for-amazon-api-gateway/\r\n\r\n--- \r\n\r\n## Proposal of a configuration schema within a Serverless Framework \r\n\r\n_**Note:** This proposal is \"live\" (updated in place whenever there's an agreement on changes to it)_\r\n\r\n```yaml\r\nprovider:\r\n  # (optional) general API settings \r\n  httpApi:\r\n    id: xxx # Attach to existing, already deployed, HTTP API id\r\n    timeout: 5 # Default timeout for endpoints\r\n    # Following options are supported only for HTTP API's to be created in context of this service\r\n    cors: # Can also be set to `true` which will apply below defaults. If not set, there's no CORS\r\n      allowedOrigins: \"*\"\r\n      allowedHeaders: \"*\"\r\n      allowMethods: \"*\"\r\n      allowCredentials: true\r\n      exposedResponseHeaders: \"*\"\r\n      maxAge: 300\r\n\r\n    authorizers:\r\n      # JWT authorizers\r\n      jwtAuthorizer:\r\n        identitySource: $request.header.Authorization\r\n        issuerUrl: <url>\r\n        audience:\r\n          - <audience1>\r\n          - <audience2>\r\n\r\n  # (optional) access logging for HTTP API \r\n  logs:\r\n    httpApi: # Can also be set to `true` which will apply below defaults. If not set, no logs are written\r\n      format: '{ \"requestId\":\"$context.requestId\", \"ip\": \"$context.identity.sourceIp\", \"requestTime\":\"$context.requestTime\", \"httpMethod\":\"$context.httpMethod\",\"routeKey\":\"$context.routeKey\", \"status\":\"$context.status\",\"protocol\":\"$context.protocol\", \"responseLength\":\"$context.responseLength\" }'\r\n\r\nfunctions:\r\n  # Individual HTTP route example\r\n  users:\r\n    handler: users.handler\r\n    events:\r\n      - httpApi:\r\n          path: /users\r\n          method: GET # Can be \"*\" as a catch-all for all HTTP methods for given path\r\n          timeout: 5 # Optional, timeout in seconds\r\n          authorizer: # Optional, if not set, endpoint is public\r\n            name: jwtAuthorizer\r\n            scopes:\r\n              - user.id\r\n              - user.email\r\n\r\n  # Catch all other routes example\r\n  api:\r\n    handler: api.handler\r\n    events:\r\n      - httpApi:\r\n          path: \"*\" # Once deployed, cannot be removed\r\n```\r\n\r\nIn addition support for importing Open API objects can be added as:\r\n\r\n```yaml\r\nprovider:\r\n  httpApi:\r\n    # Endpoints configuration provided via Open API object\r\n    openApi: # can be imported as e.g. ${file(open-api.json)}\r\n      openapi: \"3.0.0\"\r\n      info:\r\n        title: \"HTTP API example\"\r\n        version: \"1.0.0\"\r\n      paths:\r\n        /users:\r\n          get:\r\n            operationId: usersGet\r\n          post:\r\n            operationId: usersPost\r\n        /other:\r\n          get:\r\n            operationId: other\r\n\r\nfunctions:\r\n  # Individual HTTP route example\r\n  users:\r\n    handler: users.handler\r\n    events:\r\n      - httpApi:\r\n          operationId: usersGet # Match endpoint specified within Open API object\r\n  # Catch all other specified routes example\r\n  api:\r\n    handler: api.handler\r\n    events:\r\n      - httpApi:\r\n          operationId: \"*\"\r\n```\r\n\r\n## Implementation roadmap\r\n\r\nImplement and publish HTTP API support in following stages:\r\n\r\n1. [x] Basic routes support, no cors, no authorizers, no open API objects import  (#7274, #7331 & #7383)\r\n1. [x] CORS support (#7336)\r\n1. [x] JWT authorizers support (#7346)\r\n1. [x] Access logs (#7385)\r\n1. [x] Support existing HTTP API's (#7396)\r\n1. [x] Support `timeout` setting (#7401)\r\n1. [ ] (eventually) Open API object support - possibly leave out for community to implement (when demand shows)"},{"labels":["cat/event-aws-stream","feature"],"text":"# Feature Proposal\r\nAdd support for the new EventSourceMapping properties that were added Nov 25th, 2019\r\nhttps://docs.amazonaws.cn/en_us/AWSCloudFormation/latest/UserGuide/ReleaseHistory.html\r\n\r\n## Description\r\n\r\nAdd support for the new properties, which specifically are:\r\n- BisectBatchOnFunctionError\r\n- DestinationConfig\r\n- MaximumRecordAgeInSeconds\r\n- ~MaximumRetryAttempts~\r\n\r\nHere is the related AWS blog post: https://aws.amazon.com/blogs/compute/new-aws-lambda-controls-for-stream-processing-and-asynchronous-invocations/\r\n\r\nCouldFormation spec: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html#cfn-lambda-eventsourcemapping-startingposition\r\n\r\nSimilar or dependent issues:\r\nParallelizationFactor has already been added: https://github.com/serverless/serverless/pull/7024\r\n"},{"labels":["feature"],"text":"# Feature Proposal\r\n\r\nhttps://aws.amazon.com/about-aws/whats-new/2019/11/aws-lambda-supports-failure-handling-features-for-kinesis-and-dynamodb-event-sources/\r\n\r\n## Description\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\n1. What is the use case that should be solved. The more detail you describe this in the easier it is to understand for us.\r\n1. **Optional:** If there is additional config how would it look\r\n\r\nSimilar or dependent issues:\r\n\r\n- https://github.com/serverless/serverless/pull/7024\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"# Feature Proposal\r\nAllow specifying mapping values when providing parameters to an API Gateway integration. This would allow configurations like this (that can be created via the AWS console) to be created in serverless:\r\n<img width=\"765\" alt=\"execution_headers\" src=\"https://user-images.githubusercontent.com/83218/67972062-51807880-fbe4-11e9-9484-9a3eb042239d.png\">\r\n\r\n## Description\r\nCurrently, request parameters can be specified in AWS API Gateway integrations as part of request/parameters. The value provided for each parameter indicates whether it is required or not.\r\n```yaml\r\nevents:\r\n  - http:\r\n      path: /test/path\r\n      method: get\r\n      integration: http\r\n      request:\r\n        uri: https://some-backend.uri/path\r\n        parameters:\r\n          querystrings:\r\n            value1: true\r\n            value2: false\r\n          headers:\r\n            X-Custom-Header: false\r\n```\r\nThis is then used in two places in the resulting CloudFormation template:\r\n1. In the `RequestParameters` element of the `AWS::ApiGateway::Method` where the \"requiredness\" of each parameter is declared.\r\n1. In the `RequestParameters` element of the method's `Integration` element where currently the parameter value is always the full \"path\" of the parameter (`method.request.header.X-Venga-Api-Host` for example).\r\n\r\nThe first usage doesn't need to be changed; it's the second that allows mapping of a different value.\r\n\r\nA solution would be to enhance the configuration to allow specifying a mapping value in addition to whether or not the parameter is required:\r\n```yaml\r\nevents:\r\n  - http:\r\n      path: /test/path\r\n      method: get\r\n      integration: http\r\n      request:\r\n        uri: https://some-backend.uri/path\r\n        parameters:\r\n          querystrings:\r\n            value1: true\r\n            value2: false\r\n          headers:\r\n            X-Custom-Header:\r\n              required: false\r\n              mappedValue: context.domainName\r\n```\r\nThis would then update the output for the second section of the CloudFormation template. The ability to only specify whether the parameter is required would also be retained for backward compatibility and simplicity where mapping is not desired.\r\n\r\nI have a prototype of this change working if this is something that would be accepted into the project.\r\n"},{"labels":["cat/local-dev","feature"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\n1. What is the use case that should be solved. The more detail you describe this in the easier it is to understand for us.\r\n\r\nAs mentioned in https://github.com/serverless/serverless/issues/6844, invokeLocal will build a new image on each invocation of invokeLocal for custom runtimes. For a class of applications invoking docker from the root of a project will incur a noticeable delay while docker attempts to build up its context before it can start building the image. It's common in these cases to stage only the files to be included in the docker file to a target directory and invoke docker build from that directory. It seems this staging directory already exists as `.serverless/invokeLocal` \r\n\r\n1. **Optional:** If there is additional config how would it look\r\n\r\nI believe you'd just have to pass the `cwd` argument of `spawn` to `.serverless/invokeLocal` [here](https://github.com/serverless/serverless/blob/710139eee97fff5f0f98839521579d1fb65cba0a/lib/plugins/aws/invokeLocal/index.js#L298-L305)\r\n\r\nSimilar or dependent issues:\r\n\r\n- #6844\r\n"},{"labels":["cat/lambda","feature"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\n1. What is the use case that should be solved. The more detail you describe this in the easier it is to understand for us.\r\nFor some very simple lambda functions, such as CustomResources, it would be very useful to be able to define our function code in line.  This way I can reduce footprint of infrastructure from 2 files (serverless.yml and function code file) to 1 file (serverless.yml with function code defined inline).\r\n\r\n[Here is an example of a similar enhancement defined in SAM for the same use case.](https://github.com/awslabs/serverless-application-model/issues/287)\r\n1. **Optional:** If there is additional config how would it look\r\nHere is an example of the usage.\r\n\r\n```yaml\r\nservice: custom-resource\r\n\r\nprovider:\r\n  name: aws\r\n  runtime: python3.7\r\n\r\nfunctions:\r\n  crFunction:\r\n    handler: handler.handler\r\n    code: |\r\n        print('Here')\r\n\r\n\r\nresources:\r\n  Outputs:\r\n    crFunction:\r\n      Value: !GetAtt CrFunction.Arn\r\n      Export:\r\n        Name: \"CrFunction\"\r\n\r\nplugins:\r\n  - serverless-python-requirements\r\n```"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\nI think it would be useful to have ability to specify lambda version or aliases in api gateway configuration. As a use case consider situation when lambda have non backward compatible changes in request/response structure.\r\n\r\nHow about new attributes `version` and `alias` under functions.{name}.events.http, so it would look like this:\r\n```\r\nfunctions:\r\n  execute:\r\n    handler: src.execute_model.lambda_handler\r\n    description: Execute model\r\n    events:\r\n      - http:\r\n          path: /api/v1/model\r\n          version: 1\r\n          method: POST\r\n      - http:\r\n          path: /api/v2/model\r\n          method: POST\r\n```\r\n"},{"labels":["cat/aws-iam","feature"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\nCurrently Serverless refuses to build if there are iamRoleStatements that contain [`NotAction`](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_notaction.html) or [`NotResource`](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_notresource.html).\r\n\r\nThese should be supported, as they are valid IAM role statements.\r\n\r\ne.g. to allow a lambda to send text messages, but not publish to any SNS topics\r\n```yaml\r\n      - Effect: 'Allow'\r\n        Action: 'sns:Publish'\r\n        NotResource: 'arn:aws:sns:*:*:*'\r\n```"},{"labels":["feature"],"text":"# Feature Proposal\r\n\r\nAn environment variable that is set by the framework when deploying to all environments e.g. Lambda that states which cloud provider and possible which runtime it is using.\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\nMy use case is for libraries like [serverless-http](https://www.npmjs.com/package/serverless-http) that enable multi-cloud functions to easily abstract the different handler syntaxes that each provider uses.\r\n\r\nCurrently, I need to explicitly set the provider in my own config and then pass it to whichever libraries I am using, for some of the functions that I cannot edit the serverless config on I have had to implement code that guesses which environment it's running in based on the pre-existing env vars that are set by the provider themselves.\r\n\r\nI was thinking that the env var could be called something along the lines of `SERVERLESS_PROVIDER`, which hopefully will have minimal conflicts with any vars. The actual value could either be just the name of the provider or include some extra details such as the service offering.\r\n\r\n- plain: `SERVERLESS_PROVIDER=aws`\r\n- detailed: `SERVERLESS_PROVIDER=aws;lambda`\r\n"},{"labels":["cat/deployment","feature","needs feedback"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\n1. What is the use case that should be solved. The more detail you describe this in the easier it is to understand for us.\r\n1. **Optional:** If there is additional config how would it look\r\n\r\nThe `createStack()` call Serverless makes currently has `OnFailure` set to `ROLLBACK`:\r\nhttps://github.com/serverless/serverless/blob/f93b27bf684d9a14b1e67ec554a7719ca3628135/lib/plugins/aws/lib/updateStack.js#L25-L32\r\n\r\nAn option to change the `OnFailure` behaviour to `DO_NOTHING` will allow one to debug deployment failures (say, during automated tests on a testing environment).\r\n\r\nThe config could live inside `provider:` perhaps."},{"labels":["cat/deployment","feature","needs feedback"],"text":"# Feature Proposal\r\n\r\nallow an override parameter for  disabling automatic log group creation with sls deploy.\r\n\r\n## Description\r\n\r\n<!-- Please use https://forum.serverless.com, StackOverflow or other forums for Q&A -->\r\n<!-- Please answer ALL the question below. Otherwise we probably have to close the issue due to missing information -->\r\n\r\n\r\nI would like the option of managing log groups for the lambda function outside of the sls deploy stack, frankly when this was [added](https://github.com/serverless/serverless/pull/2520) - why not expose an override parameter then? creating a resource in the background that I have not defined in a yaml is fine if documented and exposed with an override. \r\n\r\nIn case my lambda deploy role doesn't have a log group creation permission because I want to control logs at an organizational level - which is fairly standard practice for most orgs. Also, if I explicitly omit the `logs:createLogGroup` from the lambda role I would expect the log group to not be created. \r\n\r\nOptional config could look like this\r\n\r\n```yml\r\ncreateLogGroup: false # defaults to true if missing\r\n```\r\n\r\n`UPDATE:`\r\nThis [PR](https://github.com/serverless/serverless/pull/2520)\r\nhas this stated - not tested it, however it's not documented [here](https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/) \r\n\r\n`cfLogs: true` "},{"labels":["cat/dashboard","feature","question"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\nThe case I'm trying to solve is as follows: I have a service that needs to run every day at 7am. After it's done, it sends me an email with some details. In this email I want to place a link to the my Lambda's invocation logs in the Serverless Dashboard.\r\n\r\nThe link would look something like:\r\n\r\n```\r\nhttps://dashboard.serverless.com/tenants/my-username/applications/project-name/services/service-name/stage/dev/region/us-east-1/invocations-explorer/${requestId}\r\n```\r\n\r\nWhere `requestId` is the Serverless request id.\r\n\r\nI'm able to generate this link when I invoke my Lambda through ApiGateway, since the requestId is accessible through `event.requestContext.requestId`. But when the invoker to my Lambda is cron, I don't see the `requestId` anywhere.\r\n\r\n_Is_ this a feature request, or am I missing something?"},{"labels":["cat/variable","feature","needs feedback"],"text":"# Feature Proposal\r\n\r\n## Description\r\n\r\nOften I build stacks that have parameters that must be set. For example:\r\n\r\n```yaml\r\nprovider:\r\n  name: aws\r\n  env:\r\n    DB_PASSWORD: ${env:DB_PASSWORD}\r\n```\r\n\r\nIt would be nice to have a way to require this env var to exist and to fail the deploy process if it's not defined. Currently users are shown a warning:\r\n\r\n```\r\nA valid option to satisfy the declaration 'env:DB_PASSWORD' could not be found.\r\n```\r\n\r\nSyntax ideas:\r\n\r\n- `${env:DB_PASSWORD:required}`\r\n- `${env:required:DB_PASSWORD}`\r\n- `${env_required:DB_PASSWORD}` This is a less flexible format but would be completely compatible with current syntax.\r\n\r\nIt would be good if this solution was general and worked for all variable sources. But the most important (for me) are `env` and `opt`."},{"labels":["feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\n- Support the new batch window options for Kinesis and DynamoDB\r\n- https://aws.amazon.com/about-aws/whats-new/2019/09/aws-lambda-now-supports-custom-batch-window-for-kinesis-and-dynamodb-event-sources/\r\n- https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-lambda-eventsourcemapping.html"},{"labels":["feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\nAmazon API Gateway support [associating your API with an interface VPC endpoint](https://docs.aws.amazon.com/apigateway/latest/developerguide/associate-private-api-with-vpc-endpoint.html). This is supported in cloudformation via `EndpointConfiguration`. Associating your API with the VPCE creates a custom DNS alias which allows you to access your private gateway through the VPCE without the need of a `Host` header, which is necessary in certain situations, particularly if you want to make ajax calls to your private API from a browser.\r\n\r\nWhat would be ideal would be to just have a `vpcEndpointIds` attribute which can be set just like `endpointType`, since both are a part of the `endpointConfiguration`. Here is a cloudformation example:\r\n```json\r\n\"endpointConfiguration\": {\r\n        \"types\": [\r\n            \"PRIVATE\"\r\n        ],\r\n        \"vpcEndpointIds\": [\r\n            \"vpce-0212a4ababd5b8c3e\",\r\n            \"vpce-0393a628149c867ee\"\r\n        ]\r\n    }\r\n```\r\n"},{"labels":["cat/deployment","feature","needs feedback"],"text":"The default serverless deployment bucket should take advantage of the newish [S3 Block Public Access](https://docs.aws.amazon.com/AmazonS3/latest/dev/access-control-block-public-access.html) feature. It's a security best practice.\r\n\r\nUnderlying template changes would be to include:\r\n\r\n```\r\nPublicAccessBlockConfiguration:\r\n    BlockPublicAcls: true\r\n    BlockPublicPolicy: true\r\n    IgnorePublicAcls: true\r\n    RestrictPublicBuckets: true\r\n```"},{"labels":["cat/dx","feature"],"text":"Extend https://github.com/serverless/serverless/issues/6673 so that one can tweak the `vpc` setup via a custom config.\r\n\r\n```yaml\r\nvpc:\r\n  availabilityZones: 2\r\n  internetGateway: false\r\n  subnets:\r\n    private:\r\n      cidrBlock: '10.0.0.0/22'\r\n```\r\n\r\nAgain, shoutouts to @alexdebrie who came up with the idea."},{"labels":["cat/dx","feature"],"text":"Native VPC support via `vpc: true` config:\r\n\r\n```yaml\r\nservice: vpc-test\r\n\r\nvpc: true\r\n```\r\n\r\nIt should create:\r\n\r\n1. A VPC\r\n1. Public and private subnets (1 public, 1 private)\r\n1. InternetGateway to enable internet access for public subnets\r\n1. A security group for the Lambda functions.\r\n\r\nFurthermore it should export the VPC setup so that it can be used across stacks.\r\n\r\nShoutouts to @alexdebrie who came up with the spec."},{"labels":["cat/aws-event-api-gateway","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nCurrently, we have only global `logRetentionInDays`.\r\n```yaml\r\nprovider:\r\n  name: aws\r\n  logRetentionInDays: '3'\r\n```\r\n\r\nHowever, `logRetentionInDays` may vary depending on AWSs (rest API, websocket, lambda...) because their loggin volume/velocity may vary.\r\n\r\nIt would be great if we can configure `logRetentionInDays` per AWS, something like this:\r\n```yaml\r\nprovider:\r\n  name: aws\r\n  logs:\r\n    websocket:\r\n      retentionInDays: '3'\r\n    restApi:\r\n      retentionInDays: '5'\r\n```\r\n\r\nOriginal idea: https://github.com/serverless/serverless/pull/6658#pullrequestreview-286064940\r\n\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\n- Add support for **Client Certificate** for API Gateway stages. This will enhance security of API Gateway configuration.\r\n\r\n## Where\r\n\r\nGo to specific API > Stages > Under Settings tab, there will be Client Certificate section:\r\n\r\n![image](https://user-images.githubusercontent.com/8500454/64466936-63084100-d0c9-11e9-8bd0-7eb4d587d807.png)\r\n\r\n"},{"labels":["cat/lambda","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAllow users to specify `condition` and `dependsOn` on functions and compile them to CloudFormation `Condition` and `DependsOn` for the Lambda function resource."},{"labels":["cat/dx","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nIn #6512 we've implemented async stack operations but removed this functionality to get back to the drawing board and implement this in a more sophisticated way.\r\n\r\nThe basic idea is that it should be possible to run long-running Serverless Framework deployments in an \"async\" way by e.g. providing the `--async` option. In that case the CLI will return immediately after logging out a corresponding message with a link to the CloudFormation dashboard.\r\n"},{"labels":["cat/dashboard","feature","needs feedback"],"text":"https://forum.serverless.com/\r\n\r\nIf forum supports third-party OAuth sign up like GitHub, Google, Twitter. It will be great."},{"labels":["cat/dx","feature","needs feedback"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\n- Read resources from S3 as an alternative to a local file. My use case is having multiple common resource templates (APIGateway error response) between multiple services. Those have to be copied into each repository. It would be nice to store them in S3 and reference them from `serverless.yml`. It might look something like this:\r\n\r\nBefore:\r\n```yml\r\nresources:\r\n  - ${file(resources/api-gateway-errors.yml)}\r\n```\r\n\r\nAfter:\r\n```yml\r\nresources:\r\n  - ${s3(bucket/resources/api-gateway-errors.yml)}\r\nOR \r\n  - ${file(s3:bucketName/resources/api-gateway-errors.yml)}\r\n```"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAWS supports body validation on API Gateway Websocket events similar to the HTTP request body validation that Serverless already supports. The implementation could look the same as for HTTP events:\r\n\r\n```\r\ncustomFooHandler:\r\n    handler: handler.fooHandler\r\n    events:\r\n      - websocket:\r\n          route: foo\r\n          request:\r\n            schema:\r\n              application/json: ${file(foo.json)}\r\n```\r\n\r\nSee: [https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api-selection-expressions.html#apigateway-websocket-api-model-selection-expressions](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api-selection-expressions.html#apigateway-websocket-api-model-selection-expressions)\r\n\r\nSimilar or dependent issues:\r\n\r\n\r\n"},{"labels":["feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\n- Amazon launched the EventBridge Service as a Event-driven between your own apps and SaaS services.\r\n\r\nLinks from the product:\r\nhttps://aws.amazon.com/eventbridge/\r\nhttps://aws.amazon.com/blogs/aws/amazon-eventbridge-event-driven-aws-integration-for-your-saas-applications/\r\nhttps://aws.amazon.com/about-aws/whats-new/2019/07/introducing-amazon-eventbridge/\r\n\r\nIt will be a nice feature to use in favor of SQS or Kinesis streams in some situations.\r\n\r\n"},{"labels":["cat/variable","feature","needs feedback"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# Uploaded Zip reference variable\r\n\r\nIt would come in handy if the serverless variables would contain a reference to the uploaded zipfile's s3 bucket and s3key.\r\nThis way the file can be referenced in other CloudFormation Resources\r\n"},{"labels":["cat/packaging","feature","needs feedback"],"text":"#6268  Description\r\n\r\nIn our use case, the code between our different stages is identical. The only difference is the cloud formation stacks, and env variables (which our managed outside of serverless by our own tool). \r\n\r\nCurrently, when you run ```sls package```, it will both create the new CF templates, but also prepare your lambdas for deployment again. We're looking to skip this second step. \r\n\r\n### Proposal: \r\nEither create a new command that runs just these steps, or allow a flag to be passed into the package command\r\n```"},{"labels":["cat/local-dev","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\nWhen output is a long JSON the terminal cannot display it in it's entirety, so it's better to have it in a file for inspection.\r\nSometimes we don't actually need to see the result, so it's nice to also have an option not to show it.\r\n\r\nTo solve this problem, the following parameter would be added: **finalOutput**\r\nexample call\r\nsls invoke local **--finalOutput** <**console**|file|none> -f someFunction\r\nthe parameter wouldn't be required, and would default to current behavior.\r\n\r\nI've done this locally with the following code:\r\nat the end of handleError:\r\n```\r\nif(!this.options.finalOutput || this.options.finalOutput === 'console') {\r\n    this.serverless.cli.consoleLog(chalk.red(JSON.stringify(errorResult, null, 4)));\r\n} else if (this.options.finalOutput === 'none'){\r\n  // do nothing.\r\n} else if (this.options.finalOutput === 'file'){ // todo: change to just else and have the parameter be the filename\r\n  let _outputPath = path.join(path.dirname(pathToHandler), '_functionOutput.log.json');\r\n  this.serverless.cli.consoleLog(chalk.red(`ERROR, details in file: ${_outputPath}.`));\r\n  fs.writeFileSync(_outputPath, JSON.stringify(errorResult, null, 4));\r\n}\r\nprocess.exitCode = 1;\r\n```\r\nand at the end of handleResult:\r\n```\r\nif(!this.options.finalOutput || this.options.finalOutput === 'console') {\r\n    this.serverless.cli.consoleLog(JSON.stringify(result, null, 4));\r\n} else if (this.options.finalOutput === 'none'){\r\n  // do nothing.\r\n} else if (this.options.finalOutput === 'file'){ // todo: change to just else and have the parameter be the filename\r\n  let _outputPath = path.join(path.dirname(pathToHandler), '_functionOutput.log.json');\r\n  this.serverless.cli.consoleLog(`SUCCESS, details in file: ${_outputPath}.`);\r\n  fs.writeFileSync(_outputPath, JSON.stringify(result, null, 4));\r\n}\r\n```\r\n\r\nSimilar or dependent issues:\r\n\r\n/\r\n"},{"labels":["cat/variable","feature"],"text":"    resources:\r\n      Resources:\r\n        myApiGatewayDeployment${sls:instanceId}:\r\n          Type: AWS::ApiGateway::Deployment\r\n\r\nleads to:\r\n\r\n     The CloudFormation template is invalid: Template format error: Resource name \r\n    myApiGatewayDeployment${sls:instanceId} is non alphanumeric.\r\n \r\n\r\n\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nWe currently support sharing the AWS::ApiGateway::RestApi using:\r\n```yaml\r\nprovider:\r\n  apiGateway:\r\n    restApiId: xxxxxxxxx\r\n```\r\nI would like to be able to also support sharing the websocket API (AWS::ApiGatewayV2::Api), e.g. using:\r\n```yaml\r\nprovider:\r\n  apiGateway:\r\n    restApiId: xxxxxxxxx\r\n    websocketApiId: yyyyyyyyy\r\n```"},{"labels":["feature","provider/google"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n# This is a Feature Proposal\r\nMore documentation for `google cloud functions` , `Apollo server/graphQL`, `typescript` and `function emulator`\r\n\r\n## Description\r\n\r\n* What is the use case that should be solved. The more detail you describe this in the easier it is to understand for us.\r\n* If there is additional config how would it look\r\n\r\nHello, I have searched a bit around but seems there are no examples and lack of documentation on using \"serverless framework\" with google cloud functions and Apollo server. Also nothing about the emulator and typescript.\r\n\r\nI am really sorry to bother you here, but I have written a post on your forum and unfortunately I have received no answers.\r\n\r\nThanks"},{"labels":["cat/deployment","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nIt would be nice to be able to use [temporary stack policies](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/protect-stack-resources.html#protect-stack-resources-updating) to allow one-off modification of resources that are typically protected.\r\n\r\nThis is helpful when 1) the stack policy is intentionally restrictive to prevent any accidental resource modification, and 2) you want to modify one of those resources.\r\n\r\nCurrently with Serverless, I believe the only way to handle this is to update the stack policy, deploy the resource modification, and then update the stack policy again. This is cumbersome and also causes risks if you forget to revert the stack policy or if someone unintentionally modifies a resource in the timeframe when the policy is less restrictive.\r\n\r\nServerless already supports stack policies (#1952).\r\n\r\nIdeally, we would be to be able to specify a `temporaryStackPolicy` in serverless.yml that runs for only the current update, using [--stack-policy-during-update-body](https://docs.aws.amazon.com/cli/latest/reference/cloudformation/update-stack.html). It would have to rely on some deployment state (an ID, timestamp, hash?) to only use the temporary stack policy temporarily.\r\n\r\nI don't follow the Serverless Framework closely enough to have a good suggestion on how to implement this, but I'd love to hear whether others would find the feature helpful or other ways of approaching the problem."},{"labels":["feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nUse AWS Glue Python Shell as a endpoint for serverless execution.\r\n\r\nMore details: https://aws.amazon.com/pt/about-aws/whats-new/2019/01/introducing-python-shell-jobs-in-aws-glue/\r\n"},{"labels":["cat/deployment","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\nUsing sls deploy function or sls deploy function --update-config does not update the runtime value set in the function configuration.\r\n\r\nfunctions:\r\n  myfunc:\r\n    name: ${self:service}-myfunc\r\n    handler: handler.handler\r\n    description: myfunc\r\n    runtime: nodejs10.x\r\n    timeout: 60\r\n    memorySize: 2048\r\n\r\n\r\n \r\nSimilar or dependent issues:\r\n* #12345\r\n"},{"labels":["cat/deployment","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nI am working on a project where we are not using API Gateway stages and instead use separate API Gateways in different AWS Accounts. What I would like to be able to do is package a single deployable (which I can currently do with `serverless package`), upload that deployable to an artifacts bucket in S3, then deploy that artifact from S3 without re-uploading. If I have to create a duplicate upload each time I deploy then two Lambda's running the same code in two different environments (dev and test for instance) will be pointing at two different S3 locations which makes for a confusing dev ops experience.\r\n\r\nIn summary:\r\n\r\n* Packaging once is important because **I want to promote between environments,** not rebuild.\r\n* Preventing re-upload is important because **I want my artifacts in S3 to be immutable.**\r\n* Deploying straight from S3 is important because then **I can easily see which Lambda's are using which version of the code.** \r\n\r\n## Ideas\r\n\r\nI have a few ideas for what we might change:\r\n\r\n### 1. Allow Remote URLs in Package Argument\r\n\r\nThis would allow S3 URLs to be passed to `serverless deploy --package` eg. \r\n```\r\n$ serverless deploy --package https://s3.eu-west-2.amazonaws.com/{bucket}/{package}.zip\r\n```\r\n\r\nThe problem then is that it begs the question, what exactly does the bucket configuration in the `serverless.yml` file do in that instance? Is it simply ignored if the package already exists remotely? That seems wrong but I'm not sure what the correct behaviour should be.\r\n\r\n### 2. Move Upload to Packaging\r\n\r\nThis would entail moving the entire upload step to packaging. I think this is the cleanest change in terms of developer ergonomics - but it is big and breaking, I wouldn't suggest we do this unless there is overwhelming support for this change.\r\n\r\nIn terms of how the API might change - I think the most sensible change would be to change the `--package` argument to something like `--from-package` or `--skip-package`, then the bucket settings in the `serverless.yml` would be used both as an upload location for post-packaging and the retrieval location when deploying the CloudFormation stack.\r\n\r\n### 3. Skip Upload if Artifact Already Exists\r\n\r\nI _think_ deployment is skipped if the hash of the code to be deployed matches the hash of the code already present in S3. It might be a good idea to rethink this slightly and have _upload_ skipped if the same code is already present in S3.\r\n\r\nIt would also be good to expose the S3 key that the artifact is uploaded to somewhere in the serverless.yml file - it saves having to write a plugin just to override that name.\r\n\r\n## Final Thoughts\r\n\r\nThis is a bit of a brain dump of possible approaches to this problem, but of course I am open to other suggestions! I'm relatively new to the Serverless framework so perhaps I've just misunderstood something about how it works - but it seems to me our use case is a little outside of what AWS expects from it's users (the recommendations I've seen use Lambda versions or API Gateway stages to solve the same problem we're trying to solve).\r\n\r\nThat said I do think this issue is where [SAM](https://github.com/awslabs/serverless-application-model) is winning over Serverless. I think there model for package and deploy works better - I just don't want to deal with CloudFormation macros! So I would much prefer to find a way to make this work with Serverless.\r\n\r\nFurther reading on [Single Environment vs Multi-Environment](https://hackernoon.com/managing-multi-environment-serverless-architecture-using-aws-an-investigation-6cd6501d261e)"},{"labels":["cat/aws-event-s3","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nI want to configure lifecycle for a bucket created by s3 event (like #3308).\r\n\r\nI read [custom bucket configuration](https://serverless.com/framework/docs/providers/aws/events/s3#custom-bucket-configuration) but since my bucket name is dynamic (eg: `${self:provider.stage}-my-bucket`) I'm not sure how to follow the logical IDs rules explained there.\r\n\r\nSo, is there a way to have a bucket created by s3 event AND configure a lifecyle for it?\r\n\r\nSimilar or dependent issues:\r\n* #3308\r\n"},{"labels":["cat/aws-event-api-gateway","feature","help wanted"],"text":"This feature was already added to serverless-websocket-plugin, can you add it to the framework?\r\n\r\n> Adds support for two-way routes by using the **routeResponseSelectionExpression** property. When this property is set, RouteResponseSelectionExpression will be set on the Route and a RouteResponse is also created.\r\n"},{"labels":["cat/local-dev","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAs a user of the `sls invoke local` command, I would like to use an argument to specify a path to a `config.[dev|qa|local].json` file for loading environment variables into the locally invoked function.\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview of the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise, we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAWS supports setting ApiKeyRequired to true for the $connect route. This is useful specifically when setting the `apiKeySource` value to \"AUTHORIZER\". Currently, there is no way to add these values from serverless.\r\n\r\nMy main goal is to connect the WebSockets API Gateway to the same usage plans created for the Rest API and set the ApiKeyRequired value on the $connect route which uses a custom authorizer that will provide the key because browsers don't support setting custom headers.\r\n\r\nA possible implementation of setting the ApiKeyRequired value could look as follows.\r\n\r\n```\r\nevents:\r\n  - websocket:\r\n      private: true\r\n      routeKey: $connect\r\n```\r\n\r\nA possible implementation of connecting the usage plan could look as follows.\r\n\r\n```\r\nwebsocketsApiUsagePlans:\r\n  - free\r\n usagePlan: \r\n   - free\r\n     quota:\r\n       limit: 5000\r\n       offset: 2\r\n       period: MONTH\r\n     throttle:\r\n       burstLimit: 200\r\n       rateLimit: 100\r\n```\r\n\r\nSimilar or dependent issues:\r\n* [Issue in old serverless-websocket-plugin](https://github.com/serverless/serverless-websockets-plugin/issues/23)\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"Implement API Gateway Logs for Websockets.\r\n\r\nRefs https://github.com/serverless/serverless/issues/4461"},{"labels":["cat/deployment","feature"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAs of now, the only support to Canary deployment for AWS Lambda functions I am seeing is using this plugin - https://github.com/davidgf/serverless-plugin-canary-deployments. However, there is a limitation stated by this plugin which is it supports only following trigger events. I would like to see a custom feature in serverless itself which can support all trigger events including SQS.\r\n\r\n\r\n"},{"labels":["cat/aws-event-api-gateway","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nI want to preserve CloudWatch Logs resources when deleting a stack, and then re-use it when recreating a stack with (almost) same configuration.\r\n\r\nI believe this is useful because of recently-introduced [X-Ray support in API Gateway in serverless](https://github.com/serverless/serverless/pull/5692).\r\nIf I understand correctly, stacks should be removed then recreated  to enable new features (X-Ray, Tags, etc) in API Gateway.\r\nHowever, removing stack erases CloudWatch Logs of Lambdas, so users may not be able to see old logs, which is bad from operation perspective.\r\n\r\nThis feature may also be helpful for future `API Gateway Stage`-related features if those requires recreating stacks.\r\n\r\n## Similar or dependent issues:\r\n* #6055 \r\n\r\n## Note\r\nAccording to AWS, [CloudFormation can retain resource when deleting stack](https://aws.amazon.com/jp/premiumsupport/knowledge-center/delete-cf-stack-retain-resources/). I am not sure it is possible to re-use existing same-name resources (CW Logs in this case) in newly-created stack.\r\n\r\n"},{"labels":["cat/template","feature"],"text":"# This is a Feature Proposal\r\n\r\n## Description\r\n\r\n* in https://github.com/serverless/serverless/tree/master/lib/plugins/create/templates there are templates for how to configure an aws lambda with different languages. I propose adding one for a aws c++ lambda where a zip file containing the package needs to be uploaded. \r\n* the template should include the corresponding serverless.yml for running:\r\naws lambda create-function \\\r\n--function-name hello-world \\\r\n--role <specify the role arn> \\\r\n--runtime provided \\\r\n--timeout 15 \\\r\n--memory-size 128 \\\r\n--handler hello \\\r\n--zip-file fileb://hello.zip\r\n\r\n\r\nSimilar or dependent issues:\r\n* \r\n"},{"labels":["cat/variable","feature","needs feedback","question"],"text":"Hi, this issue comes into play with lambda layers combined with branches for different environments. Sorry if there's an easy fix for this, but I haven't found anything.\r\n\r\nWe have a dev branch and a stage branch for our lambda layers. Unfortunately I can't inject these variables like I need to, because these are properties (not values) in serverless.yml.\r\n\r\nHere's dev:\r\n```\r\nlayers:\r\n  dplibdev:\r\n    name: ${self:provider.stage}-dplib # optional, Deployed Lambda layer name\r\n...\r\nresources:\r\n  Outputs:\r\n    DplibdevLayerExport:\r\n      Value:\r\n        Ref: Dplib${self:provider.stage}LambdaLayer\r\n      Export:\r\n        Name: Dplib${self:provider.stage}LambdaLayer\r\n```\r\n\r\nAnd here's stage:\r\n```\r\nlayers:\r\n  dplibstage:\r\n    name: ${self:provider.stage}-dplib # optional, Deployed Lambda layer name\r\n...\r\nresources:\r\n  Outputs:\r\n    DplibstageLayerExport:\r\n      Value:\r\n        Ref: Dplib${self:provider.stage}LambdaLayer\r\n      Export:\r\n        Name: Dplib${self:provider.stage}LambdaLayer\r\n```\r\n\r\nSo how this plays out is I need a separate serverless.yml file for each branch, and in my CI/CD, I rename that file to serverless.yml to deploy. Maybe I'm missing something but this seems less than ideal. "},{"labels":["cat/variable","feature","needs feedback"],"text":"At the moment to reference the region or stage you have to do:\r\n\r\n```\r\n${opt:stage, self:provider.stage}\r\n${opt:region, self:provider.region}\r\n```\r\n\r\nSince this is pretty common, it would be awesome to have simple variables that aliase that, e.g.\r\n\r\n```\r\n${sls:stage}\r\n${sls:region}\r\n```\r\n---\r\n\r\nIdeally we should have well defined and configured contexts, and introduce a context that contains resolved values.\r\n\r\nI propose following:\r\n\r\n- `opt` - Contains strictly CLI params (so `stage` is there only if there's a `--stage` param passed with CLI)\r\n- `self` - Reflects 1:1 `serverless.yml` config (after resolution of variables which could be resolved up front. Hence `self.provider.stage` contains `stage` value only if `provider.stage` was configured in `serl=verless.yml`\r\n- `sls` - Reflects resolved configuration. That requires further thought, but I believe structure should resemble the structure of `serverless.yml`. In that case `sls.provider.stage` will resolve finally used _stage_ in all cases, and fallback to `'dev'` if it's not configured explicitly by any means through which `stage` could be configured\r\n\r\n\r\nIt may imply a breaking adjustments to `opt` and `self`  resolution. In that case it'll be good to first introduce a deprecation notice if user relies on resolution which may stop working at some future point."},{"labels":["cat/plugin","feature","needs feedback"],"text":"<!--\r\n1. If you have a question and not a feature request please ask first at http://forum.serverless.com\r\n2. Please check if an issue already exists. This feature may have already been requested\r\n3. Check out and follow our Guidelines: https://github.com/serverless/serverless/blob/master/CONTRIBUTING.md\r\n4. Fill out the whole template so we have a good overview on the issue\r\n5. Do not remove any section of the template. If something is not applicable leave it empty but leave it in the Issue\r\n6. Please follow the template, otherwise we'll have to ask you to update it\r\n-->\r\n\r\n# This is a Feature Proposal\r\n\r\n## Description\r\n\r\nAt the moment we can load plugins like this:\r\n\r\n```yaml\r\nplugins:\r\n  - plugin1\r\n  - plugin2\r\n```\r\n\r\nor in a specific directory:\r\n\r\n```yaml\r\nplugins:\r\n  localPath: './custom_serverless_plugins'\r\n  modules:\r\n    - plugin1\r\n    - plugin2\r\n```\r\n\r\nHowever this changes the directory for all plugins.\r\n\r\nIt would be very useful to be able to include a module using a relative path:\r\n\r\n```yaml\r\nplugins:\r\n  - plugin1\r\n  - plugin2\r\n  - src/foo/bar/plugin3\r\n```\r\n\r\n**UPDATE: the final syntax will be:**\r\n\r\n```yaml\r\nplugins:\r\n  - plugin1\r\n  - plugin2\r\n  - ./src/foo/bar/plugin3\r\n```\r\n\r\n## Use case\r\n\r\nMy use case is that I want to distribute my plugin without NPM (it is a plugin for a serverless PHP framework, so the plugin will be distributed with the rest of the PHP source code). Because of that I want users to be able to include the plugin, yet don't mess up their \"localPath\" just for this specific plugin."},{"labels":["cat/template","feature","good first issue","help wanted"],"text":"# This is a Feature Proposal\r\nSupport C++ lambda!\r\n\r\n## Description\r\n\r\nGiven that AWS now supports C++ as exec env, will it be possible to add a C++ template to the serverless project?\r\n\r\nI would love to work on this. Is there some arch diagram of the code base that I can look at, or any tips? \r\n\r\nThanks. "},{"labels":["cat/lambda","feature","question"],"text":"# This is a Feature Proposal\r\n## Description\r\nFor usage in tracing, I need to be able to access lambda function's name. It would be very handy to have it set as environment variable and relatively easy to implement, I presume.\r\n\r\nSimilar or dependent issues:\r\n## Additional Data\r\n\r\n* ***Serverless Framework Version you're using***:\r\nlatest\r\n* ***Operating System***:\r\n* ***Stack Trace***:\r\n* ***Provider Error messages***:\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nTo me, the best dummy regressor is to just sample labels randomly. If you can't beat that benchmark, it's time to go home. \r\n\r\nThis is why I've [added it to scikit-lego](https://scikit-lego.readthedocs.io/en/latest/api/dummy.html), an scikit-learn compatible library that I maintain. A year after I made the tool I got [this message](https://github.com/koaning/scikit-lego/issues/361) from @amueller suggesting that it might be something I can merge back to scikit-learn. \r\n\r\nThe goal of this issue is to confirm if this is a welcome change, after which I'd be more than happy to implement it. \r\n\r\n#### Describe your proposed solution\r\n\r\nI want to add the `uniform` strategy to the `DummyRegressor` and the `DummyClassifier` to uniformly sample the labels. This may require the signature of the object to change though because you'd want to have a random seed in such scenarios.\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nCurrently, `RFECV` searches for the optimal number of features to provide the best score. It then fits an `RFE` on the whole training set: [L566](https://github.com/scikit-learn/scikit-learn/blob/fd237278e/sklearn/feature_selection/_rfe.py#L566)\r\n\r\nSo, the score is the cross-validated score, but the `ranking_` is for the whole set of data. Isn't this misleading? e.g. with `RFE` and 3-fold cross-validation, I get these `ranking_`s:\r\n```\r\n[1 1 4 1 1 2 3 5 7 6]\r\n[1 1 2 1 1 7 4 3 5 6]\r\n[1 1 2 1 1 7 5 6 3 4]\r\n```\r\nwhile `RFECV` returns something like:\r\n```\r\n[1 1 3 1 1 5 2 4 7 6]\r\n```\r\nwhich is the `ranking_` `RFE` would provide if fit over the whole set. So, the score is a cross-validated score, while the `ranking_` and `support_` are not.\r\n\r\n#### Describe your proposed solution\r\nImagine a situation where you get the best performance with `k` features, but the `k` features in some folds are different from the `k` features you would get by fitting the model on the whole training set. Wouldn't it be a better idea to return a form of average/voting_based `ranking_` and `support_`? "},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nOn held-out data not used to fit the transform, `MinMaxScaler` can return values outside the `feature_range`. This is a problem when all data *must* be within a particular range.\r\n\r\n#### Describe your proposed solution\r\n\r\n`MinMaxScaler` should have a parameter `strict`, which will clip all transformed values to the `feature_range`\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nRunning `np.clip` myself\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\n[Heart Disease Dataset](http://archive.ics.uci.edu/ml/datasets/Heart+Disease)\r\nThis dataset contains 13 attributes and labels of heart disease from 303 participants from Cleveland.\r\n\r\nThis dataset featured in many ML and DS tutorials, one of them, [StatQuest with Josh Starmer](https://www.youtube.com/watch?v=q90UDEgYqeI&t=460s) (a famous machine learning youtube channel). It would be great for the community to have this dataset in scikit-learn. \r\n\r\n#### Describe your proposed solution\r\nAdd `load_heart_disease()` in [sklearn/datasets](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/_base.py)\r\n\r\n#### Additional context\r\nUseful for playing with `Decision tree`, `Random Forest`, etc. and occupy less memory **(20kb)**\r\n\r\nIf it's a good idea then please let me know so, I can make PR."},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nAdd ``feature_importances_`` attribute to the ``LogisticRegression`` class, similar to the one in ``RandomForestClassifier`` and ``RandomForestRegressor``.\r\n\r\n#### Describe your proposed solution\r\nUse the coefficient magnitude, normalized by the relevant variable's standard deviation.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nN/A\r\n\r\n#### Additional context\r\nN/A\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable / Describe your proposed solution\r\nadd an `base_estimator` argument to GradientBoostingRegressor/Classifier and HistGradientBoostingRegressor/Classifier, allowing them to do gradient boosting on any sklearn base estimator that supports weights, while also supporting GradientBoostingRegressor like early stopping, custom objective functions, and early stopping.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n[sklearn.ensemble.AdaBoostClassifier](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostClassifier.html) supports specifying an arbitrary base_estimator It'd be pretty cool to have that for GradientBoostingRegressor/Classifier and HistGradientBoostingRegressor/Classifier\r\n\r\n#### Additional context\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nIn Xgboost and LightGBM, you can specify a custom objective function (as well as gradients for that objective): https://xgboost.readthedocs.io/en/latest/tutorials/custom_metric_obj.html\r\n\r\nIt would be pretty cool if Sklearn supported that too\r\n\r\n#### Describe your proposed solution\r\nUse Xgboost / LightGBM instead of sklearn, but who wants to do that \r\n\r\n#### Describe alternatives you've considered, if relevant\r\nXgboost / LightGBM\r\n\r\n#### Additional context\r\nIf you have a problem-specific objective function, it can be really useful to boost directly on that function."},{"labels":["New Feature"],"text":"I have a Siamese Neural Network which requires two inputs and in Keras this is allowed by passing a list of inputs in the fit function, however when I tried to do a grid search on my model I got a Value Error as GridSearchCV doesn't seem to accept multiple inputs in the fit function.\r\n\r\nThis means I'm not able to use grid search on any model with multiple inputs and therefore I would suggest adding such a feature to the fit function so any model created with keras could be used.\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nCurrently, DBSCAN is very slow for large datasets and can use a lot of memory, especially in higher dimensions. \r\n\r\nFor example, running sklearn.cluster.DBSCAN on a size 745k dataset with 411 features took over 6 days to finish running on a powerful cloud machine, and running on a size ~1M dataset with a reasonable setting of epsilon for that dataset ran out of memory on that machine with over 750GB RAM.\r\n\r\nIn a very recent work I did with Google Research [1], we found that you can get over 200x speedup and 250x savings in memory based on a minor tweak to the DBSCAN algorithm without sacrificing clustering accuracy.\r\n\r\n[1] https://arxiv.org/abs/2006.06743\r\n\r\n#### Describe your proposed solution\r\n\r\nThe solution is based on a simple modification to the brute force version. Instead of calculating the pairwise distances for all pairs of examples to obtain the nearest-neighbor graph, you can instead only calculate it for a fraction s of the pairs (selected randomly) and clusters based on that subsampled graph. This would make the algorithm feasible for larger datasets, without hurting the clustering quality (in some cases s = 0.001 suffices). The idea is that you don’t actually need the full nearest-neighbor graph to get the desired clustering.\r\n\r\nAll comparisons in [1] were done against the algorithm=’auto’ setting of sklearn.cluster.DBSCAN.\r\n\r\nThe only new parameter needed would be 0 < s <= 1, the sampling ratio which would only be applicable for the algorithm=’brute-force’ setting. (Perhaps we might also want a random seed parameter if one wants to be able to have reproducible runs).\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### * Workflow:\r\n1- Consider `make_scorer()` below for a **clustering** metric:\r\n```\r\nfrom sklearn.metrics import homogeneity_score, make_scorer\r\n\r\ndef score_func(y_true, y_pred, **kwargs):\r\n    return homogeneity_score(y_true, y_pred)\r\nscorer = make_scorer(score_func)\r\n```\r\n2- Consider the simple method **optics()**:\r\n```\r\n# \"optics\" algorithm for clustering\r\n# ---\r\ndef optics(data, labels):\r\n    # data: A dataframe with two columns (x, y)\r\n    preds = None    \r\n    base_opt = OPTICS()\r\n    grid_search_params = {\"min_samples\":np.arange(10),\r\n                          \"metric\":[\"cityblock\", \"cosine\", \"euclidean\", \"l1\", \"l2\", \"manhattan\"],\r\n                          \"cluster_method\":[\"xi\", \"dbscan\"],\r\n                          \"algorithm\":[\"auto\", \"ball_tree\", \"kd_tree\", \"brute\"]}\r\n    \r\n    grid_search_cv = GridSearchCV(estimator=base_opt,\r\n                                  param_grid=grid_search_params,\r\n                                  scoring=scorer)\r\n    \r\n    grid_search_cv.fit(data)    \r\n    opt = grid_search_cv.best_estimator_\r\n    opt.fit(data)\r\n    preds = opt.labels_\r\n    \r\n    # return clusters corresponding to (x, y) pairs according to \"optics\" algorithm\r\n    return preds\r\n```\r\nRunning the `optics()` led to this error:\r\n**`TypeError: _score() missing 1 required positional argument: 'y_true'`**\r\n\r\nEven by using `grid_search_cv.fit(data, labels)` instead of `grid_search_cv.fit(data)`, another exception rised:\r\n**`AttributeError: 'OPTICS' object has no attribute 'predict'`**\r\n\r\n---\r\n\r\n**_I thinks we cannot use `make_scorer()` with a `GridSearchCV` for a clustering task._**\r\n\r\n---\r\n#### * Proposed solution:\r\nThe `fit()` method of `GridSearchCV` automatically handles the type of the estimator which passed to its constructor, for example, for a clustering estimator it considers `labels_` instead of `predict()` for scoring.\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nActually, the default criterion for decision trees is the Gini impurity used by the CART (classification and regression trees) algorithm. I propose to use the information gain criterion used by the ID3 (Iterative Dichotomiser 3), C4.5 (successor of ID3) and C5.0 (successor of C4.5) algorithms which (IIRC) are improvements of the CART algorithm.\r\n\r\n#### Additional context\r\n\r\nI have carried out some benchmarks regarding test score and depth and number of leaves (rules) of the decision tree:\r\n\r\n```py\r\nfrom sklearn.datasets import (load_iris, load_digits, load_wine,\r\n                              load_breast_cancer, fetch_covtype)\r\nfrom sklearn.model_selection import cross_validate, RepeatedStratifiedKFold\r\nfrom sklearn.tree import DecisionTreeClassifier\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\ncriteria = [\"gini\", \"entropy\"]\r\ndatasets = [\"iris\", \"digits\", \"wine\", \"breast\", \"forest\"]\r\nscores = pd.DataFrame(index=criteria, columns=datasets)\r\ndepths = pd.DataFrame(index=criteria, columns=datasets)\r\nleaves = pd.DataFrame(index=criteria, columns=datasets)\r\n\r\nload_datasets = {\r\n    \"iris\": load_iris,\r\n    \"digits\": load_digits,\r\n    \"wine\": load_wine,\r\n    \"breast\": load_breast_cancer,\r\n    \"forest\": fetch_covtype\r\n}\r\n\r\nfor criterion in criteria:\r\n    for (dataset, load_dataset) in load_datasets.items():\r\n        model = DecisionTreeClassifier(criterion=criterion, random_state=42)\r\n        (X, y) = load_dataset(return_X_y=True)\r\n        rkf = RepeatedStratifiedKFold(n_splits=10, n_repeats=5, random_state=42)\r\n\r\n        result = cross_validate(model, X, y, return_estimator=True)\r\n\r\n        scores.loc[criterion, dataset] = np.mean(result[\"test_score\"])\r\n        depths.loc[criterion, dataset] = np.mean([estimator.get_depth()\r\n                                                  for estimator\r\n                                                  in result[\"estimator\"]])\r\n        leaves.loc[criterion, dataset] = np.mean([estimator.get_n_leaves()\r\n                                                  for estimator\r\n                                                  in result[\"estimator\"]])\r\n\r\nprint(scores)\r\nprint(depths)\r\nprint(leaves)\r\n```\r\n\r\nand this script outputs for the test score:\r\n\r\n| Criterion | Iris | Digits | Wine | Breast | Forest |\r\n| --- | --- | --- | --- | --- | --- |\r\n| Gini | 0.953333 | 0.788564 | 0.865397 | 0.917342 | 0.557223 |\r\n| Entropy | 0.953333 | 0.809698 | 0.899206 | 0.936749 | 0.566109 |\r\n\r\ndepth of the decision tree:\r\n\r\n| Criterion | Iris | Digits | Wine | Breast | Forest |\r\n| --- | --- | --- | --- | --- | --- |\r\n| Gini | 5 | 13.8 | 5.2 | 7.6  | 43.6 |\r\n| Entropy | 5.2 | 11.2 | 3.6 | 6.2 | 39.6 |\r\n\r\nand number of leaves (rules) of the decision tree:\r\n\r\n| Criterion | Iris | Digits | Wine | Breast | Forest |\r\n| --- | --- | --- | --- | --- | --- |\r\n| Gini | 8.2 | 136.6 | 9.8 | 19 | 20169.6 |\r\n| Entropy | 8 | 126.6 | 6.8 | 16.6 | 17330 |\r\n\r\nAccording to these results, the information gain criterion generally leads to smaller and more generalizable decision trees.\r\n\r\nI may test other datasets.\r\n\r\nWDYT about this change?"},{"labels":["Moderate","New Feature"],"text":"\r\n#### Describe the workflow you want to enable\r\n\r\nWhen using MissingIndicator and SimpleImputer, I need to inverse the transform. If a missing indicator is present, the missing value should be used."},{"labels":["Bug","New Feature"],"text":"Some scorers can fail due to the nature of a specific CV split, therefore during model selection the same thing should happen as the fit failing and the score being set to zero.  For example, I've had this happen with scikit-survival's `concordance_index_censored` https://github.com/sebp/scikit-survival/issues/117 on read-world datasets.  Instead of only failing for the CV split with a warning and setting the score to zero, the entire model selection fails.\r\n\r\nIt might make sense to move the following lines into the try/except, and it doesn't affect any of the logic:\r\nhttps://github.com/scikit-learn/scikit-learn/blob/77ccf19c1f5c0fd756e906e098e4ceadc964663b/sklearn/model_selection/_validation.py#L559-L563\r\n\r\n```python\r\n    try:\r\n        if y_train is None:\r\n            estimator.fit(X_train, **fit_params)\r\n        else:\r\n            estimator.fit(X_train, y_train, **fit_params)\r\n        fit_time = time.time() - start_time\r\n        test_scores = _score(estimator, X_test, y_test, scorer)\r\n        score_time = time.time() - start_time - fit_time\r\n        if return_train_score:\r\n            train_scores = _score(estimator, X_train, y_train, scorer)\r\n    except Exception as e:\r\n```\r\n\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nI want to be able to know how much variance has been preserved in t-SNE. In PCA, this can be easily done by `pca.explained_variance_ratio_`.\r\n\r\n#### Describe your proposed solution\r\n\r\n`tsne.explained_variance_ratio_`\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nPCA provides a useful insight into how much variance has been preserved, but PCA has the limitation of linear projection.\r\n\r\n#### Additional context\r\n\r\nI intend to know the ratio the variance preserved after the creation of low-dimensional embedding in t-SNE."},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nI have a selector function I'm using in a `ColumnTransformer` that's returning all False, which should be equivalent to an empty list.\r\n\r\nBut \"all false\" from the selector function is not being treated equivalent to \"empty list from explicit column names\".\r\n\r\n\"all False\" should skip the transformer, in the same way an empty list does: https://github.com/scikit-learn/scikit-learn/issues/12071\r\n\r\n#### Describe your proposed solution\r\ntreat a list of all `False` equivalent to an empty list\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nEvaluating the Falses myself to an empty list\r\n\r\n#### Additional context\r\nCode snipped:\r\n```python\r\nimport pandas as pd\r\nfrom sklearn.compose import ColumnTransformer\r\nfrom sklearn.impute import SimpleImputer\r\n\r\ndef noop_selector(X):\r\n    return [False for col in X]\r\n\r\nworking_pipeline = ColumnTransformer(\r\n    transformers=[\r\n        ('noop', SimpleImputer(), []),\r\n    ]\r\n)\r\n\r\nbroken_pipeline = ColumnTransformer(\r\n    transformers=[\r\n        ('noop', SimpleImputer(), noop_selector),\r\n    ]\r\n)\r\n\r\ndata = pd.DataFrame({'col': ['a', 'b', 'c']})\r\nworking_pipeline.fit(data)\r\nbroken_pipeline.fit(data)\r\n```\r\nThe working pipeline skips the simple imputer. The broken pipeline tries to impute with no data, resulting in ValueError: at least one array or dtype is required."},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nHi all,\r\nI regularly have to estimate Ridge regressions with a large number of different targets and vastly different signal-to-noise ratios across targets. The optimal regularization per target therefore differs quite a lot. RidgeCV currently estimates the optimal regularization **across all targets**, which can lead to quite sub-optimal performance in the situation I describe.\r\n\r\n#### Describe your proposed solution\r\n\r\nSince RidgeCV evaluates every possible for every target anyway, one can easily get the best alpha per target as well - however, this does not work with GridSearchCV as is. I'm not sure what the best approach to change this would be - I assume it would be necessary to allow multiple scores for a Ridge estimator, as well as adapting ParameterGrid to allow arrays as an individual parameter.\r\nThis might warrant too many changes to the inner working of sklearn's model_selection for a use-case that's too specialized (it's hard for me to judge that).\r\nIf you think it's worth having this feature, I'm happy to tackle it and discuss what solution might be best.\r\n\r\n#### Additional context\r\n\r\nThis problem arises frequently in neuroimaging, where people solve this by either writing their own gridsearch or using individual Ridge estimators per target, but I assume this is a common problem in other fields as well.\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nKBinsDiscretizer.inverse_transform uses the middle point of the edge ranges.\r\nHowever, for discrete values this is poor, and we would prefer to pick the median value\r\nof points trained in the range, and perhaps also the mode. This could be enabled with a\r\nparameter `bin_strategy='median'` either in the constructor or in `inverse_transform`\r\n\r\n```\r\nimport numpy as np\r\nimport sklearn.preprocessing as preprocessing\r\nfrom sklearn.feature_extraction import DictVectorizer\r\njsons = [ {\"attack\": 0.1}, {\"attack\": 1.0} ]\r\nv = DictVectorizer(sparse=False)\r\nX = v.fit_transform(jsons)\r\nv.inverse_transform(X)\r\n```\r\ngives\r\n```\r\n[{'attack': 0.1}, {'attack': 1.0}]\r\n```\r\n\r\n```\r\nest = preprocessing.KBinsDiscretizer(n_bins=3, encode='onehot', strategy='uniform').fit(X)\r\nv.inverse_transform(est.inverse_transform(est.transform(X)))\r\n```\r\ngives\r\n```\r\n[{'attack': 0.25}, {'attack': 0.85}]\r\n```\r\n\r\nSo we have *lost* the original values through binning, through weird choice of edges.\r\n\r\nHowever, we would prefer:\r\n```\r\nv.inverse_transform(est.inverse_transform(est.transform(X), bin_strategy='median'))\r\n```\r\n\r\ngives\r\n```\r\n[{'attack': 0.1}, {'attack': 1.0}]\r\n```"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\ndictvectorizer.inverse_transform(X)\r\n\r\nthe default might give\r\n\r\n```\r\n[{'distortion_type': 0.5, 'osc=sin': 1.0}]\r\n```\r\n\r\ndictvectorizer.inverse_transform(X, recover_discrete_keys=True) \r\n\r\nwould give\r\n\r\n```\r\n[{'distortion_type': 0.5, 'osc': 'sin'}]\r\n```\r\n\r\n#### Describe your proposed solution\r\n\r\nOne of the limitations of this solution is that if sep is already in a key that is NOT discrete, there will be problems.\r\nHere is some code that works, if only one prediction has value 1.0 and the others have value 0.0\r\n\r\n```\r\nimport re\r\nimport copy\r\nfrom collections import defaultdict\r\ndiscrete_re = re.compile(\"(.*)%s(.*)\" % SEP)\r\ndef recover_discrete_keys(X):\r\n    newX = copy.deepcopy(X)\r\n    for k in X.keys():\r\n        m = discrete_re.match(k)\r\n        if m:\r\n            key, val = (m.group(1), m.group(2))\r\n            v = newX[k]\r\n            del newX[k]\r\n            if v == 0.0:\r\n                continue\r\n            elif v == 1.0:\r\n                assert key not in newX\r\n                newX[key] = val\r\n            else:\r\n                print(key, val, v)\r\n                assert False, \"What should we do here?\"\r\n    return newX\r\nX = vec.inverse_transform(transformer.inverse_transform(Y_train))[0]\r\nprint(recover_discrete_keys(X))\r\n```\r\n\r\nHere is some code if we want to pick the argmax\r\n\r\n```\r\n\r\ndef recover_discrete_keys(X):\r\n    newX = copy.deepcopy(X)\r\n    discrete_longkey_to_keys = defaultdict(list)\r\n    for long_key in X.keys():\r\n        m = discrete_re.match(long_key)\r\n        if m:\r\n            key, val = (m.group(1), m.group(2))\r\n            discrete_longkey_to_keys[long_key].append((key, val))\r\n            del newX[long_key]\r\n    for long_key in discrete_longkey_to_keys:\r\n        predvals = sorted([(X[long_key], key, val) for (key, val) \\\r\n                           in discrete_longkey_to_keys[long_key]], reverse=True)\r\n        print(predvals)\r\n        newX[predvals[0][1]] = predvals[0][2]\r\n    return newX\r\nprint(recover_discrete_keys(X))\r\n```\r\n\r\n#### Additional context\r\n\r\nAdditionally, sklearn should throw a warning if sep is already used in any feature names. Because those will be difficult to recover, since DictVectorizer currently (but maybe not if this is implemented nicely) does not remember the original feature names and cannot figure out which were originally discrete."},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nThe code in preprocessing/_csr_polynomial_expansion.pyx produces the components of a CSR matrix with column values represented as int32s. For inputs with a sufficiently large number of columns, this can cause overflow, which leads to negative indices in the resulting CSR matrix.\r\n\r\nHere's an instance of a user running into this problem:\r\nhttps://stackoverflow.com/questions/60920877/scipy-sparse-matrix-negative-column-index-found\r\n\r\nThe dimensionality of a polynomial expansion grows quickly with respect to the input dimensionality. Using int32s to represent columns, a second degree expansion without bias is overwhelmed with an input dimensionality of 65,535.\r\n\r\n#### Describe your proposed solution\r\nUse int64s as the index type in the cython file. The type is currently specified as an int32 in a typedef, so this should be a simple fix.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nThe type necessary to store the output dimensionality could easily be determined. INDEX_T could be made a fused type. The call to _csr_polynomial_expansion could support two specializations, one for int32 and another for int64. A wrapper around them could decide which to call based on the input dimensionality.\r\n\r\nThis approach seems like overkill."},{"labels":["New Feature"],"text":"Class `BaseDecisionTree` allows parameter `max_feature` to be float. In this case `max_feature` shows the fraction of all features of training data. But the product is a real number, so the `int()` method is applied, which rounds the calculated result to the **floor** integer.\r\n\r\nFor example, if I got `11` features in trainng data and set fraction `max_feature = 0.25`, the product will be equal to `2.75`. I expect `3` features to be used in tree nodes splitting, but `int(2.75)` rounds it to `2`.\r\n\r\nSame issue in all cases, when calculation result is float:\r\n+ `max_feature = \"auto\"`\r\n+ `max_feature = \"sqrt\"`\r\n+ `max_feature = \"log2\"`\r\n\r\nSee the code from [sklearn/tree/_classes.py#L242](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/tree/_classes.py#L242) below:\r\n\r\n```python3\r\n        if isinstance(self.max_features, str):\r\n            if self.max_features == \"auto\":\r\n                if is_classification:\r\n                    max_features = max(1, int(np.sqrt(self.n_features_)))\r\n                else:\r\n                    max_features = self.n_features_\r\n            elif self.max_features == \"sqrt\":\r\n                max_features = max(1, int(np.sqrt(self.n_features_)))\r\n            elif self.max_features == \"log2\":\r\n                max_features = max(1, int(np.log2(self.n_features_)))\r\n            else:\r\n                raise ValueError(\"Invalid value for max_features. \"\r\n                                 \"Allowed string values are 'auto', \"\r\n                                 \"'sqrt' or 'log2'.\")\r\n        elif self.max_features is None:\r\n            max_features = self.n_features_\r\n        elif isinstance(self.max_features, numbers.Integral):\r\n            max_features = self.max_features\r\n        else:  # float\r\n            if self.max_features > 0.0:\r\n                max_features = max(1,\r\n                                   int(self.max_features * self.n_features_))\r\n            else:\r\n                max_features = 0\r\n\r\n        self.max_features_ = max_features\r\n```\r\nMaybe that makes sense, but I think, it would be better to use `round()` instead of `int()` to round float result of calculation to the **nearest** integer:\r\n```python3\r\nmax_features = max(1, round(self.max_features * self.n_features_)))\r\n```\r\n```python3\r\nmax_features = max(1, round(np.sqrt(self.n_features_)))\r\n```\r\n```python3\r\nmax_features = max(1, round(np.log2(self.n_features_)))\r\n```\r\n\r\nSimilar technique is already used for parameter `max_samples` at bootsraping method of forests [sklearn/ensemble/_forest.py#L106](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/ensemble/_forest.py#L106):\r\n```python3\r\n    if isinstance(max_samples, numbers.Real):\r\n        if not (0 < max_samples < 1):\r\n            msg = \"`max_samples` must be in range (0, 1) but got value {}\"\r\n            raise ValueError(msg.format(max_samples))\r\n        return int(round(n_samples * max_samples))\r\n```"},{"labels":["Documentation","New Feature"],"text":"#### Describe the workflow you want to enable\r\nI want to be able to define a custom criterion for tree splitting when building decision trees / tree ensembles. \r\nMore specifically, it would be great to be able to base this criterion on features besides X & y (i.e. \"Z\"), and for that I will need the indexes of the samples being considered. \r\n\r\n#### Describe your proposed solution\r\nclf = DecisionTreeClassifier(..., criterion=my_func)\r\nclf.fit(X, y)\r\n\r\ndef my_func(indexes):\r\n   return [purity score]\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nI looked at the source .pyx code, but it's not clear to me how to start modifying it...\r\nIf there was a nice explanation somewhere, it would be a good start.\r\n\r\n#### Additional context\r\nI want to define a criterion that takes into consideration a confounding variable."},{"labels":["New Feature"],"text":"```py\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom sklearn.metrics import mean_squared_error\r\n\r\nmse = tf.keras.losses.MeanSquaredError()\r\ny_true = [[0, 1, 0], [0, 0, 1]]\r\ny_pred = [[0.05, 0.95, 0], [0.1, 0.8, 0.1]]\r\nsample_weight = [0.3, 0.7]\r\n\r\nsample_weight_scaled = np.array(sample_weight) / np.mean(sample_weight)\r\n\r\n# no sample_weight, losses are equal\r\ntf_mse = np.float32(mse(y_true, y_pred).numpy())\r\nsk_mse = np.float32(mean_squared_error(y_true, y_pred))\r\nprint(tf_mse == sk_mse)\r\n\r\n# using the same array of sample weights, produces different values\r\ntf_mse = np.float32(mse(y_true, y_pred, sample_weight=tf.constant(sample_weight)).numpy())\r\nsk_mse = np.float32(mean_squared_error(y_true, y_pred, sample_weight=sample_weight))\r\nprint(tf_mse == sk_mse)\r\n\r\n# after scaling sample weights to a mean of 1, now produces same output\r\ntf_mse = np.float32(mse(y_true, y_pred, sample_weight=tf.constant(sample_weight_scaled)).numpy())\r\nsk_mse = np.float32(mean_squared_error(y_true, y_pred, sample_weight=sample_weight_scaled))\r\nprint(tf_mse == sk_mse)\r\n```\r\n\r\nThis code above demonstrates that sklearn metrics and losses in TF behave differently when it comes to applying sample weight. While this isn't a big issue on it's own, it becomes a problem when dealing with baselines.\r\n\r\nTensorflow's losses scale the weights to a mean of 1 before applying to the per_sample losses. While sklearn does not.\r\n\r\nWould be nice to at least have the option to scale to a mean of 1 to replicate TF values."},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nI recently had to use regression clustering with python, but couldn't find any implementation of it all over the internet.\r\n\r\n#### Describe your proposed solution\r\nI propose contributing my implementation to this paper:\r\nhttps://ieeexplore.ieee.org/document/1250952\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nNo alternatives (unless someone introduces me to another implementation of it)\r\n#### Additional context\r\n"},{"labels":["New Feature"],"text":"Many data science tasks in require fitting a logistic regression on continuous data. Examples include business cycle prediction and many other economics tasks, power curves for wind turbines, and population growth. In fact, any problem with a minimum of zero and some upper bound can have a logistic regression fit to it.\r\n\r\nDue to this, logistic regression in sklearn should be modified to enable it to be fit on continuous values instead of only being used for classification.  Currently, logistic regression can be performed with scipy by defining a logistic function and fitting it with scipy.optimize.curve_fit.  However, this is not an sklearn estimator and does not integrate as easily with sklearn. \r\n"},{"labels":["New Feature"],"text":"I couldn't find any examples of this anywhere so here goes.\r\n\r\nWhat I have in mind is this:\r\nI have an already fit custom transformer and i want to use it in a pipeline with a model that is not fit to the transformed data yet.\r\n\r\nThe goal is to keep the old fit transformer without refiting it to the new data and only fit the model, all combined in a Pipeline().\r\nCurrently, if I try to do that I get and error that the model has to be fit first.\r\n\r\nThe only alternative i can think of is transforming the data, training the model with it and then combining them into a Pipeline(). Or creating the Pipeline() and then fitting them step by step."},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nReplacing `scipy.sparse` arrays with PyData/Sparse in scikit-learn.\r\n\r\n#### Describe your proposed solution\r\nHello. I'm the maintainer of PyData/Sparse. So far, I feel the conversation between us and the scikit-learn developers has been mostly second-hand.\r\n\r\nI'm opening this issue in hopes of opening up a channel, and creating a meta-issue over in the PyData/Sparse repo for any requirements that scikit-learn may have to bring this to fruition. Over time, my hope is we can resolve issues on both sides to enable this."},{"labels":["New Feature","module:cluster"],"text":"#### Describe the workflow you want to enable\r\nMany people want to visualize the output of AgglomerativeClustering with a dendrogram. A recent update added an example how to do this (thanks, very useful in teaching!), but people still have to create the linkage matrix which is needed as input to the dendrogram-method in scipy by hand. It would be really cool to be able to plug-in the output of AgglomerativeClustering into dendrogram.\r\n\r\n#### Describe your proposed solution\r\nadd a method which returns the linkage matrix \r\n\r\n#### Describe alternatives you've considered, if relevant\r\nAn attribute like 'linkage_matrix' would be more in line with the workings of scikit-learn, but then, I guess, it would be calculated every time, even if people don't need the matrix. With large numbers of data points the computation time will increase and add to the runtime. So a methods sounds like a better solution\r\n\r\n"},{"labels":["New Feature","module:ensemble"],"text":"**Basic idea:** Allow decision trees and random forests (and possibly other ensemble algorithms) to have feature weightings that make the selection of specific features as split points more or less likely.\r\n\r\nhttps://www.researchgate.net/publication/220338672_Random_feature_weights_for_decision_tree_ensemble_construction\r\n\r\nI was looking to see if anything similar existed and came across the above paper.  If I'm understanding the method correctly, the idea is to use random feature weights to create highly diverse ensembles that outperform other common methods, particularly where noise is present.\r\n\r\nA general `feature_weights` parameter could allow for tuning based on domain knowledge or other methods that might vastly improve the ability of tree or forest to generalize.  Random forests could accept a set of weights to be used on all forests or an array of weights, one for each tree estimator.\r\n\r\nIn full disclosure, I'm really just getting my feet wet in terms of decision trees, random forests, etc.  Feel free to let me know if this is wrong or does not make sense.\r\n\r\n<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\nIt would be nice if the HistGradientBoostingClassifier works takes the same input as the GradientBoostingClassifier.\r\nThe following script on sklearn 0.23.0 raises:\r\n`TypeError: A sparse matrix was passed, but dense data is required. Use X.toarray() to convert to a dense numpy array.`\r\n\r\nSwitching to GradientBoostingClassifier makes the script work.\r\n\r\n\r\n```\r\nfrom sklearn.experimental import enable_hist_gradient_boosting  # noqa\r\nfrom sklearn.ensemble import HistGradientBoostingClassifier, GradientBoostingClassifier\r\nimport numpy as np\r\nfrom scipy import sparse\r\narr = np.array([[0, 1, 0, 1],\r\n               [1, 0, 1, 0]])\r\nlabels = [0, 1]\r\nclf = HistGradientBoostingClassifier()\r\n# clf = GradientBoostingClassifier()\r\n\r\narr = sparse.csr_matrix(arr)\r\nclf.fit(arr,labels)\r\n```\r\n\r\n"},{"labels":["New Feature","module:metrics"],"text":"#### Describe the workflow you want to enable\r\nI want to be able to calculate paired distance between 2 arrays with equal dimension, using haversine distance.\r\n\r\n#### Describe your proposed solution\r\nhttps://stackoverflow.com/questions/29545704/fast-haversine-approximation-python-pandas/29546836#29546836\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nI can roll my own function using the above code from stackoverflow, but I'd rather import from sklearn.\r\n\r\n#### Additional context\r\n\r\nCurrently [paired_distances](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/metrics/pairwise.py#L912-L918) supports the following options:\r\n\r\n```python\r\nPAIRED_DISTANCES = {\r\n    'cosine': paired_cosine_distances,\r\n    'euclidean': paired_euclidean_distances,\r\n    'l2': paired_euclidean_distances,\r\n    'l1': paired_manhattan_distances,\r\n    'manhattan': paired_manhattan_distances,\r\n    'cityblock': paired_manhattan_distances}\r\n```\r\n\r\nThere's code out there on stackoverlow for a fast and paired implementation of haversine distance: https://stackoverflow.com/questions/29545704/fast-haversine-approximation-python-pandas/29546836#29546836\r\n\r\nIt seems like this would be useful to have in sklearn"},{"labels":["New Feature","module:feature_extraction"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nCurrently, if we want to get idf value from TfidfVectorizer, we can use\r\n`    from sklearn.feature_extraction.text import TfidfVectorizer\r\n\r\n    my_data = [\"hello how are you\", \"hello who are you\", \"i am not you\"]\r\n\r\n    tf = TfidfVectorizer(use_idf=True)\r\n    tf.fit_transform(my_data)\r\n\r\n    idf = tf.idf_ `\r\n\r\nbut it cannot show the idf value for 'hello', like what we can do with term frequency in TfidfVectorizer.vocabulary_['hello']. \r\n\r\n#### Describe your proposed solution\r\nMaybe the group can add a dictionary object in TfidfVectorizer, so we can have TfidfVectorizer.idf_dict.get()\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\nAnd honestly, I think the current **vocabulary_** in TfidfVectorizer is misleading. The user would think it would get the tf-idf value, but it actually gets the frequency."},{"labels":["New Feature","module:tree"],"text":"Hi,\r\n\r\nWould it be possible to add \"True\"/\"False\" labels (or any other adequate naming) to the paths from the root node to first-level leaves when splitting? For instance, when instantiating a model with DecisionTreeClassifer(max_depth=1) and visualizing it via plot_tree, there is no option to add path labels to the plot.\r\n\r\nThis would be really helpful for those reasons:\r\n- To make visually clear, which path is True which one is False, just by looking into the plots, for binary classifications\r\n- For multiclass classification, the labels would be really helpful to visually understand which path represents that particular class in a decision tree\r\n\r\nWould it be possible to implement such feature as a parameter to plot_tree() in the future in sklearn?\r\n\r\nKind regards,\r\nDK"},{"labels":["New Feature"],"text":"Similarly to the example provided here: https://scikit-learn.org/stable/auto_examples/model_selection/plot_precision_recall.html, extend plot_precision_recall_curve and plot_roc_curve to be able to deal with multiclass scenarios.\r\n"},{"labels":["New Feature","module:preprocessing"],"text":"[category_encoders.ordinal.OrdinalEncoder](http://contrib.scikit-learn.org/category_encoders/ordinal.html) in [scikit-learn-contrib/category_encoders](http://contrib.scikit-learn.org/category_encoders/) has 2 really useful options:\r\n\r\n1. `handle_unknown`, options are ‘error’, ‘return_nan’ and ‘value’, defaults to ‘value’, which will impute the category -1.\r\n2. `handle_missing`, options are ‘error’, ‘return_nan’, and ‘value, default to ‘value’, which treat nan as a category at fit time, or -2 at transform time if nan is not a category during fit.\r\n\r\nThese 2 options are really, really useful for handling real-world data\r\n\r\n#### Describe the workflow you want to enable\r\n1. Handle new categories at predict time in OrdinalEncoder (OneHotEncoder already has this opion).\r\n2. Handle NaNs at fit and predict time in OrdinalEncoder\r\n\r\n#### Describe your proposed solution\r\nPort the logic for `handle_unknown` and `handle_missing` from `category_encoders.ordinal.OrdinalEncoder`\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nJust using scikit-learn-contrib/category_encoders instead\r\n\r\n#### Additional context\r\nEvery encoder in `scikit-learn-contrib/category_encoders` has the option `handle_unknown` and `handle_missing`, giving users the flexibility to decide how to handle unknown or new values.  This consistency in the API makes it really easy to switch between different encoders and try them out in your workflow."},{"labels":["New Feature"],"text":"Mean average precision (mAP) is a standard multi-class extension of average precision using OVR: https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)#Mean_average_precision\r\n\r\nRecently I prefer AP over AUC so I think it would be cool to add this.\r\nMaybe @gbolmier is interested? @thomasjpfan probably knows how to do this ;)"},{"labels":["New Feature","module:model_selection"],"text":"CalibratedClassifierCV does not support joblib parallel computing.\r\n\r\nEach CV in CalibratedClassifierCV is trained sequentially with a for loop.\r\nhttps://github.com/scikit-learn/scikit-learn/blob/95d4f0841/sklearn/calibration.py#L182\r\n\r\nThe joblib parallel implementation in GridSearchCV can be added easily.\r\nhttps://github.com/scikit-learn/scikit-learn/blob/95d4f0841/sklearn/model_selection/_search.py#L682\r\n"},{"labels":["New Feature","module:impute"],"text":"I am opening this issue to more clearly document scattered comments I have made about this idea in several issues.\r\n\r\n**Workflow**\r\nFor even the simplest dataset (say the Titanic dataset), dealing with missing values and encoding data are essential pre-processing steps. Scikit-Learn has a lot of great tools to deal with this, but I am going to focus on `IterativeImputer` for missing data and `ColumnTransfromer` (and by extension, any other transformers that can be fit inside of it) for encoding.\r\n\r\nPlease correct me if I am mistaken, but I believe that there is currently no easy way to use these two tools together. Transformers do not work with missing values, and `IterativeImputer` only works with numerical continuous data. Of course one could use `SimpleImputer -> ColumnTransformer` but then you cannot take advantage of more advanced imputation strategies.\r\n\r\nI would like to have the ability to feed `IterativeImputer` a `ColumnTransformer` object (that may already even be fit) along with a list of estimators (so basically, I am telling what estimators to use for each column and how to transform the data for those estimators) and have it give me back my data, in it's original format, with imputed values. Then of course you can manually pass it through that same `ColumnTransformer` again and move it down the pipeline.\r\n\r\n**Proposed solution**\r\nChanges to  `IterativeImputer`:\r\n\r\n1. A new parameter called `transformer` that defaults to `None`.\r\n2. Making the `estimator` parameter accept an iterable in addition to the single estimator it currently supports.\r\n3. Introduce a new step where `ColumnTransformer` gets applied. This would be between the initial imputation step (using `SimpleImputer`) and the estimator steps. \r\n4. Some internal changing to avoid errors from trying to do numerical operations on `object` `dtype` data. I tested implementing these fixes, this part is trivial.\r\n\r\nI think these changes should be backwards compatible.\r\n\r\nIn terms of `ColumnTransformer`, the two needed features for this to work are:\r\n\r\n1. `inverse_transform`: work on this seems to be underway in #11639, but it's a bit stalled it seems.\r\n2. Ability to select which columns are present when using `transform`: a similar issue was brought up in #15781. I think this could even be achieved with the private method `_calculate_inverse_indices` proposed in #11639 if it is made public.\r\n\r\n**Problems with this approach**\r\nI can think of two main problems:\r\n\r\n1. Convergence: there is already concern regarding convergence of `IterativeImputer`, I am fairly certain that introducing classifiers would make it worse. A simple fix would be to not support tolerance/convergence based early termination if one or more classifiers are used as estimators. It is easy to check if any of the estimators are classifiers. Several parameters related to convergence (ex: `tol`) would need to raise errors if they are not set to `None` (and maybe the default should be changed?).\r\n2. Initial imputation: we would have to restrict the `initial_strategy` parameter to `constant` and `most_frequent` when classification tasks are present.\r\n\r\n**Existing work**\r\nI tried implementing this proposal. In some sense, I got pretty far, I resolved the errors from trying to apply numerical numpy operations to object dtype data as well as getting a list of estimators to work. Where I ran into issues was the `ColumnTransformer` problems mentioned above.\r\n\r\n**Example of desired usage**\r\nGiven a dataset that looks something like this (this is `X` only):\r\n| Age | Sex | Cabin |\r\n|-----|-----|-------|\r\n| 16  | M   | NaN   |\r\n| 56  | NaN | C19   |\r\n| NaN | F   | XYZ   |\r\n\r\nWe have missing continuous numerical data (Age), two-level categorical data (Sex) and multi-level categorical data (Cabin). We want to impute these missing values. The idea would be something as follows:\r\n\r\n```python3\r\nX = .... # the data described above\r\n\r\nestimators = [\r\n    BayesianRidge(),  # for Age\r\n    LogisticRegression(),  # for Sex\r\n    DecisionTreeClassifier(),  # for Cabin\r\n]\r\n\r\ntransformer = ColumnTransformer(transformers= [\r\n    ('num', StandardScaler(), [0]),\r\n    ('cat', OneHotEncoder(), [1, 2]),\r\n])\r\n\r\nimputer = IterativeImputer(\r\n    estimator=estimators,\r\n    transformer=transformer,\r\n)\r\n\r\nimputer.fit_transform(X)\r\n``` \r\n\r\nAnd we'd get back something like:\r\n| Age | Sex | Cabin |\r\n|-----|-----|-------|\r\n| 16  | M   | F32   |\r\n| 56  | F | C19   |\r\n| 55 | F   | XYZ   |"},{"labels":["New Feature","module:model_selection"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nThe `cross_validate` method is able to return multiple scoring metrics, which makes it very flexible. However, this option does not allow for returning arrays (or even a custom object), which is interesting if you wanted to draw a cross-validated ROC curve, or a cross-validated calibration curve. Currently, you would have create your custom `cross_validate` method to return these type of metrics.\r\n\r\n#### Describe your proposed solution\r\nI think there could be an option similar to the `scoring` kwarg (maybe 'func'?), that accepts a dictionary with the name of the desired output and the function (ROC curve, for instance). The function should have the same signature as required by the `make_scorer` method (i.e., the function should accept the target, and the predicted classes or probabilities), except by the flexibility in the returned object. \r\n\r\nIndeed, this option would return the output of the function in the same way the current API returns the trained models for each CV fold."},{"labels":["New Feature","module:model_selection"],"text":"#### Describe the workflow you want to enable\r\nI would like it to be possible to stop and resume GridSearchCV and RandomizedSearchCV. This is relevant in situations where training a model can take a long time.\r\n\r\nRight now, as far as I know, if the execution stops for whatever reason the results are lost.\r\n\r\n#### Describe your proposed solution\r\nI propose an extra parameter in GridSearchCV and RandomizedSearchCV: `cache_results_folder` or something more appropriate that behaves as follows:\r\n\r\n- After a set of cross-validation run (5-fold, say) is completed, a file is saved in `cache_results_folder` containing the set of parameters for that run\r\n- In the case of GridSearchCV, if a log exists for that combination of parameters, load results and skip the run for that combination\r\n- In the case of RandomizedSearchCV, when logs exist just increase the `n_iter` count\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nIt may be viable to also save the current CV split in the log, but I assume that would increase the effort considerably.\r\nI considered manually running smaller CV calls and saving intermediate results but that seems suboptimal.\r\n\r\n#### Additional context\r\nNowadays training neural networks as classifiers is very common. However, it is not unusual to get memory leaks or invalid parameter combinations when doing hyperparameter search (randomized, for example). This feature would bring more robustness to GridSearchCV and RandomizedSearchCV."},{"labels":["New Feature","module:preprocessing"],"text":"#### Describe the workflow you want to enable\r\nI propose to add a `SplineTransformer` to `preprocessing`. This is similiar to `PolynomialFeatures`, but gives more flexibility (and numerical stability) for linear models to deal with continuous numerical features. \r\n```python\r\nfrom sklearn.linear_model import LogisticRegression\r\nfrom sklearn.preprocessing import SplineTransformer\r\nfrom sklearn.pipeline import make_pipeline\r\n\r\n# get data X, y\r\n...\r\nmodel = make_pipeline(SplineTransformer(degree=3, n_knots=20,\r\n                                        positioning='quantile'),\r\n                      LogisticRegression())\r\nmodel.fit(X, y)\r\n```\r\n\r\n#### Describe your proposed solution\r\nAdd `SplineTransformer` and internally use scipy for splines. Start with\r\n    - [1-dimensional b-splines](PolynomialFeatures)\r\n    - equidistant knots\r\n    - quantile based knots\r\n\r\n#### Additional context\r\n[Patsy](https://patsy.readthedocs.io/en/latest/spline-regression.html) has an implementation of those that match the R versions.\r\n\r\n#### References\r\n[Eilers, Marx \"Flexible Smoothing with B-splines and Penalties\"](https://doi.org/10.1214/ss/1038425655) passes the [scikit-learn inclusion criteria](https://scikit-learn.org/stable/faq.html?highlight=inclusion#what-are-the-inclusion-criteria-for-new-algorithms) by some margin :smirk:"},{"labels":["New Feature","module:metrics"],"text":"#### Describe the workflow you want to enable\r\n\r\nI would like to have Wasserstein-2 distance metric added to sklearn, to enable distance calculations in a dataset that has uncertainties. E.g., KDTree, DBSCAN calculations in a real-world dataset that has non-negligible noise. Learning with uncertainty is becoming increasingly used in a lot of real-world applications, so I think it would be great to have Wasserstein-2 here. \r\n\r\n#### Describe your proposed solution\r\n\r\nThe Wasserstein-2 distance is one generalization of Euclidean distance between distributions. It (or another metric between distributions) should be used when the uncertainty between your datapoints is significant. For Gaussian uncertainties, with no covariances (the off-diagonal components of Sigma_1 and Sigma_2 covariance matrices) between each dimension, the formula for squared distance reduces to:\r\n![image](https://user-images.githubusercontent.com/7593028/80041962-d087a700-84cb-11ea-929d-a442dfc698ca.png)\r\n\r\nIn other words, in 1D, this is the normal Euclidean distance added to sigma_1 + sigma_2 - 2*sqrt(sigma_1 * sigma_2) under a square root sign. \r\n\r\nThe full formula for Gaussians can be found here: https://en.wikipedia.org/wiki/Wasserstein_metric#Normal_distributions, although I think assuming 0 covariance is a good starting point and simpler: simply include data matrix X, and uncertainty matrix eX of the same shape. \r\n\r\n#### Additional context\r\n\r\nThis issue was motivated by the discussion in the HDBSCAN repository: scikit-learn-contrib/hdbscan/issues/186.\r\n"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nRobust cross-version persistence and serialization of sklearn models.  \r\nMotivation: I like reproducibility and portability :) \r\n\r\n#### Describe your proposed solution\r\n\r\n`BaseEstimator.get_params()` and `set_params()` is great for getting the initialization state of models and a step towards full deserialization. I've already cracked serializing arbitrary nested data structs (comprising usual JSON primitives, plus datetimes, numpy arrays, and a few other custom data types) to JSON. What I need is a way of knowing which attributes comprise the fitted parameters (I shall refer to them as `state_params`, this is different than `fit_params`, I believe those are just `**kwargs` which get passed to `estimator.fit()`). If model classes implement a small API specifying which parameters are necessary, it's pretty easy to write any sort of serializer for the model (json, protobuf, whatever).\r\n\r\nI can achieve similar functionality by mutating `model.__dict__` but that doesn't provide any contract between scikit versions. \r\n\r\nSomething akin to\r\n```python\r\nclass SerializableMixin:\r\n    \"\"\"\r\n    All estimators should specify all the parameters necessary to \r\ncapture the full state of the model. \r\nTo implementing this mixin, populate _get_state_param_names, and the getter/setter methods\r\n    \"\"\"\r\n\r\n    @classmethod\r\n    @abstractmethod\r\n    def _get_state_param_names(cls):\r\n        \"\"\"Get name of state parameters (all params besides those returned by\r\n        _get_param_names) necessary to recreate model state\"\"\"\r\n        # Could probably store these as a class_level _state_param_names \r\n\r\n    def get_state_params(self, deep=True):\r\n        \"\"\"Get parameters for this estimator.\r\n        Return a mapping of state parameters and their values\r\n        \"\"\"\r\n        out = dict()\r\n        for key in self._get_state_param_names():\r\n            value = getattr(self, key, None)\r\n            if deep and hasattr(value, 'get_state_params'):\r\n                deep_items = value.get_params().items()\r\n                out.update((key + '__' + k, val) for k, val in deep_items)\r\n            out[key] = value\r\n        return out\r\n\r\n    def set_state_params(self, **params):\r\n        \"\"\"Set the state parameters of this estimator.\r\nThis is an all-or-nothing affair, you must provide every parameter that the model \r\nneeds to de/serialize or it'll throw an error\r\n        \"\"\"\r\n        some_check_that_target_supports_state_params()\r\n        some_check_that_all_state_params_are_provided()\r\n        if not params:\r\n            # Simple optimization to gain speed (inspect is slow)\r\n            return self\r\n        valid_params = self.get_params(deep=True)\r\n        for key, value in params.items():\r\n            ...\r\n        return self\r\n```\r\n\r\n#### Describe alternatives you've considered, if relevant\r\npickle, which throws the warning that inter-version pickled models may not be compatible. \r\nI searched through the issues for related terms and haven't found this specific approach mentioned. \r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nI'd like to use a `Generator` or `BitGenerator` with scikit-learn where I'd otherwise use `RandomState` or a `seed` int.\r\n\r\nFor example:\r\n```\r\nimport numpy as np\r\n\r\nbit_generator = np.random.PCG64(seed=0)\r\ngenerator = np.random.Generator(bit_generator)\r\n```\r\nand then use this for `random_state=` in scikit-learn:\r\n```\r\nfrom sklearn.datasets import make_classification\r\nfrom sklearn.model_selection import ShuffleSplit\r\nfrom sklearn.svm import LinearSVC\r\n\r\nX, y = make_classification(random_state=generator)  # or my bit_generator here \r\nclassifier = LinearSVC(random_state=generator)\r\ncv = ShuffleSplit(random_state=generator)\r\n```\r\n\r\nThis fails because these methods expect a `RandomState` object or `int` seed value. The specific trigger is `check_random_state(random_state)`. \r\n\r\n#### Describe your proposed solution\r\n\r\nThis would require:\r\n- changing code to allow `Generator` or `BitGenerator` as acceptable values for `random_state=..` in every function and class constructor that accepts `random_state`.\r\n- change `check_random_state()` to allow `Generator` and/or `BitGenerator` objects.\r\n- adding tests for using `Generator` or `BitGenerator` with classes or functions that consume `random_state` (similar to `seed` int or `RandomState` objects already)\r\n- change any internal code that assumes `RandomState` methods that aren't available with `Generator` (e.g. `rand`, `randn`, see )\r\n- maybe switch to using `Generator` instead of `RandomState` by default, when seed int is given\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nThe scope could include either or both of `BitGenerator` or `Generator`.\r\n\r\nIt might be easiest to allow only `BitGenerator`, and not `Generator`.\r\n- This allows flexibility. \r\n  - Users have control over seed and PRNG algorithm.\r\n- This is easier to implement (can be treated just like a `seed` int value).\r\n  - `BitGenerator` can be given to `RandomState`, and I think it then produces the same values as `Generator`.\r\n\r\n#### Additional context\r\n\r\nNumPy v1.17 added the `numpy.random.Generator` ([docs](https://numpy.org/doc/1.18/reference/random/generator.html)) interface for random number generation. \r\n\r\nOverview:\r\n- `Generator` is similar to `RandomState`, but enables different PRNG algorithms\r\n- `BitGenerator` ([docs](https://numpy.org/doc/1.18/reference/random/bit_generators/index.html)) encapsulates the PRNG and seed value, e.g. [`PCG64(seed=0)`](https://numpy.org/doc/1.18/reference/random/bit_generators/pcg64.html) \r\n- `RandomState` \"is considered frozen\" and uses \"the slow Mersenne Twister\" by default ([docs](https://numpy.org/doc/1.17/reference/random/legacy.html))\r\n- `RandomState` can work with non-Mersenne `BitGenerator` objects\r\n- More info in [NEP-19](https://numpy.org/neps/nep-0019-rng-policy.html), the design document from NumPy.\r\n\r\nThe API for `Generator` and `BitGenerator` looks like:\r\n\r\n```\r\nfrom numpy import random\r\n\r\nbit_generator = random.PCG64(seed=0)  # PCG64 is a BitGenerator subclass\r\ngenerator = random.Generator(bit_generator)\r\n\r\ngenerator.uniform(...)  # API is similar to RandomState\r\n\r\n# there's also this, for making a PCG64-backed Generator\r\ngenerator = random.default_rng(seed=0)\r\n```\r\n"},{"labels":["New Feature","module:manifold"],"text":"**#### Describe the workflow you want to enable**\r\n\r\nThe current sklearn initialization of TSNE is `'random'` by default. The other option is to initialize it with `'pca'`. However, when you set `init='pca'`, it uses the `svd_solver='randomized'` by default. What happens is if you rerun the algorithm it will keep generating different results. Currently the only way to avoid it is to set `random_state` to some value. Unless your dataset is larger than 500 features, there is no need to work with `'randomized'` svd since it doesn't produce consistent results and is only used for computational speed.\r\n\r\n\r\n**#### Describe your proposed solution**\r\n\r\nThe current code for TSNE initialization in sklearn is the following:\r\n```\r\nif isinstance(self.init, np.ndarray):\r\n    X_embedded = self.init\r\nelif self.init == 'pca':\r\n     pca = PCA(n_components=self.n_components, svd_solver='randomized',\r\n               random_state=random_state)\r\n    X_embedded = pca.fit_transform(X).astype(np.float32, copy=False)\r\nelif self.init == 'random':\r\n    # The embedding is initialized with iid samples from Gaussians with\r\n    # standard deviation 1e-4.\r\n    X_embedded = 1e-4 * random_state.randn(\r\n        n_samples, self.n_components).astype(np.float32)\r\nelse:\r\n    raise ValueError(\"'init' must be 'pca', 'random', or a numpy array\")\r\n```\r\nMy proposed solution is to set `svd_solver='auto'` which will solve the issue and help a lot because in this case it will use a `'full'` svd for  smaller datasets and switch to `'randomized'` for very large datasets.\r\nMy proposed code change:\r\n```\r\nif isinstance(self.init, np.ndarray):\r\n    X_embedded = self.init\r\nelif self.init == 'pca':\r\n     pca = PCA(n_components=self.n_components, svd_solver='auto',\r\n               random_state=random_state)\r\n    X_embedded = pca.fit_transform(X).astype(np.float32, copy=False)\r\nelif self.init == 'random':\r\n    # The embedding is initialized with iid samples from Gaussians with\r\n    # standard deviation 1e-4.\r\n    X_embedded = 1e-4 * random_state.randn(\r\n        n_samples, self.n_components).astype(np.float32)\r\nelse:\r\n    raise ValueError(\"'init' must be 'pca', 'random', or a numpy array\")\r\n```\r\n\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nThis can be done outside of the function by creating a PCA instance first and then using it to initialize TSNE and by default with 'auto' svd solver:\r\n```\r\npca = PCA()\r\ntsne = TSNE(init=pca)\r\n```\r\ncompared to current way with default 'randomized' svd solver:\r\n`tsne = TSNE(init='pca')`\r\nIn this case, to keep results consistent through multiple iteration you would need to set `random_state`, whereas in my proposed solution it will do full svd for most datasets."},{"labels":["New Feature","module:metrics"],"text":"#### Describing the workflow I want to enable\r\n\r\nThere are a few cases when there is a need to pass to the `classification_report` `target_names` parameter, which has a larger size than the number of unique classes in `y_true` or `y_pred` parameters.\r\n\r\nFor example, due to memory limits I am iterating through a great dataset and making a classification report for each part separately (outputting a dictionary). Then, after this step is done I need to aggregate those reports with some custom approach. It often happens so that some parts of the entire dataset do not necessarily have all the classes within. Thus, I can't use the `classification_report` directly in this case.\r\n\r\n#### Describing my solution\r\nAdding a possibility to pass a dictionary (or a list of greater size) as a `target_names` parameter, that would map classes to their names, would solve this problem. Perhaps a new parameter will be needed to specify what to do in cases when there are no samples in both `y_true` and `y_pred` of a specific class (zero-support classes): should those classes be printed out or added to the resulting dictionary or not. Or, some kind of default behavior can be implemented, that would not limit the usage in a general case.\r\n\r\n#### Additional context\r\nRefers to `sklearn.metrics.classification_report`."},{"labels":["New Feature","module:model_selection"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nWhen splitting time series data, data is often split without shuffling. But now `train_test_split` only supports stratified split with `shuffle=True`.\r\nIt would be helpful to add stratify option for `shuffle=False` also.\r\n\r\n#### Describe your proposed solution\r\n\r\nAdd option `shuffle` in `StratifiedShuffleSplit`, and only permutate indices when `shuffle` option is `True`.\r\nThen, use `StratifiedShuffleSplit` with shuffle option in `train_test_split`.   \r\nFor example:\r\n```\r\ndef train_test_split(*arrays, **options):\r\n    ...\r\n    if shuffle is False:\r\n        if stratify is not None:\r\n            cv = StratifiedShuffleSplit(test_size=n_test, train_size=n_train,\r\n                         random_state=random_state, shuffle=False)\r\n            train, test = next(cv.split(X=arrays[0], y=stratify))\r\n        else:\r\n            train = np.arange(n_train)\r\n            test = np.arange(n_train, n_train + n_test)\r\n    ...\r\n\r\nclass StratifiedShuffleSplit(BaseShuffleSplit):\r\n    def __init__(self, n_splits=10, test_size=None, train_size=None,\r\n                 random_state=None, shuffle=True):\r\n        super().__init__(\r\n            n_splits=n_splits,\r\n            test_size=test_size,\r\n            train_size=train_size,\r\n            random_state=random_state)\r\n        self._default_test_size = 0.1\r\n        self.shuffle=shuffle\r\n\r\n    def _iter_indices(self, X, y, groups=None):\r\n        n_samples = _num_samples(X)\r\n        y = check_array(y, ensure_2d=False, dtype=None)\r\n        \r\n        ...\r\n\r\n        rng = check_random_state(self.random_state)\r\n\r\n        for _ in range(self.n_splits):\r\n            # if there are ties in the class-counts, we want\r\n            # to make sure to break them anew in each iteration\r\n            n_i = _approximate_mode(class_counts, n_train, rng)\r\n            class_counts_remaining = class_counts - n_i\r\n            t_i = _approximate_mode(class_counts_remaining, n_test, rng)\r\n\r\n            train = []\r\n            test = []\r\n\r\n            for i in range(n_classes):\r\n                if self.shuffle:\r\n                    permutation = rng.permutation(class_counts[i])\r\n                    perm_indices_class_i = class_indices[i].take(permutation,\r\n                                                                 mode='clip')\r\n                else:\r\n                    perm_indices_class_i = class_indices[i]\r\n\r\n                train.extend(perm_indices_class_i[:n_i[i]])\r\n                test.extend(perm_indices_class_i[n_i[i]:n_i[i] + t_i[i]])\r\n\r\n            if self.shuffle:\r\n                train = rng.permutation(train)\r\n                test = rng.permutation(test)\r\n\r\n            yield train, test\r\n```\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nAlternative idea is adding split process directly in train_test_split (like case `Shuffle=False` and stratify is None), or add new method. But that new code is very similar to StratifiedShuffleSplit, so modifying StratifiedShuffleSplit would be better."},{"labels":["New Feature","module:ensemble","module:tree"],"text":"The ``auto`` rule for ``max_features`` in decision trees is equal to ``sqrt``, i.e., ``max_features=sqrt(n_features)``. I argue that this is not a good choice for a small number of features, since this throws away too much information in cases in which the amount of data is limited.\r\n\r\n#### Suggsted Change\r\nI suggest to make sure that all features are used if the number of features is small. This could for example be ``max_features=max(10, sqrt(n_features))``.  I know that the number 10 can be debated, but it would at least help for a small number of features and would not hurt performance, I suppose.\r\n\r\nIt might make sense to change ``sqrt`` and ``log2`` in a similar way, but that can be discussed.\r\n\r\n#### Context\r\nThis comment refers to ``sklearn.tree.DecisionTreeClassifier`` and ``sklearn.ensemble.GradientBoostingClassifier``.\r\n"},{"labels":["New Feature","module:datasets"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\nCurrently `make_regression` does not do anything with categorical variables. You can only simulate continuous variables that can then be converted to categorical variables (e.g., `1 if x>0 else 0`). However in many cases it is necessary to have categorical variables (e.g., a city ID).\r\n\r\nIn many cases these categorical variables are not equally distributed. There may be many rows in a data set for some category values while few rows for other data. Thus the fraction of categories present should be available as an option like they are for outcome variables in make_classification.\r\n\r\nIf this is already a feature somewhere and I am unaware, I am happy to contribute to that feature instead."},{"labels":["New Feature","module:cluster"],"text":"\r\n#### Describe the workflow you want to enable\r\nIt will be helpful to have to have random state seed in  agglomerative clustering like in Kmeans\r\n\r\nclass sklearn.cluster.KMeans(n_clusters=8, init='k-means++', n_init=10, max_iter=300, tol=0.0001, precompute_distances='auto', verbose=0, **random_state=None**, copy_x=True, n_jobs=None, algorithm='auto')\r\n\r\n\r\n\r\n#### Describe your proposed solution\r\nCurrent \r\nclass sklearn.cluster.AgglomerativeClustering(n_clusters=2, affinity='euclidean', memory=None, connectivity=None, compute_full_tree='auto', linkage='ward', distance_threshold=None)\r\n\r\nProposed\r\nclass sklearn.cluster.AgglomerativeClustering(n_clusters=2, affinity='euclidean', memory=None, connectivity=None, compute_full_tree='auto', linkage='ward', distance_threshold=None,**random_state=seed**)\r\n\r\n"},{"labels":["New Feature","module:decomposition","module:manifold"],"text":"Suggestion made by @ogrisel in PR #12069. \r\n\r\nThese two names mean the same thing, we should probably deprecate one.\r\nNote that equivalent parameters are probably hidden in other models, this is an opportunity to look for them.\r\n\r\n"},{"labels":["New Feature","module:svm"],"text":"Hi, \r\n\r\nIn svm.LinearSVC there is a parameter \"fit_intercept\" which controls the bias and can be turned on or off. Why isn't there such an option for non-linear svm? Could you please add it or guide me towards adding it? "},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n\r\n- In case data is time dependent, it takes a lot of time for the programmer to take it to a more stale domain which is the frequency domain. Sklearn users will be able to transform their data, and fit it directly \r\n\r\n- The solution consists of providing a script with a set of functions that will allow the user to easily transfer his data from time domain into frequency domain. This kind of transformation is very useful in signal processing. It makes time series more integrable to sklearn. \r\n\r\n\r\n\r\n- The idea behind is to make unified tools that make data easily integrable with different sklearn algorithms"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\nI was running sklearn.svm.SVC, and it took five hours on the data I was using.  The results were good, but I think users should get an estimated time for the length of the program's run.  For instance, I know that keras has an ETA feature.\r\n"},{"labels":["New Feature","module:model_selection"],"text":"Hi,\r\n In _fit_and_score method in sklearn/model_selection/_validation, I want to use sample weights to score train data ._fit_and_score calls  _score method of this file and that does not take sample weights as an additional argument.  I am not proficient in programming, wanted to know will there be any unintended consequences if I pass sample weights argument or is it safe to pass sample weights in _score method ?"},{"labels":["New Feature","module:ensemble"],"text":"This is a placeholder issue for sparse matrices support in the Histogram-based GBDT estimators.\r\n\r\nI guess #15550 should be tackled first.\r\n\r\n----\r\n\r\n\r\nBelow are my thoughts and potential plan on the matter, feel free to ignore.\r\n\r\nBinning:\r\n\r\nWe need a utility to compute quantiles on sparse data, and we need to map a float sparse matrix to a binned sparse matrix given those quantiles.  To avoid having to densify `X_binned`, the zeros in `X` should be mapped to bin 0, even if that's not their actual bin (called `actual_bin_zeros`). I guess that means all the bins in `range(0, actual_bin_zeros)` have an offset of 1, i.e. now they're actually mapped to `range(1, actual_bin_zeros + 1)`.  Though maybe we can avoid the offset by distinguishing between explicit and implicit zeros, IDK.\r\n\r\nHistograms:\r\n\r\nWe need a histogram builder that can handle sparse data *and* that is aware of `actual_bin_zeros` in some way. We can't just build the histograms as usual, because that would mean that the zeros would be treated as the lowest value in the splitter.  In the histogram, the zeros should be placed in their proper bin, i.e. at index `actual_bin_zeros`. This way, the splitter can be left unchanged. The offset of the bins in `range(1, actual_bin_zeros)` should also be canceled here.\r\n\r\nWhen building a histogram, we can focus only on the non-zeros entries. We already know the totals `sum_gradients`, `sum_hessians`, and `count` at any given node. So we can just go through the samples that have non-zero values and fill-in the histogram at their respective bins, and then set `hist[actual_bin_zeros]['grad'] = total_sum_gradients - hist[:]['grad'].sum()`.\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nWith many datasets, variation in fold scores is high, and so GridSearchCV does not always yield the same best hyperparameters.\r\n\r\n#### Describe your proposed solution\r\nAdd a `n_runs=1` keyword argument to GridSearchCV. For any given hyperparameter combination, CV will be performed `n_runs` times and average results will be returned. When `n_runs=1`, behavior of GridSearchCV doesn't change. If someone wants to get different hyperparameters and average them instead, they can just run GridSearchCV().fit() multiple times and average results manually."},{"labels":["New Feature"],"text":"Following PR #13511 it appears that there is not reference benchmark for SVMs in scikit-learn or in any side-project (sklearn-contrib). \r\n\r\nThis seems quite risky on the long run, maybe we should create one - especially to quantify the impact of changes to C code such as in PR #13511 .\r\n\r\nI have been working quite a bit on this topic of creating reference benchmarks in the past years, leading to the creation of tools in the pytest ecosystem: [`pytest-cases`](https://smarie.github.io/python-pytest-cases/) and [`pytest-harvest`](https://smarie.github.io/python-pytest-harvest/), with a beginning of tutorial [here](https://smarie.github.io/pytest-patterns/examples/data_science_benchmark/) (outdated I'm afraid). I can therefore certainly try to help with a benchmark framework structure if you find such an idea interesting. \r\n\r\nHowever I do not know a good set of reference datasets to start with (apart from creating challenging ones \"by hand\").\r\n"},{"labels":["Moderate","New Feature","help wanted","module:svm"],"text":"Following PR #13511 a new random number generator was created: [`bounded_rand_int`](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/svm/src/newrand/newrand.h#L36)\r\n\r\nIt currently has no dedicated unit test, which could be dangerous on the long run. I suggest that we create a python wrapper for it and create at least one dedicated python unit test to ensure correct randomization quality on all platforms.\r\n\r\nFor example the test could generate various random integers with various bounds, and assess that the resulting histogram is \"flat\" (uniform distribution). I do not know if we need to go for dedicated [uniformity tests like Chi Square or Kolmogorov Smirnov](https://math.stackexchange.com/questions/2435/is-there-a-simple-test-for-uniform-distributions?newreg=3365566cb0ac4c9585002989243f191c)...\r\n"},{"labels":["New Feature","module:metrics"],"text":"As for many users, when I first encountered sklearn a few years ago I was surprised to see that there is a hardcoded behaviour in the `r2_score` to handle the case where training data is constant.\r\n\r\n```python\r\nimport sys\r\nfrom sklearn.metrics import r2_score\r\n\r\nr2_constant_train_nonexact_preds = r2_score(y_true=[-1, -1, -1, -1], \r\n                                            y_pred=[-1, -1, -1, -1 + sys.float_info.epsilon])\r\nprint(\"Constant train, non-exact predictions. Score should be -Inf. Found: %s\" % r2_constant_train_nonexact_preds)\r\n\r\nr2_constant_train_exact_preds = r2_score(y_true=[-1, -1, -1, -1], \r\n                                         y_pred=[-1, -1, -1, -1])\r\nprint(\"Constant train, exact predictions. Score should be NaN. Found: %s\" % r2_constant_train_exact_preds)\r\n```\r\n\r\nyields:\r\n\r\n```\r\nConstant train, non-exact predictions. Score should be -Inf. Found: 0.0\r\nConstant train, exact predictions. Score should be NaN. Found: 1.0\r\n```\r\n\r\nOf course this has been done to make sure that the scoring function always return finite scores. Still, I believe that this should be improved for readability and usability. \r\n\r\nI suggest to add a new `ensure_finite=True` argument to the `r2_score` function. The documentation of this argument would explicitly state that when `True` (default), the score is turned to `1.0` or `0.0` when the data is constant so that model comparisons do not fail (typically in cross-validation). This new argument would allow users to set it to `False` to get the \"true\" R² definition, for other kind of analysis.\r\n\r\nWhat do you think ? I can provide a PR if you think that this brings value.\r\n"},{"labels":["Easy","New Feature","good first issue","help wanted","module:decomposition"],"text":"#### Describe the workflow you want to enable\r\n```\r\nimport scipy.sparse as ss\r\nfrom sklearn.decomposition import TruncatedSVD\r\n\r\nX = ss.random(1000, 100, format='csc')\r\ntsvd = TruncatedSVD().fit(X)\r\n\r\ntsvd.transform(X)\r\n```\r\nCurrently, in the last line, `transform(X)` will first convert X from csc to csr and then apply a dot product. I think this conversion is unnecessary, costs additional time, and one should better rely on scipy.sparse (or `safe_sparse_dot`) to convert if necessary.\r\n\r\n#### Describe your proposed solution\r\nAllow `csc` in\r\nhttps://github.com/scikit-learn/scikit-learn/blob/557218c021d58c7455b26820f331a9c388c9cb4d/sklearn/decomposition/_truncated_svd.py#L215\r\n\r\n#### Additional context\r\nA PR with a benchmark result might be nice.\r\n"},{"labels":["New Feature","module:metrics"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nCalculating the ERR metric - http://olivier.chapelle.cc/pub/err.pdf (2009. currently 706 citations). Compared to nDCG at https://opensourceconnections.com/blog/2019/12/09/demystifying-ndcg-and-err/\r\n\r\n#### Describe your proposed solution\r\n\r\nAdd this algorithm with the same API as [sklearn.metrics.ncdg_score](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.ndcg_score.html#sklearn.metrics.ndcg_score)\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nImplement it myself, include another library such as http://rankeval.isti.cnr.it/docs/rankeval.metrics.html.\r\n- other libraries use different APIs\r\n- other libraries may have questionable support or quality control\r\n\r\n#### Additional context\r\n\r\n\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nThis is possibly a duplicate of #6424. I'd love to do a pipeline.fit(X) with a pandas dataframe with named columns, then a pipeline.get_feature_names() as input into an eli5 explainer, with scikit-learn being smart enough to call get_feature_names() for those transformers it makes sense to do so (OneHotEncoder, SelectFromModel, etc.)\r\n\r\n#### Describe your proposed solution\r\nI'm not sure what a good solution might be -- one start might be to implement get_feature_names() for all transformers and return just the input column names if it doesn't change them, as would be the case for a Binarizer, for example.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context"},{"labels":["New Feature","module:linear_model"],"text":"`Scikitlearn` is the de facto home for all kinds of modeling algorithms. It has a plethora of\r\nalgorithms but still one thing that seems to be missing is the implementation of `LogisticRegression` where we can have p-values.\r\n\r\n\r\nIt would be great if we have something like `model.p_values_` attribute for the Logistic Regression Models.\r\n\r\nI know that there is another statistical library `statsmodels` which provides p_values, but a lot of programmers use `sklearn` and they build models based on this library. It is somewhat\r\ninconvenient to use `statsmodels` just to get p-values and run other models such as `Random Forest` in `sklearn`.\r\n\r\nAfterall, the API of `statsmodels` and `sklearn` are quite different. `sklean` is trend setter and \r\nmost people feel comfortable with `sklearn` API, however, `statsmodels` follows R-programming API and they are quite different.\r\n\r\nIn conclusion, It would be great if `sklearn` provides `p-values` for linear models.\r\n\r\nI am eagerly waiting for the implementation in future versions of `sklearn`."},{"labels":["New Feature","module:ensemble"],"text":"#### Background\r\nRandom Forests: When the \"Some inputs do not have OOB scores.\" warning is emitted during training, it appears that the scoring method calculates the score using the inputs with the OOB scores only. E.g. if calculating accuracy, it is calculated as the ratio of number of correctly classified inputs vs. the number of inputs with the OOB scores (non-nan values).\r\n#### Proposed solution\r\nIt would be interesting to be able to get the accuracy calculated as the ratio of number of correctly classified inputs vs. the number of all inputs considered, probably by introducing a new parameter. This would automatically eliminate cases in GridSearchCV where the num_estimators is too low. This is currently more challenging to achieve. It would be also helpful to mention this behavior in the docs."},{"labels":["New Feature","module:model_selection"],"text":"#### Describe the workflow you want to enable\r\n\r\nI would like to have an option in the GridSearchCV and RandomizedSearchCV\r\nthat enables storing of the (re)fitted estimator for all parameter combinations.\r\n\r\nThe background is that I'm working with highly correlated timeseries data and try to find the best  \r\nway to set up cross validation.\r\n\r\nI have a test set set aside and want to examine for which cross validation strategy, the CV score correlates best with the score on the test set.\r\n\r\nCurrently, only the \"best\" estimator is stored thus not allowing to evaluate the others on the test set.\r\n\r\n#### Describe your proposed solution\r\n\r\nA slight modification of BaseSearchCV should do the trick. I would give it a shot if appreciated and the above makes sense.\r\n"},{"labels":["New Feature","module:decomposition"],"text":"`PCA` allows to retrieve the number of components with `n_components_` attribute; this is, however, not possible with `SparsePCA` (both PCA and SparsePCA accept `n_components` argument).\r\n\r\nWould it make sense to enable accessing `n_components_` on PCA too? Please, note that this would be different from `n_components`, which is already available, but represents an unprocessed input argument, i.e. None if nothing was passed).\r\n\r\nThe current PCA behaviour:\r\n```python\r\nfrom sklearn.decomposition import PCA, SparsePCA\r\nfrom sklearn import datasets\r\n\r\niris = datasets.load_iris()\r\npca = PCA()\r\npca.fit(iris.data)\r\nassert pca.n_components_ == 4\r\nassert pca.n_components == None\r\nassert len(pca.components_) == 4\r\n\r\npca_3 = PCA(n_components=3)\r\npca_3.fit(iris.data)\r\nassert pca_3.n_components_ == 3\r\nassert pca_3.n_components == 3\r\nassert len(pca_3.components_) == 3\r\n```\r\n\r\nExisting SparsePCA behaviour:\r\n\r\n```python\r\nspca = SparsePCA()\r\nspca.fit(iris.data)\r\nassert spca.n_components == None\r\nassert len(spca.components_) == 4\r\n\r\nspca_3 = SparsePCA(n_components=3)\r\nspca_3.fit(iris.data)\r\nassert spca_3.n_components == 3\r\nassert len(spca_3.components_) == 3\r\n```\r\n\r\nProposed SparsePCA behaviour:\r\n\r\n```python\r\nassert spca.n_components_ == 4\r\nassert spca_3.n_components_ == 3\r\n```\r\n\r\nThis could also be added to `KernelPCA` and other PCA methods. Implementation-wise the code for calculating the number of components `PCA` could be generalised (this is replacing `None` with the actual number and/or trimming by the number of features or samples; I think that it might be placed  `_BasePCA`, but actually neither SparsePCA nor KernelPCA descends from it). Is this the right direction?\r\n\r\nOn a related note, would make sense to have a computed property name `n_non_trivial_components_` to give the number of components which have non-zero loadings?\r\n\r\nEdit: a simple workaround is to use `len(spca.components_)`, which works equally well for sparse and dense PCA - I am not sure of the addition of `n_components_` is needed, but the point is that it would be great to have a consistent interface for all PCA methods!"},{"labels":["Documentation","New Feature","help wanted"],"text":"I am trying to update the Gentoo package for scikits_learn (different name, but it refers to this package).\r\n\r\nThis is the [build.log](https://github.com/scikit-learn/scikit-learn/files/4364837/build.log).\r\n\r\nI presume the issue is:\r\n\r\n```\r\nE               urllib.error.URLError: <urlopen error [Errno -3] Temporary failure in name resolution>\r\n```\r\n\r\nThis would be because Gentoo sandboxes the installation, in order to avoid security issues resulting from packages dynamically downloading data the identitiy of which is not guaranteed by matching a checksum recorded by the package manager. So it's not surprising, and potentially an easy fix.\r\n\r\n1. Is this the only issue here?\r\n2. If so do you have a test data archive which I can download via the package manager? (i.e. via `wget`) \r\n"},{"labels":["New Feature","Performance"],"text":"We should add a folder with [airspeed velocity (ASV)](https://pypi.org/project/asv/)  benchmarks inside scikit-learn.\r\n\r\nASV benchmarks done by @jeremiedbb exist in  https://github.com/jeremiedbb/scikit-learn_benchmarks but they currently don't get enough exposure (i.e. contributors are not aware about them). I think we should include them e.g. under `asv_bench/` folder and remove redundant scripts from `benchmarks/` folder.\r\n\r\nI just made a PR to pandas, and it's nice when reviewers can ask to add an ASV benchmark for a PR claiming to improve performance. For this to work they need to be inside the scikit-learn repo. Whether we run them somewhere and where is a secondary concern IMO. \r\n\r\nFor the docs we can \"steal\" part of the section from the pandas dev guide https://pandas.pydata.org/docs/development/contributing.html#running-the-performance-test-suite"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nSupport Python typing, which is available in Python 3.5+, compatible with scikit-learn. This can enable tools to automatically get the estimator arg types (e.g., linters), for example. And it's a Python standard now.\r\n\r\n#### Describe your proposed solution\r\n\r\nFor example, `SVC` could be like this:\r\n\r\n```python\r\ndef __init__(\r\n    self,\r\n     C: float = 1.0,\r\n     kernel: Union[Callable[[np.ndarray, np.ndarray], np.ndarray],\r\n                   Literal[\"linear\", \"poly\", \"rbf\", \"sigmoid\", \"precomputed\"]] = \"rbf\",\r\n     degree: int = 3,\r\n     gamma: Union[float, Literal[\"scale\", \"auto\"]] = \"scale\",\r\n     coef0: float = 0.0,\r\n     shrinking: bool = True,\r\n     probability: bool = False,\r\n     tol: float = 1e-3,\r\n     cache_size: int = 200,\r\n     class_weight: Optional[Union[Mapping[int, float], Literal[\"balanced\"]]] = None,\r\n     verbose: bool = False,\r\n     max_iter: int = -1,\r\n     decision_function_shape: Literal[\"ovo\", \"ovr\"] = \"ovr\",\r\n     break_ties: bool = False,\r\n     random_state: Optional[Union[int, RandomState]] = None,\r\n ) -> None:\r\n```\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nAn alternative is to keep the types just in the docstrings. However, is hard for tools to parse the arg types."},{"labels":["New Feature","module:ensemble"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nIf the target is discrete multiclass, but ordinal (ordered) in nature (e.g. Likert scale, user ratings, preference levels), as opposed to nominal, would be great to have support for loss function that recognize the ordinal nature of the target variable.\r\n\r\n(Note the difference between \"learning-to-rank\" and \"ordinal classification\". \"learning-to-rank\", implemented by popular boosting libraries XGBoost, LightGBM, CatBoost, produces relative ordering between items, and the output predictions are not class labels, while \"ordinal classification\" does produce class labels. Here is a blog post to introduce the reader to [loss functions for ordinal classification](http://fa.bianp.net/blog/2013/loss-functions-for-ordinal-regression/).)\r\n#### Describe your proposed solution\r\nAll-Threshold loss is the proposed solution. [Rennie, et al](https://ttic.uchicago.edu/~nati/Publications/RennieSrebroIJCAI05.pdf) described the All-Threshold loss function. Here is an easy-to-understand blog post introducing readers to [loss functions for ordinal classification](http://fa.bianp.net/blog/2013/loss-functions-for-ordinal-regression/).\r\nFabian, et al implemented the [mord](https://github.com/fabianp/mord) package using logistic regression with All Threshold Loss\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nHistorically, in Logistic Regression, popular approach proposed by McCullagh ([paper](https://www.jstor.org/stable/2984952)) uses Cumulative Logit link function. Here is the main disadvantage of this approach:\r\n> Probabilistic models for discrete ordinal response have also\r\nbeen studied in the statistics literature [McCullagh, 1980;\r\nFu and Simpson, 2002]. However, the models suggested are\r\nmuch more complex, and even just evaluating the likelihood\r\nof a predictor is not straight-forward.\r\nFrom Page 2 Rennie, Jason D. M. and Srebro, Nathan . [Loss functions for preference levels: Regression with discrete ordered labels](https://ttic.uchicago.edu/~nati/Publications/RennieSrebroIJCAI05.pdf).\r\n\r\nNote that Cumulative Logit is the probabilistic approach, proposed by McCullagh in 1980.\r\nAll threshold loss is much easier to scale to large datasets, which is very much the purpose of HistGradientBoosting.\r\n#### References\r\nPapers\r\n[1] Rennie, Jason D. M. and Srebro, Nathan, Loss functions for preference levels: Regression with discrete ordered labels.\r\n[2] Dembczynski, Krzysztof and Kotlowski, Wojciech and Slowinski, Roman. Ordinal Classification with Decision Rules.\r\n[3] Pedregosa, Fabian and Bach, Francis R. and Gramfort, Alexandre. On the Consistency of Ordinal Regression Methods.\r\n[4] Li, Ling and Lin, Hsuan-Tien. Ordinal Regression by Extended Binary Classification.\r\n"},{"labels":["New Feature","module:metrics"],"text":"As per the suggestion by @ogrisel, @thomasjpfan  and @jnothman in #15007 , this function is required.\r\n\r\nAlso, need `neg_mare` scorer."},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\nAs described in 5.3 section of the [original paper](https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/icdm08b.pdf?q=isolation-forest), the performance of iForest on high dimensional data can be improved via selecting split attribute based on kurtosis, is it possible to add support for choosing splitting criteria in iForest?\r\n"},{"labels":["New Feature","module:ensemble","module:tree"],"text":"#### Describe the workflow you want to enable\r\nIf the target `y` is (approximately) Poisson, Gamma or else Tweedie distributed, it would be beneficial for tree based regressors to support [Tweedie deviance loss functions](https://scikit-learn.org/stable/modules/model_evaluation.html#mean-poisson-gamma-and-tweedie-deviances) as splitting criterion. This partially addresses #5975.\r\n\r\n#### Describe your proposed solution\r\nIdeally, one first implements\r\n- [ ] differentiable loss functions #15123\r\n\r\nand then adds the different loss criteria to the tree based models:\r\n- [ ]  `DecisionTreeRegressor`\r\n- [ ] `RandomForestRegressor`\r\n- [ ] `GradientBoostingRegressor`\r\n- [ ] `HistGradientBoostingRegressor`.\r\n\r\n#### Open for Discussion\r\nFor Poisson and Tweedie deviance with `1<=power<2`, ther target `y` may be zero while the prediction `y_pred` must be strictly larger than zero. A tree might find a split where one node has  `y=0` for all samples in that node, resulting naively in `y_pred = mean(y) = 0` for that node. I see 3 different solutions to that:\r\n1. Use a log-link function, i.e. predict `y_pred = np.exp(tree)`\r\n    See #16692 for HistGradientBoostingRegressor. This may be no option for DecisionTreeRegressor.\r\n2. Use a splitting rule that forbids splits where one node has `sum(y)=0`.\r\n    One might also introduce some option like `min_y_weight`, such that splits with  `sum(sample_weight*y) < min_y_weight` are forbidden.\r\n3. Use some form of parent child average `y_pred = a * mean(y) + (1-a) * y_pred_parent` and forbid further splits, see [1].\r\n(Bayes/credibility theory motivates to set `a = sum(sample_weight*y)/(gamma+sum(sample_weight*y))` for some hyperparameter `gamma`.)\r\n\r\nThere is also a dirty solution that allows `y_pred=0` but sets the value `min(eps, y_pred)` in the loss function for some tiny value of `eps`.\r\n\r\n#### References\r\n[1] [R rpart library](https://cran.r-project.org/web/packages/rpart/vignettes/longintro.pdf), chapter 8 Poisson regression"},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nAdd support for multilabel/multioutput top-k accuracy. Multiclass setting being implemented here #16625 \r\n\r\n#### Additional context\r\n\r\n- Some multilabel classifiers treat each label independently, when it's the case does it make sense to rank independent predicted scores?\r\n\r\n- Multioutput-multiclass approach treats each output as a multiclass problem, therefore we could consider an answer for a sample as correct when all outputs are correct.\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Would like to add feature scaling in support vector regression model\r\n\r\n#### We need to add the code of feature scaling to standardize the data for faster processing.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n"},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nNow, sklearn LDA only supports normalized transform output, which is the `transform`  method. But I still need to use the non-normalized output, so could you please open this feature?\r\n\r\n#### Describe your proposed solution\r\nopen this `_unnormalized_transform` as an official method.\r\n\r\nThanks\r\n"},{"labels":["New Feature","module:linear_model"],"text":"#### Internal feature\r\nA prerequisite for several possible additional (Newton-like) solvers for `TweedieRegression` is the hessian or fisher matrix.\r\n\r\n#### Issues/PR that depend on this\r\n #16634, #16637, #16635\r\n\r\n#### Discussion\r\n##### Hessian vs Fisher\r\nThe [Fisher information matrix](https://en.wikipedia.org/wiki/Fisher_information) is the expected hessian. It is always (semi-) positive definite (as it is the variance of the score). This has advantages for stability of solvers.\r\n##### Full matrix vs diagonal part\r\nThe hessian and fisher matrix (without penalty) for GLMs has the following special structure `X.T @ W @ X` where `W` is a diagonal matrix (depending on the family, the link function and the coefficients/weights). Some solvers might prefer to get the whole matrix, others only the diagonal part `W`."},{"labels":["New Feature","module:impute"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nThank you for all the work that's been done on [IterativeImputer](https://scikit-learn.org/stable/modules/generated/sklearn.impute.IterativeImputer.html#sklearn.impute.IterativeImputer). I'm excited to use it. I see that it's still in the experimental stage, which makes me hesitant to use it in production code for two reasons:\r\n\r\n1. There must be some outstanding work that needs to be completed before it can be considered stable\r\n2. It's not stable and can be changed in any release\r\n\r\nSo my questions are: \r\n1. What work needs to be completed before IterativeImputer can be considered stable? I see [work is going on to implement an example of multiple imputation with IterativeImputer](https://github.com/scikit-learn/scikit-learn/pull/13025), but it's unclear if that work could result in changes to IterativeImputer itself.\r\n2. What's the timeline for making IterativeImputer stable? \r\n\r\n#### Describe your proposed solution\r\n\r\nIt would be nice to have more details in the IterativeImputer documentation around what assumptions we can rely on about the imputer moving forward, and what assumptions we cannot. \r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n"},{"labels":["New Feature","module:linear_model"],"text":"The L1 penalty with  coordinate descent solver for GLM was proposed in https://github.com/scikit-learn/scikit-learn/pull/9405 and was not included in the minimal implementation merged in https://github.com/scikit-learn/scikit-learn/pull/14300.\r\n\r\nIt would be be good to add it, however care must to taken to avoid redundancy with the existing coordinate descent solver in ElasticNet.\r\n\r\nPreliminary benchmarks were done in https://github.com/scikit-learn/scikit-learn/pull/9405#issuecomment-499578511\r\n\r\nAlso see: https://github.com/scikit-learn/scikit-learn/issues/16634 https://github.com/scikit-learn/scikit-learn/issues/16635\r\n"},{"labels":["New Feature","module:linear_model"],"text":"The newton_cg solver for GLMs and TweedieRegression in particular was proposed in https://github.com/scikit-learn/scikit-learn/pull/9405 , it might be good to add it.\r\n\r\nPreliminary benchmarks for it were done in https://github.com/scikit-learn/scikit-learn/pull/9405#issuecomment-499578511 .\r\n\r\nIf we add it, it would be good to re-use `_newton_cg` function from `sklearn/utils/optimize.py` as much as possible (also related https://github.com/scikit-learn/scikit-learn/issues/14248).\r\n\r\nAlso see: https://github.com/scikit-learn/scikit-learn/issues/16634 https://github.com/scikit-learn/scikit-learn/issues/16637"},{"labels":["New Feature","module:linear_model"],"text":"The [Iteratively reweighted least squares](https://en.wikipedia.org/wiki/Iteratively_reweighted_least_squares) (IRLS) solver, initially proposed in https://github.com/scikit-learn/scikit-learn/pull/9405 could be used in several linear models, for instance,\r\n - LogisticRegression\r\n - TwieedieRegression (including Poisson & Gamma) etc\r\n\r\nPreliminary benchmarks for TweedieRegression were done in https://github.com/scikit-learn/scikit-learn/pull/9405#issuecomment-499578511 and demonstrated that IRLS could be competitive (or faster than other solvers including LBFGS) when n_features ≤ 10-20. More detailed benchmarks with a careful consideration of the stopping criterion would be necessary.\r\n\r\nAlso see: https://github.com/scikit-learn/scikit-learn/issues/16635 https://github.com/scikit-learn/scikit-learn/issues/16637"},{"labels":["New Feature"],"text":"Currently most of the plotting tools available in scikit-learn are related to classification (https://scikit-learn.org/stable/modules/classes.html#id3). It would be good to add more visualizers for regressions.\r\n\r\nPlotting y_true as a function of y_pred, or the residuals, as done frequently is simple enough and probably doesn't need a dedicated plot function.\r\n\r\nOther approaches worth considering were discussed in https://github.com/scikit-learn/scikit-learn/pull/10084,\r\n - [Lorentz curves](https://en.wikipedia.org/wiki/Lorenz_curve#Definition_and_calculation), and the associated Gini coefficient computed as AUC:  see [example](https://95549-843222-gh.circle-artifacts.com/0/doc/auto_examples/linear_model/plot_tweedie_regression_insurance_claims.html) in https://github.com/scikit-learn/scikit-learn/pull/14300. This was earlier proposed https://github.com/scikit-learn/scikit-learn/pull/10084 and more recently in https://github.com/scikit-learn/scikit-learn/pull/15176 (and in particular https://github.com/scikit-learn/scikit-learn/pull/15176/commits/a608c703b5960994c569e0191775c3dfa0c805e0). It's more of a ranking metric than a regression metric.\r\n\r\n - The name varies, but the idea is to select a numerical feature, bin it, and compare the mean of y_true with the mean of y_pred for each bin. This allows to evaluate how well the model performs for different sub-categories of data. Example in https://95549-843222-gh.circle-artifacts.com/0/doc/auto_examples/linear_model/plot_poisson_regression_non_normal_loss.html Somewhat related to partial dependence plots.\r\n\r\nThere are a few additional ones in [yellowbrick](https://www.scikit-yb.org/en/latest/api/regressor/index.html), I'm not convinced they would be that useful in scikit-learn.\r\n\r\nNot saying we need all of them, but just wanted to move this discussion from outside the GLM PR."},{"labels":["New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\n#### Describe your proposed solution\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n"},{"labels":["New Feature","module:ensemble"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nAllow pre-fit models to stacking model such as `StackingClassifier` and `StackingRegressor` so that the final estimator can use their predictions directly without fitting the model on the given training data. \r\n\r\nThe motivation for this functionality originates from situation in which it is not possible to fit model on the entire dataset (due to compliance or other non-technical restrictions) or simply a research question to test with different models trained on different data. I feel this added flexibility could be beneficial in the long term. \r\n\r\n#### Describe your proposed solution\r\n\r\nOne possible solution I have in mind is to exclude fitted estimators during fitting. We can iterate through the list of estimators and see if they have been fitted (which sklearn already has helper functions). If yes, we skip them when fitting the estimators. \r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nAnother option I thought about was to ask users to specify if they want to exclude fitting certain estimators. But in this case, I feel it is safer to check the estimators' status regardless, which makes the manual input somewhat redundant. \r\n\r\n"},{"labels":["New Feature"],"text":"(if there is interest in this feature, I'm also interested in implementing it via PR based on guidance here)\r\n\r\n#### Describe the workflow you want to enable\r\nWhen dealing with hierarchical classification tasks, it is sometime useful to have metrics that take into account the class hierarchy.  For example, if classifying clothing like:\r\n\r\n                     Clothing\r\n                 /                   \\\r\n        Shirts                     Pants\r\n        /    \\                        /    \\\r\nT-Shirt   Sweatshirt   Jeans   Yoga Pants\r\n\r\nAssigning a T-Shirt to Yoga Pants may be worse than to Sweatshirt because T-Shirt and Sweatshirt are still both shirts.  To account for this, an implementation of hierarchical metrics is proposed.\r\n\r\n#### Describe your proposed solution\r\nA hierarchical implementation of precision, recall, and f-score are proposed.  These metrics are analogous to their non-hierarchical versions except they consider the steps made within the hierarchy rather than just the final classification.   For example, recall is the number of correct steps taken while making predictions divided by the total number of steps required to make all predictions correctly.  Descriptions of these metrics can be found [here](https://idalab.de/blog/data-science/hierarchical-metrics) and [here](https://towardsdatascience.com/keeping-it-classy-how-quizlet-uses-hierarchical-classification-to-label-content-with-academic-4e89a175ebe3).  \r\n\r\nProposed here is either a separate implementation of these metrics alongside current implementations (eg: `hierarchical_precision_recall_fscore_support`), or implementation within the existing metrics.  Integration in existing metrics could be achieved through an additional `hierarchy` parameter for relevant functions.  If `hierarchy==None` then existing behavior is observed, but if `hierarchy` is defined as something that describes a hierarchy (for example, input suitable for a networkx graph?) then hierarchical scoring will be applied.  Averaging techniques (micro, macro, etc) will be unaffected as they apply to both implementations.  \r\n\r\n#### Describe alternatives you've considered, if relevant\r\nImplementation elsewhere in scikit-learn is possible.  Leaving it out of scikit-learn is of course an option.  But, while not exceedingly complex, the implementation of these metrics is non-trivial and easy to make mistakes on. "},{"labels":["New Feature"],"text":"\r\n\r\nBayesian classifier for categorical data when we have observations in test data that not present in train data\r\n\r\ncan not believe you do not have it\r\n\r\nsince in real live it is always  the case "},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\nTo be able to limit the number of informative features which are included in the creation of the redundant features. Currently, each redundant feature is created using a random vector of coefficients for all informative features. This is not realistic for some [many?] simulation scenarios.\r\n\r\n#### Describe your proposed solution\r\nAdd a function parameter to determine the number of informative features to use.\r\nFor each redundant feature, randomly select this number of informative features and generate random coefficients for each.\r\n\r\nMake this optional, with default behaviour as now."},{"labels":["New Feature"],"text":"Noted prior issues: #10682 #10681\r\n\r\nIf this is thought acceptable, I'd be happy to make a PR for either the proposed solution or the make_regession-like alternative.\r\n\r\n#### Describe the workflow you want to enable\r\nI would find it useful if the structure of the generated dataset were disclosed by this function, including the combination vectors used to generate the redundant features. (and whether or not shuffling employed). This would make it easier to sanity-check e.g. feature selection procedures against expectations.\r\n\r\n#### Describe your proposed solution\r\nThis could be as simple as a parameter to enabling print() of what is being done, in summary. This is a bit old-school, but Pipeline has a `verbose` param for the same purpose. I note a \"-1\" for earlier suggestion of adding a param, though.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nAdding a parameter similar to above but with the effect of adding a third item to the return tuple, to contain a list of codes which indicate the column origin - e.g. [\"I1\", \"DI0\", \"I0\", \"U0\"] for two informative, one duplicated (of I0) and one useless. Variable length return tuples seems bad style tho...\r\nI note that this is how make_regression() works.\r\n\r\nRejected: creating a class and writing a workaround to retain current function in API."},{"labels":["New Feature","module:gaussian_process"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nI would like to enable the user to pass a custom objective function to a GPR or GPC in order to allow for regularization of the parameters of theta, etc.\r\n\r\n#### Describe your proposed solution\r\n\r\nI have a branch implementing this feature, see here: https://github.com/scikit-learn/scikit-learn/compare/master...jgibson2:add_obj_func_params_to_gpr_gpc\r\n\r\nI allow the user to pass in a function as a keyword argument (`obj_func`) to GPR and GPC. If `obj_func` is `None`, the objective function is assigned to the default negative log likelihood function. Otherwise, the user-passed function is used as the objective function. To allow the user to access parameters in the GPR/GPC, the user-supplied function should take `self` as the first parameter and `theta` as the second, and the instance of GPR/GPC will be passed to the function during optimization. For example:\r\n```python\r\ndef obj_func(self, theta, lmbda=0.01):\r\n    lml, lml_grad = self.log_marginal_likelihood(\r\n        theta, eval_gradient=True, clone_kernel=False)\r\n    loss = lml + (lmbda * (np.linalg.norm(theta, 2) ** 2))\r\n    grad = lml_grad + (2 * lmbda * theta)\r\n    return -loss, -grad\r\nkernel = RBF(1.0)\r\ngpr = GaussianProcessRegressor(kernel=kernel, obj_func=obj_func).fit(X, y)\r\n```\r\n\r\n#### Describe alternatives you've considered, if relevant\r\nIt occurs to me that simply exposing `obj_func` as an overloadable function in the definition of the class, allowing the user to subclass and define their own function, would be easy, but didn't seem like the proper design choice, as I hadn't seen that functionality elsewhere in sklearn. Or, the function could be passed as part of the fit function, which would eliminate the use of `types` by allowing the user to access functions like `self.log_marginal_likelihood` but again, I hadn't seen this elsewhere.\r\n\r\n#### Additional context\r\nThis doesn't change much about the public interface of GPR/GPC, just takes an additional keyword that defaults to None. \r\n\r\nThis is also my first issue / possible pull request, so I apologize for any breaches of tradition or decorum :)"},{"labels":["Documentation","New Feature","module:semi_supervised"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\nIt looks like the regression of ` sklearn.semi_supervised.LabelPropagation`  [link](https://scikit-learn.org/stable/modules/generated/sklearn.semi_supervised.LabelPropagation.html) is not written yet, anyway someone can help implement it?\r\n\r\n#### Describe your proposed solution\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n"},{"labels":["Easy","New Feature","good first issue","module:metrics"],"text":"Right now ``plot_confusion_matrix`` (and ``ConfusionMatrixDisplay``) always add a color bar.\r\nThat's sometimes a bit ugly and also doesn't add that much information if the values are already shown in the heatmap.\r\nUnfortunately it's a bit tricky to remove a colorbar from an axes; I had to employ stackoverflow, not sure if others know it.\r\n\r\n## Spoiler\r\n<details>\r\n<pre>\r\n# assuming there's only one image in the axes\r\n# which is true in this case, this removes the colorbar from ax\r\nax.images[0].colorbar.remove()\r\n</pre>\r\n</details>\r\n\r\nI think it would be good to add a boolean ``colorbar`` to both ``plot_confusion_matrix`` and ``ConfusionMatrixDisplay.plot``."},{"labels":["New Feature"],"text":"#### Describe the workflow you want to enable\r\n\r\nIn the context of anomaly detection, the isolation forest algorithm has a bias making data points' anomaly scores lower than what they actually should be. This problem arises for areas in the space which are axis-aligned with a cluster. Imagine a point very far from a cluster, the basic Isolation Forest algorithm may assign it a lower anomaly score only because the point is axis aligned with the cluster. This does lead to false negative in my application.\r\n\r\nTo overcome this bias, [Hariri et al](https://arxiv.org/abs/1811.02141) proposed the Extended Isolation Forest algorithm. While the normal Isolation Forests algorithm randomly chooses a feature and a threshold value to split the points, the extended version uses a random hyperplane to do so. Those random hyperplanes, as they might not be axis-aligned, remove the bias caused by the standard algorithm. In the end, the standard algorithm becomes a subset of the extended version one, but using only axis-aligned hyperplanes.\r\n\r\nPlease have a look to the original paper, it explains the problem very well.\r\n\r\n#### Describe your proposed solution\r\n\r\nI had a look to the Isolation Forest code, in my humble opinion, the simplest solution might be to add an argument to the `IsolationForest` class constructor to choose how the samples should be split into two. Maybe something like an `extended` argument.\r\n\r\nThis would basically modify the `splitter` argument passed to the underlying base_estimator (an ExtraTreeRegressor instance). We could add a \"random_hyperplane\" splitting mode, which requires implementing a new `Splitter` class.\r\n\r\nGlobally, this is not a lot of changes but adding the new splitter class. I can work on an implementation if we agree this is a useful addition.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\nMaybe the Extended Isolation Forest algorithm should be a distinct class, but I doubt it is worth it.\r\n"},{"labels":["New Feature"],"text":"\r\nis it possible to add all features combinatoric combination generation\r\nbut not just  PolynomialFeatures\r\nsklearn.preprocessing.PolynomialFeatures"},{"labels":["New Feature","module:preprocessing"],"text":"#### Describe the workflow you want to enable\r\nThere are two points here, which are somewhat related.\r\n\r\n1. List value supplied to \"drop\" should be permitted to skip dropping on chosen input columns. Currently there is validation which checks that the values in the list are found categories, and this prevents selective dropping.\r\n\r\n2. It should be possible to use both \"drop\" and \"handle_unknown\". At present a ValueError is thrown in _validate_keywords. I feel this is too strong and should be moderated to a warning (at best). Use case: drop the majority category and de-facto impute unknown categories as the majority.\r\n\r\n#### Describe your proposed solution\r\nFor 1: allow the value None to be used in the list, to indicate no category to be dropped from the associated input column.\r\n\r\nFor 2: mutate to a warning\r\n"},{"labels":["API","New Feature"],"text":"<!--\r\nIf you want to propose a new algorithm, please refer first to the scikit-learn\r\ninclusion criterion:\r\nhttps://scikit-learn.org/stable/faq.html#what-are-the-inclusion-criteria-for-new-algorithms\r\n-->\r\n\r\n#### Describe the workflow you want to enable\r\n\r\nI would like to pass additional arguments to `inverse_transform` from pipeline same as you do for `fit` or `fit_transform`  (`fit(X, y=None, **fit_params))`. I think this should be consistent throughout the other functions. \r\n\r\nMy case is that I am building a custom transformer class for [stationarizing](https://otexts.com/fpp2/stationarity.html) features. Once you apply a n order differencing, you lose the first n samples where they are replaced with nan values to keep the dataset shape consistent in the pipeline. So in inverse, I would like to pass the n rows that replaces the nan value and apply the inverse correctly.\r\n\r\nIf recording the n entries in the transformer instance is the solution, then I can't record the n entries in the `fit` function, it should be in the `transform` and if I record it in the `transform` I wouldn't be able to use the `transform` for another batch until I inverse the previous batch otherwise n entries will be overrode.\r\n\r\n#### Describe your proposed solution\r\n\r\nApply the same logic of `fit_param` in `fit` function for `inverse_transform` and `transform` to keep the API consistent.\r\n\r\n#### Describe alternatives you've considered, if relevant\r\n\r\n#### Additional context\r\n\r\nexample of stationary by applying first order differencing:\r\n\r\n```\r\nx  = 2, 5, 9, 6, 12 \r\nx_stationary = nan, 2, 4,-3, 6\r\n# inverse x without first entry\r\nx_inverse = nan, 2, 6, 3, 9\r\n```"},{"labels":["New Feature"],"text":"Hi,\r\n\r\nAccording to the scikit-learn inclusion criterion, a technique that provides a clear-cut improvement can be included. I am submitting this request to include MIDAS:\r\n\r\nC++ implementation: https://github.com/bhatiasiddharth/MIDAS\r\nRuby implementation: https://github.com/ankane/midas\r\nResearch Paper (AAAI): https://www.comp.nus.edu.sg/~sbhatia/assets/pdf/midas.pdf\r\n\r\nThanks!"},{"labels":["API","Bug","New Feature"],"text":"In `StackingClassifier` and `StackingRegressor`, we added an option `passthrough=True/False` which will concatenate the internal predictions of the first layer model with the original dataset. While everything is going if `X` is only numerical, things start to be complicated when we are dealing with mixed types and dataframe.\r\n\r\nLet's illustrate the issue by tacking the Titanic dataset:\r\n\r\n## Workflow\r\n\r\n### Some imports\r\n\r\n```python\r\nimport numpy as np\r\nfrom pandas.api.types import CategoricalDtype\r\n\r\nfrom sklearn.base import clone\r\nfrom sklearn.compose import make_column_selector as selector\r\nfrom sklearn.compose import make_column_transformer\r\nfrom sklearn.datasets import fetch_openml\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.ensemble import StackingClassifier\r\nfrom sklearn.linear_model import LogisticRegression\r\nfrom sklearn.linear_model import RidgeClassifierCV\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn.model_selection import GridSearchCV\r\nfrom sklearn.impute import SimpleImputer\r\nfrom sklearn.pipeline import make_pipeline\r\nfrom sklearn.preprocessing import StandardScaler\r\nfrom sklearn.preprocessing import OneHotEncoder\r\nfrom sklearn.preprocessing import OrdinalEncoder\r\n\r\nnp.random.seed(0)\r\n```\r\n\r\n### Load the dataset\r\n\r\n```python\r\nX, y = fetch_openml(\"titanic\", version=1, as_frame=True, return_X_y=True)\r\nsubset_feature = ['embarked', 'sex', 'pclass', 'age', 'fare']\r\nX = X[subset_feature]\r\n\r\nX_train, X_test, y_train, y_test = train_test_split(X, y, stratify=y)\r\n```\r\n\r\n### Define first-layer learners\r\n\r\nSince we are dealing with mixed-types, the first-layer learners need to define some preprocessor.\r\nHere, we will stack a linear model and a tree-based model and then we defined 2 types of preprocessors.\r\n\r\n```python\r\ngradient_based_processor = make_column_transformer(\r\n    (make_pipeline(StandardScaler(), SimpleImputer(strategy=\"median\")),\r\n     selector(dtype_exclude=CategoricalDtype)),\r\n    (make_pipeline(SimpleImputer(strategy='constant', fill_value='missing'),\r\n                   OneHotEncoder(handle_unknown='ignore')),\r\n     selector(dtype_include=CategoricalDtype))\r\n)\r\n\r\ncategories = [\r\n    X[col].dtype.categories.tolist() + [\"missing\"] if X[col].isnull().any()\r\n    else X[col].dtype.categories.tolist()\r\n    for col in selector(dtype_include=CategoricalDtype)(X)\r\n]\r\n\r\ntree_based_processor = make_column_transformer(\r\n    (make_pipeline(SimpleImputer(strategy='constant', fill_value='missing'),\r\n                   OrdinalEncoder(categories=categories)),\r\n     selector(dtype_include=CategoricalDtype))\r\n)\r\n\r\nrf = make_pipeline(clone(tree_based_processor), RandomForestClassifier())\r\nlr = make_pipeline(clone(gradient_based_processor), LogisticRegression())\r\n\r\n# sanity check\r\nprint(lr.fit(X_train, y_train).score(X_test, y_test))\r\nprint(rf.fit(X_train, y_train).score(X_test, y_test))\r\n```\r\n```\r\n0.8048780487804879\r\n0.8048780487804879\r\n```\r\n\r\nUp to now, we have a standard learner. Let's try to stack them\r\n\r\n### Only stack the predictions of the first-layer models\r\n\r\nLet's use some stacking. By default, we will stack the predictions of the first-layer models\r\n\r\n```python\r\nnumerical_ridge = RidgeClassifierCV()\r\nmodel = StackingClassifier(\r\n    estimators=[(\"lr\", lr), (\"rf\", rf)],\r\n    final_estimator=numerical_ridge,\r\n    passthrough=False\r\n)\r\nprint(model.fit(X_train, y_train).score(X_test, y_test))\r\n```\r\n```\r\n0.8048780487804879\r\n```\r\n\r\nWe don't have any issues since the predictions are only numerical. The issue starts if we want to concatenate the original `X`\r\n\r\n### Concatenate `X` with the predictions of the first-layer models\r\n\r\nIf we try directly to pass through `X` we get an issue since the ridge classifier did not encode the data in `X`:\r\n\r\n```python\r\nmodel = StackingClassifier(\r\n    estimators=[(\"lr\", lr), (\"rf\", rf)],\r\n    final_estimator=numerical_ridge,\r\n    passthrough=True\r\n)\r\ntry:\r\n    print(model.fit(X_train, y_train).score(X_test, y_test))\r\nexcept Exception as e:\r\n    print(e)\r\n```\r\n```\r\ncould not convert string to float: 'S'\r\n```\r\n\r\nThus, one has to create a pipeline to deal with the data:\r\n\r\n```python\r\nridge = make_pipeline(clone(gradient_based_processor), RidgeClassifierCV())\r\nridge.named_steps[\"columntransformer\"].set_params(remainder=\"passthrough\")\r\n\r\nmodel = StackingClassifier(\r\n    estimators=[(\"lr\", lr), (\"rf\", rf)],\r\n    final_estimator=ridge,\r\n    passthrough=True\r\n)\r\ntry:\r\n    print(model.fit(X_train, y_train).score(X_test, y_test))\r\nexcept Exception as e:\r\n    print(e)\r\n```\r\n```\r\nmake_column_selector can only be applied to pandas dataframes\r\n```\r\n\r\nSo here we actually have the following issue:\r\n\r\n* the concatenation does not preserve dataframe. This could be solved by stacking all the data to `X` (which should manage without importing `pandas`). However, it means that we might want to generate some **feature names** for the predictions generated by the first-layers. So this is my first question, what shall we do?\r\n* if the above issue can be fixed, then we start to have another issue. When creating the pipeline, the user would need to specifically state to let pass through the remainder in the final estimator. Otherwise, the prediction columns will be dropped. So, we might want to interfere with the column transformer of the last steps to be sure to pass through the predictions. But API I don't know what is the best way to do so?\r\n\r\nping @jnothman @qinhanmin2014 @thomasjpfan \r\n\r\nSorry for the long narration."},{"labels":["New Feature","module:gaussian_process"],"text":"Is there any way to make the GPR accept nulls values in the inputs. There are samples for which i want to ignore a particular feature. Is there a good way to do this?\r\n"},{"labels":["New Feature","module:utils"],"text":"#### Describe the workflow you want to enable\r\nIt would be nice if `randomized_svd()` worked with descendants of `scipy.sparse.linalg.LinearOperator`. \r\n```\r\nimport numpy as np\r\nfrom scipy.sparse.linalg import aslinearoperator\r\nfrom sklearn.utils.extmath import randomized_svd\r\n\r\nA = np.random.random((4,4))\r\nop = aslinearoperator(A)\r\nrandomized_svd(op, 2)\r\n```\r\nThis code currently raises exception from `line 134, in safe_sparse_dot`:\r\n```\r\nAttributeError: 'MatrixLinearOperator' object has no attribute 'ndim'\r\n```\r\n\r\n#### Describe your proposed solution\r\nFixed version of `safe_sparse_dot`:\r\n```\r\ndef safe_sparse_dot(a, b, dense_output=False):\r\n    \"\"\"Dot product that handle the sparse matrix case correctly\r\n\r\n    Parameters\r\n    ----------\r\n    a : array or sparse matrix\r\n    b : array or sparse matrix\r\n    dense_output : boolean, (default=False)\r\n        When False, ``a`` and ``b`` both being sparse will yield sparse output.\r\n        When True, output will always be a dense array.\r\n\r\n    Returns\r\n    -------\r\n    dot_product : array or sparse matrix\r\n        sparse if ``a`` and ``b`` are sparse and ``dense_output=False``.\r\n    \"\"\"\r\n    if len(a.shape) > 2 or len(b.shape) > 2:\r\n        if sparse.issparse(a):\r\n            # sparse is always 2D. Implies b is 3D+\r\n            # [i, j] @ [k, ..., l, m, n] -> [i, k, ..., l, n]\r\n            b_ = np.rollaxis(b, -2)\r\n            b_2d = b_.reshape((b.shape[-2], -1))\r\n            ret = a @ b_2d\r\n            ret = ret.reshape(a.shape[0], *b_.shape[1:])\r\n        elif sparse.issparse(b):\r\n            # sparse is always 2D. Implies a is 3D+\r\n            # [k, ..., l, m] @ [i, j] -> [k, ..., l, j]\r\n            a_2d = a.reshape(-1, a.shape[-1])\r\n            ret = a_2d @ b\r\n            ret = ret.reshape(*a.shape[:-1], b.shape[1])\r\n        else:\r\n            ret = np.dot(a, b)\r\n    else:\r\n        if isinstance(b, LinearOperator) and not isinstance(a, LinearOperator):\r\n            ret = (b.T @ a.T).T\r\n        else:\r\n            ret = a @ b\r\n\r\n    if (sparse.issparse(a) and sparse.issparse(b)\r\n            and dense_output and hasattr(ret, \"toarray\")):\r\n        return ret.toarray()\r\n    return ret\r\n```\r\n\r\nKey changes are the following:\r\n1) Use len(a.shape) instead of a.ndim\r\n2) Use transposed multiplication to use LinearOperator's dot product routines\r\n"},{"labels":["New Feature"],"text":"#### Describe the bug\r\n\r\nWhen using LinearDiscriminantAnalysis, the result of predict seems unchanged if we change the parameter n_components, even for problems where it seems obvious that 2 components separate the points better than 1 component. It seems that to predict a label, it is always using more components than n_components.\r\n\r\n#### Steps/Code to Reproduce\r\n\r\n\r\nExample:\r\n```python\r\nimport matplotlib.pyplot as plt\r\nfrom sklearn.discriminant_analysis import LinearDiscriminantAnalysis\r\nfrom sklearn.datasets import load_wine\r\n\r\nwine = load_wine()\r\nX = wine.data\r\ny = wine.target\r\n\r\nclf1 = LinearDiscriminantAnalysis(n_components=1, solver='svd')\r\nclf1.fit(X, y)\r\nXt = clf1.transform(X)\r\ny_pred = clf1.predict(X)\r\n\r\nplt.figure()\r\nplt.scatter(Xt[:, 0], Xt[:, 0], c=y)\r\nplt.figure()\r\nplt.scatter(Xt[:, 0], Xt[:, 0], c=y_pred)\r\n\r\nplt.show()\r\n\r\n```\r\n\r\n#### Expected and actual results\r\n\r\nWine dataset is not separable with a single lda component. However, predict seems to give the right labels. \r\n\r\nI would have expected the diagonal in the second plot to be divided cleanly in three intervals, one for each class.\r\n\r\n#### Versions\r\n<!--\r\nPlease run the following snippet and paste the output below.\r\nFor scikit-learn >= 0.20:\r\nimport sklearn; sklearn.show_versions()\r\nFor scikit-learn < 0.20:\r\nimport platform; print(platform.platform())\r\nimport sys; print(\"Python\", sys.version)\r\nimport numpy; print(\"NumPy\", numpy.__version__)\r\nimport scipy; print(\"SciPy\", scipy.__version__)\r\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nimport imblearn; print(\"Imbalanced-Learn\", imblearn.__version__)\r\n-->\r\n\r\n>>> import sklearn; sklearn.show_versions()\r\n\r\nSystem:\r\n    python: 3.7.4 (default, Aug 13 2019, 20:35:49)  [GCC 7.3.0]\r\nexecutable: /home/user/.miniconda3/envs/torch/bin/python\r\n   machine: Linux-4.19.0-6-amd64-x86_64-with-debian-10.2\r\n\r\nPython dependencies:\r\n       pip: 19.2.2\r\nsetuptools: 41.0.1\r\n   sklearn: 0.22.1\r\n     numpy: 1.16.4\r\n     scipy: 1.3.1\r\n    Cython: None\r\n    pandas: 0.25.1\r\nmatplotlib: 3.0.3\r\n    joblib: 0.13.2\r\n\r\nBuilt with OpenMP: True\r\n\r\n>>> import numpy; print(\"NumPy\", numpy.__version__)\r\nNumPy 1.16.4\r\n>>> import scipy; print(\"SciPy\", scipy.__version__)\r\nSciPy 1.3.1\r\n>>> import sklearn; print(\"Scikit-Learn\", sklearn.__version__)\r\nScikit-Learn 0.22.1\r\n\r\n\r\n<!-- Thanks for contributing! -->\r\n"},{"labels":["New Feature"],"text":"We currently have [average_precision_score](http://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html) in our scikit-learn metrics, but it doesn't seem possible to calculate average precision at k.\n# Example\n\n```\n>>> from precision_at_k import average_precision_at_k\n>>> y_true = [[0, 0, 1, 1], \\\n              [0, 1, 0, 0]]\n>>> y_pred = [[0.5, 0.0, 1.0, 0.0], \\\n              [1., 1.1, 0.5,   0.0]]\n>>> average_precision_at_k(y_true, y_pred, 2)\n0.75\n```\n\nThis value is found by taking the precision of each set of true labels / predicted label pairs:\n- `precision_at_k([0, 0, 1, 1], [0.5, 0.0, 1.0, 0.0], k=2) = 0.5` \n- `precision_at_k([1, 1, 0, 0], [0.0, 1.1, 1.0, 0.0], k=2) = 1`\n\nand then taking the average of these values (which equals `0.75`).\n\nWhen there is more than 1 true label, there are several corner cases to handle.\n# References\n- [WSABIE: Scaling up to large scale vocabulary image annotation](http://www.thespermwhale.com/jaseweston/papers/wsabie-ijcai.pdf) (This paper assumes that there is only one true label value, but my example above assumes that there may be multiple.)\n\nThoughts? Alternatively, if this function is already in the library, and I have missed it, I would love to hear about it.\n## Edits\n- Changed the example to reflect predicted confidence scores rather than binary predicted scores.\n- Changed the title of this post: \"Add average precision at K into scikit-learn\" -> \"Add precision at K into scikit-learn\" \n"},{"labels":["New Feature"],"text":"As far as I can tell, `sklearn.feature_selection.RFE` has no way to pass sample weights to the estimator alongside the data.\n\nI have fixed this in my code with:\n\n``` diff\nindex bbe0cda..f5072b2 100644\n--- a/sklearn/feature_selection/rfe.py\n+++ b/sklearn/feature_selection/rfe.py\n@@ -120,7 +120,7 @@ class RFE(BaseEstimator, MetaEstimatorMixin, SelectorMixin):\n     def _estimator_type(self):\n         return self.estimator._estimator_type\n\n-    def fit(self, X, y):\n+    def fit(self, X, y, **fit_params):\n         \"\"\"Fit the RFE model and then the underlying estimator on the selected\n            features.\n\n@@ -132,9 +132,9 @@ class RFE(BaseEstimator, MetaEstimatorMixin, SelectorMixin):\n         y : array-like, shape = [n_samples]\n             The target values.\n         \"\"\"\n-        return self._fit(X, y)\n+        return self._fit(X, y, **fit_params)\n\n-    def _fit(self, X, y, step_score=None):\n+    def _fit(self, X, y, step_score=None, **fit_params):\n         X, y = check_X_y(X, y, \"csc\")\n         # Initialization\n         n_features = X.shape[1]\n@@ -166,7 +166,7 @@ class RFE(BaseEstimator, MetaEstimatorMixin, SelectorMixin):\n             if self.verbose > 0:\n                 print(\"Fitting estimator with %d features.\" % np.sum(support_))\n\n-            estimator.fit(X[:, features], y)\n+            estimator.fit(X[:, features], y, **fit_params)\n\n             # Get coefs\n             if hasattr(estimator, 'coef_'):\n```\n\nWould this be a worthwhile contribution to scikit-learn?\n#### Versions\n\n<!--\nPlease run the following snippet and paste the output below.\nimport platform; print(platform.platform())\nimport sys; print(\"Python\", sys.version)\nimport numpy; print(\"NumPy\", numpy.__version__)\nimport scipy; print(\"SciPy\", scipy.__version__)\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\n-->\n\n``` python\n\nIn [1]: import platform; print(platform.platform())\nLinux-3.13.0-63-generic-x86_64-with-Ubuntu-14.04-trusty\n\nIn [2]: import sys; print(\"Python\", sys.version)\n('Python', '2.7.6 (default, Jun 22 2015, 17:58:13) \\n[GCC 4.8.2]')\n\nIn [3]: import numpy; print(\"NumPy\", numpy.__version__)\n('NumPy', '1.11.0')\n\nIn [4]: import scipy; print(\"SciPy\", scipy.__version__)\n('SciPy', '0.17.1')\n\nIn [5]: import sklearn; print(\"Scikit-Learn\", sklearn.__version__)\n('Scikit-Learn', '0.18.dev0')\n```\n\n<!-- Thanks for contributing! -->\n"},{"labels":["New Feature","Sprint","help wanted"],"text":"I got following error when running **accuracy_score** for inputs which is memmap.\nThe simple solution is just copy memmap into a normal numpy array, however, it is not clean solution.\nI think numpy memmap array can be treated equally to other ndarray.\n\n```\nTraceback (most recent call last):\n  File \"/Users/trungnt13/tmp/tmp6.py\", line 23, in <module>\n    print('Accuracy:', m.score(ds['X_test'], ds['y_test']))\n  File \"/Users/trungnt13/libs/odin/odin/model.py\", line 317, in score\n    return accuracy_score(y, self.predict(X), sample_weight=sample_weight)\n  File \"/Users/trungnt13/libs/conda/envs/ai/lib/python2.7/site-packages/sklearn/metrics/classification.py\", line 172, in accuracy_score\n    y_type, y_true, y_pred = _check_targets(y_true, y_pred)\n  File \"/Users/trungnt13/libs/conda/envs/ai/lib/python2.7/site-packages/sklearn/metrics/classification.py\", line 73, in _check_targets\n    type_true = type_of_target(y_true)\n  File \"/Users/trungnt13/libs/conda/envs/ai/lib/python2.7/site-packages/sklearn/utils/multiclass.py\", line 236, in type_of_target\n    'got %r' % y)\nValueError: Expected array-like (array or non-string sequence), got memmap([7, 2, 1, ..., 4, 5, 6], dtype=int32)\n```\n"},{"labels":["API","Bug","New Feature"],"text":"<!--\nIf your issue is a usage question, submit it here instead:\n- StackOverflow with the scikit-learn tag: http://stackoverflow.com/questions/tagged/scikit-learn\n- Mailing List: https://mail.python.org/mailman/listinfo/scikit-learn\nFor more information, see User Questions: http://scikit-learn.org/stable/support.html#user-questions\n-->\n\n<!-- Instructions For Filing a Bug: https://github.com/scikit-learn/scikit-learn/blob/master/CONTRIBUTING.md#filing-bugs -->\n#### Description\n\n<!-- Example: Joblib Error thrown when calling fit on LatentDirichletAllocation with evaluate_every > 0-->\n\nSometimes it is convenient to first build a model on a recent dataset, save it as a .pkl file and then apply the model to the new dataset. However, in the last project, my friends and I found that the results turned quite wired after applying the .pkl file on the new dataset. Actually, we implemented a binary classifier. We found the probability distribution turned from unimodal distribution to bimodal distribution. Finally, we found out the problem was that the column order of the new dataset was different from the old one. Thus the predictions were totally wrong. \nI have checked the source code and discovered that the fit function of sklean didn't save the column values during the process of model training. Thus there was no mean to check whether the column values were consistent during the processing of prediction. We thought it would be better if the column values could be saved during training and then be used to check the column values during predicting.\n#### Steps/Code to Reproduce\n\n<!--\nExample:\n\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.decomposition import LatentDirichletAllocation\n\ndocs = [\"Help I have a bug\" for i in range(1000)]\n\nvectorizer = CountVectorizer(input=docs, analyzer='word')\nlda_features = vectorizer.fit_transform(docs)\n\nlda_model = LatentDirichletAllocation(\n    n_topics=10,\n    learning_method='online',\n    evaluate_every=10,\n    n_jobs=4,\n)\nmodel = lda_model.fit(lda_features)\n```\nIf the code is too long, feel free to put it in a public gist and link\nit in the issue: https://gist.github.com\n-->\n\n``` python\n#for simplification, consider a very simple case\nfrom sklearn.datasets import load_iris\nimport pandas as pd\n\n#make a dataframe\niris = load_iris()\nX, y = iris.data[:-1,:], iris.target[:-1]\niris_pd = pd.DataFrame(X)\niris_pd.columns = iris.feature_names\niris_pd['target'] = y\n\nfrom sklearn.cross_validation import train_test_split\ntrain, test = train_test_split(iris_pd, test_size= 0.3)\n\nfeature_columns_train = ['sepal length (cm)','sepal width (cm)','petal length (cm)','petal width (cm)']\nfeature_columns_test = ['sepal length (cm)','sepal width (cm)','petal width (cm)','petal length (cm)']\n\nfrom sklearn.linear_model import LogisticRegression\nlg = LogisticRegression(n_jobs=4, random_state=123, verbose=0, penalty='l1', C=1.0)\nlg.fit(train[feature_columns_train], train['target'])\n\nprob1 = lg.predict_proba(test[feature_columns_train])\nprob2 = lg.predict_proba(test[feature_columns_test])\n```\n#### Expected Results\n\n<!-- Example: No error is thrown. Please paste or describe the expected results.-->\n\nBecause feature_columns_test is different from feature_columns_train, it is not surprised that prob1 is totally different from prob2 and prob1 should be the right result.\n\n``` python\nprob1[:5] = \narray([[  3.89507414e-04,   3.20099743e-01,   6.79510750e-01],\n         [  4.63256526e-04,   4.65385156e-01,   5.34151587e-01],\n         [  8.79704318e-01,   1.20295572e-01,   1.10268420e-07],\n         [  7.80611983e-01,   2.19385827e-01,   2.19046022e-06],\n         [  2.78898454e-02,   7.77243988e-01,   1.94866167e-01]])\n```\n#### Actual Results\n\n<!-- Please paste or specifically describe the actual output or traceback. -->\n\n``` python\nprob2[:5] = \narray([[  4.36321678e-01,   2.25057553e-04,   5.63453265e-01],\n         [  4.92513658e-01,   1.76391882e-05,   5.07468703e-01],\n         [  9.92946715e-01,   7.05167151e-03,   1.61346947e-06],\n         [  9.83726756e-01,   1.62387090e-02,   3.45348884e-05],\n         [  5.01392274e-01,   5.37144591e-04,   4.98070581e-01]])\n```\n#### Versions\n\n<!--\nPlease run the following snippet and paste the output below.\nimport platform; print(platform.platform())\nimport sys; print(\"Python\", sys.version)\nimport numpy; print(\"NumPy\", numpy.__version__)\nimport scipy; print(\"SciPy\", scipy.__version__)\nimport sklearn; print(\"Scikit-Learn\", sklearn.__version__)\n-->\n\n``` python\nLinux-2.6.32-642.1.1.el6.x86_64-x86_64-with-redhat-6.7-Santiago\n('Python', '2.7.11 |Anaconda 2.4.1 (64-bit)| (default, Dec  6 2015, 18:08:32) \\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)]')\n('NumPy', '1.10.1')\n('SciPy', '0.16.0')\n('Scikit-Learn', '0.17')\n```\n\n<!-- Thanks for contributing! -->\n## The probable solution\n\nI also implement a very simple solution. Hope this would help. :)\n\n``` python\nclass SafeLogisticRegression(LogisticRegression):\n    def fit(self, X, y, sample_weight=None):\n        self.columns = X.columns\n        LogisticRegression.fit(self, X, y, sample_weight=None)\n    def predict_proba(self, X):\n        new_columns = list(X.columns)\n        old_columns = list(self.columns)\n        if new_columns != old_columns:\n            if len(new_columns) == len(old_columns):\n                try:\n                    X = X[old_columns]\n                    print \"The order of columns has changed. Fixed.\"\n                except:\n                    raise ValueError('The columns has changed. Please check.')\n            else:\n                raise ValueError('The number of columns has changed.')\n        return LogisticRegression.predict_proba(self, X)\n```\n\nThen apply this new class:\n\n``` python\nslg = SafeLogisticRegression(n_jobs=4, random_state=123, verbose=0, penalty='l1', C=1.0)\nslg.fit(train[feature_columns_train], train['target']) \n```\n#### Test one: if the column order is changed\n\n``` python\nprob1 = slg.predict_proba(test[feature_columns_train])\nprob2 = slg.predict_proba(test[feature_columns_test])\n\n#The order of columns has changed. Fixed.\n```\n\nResult for test one:\n\n``` python\nprob1[:5] =\narray([[  3.89507414e-04,   3.20099743e-01,   6.79510750e-01],\n       [  4.63256526e-04,   4.65385156e-01,   5.34151587e-01],\n       [  8.79704318e-01,   1.20295572e-01,   1.10268420e-07],\n       [  7.80611983e-01,   2.19385827e-01,   2.19046022e-06],\n       [  2.78898454e-02,   7.77243988e-01,   1.94866167e-01]])\n\nprob2[:5] =\narray([[  3.89507414e-04,   3.20099743e-01,   6.79510750e-01],\n       [  4.63256526e-04,   4.65385156e-01,   5.34151587e-01],\n       [  8.79704318e-01,   1.20295572e-01,   1.10268420e-07],\n       [  7.80611983e-01,   2.19385827e-01,   2.19046022e-06],\n       [  2.78898454e-02,   7.77243988e-01,   1.94866167e-01]])\n```\n#### Test two: if the columns are different (different columns)\n\nSimulate by changing one of the column names\n\n``` python\nprob3 = slg.predict_proba(test[feature_columns_train].rename(columns={'sepal width (cm)': 'sepal wid (cm)'}))\n```\n\nerror message:\n\n``` python\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-47-84cea68536fe> in <module>()\n----> 1 prob3 = slg.predict_proba(test[feature_columns_train].rename(columns={'sepal width (cm)': 'sepal wid (cm)'}))\n\n<ipython-input-21-c3000b030a21> in predict_proba(self, X)\n     12                     print \"The order of columns has changed. Fixed.\"\n     13                 except:\n---> 14                     raise ValueError('The columns has changed. Please check.')\n     15             else:\n     16                 raise ValueError('The number of columns has changed.')\n\nValueError: The columns has changed. Please check.\n```\n#### Test three: if the number of columns changes\n\nSimulate by dropping one column\n\n``` python\nprob4 = slg.predict_proba(test[feature_columns_train].drop(['sepal width (cm)'], axis=1))\n```\n\nerror message:\n\n``` python\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-48-47c63ae1ac22> in <module>()\n----> 1 prob4 = slg.predict_proba(test[feature_columns_train].drop(['sepal width (cm)'], axis=1))\n\n<ipython-input-21-c3000b030a21> in predict_proba(self, X)\n     14                     raise ValueError('The columns has changed. Please check.')\n     15             else:\n---> 16                 raise ValueError('The number of columns has changed.')\n     17         return LogisticRegression.predict_proba(self, X)\n\nValueError: The number of columns has changed.\n```\n"},{"labels":["New Feature"],"text":"The Correlation Coefficient (CC) although not a particularly good metric due to it being scale and offset invariant is sometimes used as a goodness-of-fit metric in regression tasks. \n\nPerhaps a feature worth adding? Implementation should be straightforward since it would essentially be a mere call to numpy's `corrcoeff` [function](http://docs.scipy.org/doc/numpy/reference/generated/numpy.corrcoef.html), followed by appropriate indexing (i.e. `[0,1]`). \n"},{"labels":["New Feature"],"text":"https://arxiv.org/abs/1602.00370\n![image](https://cloud.githubusercontent.com/assets/2433806/17012965/eccc495a-4f4d-11e6-8dd0-025c7c6e63f6.png)\nseems like _largevis_ is competitive with _t-sne_.\n\nAnd there's a cpp implementation on github [lferry007/LargeVis](https://github.com/lferry007/LargeVis)\n\nis there any plan on implementing _largevis_ in sklearn\n"},{"labels":["New Feature"],"text":"Can we have a vectorizer which uses skipgrams? I often use it in my projects and it would be great if it is implemented. What if for instance, TfidfVectorizer can either work with ngrams or skipgrams based on the argument passed? (maybe add another word in 'analyzer' to accomomodate skipgrams? )\n"},{"labels":["New Feature"],"text":"Hi, \n\nI would like to propose the addition of a module for fitting user supplied parametric model structure to data. \n\nI have created a class mimicking scikit-learn api structure which basically uses scipy.optimize.least_squares to find the parameter values for fitting the user supplied model. \n\nLet me know if this would be a welcome addition to scikit-learn.\n"},{"labels":["New Feature"],"text":"Are there any plans to implement O-PLS in Sklearn?\n\nThank you,\n\nKeiron.\n"},{"labels":["New Feature"],"text":"I was just playing around with rapidminer and they have an additional splitting criterion for decision trees, which is also the default. Using their default settings, I get a tree of depth 2 that is as good as our tree of depth 8 or something. I think we should check out the splitting criterion.\n"},{"labels":["Moderate","New Feature","help wanted"],"text":"I frequently get asked about post-pruning. Often using single trees is important for interpretability, and post-pruning can help both interpretability and generalization performance.\n[I'm surprised there is no open issue on this, but I couldn't find one]\n"},{"labels":["New Feature"],"text":"I was surprised that scikit-learn doesn't have forward selection, even though it has [recursive feature elimination](http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html). Are there plans to add forward selection into the API in the near future?\n\nI'm referencing the stackexchange post [here](http://datascience.stackexchange.com/questions/937/does-scikit-learn-have-forward-selection-stepwise-regression-algorithm).\n"},{"labels":["New Feature"],"text":"For many people, loading the model from disk for each prediction is a major bottleneck, and keeping the model in memory is not always possible.\nOne of the main pain-points there is working with `CountVectorizer`, which needs to load the whole vocabulary, even though each data point probably only needs very few features.\nThe problem can be solved by using hashing vectorizer, but then we lose interpretability of the coefficients, which is bad.\n\nI was wondering if there are ideas to persist CountVectorizer in a way that is more geared towards single point predictions.\n\nMaybe using a cuckoo hashing might help? I had someone telling me that they replaced the dictionary with a database call, but that doesn't seem feasible to do inside scikit-learn.\n"},{"labels":["API","Blocker","Bug","Documentation","Easy","Enhancement","Large Scale","Moderate","New Feature","Waiting for Reviewer"],"text":":+1: :pizza: :cake: :beer: :beers: :wine_glass: :curry: :sake: :fireworks: :rice_cracker: :100: \n"},{"labels":["New Feature"],"text":"The following paper by Rich Caruana\nhttp://www.niculescu-mizil.org/papers/shotgun.icml04.revised.rev2.pdf\npresents an simple greedy algorithm to stack models.\n\nIt is reported by many people to be an excellent strategy in data competitions. We should implement it. The paper has only 333 citations, which is on the low side for our criteria, but I hear a lot of good on it.\n"},{"labels":["New Feature"],"text":"I get this asked about once a day, so I think we should just add it.\nMany people work with time series, and adding cross-validation for them would be really easy.\nThe standard strategy is described for example [here](http://stats.stackexchange.com/questions/14099/using-k-fold-cross-validation-for-time-series-model-selection)\n\nThere are basically two cases: homogeneous time series (one sample every X seconds / days), or heterogeneous time series, where each sample has a time stamp.\n\nFor the homogeneous case, we can just put the first `n_samples // n_folds` in the first fold etc, so it's a very simple variation of KFold. Fixed in #6586.\n\nFor heterogeneous case, we need to get a `labels` array and split accordingly. If we cast that to integers, people could actually provide pandas time series, and they would be handled correctly (they will be converted to nanoseconds).\n\nI remember arguing against this addition, but I changed my mind ;)\n"},{"labels":["Moderate","New Feature","help wanted"],"text":"1. Would it be worthwhile to add parameters to control missingness in dataset generators?\n   \n   I need this for benchmarking #5974. Thought this might come in handy for teaching too.\n   \n   Typically I would like to add `missing_rate`, `target_correlation_rate`, `feature_correlation_rate` and `missing_values`.\n   \n   The `target_correlation_rate` would control the extent to which the dataset is MNAR<sup>*</sup> and `feature_correlation_rate` would control the extent to which the dataset is MAR<sup>†</sup>.\n   \n   `target_correlation_rate` + `feature_correlation_rate` <= 1\n   \n   `1 - (target_correlation_rate + feature_correlation_rate)` would control the extent to which the dataset is MCAR<sup>‡</sup>.\n   \n   Does this sound good?\n2. Either as an addition or as an alternative to **1**, could we have missing transformers with the above described params?\n\n<hr/>\n\n\\* - Missing Not At Random (Missingness is correlated with the target)\n\n† - Missing At Random but correlated with the other feature values.\n\n‡ - Missing Completely At Random (No correlation with either the target or parameters)\n\nPing @agramfort @glouppe @GaelVaroquaux\n"},{"labels":["New Feature"],"text":"I had recently come across this paper[1] that emphasises the use of Dropout to prevent overfitting and provides  a  way  of  approximately  combining  exponentially  many  different  neural  network\narchitectures  efficiently. It would be really great to add this Dropout feature to current implementation of MLPs in scikit-learn.\n[1] https://www.cs.toronto.edu/~hinton/absps/JMLRdropout.pdf \nP.S: I would be really glad to take up this if you guys consider it worthwhile.\nThanks :) \n"},{"labels":["New Feature"],"text":"I just realized we haven't implemented logreg with L1 (apart from SGDClassifier).\nAre people just not using this?\nIf we do implement it, it seems we would need an \"auto\" solver, I guess, to pick the solver that supports the combination.\n"},{"labels":["New Feature"],"text":"I would like sklearn to support Poisson, gamma and other Tweedie family loss functions. These loss distributions are widely used in industry for count and other long tailed data. Additionally, they are implemented in other libraries such as R: GLM, GLMNET, GBM ext. Part of implementing these distributions would be to include a way for offsets to be passed to the loss functions. This is a common way to handle exposure when using a log link function with these distributions. \n\nWould the sklearn community be open to adding these loss functions. If so I or (hopefully others) would be willing to research the feasibility of implementing these loss functions and offsets into the sklearn API. Thanks\n"},{"labels":["New Feature"],"text":"As suggested by @lesshaste\n\nPaper - http://cbio.ensmp.fr/~jvert/svn/bibli/local/Gower1971general.pdf\n\nI can implement this if there is sufficient interest?\n\n@jnothman @amueller @agramfort \n"},{"labels":["New Feature"],"text":"I have used a data transformation based on count data with some success on kaggle:\nhttps://www.kaggle.com/c/sf-crime/forums/t/15836/predicting-crime-categories-with-address-featurization-and-neural-nets\n\nThis is similar to what Azure does: https://msdn.microsoft.com/en-us/library/azure/dn913056.aspx\nI've also found that adding an extra column that gives the frequency of each individual label over all predictive categories adds to the information.\n\nThe implementation would use a contingency_matrix to first calculate the frequencies, then  add laplacian noise to avoid overfitting and finally return the new features.\n\nIs there any interest to include something like this in sklearn?\n\nBest\n"},{"labels":["New Feature"],"text":"I think it would be great to add robust PCA.\nThe original algorithm is here http://statweb.stanford.edu/~candes/papers/RobustPCA.pdf\nThere is an implementation here: https://github.com/dfm/pcp by @dfm\n\nThis paper using Trimmed Grassmann Average promises better performance: http://files.is.tue.mpg.de/black/papers/RGA2014.pdf\n@glennq implemented it here: https://github.com/glennq/tga\n\nIt is a bit unclear to me at the moment what the benefits of the two approaches are, and how they compare for example for outlier detection.\nAlso, I think netflix uses an improved version of the candes algorithm, for which I didn't find a reference yet (need to ping the netflix people).\n"},{"labels":["Easy","New Feature"],"text":"I think it would be useful to have meta-estimators for turning a classifier or a regressor into a multi-output classifier or regressor. It's a recurrent pattern and I find myself reimplementing it every once in a while.\n\nThis is of course useful for estimators that don't have native multi-output support but even for those that have like RF, I find that estimating a model independently for each output sometimes works better.\n\nClass names: `MultiOutputClassifier` and `MultiOutputRegressor`\n"},{"labels":["New Feature"],"text":"The diffusion map is a dimensionality reduction technique that uses a transitional probability as its \"distance\" measure. It is noise-resistant and non-linear. Moreover, the algorithm itself is fast and scalable (I've used it with 50k+ samples). I wrote a quick implementation [here](https://gist.github.com/rohanp/2b950640c94c8e293c40). \n\nIt has been of interest in numerous scientific fields:\n[Diffusion maps](http://www.sciencedirect.com/science/article/pii/S1063520306000546) (1119 citations) \n\n[Geometric diffusions as a tool for harmonic analysis and structure definition of data: Diffusion maps](http://www.pnas.org/content/102/21/7426.short)\n (672 citations)\n\n[Functional diffusion map: a noninvasive MRI biomarker for early stratification of clinical brain tumor response](http://www.pnas.org/content/102/15/5524.short) (491 citations) \n\n[Diffusion maps and coarse-graining: A unified framework for dimensionality reduction, graph partitioning, and data set parameterization](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1661543) (450 citations)\n\nFurthermore, a Google scholar search for \"diffusion map dimensionality reduction\" yields more results than \"isomap\", \"locally linear embedding\", or \"hessian eigenmapping\". \n\nIf I fix up my implementation, would you all be interested in having this in sklearn? \n"},{"labels":["New Feature"],"text":"`Binarizer` transforms continuous values to two states (0 or 1). It would be nice to generalize this to an arbitrary number of states K. \n\nThis preprocessor would produce a scipy sparse matrix of shape (n_samples, K \\* n_features) using the one-of-K encoding. The K thresholds could be chosen uniformly between the min and max of each feature or using the K-quantiles. \n\nFor example, using uniformly chosen thresholds, if min=0, max=1.0 and K=3, a feature value between 0 and 0.33 would be encoded as [1, 0, 0], a value between 0.33 and 0.66 as [0, 1, 0] and a value between 0.66 and 1.0 as [0, 0, 1]. \n\nMy usecase is that this encoding might be more meaningful than continuous values when using `PolynomialFeatures`.\n\nPossibly related to #1062.\n"},{"labels":["Enhancement","Moderate","New Feature"],"text":"Logistic regression has many different possible solvers. Choosing the best is difficult and requires expert knowledge.\n\nI think that it would be useful to introduce a 'solver=\"auto\"' that tries to make a good guess on the best approach. It would have to be tuned using heaving benchmarks on many different problems.\n\nA good place to start is using the script bench_rcv1_logreg_convergence.py in benchmarks, and applying it to a variety of problems.\n\nWould people agree with such an idea?\n"},{"labels":["Documentation","New Feature"],"text":"Not sure if I should delay the release for this, but this example is broken.\n`quotes_historical_yahoo` was moved to `quotes_historical_yahoo_ochl` or `quotes_historical_yahoo_ohlc`. I don't know which is the right one, but they both give me segfaults.\nThat could just be my broken setup, though.\nCan anyone with a new matplotlib try?\n"},{"labels":["New Feature"],"text":"Several people including @NelleV  seem to be interested in merging my kernel K-means code in scikit-learn:\nhttps://gist.github.com/mblondel/6230787\n\nI am open to it if someone wants to work on it. This will of course need docs, tests and examples.\n\nNote that this implementations requires the kernel matrix to fit in memory but this also the case of Kernel PCA and Kernel Ridge in scikit-learn.\n"},{"labels":["New Feature"],"text":"### Intro\n\ncross_val_predict is useful because it returns the predicted targets (opposed to cross_val_score) and hides the parallelization logic behind a simple interface. There should be a similar function for predicting the probability distribution (predict_proba) over classes.\n### Discussion\n1. Would this be a welcomed new feature?\n2. Should this feature be a flag for cross_val_predict (e.g. probability=True)?\n   1. Should cross_val_predict then return both the classes and probabilities? Or only probabilities?\n3. Should this feature be its own function? e.g. cross_val_predict_proba\n"},{"labels":["New Feature"],"text":"I notice this project doesn't have any binning methods. It'd be helpful to add at least fixed width binning when preprocessing data.\n"},{"labels":["New Feature"],"text":"I just realized we have a huber loss for SGD but we don't have a nice \"out of the box\" solver for huber loss. Is there any reason for that? Should we add a HuberRegressor? Or add a loss to ridge / LinearRegression?\n"},{"labels":["Build / CI","New Feature"],"text":"CircleCI allows much more power and storage space compared to travis.\n\nWe should use it to build docs and run example.\n\nWe just did it in nilearn (massive doc downloads and build times):\nhttps://github.com/nilearn/nilearn/pull/679\n"},{"labels":["New Feature"],"text":"How hard would it be to hash incoming string values, or use the LabelEncoder internally?\n\nI'd be willing to contribute some code for this if there are no outstanding design blockers.\n\n/cc @jnothman \n"},{"labels":["New Feature","help wanted"],"text":"Presentlyu, SparsePCA used `dict_learning` or `dict_learning_online` on `X.T`, and sets its `components_` to be the outputted code of these functions (which is sparse).\n\nThough it is a simple way to reuse code from `dict_learning.py`, it has for drawback that it does not allow the user to learn in the sample direction, which prevents the use of `partial_fit` and is not adapted in a setting where data is streamed.\n\nA solution for this would be to use another formulation for sparse PCA, found in [1] which enforces an elastic net constraint for D, and thus implies projecting D on the elastic net ball instead of the L2 ball as it is done today.\n\nEfficient projection algorithms exists, as described in [1], [2].\n\n[1] Mairal, J., Bach, F., Ponce, J., & Sapiro, G. (2010). Online learning for matrix factorization and sparse coding. The Journal of Machine Learning Research, 11, 19-60.\n[2] Rodola, E., Torsello, A., Harada, T., Kuniyoshi, Y., & Cremers, D. (2013, December). Elastic net constraints for shape matching. In Computer Vision (ICCV), 2013 IEEE International Conference on (pp. 1169-1176). IEEE.\n"},{"labels":["New Feature"],"text":"I don't find a open issue for this. Just wondering what's the plan to implement them in sklearn? Is there a roadmap?\n\nSome of the techniques are listed in wiki: http://en.wikipedia.org/wiki/Ensemble_learning\n"},{"labels":["New Feature"],"text":"It is important to stratify the samples according to y for cross-validation in regression models; otherwise, you might possibly get totally different ranges of y in training and validation sets. However, current `StratifiedKFold` doesn't allow float:\n\n```\n\n$ x=sklearn.cross_validation.StratifiedKFold(np.random.random(9), 2)                                                                                                                                        \n/anaconda/envs/py3/lib/python3.4/site-packages/sklearn/cross_validation.py:417: Warning: The least populated class in y has only 1 members, which is too few. The minimum number of labels for any class cannot be less than n_folds=2.\n  % (min_labels, self.n_folds)), Warning)\n\n$ list(x)\n[(array([], dtype=int64), array([0, 1, 2, 3, 4, 5, 6, 7, 8])),\n (array([0, 1, 2, 3, 4, 5, 6, 7, 8]), array([], dtype=int64))]\n```\n\nIn case I may miss something, is there any reason why `StratifiedKFold` does not work properly for float?\n"},{"labels":["New Feature"],"text":"Sklearn currently supports ordinary least squares (OLS); would it be possible to support weighted least squares (WLS)?  From my perspective, this seems like a pretty desirable bit of functionality.\n\nDetails on the problem can be found on Wikipedia here:\nhttp://en.wikipedia.org/wiki/Least_squares#Weighted_least_squares\n\n  Thank you,\n  Bill\n"},{"labels":["New Feature"],"text":"Hi,\n\nwould be nice to have not only the probability associated to a certain point in the GMM as returned by `score(X)`, but also a similar function (`gradient(X)` ?) that returns the gradient. Is that possible?\nHaving a list of the [modes](http://en.wikipedia.org/wiki/Mode_%28statistics%29) would also be great!\n[This article: Mode-finding for mixtures of Gaussian distributions](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&tp=&arnumber=888716) provides some information on both the gradient and the modes.\n"},{"labels":["New Feature"],"text":"I couldn't find BNS metric when I need it to do feature selection. Will it or any other metrics be supported in the near future?\n"},{"labels":["New Feature"],"text":"The underlying CV functions in both `cross_val_score` and `GridSearchCV` have an option to shuffle inputs but these aren't exposed.  This requires the user to shuffle their examples ahead of time.  This is somewhat inconsistent with `train_test_split` that uses `ShuffleSplit` and, for the uninformed user, might cause confusion in output results in cases where the underlying inputs have some order (like in the wine quality dataset for example).\n\nWould it be possible to expose `shuffle` as a parameter in both `cross_val_score` and `GridSearchCV` and simply pass it through to `_check_cv` and on to `StratifiedKFold` and `KFold`?\n"},{"labels":["New Feature"],"text":"suggest adding icl = integrated completed likelihood [1], or its approximation icl-bic [2] which is an information criteria useful for determining the number of clusters. essentially it is: icl = bic + entropy of clustering\n\ncode to demonstrate:\n_, probs = gmm.score_samples(X)\nentropy = -sum(sum(prob_np.log(prob) for prob in probs))\nicl = gmm.bic(X) + 2_entropy\n\n[1] C. Biernacki, G. Celeux and G. Govaert, Assessing a Mixture model for Clustering with the integrated CompletedLikelihood, IEEE Transactions on Pattern analysis and Machine Intelligence 22 (2000), 719–725.\n[2] G.F. McLachlan and D. Peel, Finite Mixture Models, John Wiley & Sons, Inc., 2000\n"},{"labels":["Easy","New Feature"],"text":"similar to clustering methods we can add a fit_predict to do fit and predict in a single function call\n"},{"labels":["New Feature"],"text":"Today there were two questions on stack overflow where the answer was more or less to add `feature_importance_` to Pipeline or GridSearchCV. I wonder if that would be a good idea.\nActually, I think for GridSearchCV it is not very useful, but for Pipeline it might be.\n\nWith `Pipeline` there is an additional complication, which is that the number of features that goes in might not correspond to the number of features that the last estimator is trained on. I'm not sure how to handle that. Maybe with `inverse_transform`? That would require adding an `inverse_transform` to `OneHotEncoder`. That might actually be feasible.\n"},{"labels":["New Feature","help wanted"],"text":"Is there any possibility to use gentle adaboost algorithm in the library?\nMaybe there is any possibility to change parameters of sklearn.ensemble.AdaBoostClassifier\nto make it work this way?\n\nThank you.\n"},{"labels":["New Feature"],"text":"I believe this would be a good feature in sklearn.preprocessing. How do others feel about this?\n"},{"labels":["New Feature"],"text":"Would it be useful to other if `train_test_split` was able to take a stratified sample like so\n\n``` python\n>>> train_test_split([1,1,1,1,2,2,2,2], test_size=0.5, stratified=True)\nOut[2]: [[1, 2, 2, 1], [1, 1, 2, 2]]\n```\n\ninstead of a random sample, as it currently does:\n\n``` python\n>>> train_test_split([1,1,1,1,2,2,2,2], test_size=0.5)\nOut[1]: [[2, 1, 2, 2], [1, 1, 1, 2]]\n```\n"},{"labels":["New Feature"],"text":"Fitting a model several times when building a validation or a learning curve can be costly while the evaluation of the scorer can be very fast. \n\nIt would be interesting if it would be possible to evaluate a list of scorers given to:\n\n`sklearn.learning_curve.learning_curve`\n`sklearn.learning_curve.validation_curve`\n\nas the argument `scoring = [scorer1, scorer2, scorer3, ... ]`\n\nAs a workaround, I'm going to see if my scorer can return a float with extra info in the form of extra properties, like the extra scorers that I want to evaluate (in my particular case, I'm even going to try including confusion matrixes), although I'm quite new at Python, and I don't know if such a thing is possible/easy. Nevertheless such an approach seems unnecessarily twisted.\n\nLearning curve and validation curves are the two  functions that are relevant to me. I don't know whether there are any other methods which may be susceptible of this enhancement.\n\nWould you consider as feasible expanding scoring functionality to accept lists of scorers?\n"},{"labels":["API","New Feature"],"text":"Following up on #3113 and #3112, what about arbitrary transforms to the `y` values? Those issues dealt primarily with \"label transforms\"  but I would like to use transformers to mean or range center the `y` values as well.\n\nIdeally I would have some transform that can be applied to the y values before fitting and then applied in the inverse to the predicted `y` values coming out of `predict`.\n\nIdeally this Transformer could be added to a pipeline.\n\nCurrently the signature for `transform` for [`StandardScaler`](https://github.com/scikit-learn/scikit-learn/blob/a413f875f1a7c9528290e01e1c030c336b9f32e4/sklearn/preprocessing/data.py#L338) allows for transforming `y` but as pointed out in the linked issues, not all transform methods have a signature allowing for a `y` to be passed in. \n\nFurther even for `StandardScaler` there is an inconsistency with the [`inverse_transform`](https://github.com/scikit-learn/scikit-learn/blob/a413f875f1a7c9528290e01e1c030c336b9f32e4/sklearn/preprocessing/data.py#L366) NOT taking `y`.\n"},{"labels":["New Feature"],"text":"See here:\nhttps://github.com/scikit-learn/scikit-learn/pull/2199#issuecomment-70141935\n\nIt should be added as an additional `linkage` option to agglomerative clustering.\n\nI had an implementation here but it rebuilds the tree which is very stupid:\nhttps://github.com/amueller/information-theoretic-mst/blob/master/heuristics.py#L10\n"},{"labels":["New Feature"],"text":"Only cosine distance is currently supported, while most neighbors algorithms assume a Minkowski distance (e.g. euclidean).\n\nThis may depend on #3988, or we could replace the current hasher as default. It would be really good to have this in the next release, so that we can allow this to be the default.\n"},{"labels":["API","Moderate","New Feature","help wanted"],"text":"Some data transformations -- including over/under-sampling (#1454), outlier removal, instance reduction, and other forms of dataset compression, like that used in BIRCH (#3802) -- entail altering a dataset at training time, but leaving it unaltered at prediction time. (In some cases, such as outlier removal, it makes sense to reapply a fitted model to new data, while in others model reuse after fitting seems less applicable. )\n\nAs noted [elsewhere](https://github.com/scikit-learn/scikit-learn/pull/1454#issuecomment-11313359), transformers that change the number of samples are not currently supported, certainly in the context of `Pipeline`s where a transformation is applied both at `fit` and `predict` time (although a hack might abuse `fit_transform` to make this not so). `Pipeline`s of `Transformer`s also would not cope with changes in the sample size at fit time for supervised problems because `Transformer`s do not return a modified `y`, only `X`.\n\nTo handle this class of problems, I propose introducing a new category of estimator, called a `Resampler`. It must define at least a `fit_resample` method, which `Pipeline` will call at `fit` time, passing the data unchanged at other times. (For this reason, a `Resampler` cannot also be a `Transformer`, or else we need to define their precedence.)\n\nFor many models, `fit_resample` needs only return `sample_weight`. For sample compression approaches (e.g. that in BIRCH), this is not sufficient as the representative centroids are modified from the input samples. Hence I think `fit_resample` should return altered data directly, in the form of a dict with keys `X`, `y`, `sample_weight` as required. (It still might be appropriate for many `Resampler`s to only modify `sample_weight`; if necessary, another `Resampler` can be chained that realises the weights as replicated or deleted entries in `X` and `y`.)\n"},{"labels":["New Feature","help wanted"],"text":"So, the output of hierarchichal clustering results can be determined either by number of clusters, or by the a distance thereshold to cut the tree at that threshold. However, scikit learn only supports one way! \n\nclass sklearn.cluster.AgglomerativeClustering(n_clusters=2, ...\n\nAs a suggestion, is it possible to add the other option, to give distance_threshold as input argument and get as many clusters are created in the output! So, one of this argument should be given, either n_clusters or the threshold, not both!\n"},{"labels":["New Feature"],"text":"Hi,\n\nI wanted to bring up an issue with the parallel execution model of scikit-learn that has bitten me numerous times.\n\nI often find myself wishing to run a sklearn task that can be parallelized with n_jobs. However, I may wish to run the task itself in parallel with even more tasks. An example of this is running a grid search on multiple different training sets at once, or with different cv generators. Or I may wish to run Validation Curves on multiple different parameters at once. This isn't currently possible because you can't kick off a joblib.Parallel() inside of a subprocess.\n\nIn some cases, it makes sense to simply break the tasks out into separate programs. However, often that breakdown doesn't make sense and it would really be best for the code if it could all be part of the same program.\n\nThe workaround I have used is to reimplement various parts of the sklearn internals in such a way that rather than create all the joblib.delayed() jobs and execute them with joblib.Parallel in the same place, I create the jobs in one place and return them, and then collect each task's delayed jobs and run them together under one Parallel() outside. I then take the results of the completed delayed jobs and send them back into their respective tasks to be aggregated and processed.\n\nSo my question is, would there be interest in adding this capability to sklearn? I think a basic pattern of providing an option to either return the completed results, or a (delayed_jobs, result_aggregator_function) tuple would go a long way. I would be interested in working on the pull request for it if there was interest in such a thing.\n\nThanks,\nDan Spitz\n"},{"labels":["New Feature"],"text":"Hi, \n\nI was wondering whether there was an in-built function to make a k-fold cross-validation where each class is artificially equalized within the training (and optionally the testing) set(s):\nE.g. y = [0, 0, 0, 0, 1, 1, 1]\n=> train = [0, 0, 1, 1], test = [0, 1]\n\nI know it's not optimal to throw some data out (and we should favor stratified foldings), but some do sometimes want to get a chance level at 50% .\n\nIf this feature do not already exist, do you think it'd be better to add it as an option in StratifiedKfold and StratifiedShuffleSplit or do you think a separate function would be more appropriate?\n\nThanks!\n"},{"labels":["New Feature"],"text":"Hi,\nI was wondering if it would be worthwhile to add a simple `FeatureSelector` class that can be used in scikit's `Pipeline`. For example if a user wants to select particular columns (useful for cross-validation for example) and compare it against feature selection techniques etc. \n\nE.g., \n\n```\nclf1 = Pipeline(steps=[\n    ('scaler', StandardScaler()),\n    ('reduce_dim', FeatureSelector(cols=(1,3))),    # select feature 2 and 4\n    ('classifier', GaussianNB())   \n    ]) \n\nclf2 = Pipeline(steps=[\n    ('scaler', StandardScaler()),    \n    ('reduce_dim', PCA(n_components=2)),\n    ('classifier', GaussianNB())   \n    ])\n\n...\n```\n\nThe code could be as simple as:\n\n```\nimport numpy as np\n\nclass FeatureSelector(object):\n\n    def __init__(self, cols):\n        self.cols = cols\n\n    def transform(self, X, y=None):\n        col_list = []\n        for c in self.cols:\n            col_list.append(X[:, c:c+1])\n        return np.concatenate(col_list, axis=1)\n\n    def fit(self, X, y=None):\n        return self\n```\n\nPS: How would I add a label to this issue track (I read in the scikit doc. that labels are recommended)\n"},{"labels":["New Feature"],"text":"I was wondering if anyone would find use in some kind of Blocked ShuffleSplit functionality in sklearn. To my knowledge, one is only able to shuffle, then split a set of indices. However, there are many times that I want contiguous data points to remain close to one another (e.g., if I'm modeling a time-series). To that extent, I usually want to do something like shuffling in blocks, such that timepoints that are right next to each other don't end up in the train and test sets.\n\nI wrote a quick and dirty script to do shufflesplit in blocks, and I wonder if others would find this useful. Basically I'm imagining two options:\n\nBlockShuffleSplit(n, n_in_block=10, block_indices=None)\n\nn_in_block : this would specify the size of blocks. The input indices would then be grouped into blocks of this size, then the block labels would be shuffled.\n\nblock_indices: this would be an array of size n that would let the user specify a custom set of block indices. E.g., if I've got a 100-length set of indices that contains 10 trials of variable length. I could give the exact trial indices with this parameter, and block shuffling would always keep trials together.\n\nGranted, some splitting would still occur wherever the train/test split happened (e.g., if it happened in the middle of a block), but it's still better than just shuffling everything together. I imagine there'd be some other challenges as well, but I wanted to throw this idea out there in case anyone thinks it'd be useful.\n\ne.g.:\n![image](https://cloud.githubusercontent.com/assets/1839645/3912952/82eb0864-2330-11e4-9c73-b9c786bb3185.png)\n\nand setting n_in_block to 1 would yield the same as ShuffleSplit\n![image](https://cloud.githubusercontent.com/assets/1839645/3912959/975a5b9c-2330-11e4-8dea-2067e2a24a20.png)\n"},{"labels":["Easy","New Feature"],"text":"There have been some discussion about adding a balanced accuracy metrics (see this [article for the definition](http://en.wikipedia.org/wiki/Accuracy_and_precision)) on the mailing list. This is a good opportunity for a first contribution. \n\nThis implies coding the function, checking correctness through tests and highlight your work with documentations. In order to be easily used by many, a balanced accuracy scorer is a good idea.  As a bonus, it could also support `sample_weight`.\n"},{"labels":["New Feature"],"text":"Hello there,\nThanks for making this fantastic library. I use it every day in my bioinformatics research. We're developing a toolkit for single-cell RNA-seq analysis (http://github.com/yeolab/flotilla) and want to add all current state-of-the-art analyses. Unfortunately, most of these are in R. I can reimplemement some of them, but they rely on certain R packages, in particular [VGAM](http://cran.r-project.org/web/packages/VGAM/index.html), aka Vector Generalized Linear and Additive Models. I've found a few mentions of GAMs here:\n- https://github.com/scikit-learn/scikit-learn/wiki/A-list-of-topics-for-a-google-summer-of-code-(gsoc)-2012\n- A subtype of GAMs, Multiple additive regression (MARS) discussion: https://github.com/scikit-learn/scikit-learn/issues/845\n  - MARS pull request https://github.com/scikit-learn/scikit-learn/pull/2285\n\nHas there been any update on creating these libraries?\n"},{"labels":["New Feature"],"text":"We recently added a pure Numpy implementation of the ICA infomax algorithm to [mne-python](https://github.com/mne-tools/mne-python).\n\nhttps://github.com/mne-tools/mne-python/blob/master/mne/preprocessing/infomax_.py\nhttps://github.com/mne-tools/mne-python/blob/master/mne/preprocessing/tests/test_infomax.py\n\nIt should not be too difficult to include it in sklearn since we already have tests that are adapted from the FastICA tests.\n\nIf people are interested we could start discussing the API.\n\ncc @GaelVaroquaux @ogrisel @agramfort \n"},{"labels":["Moderate","New Feature"],"text":"It would be nice to have the warm_start option, as in gradient boosting.\n\n``` python\nclf = None\nscores = []\nfor n_estimators in (5, 10, 15):\n    if clf is None:\n        clf = RandomForestClassifier(n_estimators=n_estimators, warm_start=True)\n    else:\n        clf.n_estimators = n_estimators\n    clf.fit(X, y)\n    scores.append(clf.score(X, y))\n```\n\nThis will of course require to store the random state.\n"},{"labels":["New Feature","help wanted"],"text":"It would be really great if one could choose a sklearn.neighbors.KernelDensity object to be used by the sklearn.cluster.MeanShift class. For my personal use case, I need to run MeanShift with the haversine distance metric on a gaussian kernel.\nWhat do you think? \n"},{"labels":["New Feature"],"text":"Scikit-learn is notably lacking support for classification problems where the output data is heirarchical.  \n\nhttp://en.wikipedia.org/wiki/Multilevel_model\n"},{"labels":["New Feature"],"text":"Low priority feature request: support for multi-class roc_auc score calculation in `sklearn.metrics` using the one against all methodology would be incredibly useful. \n"},{"labels":["New Feature"],"text":"The [nudge_dataset](https://github.com/scikit-learn/scikit-learn/blob/master/examples/plot_rbm_logistic_classification.py#L48) function would benefit from being extracted as a helper function with an additional parameter to configure the shape. It should probably be renamed to `nudge_samples_2d` to highlight the fact that it interprets samples as 2D images.\n\nThis function will then be reusable to build examples for instance for the upcoming MLP class on a larger versions of the digits without having to download a large dataset such as MNIST.\n"},{"labels":["New Feature"],"text":"I suggest adding partial AUC to the metrics. this would compute the area under the curve up to a specified FPR (in the case of the ROC curve). this measure is important for comparing classifiers in cases where FPR is much more important than TPR. The partial AUC should also allow applying the McClish correction. see here: http://cran.r-project.org/web/packages/pROC/pROC.pdf\n"},{"labels":["New Feature"],"text":"I would like to contribute by adding an algorithm performing the Neighborhood component analysis (http://www.cs.toronto.edu/~fritz/absps/nca.pdf)\n\nBasically, it's trying to learn a distance metric by optimizing the leave-one-out performance on the training data. In a first time, I would first only follow the paper, and then try to add different solving methods in the parameters.\n\nTell me if you would be interested, if have any recommendations for the architecture or if someone else is already doing this.\n"},{"labels":["New Feature"],"text":"A useful preprocessing step, especially when doing prototyping, is to winsorize, trim, or clip the data to some hard limit. I've searched through the repo and mailing list but don't see anything like this currently implemented (or proposed). I'd be willing to submit a patch if there's support for this; it would provide both a standalone method and a class that follows the Transformer API.\n"},{"labels":["New Feature"],"text":"Is local linear regression in scikit? Are you planning to implement that in the future? If not, are contributions welcome in this area?\n"},{"labels":["New Feature"],"text":"One possible criterion to judge the outcome of a feature subset selection is how much the selection depends on the training set. \n\nThe Stability estimator runs the feature selection on different subsamples. It then computes the cumulative similarity of the selected feature subsets. Two possible measures for this similarity are the jaccard similarity or kunchevas index.\n\nSee: \nSaeys, Yvan, Thomas Abeel, and Yves Van de Peer. \"Robust feature selection using ensemble feature selection techniques.\" Machine learning and knowledge discovery in databases. Springer Berlin Heidelberg, 2008. 313-325.\n\nKunchevas index:\nKuncheva, Ludmila I. \"A stability index for feature selection.\" Artificial Intelligence and Applications. 2007.\n\nEdit: I'm sorry, but it forgot to set a label for this issue. Apparently I cannot relabel this once posted.\n"},{"labels":["New Feature"],"text":"Adding a new strategy='knn' in sklearn.preprocessing.Imputer class for imputing the missing values usign knn method.\n"},{"labels":["Moderate","New Feature","help wanted"],"text":"It seems like `Imputer` can be easily extended to handle arbitrary axis-wise strategies (at least in the case where the data is dense, or sparse with non-explicit entries to be imputed).\n\nThe `strategy` parameter could accept a function (or other callable) that reduces a given masked array along an axis, including [scipy.stats.mstats](http://docs.scipy.org/doc/scipy/reference/stats.mstats.html) functions. More flexibly, `strategy` could be a callable that either takes a 2d-array and an `axis` value and returns a 1d-array, or just takes a 1d-array and returns a scalar.\n\nFor example, one should be able to use:\n\n``` python\nfrom functools import partial\nfrom scipy.stats import mstats\nImputer(strategy=partial(mstats.tmean, limits=(.1, None)))\n```\n\nto impute with a trimmed mean using absolute bounds (NB: [`tmean`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mstats.tmean.html) doesn't accept an `axis` argument), or:\n\n``` python\nImputer(strategy=lambda X, axis: np.ma.mean(mstats.trimboth(X, .1, axis=axis),\n                                            axis=axis)\n```\n\nfor a trimmed mean with quantile bounds.\n"},{"labels":["New Feature"],"text":"I recommend the following clustering algorithms:\n\nBIRCH is an clustering algorithm that received the SIGMOD 10 year test of time award. The algorithm minimize run time, define clusters without scanning all the data, and exploit the non uniformity of data to treat dense areas as one.\n\nhttps://code.google.com/p/birch-clustering-algorithm/\nhttps://en.wikipedia.org/wiki/BIRCH_%28data_clustering%29\n\nI think this can be very useful for large datasets.\n\nInput parameters would be the data and a radius to indicate how close points are.\n"},{"labels":["New Feature"],"text":"Rotation methods such as Varimax should be added to PCA. It helps identify the factors that make up the components and would be useful in analysis of data.\n\nhttps://en.wikipedia.org/wiki/Varimax_rotation\n\nhttp://sites.stat.psu.edu/~ajw13/stat505/fa06/17_factor/13_factor_varimax.html\n"},{"labels":["New Feature"],"text":"I noticed that there were no Associative Learning Algorithms such as: \n\nApiori Alogorithm \nEquivalence Classification Algorithm (Eclat)\nPrefixSpan\nFP-Growth\n\nAll of them are used to detect combination of patterns in a dataset. \n\nSome of them are kind of difficult to implement I would say about 200 lines of code?\n"},{"labels":["New Feature"],"text":"The RandomizedPCA algorithm is great - you can perform PCA much quicker and on larger data sets that otherwise would either take too long or take up too much RAM.  However, the original data set still needs to fit into memory.  I was wondering if there was an out-of-core algorithm for PCA and from Googling, there seems to be one:\n\nhttp://arxiv.org/pdf/1007.5510.pdf\n\nIt's by the same authors as the current RandomizedPCA algorithm and it would be great to see this implemented as well.  This seems really useful to me and with this, scikit learn can deal with datasets of any size!  \n\nInterested to hear your thoughts on this.\n"},{"labels":["New Feature"],"text":"Hi,\n\nThe new KernelDensity class is really great! There are a few things I might like to see added in future releases:\n1. Per dimension bandwidth control. I'd like to be able to pass in an array of bandwidths and apply different smoothing in each dimension.\n2. Adaptive smoothing. I'd like to be able to apply variable smoothing such that the bandwidth is chosen equal to the kth nearest neighbor distance at each sample point.\n\nDoes anyone have an idea of how easy/possible these features might be to implement? I had a look through the code but don't know enough about tree-based evaluation to tell if it could support these functions.\n\nThanks!\n"},{"labels":["New Feature"],"text":"Hey,\n\nPython dictionary is quite wasteful for string data, so `CountVectorizer`, `TfidfVectorizer` and `DictVectorizer` all could take much less memory with an another data structure for `vocabulary_`. \n\nHere is a quick prototype that persists `vocabulary_` of `CountVectorizer` and `TfidfVectorizer` in [MARISA-Trie](https://code.google.com/p/marisa-trie/) via Python [wrapper](https://github.com/kmike/marisa-trie): https://gist.github.com/kmike/7814472.\n\nI used [this](https://gist.github.com/kmike/7813450) script to measure memory and speed of `fit` and `dump`, and [this](https://gist.github.com/kmike/7815149) script to measure parameters of `load` and `transform`.\n\nThe results are quite cool: for '20 newsgroups' data (fit on training subset, transform on test subset) memory consumption of different vectorizers after loading is the following:\n-  `CountVectorizer()`: 94MB;\n-  `CountVectorizer(ngram_range=(1,2)`: 666MB;\n-  `MarisaCountVectorizer()`: 1.2MB;\n-  `MarisaCountVectorizer(ngram_range=(1,2))`: 13.3MB;\n\nSo using a good succinct Trie implementation gives us 50x-80x reduction of memory usage; it also makes serializing and deserializing almost instant. And such vectorizers don't have HashingVectorizer limitations.\n\nThe downside is that `fit` method is 2x-3x slower and requires slightly more memory (but I think it could be changed to require less memory than CountVectorizer.fit), and `transform` is about 2x slower. Full output: https://gist.github.com/kmike/7815156\n\nWhat do you think about adding something similar to scikit-learn? \n"},{"labels":["New Feature"],"text":"In scikit-learn, some homogeneous meta-classifiers exist to combine classifiers  (<code>AdaBoost</code>, Bagging,...) by applying differents subdatasets on differents instances of the same classifier. What about heterogeneous ones  - combine differents classifiers on the same data training - ?\n\nFor my own purpose, i'm writing some of these. My starting point is the work of Kuncheva [1] and Kittler [2]. I've planned to go further and check other strategies.  Does \"scikit\"  will be interested by a pull request with some of these algorithms ?\n\nThe syntax will look like <code>FeatureUnion</code> and will (obviously) support <code>GridSearchCV</code> and <code>Pipeline</code>.\n\n```\ncombined_classifiers = ModelUnion([(\"svc\", SVC(C=0.1)),(\"sgd\",SGDClassifier(penalty=\"l2\"))])\n```\n\n[1]: Kuncheva, L. I., Bezdek, J. C., & Duin, R. P. (2001). Decision templates for multiple classifier fusion: an experimental comparison. Pattern Recognition, 34(2), 299-314.\n[2]: Kittler, J., Hatef, M., Duin, R. P., & Matas, J. (1998). On combining classifiers. Pattern Analysis and Machine Intelligence, IEEE Transactions on, 20(3), 226-239.\n"},{"labels":["Moderate","New Feature"],"text":"`FeatureUnion` currently passes identical data to each constituent transformer. Often one wants to differentiate between groups of features in how they are transformed. While this is possible by making each stacked transformer a `Pipeline` consisting of a pre-determined feature selector and another transformer, this is cumbersome.\n\nA parameter should be added to specify which features are routed to which constituents. This is not necessarily trivial to design, particularly because the input `X` to `FeatureUnion.transform` need not be a conventional 2d feature array (it may be a list/array of dicts, texts, or other objects).\n"},{"labels":["New Feature"],"text":"When #1606 is merged we will have some multi-label metrics. I don't think they work with GridSearchCV out of the box. We should also consider adding a default metric as score function in the multi-class module.\n"},{"labels":["New Feature"],"text":"See [the paper](http://www.quretec.com/u/vilo/edu/2003-04/DM_seminar_2003_II/clustering/Elkan_fast_kmeans_ICML_2003_111.pdf).\nIt uses the triangle inequality to speed up updates. A bit trickier to implement than the standard algorithm but I don't see why we shouldn't do it.\n"},{"labels":["New Feature"],"text":"A few estimators like `Lasso` support the `warm_start` option. \n\n``` python\nlasso = Lasso(warm_start=True)\nscores = []\nfor alpha in alphas:\n    lasso.set_params(alpha=alpha)\n    lasso.fit(X_train, y_train)\n    scores.append(lasso.score(X_test, y_test))\n```\n\nDue to how `GridSearchCV` is designed (use of `clone`, parallelism with `n_jobs`), setting the `warm_start` option wouldn't have any effect. \n\nIt would be nice to create a grid search object which can benefit from warm-start. `n_jobs` could still be supported but should be with respect to cross-validation folds.\n\nThis would require specifying with respect to what parameters the warm-starting must be done (e.g., `alpha` in the case of Lasso).\n"},{"labels":["Easy","New Feature"],"text":"We should move the loading of the covertype dataset from the benchmarks to the datasets module. I find it really hard to work with the benchmark to do gridsearch etc.\nAlso the dataset is quite interesting to reproduce papers.\n"},{"labels":["API","New Feature"],"text":"This is a proposal to to resolve two API issues in sklearn:\n- Generalized Cross Validation\n- Early stopping\n## Why should we care about that?\n\nWith **generalized cross validation** I mean finding the best setting of some parameter without refitting the entire model. This is currently implemented for RFE and some linear models via a EstimatorCV. These don't work well together with GridSearchCV as might be required in a Pipeline or when more than one parameter needs to be found.\nAlso, a similar functionality would be great for other models like GradientBoosting (for n_estimators) and all tree-based methods (for max_depth).\n\nWith **early stopping** I mean saving computations when more computation doesn't improve the result. We don't have that yet but it would be a great (maybe even necessary) feature for SGD based methods and bagging methods (random forests and extra trees). Note that early stopping needs the use of a validation set to evaluate the model.\n## How can we solve that?\n\nLet's start with the **generalized cross validation**.\nWe need it to work together with GridSearchCV.\nThis will definitely require changes in both GridSearchCV and the estimators.\nMy idea: \n1. give the estimator an iterable of values you want to try, i.e. `max_depth=range(1, 10)`. During `fit` the estimator will fit in a way that it can produce predictions for all of these values.\n2. When `predict` is called, the estimator will return a dict with keys the parameter values and values the prediction values for these parameters. (we could also add a new `predict_all` function but I'm not sure about that).\n\nGridSearchCV could then simply incooperate these values into the grid-search result.\nFor that GridSearchCV needs to be able to ask the estimator for which parameters it can do generalized CV and just pass  on the list of parameters it got there.\n\nSo now to **early stopping**. The reason I want to treat the two problems as one is that early stopping is basically a lazy form of generalized cross-validation.\nSo\n1.  you would provide the estimator with an iterable, i.e. `n_iter=range(1, 100, 10)`.  \n2. The estimator fits for all these values (as implemented as above). But for each setting, it also evaluates on a validation set, and if there is only a small improvement, training will stop.\n\nI would provide the validation set that is used either as a parameter to  `__init__` or `fit` (not sure). So it would be enough to add two parameters to the estimator: `early_stopping_tolerance` and `early_stopping_set=None` (if it is None, no early stopping).\n\nThere are two choices that I made here:\n1. provide a separate validation set, not generate one from the training set on the fly.\nThis is again so that this can be used inside GridSearchCV. And doesn't really add that much overhead if the user doesn't use GridSearchCV (why would they do that any way?)\nIt is also very explicit and gives the user a lot of control.\n2. Provide the parameter settings as an iterable, not a maximum. The reason for that is that you probably don't want to evaluate the validation set every iteration, but maybe every k iterations. What's k? another parameter? I feel like an iterable is a good way to specify this. Also, it allows for a unified interface with the generalized cross-validation case.\n## Restrictions\n\nIn pipelines, this will only work for the last estimator. So I'm not sure to do this with RFE for example.\n## Do we really need this?\n\nThe changes I proposed above are quite big in some sense, but I think the two issues **need** to be resolved. If you have any better idea, feel free to explain it ;)\n"},{"labels":["New Feature"],"text":"PMML (predictive models markup language) is standard interchange format for trained predictive models (and more).\n\nHere is a list of industry players and open source projects supporting PMML:\n\nhttp://www.dmg.org/products.html\n\nIn particular, [BigML](http://bigml.com) is supporting export / import of PMML for decision tree models (and maybe ensemble of tree models too, need to check).\n\nThis the discussion in the comments of this thread:\n\nhttp://www.quora.com/Machine-Learning/What-are-the-pros-and-cons-of-using-PMML-as-an-interchange-format-for-predictive-analytics-models/answer/Francisco-J-Martin\n\nNote: BigML also supports a simpler, more compact and human readable JSON version of PMML named JSON PML as documented on this gist:\n\n  https://gist.github.com/4565563\n\nSupporting PMML and/or JSON PML export of scikit-learn decision trees would make it possible to use the BigML web user interface to introspect the trees and run them on datasets loaded on the platform or publish them using the BigML features.\n\nUsing an external format for the persistence of some scikit-learn models (maybe not all) would also provide a partial solution to the issue of persistence / loading of models trained using a prior, class incompatible version of scikit-learn.\n\nPMML export would also make it easier to perform science experiment replication (and help with reproduction too) if scientist using decision tree models would publish the PMML export of their ensemble of trees as technical annex to a paper for instance as already R/Rattle and Weka support PMML exports and imports. \n\nOpen questions:\n- how big (in bytes) would be a PMML export of a realistic ensemble of trees model such as the ones used in computer vision?\n- the PMML format looks very verbose, we could probably devise more compact model export format using [msgpack](http://msgpack.org/) [BSON](http://bsonspec.org/), [Avro](http://avro.apache.org/docs/current/), [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or [Parquet](http://parquet.io/) as a more generic solution for the persistence of scikit-learn model that does not rely upon the python class structure.\n"},{"labels":["crypto","feature request"],"text":"<!--\nThank you for suggesting an idea to make Node.js better.\n\nPlease fill in as much of the template below as you're able.\n-->\n\n**Is your feature request related to a problem? Please describe.**\nNo\n\n**Describe the solution you'd like**\nOpenSSL already supports CMAC, but Node doesn't implement it. We use smartcards that only support CMAC, not HMAC, and our current solution is hacky.\n\n**Describe alternatives you've considered**\nSo far we've just hashed the message and encrypted the key with a secret."},{"labels":["crypto","feature request","openssl","wrong repo"],"text":"**Is your feature request related to a problem? Please describe.**\r\nCurrently, NodeJS exports PKCS 8 private keys as Version 1 `PrivateKeyInfo` objects, but as of 2010, [RFC 5958](https://tools.ietf.org/html/rfc5958) specifies Version 2. This only differs from Version 1 by optionally including the public key at the end of the object, and, of course, the version number being incremented.\r\n\r\n**Describe the solution you'd like**\r\nThe ability to export Version 2 PKCS 8 Private Keys. All keys can be exported to Version 2 because the included public key at the end is still optional in Version 2. If it is too much work to generate public keys for all algorithms, the public key can be generated just for selected algorithms (presumably those most commonly used, such as RSA and DSA).\r\n\r\nThis would change [Crypto.KeyObject.export()](https://nodejs.org/dist/latest-v14.x/docs/api/crypto.html#crypto_keyobject_export_options) by adding a new export type: `pkcs8v2`. Again, if the public key cannot be generated, it will simply not be included in the export.\r\n\r\n**Describe alternatives you've considered**\r\nThere are no native alternatives. You would have to use third-party crypto libraries to generate PKCS 8 Version 2 keys.\r\n"},{"labels":["feature request","process"],"text":"In the stalled PR https://github.com/nodejs/node/pull/25715, @Fishrock123 was working to introduce a new API... from the original description:\r\n\r\n> Adds a public way to access node::FatalException from javascript, as process.exitWithException().\r\n>\r\n> If an error stack is available on the value, this method of exiting does not add additional context, unlike regular re-throwing, yet also uses the regular error printing logic. This behavior is particularly desirable when doing 'fatal exits' from the unhandledRejection event.\r\n\r\nWhile the PR had plenty of support to move forward, there was an edge case around the `uncaughtException` event handler that would need to be worked through in order for it to move forward.\r\n\r\nThe original PR stalled out and has been closed, but given the support the idea had, I wanted to make sure to open a Feature Request issue in case someone else wanted to pick up the work and move it forward."},{"labels":["events","feature request"],"text":"**Is your feature request related to a problem? Please describe.**\r\nIn SocketIO it would be useful to be able to add middleware functions to specific events. The sockets use the EventEmitter. \r\n\r\n\r\n**Describe the solution you'd like**\r\nIn a regular express app it is possible to add middleware to specific endpoints like so: \r\n\r\n```\r\nfunction someFunc(req, res, next) {\r\n    // doing something\r\n   next()\r\n}\r\napp.get('/users', someFunc, (req, res) => { res.send('someData')})\r\n```\r\n\r\n\r\nIt would be logical to also be able to do it with SocketIO:\r\n\r\n```\r\nfunction someFunc(data, next) {\r\n    // doing something\r\n   next()\r\n}\r\nfunction someFunc2(data, next) {\r\n    // doing something\r\n   next()\r\n}\r\nsocket.on('users', someFunc, someFunc2, (data) => { /*doing something*/})\r\n\r\n```\r\n**Why it would be used**\r\nThis could be useful to add callbacks to endpoints to check if a user is authenticated or has enough credits before using the endpoint for example. Instead of having a global middleware that is checked for every endpoint.\r\n\r\nSo by implementing these extra middleware to be added in the EventEmitter.on() function it could have the same behavior as the express routes and still maintain the same behavior with just one function. \r\n\r\n**Describe alternatives you've considered**\r\n\r\n- using the socket.use(fn) function would bring a lot of overhead as it would call the middleware every time for every endpoint.\r\n(added: )\r\n- it could also be a SocketIO feature, though I think it could also be useful for other applications where specific handling per event endpoint is needed.\r\n- It could be possible to create a wrapper function like `socket.on('users', functionWrapper( fn1, fn2, fn3))` though it would be cleaner to be able to directly put the functions in the `.on()` function.\r\n\r\n**example + further implementation/usage info**\r\n[JSFIDDLE](https://jsfiddle.net/dirvann/5p42j9ze/2/)\r\n[comment below](https://github.com/nodejs/node/issues/33932#issuecomment-646027458)"},{"labels":["feature request","fs"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nAn easy to easy API for determining if a file is executable based on its `fs.Stats`. \r\n\r\n**Describe the solution you'd like**\r\nDerived from Ruby: https://www.rubydoc.info/stdlib/core/File%2FStat:executable%3F I've created a rough implementation. It hasn't been tested.\r\n\r\n```js\r\nfunction isExecutable (stat: fs.Stats) {\r\n\tconst S_IXUGO = fs.constants.S_IXUSR | fs.constants.S_IXGRP | fs.constants.S_IXOTH\r\n\tconst euid = process.geteuid()\r\n\tif (euid === 0) {\r\n\t\treturn stat.mode & S_IXUGO ? true : false\r\n\t} else if (stat.uid === euid) {\r\n\t\treturn stat.mode & fs.constants.S_IXUSR ? true : false\r\n\t} else if (stat.gid === process.getgid() || stat.gid === process.getegid()) {\r\n\t\treturn stat.mode & fs.constants.S_IXGRP ? true : false \r\n\t} else if (!(stat.mode & fs.constants.S_IXOTH)) {\r\n\t\treturn false\r\n\t} else {\r\n\t\treturn true\r\n\t}\r\n}\r\n```\r\n\r\nI'll be happy to work on the PR if maintainers thinks its a worthwhile addition to fs\r\n"},{"labels":["assert","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI was using `assert(haystack.match(/needle/));` in my unit tests, and I found that `assert.match(haystack, /needle/);` produced much cleaner errors. +1, suggest to move to stable.\r\n\r\nHowever, in a small handful of cases, I was also using the match results later on in the test, like so:\r\n\r\n```javascript\r\nconst m = haystack.match(/nee(\\d+)le/);\r\nassert(m);\r\n// ...\r\nassert(haystack2.match(m[1]));\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nIf I could rescue the match results from `assert.match`, and if the `regexp` argument could be a string, this code could be simplified:\r\n\r\n```javascript\r\nconst m = assert.match(haystack, /nee(\\d+)le/);\r\n// ...\r\nassert.match(haystack2, m[1]);\r\n```\r\n\r\n\r\n**Describe alternatives you've considered**\r\nThis feature simply leads to cleaner tests.\r\n\r\nPossible downsides are that people may overlook assert calls used like this, because they always expect \"assert\" to work like a C assertion, or having a return value is too inconsistent with the rest of the library."},{"labels":["feature request"],"text":"<!--\r\nThank you for reporting an issue.\r\n\r\nThis issue tracker is for bugs and issues found within Node.js core.\r\nIf you require more general support please file an issue on our help\r\nrepo. https://github.com/nodejs/help\r\n\r\n\r\nPlease fill in as much of the template below as you're able.\r\n\r\nVersion: output of `node -v`\r\nPlatform: output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\nSubsystem: if known, please specify affected core module name\r\n-->\r\n\r\n* **Version**: 12.17.0\r\n* **Platform**: Linux 5.4.0-33-generic # 37-Ubuntu SMP Thu May 21 12:53:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n* **Platform**: Linux 3.16.0-4.9-amd64 # 1 SMP Debian 3.16.7-ckt25-1 (2018-11-21) x86_64 GNU/Linux\r\n(it reproduces on both platforms)\r\n* **Subsystem**: ?\r\n\r\n### What steps will reproduce the bug?\r\n\r\n<!--\r\nEnter details about your bug, preferably a simple code snippet that can be\r\nrun using `node` directly without installing third-party dependencies.\r\n-->\r\n\r\n- open two terminals locally on machine\r\n- run `node` on terminal 1\r\n- `new Date().getTimezoneOffset()`\r\n- change timezone in terminal 2\r\n- ask for `new Date().getTimezoneOffset()` in node in terminal 1 again\r\n- **note that timezone change is not reflected**\r\n- exit node process in terminal 1 and enter `node` again (another `node` process)\r\n- now `new Date().getTimezoneOffset()` reflects the new timezone\r\n- **note that this not-reflecting-new-timezone thing affects creating new dates and any other date operations. `getTimezoneOffset()` is just a sample**\r\n\r\n### How often does it reproduce? Is there a required condition?\r\nalways reproduces, no required condition.\r\n\r\n### What is the expected behavior?\r\n\r\n<!--\r\nIf possible please provide textual output instead of screenshots.\r\n-->\r\nTo reflect and update timezone of node process, when timezone of system is changed.\r\n\r\n### What do you see instead?\r\n\r\n<!--\r\nIf possible please provide textual output instead of screenshots.\r\n-->\r\nI see the old timezone.\r\n\r\n### Additional information\r\n\r\n<!--\r\nTell us anything else you think we should know.\r\n-->\r\nThis bug has been created and reported previously, as I read, some people mentioned that the main bug is with V8, and linked to some bugs there. By the way, all previous reported bugs were closed. I link to everything I found here:\r\nhttps://github.com/nodejs/node/issues/4022\r\nhttps://github.com/nodejs/node/pull/20026\r\nhttps://github.com/nodejs/node/issues/19974\r\nhttps://github.com/nodejs/node/issues/3449\r\n\r\nI created this issue as some time has passed and honestly, I couldn't find out why the previous issues were closed, and V8 discussions were beyond my knowledge.\r\n\r\n### What is the matter?\r\n\r\nWe have a system, a rather big one, composed of different programming languages and technologies, all components of our system works fine when timezone changes, except nodejs. There are solutions like https://github.com/evanlucas/reset-date-cache, but suppose node queries sql queries and created date objects from timestamps in sql tables, and timezone needs  to  be kept updated. the only way to keep it updated is to reset cache on each page request, which as noted in https://github.com/evanlucas/reset-date-cache: \r\n> The underlying call being made is quite expensive so it should only be used where absolutely necessary.\r\n\r\n### Screenshot of reproduction\r\n\r\n![Screenshot from 2020-06-09 18-58-34](https://user-images.githubusercontent.com/5755214/84143307-65883480-aa67-11ea-8013-e2f28ce24671.png)\r\n"},{"labels":["assert","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nI've been working on a testing tools set as part of some new proprietary ecosystem \r\n(with the intent to open-source elements from it once they are stable enough in their form and require less maintenance, but so far it's proprietary :( ).\r\nAs part of this testing framework, I need to perform a deep comparison of objects.\r\n\r\nAs a start - I got `assert.deepEqual` - which is great. However - it ends with an exception.\r\nSometimes I would like to manage the exception myself - I just need the indication.\r\n\r\nI decided to open this issue when I came across more use-cases:\r\n - data healer - need to act on a decision if a model does not comply with expected values.\r\n   For this - we need a form of `containsEql`.\r\n - suite setup & teardown - need to add test-fixture data, and validate that essential objects are part of the target env (e.g. object describing super-user, or root categories, root tags, etc).\r\n \r\nIn all of the cases, it's beneficial to be able to perform both `containsEql` and `deepEqual`.\r\n\r\nI did see `util.isDeepStrictEqual` - and despite the confusing name that gave me hope.\r\n\r\n(I mean, it took me a lot of tries to understand that `strict` does not mean reference-comparison, but comparison without conversion of values. The first time I saw it I struggled to understand what it means - does it compare shallow copies? I had to try and see for myself. Anyway - I'm side tracking)\r\n\r\n**Describe the solution you'd like**\r\nI would propose on the same spirit of `util.isDeepStrictEqual(..)`\r\n`util.isDeepStrictContain(..)`\r\n\r\nI also saw the underlying mechanisms with the `bStirct` flag, and thought it could also be useful to let users inject it if they so choose, but I'm not sure about the names or the form it should take.\r\n\r\nI'll be happy to start work on it if we can agree on the form it should take.\r\n\r\nI mean, the mechanisms are there, and their functionality is all well-tested.\r\nWe just need to feature them and add only tests that show they are available, or even reuse parts of the existing tests - but expect a boolean instead of an error.\r\n\r\n**Describe alternatives you've considered**\r\nAll current alternatives come from userland codes, which basically duplicate the same logic and introduce their own takes and flavors. Which is a pity...\r\nWe have that logic in `node`, and it's a good logic that runs deep and already serves now a role in APIs used by userland.\r\n"},{"labels":["build","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nPlease describe the problem you are trying to solve.\r\n\r\nThis feature is not related to a problem. \r\n\r\n**Describe the solution you'd like**\r\nPlease describe the desired behavior.\r\n\r\nThis feature asks for tighter integration with continuous fuzzing via OSS-Fuzz. In this PR https://github.com/google/oss-fuzz/pull/3860#issuecomment-638747166 I integrated NodeJS with fuzzing and so far it was used to capture this bug https://github.com/nodejs/node/pull/33640 \r\nHowever, the current integration could be improved and it would be desirable to cover more of NodeJS with fuzzers, as briefly discussed with @bnoordhuis in the above PR. Specifically, there are two core parts where the integration with OSS-Fuzz can improve: (1) integrating the build procedure with the OSS-Fuzz environment more closely with the NodeJS environment and (2) building more fuzzers. \r\n\r\nRegarding part 1 then the current strategy (`build.sh` here https://github.com/google/oss-fuzz/pull/3860/files) compiles the NodeJS core in an awkward manner by first running `make` without any proper OSS-Fuzz flags and then re-comiling the `.cc` files of `node/src` with the proper OSS-Fuzz flags, in order to create a static archive. \r\nThe OSS-Fuzz environment sets the following environment variables when compiling the fuzzers to something similar to this:\r\n```\r\nexport CC=clang\r\nexport CXX=clang++\r\nexport CFLAGS=\"-O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link\"\r\nexport CXXFLAGS=\"-O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link -stdlib=libc++\"\r\nexport LIB_FUZZING_ENGINE=\"-fsanitize=fuzzer\"\r\n```\r\nIt would be nice if the build process of NodeJS can integrate a fuzzing part which enables us to compile with the OSS-Fuzz variables (`CFLAGS`, `CXXFLAGS` and `LIB_FUZZING_ENGINE`) above. The `LIB_FUZZING_ENGINE` variable is only used for linking the final fuzzer and should not be used on any of the compiled libraries. Also note that to get the fuzzers compiled properly they should be compiled against static libraries. As I see the desired goal is, therefore, to have the files in `node/src` be compiled with the `CFLAGS` and `CXXFLAGS` variables above.\r\n\r\nRegarding part 2 then I can certainly start writing more fuzzers and covering more of the NodeJS code, but if you have any suggestions of good APIs for fuzzing then here would be a good place to write I think. "},{"labels":["feature request","promises","stream"],"text":"I often use `stream.pipeline` in async functions, and it's always a bit painful to have to promisify it.\r\nWhat about exporting a promisified version from the `stream` module directly?\r\nI haven't opened an issue or PR before because I don't have a good idea for the name, but maybe somebody else does!\r\n\r\n@nodejs/streams "},{"labels":["feature request","fs"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nPeople sometimes will encounter the error that `System limit for number of file watchers reached.`. If we enable users to add hooks in fs.statWatchers, they could track the codes that which module call `fs.watchFile` many times\r\n\r\n**Describe the solution you'd like**\r\n```js\r\nconst { statWatchers, watchFile } = require(‘fs’)\r\nstatWatchers.on(‘statAdd’, () => {})\r\nstatWatchers.on(‘statRemove’, () => {})\r\n\r\nwatchFile(‘xxx‘, () => {})\r\n```\r\n\r\nRelated code\r\nhttps://github.com/nodejs/node/blob/9949a2e1e3100c4ff1f228bac57c1af95cdc3e9d/lib/fs.js#L1458\r\n"},{"labels":["feature request","fs"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\ni am author of npm-package istanbul-lite.\r\nwhen creating coverage-reports and artifacts,\r\nits common to lazily write data to file-directories that have yet to be created.\r\n\r\n**Describe the solution you'd like**\r\n\r\nadd extra boolean `<options>.mkdirp` to functions `fs.writeFile` and `fs.writeFileSync`,\r\nthat will lazily create missing file-directories when writing to file.\r\nthe common-use-case are:\r\n- lazily generate directories when writing coverage-report of instrumented files\r\n- lazily generate directories when writing artifacts in ci and testing\r\n- lazily generate directories when scaffolding new web-projects\r\n\r\n**Describe alternatives you've considered**\r\n\r\ni currently use this helper-function in all my projects,\r\nto lazily generate directories when writing artifacts and coverage-reports.\r\n```javascript\r\n    function fsWriteFileWithMkdirpSync (file, data) {\r\n    /*\r\n     * this function will sync write <data> to <file> with \"mkdir -p\"\r\n     */\r\n        let fs;\r\n        // do nothing if module does not exist\r\n        try {\r\n            fs = require(\"fs\");\r\n        } catch (ignore) {\r\n            return;\r\n        }\r\n        // try to write file\r\n        try {\r\n            fs.writeFileSync(file, data);\r\n            return true;\r\n        } catch (ignore) {\r\n            // mkdir -p\r\n            fs.mkdirSync(require(\"path\").dirname(file), {\r\n                recursive: true\r\n            });\r\n            // rewrite file\r\n            fs.writeFileSync(file, data);\r\n            return true;\r\n        }\r\n    };\r\n```\r\n"},{"labels":["feature request","http2"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI'm trying to send a window_update frame using the http2 module.\r\n\r\n**Describe the solution you'd like**\r\nA way to send the window_update frame\r\n\r\n**Describe alternatives you've considered**\r\nLooking into the source code I couldn't find a way to send it, the documentation also doesn't say anything about it. If it is already possible to send it, forgive me.\r\n"},{"labels":["feature request","http2"],"text":"*This is a feature request for adding `maxHeaderSize` in `http2` as quoted below*\r\n\r\n***\r\nSounds good to me – `maxHeaderSize` could be added along with that. :+1:\r\n\r\n_Originally posted by @addaleax in https://github.com/nodejs/node/issues/32388#issuecomment-601667748_"},{"labels":["discuss","feature request","timers","worker"],"text":"Hey, web browsers and framework vendors are working on a `postTask` API for dispatching tasks with particular priorities.\r\n\r\nIt is specified [here](https://github.com/WICG/main-thread-scheduling/) and here is a basic example:\r\n\r\n```js\r\n// https://github.com/WICG/main-thread-scheduling/blob/master/sample-code/scheduling-tasks.html\r\nscheduler.postTask(() => 'This should be line 3', {priority: 'background'});\r\nscheduler.postTask(() => 'This should be line 2', {priority: 'user-visible'});\r\nscheduler.postTask(() => 'This should be line 1', {priority: 'user-blocking'});\r\n\r\n// https://github.com/WICG/main-thread-scheduling/blob/master/sample-code/controlling-scheduled-tasks.html\r\n// a taskController is also an AbortController which we are considering\r\nconst controller = new TaskController('background');\r\nlet result = scheduler.postTask(() => {}, {signal: controller.signal});\r\n// control priority later\r\nheaderController.setPriority('user-blocking');\r\n```\r\n\r\nI opened an [issue](https://github.com/WICG/main-thread-scheduling/issues/17) for Node.js use cases there. Copying it here:\r\n\r\nI've been thinking of exploring adopting this API or experimenting with it in Node.js with the use case I've been thinking about is similar main thread contention. I have a server that serves a large number of users. That server needs to manage QoS of various levels of requests. Some requests should be very fast while for other requests I really wouldn't mind the users to wait a few milliseconds.\r\n\r\nFor example if I have a request that hashes an image and stores it for later retrieval - it might be OK for that request to wait until the CPU is idle. Work that takes more than a few milliseconds typically gets put in a (persistent) queue on servers but there is certain work I probably wouldn't mind waiting for.\r\n\r\nThe same goes for CLI tools, webpack might be interested in performing certain kinds of analysis in a lower priority than actually outputting the compiled code. TypeScript might \"emit\" before it's done type-checking to give users a snappier experience etc.\r\n\r\nThe main issue I see here is that Node.js already exposes threads and processes (with worker_threads and child_process) - so users already have access to the operating system scheduler. That said, it would be cool if some code could be made universal and shared here.\r\n\r\n-----\r\n\r\ncc @shaseley, @sebmarkbage and @acdlite from the `postTask` side and @addaleax @bridgear @nodejs/workers @nodejs/open-standards from the Node side.\r\n\r\n----\r\n\r\nIs this interesting or relevant at all for Node.js and if so should we eventually strive to adopt it?"},{"labels":["build","feature request","good first issue","help wanted"],"text":"```console\r\n$ pwn checksec ./node/node-v12.16.3-linux-x64/bin/node\r\n[*] '/home/pdxjohnny/Downloads/node/node-v12.16.3-linux-x64/bin/node'\r\n    Arch:     amd64-64-little\r\n    RELRO:    Full RELRO\r\n    Stack:    Canary found\r\n    NX:       NX enabled\r\n    PIE:      No PIE (0x400000)  # <---- ASLR disabled\r\n```\r\n\r\nI see there was some discussion on this back in 2016, but I couldn't really follow, it also looks like `-pie` still exists in some of the build files. Just wanted to report in case it's off by mistake."},{"labels":["dgram","feature request"],"text":"**Is your feature request related to a problem? Please describe.**\r\n`dgram.Socket` requires the socket type (`udp4` or `udp6`) to be provided in its constructor (`dgram.createSocket`), and uses this socket type regardless of the local and remote addresses.\r\n\r\n`net.Socket` does not require the socket type to be provided in advance, and performs `dns.lookup()` with the `family` parameter given in `net.Socket#connect()` to determine the socket type. Unlike `dgram.Socket`, it performs socket binding when a connection is requested, so the local address/port can also be provided as parameters if needed, but the socket type is still determined by the remote host (which makes sense as `net.Server` deals with bound but unconnected sockets). \r\n\r\n`net.Server` uses an IPv6 socket by default, unless an IPv4 address is explicitly provided in `net.Server#listen()`.\r\n\r\nThis results in inconsistent default behavior when comparing TCP and UDP, both for servers and clients. It should be possible to have the UDP socket type be determined by the provided addresses, both for servers and clients.\r\n\r\nEven if `udp6` is chosen, which would in theory work the same for both types of remote addresses, the DNS resolution is inconsistent for TCP/UDP clients. TCP resolution defaults to family type 0, while UDP would use family type 6, so the resulting IP address will be different if the nameserver normally resolves to IPv4 first.\r\n\r\nSee [lib/internal/dgram.js#newHandle](https://github.com/nodejs/node/blob/94e5b5c77dade0d8f7358c66144b75c369679cab/lib/internal/dgram.js#L26), [lib/net.js#internalConnect](https://github.com/nodejs/node/blob/94e5b5c77dade0d8f7358c66144b75c369679cab/lib/net.js#L844) and [lib/net.js#createServerHandle](https://github.com/nodejs/node/blob/94e5b5c77dade0d8f7358c66144b75c369679cab/lib/net.js#L1189).\r\n\r\n**Describe the solution you'd like**\r\n- `dgram.Socket` should not require a socket type in its constructor.\r\n- `dgram.Socket#bind()` should match the `net.Server#listen()` behavior and use an IPv6 socket by default, unless and IPv4 address is explicitly provided.\r\n- `dgram.Socket#connect()` should match the `net.Socket#connect()` behavior and resolve the remote address to determine the socket type, crucially before the `bind()` call is made.\r\n- If the socket is already bound when `connect()` is called, the functionality should remain as it is currently, where the `dns.lookup()` call is made with the family parameter set. If only IPv6 is resolved on an IPv4 bound socket, an error is thrown.\r\n- The socket type currently provided in the constructor could set an internal default address for cases when no local or remote addresses are provided to `bind()` and `connect()`, until this method is deprecated, after which the default address would become ::1 in both cases.\r\n\r\n**Describe alternatives you've considered**\r\n- `dns.lookup()` can be performed manually before the socket is created to decide `udp4`/`udp6`, but this greatly complicates the socket creation flow. This could be moved to `dgram.createConnection` or similar, but this wouldn't fully solve the TCP/UDP client inconsistency.\r\n- If using IPv6 by default is acceptable, the `lookup` parameter of `dgram.createSocket` can be set to a wrapper around the default `dns.lookup()`, with the family type set to 0 instead of 6 and if the result is IPv4 it can be manually mapped to IPv6. This again complicates the socket creation flow.\r\n- The previous alternative could be simplified if `family` and `hints` could be provided as is possible in `net.Socket#connect()`, but this doesn't solve the core problem."},{"labels":["feature request","repl"],"text":"**Is your feature request related to a problem? Please describe.**\r\nI'd like to be able to use node's `isRecoverableError` function when working with REPL. Since we are adding additional eval (as recommended in #29719), we are not able to take advantage of the built in one and have to write our own where as the functionality we want is exactly the same as node's native functionality for this function.\r\n\r\n**Describe the solution you'd like**\r\n```js\r\nconst repl, { REPLServer } = require('repl')\r\n\r\nconst r = repl.start({\r\n  prompt: `$ mongosh > `,\r\n  ignoreUndefined: true\r\n});\r\n\r\nconst originalEval = util.promisify(r.eval);\r\n\r\nconst customEval = async(input, context, filename, callback) => {\r\n  let result;\r\n  let err = null;\r\n  try {\r\n    result = await ShellEvaluator.customEval(originalEval, input, context, filename);\r\n  } catch (e) {\r\n    if (repl.isRecoverableError(e, input)) { // use isRecoverableError from node\r\n      return callback(new repl.Recoverable(e))\r\n    } else {\r\n      err = e\r\n    }\r\n  }\r\n  callback(err, result)\r\n};\r\n\r\nr.eval = customEval;\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nI currently just took out `isRecoverableError` and published it as [standalone](github.com/mongodb-js/is-recoverable-error) to get the same functionality. Ideally would be good to deprecate it and use exactly what's in node. "},{"labels":["ES Modules","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nI am interested in having my scripts respond to arguments supplied by the calling file, rather than for the application as a whole (i.e., checking the likes of `new URL(import.meta.url).searchParams.get('someParam')` rather than `process.argv`).\r\n\r\nThis works well when a file imports another. In polyglot files too, it works to get the query string and hash in the browser (Chrome or Firefox at least) no matter whether the import originates in HTML or in JavaScript.\r\n\r\nBut I get a `MODULE_NOT_FOUND` error when trying the likes of:\r\n\r\n```shell\r\nnode --experimental-modules  index.mjs?someParam=1\r\n```\r\n\r\n...apparently as it is looking for a file here rather than a (portion of) a URL.\r\n\r\n**Describe the solution you'd like**\r\n\r\nAllow the supplied file to be treated as a URL at least as far as the query string and any hash.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nIt duplicates effort to add special `process.argv` handling (and it could interfere if the same file is used in an application which has a different root file yet checks `process.argv` as well as `import.meta.url`).\r\n\r\nThanks!"},{"labels":["feature request"],"text":"Currently, response.setHeader() doesn't return anything. It really should simply return the response to allow chainings like `response.setHeader(xxx).send(yyy)`"},{"labels":["feature request","fs"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nCurrently, when you do `fs.watchFile(...)` the process will run forever.\r\n\r\n**Describe the solution you'd like**\r\n\r\nA possibility to `watcher.unref()` would be great.\r\n\r\n**Describe alternatives you've considered**\r\n\r\n```js\r\nconst watchFile = (path, callback, onError) => {\r\n\tlet previousTime = null;\r\n\r\n\tconst interval = setInterval(async () => {\r\n\t\ttry {\r\n\t\t\tconst {mtimeMs} = await stat(path);\r\n\r\n\t\t\tif (previousTime !== null && mtimeMs !== previousTime) {\r\n\t\t\t\tcallback(mtimeMs, previousTime);\r\n\t\t\t}\r\n\r\n\t\t\tpreviousTime = mtimeMs;\r\n\t\t} catch (error) {\r\n\t\t\tclearInterval(interval);\r\n\r\n\t\t\t// The error part is off the Node.js API\r\n\t\t\tonError(error);\r\n\t\t}\r\n\t}, 1000 * 60).unref();\r\n};\r\n```\r\n\r\nEdit: [seems like the code above is completely unnecessary :man_facepalming:](https://github.com/nodejs/node/issues/33096#issuecomment-620565757)"},{"labels":["dns","feature request"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nYou cannot cancel pending DNS queries using `dns.promises.Resolver`. Note that `dns.Resolver` has a `.cancel()` method, but the async version does not.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nThere are no alternatives yet.\r\n"},{"labels":["console","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThe [indentation width used by `console.group`](https://github.com/nodejs/node/blob/05aa67a/lib/internal/console/constructor.js#L406) is too small for me.\r\n\r\n**Describe the solution you'd like**\r\nCustomizable indentation width. Perhaps with a Node flag or env variable as we probably won't want to modify the `console.group` API.\r\n\r\n---\r\n\r\nAs a hacky workaround, I'm currently overwriting `console.group`:\r\n```\r\nconst kGroupIndent = Object.getOwnPropertySymbols(console).find(s => s.description === 'kGroupIndent');\r\nconst increaseIndentBy = '  ';\r\nconst { group, groupEnd } = console;\r\nconsole.group = function () {\r\n\tgroup.apply(this, arguments);\r\n\tthis[kGroupIndent] += increaseIndentBy;\r\n};\r\nconsole.groupEnd = function () {\r\n\tgroupEnd.apply(this, arguments);\r\n\tthis[kGroupIndent] = this[kGroupIndent].slice(0, this[kGroupIndent].length - increaseIndentBy.length);\r\n};\r\n```"},{"labels":["ES Modules","V8 Engine","experimental","feature request","repl"],"text":"There does not appear to be a way to put the REPL in ES module context.\r\n\r\nThe closest you'll get to it seems to be by running:\r\n\r\n1. `node --experimental-repl-await`\r\n2. `await import('./foo.mjs')`\r\n\r\nGive it a try and you'll see that evaluating `import.meta` throws this error:\r\n\r\n```console\r\nimport.meta\r\n       ^^^^\r\n\r\nUncaught SyntaxError: Cannot use 'import.meta' outside a module\r\n```\r\n\r\nI'd like this issue to discuss whether or not this limitation is presently documented somewhere or should be illuminated in https://nodejs.org/api/esm.html or elsewhere.\r\n\r\nNote: this issue isn't about executing code with `--eval` using the `--input-type=module` flag."},{"labels":["feature request","macos","repl"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nWhen I'm using the Node.js REPL, I often run the last command with a few modifications. The REPL already supports `Alt`/`Option`/`⌥` + arrow keys for jumping back and forth across words, but to replace a long identifier or string, I have to hold the `Delete` key for a few seconds.\r\n\r\nIt would be great if `Option`+`Delete` deleted the previous word (to the same point that `Option`+`Left Arrow Key` jumps). Currently, only the last character is deleted.\r\n\r\n**Describe the solution you'd like**\r\nIn the REPL on macOS, holding `Option` and pressing the `Delete` key should delete the word.\r\n\r\n**Describe alternatives you've considered**\r\nIf the Node.js REPL supported \"hold shift to select\", I would expect to be able to select the text to be deleted with `Shift`+`Option`+`Arrow Key`. Though, since the `Shift` key currently doesn't cause any selection, I imagine that's a more complicated feature request than adding support for just the `Option`+`Delete` key combination. "},{"labels":["feature request","http","stream"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nhttp.get allows you to set highwatermark values as of node 13.x. Both IncomingMessage and OutgoingMessage supports setting hwm values in config, those settings are also applied to socket. why can't we do the same for http.createServer\r\nnodejs/node#30135\r\n\r\n**Describe the solution you'd like**\r\nset highwatermark and enable objectMode for response (writable). \r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\n"},{"labels":["feature request","promises","util"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nIf I have a callback function that doesn't return `err` as the first argument in the callback function, then I have to write my own function to wrap that callback function into a promise. I think this customizability should be present in the `promisify` to handle these cases. It won't break the existing flow as default behavior can be of using the first argument as `error` value for rejection.\r\n\r\n**Describe the solution you'd like**\r\n\r\nTaking an optional argument in `promisify` to enable the use of other than the first argument for error callback (which in turn is used for promise rejection). Something on the lines of this\r\n```javascript\r\n        if (values.length < index)\r\n          index = 0;\r\n        const errValue = values[index];\r\n        if (errValue) {\r\n          return reject(errValue);\r\n        }\r\n        if (argumentNames !== undefined && values.length > 1) {\r\n          const obj = {};\r\n          for (let i = 0; i < argumentNames.length; i++)\r\n            if (i != index)\r\n              obj[argumentNames[i]] = values[i];\r\n          resolve(obj);\r\n```\r\n\r\n**Describe alternatives you've considered**\r\n\r\nOne can write the same logic which is written in the internal method but it is just duplication of logic and can be put into a central place so that `util.promisify` can be leveraged in custom scenarios as well."},{"labels":["console","feature request","wontfix"],"text":"During development, I often add another method to the console object which I find very useful and I think that it would be a nice feature to have available natively.\r\n\r\n`console.deep = obj => console.dir(obj, {depth: null, colors: true});`"},{"labels":["feature request","libuv","worker"],"text":"**Is your feature request related to a problem? Please describe.**\r\n1. Having the ability to easily name threads would improve/simplify looking at the resource usage while monitoring/debugging in htop (with \"Show custom thread names\") enabled.\r\n2. Commonly used process exporter https://github.com/ncabatoff/process-exporter could expose thread names for prometheus and other monitoring tools in human readable format\r\n\r\n**Describe the solution you'd like**\r\n- accept name or customName in the options object in `new Worker` constructor\r\n- add .setName(<string>) or .setCustomName(<string>) to the worker class\r\n- the above format should be fully backwards compatible\r\n\r\n**Describe alternatives you've considered**\r\nHaven't considered any alternatives at the moment.\r\nI am not sure if process.execArgv can be leveraged here to set a thread name as an alternative way of setting it."},{"labels":["crypto","feature request","openssl"],"text":"**Is your feature request related to a problem? Please describe.**\r\nI can't use poly1305 separately from chacha20-poly1305. Some algorithms (e.g. chacha20-poly1305 in OpenSSH) require the operations to be separate due to limitations/restrictions of chacha20-poly1305 as defined in RFC 7539.\r\n\r\n**Describe the solution you'd like**\r\nTo be able to use poly1305 as efficiently as possible, whether it's via `crypto.createHmac()` or `crypto.sign()` or something else.\r\n\r\n**Describe alternatives you've considered**\r\nUnfortunately there are none, except doing poly1305 in pure javascript, which I assume is going to be pretty slow in comparison.\r\n"},{"labels":["feature request","http2"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nIn http(s)1, user can limit `server.maxHeadersCount` for server, to avoid malicious request (like hash collision attack), because normal headers wont be more than 20 in fact.\r\n\r\nBut in http(s)2, user has no chance to prevent parse that, even if user check `request.rawHeaders.length/2>2000 && response.writeHead(400)`, the `request.headers` already been parsed.\r\n\r\n**Describe the solution you'd like**\r\n\r\nAdd `server.maxHeadersCount`, just like http(s)1 did.\r\n\r\n**Describe alternatives you've considered**\r\n"},{"labels":["ES Modules","feature request"],"text":"It would be nice if ECMAScript shebang files with no extension\r\na. worked :)\r\nb. were assumed to be modules for Node.js current+\r\n\r\nEspecially for server people that have lots of command-line scripts\r\n\r\nAnd I think we should plan for a future without require\r\n\r\nexhibit:\r\n<pre><strong>\r\nnode --print '\"#!/usr/bin/env node\\n// node --experimental-modules e\\nimport {inspect} from QutilQ\\nconsole.log(`${inspect(QabcQ)}`)\".replace(/Q/g, String.fromCharCode(39))' >e && chmod +x e\r\n./e</strong>\r\n(node:38910) Warning: To load an ES module, set \"type\": \"module\" in the package.json or use the .mjs extension.\r\n/opt/foxyboy/sw/pri/subtree/ecmascript2049/packages/e:3\r\nimport {inspect} from 'util'\r\n^^^^^^\r\n\r\nSyntaxError: Cannot use import statement outside a module\r\n    at wrapSafe (internal/modules/cjs/loader.js:1063:16)\r\n    at Module._compile (internal/modules/cjs/loader.js:1111:27)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1167:10)\r\n    at Module.load (internal/modules/cjs/loader.js:996:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:896:14)\r\n    at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:71:12)\r\n    at internal/main/run_main_module.js:17:47\r\n<strong>$ cat e</strong>\r\n#!/usr/bin/env node\r\n// node --experimental-modules e\r\nimport {inspect} from 'util'\r\nconsole.log(`${inspect('abc')}`)\r\n</pre>\r\n\r\nThis shebang no work either:\r\n#!/usr/local/bin/node --experimental-modules\r\n\r\nThe solutions at present is to:\r\n1. use .mjs extension\r\n2. symlink to a file that has .mjs extension. Not portable, I suppose, on certain file systems from up north and Applish implementations of WebDAV\r\n3. have a package.json in the same or superior directory. May cause unforeseen troubles\r\n4. symlink to a directory with a package.json. Possibly not portable\r\n\r\n**node -v && uname -a**\r\nv13.11.0\r\nDarwin c87m1.local 19.3.0 Darwin Kernel Version 19.3.0: Thu Jan  9 20:58:23 PST 2020; root:xnu-6153.81.5~1/RELEASE_X86_64 x86_64\r\n\r\nA related trouble is if you happen to have a native-code dependency. requires node_modules and such"},{"labels":["ES Modules","cli","feature request"],"text":"When Dennis Ritchie came up with the shebang in 1979, he did not consider Node.js v12.0.0\r\n\r\nSo on the shebang line **#!/usr/bin/env node** you cannot provide arguments\r\n\r\nIf you do a different shebang line, it is no longer portable to macOS or Android\r\n\r\nTherefore, adding type:module to package.json should enable every reasonable experimental module feature, in particular **experimental-json-modules** if it doesn't break us, it will make us stronger\r\n\r\nPeople who do not want this behavior should use an intermediate script or custom command-line like json importers have to do now\r\n\r\nnode -v && uname -a\r\nv13.11.0\r\nDarwin c87m1.local 19.3.0 Darwin Kernel Version 19.3.0: Thu Jan  9 20:58:23 PST 2020; root:xnu-6153.81.5~1/RELEASE_X86_64 x86_64"},{"labels":["feature request","util"],"text":"When logging object, functions and classes you sometimes see function and classes being printed the same way as such:\r\n\r\n![Skärmavbild 2020-03-14 kl  21 28 43](https://user-images.githubusercontent.com/1148376/76689886-d5d71380-663a-11ea-96f2-7a0029a6f72b.png)\r\n\r\nI wish they where a bit more distinguish if it is a function or a class so you know if you have to call the <s>\"function\"</s> class with the `new` keyword and expect something back\r\nkinda like chrome's devtool:\r\n\r\n![Skärmavbild 2020-03-14 kl  21 32 30](https://user-images.githubusercontent.com/1148376/76689940-74fc0b00-663b-11ea-8188-41408d8aa765.png)\r\n\r\nwith the prefixed `class` and `f` in the beginning\r\n\r\nmaybe with an other color (same as the number color - orange) or like my atom editor:\r\n![Skärmavbild 2020-03-14 kl  21 38 41](https://user-images.githubusercontent.com/1148376/76689997-3e72c000-663c-11ea-8f09-62031f31b067.png)\r\n\r\nit's not so much about styling, (the above are just some suggestions) \r\nthe request feature is just more about distinguish  classes from functions in the terminal\r\n\r\n(don't mind as much if this is being discarded and closed since it's not so important to me - just wishful)"},{"labels":["feature request","good first issue","mentor-available","worker"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nBased on the current documentation listed [here](https://nodejs.org/api/worker_threads.html#worker_threads_new_worker_filename_options), it doesn't seem possible to specify a `transferList` on the Worker constructor. This prohibits passing `transferList` items such as `MessagePort`. Attempts to pass a `MessagePort` within the Workers `workerData` currently results in the following error.\r\n```\r\nTypeError: MessagePort was found in message but not listed in transferList\r\n```\r\n**Describe the solution you'd like**\r\n\r\nGiven the current error, and if its technically feasible to do so...being able to supply a `transferList` on the `Worker` constructor would be helpful in initializing the Worker immediately with a `MessagePort` rather than sending the `MessagePort` on a subsequent `postMessage(...)`. Perhaps something like the following could be allowed.\r\n\r\n```javascript\r\nconst channel = new MessageChannel()\r\nconst workerData = { port: channel.port1 }\r\nconst transferList = [channel.port1]\r\nconst worker = new Worker('./worker.js', { workerData, transferList  })\r\n```\r\n\r\n\r\n**Describe alternatives you've considered**\r\n\r\nIt is entirely possible to work around this by sending a `MessagePort` in a subsequent `postMessage(..., transferList)`. However it doing so involves async initialization of the `Worker` which is less desirable than initializing immediately on the `Worker` constructor.\r\n"},{"labels":["child_process","feature request"],"text":"I'd like to have a feature in node to access the raw exit status of the program, for a better emscripten system() implementation. Right now emscripten's system implementation is repacking the exit code to return it in the \"waitpid\" format as required by POSIX. However, this only POSIX specific and doesn't make much sense e.g. on Windows, but we also don't want to return values that doesn't match when compiling and running the C program natively since it could cause incompatibility. Thus having access to raw exit code of a child program from node would be best approach to go here!\r\n\r\nSee the emscripten system implementation and related node / libuv discussion here:\r\nhttps://github.com/emscripten-core/emscripten/pull/10547"},{"labels":["async_hooks","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nPlease describe the problem you are trying to solve.\r\n\r\nRight now, the `AsyncLocalStorage` object needs to be externally available for the async functions to avail the store.\r\n\r\n**Describe the solution you'd like**\r\nPlease describe the desired behavior.\r\n\r\nImplement a `getContextCLS` API that returns the `AsyncLocalStorage` object under which this asynchronous call was initiated. Return undefined, if it was not run under `AsyncLocalStorage` semantics.\r\n\r\nIllustration:\r\n\r\n```js\r\nconst { AsyncLocalStorage } = require('async_hooks');\r\n\r\nfunction main() {\r\n  const cls1 = new AsyncLocalStorage();\r\n  const cls2 = new AsyncLocalStorage();\r\n  cls1.run(() => {\r\n    const store = cls1.getStore()\r\n    store.set('x', 'y')\r\n    setTimeout(foo, 1000)\r\n  })\r\n  \r\n  cls2.run(() => {\r\n    const store = cls2.getStore()\r\n    store.set('x', 'z')\r\n    setTimeout(foo, 1000)\r\n  })\r\n}\r\n\r\n\r\nfunction foo() {\r\n  // obtain the cls object here that this async call was part of\r\n  // for example:\r\n  // const cls = getContextCLS()\r\n  //  const store = cls.getStore()\r\n  //  console.log(store.get('x')\r\n  // prints 'y' and 'z' as and when those are called.\r\n}\r\n\r\nmain()\r\n```\r\nUse case: in a concurrent workload scenario, it is not easy to maintain `AsyncLocalStorage` objects globally, and across multiple async function families.\r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\n\r\nAlternative is to share these objects globally (which is not very attractive)"},{"labels":["feature request"],"text":"## Is your feature request related to a problem? Please describe.\r\n\r\nWhile js became more and more popular, typescript and flow appears to deal with  stability and maintainability for large projects, yet we lack support for type definitions for Node.js core api. I think the needs goes strong and strong, one proof is that https://www.npmjs.com/package/@types/node has reached 23 million download weekly.\r\n\r\nCommunity already has `@type/node`, should we really support it in core ?\r\nI think we should, here are the reasons:\r\n\r\n### It's not reflect the api change quickly enough\r\nFor example, the `wasi` api takes some time added to the repo.\r\nApis like newly or changed takes time to get adopted, developers will has\r\nto wait for this.\r\n\r\n### It's not related to Node.js version consistently\r\nthis package doesn't related Node.js versions. But we has lts, latest and other versions, this can be problematic and got surprised behavior. If we have \r\nofficial support, developers can choose the related version and got precise result.\r\n\r\n### other\r\nIt's only for typescript. We can expand our official type system to flow or other newly solutions.\r\nAlso contribute to this package is too much pain.\r\n\r\n## Describe the solution you'd like\r\n\r\nI am thinking we generate types file from our markdown doc or js source file (the `libs` folder ), not sure whether this eventually can work. Another solution is we invent a new dsl :)\r\n\r\nEventually we should make should publish types package when we release a new Node.js version.\r\n\r\n\r\n\r\n"},{"labels":["feature request","stream"],"text":"* **Version**: v13.6.0\r\n* **Platform**: Linux 535297d0ce81 4.19.0-4-amd64 #1 SMP Debian 4.19.28-2 (2019-03-15) x86_64 GNU/Linux\r\n* **Subsystem**: stream\r\n\r\n### What steps will reproduce the bug?\r\n\r\n    const stream = require('stream');\r\n    \r\n    // two different transforms (these work)\r\n    const transform_double = new stream.Transform({\r\n        transform(chunk, encoding, callback) {\r\n            this.push(chunk);\r\n            this.push(chunk);\r\n            callback();\r\n        }\r\n    });\r\n    const transform_uppercase = new stream.Transform({\r\n        transform(chunk, encoding, callback) {\r\n            this.push(chunk.toString().toUpperCase());\r\n            callback();\r\n        }\r\n    });\r\n    \r\n    // compose the transforms\r\n    const parser = stream.pipeline(transform_double, transform_uppercase, ()=>0);\r\n    \r\n    // run stdin through it\r\n    process.stdin.pipe(parser).pipe(process.stdout);\r\n\r\nThen pipe some text to it eg: `echo \"foo\" | node reproduce.js`\r\n\r\n### How often does it reproduce? Is there a required condition?\r\n\r\nalways\r\n\r\n### What is the expected behavior?\r\n\r\nThe text sent in should go through both transformations, eg output \"FOOFOO\"\r\n\r\n### What do you see instead?\r\n\r\nThe text piped in is only sent to the last transformation, eg output \"FOO\"\r\n\r\n### Additional information\r\n\r\nThe docs here don't say what this function returns:\r\nhttps://nodejs.org/api/stream.html#stream_stream_pipeline_streams_callback\r\n\r\nI'm saying that it should return a duplex stream so I can read and write to the ends of the pipeline."},{"labels":["feature request"],"text":"[AbortSignals](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) are used in fetch to abort a request. They are useful to close requests if they don't happen to be necessary. AbortSignals are not widely used yet in the JavaScript ecosystem but they seem like they could be useful if they would find a wider adoption.\r\n\r\nA node.js API that comes to mind is if a web framework would provide an abort signal that this could be comfortable to be used as a means to abort a file stream:\r\n\r\n```javascript\r\ncreateReadStream('file.bin', { signal: req.signal }).pipe(res)\r\n```\r\n\r\nOther places this might be if there was an abort signal for the process that could be used instead of `process.on('SIGTERM', ...)`, ex.:\r\n\r\n```javascript\r\nawait readFile('file.bin', { signal: process.abortSignal })\r\n```\r\n\r\nWhich could be an easy means to stop allocating money if a CLI tool is used to read a very large file by accident.\r\n\r\nAt the current point I am not sure at how many places this would be useful, or how useful it would be at each case, but I think opening the discussion has merit."},{"labels":["feature request","http"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\nWe are trying to ensure the maximum number of active connections from NodeJS to backend systems is maintained.  `httpAgent.maxSockets` behaves at a \"per origin\" level which is also dynamic and not completely deterministic.  This makes it difficult to create logic and patterns as the number of connections grows.  Instead we propose `absoluteMaxSockets` (or some other clever name), that enforces a maximum number of active sockets regardless of the origin.  \r\n\r\nDoing this now is possible in the user space, but requires a great deal of code and logic to bind to each and every socket connection event and do the counting and enforcement, etc.\r\n\r\n**Describe the solution you'd like**\r\nAssuming `httpAgent.absoluteMaxSockets` is implemented, if the number of open sockets across all origins grows beyond this number, the http agent would first attempt to check and see if any sockets can be closed, and if so attempt to close those sockets prior to opening a new one.\r\nAssuming one cannot be open, an exception would be thrown at the time a request is made since a new socket connection cannot be opened.\r\n\r\n**Describe alternatives you've considered**\r\nAs mentioned, we could implement this in user space, but it's tricky and cumbersome.\r\n"},{"labels":["cli","feature request","npm","wontfix"],"text":"Of course, NPM + package.json are not Node.js perse - so this feature would have to work independently of a package manager.\r\n\r\nI put the question on SO:\r\nhttps://stackoverflow.com/questions/60367401/throw-error-if-loaded-package-version-does-not-match-package-version-in-package\r\n\r\nPerhaps there could be some declarative file like package.json that told Node.js what version of a package should be loaded at runtime. The main motivation is to prevent accidentally using the wrong version of a library when running code - this happens often because `node_modules` is not in version control for most users.\r\n\r\nFor a language that's not compiled, this would help I think. The most common use case is doing:\r\n\r\n```bash\r\ngit pull\r\nnode .\r\n```\r\n\r\ninstead of doing\r\n\r\n```bash\r\ngit pull\r\nnpm i\r\nnode .\r\n```\r\n\r\nthere might be other solutions to this problem and I am interesting in discussing alternatives I guess."},{"labels":["feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI want to host my own files on my own server and import them via https including relative path support without resolving the dependency tree myself. at present I have coded a userland ESM loader using the data: URL string argument syntax with dynamic import() the dataUrl syntax already supports Node Resolve Algorithm but NOT Relative paths as the dataUrl has no knowledge where it comes from\r\n\r\nso I would need to fetch the URL to get the string representation to replace relative URLs with the right location and then load that and loop over all dependencies that are relative.\r\n\r\n**Describe the solution you'd like**\r\nImplement nativ support for relative module resolution when using import. and even better Implement the whole feature import('https://myscript') and I would love when file:// is also supported in the same fashion maybe I need to split that over many proposals what do you think?\r\n\r\ndeno at present is using parcel a JSBundler for that to fetch resources and evaluate complete dependency tree upfront execution and evaluation.\r\n\r\nso I propose to add that ability to the loader itself it should remember on call via a URL the origin location and handle relative module resolution like it would do it local \r\n\r\n**Describe alternatives you've considered**\r\nas described at the problem section I have experimented with my userland loader https://github.com/direktspeed/esm-loader and adding module resolution via rollup, for example, would solve the problem but that can be maybe better implemented inside node itself\r\n"},{"labels":["feature request","wontfix"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nWe Will Solve API Incompatiblity Related to Browser Environments \r\n\r\n**Describe the solution you'd like**\r\nImplamenting a JSDOM like environment directly into node we could introduce something as easy as a api that takes a url and that gets Rendered Into JSDOM with its own context the DOM with its whole API that also reduces the need for other browser compatible API's that would without this context make no sence.\r\n\r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\nThe Alternate at present is to run your code in chrome headless to have it isolated and behave like in the browser and later get the results.\r\n\r\nhttps://developers.google.com/web/tools/puppeteer/articles/ssr"},{"labels":["feature request","module"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nOne of Jest's longest-standing issue are about globals in tests being different from Node's, see https://github.com/facebook/jest/issues/2549.\r\n\r\nShort example illustrating the problem:\r\n\r\n```js\r\nconst {createContext, compileFunction} = require('vm');\r\n\r\nconst context = createContext({});\r\n\r\nconst code = `\r\n  const fs = require('fs');\r\n  const assert = require('assert');\r\n\r\n  try {\r\n    fs.readFileSync('/some/faulty/path', 'utf8')\r\n  } catch (error) {\r\n    assert(error instanceof Error)\r\n  }\r\n`;\r\n\r\nconst compiledFunction = compileFunction(code, ['require'], {\r\n  parsingContext: context,\r\n});\r\n\r\ncompiledFunction(require);\r\n```\r\n\r\nRun this example, and the `instanceof` test will fail. Remove `parsingContext` option, and it will pass.\r\n\r\n**Describe the solution you'd like**\r\n\r\nJest implements its own `require` etc, which works great most of the time, but in the case of node core modules, it fallbacks to requiring the module outside of the context. AFAIK the JS source of the node core modules are embedded in the binary of Node, so we cannot read them and pass them though `compileFunction`, `SourceTextModule` or some such ourselves so the globals would be the same.\r\n\r\nIt would be great if Node provided some API allowing the JS of core modules to be evaluated within a `vm.Context`.\r\n\r\n(I had originally given up on this, but seeing as #30709 solves the super old #855 I thought maybe we might be lucky enough that this is possible as well? 😀)\r\n\r\n**Describe alternatives you've considered**\r\n\r\nWe have tried to mess around with setting `Symbol.hasInstance` and just injecting globals from the outside (although that breaks the encapsulation we're aiming for by using separate `Context`s in the first place) without luck. It's also a moving target as we'd have to add that property to all globals.\r\n\r\n---\r\n\r\nFWIW the Jest issue has a $500 bounty which I'd be happy to give to someone solving this in core, or the JS Foundation if that's more correct."},{"labels":["cli","feature request","module"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nNot exactly a problem. Maybe something that will make life easier. Currently to require modules before executing a script we need to run `node` with the `-r` flag and it might become harder to maintain if we need to require multiple modules.\r\n\r\nPeople usually use this option like a \"bootstraper\" or for running setup scripts (i.e. `dotenv/config`).\r\n\r\n**Describe the solution you'd like**\r\nI'd like to have a place to specify, in order and separated by a new line, the modules needed to be required before executing scripts. Something like:\r\n\r\n```\r\ndotenv/config\r\ntsconfig-paths/register\r\n```\r\n\r\nAnd then something like that to run scripts:\r\n\r\n`node --requirements-file requirements.txt my-script.js`\r\n\r\nWe could even maybe ignore the flag altogether if the requirements file -- which has yet to be named -- exists.\r\n\r\n**Describe alternatives you've considered**\r\nI'm doing something sorta like that on [this repository](https://github.com/zaguiini/nodejs-ts-boilerplate/blob/master/package.json#L9) of mine. Take a look.\r\n"},{"labels":["V8 Engine","feature request","vm"],"text":"## Is your feature request related to a problem? Please describe.\r\n\r\nI’ve been looking into what’s needed to implement proper navigation in [**JSDOM**](https://github.com/jsdom/jsdom).\r\n\r\nThis requires replacing the underlying `[[Window]]` instance of the `WindowProxy`.\r\n\r\n## Describe the solution you'd like\r\n\r\nThe desired solution would be an API exposed on `vm.Context` (<https://github.com/nodejs/node/pull/30709>) that would perform a new `makeContext` call, replacing the underlying `#global` private field and `[[Window]]` private slot of the `WindowProxy`, while ensuring that the following test passes:\r\n\r\n<details>\r\n<summary><code>globalProxy.test.js</code></summary>\r\n<p></p>\r\n\r\n```js\r\nconst { createWindow, navigateWindow } = require(\"./windows.js\");\r\nconst symbolProp = Symbol(\"non-configurable\")\r\n\r\nconst {\r\n\tvmContext,\r\n\tglobalImpl,\r\n\tglobalObject,\r\n\tglobalProxy,\r\n} = createWindow({ url: \"http://example.org/\" });\r\n\r\nassert.strictEqual(globalProxy.origin, \"http://example.org\");\r\n\r\n// `globalProxy[symbolProp]` doesn't exist:\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalProxy, symbolProp), undefined);\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalObject, symbolProp), undefined);\r\n\r\nObject.defineProperty(globalProxy, symbolProp, { value: \"non-configurable\" });\r\n\r\n// `globalProxy[symbolProp]` is now a non-configurable own property of `globalObject`:\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalProxy, symbolProp).configurable, false);\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalObject, symbolProp).configurable, false);\r\n\r\nconst {\r\n\tnewGlobalImpl,\r\n\tnewGlobalObject,\r\n} = navigateWindow(vmContext, { url: \"https://example.org/\" });\r\nconst newGlobalProxy = vm.runInContext(\"this\", vmContext);\r\n\r\nassert.strictEqual(globalProxy, newGlobalProxy);\r\nassert.strictEqual(globalProxy.origin, \"https://example.org\");\r\nassert.notStrictEqual(globalObject, newGlobalObject);\r\nassert.notStrictEqual(globalImpl, newGlobalImpl);\r\n\r\n// `globalProxy[symbolProp]` doesn't exist anymore, as the proxy target is now `newGlobalObject`:\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalProxy, symbolProp), undefined);\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(newGlobalObject, symbolProp), undefined);\r\n\r\n// `globalObject[symbolProp]` is still the old non-configurable own property:\r\nassert.strictEqual(Object.getOwnPropertyDescriptor(globalObject, symbolProp).configurable, false);\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary><code>windows.js</code> (New API is called here)</summary>\r\n<p></p>\r\n\r\n```js\r\nfunction setupWindow(window, globalProxy, options, vmContext) {\r\n\tinstallInterfaces(window);\r\n\tObject.setPrototypeOf(window, window.Window.prototype);\r\n\tWindow.setup(\r\n\t\t/* globalObject */ window,\r\n\t\t/* wrapperInstance */ window,\r\n\t\t/* constructorArgs */ undefined,\r\n\t\t/* privateData */ { globalProxy, options, vmContext }\r\n\t);\r\n}\r\n\r\nexports.createWindow = (options = {}) => {\r\n\tlet vmContext = new vm.Context({ origin: computeOrigin(options.url) });\r\n\tlet window = context.global;\r\n\tlet globalProxy = vm.runInContext(\"this\", vmContext);\r\n\r\n\tsetupWindow(window, vmContext, globalProxy, options)\r\n\treturn {\r\n\t\tvmContext,\r\n\t\tglobalImpl: idlUtils.implForWrapper(window),\r\n\t\tglobalObject: window,\r\n\t\tglobalProxy\r\n\t}\r\n}\r\n\r\nexports.navigateWindow = (vmContext, options = {}) => {\r\n\t// New API is called here:\r\n\tvmContext.createNewGlobalObject({ origin: computeOrigin(options.url) });\r\n\r\n\tlet window = context.global;\r\n\r\n\tsetupWindow(window, vmContext, globalProxy, options);\r\n\treturn {\r\n\t\tnewGlobalImpl: idlUtils.implForWrapper(window),\r\n\t\tnewGlobalObject: window\r\n\t}\r\n}\r\n```\r\n</details>\r\n\r\n## Describe alternatives you've considered\r\n\r\n1. Just replace the `WindowImpl` instance.\r\n   <dl>\r\n   <dt>Pros:<dd>\r\n\r\n   - Simple to implement.\r\n\r\n   <dt>Cons:<dd>\r\n\r\n   - Keeps global properties from previous runs.\r\n\r\n   <dt>Conclusion:<dd>\r\n\r\n   Viable only for when `runScripts` isn't enabled, though it might be better to use option 3 even in this case.\r\n   </dl>\r\n\r\n2. Use `Reflect.deleteProperty` and `WebIDLWindow.setup` to try and reset as much of the `Window` global object as possible (won't be able to delete non‑configurable properties, such as the `symbolProp` shown in the above example).\r\n   <dl>\r\n   <dt>Pros:<dd>\r\n\r\n   - Resets most of the global object.\r\n\r\n   <dt>Cons:<dd>\r\n\r\n   - Harder to implement.\r\n   - Results in a global which is in a broken state.\r\n\r\n   <dt>Conclusion:<dd>\r\n\r\n   I’d rather implement alternative 3.\r\n   </dl>\r\n\r\n3. Implement a custom `WindowProxy` that makes all properties configurable, while keeping track of which ones should be treated as non-configurable.\r\n   <dl>\r\n   <dt>Pros:<dd>\r\n\r\n   - Supports fully re-setting the global object.\r\n\r\n   <dt>Cons:<dd>\r\n\r\n   - Hard to implement.\r\n   - Not fully spec compliant.\r\n   - `with` and Proxies are currently incompatible (<https://github.com/nodejs/node/issues/30985>), this can be worked around using `Symbol.unscopables`.\r\n\r\n   <dt>Conclusion:<dd>\r\n\r\n   I’ll probably implement this after <https://github.com/jsdom/jsdom/pull/2835> is merged for **Node** versions without <https://github.com/nodejs/node/pull/30709>.\r\n   </dl>"},{"labels":["crypto","feature request"],"text":"**Is your feature request related to a problem? Please describe.**\r\nI'm trying to generate a check sum that is based on the keying material (https://stackoverflow.com/questions/60232165/ssl-export-keying-material-in-node-js). Right now node has no method to call this function, or any other way of retrieving this information.\r\n\r\n**Describe the solution you'd like**\r\nExpose an api like the GetSharedSigalgs that offers a way to access the native SSL export keying material method.\r\nsee https://nodejs.org/api/tls.html#tls_tlssocket_getsharedsigalgs\r\nfor the keying material method see https://www.openssl.org/docs/man1.0.2/man3/SSL_export_keying_material.html\r\n\r\n**Describe alternatives you've considered**\r\nI tried to get this kind of information via 'keylog' event, but this is never emitted in my scenario. I also believe (couldn't verify though), that this is something else than the exporting keying material function offers, due to the fact that I cannot provide any label to \"keylog\" which is mandatory for the keying material method.\r\n\r\nSubsystem: tls (tls.TLSSocket)"},{"labels":["feature request","stream"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nIn debugging some Node.js stream related code, I'm getting debug logs for the readable stream, but not seeing any for the writable. Upon further investigation I found that there are no debug logs set up in writable stream. \r\n\r\nhttps://github.com/nodejs/node/blob/master/lib/_stream_writable.js\r\n\r\n**Describe the solution you'd like**\r\nAdd some nice logging to _stream_writable similar to _stream_readable."},{"labels":["feature request"],"text":"<!--\r\nThank you for reporting a possible bug in Node.js.\r\n\r\nPlease fill in as much of the template below as you can.\r\n\r\nVersion: output of `node -v`\r\nPlatform: output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\nSubsystem: if known, please specify the affected core module name\r\n\r\nIf possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **Version**: master\r\n* **Platform**: linux / all\r\n* **Subsystem**: process\r\n\r\n<!-- Please provide more details below this comment. -->\r\n\r\nThis is opened for 3 reasons:\r\n - help progress #23277\r\n - gather intelligence on internal memory management where I may have lack of clarity\r\n - help clearly define process's memory usage - for future support and documentation (specifically for cloud workloads where usage has bearings on billing)\r\n\r\n$ cat foo.cc\r\n```c\r\n#include <stdlib.h>\r\n#include <unistd.h>\r\n#include <stdio.h>\r\n#include <malloc.h>\r\n\r\nvoid *list[1024 * 1024];\r\n\r\nint r() {\r\n  // add a one so as to never return 0\r\n  return 1 + random() % 137;\r\n}\r\n\r\nint main() {\r\n  // use calloc so that the pages are 'touched'.\r\n  for(int i=0;i< 1024 * 1024;i++)\r\n    list[i] = calloc(r(), 1);\r\n  for(int i=0;i< 1024 * 1024;i++)\r\n    free(list[i]);\r\n  sleep(60 * 1000);\r\n}\r\n```\r\n\r\nA linux (RHEL 8) observation:\r\nThe static memory usage (without the callocs) of this code is 12 MB\r\n - 8 MB for the array (64-bit, so 8 * 1MB)\r\n - 4 MB for a.out + libc + ...\r\n\r\ntop output after the program runs and sleeps for enough time:\r\n```\r\n$ top -p 6777\r\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                            \r\n 6777 root      20   0   99772  96344    932 S   0.0   5.1   0:00.16 a.out \r\n\r\n$ cat /proc/meminfo | grep MemFree\r\nMemFree:         1637932 kB\r\n$\r\n```\r\n\r\ntop output after the system is heavily `loaded`:\r\n```\r\ntop -p 6777\r\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                            \r\n 6777 root      20   0   99772      0      0 S   0.0   0.0   0:00.16 a.out \r\n$ cat /proc/meminfo | grep MemFree\r\nMemFree:           70444 kB\r\n```\r\n\r\n`pmap` shows 85 MB is still mapped into the process, matching with `top`.\r\n\r\n```\r\n0000000002c7c000  87384K rw---   [ anon ]\r\n```\r\n\r\nObservations:\r\n - `rss` stays high (~ virtual memory) for ever, if there is no load in the system\r\n - virtual memory stays high even after all the allocated memory is freed.\r\n - all numbers tally: 85 for the dynamic memory + 12 for the static part = 97, as shown in top\r\n\r\n\r\nProblems / questions:\r\n - what is a meaningful measure of program's memory usage? we can say these are the values we get from the OS, and leave it for the user to interpret those, but that does not help them enough. `rss` is a function of not only on the program's activity with memory, but also to other parts of the system. `virtual memory` on the other hand was apparently the sum of allocations (malloc/calloc/mmap...) in the program, but looks like it is not, and depends on the glibc's memory management implementations and its discretion as to when to retain and when to release chunks back to OS, and as to what size of chunks qualify for removal, and may be also depend on the memory usage hueristics as well! When I used 4K chunks for calloc/free, I got different results.\r\n\r\nIn Cloud workloads this has implications. A user would want to minimize memory tagged against their process and would do everything in their application to achieve that, but due the dependency on the system load and allocation caching behavior, this would not translate well?\r\n\r\n - memory leak definition becomes loose and detection becomes less comprehensive. Plurality of tools profiling the app from different angles would bring-in mutually contradicting results? For example: in a batch process, a code that genuinely leaks an MB versus an MB that is cached in malloc arenas - what is the difference from outside, and why should I worry more about the former and not worry about the later?\r\n\r\n - I read about wss (working set size) - that is a true measure of how much memory the program is actively engaged in. The idea looks like tracking paging-in; as that would be a true reflection of the program's needs. I don't find an API for this, nor a platform-neutral way to obtain this. Even if we could, this has an issue - the value is transient, as it depends on the history of usage, not the current state?"},{"labels":["feature request","test","windows"],"text":"Just leaving this here as it's not something I can get to just yet but I will be looking at it. Currently when running an individual test case on Windows (e.g. `Release\\node test\\parallel\\test-whatever`, if Node.js crashes during the run it just aborts with no obvious indicator of the crash. This is typical on Windows, unfortunately, when not using a debug build. Since we're wrapping the test process anyway when there are `Flags:` in the test file, it would make sense to also check the exit code of the child process on Windows to report if the process exited due to a fault."},{"labels":["feature request","tls"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nPlease describe the problem you are trying to solve.\r\n\r\n**Describe the solution you'd like**\r\nPlease describe the desired behavior.\r\nTLS 1.3 ESNI, is there any plan to implement the esni in near future? \r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\n"},{"labels":["feature request"],"text":"Hey, I think clone variable is very common, I think there should be syntax for creating another pointer easier"},{"labels":["ES Modules","feature request","help wanted"],"text":"If you attempt to `require('package-name')` using v13.7.0 in the repl it will fail with a 'MODULE_NOT_FOUND' error.\r\n\r\n```js\r\n// index.js\r\nconsole.log('yay')\r\n// package.json\r\n{\r\n  \"name\": \"ohno\",\r\n  \"main\": \"./index.js\"\r\n}\r\n```\r\n```bash\r\n$ node\r\n> require('ohno')\r\n```\r\n> Uncaught Error: Cannot find module 'ohno'\r\n> Require stack:\r\n> - <repl>\r\n>     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:980:15)\r\n>     at Function.Module._load (internal/modules/cjs/loader.js:862:27)\r\n>     at Module.require (internal/modules/cjs/loader.js:1040:19)\r\n>     at require (internal/modules/cjs/helpers.js:72:18) {\r\n>   code: 'MODULE_NOT_FOUND',\r\n>   requireStack: [ '<repl>' ]\r\n> }\r\n\r\n```bash\r\n$ node -r ./index.js\r\nyay\r\n```\r\n```bash\r\n$ node -r ohno\r\n```\r\n> internal/modules/cjs/loader.js:983\r\n>   throw err;\r\n>   ^\r\n> \r\n> Error: Cannot find module 'ohno'\r\n> Require stack:\r\n> - internal/preload\r\n>     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:980:15)\r\n>     at Function.Module._load (internal/modules/cjs/loader.js:862:27)\r\n>     at Module.require (internal/modules/cjs/loader.js:1040:19)\r\n>     at Module._preloadModules (internal/modules/cjs/loader.js:1296:12)\r\n>     at loadPreloadModules (internal/bootstrap/pre_execution.js:435:5)\r\n>     at prepareMainThreadExecution (internal/bootstrap/pre_execution.js:68:3)\r\n>     at internal/main/repl.js:18:1 {\r\n>   code: 'MODULE_NOT_FOUND',\r\n>   requireStack: [ 'internal/preload' ]\r\n> }"},{"labels":["feature request","stream"],"text":"\r\nThere could be a convenience (async) function <code>readableStream.readLine()</code> to read a line of text from a readableStream. If it isn't immediately available, it waits until it is. Ofc., you can already do such things today using the existing APIs (and adding your own code to that), though I do think it wouldn't hurt offering such a convenience function.\r\n\r\nAlso, I'm aware of the <code>require('readline')</code> module. However, it's got its disadvantages as you risk draining too much of your original readableStream. (readline's internal lookahead). Consider you might need an easy & quick way of reading a line of text, and want to mix readableStream.readLine() with other calls that read binary data from the stream.\r\n\r\n"},{"labels":["feature request","util"],"text":"**Is your feature request related to a problem? Please describe.**\r\nReliably detecting the actual intrinsic type of an object, e.g. for serialisation of arbitrary JS datastructures. (It is especially important to be able to reliably detect types which cannot be successfully serialised.)\r\n\r\n**Describe the solution you'd like**\r\nAdd `util.types.isArray` and `util.types.isFunction`, analogous to the existing `util.types` predicates, and a `util.types.isPlainObject` which returns `true` iff its argument is an Object which is not any other type—i.e., was created by `{}`, `new Object()`, `Object.create()`, or one of the other builtin functions which creates an object via [the ObjectCreate specification method](https://tc39.es/ecma262/#sec-objectcreate) called with an empty *internalSlotsList*.\r\n\r\n**Describe alternatives you've considered**\r\n`Object.prototype.toString` returns the desired information in most cases, but can be spoofed by setting `value[Symbol.toStringTag]`, and does not detect proxies.\r\n\r\nPresumably `.isArray` was originally omitted from `util.types` because `Array.isArray` exists, but note that `Array.isArray(new Proxy([], {}))` returns true, while (e.g.) `util.types.isMap(new Proxy(new Map(), {}))` returns false.  A reasonable approximation can be polylfilled:\r\n\r\n```JS\r\nutils.types.isArray = function isArray(value) {\r\n  return Array.isArray(value) && !util.types.isProxy(value);\r\n}\r\n```\r\n\r\n…but it would seem more elegant and reliable (not to mention consistent) to have a dedicated predicate on `util.types`.\r\n\r\nSimilarly, `.isFunction` can be approximated with `typeof(value) === 'function' && !util.types.isProxy(value)`, but again this is inelegant.\r\n\r\nFinally, detecting plain objects reliably appears to be very difficult at present; at best you can check to make sure that `typeof value === 'object' && value !== null` and then ensure that `utils.typeof[X](vaue)` returns false for all `X`.\r\n\r\n**Additional note**\r\nIt could be useful to have finer-grained detection of function types, e.g. `isAnyFunction`, `isNativeFunction`, `isPlainFunction` (or `isNonNativeFunction`), `isCallableFunction`, `isConstructibleFunction` etc.—though these are arguably of less utility because, with the exception of (non-native) functions defined in the global scope, it's not generally possible to reliably recreate a function object.\r\n"},{"labels":["feature request","libuv","linux"],"text":"* **Version**: all\r\n* **Platform**: Unix\r\n* **Subsystem**: -\r\n\r\nThe free commands says actually that I have 1832 MBs available, which is the free amount + some part of the buff/cache that can be cleared directly when needed.\r\n\r\nThe free column should be small, since this is memory which is not used is simply wasted. Available memory is the amount of memory which is available for allocation to a new process or to existing processes.\r\n \r\n```\r\n$ free -m\r\n              total        used        free      shared  buff/cache   available\r\nMem:           7971        5907         149         135        1914        1832\r\nSwap:          9541        2122        7419\r\n```\r\n\r\nKnowing all this, the NodeJs OS API (`var os = require('os')`) only provides `os.freemem` and `os.totalmem`. The free memory NodeJS API call indeed shows the same value as what the free command gives me. But the OS API does **NOT** have any call like: `os.availablemem` or something simular.\r\n\r\n**Bottom-line:** I'm missing the *available* memory call in NodeJS. Which is often way more useful.\r\n\r\nFor info: \r\n\r\n* [Free memory unix C implementation in Node](https://github.com/nodejs/node/blob/master/deps/uv/src/unix/sysinfo-memory.c#L32)\r\n\r\nRegards,\r\nMelroy van den Berg\r\n"},{"labels":["feature request","vm","wontfix"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThere is no way to know if the script running in vm is fully executed or not. Of course, all synchronous tasks are immediately executed when `runInContext` is called. But since [all contexts share the event loop](https://github.com/nodejs/node/issues/3020#issuecomment-144117993), we cannot tell if there are any more callbacks (of the vm code) in the event loop. (e.g. a `setTimeout` callback)\r\n\r\n**Describe the solution you'd like**\r\n`vm.Script` should use a separate event loop and emit an event when there are no more callbacks left.\r\n\r\n**Describe alternatives you've considered**\r\nAs [bnoordhuis](https://github.com/bnoordhuis) stated, we can [add bookkeeping to every call into the VM](https://github.com/nodejs/node/issues/3020#issuecomment-144117993).\r\n"},{"labels":["feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI'm working on my own programming language, and I'd like to be able to create\r\nan interpreter in node.js that would accept this input:\r\n\r\n```\r\nnode my-interpreter.mjs eval \"Two times \" ++ Pi ++ \" equals \" ++ (2 * Pi)\r\n> Two times 3.14159 equals 6.28319\r\n```\r\n\r\nAnything beyond `node my-interpreter.mjs eval` is code written in my programming\r\nlanguage. I need this input in raw form to be able to parse the code. It is not possible\r\nto reconstruct the code from `process.argv`.\r\n\r\n**Describe the solution you'd like**\r\nA string property like `rawArgv` on `process` variable.\r\n\r\n**Describe alternatives you've considered**\r\nIt would be possible to put the whole code in quotes and escape all quotes in the code, but in my view this would make the command-line \"API\" much uglier.\r\n"},{"labels":["feature request","fs","libuv"],"text":"**Is your feature request related to a problem? Please describe.**\r\nAt present opening files & looking at directories in Node.js requires passing in the full path. These operations would ideally also be able to accept directory file descriptors as options to them.\r\n\r\nThis helps alleviate a number of hairly race conditions. If directories are being moved around, the directory file descriptors will remain stable. Without this capability, it's not possible for a program to tell whether it's going to be writing to the same directory or not.\r\n\r\nThere are some performance advantages here too. Rather than having to walk up the file path, files can be opened directly from the starting directory file descriptor's location.\r\n\r\nThis is also useful for sandboxing & security. Applications can pass around directory file descriptors to each other or between modules, rather than having to reveal full paths to each other.\r\n\r\nFinally, this capability would greatly ease interoperation with upcoming specifications such as WASI, which already use this file-descriptor based mode for all their operations. Both [__wasi_fd_open](https://github.com/WebAssembly/WASI/blob/master/phases/snapshot/docs/wasi_unstable_preview1.md#__wasi_path_open) and [__wasi_fd_readdir](https://github.com/WebAssembly/WASI/blob/master/phases/snapshot/docs/wasi_unstable_preview1.md#__wasi_fd_readdir) require a starting directory file descriptor to work from. This is an integral part of their security model, part of the \"capability\" system of the api.\r\n\r\nIt's less explicit, but the design of the [native file system](https://github.com/WICG/native-file-system) specification for the web also works in a similar manner, where one never opens a full path, they only open things inside the tree of whatever handles (file or directory descriptors) that the page already has access to.\r\n\r\n**Describe the solution you'd like**\r\nI would like to see variants of or options to fs open/readdir that accept a starting directory fd, rather than requiring the full path to be passed in. In *nix land, this is done via `openat()` and using `fdopendir()` instead of `open()` and `opendir()`.\r\n\r\nThis should give Node.js API capabilities that resemble how other js platforms are handling opening things, which should yield performance gains for users, freedom from an assortment of nasty race condition, & potentially some \"capabilities\" based security/sandboxing possibilities.\r\n\r\n**Describe alternatives you've considered**\r\n....\r\n\r\nI believe changes to libuv would be required. As for platform support, there is a [Stackoverflow discussing Windows parallels](https://stackoverflow.com/questions/32138524/is-there-a-windows-equivalent-of-openat). Support most *nix'es is [reported to be good](https://stackoverflow.com/a/32137401/72070).\r\n\r\n/cc @cjihrig because he's been working on WASI a bunch & specifically in node. "},{"labels":["async_hooks","feature request"],"text":"With all the work currently being done around async_hooks and stack trace enhancement through e.g. source maps, I’m wondering whether we should bring official long stack trace support into core.\r\n\r\nI’d personally love to see it – I’m certainly biased, but for debugging flaky tests alone it would make things a lot easier to not to have to pull in an external utility for that (or to have to write an ad-hoc one).\r\n\r\nAlternatives would be to keep these utilities in userland and/or to just vendor one in but keep developing it outside of core. In particular the latter also seems good to me.\r\n\r\n@nodejs/async_hooks @bcoe @AndreasMadsen "},{"labels":["console","feature request","util"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nIn GCP cloud functions we need logged output to be in a particular format if we want to have accurate log levels and properly rendered results in stackdriver. In the past this was done by monkey patching console.log... which makes me sad.\r\n\r\n**Describe the solution you'd like**\r\n\r\n[Java has a solution to this problem.](https://docs.oracle.com/javase/10/core/java-logging-overview.htm#GUID-B83B652C-17EA-48D9-93D2-563AE1FF8EDA__CONFIGURATIONFILE-4C48BDCE) Specifically they allow for a configuration file that can be used to modify the default behavior of the logger.\r\n\r\nI'm curious if node would benefit from a similar feature\r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\n\r\nThis could also potentially be solved within the WHATWG console spec... happy to explore that as a path as well"},{"labels":["feature request","worker"],"text":"**Is your feature request related to a problem? Please describe.**\r\nnyc 15 is moving away from `spawn-wrap`, will use `process-on-spawn` and `node-preload` in it's place.  These two modules ensure nyc gets properly loaded into new processes, but they do not help with worker threads (note spawn-wrap also did nothing to help with worker threads).  I'd like to add worker thread support to nyc.\r\n\r\n**Describe the solution you'd like**\r\nnyc needs to pass data to worker threads without requiring modifications to arguments of `new Worker(...)` run by the code being tested.  An idea I have:\r\n```js\r\nprocess.on('worker', options => {\r\n\toptions.platformData('nyc', nycConfigClonableObject);\r\n\toptions.nodeOptions.push('--require', require.resolve('./lib/wrap-thread.js'));\r\n});\r\n```\r\n\r\nThe above code assumes that `new Worker()` internally calculates `options.nodeOptions` based on the `env.NODE_OPTIONS` passed to it (see also #29117).  This would allow nyc to inject preload modules if necessary without altering the `process.env` of the new thread.\r\n\r\n**Describe alternatives you've considered**\r\nSetting platform data during process startup could work for some use cases:\r\n```js\r\nconst threads = require('worker_threads');\r\nthreads.platformData('nyc', dataNeededToInitializeNYC);\r\nthreads.platformNodeOptions.push('--require', require.resolve('./wrap-thread.js')));\r\n```\r\n\r\nThis would work for nyc but maybe another tool would need to calculate the object needed for platformData at the time of `new Worker()`.  This is why my proposal is for 'worker spawn' hooks to ensure this is useful for more than just nyc.  I'm also unsure how `platformNodeOptions` would be incorporated into the `env.NODE_OPTIONS` given to `new Worker()`.\r\n\r\n---\r\n\r\nI considered patching the `worker_threads` core module.  `worker.SHARE_ENV` is very problematic for this approach as it eliminates the possibility of using environmental variables to get nyc options into the worker threads.  We would likely need to patch `new Worker()` to wrap worker data so that `options.workerData = {userData: options.workerData, nycData}`, then `require('worker_threads').workerData` would be patched to return the `userData` subproperty and we'd create a `require('worker_threads').nycData` export.  This seems like it would be very messy, especially if any other tooling had a need to patch `workerData` in a similar way.  I'm really not interested in this approach even if it could be forced to work.\r\n\r\nCC @addaleax @arcanis @nodejs/tooling"},{"labels":["feature request","net","wontfix"],"text":"<!--\r\nThank you for reporting a possible bug in Node.js.\r\n\r\nPlease fill in as much of the template below as you can.\r\n\r\nVersion: output of `node -v`\r\nPlatform: output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\nSubsystem: if known, please specify the affected core module name\r\n\r\nIf possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **Version**:\r\n\r\n13.3.0\r\n\r\n* **Platform**:\r\n\r\nLinux\r\n\r\n* **Subsystem**:\r\n\r\nDebian\r\n\r\n<!-- Please provide more details below this comment. -->\r\n\r\nIf I were to create a \"server\" for IPC using a named pipe like:\r\n\r\n```\r\nconst ipc_server = net.createServer((c) => {\r\n        // 'connection' listener.\r\n        console.log('ipc client connected');\r\n        c.on('end', () => {\r\n                console.log('ipc client disconnected');\r\n        });\r\n        c.write('hello\\r\\n');\r\n        c.pipe(c);\r\n});\r\n\r\nipc_server.listen('/tmp/collect.sock', () => {\r\n        console.log('ipc connected at /tmp/pipe_name.sock');\r\n});\r\n```\r\n\r\nThere are permission issues if I am accessing that named pipe from a process which has a different linux profile permission mask than the user which started the server.\r\n\r\nIt would be really nice to just have the ability to set the permissions on the named pipe file when creating the server with ```net.createServer()```.\r\n\r\nYou get something like this when trying to connect to the named pipe in a process ran by a user with different permissions on his account.\r\n\r\n```\r\nipc client error { Error: connect EACCES /tmp/pipe_name.sock\r\n    at PipeConnectWrap.afterConnect [as oncomplete] (net.js:1106:14)\r\n  errno: 'EACCES',\r\n  code: 'EACCES',\r\n  syscall: 'connect',\r\n  address: '/tmp/pipe_name.sock' }\r\n```"},{"labels":["feature request","net"],"text":"**Is your feature request related to a problem? Please describe.**\r\nThere is a class of connection errors we see related to blackholed connections that I am currently unable to simulate in node. A mock server is able to blackhole any data after a connection is established, but gives me very little control over establishment of the connection.\r\n\r\n**Describe the solution you'd like**\r\nSome sort of API which would allow me to control an incoming connection prior to establishing the connection. At very least, some sort of ability to introduce a delay before `uv_accept` is called to simulate a very slow server or a black hole. \r\n\r\n**Describe alternatives you've considered**\r\nafaict, this is not possible with Node's current API. I would have to write an addon using something like libuv, or just use another language/environment to write this server. Additionally, I can simulate the initial connection failure by attempting a connection to some unroutable address (e.g. `240.0.0.0/4`)"},{"labels":["feature request","process"],"text":"**Is your feature request related to a problem? Please describe.**\r\nI'd like to suppress experimental warnings while still seeing any other errors.  In particular when I am using native ES modules I do not want the experimental warning printed for every process, but I do want unrelated warnings to still be printed.\r\n\r\n**Describe the solution you'd like**\r\nAllow `--no-warnings` to optionally accept an option string such as `--no-warnings=type1,type2`.  Using `--no-warnings` without any option would continue to disable all warnings.  This would allow `--no-warnings=ExperimentalWarning` to suppress ExperimentalWarning only.\r\n\r\n**Describe alternatives you've considered**\r\n`--no-experimental-warnings` or a similarly named new flag could be created.  This has the drawback that `node --no-experimental-warnings` on node.js 13.3.0 exit with an error where `--no-warnings=ExperimentalWarnings` will not currently error (it causes all warnings to be ignored).\r\n\r\nIn my own repo which uses ES modules I've created `suppress-experimental.cjs` which gets loaded with `NODE_OPTIONS='--require=./suppress-experimental.cjs'`:\r\n```js\r\n'use strict';\r\n\r\nconst {emitWarning} = process;\r\n\r\nprocess.emitWarning = (warning, ...args) => {\r\n\tif (args[0] === 'ExperimentalWarning') {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (args[0] && typeof args[0] === 'object' && args[0].type === 'ExperimentalWarning') {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn emitWarning(warning, ...args);\r\n};\r\n```\r\n\r\nObviously patching node.js internals like this is undesirable but it accomplishes my goal."},{"labels":["ES Modules","feature request","worker"],"text":"When creating workers from within modules, we don't have `__filename` or `__dirname` so rather have to rely on import.meta.url, something like:\r\n\r\n```js\r\nimport { Worker } from 'worker_threads';\r\nimport { fileURLToPath } from 'url';\r\nnew Worker(fileURLToPath(import.meta.url));\r\n```\r\n\r\nTo avoid the `fileURLToPath` call being necessary here, should we consider supporting URLs as input into `new Worker`?"},{"labels":["ES Modules","duplicate","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nIt's a feature request.\r\n\r\n**Describe the solution you'd like**\r\nWould be nice to add __dirname, and __filename. to ES Modules, I've read the [docs](https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_no_code_require_code_code_exports_code_code_module_exports_code_code_filename_code_code_dirname_code), but also read [TC39 proposal](https://github.com/tc39/proposal-import-meta#introducing-lexical-variables-in-another-way), they don't decline using this variables.\r\n\r\n**Describe alternatives you've considered**\r\nI have no idea. By the way, I've added `__filename` and `__dirname` properties to `import.meta` instead of suggestion of [how to get these values](https://nodejs.org/dist/latest-v13.x/docs/api/esm.html#esm_no_code_require_code_code_exports_code_code_module_exports_code_code_filename_code_code_dirname_code).\r\n"},{"labels":["ES Modules","feature request","good first issue","help wanted"],"text":"* **Version**: v13.2.0\r\n* **Platform**: Windows 10, 64-bit\r\n* **Subsystem**: N/A\r\n\r\n<!-- Please provide more details below this comment. -->\r\nWhen trying to import a JSON file, the error message provided is the following:\r\n```\r\n(node:7004) ExperimentalWarning: The ESM module loader is experimental.\r\ninternal/modules/run_main.js:50\r\n    internalBinding('errors').triggerUncaughtException(\r\n                              ^\r\n\r\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension: C:\\Users\\Mercy\\Desktop\\New folder\\node_modules\\patron.js\\package.json\r\n    at Loader.resolve [as _resolve] (internal/modules/esm/default_resolve.js:114:13)\r\n    at Loader.resolve (internal/modules/esm/loader.js:74:33)\r\n    at Loader.getModuleJob (internal/modules/esm/loader.js:148:40)\r\n    at ModuleWrap.<anonymous> (internal/modules/esm/module_job.js:41:40)\r\n    at link (internal/modules/esm/module_job.js:40:36) {\r\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\r\n}\r\n```\r\n\r\n**How to reproduce:**\r\n1. Create test.mjs with `import './package.json'`\r\n2. Run `node test.mjs`\r\n\r\nTo help debug this error we should ensure it provides the name of the parent module that attempted the file extension load - something like `imported from /path/to/test.mjs`."},{"labels":["feature request","repl"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nIn the REPL, it's annoying to have undesired verbose outputs, for example:\r\n```js\r\nmoment = require('moment-timezone'); // I don't want any output\r\n// this shows many many lines\r\n// that I don't really want\r\n// to see\r\nm=moment()\r\n// again, many lines\r\n// I don't even see anymore my previous inputs\r\n```\r\n**Describe the solution you'd like**\r\nWhat would be great, is if the line ends with `;` we turn off inspect\r\nSo I'd just need to type:\r\n```js\r\nmoment = require('moment-timezone'); // no output below\r\nm=moment(); // no output below\r\nm.date()\r\n// 29\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nI can terminate the line with  `;''` to skip the ouput, `void` is less easy to use, because it has to be put at the beginning, and wrapped in parenthesis for assignments\r\n```js\r\nvoid (m=moment())\r\nm=moment(); ''\r\n```"},{"labels":["child_process","feature request"],"text":"<!--\r\nThank you for reporting a possible bug in Node.js.\r\n\r\nPlease fill in as much of the template below as you can.\r\n\r\nVersion: output of `node -v`\r\nPlatform: output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\nSubsystem: if known, please specify the affected core module name\r\n\r\nIf possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **Version**: v12.13.1\r\n* **Platform**: Linux 5.3.11\r\n* **Subsystem**: child_process\r\n\r\n<!-- Please provide more details below this comment. -->\r\n\r\nSee https://gist.github.com/jgehrcke/ab4656353c1155173d2dde5ffceb0d0b for repro code. The output when executing this:\r\n```\r\n$ node kill_no_pid_repro_js.js \r\n2019-11-26T16:49:50.509Z info: waiting for the startup error to be handled\r\n2019-11-26T16:49:50.511Z info: loop iteration\r\n2019-11-26T16:49:50.514Z error: 'error' handler: Error: spawn does-not-exist-- ENOENT\r\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:264:19)\r\n    at onErrorNT (internal/child_process.js:456:16)\r\n    at processTicksAndRejections (internal/process/task_queues.js:80:21) {\r\n  errno: 'ENOENT',\r\n  code: 'ENOENT',\r\n  syscall: 'spawn does-not-exist--',\r\n  path: 'does-not-exist--',\r\n  spawnargs: []\r\n}\r\n2019-11-26T16:49:50.521Z error: child process startup error\r\n2019-11-26T16:49:50.521Z info: send SIGTERM\r\n2019-11-26T16:49:51.523Z info: send SIGTERM\r\n```\r\n\r\nThe log output with millisecond resolution shows the chronological order of events.\r\n\r\nIn the repro code I use an asynchronous startup error detection technique, using the \"error\" event. In the log output we can see that this event is being caught, indicating ENOENT (command/executable not found, as desired in this repro). That's great.\r\n\r\nAfter this one can still call the [`kill()` method](https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal\r\n) on the process. The call \"succeeds\", silently swallowing a problem. The problem as I would put it into words: \"there is no process that you can kill here\", and that problem should _not_ be silently swallowed, because it makes it too easy to write code with race conditions.\r\n\r\nI believe that this should be considered a bug in NodeJS: this is a programmer error, i.e. this should throw an Error, as it would in other programming environments. If unhandled, this should crash the code, indicating to the programmer that their assumption that the process is alive was wrong. The programmer should be required to explicitly handle an error thrown by `kill()`.\r\n\r\nIt's not necessary to demonstrate the struggle, but maybe makes it easier to understand: the repro code calls kill() another time, about 1 second after the startup error had happened. That kill() also swallows the problem.\r\n\r\nI don't know if internally the `kill()` method just is a noop in this case (where the runtime knows that there is no PID to issue a `kill()` system call to), or if it actually calls the system call and then swallows the ENOENT. But in both cases it makes a conscious choice, knows about the absence of the process, and hides the erroneous attempt from the programmer.\r\n\r\nThere could be two ways to check for the error synchronously:\r\n- The underlying `kill()` system call does fail with ENOENT, if it is even executed.\r\n- If the underlying `kill()` system call is not executed then the runtime seems to have internal state about the fact that the process is not there (I am pretty sure that this is what's happening, see my code comments in the repro code). That state could be used.\r\n\r\nIt is documented that \r\n\r\n> The ChildProcess object may emit an 'error' event if the signal cannot be delivered\r\n\r\nIf this is meant to be _the_ only, reliable, documented way to find out that a `kill()` failed (not quite clear from the documentation) then I think the repro code is also quite insightful: in the repro code that event handler is not called after the erroneous `kill()`. That's in fact proven by the additional 1-second wait, during which I would expect that handler to be called.\r\n\r\nIn the repro code comments I have pointed out that the runtime magically detects that the child process is gone, and it terminates the code pre-maturely, to prevent an indefinitely long wait from happening.\r\n\r\nThat is, I think this issue mainly reveals a rather mean inconsistency where the runtime sometimes seems to consider the fact that there is no process, and sometimes it doesn't, making it difficult to write robust child process management code.\r\n\r\nNote: currently there does not seem to be a documented synchronous way to detect a child process startup error (upon common system call errors such as ENOENT and EACCES), and no documented synchronous way to check for process \"liveness\", although both could be done synchronously with \"fast\" system calls. This might be strongly related to this topic here. Related: https://github.com/eclipse-theia/theia/pull/3447 and https://github.com/nodejs/help/issues/1191."},{"labels":["ES Modules","experimental","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nRight now we can easily require files relative to a given location. The same isn't possible for `import`. One possible use case is \"import third party tool X relative to the working directory from within a globally installed CLI tool\".\r\n\r\nExample: https://github.com/zeit/now/blob/7e75d8c1a3485b7121f919e5035dc174ae9d629a/packages/now-next/src/dev-server.ts#L14\r\n\r\n**Describe the solution you'd like**\r\n\r\n```js\r\nimport {createImport} from 'module';\r\nimport {pathToFileURL} from 'url';\r\nimport {resolve as resolvePath} from 'path';\r\n\r\nconst $import = createImport(pathToFileURL(resolvePath('.app'));\r\nconst {default as next} = await $import('next');\r\n$import.meta.url; // file:///path/to/cwd/.app\r\n```\r\n\r\nNote: `$import.meta` exposes the same API as the usual `import.meta` but would get a clean copy. It would *not* be the same object as the meta object for `file:///path/to/cwd/.app` if a module with that URL actually exists.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nOne alternative would be to use `require` for resolution but that has the downside of not matching what `import` resolution would do. It would also not give access to the `import.meta` APIs.\r\n\r\n```js\r\nimport {createRequire} from 'module';\r\nimport {fileURLToPath, pathToFileURL} from 'url';\r\nimport {resolve as resolvePath} from 'path';\r\n\r\nfunction createImport(base) {\r\n  const req = createRequire(fileURLToPath(base));\r\n  return function __import(specifier) {\r\n    return import(pathToFileURL(req.resolve(specifier)));\r\n  };\r\n}\r\n\r\nconst $import = createImport(pathToFileURL(resolvePath('.app'));\r\nconst {default as next} = await $import('next');\r\n```"},{"labels":["ES Modules","feature request","good first issue","help wanted"],"text":"When not using a file extension in ESM - eg `import pkg from './path'` we currently just throw a straightforward not found error. As proposed by @MylesBorins in https://github.com/nodejs/modules/issues/443 it would be useful to enhance this error message.\r\n\r\nIdeally the error message should run the CJS resolver and say \"the CJS resolver would have resolved this module to ...\". We actually previously had this code path implemented by @bmeck but it seems to have got lost along the way. See the early implementation at https://github.com/nodejs/node/pull/14369/files#diff-3e94629c67625a2547d1507d0a547211R20.\r\n\r\nSorry @bmeck I think I might have dropped this and forgot to add it back when refactoring error codes to be standard. That was bad."},{"labels":["feature request","http","http_parser"],"text":"#### Version\r\n\r\n```bash\r\n$ node -v\r\nv13.1.0\r\n$ uname -a                                                                                                                                                                                                                                         06:58:36\r\nDarwin Admins-MacBook-Pro.local 19.0.0 Darwin Kernel Version 19.0.0: Wed Sep 25 20:18:50 PDT 2019; root:xnu-6153.11.26~2/RELEASE_X86_64 x86_64\r\n\r\n```\r\n\r\n#### Code\r\n\r\n```js\r\nrequire('https')\r\n  .get('https://www.megaplextheatres.com/api/theatres/all', (response) => {\r\n    console.log('OK');\r\n  })\r\n  .on('error', (error) => {\r\n    console.error(error);\r\n  });\r\n\r\n```\r\n\r\n#### Actual\r\n\r\nError:\r\n\r\n```\r\nError: Parse Error: Invalid header value char\r\n    at TLSSocket.socketOnData (_http_client.js:454:22)\r\n    at TLSSocket.emit (events.js:210:5)\r\n    at addChunk (_stream_readable.js:326:12)\r\n    at readableAddChunk (_stream_readable.js:301:11)\r\n    at TLSSocket.Readable.push (_stream_readable.js:235:10)\r\n    at TLSWrap.onStreamRead (internal/stream_base_commons.js:182:23) {\r\n  bytesParsed: 722,\r\n  code: 'HPE_INVALID_HEADER_TOKEN',\r\n  reason: 'Invalid header value char',\r\n  rawPacket: <Buffer 48 54 54 50 2f 31 2e 31 20 32 30 30 20 4f 4b 0d 0a 54 72 61 6e 73 66 65 72 2d 45 6e 63 6f 64 69 6e 67 3a 20 63 68 75 6e 6b 65 64 0d 0a 43 6f 6e 74 65 ... 1402 more bytes>\r\n}\r\n\r\n```\r\n\r\n#### Expected\r\n\r\n\"OK\" or an error with an access to the raw HTTP response, so that I could at least somehow parse the response myself.\r\n\r\n#### Workarounds\r\n\r\nNone known to me.\r\n\r\nPreviously it was possible to workaround it using `--http-parser=legacy`.\r\n\r\n```bash\r\n$ node -v\r\nv12.11.1\r\n$ node --http-parser=legacy test.js\r\nOK\r\n\r\n```\r\n\r\nThis stopped working in v13.\r\n\r\nPrevious it was possible to override the default HTTP parser.\r\n\r\n```js\r\nprocess.binding('http_parser').HTTPParser = require('http-parser-js').HTTPParser;\r\n\r\nrequire('https')\r\n  .get('https://www.megaplextheatres.com/api/theatres/all', (response) => {\r\n    console.log('OK');\r\n  })\r\n  .on('error', (error) => {\r\n    console.error(error);\r\n  });\r\n\r\n```\r\n\r\n```bash\r\n$ node -v\r\nv10.17.0\r\n$ node test-using-http-parser-js.js\r\nOK\r\n\r\n```\r\n\r\nThis stopped working in v12.\r\n\r\nThis issue did not exist in Node.js v10.\r\n\r\n#### Related issues\r\n\r\n* https://github.com/nodejs/node/issues/22064#issuecomment-519675190\r\n* https://github.com/sindresorhus/got/issues/855"},{"labels":["feature request","worker"],"text":"**Is your feature request related to a problem? Please describe.**\r\n`process.argv` is commonly used in Node.js. Right now there is only `execArgv` for altering how node instance works, which will be filtered `process.argv` with these only Node.js understands.\r\n\r\n**Describe the solution you'd like**\r\nAdd an option `argv` to `Worker` constructor's second argument.\r\n```js\r\nnew Worker(__filename, { argv: ['foo', 'bar'] })\r\nif (!isMainThread) {\r\n  console.log(process.argv) // ['foo', 'bar']\r\n}\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nJust use option `workerData` in `Worker` constructor's second argument."},{"labels":["discuss","feature request","http2"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nWe have flaky https://github.com/nodejs/node/issues/29802 that doesn't hit the needed amount of invalid frames and crashes with OOM which may be solved by decreasing the amount of maximum invalid frames for that test.\r\nIt may prove useful for people to be able to configure how many invalid frames they want to tolerate though I don't think it'll be a popular feature.\r\nAt the same time, it shouldn't add too much of a maintenance burden to us.\r\n\r\n**Describe the solution you'd like**\r\nProbably option of `maxSessionInvalidFrames` (comepletely open to better names) to `http2.createServer()`/`http2.createSecureServer()` and possibly `http2.connect()`. I don't think this needs to be changed on the go and can be set upon server creation, though dynamic change may be useful.\r\n\r\nThough I'm not sure how to pass that to our  C++-land `Http2Session`? (via `js_fields_`; property on Http2Session accessible from JS; constructor param?)\r\n\r\n**Describe alternatives you've considered**\r\nNone probably, it's hardcoded so it can stay that way.\r\n\r\n/cc @addaleax as the one who added invalid frame counting.\r\n/cc @nodejs/http2 "},{"labels":["feature request","wontfix"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nI was working with Node.js and I wanted to have a quick lightweight reliable http server for my website on digital-ocean. I choose `npm install http-server` turns out the core library just got recently deprecated after setting it all up, even tho it is #1 on Google and has lots of downloads and the library owner warns users NOT to use it.\r\n\r\nBut if you look at the Node.js counterparts... Python3, PHP, dotNETcore, they all have a built-in static server. For Node.js I have to download+install `express` or download/npx/install `http-server` which is a wrapped around a deprecated static-server `node-ecstatic` (https://github.com/jfhbrook/node-ecstatic)......\r\n\r\nBesides that, I think built-in standard static-server a very powerful tool for every Node.js developers to have at their disposal. Why should Python3, dotNET core, PHP all have their own built-in static server but not Node.js?\r\n\r\nI don't think this should be an accepted disadvantage of Node.js...\r\n\r\n**Describe the solution you'd like**\r\n\r\nOfficial api for simple, quick, functional supported static http server, similar as Python 3, .NET Core etc.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nRelying on additional/external tools which you have to download and install.\r\n\r\nI'm looking at Express, or even installing Python or .NET Core...\r\n"},{"labels":["events","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\nReference:\r\n[https://developer.mozilla.org/en-US/docs/Web/API/Event/stopImmediatePropagation](https://developer.mozilla.org/en-US/docs/Web/API/Event/stopImmediatePropagation)\r\n\r\nSeems we can implement this function. Any idea?\r\n\r\nHere is a stand alone simplified EventEmitter written in ES6 class style, which shows how stopImmediatePropagation works.\r\n```js\r\nclass EventEmitter {\r\n\t\r\n\tstatic _maxListeners = 10;\r\n\t\r\n\tstatic get maxListeners() {\r\n\t\treturn this._maxListeners;\r\n\t}\r\n\t\r\n\tstatic set maxListeners(num) {\r\n\t\tif (typeof num === 'number' && num > 0) {\r\n\t\t\treturn this._maxListeners = num;\r\n\t\t}\r\n\t}\r\n\t\r\n\t#events = Object.create(null);\r\n\r\n\t#maxListeners = undefined;\r\n\t\r\n\temit(event, ...args) {\r\n\t\tconst listener = this.#events[event];\r\n\t\tif (listener && this.#stopImmediatePropagation === false) {\r\n\t\t\tif (typeof listener === 'function') {\r\n\t\t\t\targs.length ? listener.apply(this, args) : listener.call(this);\r\n\t\t\t} else { \r\n\t\t\t\tif (args.length) {\r\n\t\t\t\t\tfor (let each of listener.slice()) {\r\n  \t\t\t\t\t\teach.apply(this, args);\r\n\t\t\t\t\t\tif (this.#stopImmediatePropagation === true) {\r\n\t\t\t\t\t\t\tthis.#stopImmediatePropagation = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let each of listener.slice()) {\r\n  \t\t\t\t\t\teach.call(this);\r\n\t\t\t\t\t\tif (this.#stopImmediatePropagation === true) {\r\n\t\t\t\t\t\t\tthis.#stopImmediatePropagation = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (event === 'error') {\r\n\t\t\thandleError(args[0]);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\ton(event, listener) {\r\n\t\treturn addListener(this, this.#events, event, listener, false);\r\n\t}\r\n\t\r\n\t#stopImmediatePropagation = false;\r\n\t\r\n\tstopImmediatePropagation(){\r\n\t\tthis.#stopImmediatePropagation =  true;\r\n\t}\r\n\t\t\r\n\tget addListener() {\r\n\t\treturn this.on;\r\n\t}\r\n\t\r\n\toff(event, listener) {\r\n\t\tremoveListener(this.#events, event, listener);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tget removeListener() {\r\n\t\treturn this.off;\r\n\t}\r\n\t\r\n\tget maxListeners() {\r\n\t\treturn this.#maxListeners || this.constructor.maxListeners;\r\n\t}\r\n\t\r\n\tset maxListeners(num) {\r\n\t\tif (typeof num === 'number' && num > 0)\r\n\t\t\treturn this.#maxListeners = num;\r\n\t}\r\n\t\r\n\teventNames() {\r\n\t\treturn Reflect.ownKeys(this.#events);\r\n\t}\r\n\t\r\n\tlistenerCount(event) {\r\n\t\tconst listener = this.#events[event];\r\n\t\tif (listener) {\r\n\t\t\treturn (typeof listener === 'function') ? 1 : listener.length;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tlisteners(event) {\r\n\t\tconst listener = this.#events[event];\r\n\t\tif (listener){\r\n\t\t\treturn (typeof listener === 'function') ? listener : listener.slice();\r\n\t\t}\r\n\t\treturn [];\r\n\t}\r\n\t\r\n\tprependListener(event, listener) {\r\n\t\treturn addListener(this, this.#events, event, listener, true);\r\n\t}\r\n\t\r\n\tawait(event) {\r\n\t\tvar _resolve, _reject; \r\n\t\treturn new Promise(\r\n\t\t\t(resolve, reject) => {\r\n\t\t\t\t_resolve = resolve;\r\n\t\t\t\t_reject = reject;\r\n\t\t\t\tthis.on(event, resolve);\r\n\t\t\t\tif (event !== 'error') {\r\n\t\t\t\t\tthis.on('error', reject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t).finally(\r\n\t\t\t() => {\r\n\t\t\t\tthis.off(event, _resolve);\r\n\t\t\t\tif (event !== 'error') {\r\n\t\t\t\t\tthis.off('error', _reject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}\r\n\r\nmodule.exports = EventEmitter;\r\n\r\nfunction addListener(emitter, events, event, listener, prepend) {\r\n\tif (event && typeof listener === 'function') {\r\n\t\tvar existing = events[event];\r\n\t\tif (existing) {\r\n\t\t\tif (typeof existing === 'function') {\r\n\t\t\t\texisting = events[event] = prepend ? [listener, existing] : [existing, listener];\r\n\t\t\t} else {\r\n\t\t\t\tprepend ? existing.unshift(listener) : existing.push(listener);\r\n\t\t\t}\r\n\t\t\tif (existing.length > emitter.maxListeners) {\r\n\t\t\t\t\tconsole.log('Too many event listeners added. Set maxListeners to increase limit.');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tevents[event] = listener;\r\n\t\t}\r\n\t}\r\n\treturn emitter;\r\n}\r\n\r\nfunction removeListener(events, event, listener) {\r\n\tconst existing = events[event];\r\n\tif (existing) {\r\n\t\tif (listener === undefined || existing === listener) {\r\n\t\t\tdelete events[event];\r\n\t\t} else {\r\n\t\t\tlet index = existing.lastIndexOf(listener),\r\n\t\t\t\tlen = existing.length;\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tif (len-- > 2) {\r\n\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\twhile (index < len) {\r\n\t\t\t\t\t\t\texisting[index++] = existing[index];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\texisting.pop();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texisting.shift();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { \r\n\t\t\t\t\tevents[event] = existing[1 - index];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction handleError(error) {\r\n\tif (error instanceof Error) {\r\n\t\tthrow error;\r\n\t}\r\n\tthrow error ? new Error(error) : new Error(); \t\r\n}\r\n\r\nfunction f(){\r\n\tconsole.log('f');\r\n}\r\n\r\nfunction g(){\r\n\tconsole.log('g');\r\n}\r\n\r\nfunction br(){\r\n\tconsole.log('br');\r\n\tthis.stopImmediatePropagation();\r\n}\r\n\r\nvar e = new EventEmitter;\r\n\r\ne.on('event', f)\r\ne.on('event', br);\r\ne.on('event', g);\r\ne.emit('event');"},{"labels":["console","feature request","util"],"text":"* **Version**: v12.12.0\r\n* **Platform**: Darwin mba4.local 18.7.0 Darwin Kernel Version 18.7.0\r\n* **Subsystem**: util.inspect\r\n\r\n`getters:true` works correctly on a plain object: \r\n\r\n```js\r\nconst util = require('util')\r\nutil.inspect.defaultOptions.getters = true\r\n\r\nconst object = {\r\n  get test () {\r\n    return 'test'\r\n  }\r\n}\r\nconsole.log(object)\r\n```\r\n\r\nOutput: \r\n\r\n```\r\n{ test: [Getter: 'test'] }\r\n```\r\n\r\nBut the same operation on a class instance fails to print the getter.\r\n\r\n```js\r\nclass Something {\r\n  get test () {\r\n    return 'test'\r\n  }\r\n}\r\n\r\nconst something = new Something()\r\nconsole.log(something)\r\n```\r\n\r\nOutput: \r\n\r\n```\r\nSomething {}\r\n```\r\n\r\nThe output I expect to see is:\r\n\r\n```\r\nSomething { test: [Getter: 'test'] }\r\n```"},{"labels":["buffer","feature request"],"text":"Feature request:\r\nSo currently i'm working with an application where I need to send the address of a node Buffer to a  ioctl() to communicate with a linux device driver correctly. \r\n\r\nCurrently every Buffer allocated gets an address reference, example in a 32-bit architecture : \r\n```javascript\r\nvar myBuf = Buffer.alloc(1);\r\nconsole.log(myBuf); // prints Buffer where 0x210c378 may be the memory address\r\n// Result:  \r\n// <Buffer 00>\r\n```\r\n\r\nThe idea is to provide a function that returns the address of the Buffer (e.g. **Buffer.address**) example:\r\n```javascript\r\nvar myBuf = Buffer.alloc(1);\r\nconsole.log(myBuf);\r\nconsole.log(myBuf.address); // should include all left zeros\r\n// Result:\r\n// <Buffer 00>\r\n// 0210c378\r\n```\r\n\r\nTherefore if I want to make a structure that in C/C++ looks like this\r\n```C\r\nstruct myStruct {\r\n  char *tx;\r\n  int value;\r\n}\r\n```\r\n\r\nThen in node I can create the structure like this\r\n```javascript\r\nvar tx = Buffer.from([1, 2, 3, 4]);                // char tx[4], an example\r\nvar pointerToTx = Buffer.from(tx.address,'hex');   // char *tx\r\nvar value = Buffer.alloc(4);                       // int value\r\nvar myStruct = Buffer.concat([pointerToTx, value]) // struct myStruct {char *tx, int value}\r\nconsole.log(myStruct);  // prints pointer address and a int value buffer\r\n// Result: \r\n// <Buffer 02 10 c3 78 00 00 00 00> \r\n```\r\n\r\nThe current way of getting the address is using napi/nan modules. I believe at some point there was an implementation in node for getting the memory address of Buffers but not sure. If there is already an implementation for this then please let me know. \r\n"},{"labels":["feature request","http","stream"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nWe have a Node service that loads a bunch of data over an HTTP connection using Server-Sent Events. We noticed, when comparing to implementations in other languages, that the data we receive winds up being in many more \"chunks\" in Node which leads to some performance issues.\r\n\r\nAfter some digging, it seems that the issue is that `http.ServerResponse` received when using `http.request()` uses [the default `highWaterMark` value of `16kb`](https://nodejs.org/api/stream.html#stream_new_stream_readable_options) inherited from the default `ReadableStream` class. This is much smaller than some of the messages we're processing which we believe is the cause of the perf issues since we must reconstruct the messages before parsing them fully.\r\n\r\n**Describe the solution you'd like**\r\n\r\nIdeally, an option to configure the `highWaterMark` size of a `response` when calling `http.request`.\r\n\r\nIt might be that there is a way to do what we need here, but I was not able to find it if so. So I'm open to feedback on that front.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nSome way to override the default `highWaterMark` size of a stream (e.g., a CLI option), but that feels more expansive than needed.\r\n\r\nThanks in advance for your help/consideration 😃 "},{"labels":["crypto","feature request","openssl"],"text":"Run this code (I'm using Node.js 12.13.0 from `deb.nodesource.com`):\r\n\r\n```javascript\r\nconst crypto = require('crypto');\r\nconsole.log(crypto.getCurves());\r\n```\r\n\r\nAbsent from this list are the curves recommended in [RFC 7748](https://tools.ietf.org/html/rfc7748) (Elliptic Curves for Security). Additionally, [RFC 8032](https://tools.ietf.org/html/rfc8032)  (EdDSA) is not supported either.\r\n\r\nFor ECDH, I would expect to see `x25519` and `x448` in the list.\r\nFor signatures, I would expect to see `ed25519` and `ed448` as well.\r\n\r\nNote: These types are documented elsewhere:\r\n\r\n* https://nodejs.org/api/crypto.html#crypto_keyobject_asymmetrickeytype\r\n* https://nodejs.org/api/crypto.html#crypto_crypto_generatekeypair_type_options_callback\r\n"},{"labels":["V8 Engine","feature request","security"],"text":"Hello.\r\n\r\nWorking: `node --disallow-code-generation-from-strings index.js`\r\nNot working: `NODE_OPTIONS=--disallow-code-generation-from-strings node index.js`\r\n\r\nIm getting error: `node: --disallow-code-generation-from-strings is not allowed in NODE_OPTIONS`\r\n\r\nSo its not possible to set  --disallow-code-generation-from-strings in NODE_OPTIONS var.\r\n\r\nIs this by design?\r\n\r\nThank you."},{"labels":["feature request","worker"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nI write program under linux, and I want to collect metrics (like cpu times, ctx switch, memory usage, ...) of the specified worker thread by the tid.\r\n\r\nIt seems impossible to get the statistics information provided by the os of the given thread by using a `worker.threadId`, and it is only make sense within the process.\r\n\r\nMaybe we could expose a new property to return the `tid` assigned by os, such as `worker.tid`?\r\n\r\nThen, we could hold the tid to get more stats under `/proc` or do something else meaningful.\r\n\r\n**Describe the solution you'd like**\r\n\r\nMake a system call (224) under linux is enough.\r\n\r\n```c\r\n#include <unistd.h>\r\n#include <sys/syscall.h>\r\n\r\nvoid *worker_thread()\r\n{\r\n  int tid = syscall(__NR_gettid);\r\n}\r\n```\r\n\r\nor `pthread_self()` (but this return a address, need some trick to pick the os level tid)"},{"labels":["dgram","feature request","wontfix"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI want to talk to `/dev/log` using unix sockets (ipc), but most linux flavors this is a socket of type SOCK_DGRAM\r\n\r\n**Describe the solution you'd like**\r\nplease make it possible to have ipc sockets of type DGRAM in node (now it is only of type SOCK_STREAM)\r\n\r\n**Describe alternatives you've considered**\r\nwe can use UDP, (we talk to syslog deamon listens on port 514 and listens on `/dev/log`) but we run the risk of messages being dropped when logging  in high loaded machines\r\n"},{"labels":["feature request","stream"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n## Is your feature request related to a problem? Please describe.\r\nThe Readable and Writable objects are not well encapsulated: I can inject data into a Readable stream by calling `Readable#push`, and I can read data from a Writable stream by monkey-patching `Writable#_read`.\r\n\r\nFurther, these interfaces are not symmetrical. If I want to make data available on a readable side, why not use the write API? This is how it works on every other application: If a client creates a TCP stream, there's one \"writable\" side, and one \"readable\" side; yet if I want to make both sides in the same process, I have to use a different API, for some reason.\r\n\r\n## Describe the solution you'd like\r\nthe Node.js stream library should include `DuplexPair` and `SimplexPair` objects, or equivalent factory functions.\r\n\r\n```javascript\r\ninterface SimplexPair {\r\n   Readable readable;\r\n   Writable writable;\r\n}\r\ninterface DuplexPair {\r\n   Duplex client;\r\n   Duplex server;\r\n}\r\n```\r\n\r\n### SimplexPair\r\n\r\nSimplexPair creates two different but related objects, one Readable and one Writable; anything written to the Writable side is made available on the Readable side. For encapsulation, the objects would not have public references to each other, and there would be no way to make data available on the readable side without access to the writable side.\r\n\r\n\r\n### DuplexPair\r\n\r\nDuplexPair is the same, but both sides are writable and readable.\r\n\r\n### PassThrough streams\r\n\r\nThis paradigm should not be new to Node.js developers; a PassThrough stream is just a special case of SimplexPair where both sides are exposed on a single Duplex object.\r\n\r\n### Transform streams\r\n\r\nTransform streams generate two pairs, and returns one from each:\r\n\r\n```javascript\r\nfunction ROT13Pair(){\r\n  const input = new SimplexPair;\r\n  const output = new SimplexPair;\r\n  input.readable.on('data', function(buf){\r\n    output.writable.write(buf.toString().replace(/[a-zA-Z]/g, function(c){\r\n      const d = c.charCodeAt(0) + 13;\r\n      return String.fromCharCode( ((c<=\"Z\")?90:122)>=d ? d : d-26 );\r\n    }));\r\n  });\r\n  return {\r\n    writable: input.writable,\r\n    readable: output.readable,\r\n  };\r\n}\r\nconst { writable, readable } = new ROT13Pair;\r\nprocess.stdin.pipe(writable);\r\nreadable.pipe(process.stdout);\r\n```\r\n\r\nThis pattern is repeatable to any level:\r\n```javascript\r\nfunction ROT26Pair(){\r\n  const input = new ROT13Pair;\r\n  const output = new ROT13Pair;\r\n  input.readable.pipe(output.writable);\r\n  return {\r\n    writable: input.writable,\r\n    readable: output.readable,\r\n  };\r\n}\r\nconst { writable, readable } = new ROT26Pair;\r\nprocess.stdin.pipe(writable);\r\nreadable.pipe(process.stdout);\r\n```\r\n... although I'm not sure how practical this particular example would be in production.\r\n\r\nI would bet this style could also result in a modest performance improvement, since much of the logic around buffering and flow control could be re-implemented."},{"labels":["crypto","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nWhen uploading a large file to Google Drive via Google Drive API, it is recommended to upload in chunks, so that sending can be resumed if transfer of a particular chunk fails ([Google API docs](https://developers.google.com/drive/api/v3/manage-uploads#resumable)).\r\n\r\nAfter transfer of each chunk, the API returns the MD5 hash of all data transferred to date (i.e. of all chunks up to and including the last one). NB This is not documented, but appears in an `x-range-md5` HTTP response header.\r\n\r\nIt would be useful to be able to verify that hash after transfer of each chunk, in order to know if a chunk has been corrupted in transmission. It would then be possible to transfer the chunk again.\r\n\r\nThis is not feasible to do in Node at present. You can verify the final hash after the very last chunk and make sure it matches for the entire file. That ensures data integrity. But if it doesn't match, you don't know which chunk of the file was corrupted, and have to start the upload again from the beginning (expensive when the file is 100GB!)\r\n\r\n**Describe the solution you'd like**\r\n\r\nSome way to calculate \"rolling\" hashes. i.e. call `hash.digest()` but then still be able to do further calls to `hash.update()` and call `hash.digest()` again.\r\n\r\nPossible ways to achieve this:\r\n\r\n1. Keep the internal state of the hash after call to `.digest()`, so it can be reused.\r\n2. Add a `hash.copy()` method which clones the hash so you can call `.digest()` on the clone, and still retain a \"live\" hash which you can continue to `.update()`.\r\n3. As (1) but only enable this feature if `crypto.createHash()` called with a `reuseable` option.\r\n\r\n@sam-github raised the possibility of a `.copy()` method in https://github.com/nodejs/node/issues/25857#issuecomment-459540310.\r\n\r\nHere's how that would work for my use case:\r\n\r\n```js\r\n// NB Simplified code\r\nconst CHUNK_SIZE = 256 * 1024; // 256 KiB\r\n\r\nasync function upload(path, size) {\r\n  const hash = crypto.createHash('md5');\r\n\r\n  for (const start = 0; start < size; start += CHUNK_SIZE) {\r\n    const end = start + CHUNK_SIZE - 1;\r\n    const stream = fs.createReadStream(path, {start, end})\r\n      .pipe(new stream.Transform({\r\n        transform(data, encoding, cb) {\r\n          hash.update(data);\r\n          this.push(data);\r\n          cb();\r\n        }\r\n      });\r\n\r\n    const md5FromApi = await transferChunkToGoogleDrive(stream, start, end);\r\n    const md5Actual = hash.copy().digest('hex');\r\n    if (md5FromApi !== md5Actual) {\r\n      // Rather than throwing, we could transfer last chunk again.\r\n      // This logic omitted to keep example short.\r\n      throw new Error(`Transfer failed on chunk ${start}-${end}`);\r\n    }\r\n}\r\n```\r\n\r\nThe `hash.copy()` call will no doubt have a performance penalty, but this is outweighed in this case by the cost of having to start an upload again from the beginning if the file is large.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nAn alternative is to use a JS implementation of MD5, where you can access the internal state of a hash and clone it. I suspect performance would be much worse than Node's native methods though."},{"labels":["feature request","fs","libuv"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThe `fs.watch()` File System method is handy and useful. Application and module developers are incented to use it for its advantages over `fs.watchFile()`. However, it is inconsistent across platforms, and the documentation states that it \"is unavailable in some situations.\"\r\n\r\nApplication developers lack a good way of knowing whether the API is even available, making it diffucult to write portable JavaScript code. The [documentation ](https://nodejs.org/api/fs.html#fs_availability) does a nice job of hitting some of the platforms and conditions, but it would be tedious for a developer to write logic around this, not to mention managing periodic updates as new conditions/platforms are added. \r\n\r\n\r\n**Describe the solution you'd like**\r\nI'd like for a new method to be available in `fs` to check whether `watch()` is available. That way, portable code can be written that \"falls back\" to `fs.watchFile()` if feasible. \r\n\r\nNot only would this enable portability, it would enable OS-specific conditions to be checked within the Node.js implementation. For example, the AIX implementation could check whether AHAFS is enabled. \r\n\r\nEven further, if the new `isWatchAvailable()` method could take a directory as a parameter, then its implementation could also check whether `fs.watch()` would function on objects within that directory (and therefore say \"no\" for SMB shares, etc). \r\n\r\n**Describe alternatives you've considered**\r\nImplementations could throw a specific Exception/Error if the platform doesn't support `fs.watch()`. However, it seems like the behavior is completely unspecified when the function is not available. \r\n\r\n"},{"labels":["feature request","tls","wontfix"],"text":"**Is your feature request related to a problem? Please describe.**\r\n\r\nI'm making TLS connections to various servers, and for both successful & failing connections I want to know whether the servers requested a client certificate.\r\n\r\nFor context: my app is an MITM proxy, and I want to be able to warn the downstream user when they might want to configure a client certificate.\r\n\r\n**Describe the solution you'd like**\r\n\r\nI'd like a way to know whether the server requested a client cert during the handshake. This is data that's received by node (or at least, by OpenSSL) alongside the initial hello, but it's not exposed in any way that I can see.\r\n\r\nThere's also probably other handshake metadata that would be interesting to expose too, which might be worth considering in future, but nothing that's immediately useful to me right this second.\r\n\r\nA `handshakeStarted` event on sockets that exposes the data received from the server for inspection would work, for example, or alternatively a `tlsSocket.clientCertificateRequested` boolean would be fine too (as long as its available regardless of subsequent errors).\r\n\r\n**Describe alternatives you've considered**\r\n\r\nAs far as I can tell, there's no way to do this right now other than manually collecting the entire TLS handshake data myself and parsing it from scratch in JS. That sounds like an major undertaking, and significant duplication of work since node is clearly parsing this data already.\r\n\r\nFor servers that outright reject connections without certificates it might be possible to infer the cause from the error details, but that's a limited case and not reliable. Discussed on SO too, with no useful result as yet: https://stackoverflow.com/questions/58283656/how-to-tell-if-a-tls-server-requested-a-client-certificate\r\n"},{"labels":["ES Modules","feature request"],"text":"<!--\r\nThank you for reporting a possible bug in Node.js.\r\n\r\nPlease fill in as much of the template below as you can.\r\n\r\nVersion: output of `node -v`\r\nPlatform: output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\nSubsystem: if known, please specify the affected core module name\r\n\r\nIf possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **Version**: 12.11.1\r\n* **Platform**: Windows 10\r\n* **Subsystem**: ES modules\r\n\r\nFrom https://github.com/eslint/eslint/pull/12333\r\n\r\nRepro https://github.com/mysticatea/import-cjs-issue\r\n\r\n### Description\r\n\r\nI tried to import packages without import cache. From the document, it looks I should use query strings.\r\n\r\n```js\r\n    await import(\"x-esm\") //→ Found as expected\r\n    await import(\"./node_modules/x-esm/index.js?q=0\") //→ Found and `x-esm` re-ran as expected\r\n    await import(\"./node_modules/x-esm/index.js?q=1\") //→ Found and `x-esm` re-ran as expected\r\n```\r\n\r\n`x-esm` is an ES module package. It worked as expected.\r\n\r\n```js\r\n    const cjs = await import(\"x-cjs\") //→ Found as expected\r\n    const cjs0 = await import(\"./node_modules/x-cjs/index.js?q=0\") //→ Found but `x-cjs` didn't re-run\r\n    const cjs1 = await import(\"./node_modules/x-cjs/index.js?q=1\") //→ Found but `x-cjs` didn't re-run\r\n    console.log(cjs === cjs0, cjs === cjs1, cjs0 === cjs1) //→ all are false but `x-cjs` didn't run three times\r\n```\r\n\r\n`x-cjs` is a CJS package. The result was odd. The `console.log()` in `x-cjs` package ran only one time, but the returned values are different for each query string.\r\n\r\nI found the entry of `x-cjs` in `require.cache`. However, the cache entry is odd as well. It's different from `require(\"x-cjs\")`, the entry doesn't have `parent` property and the `module.children` of `test.js` is still empty.\r\n\r\nAnyway, I tried to remove the cache entry.\r\n\r\n```js\r\n    console.log(\"---- remove 'require.cache' ----\")\r\n    delete require.cache[require.resolve(\"x-cjs\")]\r\n    await import(\"x-cjs\") //→ Found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=0\") //→ Found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=1\") //→ Found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=2\") //→ Found and `x-cjs` re-ran as expected\r\n    await import(\"./node_modules/x-cjs/index.js?q=3\") //→ Found but `x-cjs` didn't re-run\r\n```\r\n\r\nCryptic. I guess this behavior is:\r\n\r\n- `import(cjs)` has cache apart from `require.cache`.\r\n- The `import(cjs)` cache is created from `require.cache`.\r\n- It runs CJS package only if `require.cache` entry was not found.\r\n- The `import(cjs)` cache is not removed even if `require.cache` entry deleted.\r\n\r\nTherefore, I have to do the following steps if I want to import packages without cache.\r\n\r\n1. Find the main file of the package because I cannot put query strings to the package name.\r\n   ```js\r\n   const url = \"file:\" + require.resolve(packageName) + uniqueQueryString;\r\n   ```\r\n1. Import it.\r\n   ```js\r\n   const ret = await import(url);\r\n   ```\r\n1. Delete `require.cache` entry.\r\n   ```js\r\n   delete require.cache[require.resolve(packageName)];\r\n   ```\r\n\r\n### Questions\r\n\r\n1. Is it intentional behavior that `import(cjs)` creates incomplete `require.cache` entries?\r\n1. If yes, is it intentional behavior that `import(cjs)` with query strings returns different objects for the same CJS package?\r\n\r\nI'm guessing that `import(cjs)` should not create any `require.cache` entries, and `import(cjs)` with query strings re-runs CJS packages as same as ES packages."},{"labels":["feature request","repl"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI am trying to extend the Node REPL with some extra functionality, so I'd like to use a custom evaluation function to short-circuit the default evaluation *but* have that custom function be able to defer control back to the default evaluation if need be.\r\n**Describe the solution you'd like**\r\nRight now calling the callback that is passed in to the custom evaluation function just returns. I'd like to be able to access the [default eval function](https://github.com/nodejs/node/blob/master/lib/repl.js#L281) from the custom evaluation function so I can parse the shell input for my special commands, but if it doesn't match, then have it behave as if it didn't have a custom evaluation function at all. Maybe a reference to that function can go inside the context? \r\n\r\n**Describe alternatives you've considered**\r\nForking, not using a custom eval function at all (so much more work!). Perhaps I'm missing how to access the function but it's possible already, in which case, apologies!"},{"labels":["crypto","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nThere is no API to obtain a random integer within a range. It's a common enough problem to deal with (e.g. to implement other algorithms like [Fisher–Yates shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)) and [easy to get wrong](https://stackoverflow.com/questions/10984974/why-do-people-say-there-is-modulo-bias-when-using-a-random-number-generator). Most other runtimes/languages implement this in their standard library.\r\n\r\n**Describe the solution you'd like**\r\n\r\n```javascript\r\n// something like:\r\nconst randomInt = require('crypto').randomInt\r\n\r\nconst min = 0\r\nconst max = 10\r\nrandomInt(min, max, cb)\r\n```\r\n\r\n**Describe alternatives you've considered**\r\n\r\nI'm not sure about the internal implementation but I gave it a stab here: https://github.com/olalonde/crypto-range. http://www.pcg-random.org/posts/bounded-rands.html has a nice overview of different techniques (my implementation is probably not the most efficient)."},{"labels":["feature request","tls"],"text":"* **Version**: v12.10.0\r\n* **Platform**: Linux birch 4.15.0-1044-aws #46-Ubuntu SMP Thu Jul 4 13:38:28 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n* **Subsystem**: tls or crypto\r\n\r\nWhen calling ```socket.renegotiate({requestCert: true, rejectUnauthorized: true}, cbFunc)```, the client certificate is verified against the trusted certs passed to the ```ca``` option of ```https.createServer()```.  This process fails if the entire chain cannot be verified to a self-signed certificate (i.e. a root cert), with ```socket.authorizationError``` set to ```UNABLE_TO_GET_ISSUER_CERT```.  I suspect this is a problem even without trying to use renegotiation.\r\n\r\nHere's why this is a problem:  my employer has about 3 million users with smartcards, each of which has 3-4 user certificates - one for email encryption, one for identity proofing, one for digital signatures, etc.  These certificates are issued by different intermediate CAs, but the intermediate CA certificates are issued by a single root CA.  \r\n\r\nWhen the https.server requests a client cert, it passes the DN of all trusted CAs to the client.  If the root CA is included, then the browser will prompt the user to select which certificate to send, which will be all available certs on the smartcard (ID, email, and signature), and the user will often pick the \"wrong\" cert.\r\n\r\nAlternatively, if only the desired intermediate CAs are trusted (the ID CA, say), then the user will only be presented the single user-certificate that was issued by that CA, but verification will fail, presumably because the trusted intermediate CA cert cannot be verified up to a self-signed root.\r\n\r\nI think this is actually a limitation in ``SSL_get_verify_result()`` - that it only accepts self-signed certs as trust anchors - which doesn't align with RFC 5280, which says \"The selection of a trust anchor is a matter of policy: it could be  the top CA in a hierarchical PKI, the CA that issued the verifier's own certificate(s), or any other CA in a network PKI.\"\r\n\r\nAlternatively, is there a way to limit the list of allowable CAs presented in the requestClientCert message to a subset of the trusted CAs?"},{"labels":["buffer","feature request"],"text":"<!--\r\nThank you for suggesting an idea to make Node.js better.\r\n\r\nPlease fill in as much of the template below as you're able.\r\n-->\r\n\r\nOpening a can of worms, I suspect, or else rehashing an idea that's already been considered and rejected, but hoping not....\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nBuffer constructor has been deprecated since v6.0.0. Tons of code in the ecosystem still uses it though and that's seemingly never going to change. In an attempt to support the new APIs in both old and new versions of Node.js, packages like https://www.npmjs.com/package/safe-buffer have been introduced. But there's still a ton of Buffer constructor stuff out there.\r\n\r\n**Describe the solution you'd like**\r\nPlease describe the desired behavior.\r\n\r\nIn current versions of Node.js, `new Buffer(num)` is zero-filled. So, the issue with revealing leftover memory contents is mitigated. However, there are still issues around getting an unexpected input type (e.g., number when you expect a string). With the newer APIs, `Buffer.from()` cannot get a number and `Buffer.alloc()` cannot get a string. A `TypeError` is thrown if that happens.\r\n\r\nInstead of trying to get older packages to use `safe-buffer`, which means adding a dependency and rewriting some code that may be using the `Buffer` constructor in a perfectly safe way, it may be more palatable to add an `options` argument to `Buffer` constructor allowing the programmer to identify the expected type. So, for example, `new Buffer(50, { expect: 'number' });` would be fine, but `new Buffer('abc', { expect: 'number' });` would throw. (Obviously, there's bike-shedding to be done on the property name and accepted values. I'm just trying to verify the basic concept with this issue.)\r\n\r\nThe main advantage this has to other approaches possible now is that it can be added to code that runs old versions of Node.js harmlessly. The option will be ignored in that case. No need to add a dependency or change any other lines of code. I'm (naively?) optimistic that some package maintainers who have been resistant to `safe-buffer` or simply moving to `Buffer.from()`/`Buffer.alloc()` might look more positively on changing their code to use the option on the grounds that it improves security for people running newer versions of Node.js without impacting older versions (the way a switch to `Buffer.from()`/`Buffer.alloc()` would), without adding dependencies they didn't need before, and so on. It's purely additive and a security win. Sure, people running Node.js 0.10.x won't get any additional protection but they'll be no worse off and it should be easier with this for module maintainers to use the new API feature while maintaining backward compatibility.\r\n\r\nBiggest disadvantage I can think of now is more API surface-area to maintain and multiple ways to do the same thing. FWIW, I guess if I could go back in time, this is probably what I'd propose instead of `Buffer.from()`/`Buffer.alloc()`. Was this already considered and rejected at some point? Am I being too optimistic? \r\n\r\nWould be interested in opinions from prolific module maintainers who were greatly inconvenienced when Node.js 7.0.0 went out with a runtime deprecation warning for `Buffer` constructor. I'm not proposing putting a deprecation like that back here, but I want to know if they'd be more likely to accept PRs with this API than they are for PRs that use `safe-buffer` or PRs that switch to `Buffer.from()`/`Buffer.alloc()`. Or not really because some folks have scores or even hundreds of modules that might be subject to these kinds of updates and merging+publishing would be time-consuming and people have other priorities? /ping @substack @mafintosh @feross (who, yes, I know writes/maintains `safe-buffer`)\r\n\r\n**Describe alternatives you've considered**\r\nPlease describe alternative solutions or features you have considered.\r\n\r\nDoing nothing is the primary alternative."},{"labels":["console","feature request"],"text":"Node's console currently supports a number of formatters, [`s, j, d, o, O, i, f`](https://github.com/nodejs/node/blob/908292cf1f551c614a733d858528ffb13fb3a524/lib/internal/util/inspect.js#L1433-L1584).  However, it doesn't support `%c`:\r\n\r\n```\r\n> console.log('%cHello World', 'color:green; background:yellow;')\r\n%cHello World color:green; background:yellow;\r\n```\r\n\r\nThe same code in Safari, Firefox, and Chrome does this:\r\n\r\n<img width=\"1225\" alt=\"Screen Shot 2019-09-18 at 3 55 58 PM\" src=\"https://user-images.githubusercontent.com/427398/65181697-9df56780-da2d-11e9-9867-4c0f172f3ec8.png\">\r\n\r\nThe [Console spec doesn't give a ton of help on what `%c` should do](https://console.spec.whatwg.org/#formatter), other than to say that it \"Applies provided CSS.\"\r\n\r\nObviously there are aspects of this that don't make sense in the terminal vs. a browser, but perhaps some of it does?  It would be nice if node's `console` could do more than ignore `%c`.\r\n\r\nApologies if this has come up in the past and been rejected.  I wasn't able to find a previous discussion."},{"labels":["feature request"],"text":"**Problem**\r\n\r\n`python3` has possibility running following construct:\r\n```\r\nfrom datetime import datetime\r\nprint({'timestamp':str(int(datetime.utcnow().timestamp() * (10**9)))})\r\n```\r\n\r\nThat would output JSON-like structore: `{'timestamp': '1567658264143923968'}`\r\n\r\nNow I want to get similar result in Node.JS 12.\r\n\r\n- I need a string\r\n- I need UTC stamp since 1970, but not since machine boot\r\n- Error no more than last 4 digits (microseconds precision or better)\r\n\r\n---\r\n**Possible solution**\r\n\r\n- WinAPI has `GetSystemTimePreciseAsFileTime`\r\n- *nix has `clock_gettime(CLOCK_MONOTONIC)`\r\n\r\nbot are os-stuff and has to be exposed through this module like `os.get_utc_time()`, in a single unified function, that returns corresponding bigint. that's superobvious and supersimple to implement\r\n\r\n---\r\n**Alternatives you've considered**\r\n\r\n- Date.now()+\"000000\" shows that it lacks last 6 digits (millis), but the task was 4 (micros or better)\r\n\r\n- `process.hrtime.bigint()` returns machine uptime, not UTC-1970"},{"labels":["feature request","wontfix"],"text":"> **Is your feature request related to a problem? Please describe.**\r\n\r\nNodeJS is close being the perfect swiss army knife of zero-admin deployable microservices and applications.\r\nThe only thing missing is a built-in database.\r\n\r\n> **Describe the solution you'd like**\r\n\r\nAdopting SQLite.h/.c and exposing it to JS will result in NodeJS being the best \"batteries included\" environment ever.\r\n\r\n> **Describe alternatives you've considered**\r\n\r\nEncrypted versions of SQLite could be considered. At a later time.\r\nAnd, no. node-gyp is not an option.\r\n\r\n\r\nR.\r\n"},{"labels":["crypto","duplicate","feature request"],"text":"**Is your feature request related to a problem? Please describe.**\r\nI would like to parse an x509 certificate to be able to show its fingerprint to the user. Most NPM packages that parse certificates have failing npm install on Windows due to build issues w.r.t. different versions of OpenSSL.   \r\n\r\n**Describe the solution you'd like**\r\nThe node TLS module already has a Certificate interface that contains everything I need. I just need it to be a class so that I can also load a given certificate string into it instead of just getting this interface from the TLS connection.\r\n\r\nIt would seem that the node implementation already has certificate parsing available internally.\r\n\r\n**Describe alternatives you've considered**\r\nNPM packages x509 (doesn't build),  x509.js  (contains crypto library in github repo),  x509-ts (un-finished),  various forks of x509 \r\n\r\n"},{"labels":["dgram","feature request","wontfix"],"text":"# Background\r\n1. The best way to write to syslog on macOS and Linux is to use Unix-sockets\r\n2. syslog sockets are /dev/log for Linux and /var/run/syslog on macOS. In the default configuration on on both OSs, sockets are udp only\r\n# Issue\r\n3. unix.createSocket('unix_dgram'… was removed from Node.js around 2011 due to some peculiar Windows-based reasoning\r\n4. Therefore, use of datagram-Unix-sockets now requires native C++ code\r\n5. For people that make single-file self-contained executable using Node.js, native modules is problems and often do not upgrade as new Node.js releases become available\r\n6. The bigger issue is why can I not use any c/POSIX call without native code? That drawback will push people to golang that has a better story. One could think of an api descriptor object in ECMAScript covering simpler cases that throws on invocation when any argument does not match up\r\n7. Like us Noders don't have ping either\r\n8. Node 12 changes everything. It's a great time to right old wrongs\r\n\r\n**Describe the solution you'd like**\r\n9. An immediate solution is to put Unix-socket unix_dgram back into vanilla Node.js\r\n\r\n**Describe alternatives you've considered**\r\n10. Right now I use the node-unix-dgram package containing the former Node.js code\r\n"},{"labels":["feature request","tls"],"text":"Problem:\r\nThe requests I make from `https.request` do not send the `Extension: status_request` in the Client Hello at the TLS level. The resource i'm trying to reach is behind a WAF that checks the integrity of the TLS request. As a result, I am being firewalled and thus, cannot access the API.\r\n\r\nAs seen on [this stack overflow topic](https://stackoverflow.com/questions/57436880/true-difference-between-httprequest-and-xmlhttprequest), the Node request does not include `Extension: status_request` as curl and Firefox do.\r\nWith further research, I found this [Wikipedia: OCSP_stapling](https://en.m.wikipedia.org/wiki/OCSP_stapling) article, in the `Solution` section :\r\n> the TLS client must explicitly include a Certificate Status Request extension in its ClientHello TLS/SSL handshake message\r\n\r\nRequest with Firefox : \r\n![image](https://user-images.githubusercontent.com/8834915/63751313-63296500-c8af-11e9-8236-ab92d93f3332.png)\r\nRequest with Curl : \r\n![image](https://user-images.githubusercontent.com/8834915/63751348-76d4cb80-c8af-11e9-8e9c-ecb54835045f.png)\r\nRequest with Node : \r\n![image](https://user-images.githubusercontent.com/8834915/63751365-805e3380-c8af-11e9-896c-abea64891545.png)\r\n\r\nThanks for reading me.\r\n"},{"labels":["kind/feature","sig/architecture","sig/cli","sig/scalability","sig/storage","sig/usability"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nUsing existing configMap or secrete keys create a new environment variable using multiple keys from configMap or environment variable.\r\n\r\nExample:\r\n\r\nenv:\r\n- name: SEVERHOST_PORT\r\n  valueFrom:\r\n    configMapRef:\r\n      key: SERVER_HOST_NAME:SERVER_HOST_PORT\r\n      name: db-server-details\r\n\r\nlike this, it should give me **SEVERHOST_PORT=demosever.demodomain.com:7744**\r\n\r\n**Why is this needed**:\r\nWe wanted a minimum object of Kubernetes to be created over cluster if above is possible then we can pass data to multiple applications whichever format they needed, like above is key3_data=key1_data=key2_data. (So we will have one object serving multiple applications) Here colon can be any separator, for us currently : (colon is required) but if we can make it for any character useful for all users.\r\n\r\nMy idea is allowing a user to pass it as an array-like \r\n    key: [$SERVER_HOST_NAME\":\"$SERVER_HOST_PORT]\r\n\r\nI hope the above idea/ requirement makes sense.\r\n"},{"labels":["kind/feature","sig/node"],"text":"\r\n**What would you like to be added**:\r\nA NodeDeletion admission plugin rejects node deletion request when the node is still ready.\r\n\r\n\r\n**Why is this needed**:\r\nIf a ready node is deleted, pod gc controller will delete pods scheduled on the node immediately and forcely with zero grace period. \r\n- This behaviour may have a bad effect on running pods because business processes are killed forcely.\r\n- If many nodes are deleted by mistake,  pods will be deleted immediately unexpectly\r\n\r\n\r\nThe expected way node leaves a cluster should be 1. Stop kubelet 2. Delete node. If node is already deleted but kubelet is still running, it will fall in loop of heartbeat and fail, which may cause resource leak. Besides If kubelet is restarted unexpectedly, node objected will be recreated. So this admission plugin is proposed.\r\n\r\n\r\n/sig node\r\n/sig apimachinery\r\n/help\r\n"},{"labels":["kind/feature","sig/auth"],"text":"Just writing down some thoughts from the [June 24th, 2020 sig-auth meeting](https://www.youtube.com/watch?v=Phco26zYEYs).\r\n\r\nThe kube API server supports generic authentication mechanisms via the aggregator front proxy (this proxy performs the actual authentication and then uses mTLS+headers to assert the desired identity to the API server).  As expected, this mechanism can be used to support Kerberos, request signing, SAML, etc.  The kubelet does not support this functionality today, but it would be easy to add this support to it since it uses the same code as the kube API server.\r\n\r\nOn the server side, we have a pretty reasonable story.  The only \"small\" enchantment I can think of here is that it would interesting if the `TokenReview` API supported passing in the request info attributes (i.e. same info as `authorizer.Attributes`) along with the token and audiences (any token based caching would need to take into account if these request attributes were used to authenticate a request).  This change would make it possible to have token based request signing (i.e. a client could create a bearer token by signing the request info, a timestamp, etc and a token review webhook would map that signature back to a `user.Info` along with validating that the request info matches).  There were some conversations back a little while ago about having a combined `TokenReview` and `SubjectAccessReview` API for use by the kubelet to do remote authn/z.  If such an API was implemented by a webhook in a single remote call, the endpoint could perform validation of the token while taking into account the SAR info.  This would effectively allow for request signing.\r\n\r\nOn the client side, we do not have a good story.  The `exec` credential plugin mechanism is not designed for this purpose.  In particular, client-go expects to cache the credential until it expires or the process exits (the API is designed around this).  The request information is not passed to the `exec` plugin.  Calling an external process per request also seems like a bad idea.  In general, it is impossible (today) to use the `exec` plugin mechanism in an attempt to support request signing.\r\n\r\nIt may be possible to use a client side proxy to support request signing (and other methods such as https://github.com/kubernetes/enhancements/pull/1749) with client-go.  The UX around such a proxy is likely to be problematic (the most obvious being lifetime management of the proxy and configuring the proxy to use the correct CA to validate the connection with the server).  Some kind of request offloading / proxy approach on the client side seems like the best long term approach as it handles all future needs instead of being limited to token/cert based auth.\r\n\r\n/kind feature\r\n\r\n@kubernetes/sig-auth-feature-requests @micahhausler "},{"labels":["kind/feature","sig/cli"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nadd --list option to kubectl annotate command\r\n\r\n**Why is this needed**:\r\nlike kubectl label command，show annotations quickly"},{"labels":["kind/feature","sig/network","triage/unresolved"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nThe ebtables utility in  https://github.com/kubernetes/kubernetes/blob/master/pkg/util/ebtables/ebtables.go is missing 3 useful features:\r\n\r\n- `DeleteRule` method in its Interface\r\n- `broute` table\r\n- `brouting` chain\r\n\r\n**Why is this needed**:\r\n\r\nThe missing features are useful to allow for: \r\n- rule deletion as there is a way to add (ensure) a rule but not removing it currently. \r\n- manipulating the broute table and brouting chain\r\n\r\nThe first feature would also align ebtables with iptables, as a DeleteRule method is available there."},{"labels":["kind/feature","needs-sig"],"text":"**What would you like to be added**:\r\n\r\nFor now, storage transformer plugin [envelope](https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apiserver/pkg/storage/value/encrypt/envelope/grpc_service.go) can only work with a localhost KMS plugin. \r\nWe want to deploy the KMS plugin as a remote service on several SGX node(s) to ensure the memory safety, then storage transformer plugin envelope should enable invoke remote KMS plugin service.\r\n\r\nIs there any reasons that KMS plugin must be as a local service instead of a remote service? If not, I would like to post a PR to enable this feature.\r\n\r\n**Why is this needed**:\r\n\r\nKMS plugin may be deployed as a remote service on several SGX node(s), SGX node does not meet API Server performance requirement, so that API Server and KMS plugin are independent deployment and run on different nodes. In this scene, storage transformer plugin envelope should enable to use remote gRPC with TLS(or other auth methods) to call remote KMS plugin."},{"labels":["kind/feature","needs-sig"],"text":"<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\n\r\nThis issue is to track validation of unsupported logging flags for component-base.\r\n\r\n**What you expected to happen**:\r\nref: https://github.com/kubernetes/kubernetes/pull/91532#discussion_r443556847\r\nref: https://github.com/kubernetes/kubernetes/pull/92177#discussion_r442920887\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g: `cat /etc/os-release`):\r\n- Kernel (e.g. `uname -a`):\r\n- Install tools:\r\n- Network plugin and version (if this is a network-related bug):\r\n- Others:\r\n"},{"labels":["kind/feature","sig/scheduling"],"text":"We have a number of benchmarks set up as [integration tests](https://github.com/kubernetes/kubernetes/blob/master/test/integration/scheduler_perf/config/performance-config.yaml). Those benchmarks are valuable for development since one can run them locally. \r\n\r\nWe also have benchmarks running on full (e.g., gce-5000Nodes) and kubemark (e.g., kubemark-5000Nodes) clusters continuously and the results are tracked on the [perf-dash](http://perf-dash.k8s.io/#/?jobname=kubemark-500Nodes&metriccategoryname=Scheduler&metricname=SchedulingThroughput) dashboard maintained by the scalability sig. Those benchmarks run for various cluster sizes but for the same vanilla workload.\r\n\r\nWhat we want is to have some of the benchmarks we developed in integration tests to run as part of the perf-dash set. Specifically, we can start with the following ones as kubemark benchmarks (full clusters are expensive to setup, so kubemark is less expensive but should be good enough for now):\r\n\r\n- SchedulingPodAntiAffinity\r\n- SchedulingPodAffinity\r\n- SchedulingPreferredPodAffinity\r\n- SchedulingPreferredPodAntiAffinity\r\n- SchedulingNodeAffinity\r\n- TopologySpreading\r\n- PreferredTopologySpreading\r\n- MixedSchedulingBasePod\r\n\r\n/sig scheduling\r\n/assign @adtac"},{"labels":["area/kubeadm","kind/feature","sig/cluster-lifecycle"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nWhen initializing a cluster using kubeadm, don't set `--allow-privileged=true` in the generated kube-apiserver.yaml\r\n\r\n**Why is this needed**:\r\nAccording to the documentation, [the default value for `--allow-privileged` flag of apiserver is false](https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/).\r\n\r\nBut when you use kubeadm to initialize your cluster, it explicitly sets `--allow-privileged=true` in the generated kube-apiserver.yaml.\r\n\r\nPeople should check and be aware of the settings in the configs of their own cluster, but this is a little surprising given that the documented default is false.\r\n\r\nI am proposing that kubeadm should choose the more secure default (false) and require people to explicitly enable --allow-privileged on their cluster if they want it.\r\n\r\n---\r\n\r\nI made an initial (simple) attempt at this with https://github.com/kubernetes/kubernetes/pull/92381, but soon discovered that kind depends on kubeadm init setting --allow-privileged=true, which is needed for kind to work.  Please be aware that changing this might require some coordination with the [kind repo](https://github.com/kubernetes-sigs/kind) to make sure it is still able to init a cluster with allow-privileges=true.\r\n\r\nMaybe a flag could be added to kubeadm init that would like kind (or others) request this setting if they really want it, but it should be an opt-in thing."},{"labels":["kind/feature","sig/cli"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nIf possible, it would be great to have `kubectl config current-context` performance be improved.\r\n\r\n**Why is this needed**:\r\nI sometimes do commands thinking my context is one thing, but end up modifying a cluster I didn't intend to. To help avoid this, I changed my shell prompt to print out my kubectl context. But since the command is slow, every command I run in my shell causes a few hundred ms delay before I see the prompt again."},{"labels":["kind/feature","sig/cluster-lifecycle"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nin my cluster ,coredns have be oomkilled many times\r\nk8s: 1.15.4\r\npod: 1000\r\nnode: 10\r\n\r\n**Why is this needed**:\r\nfor now, I change the memory limit by `kubectl -n kube-system  edit deployments coredns`\r\nbut if there is a way to change coredns memory, it will be good for me to install a new cluseter\r\n\r\nand i find there is a env dns_memory_limit :https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/dns/coredns/coredns.yaml.in#L125\r\nbut kubeadm hard code to 170Mi\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cmd/kubeadm/app/phases/addons/dns/manifests.go#L59"},{"labels":["area/app-lifecycle","area/kubelet","kind/feature","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nI would like that pods spun with a Guaranteed QoS class stay in this QoS class for their entire lifecycle, including when they are terminating. Or, at least, I would like to have a mechanism to force this. Currently, this is not the case and, right before terminating a pod, Kubernetes ~~changes the QoS class from Guaranteed to Burstable (in my tests)~~ resets the cgroup cpuset of the pod; allowing Guaranteed pods to be scheduled on `SystemReserved` resources.\r\n\r\n**Why is this needed**:\r\n\r\nOne use of the Guaranteed QoS class is to deploy those pods, that are resource hogs, not in `SystemReserved` resources (e.g., a cpuset). However, changing the ~~QoS class~~ cgroup cpuset of these pods allows them to be scheduled on these `SystemReserved` resources for the time needed to shutdown the pods. A time that, in some cases, amounts to 10+ seconds.\r\n\r\nI believe that this behavior isn't documented, nor it's intuitive. Or at least it wasn't for me.\r\n\r\n**Current workaround**:\r\n\r\nSo far, the only workaround I've found (see the example that follows) to minimize the effect of this behavior is to use the lifecycle `preStop` hook to kill the hogging processes inside the containers before the pod QoS class gets changed:\r\n\r\n``` yaml\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: stress-deployment\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: stress\r\n  replicas:  1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: stress\r\n    spec:\r\n      containers:\r\n      - name: stress\r\n        image: progrium/stress\r\n        args: [\"-c\", \"15\"]\r\n        resources:\r\n          limits:\r\n            cpu: 10\r\n            memory: \"1024Mi\"\r\n        lifecycle:\r\n          preStop:\r\n            exec: # Workaround\r\n              command: [\"/bin/bash\",\"-c\",\"while pkill stress; do sleep 1; done\"]\r\n```\r\n\r\n/area kubelet\r\n/area app-lifecycle \r\n/sig node"},{"labels":["area/code-organization","kind/cleanup","kind/feature","sig/network"],"text":"**What would you like to be added**:\r\n\r\nCould you please move pkg/proxy to k8s.io/kube-proxy as an individual module?\r\n\r\n**Why is this needed**:\r\n\r\nSome CNIs would like to implement their own kube-proxy like component to gain more performance and thus would like to reuse kube-proxy code.  e.g. https://github.com/vmware-tanzu/antrea/pull/772 ."},{"labels":["area/provider/aws","kind/feature","sig/cloud-provider"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n/sig aws\r\n/kind feature\r\n**What would you like to be added**:\r\nAdditional  annotations for configuring the AWS NLB health checks\r\n**Why is this needed**:\r\nCurrently, the health check for AWS NLB uses default values and not configurable. Support additional service annotations to specify the protocol, path, port for the AWS NLB health checks.\r\n"},{"labels":["good first issue","help wanted","kind/feature","priority/important-soon","sig/testing"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nWe should come up with a better name for `NodeImageWhiteList`:\r\nhttps://github.com/kubernetes/kubernetes/blob/403716626d126c850c233a85977de0e6ce60d8ec/test/e2e_node/image_list.go#L46-L48\r\n\r\n**Why is this needed**:\r\nFrom #90277\r\n\r\n> Associating \"white\" with good/allowed and \"black\" with bad/disallowed cannot be disentangled from systemic racism. In contrast, allowlist and denylist exactly and merely describe the functions of these fields and variables.\r\n\r\n/sig testing\r\n/priority important-soon\r\n/cleanup\r\n/help\r\n/good-first-issue"},{"labels":["kind/feature","lifecycle/active","priority/important-soon","sig/testing"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nWe should come up with a better name for `CommonImageWhiteList`:\r\nhttps://github.com/kubernetes/kubernetes/blob/403716626d126c850c233a85977de0e6ce60d8ec/test/e2e/common/util.go#L60-L64\r\n\r\n**Why is this needed**:\r\nFrom #90277\r\n\r\n> Associating \"white\" with good/allowed and \"black\" with bad/disallowed cannot be disentangled from systemic racism. In contrast, allowlist and denylist exactly and merely describe the functions of these fields and variables.\r\n\r\n/sig testing\r\n/priority important-soon\r\n/cleanup\r\n/help\r\n/good-first-issue"},{"labels":["kind/feature","lifecycle/active","priority/important-soon","sig/testing"],"text":"Similar to https://github.com/kubernetes/kubernetes/issues/90277 we should switch up from \"WhiteList\" to \"AllowList\" in the e2e framework.\r\n\r\n**What would you like to be added**:\r\nWithin the e2e framework, there is a definition of a set of images to be used for a test suite:\r\nhttps://github.com/kubernetes/kubernetes/blob/403716626d126c850c233a85977de0e6ce60d8ec/test/e2e/framework/pods.go#L60-L63\r\n\r\nWe should rename this to `AllowList` here and in all other places where it is used:\r\n```\r\n$ grep -nr ImageWhiteList\r\ne2e/framework/pods.go:60:// ImageWhiteList is the images used in the current test suite. It should be initialized in test suite and\r\ne2e/framework/pods.go:63:var ImageWhiteList sets.String\r\ne2e/framework/pods.go:190:\t\tgomega.Expect(ImageWhiteList.Has(c.Image)).To(gomega.BeTrue(), \"Image %q is not in the white list, consider adding it to CommonImageWhiteList in test/e2e/common/util.go or NodeImageWhiteList in test/e2e_node/image_list.go\", c.Image)\r\ne2e/common/runtime.go:268:\t\t\t// Images used for ConformanceContainer are not added into NodeImageWhiteList, because this test is\r\ne2e/common/util.go:60:// CommonImageWhiteList is the list of images used in common test. These images should be prepulled\r\ne2e/common/util.go:64:var CommonImageWhiteList = sets.NewString(\r\ne2e_node/runtime_conformance_test.go:51:\t\t\t// The following images are not added into NodeImageWhiteList, because this test is\r\ne2e_node/image_list.go:46:// NodeImageWhiteList is a list of images used in node e2e test. These images will be prepulled\r\ne2e_node/image_list.go:48:var NodeImageWhiteList = sets.NewString(\r\ne2e_node/image_list.go:64:// updateImageAllowList updates the framework.ImageWhiteList with\r\ne2e_node/image_list.go:69:\t// Union NodeImageWhiteList and CommonImageWhiteList into the framework image white list.\r\ne2e_node/image_list.go:70:\tframework.ImageWhiteList = NodeImageWhiteList.Union(commontest.CommonImageWhiteList)\r\ne2e_node/image_list.go:72:\tframework.ImageWhiteList.Insert(getNodeProblemDetectorImage())\r\ne2e_node/image_list.go:73:\tframework.ImageWhiteList.Insert(getSRIOVDevicePluginImage())\r\ne2e_node/image_list.go:152:\timages := framework.ImageWhiteList.List()\r\n```\r\n\r\n**Why is this needed**:\r\nFrom https://github.com/kubernetes/kubernetes/issues/90277\r\n\r\n> Associating \"white\" with good/allowed and \"black\" with bad/disallowed cannot be disentangled from systemic racism. In contrast, allowlist and denylist exactly and merely describe the functions of these fields and variables.\r\n\r\n/sig testing\r\n/priority important-soon\r\n/cleanup"},{"labels":["kind/feature","sig/storage"],"text":"**What would you like to be added**:\r\n@kubernetes/sig-storage-feature-requests \r\n/sig storage\r\n\r\nBetter resource management for iops of devices.\r\nIn some senarios, we need to limit PV's iops limit or Pod iops on a device or volum.\r\n\r\nDocker provides blkio related params in `docker run` to limit a device's iops and bps. https://docs.docker.com/engine/reference/run/#block-io-bandwidth-blkio-constraint\r\n\r\nCurrent PR in #92068 is cherry pick of #70980 \r\nThis PR tried to add annotation named io.kubernetes.container.blkio in Pod spec： \r\n`io.kubernetes.container.blkio: '{\"weight\":200,\"weight_device\":[{\"device\":\"rootfs\",\"value\":\"200k\"}],\"device_read_bps\":[{\"device\":\"/dev/sda1\",\"value\":\"20m\"}],\"device_write_bps\":[{\"device\":\"rootfs\",\"value\":\"20m\"}],\"device_read_iops\":[{\"device\":\"rootfs\",\"value\":\"200\"}]\"device_write_iops\":[{\"device\":\"rootfs\",\"value\":\"300\"}]}'\r\n`\r\nDocker will use below params to limit device iops.\r\n```\r\n      --device-read-bps value       Limit read rate (bytes per second) from a device (default [])\r\n      --device-read-iops value      Limit read rate (IO per second) from a device (default [])\r\n      --device-write-bps value      Limit write rate (bytes per second) to a device (default [])\r\n      --device-write-iops value     Limit write rate (IO per second) to a device (default [])\r\n```\r\n\r\n\r\nHowever it is not a good design in K8S, device is managed by kubelet and pod spec is managed by application user who may not know the device name.  Another propersal would be iops in PVC or Pod Volume like below\r\n\r\n1. add iops in capacity/request of PV/PVC\r\n\r\nPV's iops limitation is the capacity of the volume.\r\nPVC is similar. We can use PVC's iops request as the iops limit.\r\n```\r\napiVersion: v1\r\nkind: PersistentVolume\r\nmetadata:\r\n  name: block-pv\r\nspec:\r\n  capacity:\r\n    storage: 10Gi\r\n    iops： 500\r\n  accessModes:\r\n    - ReadWriteOnce\r\n  volumeMode: Block\r\n  persistentVolumeReclaimPolicy: Retain\r\n  fc:\r\n    targetWWNs: [\"50060e801049cfd1\"]\r\n    lun: 0\r\n    readOnly: false\r\n---\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  name: myclaim\r\nspec:\r\n  accessModes:\r\n    - ReadWriteOnce\r\n  volumeMode: Filesystem\r\n  resources:\r\n    requests:\r\n      storage: 8Gi\r\n      iops: 500\r\n  storageClassName: slow\r\n  selector:\r\n    matchLabels:\r\n      release: \"stable\"\r\n    matchExpressions:\r\n      - {key: environment, operator: In, values: [dev]}\r\n```\r\n\r\n2. add iops limit to Pod volume spec\r\n\r\nPV may be used \r\n\r\nKubelet will check which device is using by the PVC and run pod containers with limits.\r\n```\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  labels:\r\n    app: nginx-xsky-120\r\n  name: nginx-xsky-120-748d9b79d9-6b5zw\r\n  namespace: default\r\nspec:\r\n  affinity:\r\n    nodeAffinity:\r\n      requiredDuringSchedulingIgnoredDuringExecution:\r\n        nodeSelectorTerms:\r\n        - matchExpressions:\r\n          - key: piraeus.storage.daocloud.io/satellite\r\n            operator: In\r\n            values:\r\n            - \"true\"\r\n  containers:\r\n  - image: 10.6.170.180/library/nginx:latest\r\n    imagePullPolicy: IfNotPresent\r\n    name: nginx\r\n    ports:\r\n    - containerPort: 80\r\n      protocol: TCP\r\n    volumeMounts:\r\n    - mountPath: /usr/share/nginx/html\r\n      name: html-root\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: default-token-578rp\r\n      readOnly: true\r\n  volumes:\r\n  - name: html-root\r\n    persistentVolumeClaim: \r\n      claimName: nginx-pvc-xsky-120\r\n      iops: 500\r\n  - name: default-token-578rp\r\n    secret:\r\n      defaultMode: 420\r\n      secretName: default-token-578rp\r\n\r\n```\r\n\r\nWe may use  io.kubernetes.container.blkio annotation to limit specified device's iops at first. \r\nIf CSI and kubelet can check which device does the pvc use,  the iops limit  can apply dynamicly according to PVC name. \r\n\r\n**Why is this needed**:\r\n\r\nMany users want this feature in \r\nhttps://github.com/kubernetes/kubernetes/issues/70364\r\nhttps://github.com/kubernetes/kubernetes/issues/27000\r\nhttps://github.com/kubernetes/kubernetes/pull/70573\r\nhttps://github.com/kubernetes/kubernetes/issues/70364\r\nhttps://github.com/kubernetes/kubernetes/pull/70980\r\nhttps://github.com/kubernetes/kubernetes/pull/92068\r\n"},{"labels":["kind/feature","sig/cli"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nAs of Kubernetes 1.17.4, annotating cronjobs is not supported.\r\n\r\nExample:\r\n\r\n```bash\r\n$ kubectl annotate cronjob.v1.apps/${CRONJOB_NAME} kubernetes.io/change-cause=\"Release $(git describe --abbrev=0)\" --namespace=${NAMESPACE}\r\nerror: the server doesn't have a resource type \"cronjob\"\r\n```\r\n\r\n**Why is this needed**:\r\n\r\nAnnotated cronjobs could be of value for maintaining a history record of previously deployed versions and supporting rollbacks."},{"labels":["kind/feature","sig/apps"],"text":"**What would you like to be added**:\r\nDeployment has a strategy field in the specification that could be enhanced to add a new option, maybe named `Replace` or `BlueGreen` (naming up for debate).\r\n\r\nThis new strategy could use a new label (naming up for debate) to distinguish between blue and green ReplicaSets, allowing for two different Services to point at the pods, one for blue and one for green. Each new change to the Deployment would still make a new ReplicaSet, and the blue/green label would alternate between revisions.\r\n\r\nAs with the `RollingUpdate` strategy, this new strategy would keep the existing ReplicaSet after making a new one, but instead of scaling down the old ReplicaSet, it would be kept at full scale while the new ReplicaSet's Pods are coming up.\r\n\r\nAfter the new ReplicaSet (ex: green) is fully scaled and all pods are ready, the old ReplicaSet (ex: blue) would NOT be immediately deleted by the deployment controller. Instead, the Deployment would stay in that state until something is changed (in the spec?) to specify whether to keep the new green ReplicaSet and delete the old blue ReplicaSet OR \"rollback\" the Deployment change (revert to previous spec?) and keep the old blue ReplicaSet. This gating and rollback could perhaps be managed with enhancements to the kubectl rollout command (ex: `kubectl rollout continue` and `kubectl rollout undo`).\r\n\r\nWith two Services, one selecting on blue and the other on green, the (human or automated) operator would be able to route traffic (via ingress or other load balancer) to both ReplicaSets simultaneously and independently (ex: different DNS or paths or selection via header).\r\n\r\n**Why is this needed**:\r\nBlue/Green Deployment (aka Red/Black) is a common deployment strategy that is generally necessary for uses cases where the old and new instances conflict with each other (ex: reverse incompatible API or database change). In some cases, you may also want to use RollingUpdate for the general case but switch to Blue/Green for special occasions. Rolling is more efficient in terms of resources, but Blue/Green is potentially safer and more consistent for clients when not using sticky sessions. Blue/Green also allows for manual or automated testing on the new ReplicaSet without having to migrate all users to the new version (via load balancing or API gateway reconfiguration).\r\n\r\nThis enhancement would unblock further enhancements (or third party tools/CRDs) to automate Blue/Green lifecycle management (ex: using Service/Ingress/Gateway, Knative or Spinnaker). Integrated end to end testing/validation (ex: CI/CD integration) would allow Blue/Green rollout and rollback to be fully automated with confidence. \r\n\r\n/sig apps\r\n@kubernetes/sig-apps-feature-requests "},{"labels":["kind/feature","lifecycle/active","sig/testing"],"text":"Ref: https://github.com/kubernetes/kubernetes/pull/92212#issuecomment-645277504\r\nFor https://github.com/kubernetes/kubernetes/issues/82531\r\n\r\nToday, the [typecheck](https://github.com/kubernetes/kubernetes/tree/master/test/typecheck) tool uses the `go/types` package for type checking. This is a legacy package and doesn't work without GOPATH -- which means it isn't truly compatible with go modules.\r\n\r\nThe recommendation from the Go team is to use  [`golang.org/x/tools/go/packages`](https://godoc.org/golang.org/x/tools/go/packages) instead of `go/types` going forward.\r\n\r\nTo make [`verify-typecheck.sh`](https://github.com/kubernetes/kubernetes/blob/master/hack/verify-typecheck.sh) module-friendly, we should update the typecheck tool to use [`golang.org/x/tools/go/packages`](https://godoc.org/golang.org/x/tools/go/packages).\r\n\r\n/sig testing\r\n/kind feature"},{"labels":["area/provider/gcp","kind/feature","sig/storage"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**: The PD volume plugin is currently using beta zone/region labels. Stable labels have been introduced\r\n\r\n**Why is this needed**: k8s is migrating to stable labels. I'm not sure what the timeline is - following up on that.\r\n\r\n/sig storage\r\n/sig gcp\r\n/cc @lookuptable @misterikkit @msau42 @saad-ali \r\n"},{"labels":["kind/feature","sig/scheduling"],"text":"See https://github.com/kubernetes/kubernetes/blob/1b93ae57746e0d7a2a553baa9fc53da399c0bd72/test/integration/scheduler/framework_test.go#L963 - currently there's just one test that triggers Unreserve through a pre-bind failure."},{"labels":["kind/feature","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nI would like the default for `enableServiceLinks` to be changed from `true` to `false` \r\n\r\n**Why is this needed**:\r\n\r\nI think the default behaviour is unexpected for new users. Having this be an opt-in feature may be more predictable. \r\n\r\nReferences:\r\nhttps://github.com/kubernetes/kubernetes/issues/60099\r\nhttps://github.com/elastic/cloud-on-k8s/issues/2030\r\nhttps://github.com/knative/serving/issues/6074\r\nhttps://stackoverflow.com/questions/45323958/is-it-possible-to-disable-service-discovery-with-environment-variables-in-kubern\r\nhttps://twitter.com/fredbrancz/status/1201937181230686208"},{"labels":["kind/feature","sig/apps","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nNow, we only set pod ready ConditionFalse when node is not ready.\r\n\r\n```go\r\n// MarkPodsNotReady updates ready status of given pods running on\r\n// given node from master return true if success\r\nfunc MarkPodsNotReady(kubeClient clientset.Interface, recorder record.EventRecorder, pods []*v1.Pod, nodeName string) error {\r\n    klog.V(2).Infof(\"Update ready status of pods on node [%v]\", nodeName)\r\n\r\n    errMsg := []string{}\r\n    for i := range pods {\r\n        // Defensive check, also needed for tests.\r\n        if pods[i].Spec.NodeName != nodeName {\r\n            continue\r\n        }\r\n\r\n        // Pod will be modified, so making copy is required.\r\n        pod := pods[i].DeepCopy()\r\n        for _, cond := range pod.Status.Conditions {\r\n            if cond.Type == v1.PodReady {\r\n                cond.Status = v1.ConditionFalse\r\n                if !utilpod.UpdatePodCondition(&pod.Status, &cond) {\r\n                    break\r\n                }\r\n\r\n                klog.V(2).Infof(\"Updating ready status of pod %v to false\", pod.Name)\r\n                _, err := kubeClient.CoreV1().Pods(pod.Namespace).UpdateStatus(context.TODO(), pod, metav1.UpdateOptions{})\r\n                if err != nil {\r\n                    if apierrors.IsNotFound(err) {\r\n                        // NotFound error means that pod was already deleted.\r\n                        // There is nothing left to do with this pod.\r\n                        continue\r\n                    }\r\n                    klog.Warningf(\"Failed to update status for pod %q: %v\", format.Pod(pod), err)\r\n                    errMsg = append(errMsg, fmt.Sprintf(\"%v\", err))\r\n                }\r\n                // record NodeNotReady event after updateStatus to make sure pod still exists\r\n                recorder.Event(pod, v1.EventTypeWarning, \"NodeNotReady\", \"Node is not ready\")\r\n                break\r\n            }\r\n        }\r\n    }\r\n    if len(errMsg) == 0 {\r\n        return nil\r\n    }\r\n    return fmt.Errorf(\"%v\", strings.Join(errMsg, \"; \"))\r\n}\r\n```\r\n\r\nCan we also set ConditionFalse reason like `NodeUnreachable`?\r\n\r\n**Why is this needed**:\r\nUsers or custom controllers can know why the pod is not ready since it's logic is different with kubelet.\r\n\r\nFrom kubelet\r\n\r\n```go\r\n// GeneratePodReadyCondition returns \"Ready\" condition of a pod.\r\n// The status of \"Ready\" condition is \"True\", if all containers in a pod are ready\r\n// AND all matching conditions specified in the ReadinessGates have status equal to \"True\".\r\nfunc GeneratePodReadyCondition(spec *v1.PodSpec, conditions []v1.PodCondition, containerStatuses []v1.ContainerStatus, podPhase v1.PodPhase) v1.PodCondition {\r\n```"},{"labels":["kind/feature","sig/node","sig/scheduling"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nScheduler `TaintToleration` plugin should ignore those tolerations with `tolerations seconds`.\r\n\r\n**Why is this needed**:\r\n`toleration seconds` should be used  in case like: \r\n- \"Pod can continue to run on this node for a period of time before eviction since the node has a new taint now\".\r\n\r\nBut not the case like:\r\n- \"Pod can be scheduled to this node which has a taint even the pod will be evicted after a period of time\".\r\n\r\nI don' know if I made myself clear, if not, here's an example:\r\nif we have a deployment whose pod spec has:\r\n```\r\ntolerations:\r\n  - effect: NoExecute\r\n    key: foo \r\n   operator: Exists\r\n    tolerationSeconds: 30\r\n```\r\nAnd now we have a node like:\r\n```\r\ntaints:\r\n- effect: NoExecute\r\n   key: foo\r\n```\r\n\r\nAnd now the scheduler will continue to schedule the pod to the node because this node will evict this pod 30s later.\r\nAnd you can see following events:\r\n```\r\nNAME                                READY   STATUS              RESTARTS   AGE\r\nnginx-deployment-578c4b864c-q8r27   0/1     ContainerCreating   0          7s\r\nnginx-deployment-578c4b864c-rtfjd   0/1     ContainerCreating   0          7s\r\nnginx-deployment-578c4b864c-q8r27   1/1     Running             0          8s\r\nnginx-deployment-578c4b864c-rtfjd   1/1     Running             0          10s\r\nnginx-deployment-578c4b864c-q8r27   1/1     Terminating         0          30s\r\nnginx-deployment-578c4b864c-rtfjd   1/1     Terminating         0          30s\r\nnginx-deployment-578c4b864c-gplms   0/1     Pending             0          0s\r\nnginx-deployment-578c4b864c-gplms   0/1     Pending             0          0s\r\nnginx-deployment-578c4b864c-ntjft   0/1     Pending             0          0s\r\nnginx-deployment-578c4b864c-ntjft   0/1     Pending             0          0s\r\nnginx-deployment-578c4b864c-gplms   0/1     ContainerCreating   0          0s\r\nnginx-deployment-578c4b864c-gplms   0/1     ContainerCreating   0          1s\r\nnginx-deployment-578c4b864c-rtfjd   0/1     Terminating         0          31s\r\nnginx-deployment-578c4b864c-q8r27   0/1     Terminating         0          31s\r\nnginx-deployment-578c4b864c-q8r27   0/1     Terminating         0          32s\r\nnginx-deployment-578c4b864c-q8r27   0/1     Terminating         0          32s\r\nnginx-deployment-578c4b864c-rtfjd   0/1     Terminating         0          32s\r\nnginx-deployment-578c4b864c-rtfjd   0/1     Terminating         0          32s\r\nnginx-deployment-578c4b864c-ntjft   0/1     Pending             0          2s\r\nnginx-deployment-578c4b864c-ntjft   0/1     ContainerCreating   0          2s\r\nnginx-deployment-578c4b864c-ntjft   0/1     ContainerCreating   0          3s\r\nnginx-deployment-578c4b864c-gplms   1/1     Running             0          3s\r\nnginx-deployment-578c4b864c-ntjft   1/1     Running             0          7s\r\nnginx-deployment-578c4b864c-gplms   1/1     Terminating         0          30s\r\nnginx-deployment-578c4b864c-tc48l   0/1     Pending             0          0s\r\nnginx-deployment-578c4b864c-tc48l   0/1     Pending             0          0s\r\n```\r\n/sig scheduling\r\n/assign"},{"labels":["kind/feature","sig/cluster-lifecycle"],"text":"**What would you like to be added**\r\n\r\nTo designate or reserve a specific label to be used to show what \"node group\" a node belongs to. Currently GKE uses `cloud.google.com/gke-nodepool` and EKS uses `eks.amazonaws.com/nodegroup`.\r\n\r\nI know node groups don't really exist in the k8s API but they exist on every cloud platform in one form or another.\r\n\r\nMaybe `node.kubernetes.io/group`?\r\n\r\n**Why is this needed**\r\n\r\nIt would be convenient to have a standard common label to used for scheduling (e.g. `nodeSelector`) and in monitoring tools where labels are used heavily (e.g. Prometheus)."},{"labels":["kind/feature","needs-sig"],"text":"What would be friendlier to users and more secure from hackers is a geometrically increasing delay from entering wrong passwords.  For example, for the first three wrong passwords have a delay of 1 min.  If three wrong passwords in a row within the next five minutes, delay 5 min. before accepting the password.  If three wrong passwords in a row within the next 15 min., delay 15 min., and continue to increase the wait time.  Thus, instead of it taking 6 months to have a 50% change of software finding the password, it might take 10 years with a system with geometrically increasing delay."},{"labels":["kind/feature","sig/storage"],"text":"**What would you like to be added**:\r\nSimilar issue: #7890.\r\nNow k8s support CSI. It's easy to integrate new type of volume to k8s.\r\n\r\nBut for `fuse` based volume, the fuse daemon is placed in CSI daemon, multi-users share same `fuse daemon`. This will cause some resource competing problems.\r\n\r\nWe should provide a way to let `fuse` based volume put `fuse daemon` into user pod when using `CSI` and `Volume`. Then the resource consumed by fuse daemon will limited by the user pod.\r\n\r\n**Why is this needed**:\r\n\r\nAssume pod A is running a I/O intensive job . At the same node, there is a pod B. Process in job B may find the I/O speed is slow due to process A occupy too much resources. Even though Pod A only request 1 CPU, and Pod B request 4 CPU.\r\n\r\nThe root cause is we don't have a method to put `fuse daemon` into user pod when using `CSI` and `Volume`.\r\nBut actually, it's a user space process , should be counted in user pod.\r\n\r\nSeems privilege issue is fixed: http://lkml.iu.edu/hypermail/linux/kernel/1806.0/04385.html we may can going on this problem"},{"labels":["kind/feature","sig/scheduling"],"text":"Currently the scheduler's default plugins are set in pkg/scheduler/factory.go through ```Configurator```. \r\n\r\nSince the set of plugins that we configure the scheduler with comes from component config, it is more proper to set the default list of plugins through [component config defaulting](https://github.com/kubernetes/kubernetes/blob/master/pkg/scheduler/apis/config/v1beta1/defaults.go) mechanism.\r\n\r\n\r\n/sig scheduling\r\n/assign @adtac"},{"labels":["kind/feature","sig/scheduling","triage/support"],"text":"### Context\r\n\r\n[volcano](https://github.com/volcano-sh/volcano) scheduler is making use of kubernetes' scheduler algorithms. But during the k8s dependency upgrade, we found that the scheduler framework has been refactored. \r\n\r\nAnd we need to use pkg/scheduler/internal/cache.NewSnapshot to initialize the interface that needed to call related plugins. As internal package can not be imported, so i have to copy the code.\r\n\r\nThat is hard to maintain, so i doubt if we can remove the `internal` limitation in the k/k.\r\n\r\n\r\n/sig-scheduling"},{"labels":["kind/feature","sig/instrumentation"],"text":"**What would you like to be added**:\r\n\r\nThe Event API is being promoted to v1 in #91645 and right now v1beta1 has higher priority than v1 in pkg/apis/events/install/install.go. We should bump this in 1.20.\r\n\r\n**Why is this needed**:\r\n\r\nThe new Event API is being promoted."},{"labels":["kind/feature","sig/storage"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nPresently a container spec referencing a Docker image which declares some volumes that are not mapped in the spec will have some implicit temporary volumes mounted in place, presumably by Docker and not Kubernetes.\r\n\r\nShould a configuration contain a typing mistake or incorrect path, a presumed persistent directory may become surprisingly transient, with little indication of any problem except for manual inspection of the running pod.\r\n \r\n**Why is this needed**:\r\n\r\nGiven `postgres:12.3-alpine`, having mounted a PVC over `/var/lib/postgresql`, the runtime maps some implicit `empty_dir` for the volume at `/var/lib/postgresql/data` declared by the `Dockerfile`. Everything appears to function correctly until the container is rescheduled, at which point data loss is apparent (long after the container was first created, and likely cutpasted to new jobs)\r\n"},{"labels":["kind/feature","sig/network"],"text":"<!-- Please use this template while reporting a bug and provide as much info as possible. Not doing so may result in your bug not being addressed in a timely manner. Thanks!\r\n\r\nIf the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**What happened**:\r\n\r\nI want to deploy k8s with IPV4/IPv6 dual stack.\r\nBut node internal IP always only one either IPV4 or IPV6.\r\nPod IP can auto assigned IPV4,IPV6 calico,  IPv6 Service also work.\r\nBut NodeType only listener at IPV4, not IPV6.\r\n\r\n```bash\r\n                \"status\": {\r\n                \"addresses\": [\r\n                    {\r\n                        \"address\": \"10.126.20.162\",\r\n                        \"type\": \"InternalIP\"\r\n                    },\r\n                    {\r\n                        \"address\": \"wxdlong\",\r\n                        \"type\": \"Hostname\"\r\n                    }\r\n                ],\r\n```\r\n\r\n**What you expected to happen**:\r\n\r\nAs https://kubernetes.io/docs/tasks/network/validate-dual-stack/  said.\r\n\r\n```bash\r\nkubectl get nodes k8s-linuxpool1-34450317-0 -o go-template --template='{{range .status.addresses}}{{printf \"%s: %s \\n\" .type .address}}{{end}}'\r\nHostname: k8s-linuxpool1-34450317-0\r\nInternalIP: 10.240.0.5\r\nInternalIP: 2001:1234:5678:9abc::5\r\n\r\n```\r\n\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nthe init config \r\n\r\n```yaml\r\n\r\napiVersion: kubeadm.k8s.io/v1beta2\r\nkind: InitConfiguration\r\nlocalAPIEndpoint:\r\n  advertiseAddress: \"10.126.20.162\"\r\n  bindPort: 6443\r\nnodeRegistration:\r\n  criSocket: /var/run/dockershim.sock\r\n  taints:\r\n    - effect: NoSchedule\r\n      key: node-role.kubernetes.io/master\r\n  kubeletExtraArgs:\r\n    node-ip: \"10.126.20.162,2001:1b74:88:9400::62:62\"\r\n```\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version (use `kubectl version`):  v1.17.4\r\n\r\n```bash\r\n kubectl version\r\nClient Version: version.Info{Major:\"1\", Minor:\"17\", GitVersion:\"v1.17.4\", GitCommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", GitTreeState:\"clean\", BuildDate:\"2020-03-12T21:03:42Z\", GoVersion:\"go1.13.8\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"17\", GitVersion:\"v1.17.4\", GitCommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", GitTreeState:\"clean\", BuildDate:\"2020-03-12T20:55:23Z\", GoVersion:\"go1.13.8\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n- Cloud provider or hardware configuration:\r\n- OS (e.g: `cat /etc/os-release`):\r\n\r\n```bash\r\n# cat /etc/os-release\r\nNAME=\"Red Hat Enterprise Linux Server\"\r\nVERSION=\"7.6 (Maipo)\"\r\nID=\"rhel\"\r\nID_LIKE=\"fedora\"\r\nVARIANT=\"Server\"\r\nVARIANT_ID=\"server\"\r\nVERSION_ID=\"7.6\"\r\nPRETTY_NAME=\"Red Hat Enterprise Linux Server 7.6 (Maipo)\"\r\nANSI_COLOR=\"0;31\"\r\nCPE_NAME=\"cpe:/o:redhat:enterprise_linux:7.6:GA:server\"\r\nHOME_URL=\"https://www.redhat.com/\"\r\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\r\n\r\nREDHAT_BUGZILLA_PRODUCT=\"Red Hat Enterprise Linux 7\"\r\nREDHAT_BUGZILLA_PRODUCT_VERSION=7.6\r\nREDHAT_SUPPORT_PRODUCT=\"Red Hat Enterprise Linux\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7.6\"\r\n\r\n```\r\n- Kernel (e.g. `uname -a`):\r\n\r\n```bash\r\n# uname -a\r\nLinux wxdlong 3.10.0-957.el7.x86_64 #1 SMP Thu Oct 4 20:48:51 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n- Install tools:\r\n```bash\r\n# kubeadm version\r\nkubeadm version: &version.Info{Major:\"1\", Minor:\"17\", GitVersion:\"v1.17.4\", GitCommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", GitTreeState:\"clean\", BuildDate:\"2020-03-12T21:01:11Z\", GoVersion:\"go1.13.8\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n- Network plugin and version (if this is a network-related bug):\r\n  calico\r\n- Others:\r\n\r\n  May be my init config is not correct, Any one can give an full example for IPV4,IPV6 dual stack. Thanks\r\n"},{"labels":["kind/feature","sig/testing"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nRemove/replace the \"kube-proxy-mode-detector\" mechanism used in the e2e test.\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/a017253ace9017bb8716b2d46b57467b2c73af29/test/e2e/network/service.go#L3679\r\n\r\n**Why is this needed**:\r\n\r\nThis is being used by some tests to detect the kube-proxy mode\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/a017253ace9017bb8716b2d46b57467b2c73af29/test/e2e/network/service.go#L976\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/a017253ace9017bb8716b2d46b57467b2c73af29/test/e2e/network/service.go#L3404\r\n\r\nIt basically creates a pod and exec a curl in a node to the `http://localhost:10249/proxyMode`\r\n\r\nTaken this job log as example \r\n\r\nhttps://storage.googleapis.com/kubernetes-jenkins/pr-logs/pull/91748/pull-kubernetes-e2e-gce/1270263772719616001/build-log.txt\r\n\r\n```\r\n0609 08:31:38.940] [It] should preserve source pod IP for traffic thru service cluster IP [LinuxOnly]\r\nI0609 08:31:38.940]   test/e2e/network/service.go:976\r\nI0609 08:31:38.940] Jun  9 08:30:58.952: INFO: Running '/go/src/k8s.io/kubernetes/kubernetes/platforms/linux/amd64/kubectl --server=https://34.105.100.87 --kubeconfig=/workspace/.kube/config exec --namespace=services-5059 kube-proxy-mode-detector -- /bin/sh -x -c curl -q -s --connect-timeout 1 http://localhost:10249/proxyMode'\r\nI0609 08:31:38.941] Jun  9 08:31:02.417: INFO: stderr: \"+ curl -q -s --connect-timeout 1 http://localhost:10249/proxyMode\\n\"\r\nI0609 08:31:38.941] Jun  9 08:31:02.417: INFO: stdout: \"iptables\"\r\nI0609 08:31:38.941] Jun  9 08:31:02.417: INFO: proxyMode: iptables\r\nI0609 08:31:38.941] Jun  9 08:31:03.094: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.941] Jun  9 08:31:03.440: INFO: Pod kube-proxy-mode-detector still exists\r\nI0609 08:31:38.941] Jun  9 08:31:05.440: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.942] Jun  9 08:31:06.156: INFO: Pod kube-proxy-mode-detector still exists\r\nI0609 08:31:38.942] Jun  9 08:31:07.440: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.942] Jun  9 08:31:07.706: INFO: Pod kube-proxy-mode-detector still exists\r\nI0609 08:31:38.942] Jun  9 08:31:09.440: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.942] Jun  9 08:31:09.856: INFO: Pod kube-proxy-mode-detector still exists\r\nI0609 08:31:38.943] Jun  9 08:31:11.440: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.943] Jun  9 08:31:11.934: INFO: Pod kube-proxy-mode-detector still exists\r\nI0609 08:31:38.943] Jun  9 08:31:13.440: INFO: Waiting for pod kube-proxy-mode-detector to disappear\r\nI0609 08:31:38.943] Jun  9 08:31:13.509: INFO: Pod kube-proxy-mode-detector no longer exists\r\nI0609 08:31:38.943] \u001b[1mSTEP\u001b[0m: creating a TCP service sourceip-test with type=ClusterIP in namespace services-5059\r\n```\r\n\r\nIt takes about 15 seconds and it runs 3 times, so we can save some time ~45 secs"},{"labels":["kind/feature","sig/cli"],"text":"**What would you like to be added**:\r\nWe would like to see an official multi-arch `kubctl` docker image\r\n\r\n**Why is this needed**:\r\nWe find ourselves needing to use `kubectl` as a pod various time. So, we maintain our own amd64 variant of the kubectl docker image. We see that other vendors also maintain their own kubectl image, example, https://github.com/rancher/kubectl . I don't speak for Rancher. But it seems that upstream can easily provide a multi-arch kubectl docker image.\r\n"},{"labels":["help wanted","kind/feature","priority/important-soon","sig/scheduling"],"text":"Update the semantics of ```PreFilter``` extension point to allow it to act as an early filtering stage. PreFilter can be used to reject pods before evaluating each node at the Filter extension point. This is useful to quickly reject unschedulable pods in cases that don't depend on the particular node (e.g., pod requesting unbound immediate PersistentVolumeClaims).\r\n\r\nA non ```Success``` PreFilter gets converted to Error: https://github.com/kubernetes/kubernetes/blob/5dbe3e308af1598536cda3b785fb05b30505990f/pkg/scheduler/core/generic_scheduler.go#L398\r\n\r\nWe should change that and support proper rejection of the pod at PreFilter. The only acceptable unschedulable status for now should be  ```UnschedulableAndUnresolvable```.\r\n\r\n\r\n/sig scheduling"},{"labels":["kind/feature","sig/node"],"text":"**What would you like to be added**:\r\nCurrently, `pkg/kubelet/util/boottime_util_linux.go` does not have unit test coverage. Specifically, there's no unit test coverage for `GetBootTime`. I'd like to see unit test coverage added for `GetBootTime`. See `pkg/kubelet/util/util_unix_test.go` for a sample of how to write platform specific unit tests.\r\n\r\n**Why is this needed**:\r\nThere's a fairly small chance of `GetBootTime` being modified, and thus breaking, in the future without this added test coverage. However, it should be relatively straightforward to add the test coverage, and could make a good first issue for a new contributor. There's also the added benefit that it helps keep the test coverage in `pkg/kubelet` high :) And we never know, it might help catch a bug some day :)\r\n\r\nExtra note\r\n\r\nI think this ticket could be a great candidate for someone who is new to\r\ncontributing to sig-node/k8s. **I'd prefer to please give first dibs for picking\r\nthis up to any folks who are currently underrepresented in the k8s community.** Please reach out to @mattjmcnaughton on k8s Slack (or post directly in #sig-node and tag me) if you're interested, and I'll assign you the issue. I'm happy to mentor and be helpful in whatever way I can :)\r\n"},{"labels":["kind/feature","sig/node","sig/scheduling"],"text":"**What would you like to be added**:\r\nA way to specify pods/requests/limits per RuntimeClass the same way you can set limits on individual StorageClasses\r\n\r\n**Why is this needed**:\r\nYour cluster may be split in such a way that you need to limit a project to a particular RuntimeClass or set the proportion of resource they can consume in each RuntimeClass."},{"labels":["area/kubelet","kind/feature","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nI would like the PodSandboxStatus returned by kubelet/dockershim via a CRI PodSandboxStatusRequest to populate the \"info\" field with json version of the dockercontainer.config.\r\n\r\nAn example where this would be useful is to retrieve the pod hostname via crictl.\r\n\r\n**Why is this needed**:\r\n\r\nThis would align the behaviour of kubelet/dockershim +docker with that of containerd when used as the container runtime for k8s.\r\n\r\n"},{"labels":["kind/feature","sig/scheduling"],"text":"[ResourceLimitsPriorityFunction](https://github.com/kubernetes/kubernetes/blob/master/pkg/features/kube_features.go#L200:2) has bee in alpha since 1.9. Since then, no requests were made to graduate the feature, which indicates lack of usage. Based on that I propose we deprecate this scoring function.\r\n\r\n/cc @aveshagarwal\r\n/sig scheduling\r\n"},{"labels":["kind/feature","needs-sig"],"text":"My application spring boot to develop and use docker image openjdk:11-jdk to build image\r\npreviously I use alpine version of the image and ran into problem which sometimes the pod is not able to connect to k8s dns\r\nafter changing back to base openjdk:11-jdk version, the dns discovery is resolved, yet sometimes, every 10-20, it takes so long about 14-16 seconds to reach destination (other service within the cluster)"},{"labels":["kind/feature","sig/scheduling"],"text":"I have the following scenario: I want to set up an Elasticsearch cluster spread across multiple zones, and for that I use multiple statefulsets \r\n\r\nNote that is almost the same scenario as described in https://github.com/kubernetes/kubernetes/issues/58146 (not for different node types, though, but for different availability zones). Since that issue has been closed for a while, I decided to create a new one\r\n\r\nWhen I do , e.g., a \"helm upgrade\" to change the ES config or rollout a new image, I want the total number of not running pods to be limited across ALL those statefulsets to avoid a cluster outage. For example, if I have three zones and 1 ES instance per zone, only one of the pods should be restarted at any given time. Alas, out of the box this doesn't work. Since the statefulsets are independent of each other, the single pod in each is stopped and restarted, taking down the entire ES cluster.\r\n\r\nThe documentation actually mentions how to use PDBs for \"non-standard\" controllers:\r\nhttps://kubernetes.io/docs/tasks/run-application/configure-pdb/#arbitrary-controllers-and-selectors\r\n\r\nSo I tried specifying a PDB that would match the pods of all my statefulsets - alas, this didn't make a difference. Any way this can be accomplished? Target platform is EKS, so I am stuck with Kubernetes 1.15.\r\n"},{"labels":["kind/feature","needs-sig"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\nIn the scheduling-framework, can not be run or testing scope plugin in the AIO env, because have same limit in the code, as blow.\r\nk8s.io/kubernetes/pkg/scheduler/core/generic_scheduler.go +202\r\n```go\r\n// When only one node after predicate, just use it.\r\nif len(filteredNodes) == 1 {\t\t \r\n  metrics.DeprecatedSchedulingAlgorithmPriorityEvaluationSecondsDuration.Observe(metrics.SinceInSeconds(startPriorityEvalTime))\r\n\t\treturn ScheduleResult{\r\n\t\t\tSuggestedHost:  filteredNodes[0].Name,\r\n\t\t\tEvaluatedNodes: 1 + len(filteredNodesStatuses),\r\n\t\t\tFeasibleNodes:  1,\r\n\t\t}, nil\r\n\t}\r\n```\r\n\r\n**What would you like to be added**:\r\nremove the limit or add the switch that when use AIO or testing close it.\r\n\r\n**Why is this needed**:\r\nimprove codes"},{"labels":["kind/feature","sig/node"],"text":"**What would you like to be added**:\r\n\r\nI propose to add an API that users can use to specify container image aliases. Using it will be optional, but if specified, K8s can use alias if for some reasons base image retrieval is failing.\r\n\r\nI propose either to add `ImageAliases` field:\r\n\r\n```go\r\n// proposition 1\r\ntype Container struct {\r\n  Name         string\r\n  Image        string\r\n  ImageAliases []string\r\n  // [..]\r\n}\r\n```\r\nOr change type of `Image` field to be mixin of array and string, similar to `intstr.IntOrString` type:\r\n\r\n```go\r\n// proposition 2\r\ntype Container struct {\r\n  Name         string\r\n  Image        strarr.StringOrArray\r\n  // [..]\r\n}\r\n// k8s.io/apimachinery/pkg/util/strarr/strarr.go\r\ntype StringOrArray struct {\r\n  Type   Type\r\n  StrVal string\r\n  ArrVal []string\r\n}\r\n```\r\n\r\n**Why is this needed**:\r\n\r\nContainer image is specified by string value. There we can set only one value. \r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/ca7a906ab793c13f3def2d7ff0357ab88bfecf92/pkg/apis/core/types.go#L2023\r\n\r\nIn case of image registry outage Kubernetes isn't able to run pods that use that registry. If users got option of specifying image aliases, Kuberenetes can run Pods with alternative image name provided by user.\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  name: image-alias-test\r\nspec:\r\n  containers:\r\n    - name: app\r\n      image: registry.example.io/acme/app:1.1.0\r\n      imageAliases:\r\n        - registry-ro.example.org/acme/app:1.1.0\r\n        - gcr.io/example/acme/app:1.1.0\r\n```"},{"labels":["area/provider/gcp","kind/feature","sig/cloud-provider"],"text":"**What would you like to be added**:\r\nEnvironment variable to disable logrotate configuration: https://github.com/kubernetes/kubernetes/blob/f01d848c4808bdaaa1378511c343a63a650f8cf1/cluster/gce/gci/configure-helper.sh#L388\r\n\r\n**Why is this needed**:\r\nStarting from 1.11 CRIContainerLogRotation feature is enabled by default. Second one by default performs more often checks then logrotate, so it doesn't makes sense to have both enabled in the same time."},{"labels":["kind/feature","needs-sig"],"text":"**What would you like to be added**:\r\nIn my setup, I'm using metalLB+calico.\r\n\r\nThe netdev topology on the metal OS is:\r\n```\r\neth0.2  eth0.3    eth1.23  eth1.24\r\n     \\          |          /            /\r\n                 bond0      \r\n          /              \\\r\n   eth0                 eth1\r\n```\r\neth0.2, eth0.3, eth1.23 and eth1.24 are different L3 domains, and do not share a default route towards external clients. i.e. traffic responses need to be routed back to the interface where it came in.\r\n\r\nTo support above, the below items have been modified.\r\n\r\n* For ingress traffic via LB*\r\n0. a separate named metaLB pool of VIPs for each L3 network domain.\r\n1. ip rule from <eth0.2_LB_VIP_CIDR> table 101. (To have mutiple default routes, selecting on SRC VIP CIDR).\r\n\r\n* For egress traffic *\r\n0. VRF specific FWMARK applied on egress for Pods marked with network domain.\r\n1. 1. ip rule fwmark <FWMARK> table 101.\r\n\r\nAn alternative approach, and perhaps a nicer one, would be to fix support for VRFs in the container provider. i.e. support exposing a service(via LB) to a single host VRF.\r\nI think https://github.com/docker/for-linux/issues/698 is related.\r\n\r\nIf there is another, more proper approach to this problem, please let me know.\r\n\r\n**Why is this needed**:\r\nWith above modification, a single k8s instance would be able to serve clients on multiple isolated L3 domains at the same time.\r\n\r\n"},{"labels":["kind/feature","sig/scheduling"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:  \r\nI want to add mininalFailureDomainsNumber for pod-topology-spread-constraints feature.\r\nTake nodes as example, mininalFailureDomainsNumber will work in this way :\r\n1.If mininalFailureDomainsNumber == 3 and only 2 nodes in k8s, will not schedule\r\n2.If mininalFailureDomainsNumber == 3 and only 3 nodes in k8s, and if one node fail, pods in failed node will not automatically reschedule to another two.\r\n\r\n**Why is this needed**:\r\nBy using feature pod-topology-spread-constraints, I can spread pods evenly to nodes. However, I have some problem when trying to implement high availability redis cluster operator. Redis cluster require at least 3 failure-domains if want to stand with one failure-domain failure. Therefore  redis should evenly spread to at least 3 failure-domains, and guarantee each failure-domain have minority redis pods. \r\nIf there are only 2 failure-domains, redis cluster should not be scheduled, but it will be scheduled currently.\r\nIf there are only 3 failure-domains, redis pods should not automatically reschedule to another two if one fail since spread to 2 failure-domains is not  high availability, but it will be rescheduled currently as my understanding.\r\n"},{"labels":["kind/feature","sig/node"],"text":"**What would you like to be added**:\r\nI'm creating this issue as a tracking issue for improving the test and tooling coverage for our `dockerless` Kubelet. See the [KEP](https://github.com/kubernetes/enhancements/pull/1546) and [PR](https://github.com/kubernetes/kubernetes/pull/87746) for more background information - at a high level, the cool is supporting building a Kubelet that does not have any dependency on `docker/docker`.\r\n\r\nWith [PR](https://github.com/kubernetes/kubernetes/pull/87746), we've merged the changes which allow folks to build a Kubelet without a dependency on `docker/docker`. However, we want to add additional test/tooling coverage in CI so that we can remain confident that `dockerless` will continue to work going forward.\r\n\r\nTo start, we'd like to see the following:\r\n- [ ] Add the static tests mentioned [in this comment](https://github.com/kubernetes/kubernetes/pull/87746#issuecomment-617488763) as part of CI. Alternatively, we could try and use `.import-restrictions` to replace the check that only certain files import `github.com/docker/docker`, although I'm not sure if that will work yet... I think there still may be external `docker/docker` dependencies that we're waiting to remove.\r\n- [ ] Add a test to CI that verifies Kubelet builds when the `dockerless` tag is enabled. Note, [this verify script](https://github.com/kubernetes/kubernetes/blob/master/hack/verify-typecheck-dockerless.sh) may already do this. Confirm its running via CI and tests the build.\r\n- [ ] Add a e2e_node test using a Kubelet compiled w/ the `dockerless` flag.\r\n- cc @dims @derekwaynecarr anything you'd like to see added?\r\n\r\n**Why is this needed**:\r\nAdding this testing will help us ensure the Kubelet successfully builds w/ the `dockerless` tag and that uses of `docker/docker` stay constrained to `pkg/kubelet/dockershim`.\r\n\r\n**Extra Note**\r\nI think participating in this workstream could be a great candidate for someone who is new to\r\ncontributing to sig-node/k8s or someone who has tackled a couple small issues and is looking to tackle a bigger one. With that in mind, **I'd prefer to please give first dibs for picking up all/some of this work to any folks who are currently underrepresented in the k8s community.** Myself and @dims (who is much more knowledgeable than myself :) ) are completely open to mentoring and assisting. Please reach out to @mattjmcnaughton on k8s Slack (or post directly in #sig-node and tag me) if you're interested, and we can go from there."},{"labels":["kind/feature","sig/node"],"text":"**What would you like to see added?**\r\n\r\nCurrently, executing the unit tests in `pkg/kubelet/images/...` does not\r\nactually execute the `throttledImageService` as defined in\r\n`pkg/kubelet/images/helpers.go`. For all unit tests, `qps` is set to 0, so we\r\nessentially use a non-throttled image service. Examining the code coverage shows\r\nthat all code components \"unique\" to the throttled image service (i.e. the\r\nactual throttling) are not actually tested.\r\n\r\n**Why this is needed?**\r\n\r\nWe'd like unit test coverage for the business logic that makes the throttling\r\nactually throttle. Furthermore, by default, the image service does use\r\nthrottling, so adding this test coverage will help us mirror what happens in\r\nproduction.\r\n\r\n**Extra note**\r\n\r\nI think this ticket could be a great candidate for someone who is new to\r\ncontributing to sig-node/k8s. **I'd prefer to please give first dibs for picking\r\nthis up to any folks who are currently underrepresented in the k8s community**.\r\nPlease reach out to @mattjmcnaughton on k8s Slack (or post directly in #sig-node and tag me) if you're interested, and I'll assign you the issue. I'm happy to mentor and be helpful in whatever way I can :)\r\n"},{"labels":["kind/feature","sig/apps"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**: CronJobs should have fields allowing for their start time to be randomized (as systemd's Timers have), or even distributed within a range to spread out in equal intervals with other CronJobs of a set. At the very least, it would be useful to specify concurrency policies like \"do not run more than two Jobs with the selected annotation\", so that scheduling will be postponed until that policy could be met.\r\n\r\n**Why is this needed**: I have a cluster with very few cores, and KubeApps adds a CronJob to sync every repo in the cluster, one for each repo, each one scheduled to run every 10 minutes. This would only take a few seconds per repo, but when it tries to run the CronJob at the same time for every repo, it causes a \"Three Stooges effect\", and most of the synchronization jobs end up timing out for lack of available processing. If I could stagger these synchronizations, they could all succeed, and my cluster wouldn't be momentarily starved of resources while it happens."},{"labels":["area/conformance","kind/feature","sig/architecture"],"text":"KEP: https://github.com/kubernetes/enhancements/tree/master/keps/sig-architecture/960-conformance-behaviors\r\n\r\nPRs:\r\n- [api-machinery](https://github.com/kubernetes/kubernetes/pull/91639)\r\n- [apps](https://github.com/kubernetes/kubernetes/pull/91638)\r\n- [network](https://github.com/kubernetes/kubernetes/pull/91647)\r\n- storage\r\n- [scheduling](https://github.com/kubernetes/kubernetes/pull/91646)\r\n- common\r\n\r\n"},{"labels":["kind/cleanup","kind/feature","sig/scheduling"],"text":"The kube-scheduler is currently difficult to debug through logs. Logging is inconsistent and sparse, and critically helpful information is in some spots logged at too high of a level to be practically accessible (such as [node scores](https://github.com/kubernetes/kubernetes/blob/b618411f1edb98afe807866fb3a607356d72ba24/pkg/scheduler/core/generic_scheduler.go#L703), which are `V(10)`. At this level logs are flooded with low-level information too quickly to even grep).\r\n\r\n**What would you like to be added**:\r\nStandardize scheduler logging to useful, documented levels to improve debuggability and diagnoses of scheduling anomalies. This information should be accessible at reasonable levels so as not to be flooded by irrelevant low-level process and network logs (ie, `v=2,3,4..`) and consistent across the scheduler.\r\n\r\nSpecifically, information that is necessary includes, but is not limited to:\r\n* Filter plugins\r\n  * Per plugin/per node\r\n* Preemption attempts (/postfilter plugins)\r\n* Score plugins\r\n  * Normalized results\r\n    * Per plugin/per node\r\n* Nominated node result\r\n(sub-lists to indicate potential logging hierarchies. these are just some examples)\r\n\r\nIn addition, these logs should be able to be easily traced through a scheduling cycle. That is, all logs related to a specific scheduling cycle should have a unique identifier so that relevant information can be efficiently gathered with common search tools like grep.\r\n\r\n**Why is this needed**:\r\nThe most common issues with the scheduler are questions related to the scheduling cycle (\"Why did/didn't my pod get scheduled here/there?\"). While the scheduler does currently report `FailedScheduling` events, these can lack information (https://github.com/kubernetes/kubernetes/issues/91340, https://github.com/kubernetes/kubernetes/issues/91601) and do not provide any insight to successful scheduling that does not land on the expected node (eg, scoring interference).\r\n\r\nThere is demand to be able to easily debug the steps of the scheduling cycle, and the lack of that ability frequently confuses users. It would be very helpful to be able to say, \"If you set `v=2`, you'll be able to see each plugin's results\" for example.\r\n\r\n/sig scheduling"},{"labels":["kind/feature","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nCurrently `kube-apiserver` use the configuration of itself `--kubelet-https` to determine the use of https for kubelet connections.\r\n\r\nIf `--kubelet-https =true`, when apiserver initiates a connection to all kubelet, it USES the HTTPS connection. But this is the full configuration.\r\n\r\n\r\n\r\nIn some scenarios, a node node will be under an Intranet VPN and will only allow apiserver to get metric data, so there is no need to connect via HTTPS. \r\n\r\nThis limits the flexible configuration of `kube-apiserver` and `kubelet` connections.\r\n\r\n**Why is this needed**:\r\n"},{"labels":["kind/feature","priority/awaiting-more-evidence","sig/auth"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n/sig auth\r\n/sig api-machinery\r\n\r\n**What would you like to be added**:\r\nI would like the JWT token created by ServiceAccountToken controller to include optional labels from metadata\r\n\r\n**Why is this needed**:\r\nThe JWT token created by ServiceAccountToken has namespace, pod name and sa name.  Adding metadata info like labels from the pod would help the relying party to get additional context information of the pod  \r\n```\r\n  ...\r\n  \"kubernetes.io\": {\r\n    \"namespace\": \"test\",\r\n    \"pod\": {\r\n      \"name\": \"nginx-1237f43324-p4cdw\",\r\n      \"uid\": \"6f0432ee4-bdda-4234-86a3-1b12346dabb9\"\r\n    },\r\n    \"serviceaccount\": {\r\n      \"name\": \"nginx-sa\",\r\n      \"uid\": \"d712369b-1271-45bd-224c-36babcde9fd2\"\r\n    }\r\n  },\r\n```"},{"labels":["kind/feature","needs-sig"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**: add a new option in `kubectl get --output=yaml` which does NOT show [metadata.managedFields](https://kubernetes.io/docs/reference/using-api/api-concepts/#field-management) in the output.\r\nMay be `kubectl get --output=yaml --hideManagedFields` ?\r\n\r\n**Why is this needed**: to make the output shorter. As this option is not enabled by default. When the user really wants a shorter output on the console. Mostly to make a quicky review on the user-defined values. This option allows to hide the `metadata.managedFields` which make the screen output shorter and easier to focus on user defined data.\r\n\r\nA kind of imitation in the same fashion than `kubectl config view --minify`\r\n\r\n/sig api-machinery\r\n/sig usability"},{"labels":["kind/feature","sig/architecture","sig/node","sig/release"],"text":"This is the master Issue to track my porting effort to the illumos operating system and to allow me to ask questions about things in kubernetes.\r\n\r\nThe following things are part of this effort:\r\n- [ ] Modify build tags to allow compilation #91572\r\n- [ ] Update Vendor with upstream fixes\r\n  - [ ] github.com/moby/term\r\n- [ ] Update build system to recognize illumos as build host. #91573\r\n- [ ] Fix SO_REUSEPORT issue on illumos or check if we can leave that out on illumos\r\n"},{"labels":["kind/feature","sig/node"],"text":"**What would you like to be added**:\r\nThe 'Successfully pulled image' event should contain the duration for image pulling.\r\n\r\n**Why is this needed**:\r\nCurrently the success event is in this form:\r\n```\r\nMay 29 05:42:16 tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0 kubelet[1939]: I0529 05:42:16.850647    1939 event.go:278] Event(v1.ObjectReference{Kind:\"Pod\", Namespace:\"mirror-pod-with-grace-period-2630\", Name:\"static-pod-0ed631f9-b5b7-4e9c-9a5b-0c2488388194-tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0\", UID:\"0040ad26cfbe654f03547eb96b474700\", APIVersion:\"v1\", ResourceVersion:\"\", FieldPath:\"spec.containers{test}\"}): type: 'Normal' reason: 'Pulled' Successfully pulled image \"docker.io/library/fedora:32\"\r\n```\r\nUser has to trace back to the corresponding event for the beginning of image pulling and calculate the duration him/herself:\r\n```\r\nMay 29 05:41:57 tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0 kubelet[1939]: I0529 05:41:57.765151    1939 event.go:278] Event(v1.ObjectReference{Kind:\"Pod\", Namespace:\"mirror-pod-with-grace-period-2630\", Name:\"static-pod-0ed631f9-b5b7-4e9c-9a5b-0c2488388194-tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0\", UID:\"0040ad26cfbe654f03547eb96b474700\", APIVersion:\"v1\", ResourceVersion:\"\", FieldPath:\"spec.containers{test}\"}): type: 'Normal' reason: 'Pulling' Pulling image \"docker.io/library/fedora:32\"\r\n```"},{"labels":["kind/feature","sig/network"],"text":"**What happened**:\r\nPer title, if you attempt to launch a cluster with multiple cluster CIDRs (thus you are not passing `--cluster-cidr` to kube-proxy), NodePorts will be broken when the FORWARD chain in the filter table is set to default DROP. This is because there will be no rule for ACCEPT in KUBE-FORWARD matching ctstate established related connections to the cluster cidrs. This is somewhat related to https://github.com/kubernetes/kubernetes/issues/81675 as allowing multiple cluster CIDRs to be passed would handle this. Presumably this will be covered by https://github.com/kubernetes/enhancements/blob/master/keps/sig-network/20191104-iptables-no-cluster-cidr.md however I wanted to open this issue to track this specific problem.\r\n\r\n**What you expected to happen**:\r\nI expect to be able to pass multiple cluster CIDRs to kube-proxy or for kube-proxy to work with multiple cluster CIDRs without having to specify them.\r\n\r\n**How to reproduce it (as minimally and precisely as possible)**:\r\nLaunch kube-proxy without passing `--cluster-cidr` and try and use a NodePort resolving to a cluster address from outside the cluster. I think this should be sufficient to reproduce the issue with most CNIs, but ours is Calico. \r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n- Kubernetes version: 1.16.7\r\n\r\n/sig network"},{"labels":["kind/feature","sig/storage"],"text":"\r\n**What would you like to be added**:\r\nCapacity.storage on PVs, and resources.requests.storage on PVCs should be optional.\r\n\r\n**Why is this needed**:\r\nAccording to https://github.com/kubernetes/kubernetes/issues/68736, the resource limitations on PVs and PVCs are informational, and not enforcing. In this case, these values should be optional.\r\n\r\nFor example, when mounting an S3 bucket through an NFS mountpoint, there is no maximum size of the volume. However, arbitrary values still need to be provided for the storage capacity. This is strange and unexpected behavior."},{"labels":["kind/feature","priority/important-soon","sig/instrumentation","wg/component-standard"],"text":"Part of https://github.com/kubernetes/enhancements/issues/1602 effort\r\n\r\nAllow users to change log out of k8s components by passing flag `--log-format=json`. \r\n\r\nDetails:\r\n* Implement `Logger` interface from https://github.com/go-logr/logr (suggested code location  `staging/src/k8s.io/component-base/logs/json`)\r\n* Register `Logger` interface in [logRegistry](https://github.com/kubernetes/kubernetes/blob/0459c2afab4f1913993e437a781e95457ecefb42/staging/src/k8s.io/component-base/logs/registry.go#L80) under key `json`\r\n* Implementation should comply to spec https://github.com/kubernetes/enhancements/tree/master/keps/sig-instrumentation/1602-structured-logging#json-output-format\r\n* Implementation should come with detailed test suite that would ensure complying to spec and prevent regressions\r\n* Benchmarks are welcomed\r\n\r\nSuggested library to use is [zap](https://github.com/uber-go/zap), as there is an existing implementation of logr interface https://github.com/go-logr/zapr. I expect that `zapr` will need some changes to comply. \r\n\r\n/sig instrumentation\r\n/wg component-standard\r\n/priority important-soon\r\n/milestone v1.19\r\n/help\r\n"},{"labels":["kind/feature","sig/scheduling"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nmaybe we can add a field `podSelector` for extender to decide whether this pod is needed to be handled. Or, some way to tell it the pod is itself ?\r\n\r\n**Why is this needed**:\r\nscheduler extender pods can not be scheduled because sheduler extender isunavailable\r\n```shell\r\nEvents:\r\n  Type     Reason            Age        From               Message\r\n  ----     ------            ----       ----               -------\r\n  Warning  FailedScheduling  <unknown>  default-scheduler  Post http://scheduler-extender.kube-system:8000/scheduler/filter: dial tcp 10.107.151.182:8000: connect: connection refused\r\n  Warning  FailedScheduling  <unknown>  default-scheduler  Post http://scheduler-extender.kube-system:8000/scheduler/filter: dial tcp 10.107.151.182:8000: connect: connection refused\r\n```\r\nThe pod is Pending. BTW, the param `extender.IsIgnorable` can not be set to `True` for my case"},{"labels":["area/kubelet","kind/feature","sig/cloud-provider","sig/node"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\n\r\nKubelet currently does not handle machine shutdown. Kubelet should be able to detect machine shutdown and gracefully terminate pods with attempt to respect pod's requested grace period.\r\n\r\n**Why is this needed**:\r\n\r\nCurrently, when a machine is shutdown, Kubelet does not have any special handling to gracefully terminate pods. Machine shutdown can be a simple as `sudo shutdown now` or pressing the power key.\r\n\r\nSome items to consider:\r\n\r\n* Constrained machine shutdown time\r\n    * In some cases, machines may or may not have a constrained time to shutdown. As a result, it's not always possible to respect a pod's requested grace period. \r\n       *  Certain cloud providers offer preemptive style VM's (e.g. [GCE Preemptible VM](https://cloud.google.com/compute/docs/instances/preemptible) or [AWS EC2 Spot instances](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html) that run at lower prices but can be terminated at any time with a fixed termination period (e.g. GCP PVMs offer 30 secs timeout, EC2 offers two-minutes). \r\n       * Some type of cloud provider integration of detecting preemption and specifying node termination period may be useful here \r\n       * Improving node shutdown would help experience of using preemptive style VMs with Kubernetes.\r\n\r\n* Machine shutdown interference  (e.g. systemd)\r\n    * In cases where kubelet is managed by systemd, systemd shutdown may interfere with kubelet. For example, during machine shutdown, systemd sends SIGTERM's to all processes on the VM (including all containers). This can potentially interfere with expected pod lifecycle (e.g. `preStopHooks` should be run before SIGTERM) [1]. There needs to be a way to ensure kubelet can mange lifecycle of pods during shutdown without systemd interference.   \r\n\r\n[1] https://kubernetes.io/docs/concepts/workloads/pods/pod/#termination-of-pods\r\n\r\nRelated to #66393, #30051 "},{"labels":["kind/feature","sig/storage"],"text":"<!-- Please only use this template for submitting enhancement requests -->\r\n\r\n**What would you like to be added**:\r\nWith Kubernetes one can define storage classes with provisioners. How does one find which provisioners are installed and available in the cluster? I didn't find away to get this info.\r\n\r\n**Why is this needed**:\r\nWhen you specify in a storage class a provisioner that does not exist, and then try to create a persistent volume claim with this class you get something like the following error: \"no volume plugin matched\". So it isn't unreasonable to be able to query K8S or this info."},{"labels":["kind/feature","sig/cli"],"text":"**What would you like to be added**:\r\n\r\nWhen execute kubectl attach and kuberctl exec commods in multiple containers, it will show to execute kubectl describe commod to see all of the containers in this pod.\r\n\r\n``` shell\r\nkubectl exec  <pod-name> -- ls -al\r\nDefaulting container name to <container-foo>.\r\nUse 'kubectl describe pod/<pod-name>' to see all of the containers in this pod.\r\n```\r\nAfter the changes\r\n\r\n``` shell\r\nkubectl exec  <pod-name> -- ls -al\r\nA container name must be specified for pod <pod-name>, choose one of: [container-foo container-bar] or one of the init containers: [container-init]\r\nIf not choose, defaulting container name to <container-foo>.\r\n```\r\n\r\nAnd shall we add  more infomation in this message, like `[container-foo(Running) container-bar(Terminated)] `?\r\n\r\n**Why is this needed**:\r\n\r\nSometimes, we needn't to execute shell commod `kubectl describe` again to get this pod's containers list, it's not necessary. it's better to be shown at the first time when execute shell commod `kubectl exec` or `kubectl attach`.\r\n\r\nsuch like to execute shell commod `kubectl logs` in multiple containers pod \r\n\r\n``` shell\r\nkubectl logs <pod-name>\r\nError from server (BadRequest): a container name must be specified for pod <pod-name>, choose one of: [container-foo container-bar] or one of the init containers: [container-init]\r\n```\r\n"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/cranky-moser-p90di?file=/src/main.js](https://codesandbox.io/s/cranky-moser-p90di?file=/src/main.js)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nPut valid <script> element in template string\r\n\r\n### What is expected?\r\nScript should be blocked from executing\r\n\r\n### What is actually happening?\r\nScript executes\r\n\r\n---\r\nAs the example illustrates, if a <script> element is the sole element passed into the template string of a component, it will execute said script block. However if it's pre-ceded by a valid element, eg: a div the script is blocked from execution by the renderer. You do not have to close said element as shown in examples, simply preceding the script tag with a valid opening tag suffices. I believe this is because the renderer automatically closes elements with missing closures.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.6.11\r\n\r\n### Steps to reproduce\r\nCreate component with optional prop being an object and try to access its property\r\n\r\n```ts\r\nimport Vue, { PropType } from 'vue';\r\n\r\nVue.extend({\r\n  props: {\r\n    container: Object as PropType<{ n: number }>,\r\n    // or container: Number\r\n  },\r\n\r\n  mounted () {\r\n    // should fail because this.container could be undefined\r\n    console.log(this.container.n);\r\n  },\r\n});\r\n```\r\n\r\n\r\n### What is expected?\r\nTS error: Object is possibly undefined\r\n\r\n### What is actually happening?\r\nNo error\r\n\r\n### Note\r\n\r\nIt works as expected with Composition API plugin\r\n\r\n![image](https://user-images.githubusercontent.com/15625235/84488979-496fd780-aca1-11ea-9cd1-3f96ebdbdc28.png)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/hgaL8t5n/](https://jsfiddle.net/hgaL8t5n/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nUse translate=no in a template\r\n\r\n### What is expected?\r\ntemplate=no to be rendered in the HTML\r\n\r\n### What is actually happening?\r\ntranslate=translate is being rendered instead\r\n\r\nYou can use devtools to inspect the rendered HTML in the reproducible JSFiddle example. \r\n\r\n---\r\nThere is a isBooleanAttr-variable somewhere in the Vue code which marks `translate` as a boolean, probably to be used like the `disabled` attribute works. \r\n\r\nThis is incorrect for two reasons:\r\n\r\n1. \"translate\" is not a valid value for the attribute (only \"\", \"yes\" and \"no\" are valid). See the spec: https://html.spec.whatwg.org/multipage/dom.html#attr-translate\r\n2. this translate-attribute is mostly used to indicate not to translate it, so when specifying \"no\", people actually mean \"no\"\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codepen.io/CaseJnr/pen/VwvWbPE](https://codepen.io/CaseJnr/pen/VwvWbPE)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. Open the codepen link in safari\r\n\r\n2. Inspect the element\r\n\r\n3. Reduce the view width below 900px and refresh the page\r\n\r\n4. You will notice that both the red and blue image is requested.\r\n\r\n5. Comment out the vue instance and refresh the page.\r\n\r\n6. You will notice only the red image is requested (as expected).\r\n\r\n\r\n\r\n\r\n### What is expected?\r\nOnly the required picture resource is requested. \r\n\r\n### What is actually happening?\r\nBoth of the pictures resources are requested, causing redundant downloads.\r\n\r\n---\r\nIn Safari, adding a vue instance to any page will cause redundant picture sources to be requested. The picture element will behave correctly if the vue instance is removed.\r\n\r\n\r\nE.g.\r\n\r\n\r\n&#x3C;picture&#x3E;\r\n    &#x3C;source media=&#x22;(max-width: 900px)&#x22; srcset=&#x22;small.jpg&#x22;&#x3E;\r\n    &#x3C;img src=&#x22;large.jpg&#x22; alt=&#x22;&#x22;&#x3E;\r\n  &#x3C;/picture&#x3E;\r\n\r\n\r\n\r\nBy default, only the small.jpg should be requested when the view width is below 900px. However, if a vue instance is added to the page, then both the small.jpg and large.jpg are requested.\r\n\r\nThe mobile inspector shows the small.jpg request initiator as the page (expected). The large.jpg initiator is actually the vue instance.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nMy app had performance issue due to some slow lifecycle hooks.\r\nIt would be easy to find an issue like that if `Vue.config.performance` API records lifecycle hooks too.\r\n\r\n### What does the proposed API look like?\r\nWith `Vue.config.performance = true`, I can observe timings of lifecycle hooks as like `vue <Foo> mounted` in \"Timings\" section in the devtools as well as current `Vue.config.performance` behavior for init/compile/render/patch events.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/q0v6m8dr/1/](https://jsfiddle.net/q0v6m8dr/1/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. bind a handler to an event which with a '.once' modifier \r\n3. set null for the hanlder's return value\r\n2. trigger the event,  and  trigger again\r\n\r\n### What is expected?\r\nonly the first trigger will invoke handler,  under '.once' influence\r\n\r\n### What is actually happening?\r\nsubsequent trigger will also invoke handler beside the first one\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codepen.io/hezedu/pen/GRJYXGR](https://codepen.io/hezedu/pen/GRJYXGR)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nvue: 2.6.11\r\nhttps://github.com/vuejs/vue/blob/a59e05c2ffe7d10dc55782baa41cb2c1cd605862/dist/vue.runtime.js#L96-L102\r\n```js\r\ntoString(Object.create(null);\r\n```\r\nWill crash: \r\nTypeError: Cannot convert object to primitive value\r\n\r\n### What is expected?\r\nTypeError\r\n\r\n### What is actually happening?\r\nerror\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/t9fyx82u/5/](https://jsfiddle.net/t9fyx82u/5/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nnothing to do.\r\n\r\n### What is expected?\r\nview and text will be shown, just like view2 and text2.\r\n\r\n### What is actually happening?\r\nview and text in the #app are not show，but they can be displayed outside of #app\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement",null],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codepen.io/frOracle/pen/vYOEEVW](https://codepen.io/frOracle/pen/vYOEEVW)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nuse $http.delete in @click\r\n\r\n### What is expected?\r\n$http.delete is a function, not unary operator\r\n\r\n### What is actually happening?\r\na warning \"avoid using JavaScript unary operator as property name\"\r\n\r\n---\r\nRelated https://github.com/vuejs/vue/issues/5464\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/andrewharvey4/k6r3uzby/10/](https://jsfiddle.net/andrewharvey4/k6r3uzby/10/)\r\n\r\n### Steps to reproduce\r\nv-bind an object with a empty string key\r\n\r\n### What is expected?\r\nvue not to crash, it to either be silently ignored or a warning but not a fatal error\r\n\r\n### What is actually happening?\r\nan error is thown crashing the app\r\n\r\n```\r\nvue.js:4483 Uncaught DOMException: Failed to execute 'setAttribute' on 'Element': '' is not a valid attribute name.\r\n    at baseSetAttr (https://unpkg.com/vue@2.6.11/dist/vue.js:6778:10)\r\n    at setAttr (https://unpkg.com/vue@2.6.11/dist/vue.js:6753:7)\r\n    at Array.updateAttrs (https://unpkg.com/vue@2.6.11/dist/vue.js:6708:9)\r\n    at invokeCreateHooks (https://unpkg.com/vue@2.6.11/dist/vue.js:6064:24)\r\n    at initComponent (https://unpkg.com/vue@2.6.11/dist/vue.js:5997:9)\r\n    at createComponent (https://unpkg.com/vue@2.6.11/dist/vue.js:5980:11)\r\n    at createElm (https://unpkg.com/vue@2.6.11/dist/vue.js:5920:11)\r\n    at createChildren (https://unpkg.com/vue@2.6.11/dist/vue.js:6048:11)\r\n    at createElm (https://unpkg.com/vue@2.6.11/dist/vue.js:5949:11)\r\n    at Vue.patch [as __patch__] (https://unpkg.com/vue@2.6.11/dist/vue.js:6509:11)\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nHello Vue 👋\r\n\r\nI'm working on our [new JavaScript debugger](https://github.com/microsoft/vscode-js-debug) for VS Code, and ran into some problems when trying out Vue. The default vue-cli setup creates several supporting .vue scripts. For instance, open the Chrome devtools and ctrl p for \"App.vue\" in a new project. The top entry is the correct Vue file, the others aren't.\r\n\r\n![](https://memes.peet.io/img/Screen%20Shot%202020-01-17%20at%2011.47.46%20AM.png)\r\n\r\nFrom the VS Code perspective, the user might ask us to set a breakpoint in a Vue file. We know which file the breakpoint is attached to on disk, and we need to figure out which loaded file that breakpoint gets mapped to. However, because all these paths are quite similar and all (in the context of a generic web app) possibly the file we want, we end up putting the breakpoint in the wrong file and breaking in the incorrect place. And often the supporting scripts evaluate before the 'real' script does, so we can't, for example, wait and pick the best match from the possible candidates.\r\n\r\n### What does the proposed API look like?\r\nThe simplest solution would be to prefix the supporting files with some path like `__vue__`, or something along those lines. This would prevent the paths from incorrectly mapping to files that exist on disk.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[http://sorry-no-can-do.com](Sorry, I don't have time to setup a reproduction case for SSR, that's not a 5 minute thing).\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. Use SSR\r\n2. Add a `serverPrefetch` with `return Promise.reject()`\r\n\r\n### What is expected?\r\nAn error to occur due to the rejection in `serverPrefetch`\r\n\r\n### What is actually happening?\r\nNo error occurs, but the rendered result will not contain the component with the bad `serverPrefetch`.\r\n\r\n---\r\nCurrently, rejecting a promise in `serverPrefetch` with no value will create a broken response from SSR. By broken I mean that no error will occur with `renderToString`, so it looks like it was successful, but the rendered DOM may be missing components, including the root component all together.\r\n\r\nThis is because the rejection value from `serverPrefetch` is wired straight through to the `done` callback on `render`, but that callback only considers an error to have occurred if a value is provided. Due to this straight wiring, any `serverPrefetch` which rejects without a value will allow rendering to continue, but will skip the rendering of the component on which the error occurs. If that's the root component, the rendered result has no element for hydration to use in the rendered result, which means there's no way for the client to recover. For a real-life example of this, see vuejs/vue-apollo#901.\r\n\r\nHere's the relevant code, the `done` callback for `render`:\r\n\r\nhttps://github.com/vuejs/vue/blob/42fdf3f8378e5dc379808a4fa67b39c4a74ae191/src/server/create-renderer.js#L84-L87\r\n\r\nAnd where the rejection value from `serverPrefetch` is wired through:\r\n\r\nhttps://github.com/vuejs/vue/blob/42fdf3f8378e5dc379808a4fa67b39c4a74ae191/src/server/render.js#L65\r\n\r\nA fix could be as easy as expanding that `catch` to check for `err` and provide a default value if one is not provided. I'm punting on what that default would be, so I'm opening this as an issue rather than a PR.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.11\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/thirsty-heisenberg-elvz6?fontsize=14&hidenavigation=1&theme=dark](https://codesandbox.io/s/thirsty-heisenberg-elvz6?fontsize=14&hidenavigation=1&theme=dark)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. open the repo\r\n2. check the style of the green box\r\n\r\n### What is expected?\r\nThe green div's height should be 101px\r\n\r\n### What is actually happening?\r\nthe green div's height is 22px, cause inline style didn't work on this component\r\n\r\n---\r\nI check the web standard that if I assigned a string to a node's style with either `\"node.style.cssText\"` or add style directly in devtools with this `\"height: 100px; height:\" `,  the final height will be 100px. Obviously the invalid \"height: \" will be abandoned. \r\nThen I check the source code and find that the function `parseStyleText`  only uses regex to split the string and then assign it to result from value by value, no matter what the value is or if the value is valid. That is why the green box's height is incorrect.\r\nThen I create a PR try to fix this issue in web rendering but not in SSR.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://github.com/meditatingdragon/starter-gridsome-vuetify](https://github.com/meditatingdragon/starter-gridsome-vuetify)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nHave `gridsome` as a dependency (or whatever depends on `vue-server-renderer`) and observe GitHub and Snyk.\r\n\r\n### What is expected?\r\nNo vulnerabilities\r\n\r\n### What is actually happening?\r\nXSS vulnerability caused by an outdated version of `serialize-javascript` (i.e. older than `v2.1.1`).\r\n\r\n---\r\nI tried highlighting this issue in the discord server but it didn't seem that people cared. \r\nhttps://npmjs.com/advisories/1426\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/vue-test-default-slot-always-exec-syuny](https://codesandbox.io/s/vue-test-default-slot-always-exec-syuny)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nwhen computed props or method  declared in slot fallback , looks like this: \r\n\r\n```\r\n// XXX component\r\n\r\n<slot>\r\n       no render, but always run {{p}}, {{print()}} <Func/> \r\n</slot>\r\n\r\n// use it \r\n<XXX>\r\n actual replaced content \r\n</XXX>\r\n```\r\n\r\n\r\n### What is expected?\r\ncomputed and method not  invoked , because they can't  render \r\n\r\n### What is actually happening?\r\ncomputed is invoked once change.\r\nmethod is invoked once render .\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### What problem does this feature solve?\r\n**Reproduction link**\r\nPlease see: https://tinyurl.com/y5mlgqqh\r\n\r\n**Steps to reproduce**\r\n\r\n1. write a plugin\r\n2. overload Vue.use ( see the given link above for detail )\r\n\r\n**What is expected?**\r\nDuring compiling it fails, because the types are not matching.\r\n\r\n**What is actually happening?**\r\nIt compiles without errors\r\n\r\n### What does the proposed API look like?\r\nA possible solution is to change the type in vue/types/vue VueConstructor to: \r\n\r\n` use(plugin: PluginObject<unknown> | PluginFunction<unknown>, ...options: unknown[]): VueConstructor<V>;`\r\n\r\nSee: https://tinyurl.com/y6anfs8b\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codepen.io/gongph/pen/bGbQLGE?editors=1010](https://codepen.io/gongph/pen/bGbQLGE?editors=1010)\r\n\r\n\r\nReproduction code at below:\r\n\r\nJavascript: \r\n```js\r\nVue.component('current-user', {\r\n  data () {\r\n    return {\r\n      item: {\r\n        user: {\r\n          name: 'defualt name'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  template: `\r\n    <div>\r\n      <slot v-bind=\"item\"></slot>\r\n    </div>\r\n  `\r\n})\r\nnew Vue({\r\n  el: '#app'\r\n})\r\n```\r\nHtml:\r\n\r\n```html\r\n<div id=\"app\">\r\n  <current-user v-slot=\"{ user }\">\r\n   <!-- page print: `default name` -->\r\n    {{ user.name }}\r\n  </current-user>\r\n  <current-user v-slot=\"{ user = { name: 'gongph' } }\">\r\n    <!-- page print: { 'name': 'default name' }-->\r\n    {{ user }}\r\n  </current-user>\r\n</div>\r\n```\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. open brower console\r\n2. console print [Vue warn] is :  \r\n\r\n```bash\r\n[Vue warn]: Error compiling template:\r\ninvalid expression: Invalid shorthand property initializer in\r\nv-slot=\"{ user = { name: 'gongph' } }\"\r\n```\r\n\r\n### What is expected?\r\nif prop is undefined show `gongph` value. for example:\r\n\r\n```js\r\nVue.component('current-user', {\r\n  data () {\r\n    return {\r\n      item: '' // item is undefined\r\n    }\r\n  },\r\n  template: `\r\n    <div>\r\n      <slot v-bind=\"item\"></slot>\r\n    </div>\r\n  `\r\n})\r\n```\r\n```html\r\n<current-user v-slot=\"{ user = { name: 'gongph' } }\"\r\n <!-- expected output `gongph` -->\r\n  {{  user.name }}\r\n</current-user>\r\n```\r\n### What is actually happening?\r\n`gongph` value can normal render , but console show warn message: \r\n\r\n```bash\r\n[Vue warn]: Error compiling template:\r\ninvalid expression: Invalid shorthand property initializer in\r\nv-slot=\"{ user = { name: 'gongph' } }\"\r\n```\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nThis will improve the developer experience when using Vue in editors such as VSCode.\r\n\r\nCurrently, the developer must look up the default value in the [documentation](https://vuejs.org/v2/guide/components-props.html#Prop-Validation). And even there it is not clear, without trying it.\r\n\r\n### What does the proposed API look like?\r\nOne example:\r\n\r\nhttps://github.com/vuejs/vue/blob/b7c2d9366cf731a1551286b8ac712e6e0905070e/types/options.d.ts#L155\r\n\r\nThis line could get a JSDoc like:\r\n```\r\nIndicates whether the property must be set or is optional. Default is `false`.\r\n```\r\n\r\n### Example Result\r\n![Bildschirmfoto 2019-07-29 um 11 03 36](https://user-images.githubusercontent.com/7195563/62035661-91545000-b1f0-11e9-928d-f4f82cd6fb2b.png)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/vue-template-9r28t](https://codesandbox.io/s/vue-template-9r28t)\r\n\r\n### Steps to reproduce\r\nVisit the repo and check out the template compilation error for `App.vue`. Remove the `<template v-else>` to get rid of the error.\r\n\r\n### What is expected?\r\nThe template compiles properly\r\n\r\n### What is actually happening?\r\nThe template doesn't comiple\r\n\r\n---\r\nVue should allow to use slots inside a template tag that is inside component. Without this, the new slot syntax severely limits how one can put content into slots in more complex scenarios and forces repeating yourself on multiple template tags.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/vue-template-bqe44?fontsize=14](https://codesandbox.io/s/vue-template-bqe44?fontsize=14)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. Create a functional component\r\n2. Use that functional component inside a v-for\r\n3. Add a ref binding to the functional component to be able to get the DOM element in parent component\r\n\r\n### What is expected?\r\nThe ref in parent component is an array of DOM elements, like it is an array of vNodes when applying this steps to a non-functional component\r\n\r\n### What is actually happening?\r\nOnly the last DOM element of the v-for is bound to the ref. It's also just an element and not an array\r\n\r\n---\r\nThere's no warning about overriding previously existing ref\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### What problem does this feature solve?\r\nThe  ` [Vue warn]: Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option.` message doesn't provide any insight about the component being affected or the property being set. Having those in place would make the deubbing way more easier.\r\n\r\n### What does the proposed API look like?\r\n` [Vue warn]: Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option. Property being added: 'propertyName'.\r\n<component trace>`\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codepen.io/anon/pen/zQVRgG?editors=1010](https://codepen.io/anon/pen/zQVRgG?editors=1010)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nType something into the first field\r\n\r\nUncomment line 8 or 14 then try again\r\n\r\n### What is expected?\r\nIn console:\r\n```\r\nRender a\r\n```\r\n\r\n### What is actually happening?\r\nIn console:\r\n```\r\nRender a\r\nRender b\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.6.10\r\n\r\n### Reproduction link\r\n[https://codepen.io/sathomas/pen/Jqoyqo](https://codepen.io/sathomas/pen/Jqoyqo)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nComponent structure:\r\n\r\n    <transition-group>\r\n      <keep-alive>\r\n        <component />\r\n      </keep-alive>\r\n    </transition-group>\r\n\r\nChange dynamic component. Leave transition does not occur.\r\n\r\nIn repro example, click <kbd>Switch View</kbd>\r\n\r\n- Note 1: In repro example if `<keep-alive>` is removed via checkbox, all transitions work as expected.\r\n- Note 2: In repro example if `<transition-group>` is replaced with `<transition>`, all transitions work as expected.\r\n\r\n### What is expected?\r\nInitial component should transition out while new component transitions in.\r\n\r\n### What is actually happening?\r\nInitial component is removed immediately while new component transitions in.\r\n\r\n---\r\nIn actual use case, `v-show` is not a good option as the dynamic components involved are quite complex (1000s of DOM elements) and leaving them in the actual DOM causes performance problems.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.6.6\r\n\r\n### Reproduction link\r\nVue.config.errorHandler: [https://jsfiddle.net/0aeufxmr/5/](https://jsfiddle.net/0aeufxmr/5/)\r\n`errorCaptured` option: https://jsfiddle.net/shenron/kbuymoz0/\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nJust click `click1` and `click2` you will see the difference\r\n\r\n### What is expected?\r\nwhen clicking `click1`, the message should be error response\r\n\r\n### What is actually happening?\r\nmessage not changed\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nThe original v-slot implementation was not available in `this.$slots`, but that was added in 2.6.4. Scoped slots reduce unnecessary re-renders with nested slots, so this change would hopefully provide a performance improvement for component libraries. \r\n\r\n### What does the proposed API look like?\r\n`<foo>default slot</foo>`\r\n\r\nshould output\r\n\r\n```js\r\n_c('foo',{scopedSlots:_u([{key:\"default\",fn:function(){return [_v(\"default slot\")]},proxy:true}])})\r\n```\r\n\r\nEquivalent to `<foo v-slot>default slot</foo>`\r\n\r\n---\r\n\r\nNote #9580 could be a problem if lots of people rely on that behaviour. \r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,null,"enhancement"],"text":"### Version\r\n2.6.8\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/chrisvfritz/50wL7mdz/](https://jsfiddle.net/chrisvfritz/50wL7mdz/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nIt is throwing from the vue/dist/vue.js file of the latest version I am currently trying to isolate it, yet it seems connected with the new code added recently. Will add more steps ASAP if you still don't observe it.\r\n1) replicated with this repo - https://github.com/vuejs/vue-test-utils-mocha-webpack-example\r\n2) clone it\r\n3) npm i\r\n4) npm test - no error\r\n4) npm update vue\r\n5) npm test - ReferenceError: performance is not defined\r\n\r\nGreetings,\r\nPlamen \r\n\r\n\r\n### What is expected?\r\nno error observed\r\n\r\n### What is actually happening?\r\nan error  is observed\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nThis is in regards when Vue.config.performance is set to true. \r\nWhen there is multiple components of the same name, it is difficult to distinguish which component coincide to which performance information.\r\n\r\nOne simple use case is rendering components inside a v-for.\r\n\r\n### What does the proposed API look like?\r\nInstead of just using name (Vue._name), I suggest to include the _uid to better distinguish components with the same name\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement",null],"text":"### Version\r\n1.0.28\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/3ay9r8hz/](https://jsfiddle.net/3ay9r8hz/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nOpen README.md and search for End Of Life / LTS support\r\n\r\n### What is expected?\r\nFind information about expected response from VueJs regarding 1.x EOL/LTS\r\n\r\n### What is actually happening?\r\nNothing is mentioned regarding the stance from VueJs on supporting 1.x branches\r\n\r\n---\r\nOpening after discussion with @LinusBorg on the forum: https://forum.vuejs.org/t/vue-1-x-end-of-life-support/58143\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.8\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/ugv3rL7w/](https://jsfiddle.net/ugv3rL7w/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nAssign a function to \"Vue.config.optionMergeStrategies.created\" that uses the 3rd \"vm\" argument.\r\n\r\n### What is expected?\r\nThe documentation for \"optionMergeStrategies\" states:\r\n\r\n\"The context Vue instance is passed as the third argument.\"\r\n\r\n### What is actually happening?\r\nThe \"Vue.config.optionMergeStrategies.created\" function does not receive a Vue instance when merging properties of components.\r\n\r\n---\r\nThe \"vm\" argument is correctly passed when merging options of the root Vue instance, but not for components.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nCurrently, rejections in `serverPrefetch` cannot be handled\r\neg.\r\n```\r\nserverPrefetch() {\r\n\r\n   return Promise.reject('myError')\r\n}\r\n```\r\n\r\n\r\n### What does the proposed API look like?\r\nMaybe send `serverPrefetch` rejections as `renderStream` error event ?\r\n\r\neg.\r\n\r\n```\r\nconst renderStream = renderer.renderToStream(context)\r\nrenderStream.on('error', err => { ... })\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.6.5\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/1q5prknzk7](https://codesandbox.io/s/1q5prknzk7)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nclick trigger button\r\n\r\n### What is expected?\r\niframe not reload when component not update.\r\nThe dom element is reused when the component is not updated.\r\n\r\n### What is actually happening?\r\niframe reload when component not update.\r\n\r\n---\r\nI think it should be related to the virtual dom's diff rule.\r\nWhen the `showspan1` and `showspan2` are changed at the same time, the reload iframe will appear. \r\nThis problem also exists in version 2.5.x.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.3\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/mgoetzke/bsku79er/7/](https://jsfiddle.net/mgoetzke/bsku79er/7/)\r\n\r\n\r\n### Steps to reproduce\r\nSee https://jsfiddle.net/mgoetzke/bsku79er/7/. Once 'Break It' is pressed the application is not updating anything anymore. A runtime exception during render essentially killed it without any good way to handle it.\r\n\r\nWhenever a progress elements value is set to NaN, the Error `TypeError: \"Value being assigned to HTMLProgressElement.value is not a finite floating-point value.\"` is being listed in the console, but somehow instead of just handling this render error (handled by standard component error handler) the component and the entire application is permanently damaged after this.\r\n\r\nOf course the developer should foresee this and write it with the appropriate defensiveness, but runtime errors inside the render function of a component should not invisibly leave the entire application in a non-reactive state. \r\n\r\nEDIT: Updated source of console message\r\n\r\n### What is expected?\r\nHandle this as a standard render exception.\r\n\r\n### What is actually happening?\r\nVue is not reactive anymore. Eg.no button has any effect anymore.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.6.1\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/3kpf9u54/4/](https://jsfiddle.net/3kpf9u54/4/)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. Observe the contents of the `<template>` displayed\r\n2. Change the code from `<template slot=\"content\">` to `<template #content>` or `<template v-slot:content>` and observe the contents stop being displayed\r\n3. Change the render function code from `this.$slots.content` to `this.$scopedSlots.content()` and observe the contents be displayed again\r\n\r\n### What is expected?\r\nContents are displayed all the time; old render functions don't break when used with new syntax\r\n\r\n### What is actually happening?\r\nNew syntax forces slots into being scoped, breaking existing render functions\r\n\r\n---\r\nI'm actually not sure if this is intentional or not, but it breaks Vuetify, and probably other things too. Assuming this _is_ intentional, it makes writing functional components more difficult, as you have to either:\r\n\r\n1. check both `this.$slots` (for Vue pre-2.6) and `this.$scopedSlots` (for Vue post-2.6)\r\n2. only check `this.$scopedSlots` and ask Vue pre-2.6 users to add `slot-scope` everywhere so all slots become scoped\r\n3. only check `this.$slots` and ask Vue post-2.6 users to use the legacy syntax\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/8y0yqono38](https://codesandbox.io/s/8y0yqono38)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nCreate a wrapper component that has another custom component as its root node. Put a directive on the wrapper component that adds a class to the element. Do anything that updates the child's class. The classes assigned in the directive of the parent vnode will be wiped out, and the directive has no way of knowing it. I _think_ this is because the vnodes were merged into the same element. So, the child vnode gets patched, causing the class update and the dom change to the same element that the parent vnode is using, but, because no actual patch happened to the parent vnode, the parent directive never has a chance to readd it's class.\r\n\r\nI think this probably _technically_ correct behavior, but it still presents (in my opinion) an issue with directive functionality. Which is that my host dom element can be mutated by a different vnode and I'm not aware of it.\r\n\r\n### What is expected?\r\nThe `update` trigger runs when my host element is mutated.\r\n\r\n### What is actually happening?\r\nThe class the directive adds is overwritten and my directive has no chance to readd the class.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/ppyq71wrxj](https://codesandbox.io/s/ppyq71wrxj)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n(See minimal repro)\r\n\r\n1. have a component with an `HTMLMediaElement` that binds `:srcObject.prop` to some data property (that starts off as `null`):\r\n```\r\n<audio :srcObject.prop=\"stream\">\r\n```\r\n2. set it to some valid `MediaStream`:\r\n```\r\nthis.stream = new MediaStream();\r\n```\r\n3. set it back to `null`:\r\n```\r\nthis.stream = null;\r\n```\r\n\r\n### What is expected?\r\nI expect the audio.srcObject to be null\r\n\r\n### What is actually happening?\r\nit stays as the MediaStream and there's a TypeError in the log.\r\n\r\n---\r\nI noticed that it did actually work in my first attempt to write the repro example: https://jsfiddle.net/4tnkapxo/1/ (probably because the whole thing is inline?)\r\n\r\nIm not sure how helpful this is, but based on the stack trace it's related to this code, found in `updateDOMProps`:\r\n\r\n```\r\n  for (key in oldProps) {\r\n    if (isUndef(props[key])) {\r\n      elm[key] = '';\r\n    }\r\n  }\r\n```\r\n\r\n`isUndef(null)` is evaluating true, and so it's trying to set the prop to `''`, but `srcObject` specifically needs it to be `null` or a `MediaStream`\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://template-explorer.vuejs.org/#%3Cdiv%3E%0A%20%20%20%20%3Ctemplate%0A%20%20%20%20%20%20slot%3D%22row_expander%22%0A%20%20%20%20%20%20slot-scope%3D%22%7B%0A%20%20%20%20%20%20%20%20row%0A%20%20%20%20%20%20%7D%22%0A%20%20%20%20%20%20v-if%3D%22%0A%20%20%20%20%20%20%20%20longCondition1%20%26%26%0A%20%20%20%20%20%20%20%20anotherLongCondition%20%3D%3D%3D%20'my%20awesome%20result'%20%26%26%0A%20%20%20%20%20%20%20%20anotherWhichBreakTheLineLength%0A%20%20%20%20%20%20%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Csomething%20%2F%3E%20%3Csomething%20%2F%3E%0A%20%20%20%20%3C%2Ftemplate%3E%0A%20%3C%2Fdiv%3E](https://template-explorer.vuejs.org/#%3Cdiv%3E%0A%20%20%20%20%3Ctemplate%0A%20%20%20%20%20%20slot%3D%22row_expander%22%0A%20%20%20%20%20%20slot-scope%3D%22%7B%0A%20%20%20%20%20%20%20%20row%0A%20%20%20%20%20%20%7D%22%0A%20%20%20%20%20%20v-if%3D%22%0A%20%20%20%20%20%20%20%20longCondition1%20%26%26%0A%20%20%20%20%20%20%20%20anotherLongCondition%20%3D%3D%3D%20'my%20awesome%20result'%20%26%26%0A%20%20%20%20%20%20%20%20anotherWhichBreakTheLineLength%0A%20%20%20%20%20%20%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Csomething%20%2F%3E%20%3Csomething%20%2F%3E%0A%20%20%20%20%3C%2Ftemplate%3E%0A%20%3C%2Fdiv%3E)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nWhen using a `v-if` which match these 3 conditions:\r\n- written on multiple line (first condition on next line)\r\n- defined on a `template` element\r\n- the template use the `slot` property\r\n\r\n…then the template compiler does not encapsulate the code in parenthesis, leading to improper condition.\r\n\r\nSee the provided Vue Template Explorer for the following code:\r\n```jsx\r\n<div>\r\n    <template\r\n      slot=\"row_expander\"\r\n      slot-scope=\"{\r\n        row\r\n      }\"\r\n      v-if=\"\r\n        longCondition1 &&\r\n        anotherLongCondition === 'my awesome result' &&\r\n        anotherWhichBreakTheLineLength\r\n      \"\r\n    >\r\n      <something /> <something />\r\n    </template>\r\n </div>\r\n```\r\n\r\n### What is expected?\r\nThe return of scopedSlots.fn must encapsulate the condition inside parenthesis.\r\n\r\n```jsx\r\nfunction render() {\r\n  with(this) {\r\n    return _c('div', {\r\n      scopedSlots: _u([{\r\n        key: \"row_expander\",\r\n        fn: function ({\r\n          row\r\n        }) {\r\n          return (\r\n            longCondition1 &&\r\n            anotherLongCondition === 'my awesome result' &&\r\n            anotherWhichBreakTheLineLength\r\n           ) ? [_c('something'), _c('something')] : undefined\r\n        }\r\n      }])\r\n    })\r\n  }\r\n}\r\n```\r\n\r\n### What is actually happening?\r\nThe return statement is incorrect.\r\n\r\n```jsx\r\nfunction render() {\r\n  with(this) {\r\n    return _c('div', {\r\n      scopedSlots: _u([{\r\n        key: \"row_expander\",\r\n        fn: function ({\r\n          row\r\n        }) {\r\n          return\r\n          longCondition1 &&\r\n            anotherLongCondition === 'my awesome result' &&\r\n            anotherWhichBreakTheLineLength ?\r\n            [_c('something'), _c('something')] : undefined\r\n        }\r\n      }])\r\n    })\r\n  }\r\n}\r\n```\r\n\r\n---\r\nThis is related to the usage of Prettier which automatically break on multiple lines the condition if it is too long (see https://github.com/prettier/prettier/issues/5561)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codepen.io/anon/pen/MzpZoz?editors=1011](https://codepen.io/anon/pen/MzpZoz?editors=1011)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nOpen google chrome dev console  \r\nGo in 'Memory' tab  \r\nSelect 'Allocation instrumentation timeline' and check 'Record allocation stacks'  \r\nLaunch for 30 seconds  \r\nOn your snapshot select 'Allocation' on the top left drop-down  \r\nOrder by 'Count'  \r\nYou will see high number of match called (a lot more than the actual var change)\r\n\r\n### What is expected?\r\nExpected to have match number closer to the number of var change.\r\n\r\n### What is actually happening?\r\nMatch is executed lot of time and consume lot of memory.\r\n\r\n---\r\nI think it's the way i deal with the object that it's not the right way but i search in the doc and couldn't find something related to that behavior and how to manage it (perhaps use store ?).\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/teddy_scmp/2m6kv3rn/](https://jsfiddle.net/teddy_scmp/2m6kv3rn/)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1. Open console\r\n2. click the TOGGLE bottom\r\n\r\n### What is expected?\r\nIt is weird that the component between the two v-if will destroy and mount again\r\n\r\n### What is actually happening?\r\n1. AComponent is destroyed which is unexpected\r\n2. BComponent will keep, which I only added a class there.\r\n\r\n---\r\nIn addition, I find that DIV will cause this issue, if I added a class / change it to a tag / button, it won't destroy.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codepen.io/brophdawg11/pen/OBdZyX](https://codepen.io/brophdawg11/pen/OBdZyX)\r\n\r\n\r\n### Steps to reproduce\r\nI'm opening this issue as a follow up to https://github.com/vuejs/vue/issues/8247, as I don't think the solution provided there is suitable for all use-cases.  In a fairly simple UI, where everything is relatively positioned and flows downward, it would likely be fine to include `<noscript>` outside the context of the Vue application, and it would render correctly above the entire app.\r\n\r\nHowever, there are plenty of other UI's that it may not be desirable or feasible to include `<noscript>` _outside_ of the Vue application context and display it properly.  The linked codepen shows a simple fixed-header layout, where including the `<noscript>` tag outside the Vue application context results in the `<noscript>` tag being hidden _behind_ the fixed header, where in reality it is intended to be rendered inside the main body content, and thus below the fixed header.  \r\n\r\nThe `<noscript>` outside the Vue context also has the unintended effect of pushing down the main content, which has a proper margin-top to account for the static-height fixed header.\r\n\r\nPer MDN, `<noscript>` is Flow Content (https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Flow_content), it is perfectly viable to exist outside the `<head>` (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/noscript), and is perfectly valid to nest inside the DOM in a `<div>`, as div's allow Flow Content as their children (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div).\r\n\r\nPlease reconsider the decision to not permit `noscript` tags in Vue templates.\r\n\r\n### What is expected?\r\n`<noscript>` elements should render properly in Vue templates\r\n\r\n### What is actually happening?\r\n`<noscript>` elements do not render properly in Vue templates and cause hydration issues when in SSR\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/decademoon/50wL7mdz/759740/](https://jsfiddle.net/decademoon/50wL7mdz/759740/)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n```\r\n<foo>\r\n  <bar slot-scope/>\r\n</foo>\r\n```\r\n\r\n### What is expected?\r\n`<bar slot-scope>` should be a scoped slot.\r\n\r\n### What is actually happening?\r\n`<bar slot-scope>` is rendered as a child as if `slot-scope` were not present.\r\n\r\n---\r\nAs a workaround, I've been using a dummy variable to force it to be a scoped slot:\r\n\r\n```<bar slot-scope=\"scope\"/>```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\nhttps://jsfiddle.net/k72f3Lon/\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1.webpack project with vue .\r\n2.add a component .\r\n3.create instance of Vue .\r\n4.add a property `data:function(){return {a:{中文:\"\",b:\"\"}}}` to the instance.\r\n5.add watch properties to the instance as `watch:{'a.b':function(val){},'a.中文':function(val){}}`\r\n6.console show error that Watcher only accepts simple dot-delimited paths. \r\n\r\n### What is expected?\r\nno error the code run continue\r\n\r\n### What is actually happening?\r\nthe code seems stopped to run\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nWhen Vue is mounting, the function `isUnknownElement` is called and checks, among others, whether the element tag is in the list of `ignoredElements`. In the context of an app that uses multiple web components, we don't want to manually add every new component's tag to the `ignoredElements` list. Maintaining that list could quickly become a headache. If the  `isUnknownElement` also checks the custom elements registry, it could figure out that the element in question is not necessarily unknown.\r\n\r\n### What does the proposed API look like?\r\nThe API would stay the same, but on top of checking for `config.ignoredElements` in the function `isUnknownElement`, we would also check if `window.customElements.get(vnode.tag)` is defined or not. If it is defined, then we return false.\r\n\r\nI am happy to submit a pull request, I just wanted to discuss this first to make sure there aren't design constraints to adding something like this.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/zwm20ozlym](https://codesandbox.io/s/zwm20ozlym)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\ncheck reproduction url\r\n\r\n### What is expected?\r\nDuplicate keys detected to be warned\r\n\r\n### What is actually happening?\r\nDuplicate keys detected not warned\r\n\r\n---\r\nwhen addVnodes is called, vnodes with same key are not warned\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nWhen rendering a script tag on server the content is escaped, breaking the js code.\r\n\r\n```html\r\n<script>\r\n  var x = \"y\";\r\n</script>\r\n```\r\n\r\nis rendered as \r\n\r\n```html\r\n<script>\r\n  var x = &quot;y&quot;;\r\n</script>\r\n```\r\n\r\n\r\n### What does the proposed API look like?\r\nA solution would be to allow users to define what to be escaped, to override this map\r\n\r\nhttps://github.com/vuejs/vue/blob/833175e9d6e8f47367e49e1752cd149a677cdae8/src/platforms/web/server/util.js#L43\r\n\r\nOr a option to disable escaping et all here \r\n\r\nhttps://github.com/vuejs/vue/blob/52719ccab8fccffbdf497b96d3731dc86f04c1ce/src/server/optimizing-compiler/codegen.js#L228\r\n\r\nThanks.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[https://codepen.io/cb109/pen/xarvBZ](https://codepen.io/cb109/pen/xarvBZ)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nPlease open the codepen link in Safari 9 on iOS, which is where I observed the bug (works fine in Chrome 68 on Ubuntu 18).\r\n\r\n\r\n\r\n\r\n\r\n### What is expected?\r\nThere are two inputs, the first working as expected, the second showing some weird behaviour:\r\n\r\nThe first textfield has a handler to fire only when pressing escape. Typing should work as expected, pressing escape while focused should clear the input.\r\n\r\nThe second textfield has a handler for an unknown key code by using an unknown key modifier alias. Typing should work the same as for the first input.\r\n\r\n### What is actually happening?\r\nTyping into the second input in Safari 9 on iOS it will always trigger the `@keyup` handler, thus clearing the input while typing. This feels wrong.\r\n\r\nIMHO this should not happen. If a key modifier-alias/code is not recognized, it should not be triggered by any key.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement",null],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codepen.io/anon/pen/BOpJZb](https://codepen.io/anon/pen/BOpJZb)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\n1- Open the console\r\n2- Click the button\r\n\r\n### What is expected?\r\nIn fact I don't know.  I would expect not to see the error but I'm thinking maybe I'm doing something wrong. \r\n\r\n### What is actually happening?\r\nCannot read property '$vnode' of null appears in the console\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[http://jsfiddle.net/wf48v9de/3/](http://jsfiddle.net/wf48v9de/3/)\r\n\r\n\r\n\r\n\r\n\r\n### Steps to reproduce\r\nRun the fiddle and look at console.\r\n\r\n### What is expected?\r\nIf there is not registered directive named 'v-fake', Vue should ignore this attribute of an element.\r\n\r\n### What is actually happening?\r\nVue treat every 'v-[something]' attribute as directive, regardless if it is registered globally or locally, or not at all. It is trying to compute the value of 'v-' beginning attribute, and in effect throws TypeError, as it doesn't find property named like string passed to attribute. \r\n\r\n---\r\nif it is intentional, there should be information about such behavior in Vue docs. However in my opinion it should ignore such attributes.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nCurrently there is no obvious way to debug an error when including the index value in v-bind:key with v-for when using transitions. This causes erratic and unexpected behavior from transitions (and I would suspect other side effects, but these are untested).\r\n\r\nThis feature would alert the developer that they have used index value in a place where it will cause errors with transitions.\r\n\r\n**Example error:**\r\n\r\nThis example should illustrate how difficult it is to determine why the v-for combined with transition-group fails.\r\n\r\nIn the example below there are 3 uses of v-for with :key. (1) one works fine, it doesn't include index in the :key value. (2) uses index as the key (ie, v-bind:key=\"index\"). (3) uses a concatenated version (v-bind:key=\"item  '_' index\"\r\n\r\nhttps://codepen.io/megacromulent/pen/gdMYLx?editors=1010\r\n\r\nNote: this behavior was thought to be a bug because of lack of documentation on this behavior ( #8718 ) and having a console log entry would have solved the confusion instantly during development, instead of hours of debugging and reporting.\r\n\r\n### What does the proposed API look like?\r\nCheck to see if the index value is used anywhere in :key, and then check if a transition is being used, if so, then display console error, or at least a warning.\r\n\r\nThe proposal is for the dev builds only, so no additions/expansions to the API are needed for the production builds.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.5.17\r\n\r\n### Reproduction link\r\n[http://localhost:8080](http://localhost:8080) (any local dev setup)\r\n\r\n### Steps to reproduce\r\n- Run any dev build\r\n- Open the page Firefox without vue devtools installed\r\n- Open devtools console\r\n\r\n### What is expected?\r\nDevtools extension gets recommended\r\n\r\n### What is actually happening?\r\nRecommendation only shows for Chrome, not in Firefox\r\n\r\n---\r\nLogic is in https://github.com/vuejs/vue/blob/master/src/platforms/web/runtime/index.js#L51\r\n\r\nTwist is that `isChrome` is only used in this one code; so maybe it could be changed to `hasCompatibleExtension` and include a Firefox UA detection. Alternatively UA detection can be dropped, so the link is always shown and users can figure out that they might switch browsers to use the devtools.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/sg0bkLhv/7/](https://jsfiddle.net/sg0bkLhv/7/)\r\n\r\n### Steps to reproduce\r\n* Register a component with a slot\r\n* Use the component in a Vue instance with comments=true, filling the slot with only HTML comment(s)\r\n\r\n### What is expected?\r\nThe HTML comment is rendered into the slot.\r\n\r\nThis could be a breaking \"fix\" for someone who is running with comments=true and still relying on this behavior. If the current behavior is kept, I think it should at least be documented.\r\n\r\n### What is actually happening?\r\nThe HTML comment is discarded and the slot uses its fallback content instead.\r\n\r\nIf any other content is provided together with the HTML comment, all content is kept.\r\n\r\n---\r\nI am developing for a CMS which uses HTML comments to provide its editing capabilities. It has the concept of \"areas\", which are similar to Vue's slots, so it would be handy to render areas into slots. An empty area (e.g. in a newly created page) consists solely of an HTML comment. Since the comment is stripped by Vue, the editing tools are not available.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/vn7jz1l1kl](https://codesandbox.io/s/vn7jz1l1kl)\r\n\r\n### Steps to reproduce\r\nClick the button that says \"refresh\"\r\n\r\n### What is expected?\r\nNothing should happen\r\n\r\n### What is actually happening?\r\n[Vue warn]: Duplicate presence of slot \"default\" found in the same render tree - this will likely cause render errors.\r\n\r\n\r\n---\r\nI have a component `B` which accepts a scopedSlot, and a component `A` which accepts a slot. `A` is passing in it's slot into the scopedSlot of `B`\r\n\r\n```\r\n<template slot-scope=\"scope\">\r\n          <slot></slot>\r\n</template>\r\n```\r\n\r\nWhen the component `B` gets rerendered, I see this warning in the console. `B` passes a method to the scoped slot which will cause it to rerender when called.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.17-beta.0\r\n\r\n### Reproduction link\r\n[https://github.com/vuejs/vue/blob/dev/src/shared/util.js](https://github.com/vuejs/vue/blob/dev/src/shared/util.js)\r\n\r\n### Steps to reproduce\r\n1. Go to https://github.com/vuejs/vue/blob/dev/src/shared/util.js\r\n\r\n### What is expected?\r\nComments in the `shared/util.js` code to have\r\n- Consistent use of periods\r\n- Consistent use of commas\r\n- Consistent capitalization\r\n- Correct use of articles (a, an, the)\r\n- Correct pluralization\r\n- Shorter sentences in `polyfillBind` description\r\n- Clearer description for `genStaticKeys`\r\n- Description for `looseIndexOf` to be present\r\n\r\n### What is actually happening?\r\nNone of the above\r\n\r\n---\r\nI am working on a PR to improve the above. Interestingly, this will be my first contribution to Vue.js.\r\n\r\n_EDIT:_ Raised the PR — https://github.com/vuejs/vue/pull/8529\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codepen.io/anon/pen/KBMaOY](https://codepen.io/anon/pen/KBMaOY)\r\n\r\n### Steps to reproduce\r\n- Open the codepen https://codepen.io/anon/pen/gjMgzG\r\n- Click a couple of times to list 0 item, then 1000\r\n- See the memory increasing\r\n- Try force GC (trash icon) before measure it\r\n- Take heap snapshots in Chrome \"Memory\" tab\r\n- Watch the memory usage in the Chome task manager (shift   esc)\r\n- Watch the memory usage in OS task manager\r\n\r\n### What is expected?\r\nSame memory usage after garbage collector\r\n\r\n### What is actually happening?\r\nDespite the \"Performance\" tab displays the same memory usage, the \"Memory\" heap snapshot displays a memory increase.\r\nAlso, the both Chrome and OS task managers show the memory only increasing.\r\n\r\n---\r\nIt get worse when:\r\n- Using Vuei18n (even without translating)\r\n- Having big children components\r\n\r\nTested on:\r\n- Windows 7 64 Bits\r\n- Chrome 67.0.3396.99 64 bits\r\n\r\nPlease, consider that:\r\n- I may be doing something wrong\r\n- It can be a Chrome issue\r\n- It can be an OS issue\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nI am building a VueJS frontend where templates are coming from a backend where end users contributed them in a CMS or something else. VueJS is bundled with esm in order to have the Vue.compile method.\r\n\r\nWhen I run Vue.compile with the template string coming from the backend, I have no way to know if a compilation error occured in order to display a message to the user. In development I just have the warn messages in the console.\r\n\r\n### What does the proposed API look like?\r\nVue.compile could return an error boolean in an attribute or an array of all errors that occured during compilation.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nWhen custom `Vue.config.errorHandler` defined by the user, it will stop firing original [`logError `](https://github.com/vuejs/vue/blob/c2b1cfe9ccd08835f2d99f6ce60f67b4de55187f/src/core/util/error.js#L38).\r\n\r\nThe problem is that there is no straight way to recreate `logError ` behavior in custom `Vue.config.errorHandler` without requiring some Vue's internals.\r\n\r\nThis issue is partially related to [raven-js#1416](https://github.com/getsentry/raven-js/issues/1416), which defines custom `errorHandler`... which prevents Vue from login errors to the console.\r\n\r\n### What does the proposed API look like?\r\nI think Vue should by default expose original `errorHandler` under `Vue.config.errorHandler`. In other words, `Vue.config.errorHandler` shouldn't be `undefined` by default.\r\n\r\nIf the user would like to override `errorHandler`, he will reassign it. Otherwise, it would be possible to save original `Vue.config.errorHandler` into some variable and call it within custom `errorHandler`.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/106qozol1j](https://codesandbox.io/s/106qozol1j)\r\n\r\n### Steps to reproduce\r\nIn the component TestA the value is passed as prop => the key value is present in the $attrs variable\r\n\r\nIn the component TestB the value is passed as v-model => $attrs is empty\r\n\r\n### What is expected?\r\nThe key \"value\" should be present in $attrs variable\r\n\r\n### What is actually happening?\r\n$attrs is empty\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17-beta.0\r\n\r\n### Reproduction link\r\n[https://github.com/nirazul/vue-loader-bug-repro](https://github.com/nirazul/vue-loader-bug-repro)\r\n\r\n### Steps to reproduce\r\n1. `npm install`\r\n2. `npm run build`\r\n3. `npm run watch`\r\n4. Open `./public/index.html`\r\n5. Inspect `main.bundle.js` in dev tools\r\n6. On line 9044 you will find a duplicated key `value`\r\n\r\n### What is expected?\r\nA valid output from vue-template-compiler without duplicated value props, or at least a warning that the usage of dynamic input field types is prohibited in certain cases.\r\n\r\n### What is actually happening?\r\nIn IE11 a blank page is rendered\r\n\r\n---\r\nI'm using a centralized component for both radio and checkbox input fields as the markup is 90% the same.\r\nAs we switched from webpack 3 to webpack 4, we had to also upgrade the vue-loader version from 12 to 13 or 14, which introduced this bug. \r\nPrior to version 13, vue-template-renderer was not enforcing strict mode on all of its rendered templates. This is now the case, introducing this critical bug.\r\n\r\n\r\nReferences:\r\nhttps://vuejs.org/v2/guide/forms.html#Radio-1\r\nhttps://github.com/vuejs/vue/issues/7048\r\nhttps://github.com/vuejs/vue/issues/6917\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.17-beta.0\r\n\r\n### Reproduction link\r\n[https://codepen.io/cxtom/pen/XYKgde](https://codepen.io/cxtom/pen/XYKgde)\r\n\r\n### Steps to reproduce\r\n1. using v-html and the string has \\&quot; \\&#39;\r\n2. ssr\r\n3. warn not match during hybrating in browser\r\n\r\n### What is expected?\r\nnot warn The client-side rendered virtual DOM tree is not matching server-rendered content\r\n\r\n### What is actually happening?\r\nwarn The client-side rendered virtual DOM tree is not matching server-rendered content.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nMakes for a better development experience with vue SSR.\r\n\r\nI was looking into why it takes 500ms to render an single-component page from the server in our fairly large application and found an interesting issue. Webpack creates ~40 bundles for us. Altogether, these weigh ~20MB. The way  `VueSSRServerPlugin` plugin works, as you know, is it combines all of these files into a single `vue-ssr-server-bundle.json` file. Reading that file in node is fast (5ms on average) for us, but after reading it we need to `JSON.parse` it before providing to `createBundleRenderer` and _that_ takes ~400ms.\r\n\r\nInitially I was thinking of using webpack's `splitChunks`, to reduce the file-size (our router dynamically imports top-level pages, so each chunk could benefit from not having to bring in common component) but `VueSSRServerPlugin` does not support that (and throws the \"Server-side bundle should have one single entry file\" error).\r\n\r\n### What does the proposed API look like?\r\nI'm not exactly sure what to do here at this point as I just noticed this issue. I'm concerned that as the app grows, the json parse time will increase adding seconds to the load-time in development.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.17-beta.0\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/r0lr534k94](https://codesandbox.io/s/r0lr534k94)\r\n\r\n### Steps to reproduce\r\nOpen the console and see the error:\r\n```Javascript\r\nproxyConsole.js:72 [Vue warn]: Property or method \"$_testMixin_testData\" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.\r\n\r\nfound in\r\n\r\n---> <TestMixin> at /src/App.vue\r\n       <Root>\r\n```\r\n\r\n### What is expected?\r\nIt's expected for the prop to be defined\r\n\r\n### What is actually happening?\r\nThe prop is undefined if the variable contains symbols in the beginning\r\n\r\n---\r\nI am not completely sure if this is a bug or intended, since I think it is a bug I opened this issue, yet if this is intended the error shown should be giving more details, it took me some time to understand what was the error because it isn't clear just from the error message.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.17-beta.0\r\n\r\n### Reproduction link\r\n[https://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js](https://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js)\r\n\r\n### Steps to reproduce\r\nNo need to repro, it's written in the code.\r\n\r\nhttps://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js#L107\r\n\r\nhttps://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js#L139-L141\r\n\r\nhttps://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js#L160\r\n\r\nhttps://github.com/vuejs/vue/blob/2efc0446b3ac1f18fff8b59215e7b60d51c41965/src/server/template-renderer/index.js#L184\r\n\r\n```\r\nhref=\"${this.publicPath}/${file}\"\r\nsrc=\"${this.publicPath}/${file}\"\r\n```\r\nThe `publicPath` of `webpackConfig.output` could be empty, and it is resonable.\r\n\r\n### What is expected?\r\n- `publicPath = ''` generates `assets/css/xxx`\r\n- `publicPath = '/'` generates`/assets/css/xxx` \r\n\r\nThey are rather different\r\n\r\n### What is actually happening?\r\n- `publicPath = ''` and `publicPath = '/'` both generate `/assets/css/xxx`\r\n\r\n---\r\nSo we could introduce an extra judgement for `this.publicPath === ''`\r\n\r\nOr we could just use `publicPath` directly.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://jsbin.com/gutivaf/edit?html,css,js,output](https://jsbin.com/gutivaf/edit?html,css,js,output)\r\n\r\n### Steps to reproduce\r\n- Add a comment inside any style attribute on an element within the Vue app instance. Example:\r\n\r\n      ... style=\"color:blue; /* This is a comment */ background-color:yellow;\" ...\r\n\r\n\r\n### What is expected?\r\nThe element should have blue text on yellow background.\r\n\r\n### What is actually happening?\r\nThe comment breaks the attribute and all the style properties *after* the comment are ignored (not coming in effect).\r\n\r\nIn the reproduction example the text is blue but the background is *not* yellow. \r\n\r\n---\r\n(The JSBin contains a slightly different example. I hope you can live with that.)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null,null],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/50wL7mdz/323954/](https://jsfiddle.net/50wL7mdz/323954/)\r\n\r\n### Steps to reproduce\r\n1. Create a component that uses a render function to return some parent element with `this.$scopedSlots.default({})` as the children.\r\n2. Create an instance of that component that passes multiple elements to the scoped slot and see `this.$scopedSlots.default({})` return an array.\r\n3. Create an instance of that component that passes a single element to the scoped slot and see `this.$scopedSlots.default({})` return a VNode, **not an array with a single VNode in it**.\r\n\r\n### What is expected?\r\n`this.$scopedSlots.default({})` should always return an array of VNodes, even if there's only one VNode in the array.\r\n\r\nThis is how `this.$slots.default` behaves.\r\n\r\n### What is actually happening?\r\n`this.$scopedSlots.default({})` returns mixed types: an array when there are multiple elements in the slot, or a direct VNode instance if there is only a single child.\r\n\r\n---\r\nThis is inconsistent with how regular slots behave in render functions, and means any render function component rendering scoped slots as children needs to type check the result of invoking the slot to decide if it needs to be wrapped in an array:\r\n\r\n```js\r\nrender(h) {\r\n  const children = this.$scopedSlots.default({})\r\n  return h('div', {}, Array.isArray(children) ? children : [children])\r\n}\r\n```\r\n\r\nContrast that with regular slots where it is always safe to pass the slot as a child because it is always an array:\r\n\r\n```js\r\nrender(h) {\r\n  return h('div', {}, this.$slots.default)\r\n}\r\n```\r\n\r\nIt's a bummer because although this is pretty easy to classify as a bug, it would be a breaking change for a lot of people using scoped slots to write components that use the default scoped slot as their root element:\r\n\r\n```js\r\nrender() {\r\n  return this.$scopedSlots.default({ someDataThisComponentIsResponsibleFor })\r\n}\r\n```\r\n\r\nIf this bug were fixed, anyone with a component like that would need to re-write it like this:\r\n\r\n```js\r\nrender() {\r\n  return this.$scopedSlots.default({ someDataThisComponentIsResponsibleFor })[0]\r\n}\r\n```\r\n\r\nIf this isn't a bug and is by design, I'd love to better understand the reasoning!\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.7\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/3s9sem0m/](https://jsfiddle.net/3s9sem0m/)\r\n\r\n### Steps to reproduce\r\nI am using laravel-admin.org and I have incorporated vuejs into that system. The problem is that there are some functionalities that use the tag template, to then duplicate it using jquery, and vuejs are rendering those tags (even if you add the v-pre directive) and breaking all that functionality.\r\n\r\n### What is expected?\r\nThe directive v-pre should prevent render the tag template\r\n\r\n### What is actually happening?\r\nThe tag template is rendered and disappears, preventing the later use of the js script and breaking all the functionality\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,null,"enhancement"],"text":"### Version\r\n2.5.15\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/e2yxoomh/2/](https://jsfiddle.net/e2yxoomh/2/)\r\n\r\n### Steps to reproduce\r\nCreate a component that includes the word \"map\" (case insensitive). For example:\r\n- Map\r\n- MapView\r\n- mapper\r\n\r\n\r\n### What is expected?\r\nI expect these to work, or at least give me some sort of error message.\r\n\r\n### What is actually happening?\r\nNothing happens. The components do not render. There is no error message.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codepen.io/jbenner/pen/geJqex](https://codepen.io/jbenner/pen/geJqex)\r\n\r\n### Steps to reproduce\r\n1. Instantiate a Vue instance with a `data` property named `locations` which is an array consisting of `['all', 'north', 'south', 'east', 'west']`.\r\n2. Iterate over the locations in an `option` tag like so `<option v-for=\"location in locations\" :selected=\"location === 'all'\">{{ location }}</option>`.\r\n\r\n### What is expected?\r\nThe `selected` attribute to be set on the \"all\" `option` element.\r\n\r\n### What is actually happening?\r\nThe `selected` attribute is not being set.\r\n\r\n---\r\nI've also tried the following while attempting to debug but to no avail:\r\n\r\n```\r\n<option v-for=\"(location, index) in locations\" :selected=\"index === 0\">{{ location }}</option>\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nIt looks a little awkward if there are duplicate class names in a DOM element.\r\n\r\n### What does the proposed API look like?\r\nIf you look into [this fiddle](https://jsfiddle.net/zLnzuh1f/). \r\n\r\nThe `div` element of `foo` component will have two `bar` classes in it. So it looks like.\r\n\r\n```html\r\n<div class=\"bar bar\"></div>\r\n```\r\n\r\nIf the two classes would have been merged into one.\r\n\r\n```html\r\n<div class=\"bar\"></div>\r\n```\r\n\r\nIt would have worked and behaved exactly in the same way but the code will look a lot cleaner.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://gist.github.com/VelizarHristov/edaf4cf0d7b9f90c1e5d6070c027237f](https://gist.github.com/VelizarHristov/edaf4cf0d7b9f90c1e5d6070c027237f)\r\n\r\n### Steps to reproduce\r\nOpen the HTML in a browser (Internet connection is required to fetch the libraries).\r\n\r\n### What is expected?\r\n[] should be displayed\r\n\r\n### What is actually happening?\r\nopen] is displayed\r\n\r\n---\r\nIt comes from this line of code: https://github.com/vuejs/vue/blob/aa1356e83de1112660e7a88ff955f49d64bb5b1f/src/platforms/web/server/modules/attrs.js#L49\r\n\r\nThe list of rewritten attributes is here: https://github.com/vuejs/vue/blob/7116af4e07520040ed7328c39d0a456808bfe1e1/src/platforms/web/util/attrs.js#L22\r\n\r\nThis is a general problem when including a block of XML in the HTML.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/jt3hjuwg/](https://jsfiddle.net/jt3hjuwg/)\r\n\r\n### Steps to reproduce\r\nI am referencing this closed issue:\r\n\r\nhttps://github.com/vuejs/vue/issues/3969\r\n\r\nI feel like something should be done about this issue because it has left me with some white pages along the way and without a clear error message. If you pass in a null value as a prop the entire compilation breaks down with your evaluated html simply being dumped into the console.\r\n\r\nIs there really not a better way to handle this? Obviously a user should or could check for these values before actually showing the component but in large application a piece of data can sometimes be null either by accident or oversight\r\n\r\nIf nothing can be done about this could someone at least please explain why this happens because in my eyes a component not getting a prop does not justify the entire compilation failing.\r\n\r\n### What is expected?\r\nThe application should not fail compilation.\r\n\r\n### What is actually happening?\r\nIt fails compilation.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/hirokiosame/38nzxq6c/26/](https://jsfiddle.net/hirokiosame/38nzxq6c/26/)\r\n\r\n### Steps to reproduce\r\nRun the code. The injected result will show `[undefined, \"bar\"]` in the console.\r\n\r\n### What is expected?\r\nFor the merging to work properly. The expected result is `['foo', 'bar']`, which is what you'll see when you convert `keyA` and `keyB` into strings.\r\n\r\n### What is actually happening?\r\nMerging fails:  `[undefined, \"bar\"]`\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[Gist](https://gist.github.com/brophdawg11/07aee0e6e20b911993e6dc1eaa6b2d04)\r\n\r\n### Steps to reproduce\r\n* Download the above gist to an `index.js` file\r\n* `npm install --save vue vue-server-renderer`\r\n* `node index.js`\r\n\r\n### What is expected?\r\nOnce rendered in the browser, all 6 `long-classname-*` class styles should be applied to the second element.\r\n\r\n### What is actually happening?\r\nBecause the class attribute is rendered with `long-classname-3\\n`, the styles for `long-classname-3` are not applied\r\n\r\n---\r\nThis can be worked around by adding a space before the mid-attribute line break, however this doesn't play nicely with the ESLint `no-trailing-spaces` rule and the settings for many common editors.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[Gist](https://gist.github.com/brophdawg11/560ce5478ddebbb3a7f1aacc30fbbbc1)\r\n\r\n### Steps to reproduce\r\n* Download the above gist to an `index.js` file\r\n* `npm install --save vue vue-server-renderer`\r\n* `node index.js`\r\n\r\n### What is expected?\r\nI would expect an element rendered server side with `v-show=\"true\"` to render in the same fashion as one without a `v-show` directive.   \r\n\r\n### What is actually happening?\r\nElements with `v-show=\"true\"` are rendered during SSR with a seemingly invalid style attribute: `style=\"display:;`, while those without any `v-show` directive do not contain a `style` attribute at all\r\n\r\n---\r\nI don't know that this causes any specific rendering issues at the moment, but I noticed it because chrome dev tools was complaining about the styles on my element.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.16\r\n\r\n### Reproduction link\r\n[https://codepen.io/dasdeck/pen/LdbqLL?editors=0001](https://codepen.io/dasdeck/pen/LdbqLL?editors=0001)\r\n\r\n### Steps to reproduce\r\nWhen you open the pen, a message box will get opened because the full context of Consumer1 gets evaluated.\r\nSince the slot is not shown, this evaluation is unnecessary at this point and negates optimizations.\r\nWhen one declares a slot-scope, like in the Consumer2 components, Vue shows the \"correct\" behavior.\r\n\r\n### What is expected?\r\nThe slotted context should evaluate in a lazy manner\r\n\r\n### What is actually happening?\r\nThe slotted context gets evaluate right away.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.15\r\n\r\n### Steps to reproduce\r\nCurrently all globally registered components automatically convert their name to  kebap-case. \r\n\r\n```js\r\n// register component\r\nVue.component('RouterLink', {...})\r\n\r\n// get component fails, returns undefined\r\nVue.component('RouterLink')\r\n\r\n// get component works, returns the component\r\nVue.component('router-link')\r\n```\r\n\r\nIt would be nice to have the registered components also available as with their PascalCase naming. This would also mean that you could use the PascalCase naming in `.vue` templates, which is a nice way to quickly distinguish Vue components from HTML elements. Right now its is not possible, and to make it work this code has to be used:\r\n\r\n```html\r\n<template>\r\n\r\n  <RouterLink :to=\"link\">Link</RouterLink>\r\n\r\n</template>\r\n<script>\r\n{\r\n    components: {\r\n       RouterLink: Vue.component('router-link')\r\n   }\r\n}\r\n</script>\r\n```\r\n\r\n\r\n### What is expected?\r\nAccess globally registered components with their PascalCase naming if it was provided on register function call.\r\n\r\n### What is actually happening?\r\nFor now the component naming always converts to kebap-case.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/_MT_/qzLptLvs/10/](https://jsfiddle.net/_MT_/qzLptLvs/10/)\r\n\r\n### What is expected?\r\n```\r\n[Vue warn]: <transition-group> children must be keyed: <element>\r\n```\r\n\r\n\r\n### What is actually happening?\r\n渲染失败\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/b5a1zh6u/31/](https://jsfiddle.net/b5a1zh6u/31/)\r\n\r\n### Steps to reproduce\r\njust open this simple use case: https://jsfiddle.net/b5a1zh6u/31/ \r\nyou will see an error in console.\r\n\r\n\r\n\r\n### What is expected?\r\nAs written in [this issue](https://github.com/vuejs/vue-test-utils/issues/2#issuecomment-371568210), Vue.extend()\r\n does not work as expected.\r\nThe code should create a new global Vue instance and installa a plugin that is used by the component template.\r\n\r\n### What is actually happening?\r\nconsole error due to `$t` method not found.\r\n\r\n---\r\nI wrote the reproduction fiddle starting from [Evan's one](https://jsfiddle.net/yyx990803/b5a1zh6u/)\r\n\r\nif I set the $t function directly or as a plugin, on the global Vue like this, it works:\r\n\r\n```\r\nVue.prototype.$t = val => `* ${val}`\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"**Moved from**: [vue-loader#1161](https://github.com/vuejs/vue-loader/issues/1161)\r\n\r\n### What problem does this feature solve?\r\nIn Single File Component, `<script>` tag may or may not closed, so this works:\r\n\r\n```html\r\n<template>\r\n  <div class=\"chicken\">\r\n    Chicken: {{ chicken }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() { return { chicken: 'fried' } }\r\n}\r\n// (EOF)\r\n```\r\n\r\nHowever, `<style>` isn't; if there's no `</style>`, styles are **simply ignored** without any warning or errors.\r\n\r\n```html\r\n<template>\r\n  <div class=\"chicken\">\r\n    Chicken: {{ chicken }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() { return { chicken: 'fried' } }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chicken { /* super important */\r\n  font-weight: 900;\r\n}\r\n/* (EOF) */\r\n```\r\n\r\n### What does the proposed API look like?\r\nAny `<template>`, `<script>`, `<style>` tags should **explicitly**:\r\n\r\n* Closed - unclosed tag should throw a warning and refuse to build.\r\n* ~or May not closed - contents should build correctly even it's not closed.~\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://codepen.io/leocardoso/pen/OQqNYz?editors=1011](https://codepen.io/leocardoso/pen/OQqNYz?editors=1011)\r\n\r\n### Steps to reproduce\r\nCreate an input with a v-model like  <input v-model=\"obj.value \" />\r\n\r\nAnd try to change its value\r\n\r\n### What is expected?\r\nThe value of model change\r\n\r\n### What is actually happening?\r\nThe value of model doesn't change and it creates a new property to the Object ended with space like obj['value ']\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[http://jsfiddle.net/df4Lnuw6/207/](http://jsfiddle.net/df4Lnuw6/207/)\r\n\r\n### Steps to reproduce\r\nSpecify a required prop with a default value:\r\n\r\n```js\r\nVue.component('comp', {\r\n    template: '<div>{{ typeof x }} {{ x }}</div>',\r\n    props: {\r\n        x: {\r\n            type: Number,\r\n            required: true,\r\n            default: 5,\r\n        },\r\n    },\r\n});\r\n```\r\n\r\nRender the component without specifying a value for that prop:\r\n\r\n```html\r\n<comp></comp>\r\n```\r\n\r\n### What is expected?\r\nThe component should render the following without any prop validation errors:\r\n\r\n```html\r\n<div>number 5</div>\r\n```\r\n\r\n### What is actually happening?\r\nThe component renders OK, but warns about missing required prop `x`.\r\n\r\n---\r\nWhile it's true that prop `x` is not specified, since it has a default value, there should be no warning message.\r\n\r\nWhat exactly does `required` check for? It appears that it checks two things:\r\n\r\n1. The prop should be *provided*, as in at least `<comp :x=\"...\"></comp>`.\r\n2. The prop value should be non-null and non-undefined.\r\n\r\nI think in the case where a required prop has a default value, (1) should be relaxed.\r\n\r\nOtherwise, how can I enforce a prop to never be null while also providing a default value if the prop value was not provided?\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://codepen.io/RyanNHG/pen/jZQWaz](https://codepen.io/RyanNHG/pen/jZQWaz)\r\n\r\n### Steps to reproduce\r\nCheck out the working example (using minified Vue 2.5.13):\r\nhttps://codepen.io/RyanNHG/pen/gvQPGg\r\n\r\nAnd compare it to this failing example (using dev Vue 2.5.13):\r\nhttps://codepen.io/RyanNHG/pen/jZQWaz\r\n\r\n### What is expected?\r\nI expect the minified and dev versions of Vue to result in the same outcome.\r\n\r\nThe `fromParent` property is defined on the parent, and I'd expect it to render in the child, even though it isn't explicitly defined on the `data` prop.\r\n\r\nPreferably, VueJS warnings wouldn't lead to any components failing to compile.\r\n\r\n### What is actually happening?\r\nIn the minified, production build, this code works as expected. But in the developer build, I am getting a warning that prevents the component from compiling.\r\n\r\n---\r\nI assume this is to prevent me from making a typo, or forgetting to add a data property to my child component.\r\n\r\nThese warning are super useful in general (thanks for taking the time to make them!)\r\n\r\nLet me know if you need any more examples to help you with this issue. Thanks again!\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/50wL7mdz/128732/](https://jsfiddle.net/50wL7mdz/128732/)\r\n\r\n### Steps to reproduce\r\nJust add a `<kbd>` element\r\n\r\n### What is expected?\r\nRender `<kdb>` element correctly\r\n\r\n### What is actually happening?\r\n[Vue warn]: Unknown custom element: <kdb> - did you register the component correctly? For recursive components, make sure to provide the \"name\" option.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/ybr5s354/15/](https://jsfiddle.net/ybr5s354/15/)\r\n\r\n### Steps to reproduce\r\n1. Create event with any modifier\r\n2. Create directive and get event instance from vnode.\r\n3. Call event (maybe dummy event will required)\r\n\r\n### What is expected?\r\nEvent with and without modifiers return function value\r\n\r\n### What is actually happening?\r\nOnly event without modifier return value.\r\nEvents with modifiers always return undefined\r\n\r\n---\r\nFixed in this PR: https://github.com/vuejs/vue/pull/7704\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://codepen.io/dasdeck/pen/NyMvjQ](https://codepen.io/dasdeck/pen/NyMvjQ)\r\n\r\n### Steps to reproduce\r\nThe codepen shows the bug on opening.\r\n\r\n### What is expected?\r\nI'd expect \"extComp\" to behave exactly like \"baseComp\" since it is extended.\r\n\r\n### What is actually happening?\r\n\"extComp\" uses the global \"my-comp\" definition instead of the one in the super/parent component\r\n\r\n---\r\nThis might be expected/intended behavior, however, all people I asked agree that this is counter intuitive and feels more like a bug than a feature.\r\n\r\nCheer!\r\n\r\nJM\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://codepen.io/bux578/pen/eVMrbe?editors=1011](https://codepen.io/bux578/pen/eVMrbe?editors=1011)\r\n\r\n### Steps to reproduce\r\n* Open codepen\r\n* Click through checkboxes\r\n\r\n### What is expected?\r\nclicking on the first row of checkboxes should trigger the watcher\r\n\r\n### What is actually happening?\r\nIt's not triggered, the changes to the upper row are performed when one of the checkboxes in the lower row are clicked\r\n\r\n---\r\nI might be doing something wrong here.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement",null],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/zr7rz6xh/8/](https://jsfiddle.net/zr7rz6xh/8/)\r\n\r\n### Steps to reproduce\r\nVue.config.errorHandler = function (err, vm, info) {\r\n  alert(\"handler\");\r\n};\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  mounted: function() {\r\n  \treturn new Promise(function(resolve, reject) {\r\n      throw new Error('err');\r\n    });\r\n  }\r\n})\r\n\r\n\r\n### What is expected?\r\nerrorHandler should be called\r\n\r\n### What is actually happening?\r\nUncaught (in promise) Error: err\r\n\r\n---\r\nVue.config.errorHandler is not called if the error occurs inside a promise or await/async function.\r\n\r\nI want to use the created hook with an await call, so it has to be async. But then the errorHandler is ignored.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nI am trying to implement a \"loading button\" component that internally keeps track of specified event handlers and changes state based on the resolution state of said handlers. Assuming that the event handler is a `function` that returns a `Promise`, the button internally waits for the promise to resolve, shows loading state, and handles the `resolve` / `reject` accordingly.\r\n\r\n#### Approach\r\n\r\nInside the `PromiseButton` component, I am keeping track of the event handler that is passed in (let's say we only want to look for `'click'` handlers).\r\n\r\n```typescript\r\nthis.handlerFunc = this.$listeners['click']\r\n```\r\n\r\nInside the event handler of the internal button, I am wrapping this function, and change state something like:\r\n\r\n```typescript\r\nthis.isLoading = true;\r\n\r\nawait this.handlerFunc();\r\n\r\nthis.isLoading = false;\r\n```\r\n\r\nAnd in the consumer I am using the `@click` binding like so:\r\n\r\n```html\r\n<promise-button type=\"button\" class=\"...\" @click=\"someHandler\">\r\n```\r\n\r\nAll this is fine and works as expected.\r\n\r\n#### Problem\r\n\r\nHowever, when I try to use the same component but I use an inline method handler (with an optional parameter):\r\n\r\n```html\r\n<promise-button type=\"button\" class=\"...\" @click=\"someHandler(...)\">\r\n```\r\n\r\nSomehow I lose context of the `Promise` being returned. It was a curious issue, so I dug a bit deeper and I found the pain point to be inside the wrapper function of the inline handler:\r\n\r\n```typescript\r\nfunction($event) {\r\n  someHandler(...) <---\r\n}\r\n```\r\n\r\nIt's not returning the `Promise` returned by my `someHandler`.\r\n\r\n### What does the proposed API look like?\r\nMy suggestion is that it should return the result of the internal handler really, that's all. That way, regardless of how the handler is written, I can get context internally of what the result of the handler was.\r\n\r\nIt also makes sense to me that it wouldn't just swallow the returned value of the wrapped function:\r\n\r\n```typescript\r\nfunction($event) {\r\n  return someHandler(...)\r\n  ^^^^^^\r\n}\r\n```\r\n\r\nI am thinking this should solve the problem I am having. Please advise if I am wrong regarding this, or I should take a different approach.\r\n\r\nThanks for your time.\r\n\r\nP.S. I didn't get time yet to dive into the source of Vue, but I plan to do that, and fine the actual source of this problem in the code.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://runkit.com/martinlg/issue-vue-renderer-cache](https://runkit.com/martinlg/issue-vue-renderer-cache)\r\n\r\n### Steps to reproduce\r\nRun the Runkit code. If you prefer a git repository I can provide you one.\r\n\r\n### What is expected?\r\nThe value passed to the ```set``` function should be a string.\r\n\r\n### What is actually happening?\r\nThe value passed to the ```set``` function is an object, with 2 properties:\r\n\r\n* html: a ```string``` containing the rendered component\r\n* components: a ```Set``` containing nothing or function, depending on context (sub-components I think)\r\n\r\n---\r\nThis issue breaks any external cache possibility (Redis in my case).\r\nThe only possible cache is in the process memory, like the LRUCache, but it seems impossible to scale processes and share a common cache.\r\n\r\nMoreover, the documentation explain clearly that the cached value should be a string, and even provides a small Redis example implementation, that could just not work.\r\n\r\nI think that the documentation describe the expected behavior, so I don't want to \"fix\" the documentation, I think we should fix the behavior.\r\n\r\nI will try to help but I may need some explanations on some parts of the RenderContext, can I ask my questions on this thread ?\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### What problem does this feature solve?\r\nCurrently when using functional components without `prop` definition, all attributes will be rendered when using [`JSX spread`](https://github.com/vuejs/babel-plugin-transform-vue-jsx#jsx-spread).  \r\n\r\nThis is because the `context.data.attrs` remain after they are merged. \r\n\r\n## Current\r\n\r\nUsage:`<Example type=\"blue\" fill={true} class=\"extra-class\" aria-label=\"I'm a label\" />`\r\n\r\nImplementation: \r\n```\r\nexport default {\r\n  functional: true,\r\n  \r\n  render({ data, props }) {\r\n    const { type, fill } = props\r\n\r\n    const buttonClass = {\r\n      'button--fill': fill,\r\n      [`button--${type}`]: !!type\r\n    }\r\n\r\n    <button {...data} class={buttonClass} >\r\n  }\r\n}\r\n```\r\n\r\nOutput: `<button fill=\"true\" type=\"blue\" class=\"extra-class button--fill button--blue\" aria-label=\"I'm a label\" />`\r\n\r\n\r\n\r\n### What does the proposed API look like?\r\nIt should be explicit what attributes to render to dom when using a functional component with no prop definition. \r\n\r\n[With fix `delete data.attrs`](https://github.com/vuejs/vue/blob/dev/src/core/vdom/create-functional-component.js#L81)\r\n\r\n### Explicitly passing attributes\r\n\r\nYou can use spread notation to get all remaining `attrs`, and replacing the `data.attrs` object\r\n\r\nUsage: `<Example type=\"blue\" fill={true} class=\"extra-class\" aria-label=\"I'm a label\" />`\r\n\r\nImplementation: \r\n```\r\nexport default {\r\n  functional: true,\r\n  \r\n  render({ data, props }) {\r\n    const { fill, type, ...attrs } = props\r\n    data.attrs = attrs\r\n\r\n    const buttonClass = {\r\n      'button--fill': fill,\r\n      [`button--${type}`]: !!type\r\n    }\r\n\r\n    <button {...data} class={buttonClass} >\r\n  }\r\n}\r\n```\r\n\r\nOutput: `<button class=\"extra-class button--fill button--blue\" aria-label=\"I'm a label\" />`\r\n\r\n### Explicitly passing attributes 2\r\n\r\nUsage: `<Example  type=\"blue\" fill={true} class=\"extra-class\" formtarget=\"id\" dummy-attr=\"lol\" />`\r\n\r\nImplementation: \r\n```\r\nexport default {\r\n  functional: true,\r\n  \r\n  render({ data, props }) {\r\n    const { fill, type, formtarget } = props\r\n\r\n    const buttonClass = {\r\n      'button--fill': fill,\r\n      [`button--${type}`]: !!type\r\n    }\r\n\r\n    <button {...data} formtarget={formtarget} class={buttonClass} >\r\n  }\r\n}\r\n```\r\n\r\nOutput: `<button class=\"extra-class button--fill button--blue\" formtarget=\"id\" />`\r\n\r\n\r\n### Conclusion\r\n\r\nBoth examples show how the behaviour of the attributes should be left with the child when dictating what attributes shoud be rendered. You can either do a `and rest` approach or explcititly name attributes to pass onto element. \r\n\r\nThe original all props/attrs will be rendered as attributes, which adds polution to the DOM especially with attributes that are array's/objects/functions/symbols.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/lxjwlt/ajy768fs/](https://jsfiddle.net/lxjwlt/ajy768fs/)\r\n\r\n### Steps to reproduce\r\nin chrome 57 and 56, \r\n\r\n1. filter with empty arguments:\r\n\r\n    ```html\r\n    <div>{{text | someFilter()}}</div>\r\n    ```\r\n\r\n2. when no parentheses:\r\n\r\n    ```html\r\n    <div>{{text | someFilter}}</div>\r\n    ```\r\n\r\n\r\n### What is expected?\r\n\r\n1. no error\r\n2. no error\r\n\r\n### What is actually happening?\r\n\r\n1.in chrome 57 and 56, report error:\r\n\r\n```\r\n[Vue warn]: Error compiling template:\r\n\r\n<div>{{text | someFilter()}}</div>\r\n\r\n- invalid expression: Unexpected token ) in\r\n\r\n    _s(_f(\"someFilter\")(text,))\r\n\r\n  Raw expression: {{text | someFilter()}}\r\n\r\n\r\n\r\n(found in <Root>)\r\n```\r\n\r\n2.no error\r\n\r\n---\r\nI have also examined the chrome 58 and 63 which have no errors both, so i guess this bug only occurs in chrome 57-.\r\n\r\nmac-chrome57:  https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/444958/\r\n\r\nwin-chrome57: https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/444958/\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nAt the moment it seems to be impossible to create one component per row in a table using inline templates.\r\n\r\nIf have collected my unsuccessful attempts in this fiddle: https://jsfiddle.net/hfu0zccs/\r\n\r\nThis is the [link](https://forum.vuejs.org/t/error-inline-template-components-must-have-exactly-one-child-element/1729/5) where it was suggested by LinusBorg to open an issue but apparently that never happended? \r\n\r\n### What does the proposed API look like?\r\nConsidering the limitations involved with restrictions of allowed elements in tables this would seem to be the most likely to be supported? Although it is pretty ugly form my understanding this would be valid html and honor the 1 child only requirement of vue. \r\n\r\n```\r\n   <table>\r\n      <tr is=\"table-row\" inline-template>\r\n        <template>\r\n          <tr>\r\n            <td>{{ content }}</td>\r\n            <td>{{ content }}</td>\r\n          </tr>\r\n        </template>\r\n      </tr>\r\n    </table>\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[http://jsfiddle.net/df4Lnuw6/173/](http://jsfiddle.net/df4Lnuw6/173/)\r\n\r\n### Steps to reproduce\r\n- Bind `v-show` to a non-boolean truthy value (such as a number or string).\r\n- Periodically change the value to a different truthy value.\r\n- `v-show` triggers the enter transition every time the value changes.\r\n\r\n### What is expected?\r\n`v-show` should not do anything. The element's classes should not change.\r\n\r\n### What is actually happening?\r\n`v-show` triggers the enter transition every time the value changes even though the value remains truthy.\r\n\r\nThis causes the element to momentarily have the `v-enter` and `v-enter-active` classes which triggers the CSS transition very briefly. This is especially noticeable in **Safari**.\r\n\r\n---\r\n`v-show` should check if `!oldValue === !newValue` (or `Boolean(oldValue) === Boolean(newValue)`) instead of `oldValue === newValue` to see if a transition should not occur.\r\n\r\nSee [src/platforms/web/runtime/directives/show.js#L30](https://github.com/vuejs/vue/blob/f2b476d4f4f685d84b4957e6c805740597945cde/src/platforms/web/runtime/directives/show.js#L30).\r\n\r\nA workaround is to bind only boolean values to `v-show`.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/71puwq8k/](https://jsfiddle.net/71puwq8k/) (component version)\r\n[https://jsfiddle.net/eznbzfdw/](https://jsfiddle.net/eznbzfdw/) (without component)\r\n\r\n### Steps to reproduce\r\nToggle any of the checkboxes a few times\r\n\r\n### What is expected?\r\nAny checkbox should always stay checked after toggling it.\r\n\r\n### What is actually happening?\r\nAs you can see in my example I manually bind change event and checked attribute to the input, because I would like to have control over its `checked` state. But even though I always force the value to be true, the checkbox always toggles between checked/unchecked, so it makes our template and the data out of sync. Even calling `$forceUpdate()` does not help in this case.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n\r\nNG pattern (functional)\r\nhttps://codesandbox.io/s/004vv2onw0\r\n\r\nOK pattern (no functional)\r\nhttps://codesandbox.io/s/q9k5q8qq56\r\n\r\n### Steps to reproduce\r\nI found can't use `components` option when  `functional` single file component.\r\n\r\n```html\r\n<template functional>\r\n  <div>\r\n    <some-children />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SomeChildren from \"./SomeChildren\"\r\n\r\nexport default {\r\n  components: {\r\n    SomeChildren\r\n  }\r\n}\r\n</script>\r\n```\r\n\r\nIt's occure `Unknown custom element`.\r\n\r\n### What is expected?\r\nNot occure `Unknown custom element` and use child component\r\n\r\n### What is actually happening?\r\nIt's occure `Unknown custom element`\r\n\r\n---\r\n\r\nIn workaround, it not occure when use `Vue.component`.\r\n\r\n```js\r\nimport Vue from \"vue\"\r\nimport SomeChildren from \"./SomeChildren\"\r\nVue.component(\"some-children\", SomeChildren);\r\n\r\nexport default {}\r\n\r\n// can use  <some-children />\r\n```\r\n\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/realcarbonneau/68w22cbo/](https://jsfiddle.net/realcarbonneau/68w22cbo/)\r\n\r\n### Steps to reproduce\r\nDefine a multi-type Boolean and String Prop, call the component by specifying the prop name (without a value).\r\n\r\n### What is expected?\r\nProp contains true (Boolean type)\r\n\r\n### What is actually happening?\r\nProp contains an empty string\r\n\r\n---\r\nThe sequence does not change the result, both `[Boolean, String]` and `[String, Boolean]` give the same result.  The version does not change the result either (vue version 1.0.12, 2.2.1, edge on jsfiddle)\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,null,"enhancement",null],"text":"### What problem does this feature solve?\r\nWhen context with state is provided to the template renderer an [inline script is created](https://github.com/vuejs/vue/blob/f2b476d4f4f685d84b4957e6c805740597945cde/src/server/template-renderer/index.js#L199).  It may be useful to provide a nonce that gets attached to the script tag so an unsafe-inline CSP doesn't have to be enabled.\r\n\r\n### What does the proposed API look like?\r\n```\r\nrenderer.renderToString({\r\n  state: {},\r\n  nonce: ''\r\n})\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://jsperf.com/vue-bind-perf](https://jsperf.com/vue-bind-perf)\r\n\r\n### Steps to reproduce\r\nRun tests across some modern browsers to see the result.\r\n\r\n### What is expected?\r\nCustom bind implementation performance is the same level as native.\r\n\r\n### What is actually happening?\r\nCustom bind implementation performance is lower than native.\r\n\r\n---\r\nTested in:\r\n* Safari - native is **slower 83%**\r\n* Chrome - native is **faster 61%**\r\n* Edge - native is **faster 91%**\r\n* Firefox - native is **faster 52%**\r\n\r\nI believe it is not an issue at all, but I think it is something which can be improved.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.13\r\n\r\n### Reproduction link\r\n[https://codepen.io/dasdeck/pen/ZvOKqm?editors=1010](https://codepen.io/dasdeck/pen/ZvOKqm?editors=1010)\r\n\r\n### Steps to reproduce\r\nset the input type via v-bind like in the codepen and use the checkbox to change the bound value.\r\n\r\n### What is expected?\r\nthe checkbox will control the value assigned in v-model\r\n\r\n### What is actually happening?\r\nthe value is not changed.\r\n\r\n---\r\nIt seems to me that the v-bind is evaluated after v-model, thus the input is always a \"textbox\" e.g. the default and therefore can not be bound properly and only works for textbox and related input types. In comparison the :type=\"variableType\" works just fine. See :\r\nhttps://codepen.io/dasdeck/pen/RxRvow?editors=1010\r\n\r\nAlso it worked in Vue 1.x.\r\nThis might be expected behaviour, but I could not find it mentioned anywhere.\r\n\r\nCheers!\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.12\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/hirokiosame/dronjdzm/16/](https://jsfiddle.net/hirokiosame/dronjdzm/16/)\r\n\r\n### Steps to reproduce\r\nRun code in IE11.\r\n\r\nEither remove the `<wrapper>` from the `Parent` component on L25 or change the Symbol into a String on L9 and it will work fine.\r\n\r\n### What is expected?\r\nFor it to print \"Message from parent: Hello World from Parent\"\r\n\r\n### What is actually happening?\r\nDoesn't receive the injection.\r\n<img width=\"901\" alt=\"screen shot 2017-12-20 at 2 49 51 am\" src=\"https://user-images.githubusercontent.com/1075694/34171110-8abd07e8-e530-11e7-9737-aa3c95e93fb3.png\">\r\n\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.11 (and earlier versions)\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/xb4172g8/](https://jsfiddle.net/xb4172g8/)\r\n\r\n### Steps to reproduce\r\n1. Open console and observe while typing something into input fields\r\n2. Enter some text into name field -> Vue re-renders all three Textfield components\r\n3. In line 21 replace `{ ...this.$listeners }` with an empty object\r\n4. Once again enter some text into any field -> Vue re-renders only updated Textfield \r\n\r\n### What is expected?\r\nVue should re-render only the component whose props has changed.\r\n\r\n### What is actually happening?\r\nUsing `$listeners` in component's render function causes the component to be rendered whenever its parent is updated even though his props hasn't changed.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.9\r\n\r\n### Reproduction link\r\n[https://codepen.io/maple-leaf/pen/BmgaqG](https://codepen.io/maple-leaf/pen/BmgaqG)\r\n\r\n### Steps to reproduce\r\n1. open the [codepen demo](https://codepen.io/maple-leaf/pen/BmgaqG)\r\n2. open devtool if u are on chrome\r\n3. click `change data which will raise error` button\r\n4. now you should see an error like this: `TypeError: Cannot read property 'key' of undefined`.\r\n5. refresh demo page\r\n6. click `safe to change data here` button\r\n7. now you should not see an error like before, and data being updated correctly\r\n\r\n### What is expected?\r\nmaybe same behavior like both should raise an error, but if raise error, maybe `duplicate key` error should be showed too __which will help developer easier to find what data is killing page__.\r\n\r\n### What is actually happening?\r\nboth data have duplicate keys, but behavior is different\r\n\r\n---\r\nwhy error being raise when you click `change data which will raise error` button?\r\n\r\nBecause the data will raise error has some special changes. It remove all keys except duplicate key 'b' compared to initial data and the order is different.\r\n\r\nThis will make `updateChildren` function in `vdom/patch.js` hit [this code section](https://github.com/vuejs/vue/blob/dev/src/core/vdom/patch.js#L421), which will create a `oldKeyToIdx`. And then when first key 'b' comes, it will set value of `b` in `oldKeyToIdx` to `undefined`, and then next key `b` comes, it will compare old node and new node via function [sameNode](https://github.com/vuejs/vue/blob/dev/src/core/vdom/patch.js#L436). But this time, index of old node which key is `b` is undefined now. So a js error is being raised.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\n[Vue warn]: Avoid using non-primitive value as key, use string/number value instead.\r\n\r\nsymbol is primitive value and very suitable as key.\r\n\r\n\r\n\r\n### What does the proposed API look like?\r\nno warnings with symbol\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.4\r\n\r\n### Reproduction link\r\n[https://codepen.io/anon/pen/KyyxKB?editors=1010](https://codepen.io/anon/pen/KyyxKB?editors=1010)\r\n\r\n### Steps to reproduce\r\n1. Open browser devtools\r\n2. Launch reproduction with different MAX variable (100, 200, 500, 1000, 1500, 2000, 4000)\r\n3. Note that memory usage growth quadratically with the MAX variable, while number of computed properties and their implied dependencies in the program is proportional to the MAX variable.\r\n\r\n### What is expected?\r\nExpected linear (i.e. proportional) growth of memory consumption with growth of MAX variable\r\n\r\n### What is actually happening?\r\nAll `data_X` observables have all `computed_X` computed values as their subscribers, so total number of subscriptions growth quadratically.\r\n\r\n---\r\nIt's quite hard to write a code that would really affect users with the bug, but anyway it feels like a flaw in reactive system design.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.3\r\n\r\n### Reproduction link\r\n[https://vuejs.org/v2/guide/render-function.html#Template-Compilation](https://vuejs.org/v2/guide/render-function.html#Template-Compilation)\r\n\r\n(Alternative reproduction on jsfiddle: https://jsfiddle.net/Linusborg/pqbppg7a/)\r\n\r\n### Steps to reproduce\r\n1. Paste the following piece of HTML into the textarea of the linked documentation chapter above.\r\n```html\r\n<input type=\"text\" v-bind:value=\"message\" v-model=\"message\">\r\n```\r\n2. Inspect the code of the created render function, especially the `domProps` options:\r\n```javascript\r\ndomProps: {\r\n  \"value\": message,\r\n  \"value\": (message)\r\n},\r\n```\r\n\r\n\r\n\r\n\r\n\r\n### What is expected?\r\nThe code should run in all browsers, or throw an error or warning.\r\n\r\n### What is actually happening?\r\nIE11 throws an error: \"duplicate properties not allowed in strict mode\".\r\n\r\n---\r\nI realize that using both v-bind:value and v-model on an input  is not recommended or even sensible, but it doesn't throw an error or warning when done in modern browsers, and doesn't create any problems if the expression is the same for both, so it can easily be overlooked when added accidentally.\r\n\r\nUglify also doesn't help - it doesn't remove the first occurrence that would otherwise be \"overwritten\" by the second in modern browsers.\r\n\r\nSo what would be a sensible solution? I'm not sure.\r\n\r\n* We could adjust the [codegen of domProps](https://github.com/vuejs/vue/blob/dev/src/compiler/codegen/index.js#L488-L495) to check for a double occurence of the `value` prop on elements of type \"input\" and drop all but the last occurrence. Possible Problem: performance?\r\n* We could log a warning to console (how to deal with that in vue-loader?)\r\n* We could throw an error, forcing the user to choose between the two (breaking change)\r\n* we could improve awareness by adding a warning to docs and a rule to eslint-plugin-vue?\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.5.3\r\n\r\n### Reproduction link\r\n[https://github.com/gluons/vue-issue-6999](https://github.com/gluons/vue-issue-6999)\r\n\r\n### Steps to reproduce\r\n- Export some object that contain `Vue` or `typeof Vue` types.\r\n- Set `compilerOptions` -> `declaration` to `true`\r\n\r\n### What is expected?\r\nAble to build without error.\r\n\r\nIt should be able to export plugin/library with TypeScript declaration.\r\n\r\n### What is actually happening?\r\n`Default export of the module has or is using private name 'VueConstructor'` happened when built it.\r\n\r\n---\r\nI'm developing **Vue** component with **TypeScript**.  \r\nI also need TypeScript to generate declaration for other TypeScript developer (And also JavaScript with **Vetur** 🙂).  \r\nBut I face this error. 😢\r\n\r\n> Thanks [bbuchanan](https://forum.vuejs.org/u/bbuchanan) for the [cause](https://forum.vuejs.org/t/default-export-of-the-module-has-or-is-using-private-name-vueconstructor/19624/5).\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.5.2\r\n\r\n### Reproduction link\r\n[https://codesandbox.io/s/k9rlpoojpr](https://codesandbox.io/s/k9rlpoojpr)\r\n\r\n### Steps to reproduce\r\nClick on throw error button in reproduction link\r\n\r\n### What is expected?\r\nThis should display an alert with error object, handled by errorCaptured hook defined in App.vue component.\r\n\r\n### What is actually happening?\r\nThe errorCaptured hook is not invoked\r\n\r\n---\r\nIt seems that typings in options.d.ts is not the same as specified in the docs too.\r\n\r\nhttps://github.com/vuejs/vue/blob/96472be6f62a98d3b5d6b784fe341a71ba3a68eb/types/options.d.ts#L83\r\nhttps://vuejs.org/v2/api/#errorCaptured\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.5.2\r\n\r\n### Reproduction link\r\nhttps://codesandbox.io/s/9o6xpml92w\r\n\r\n### Steps to reproduce\r\nwrite in input some words.\r\nclick on reset button.\r\n\r\n\r\n### What is expected?\r\nexpect get clear value in input\r\n\r\n### What is actually happening?\r\nvalue in input not cleared\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### What problem does this feature solve?\r\nIt would be useful if we can infer Props type from component (`ExtendedVue`).\r\n\r\nFor example, we can write type safe wrapper of `CreateElement` with it (or improve interface of `CreateElement` directly).\r\n\r\n```typescript\r\nfunction renderComponent<Props>(\r\n        h: CreateElement,\r\n        component: ExtendedVue<Vue, {}, {}, {}, Props>,\r\n        data: VNodeData & { props: Partial<Props> },\r\n        children?: VNodeChildren): VNode {\r\n  return h(component, data, children);\r\n}\r\n\r\nconst MyComponent = Vue.extend({\r\n  props: { foo: String },\r\n  render(h) { return h(\"div\", this.foo) };\r\n});\r\n\r\nconst Parent = Vue.extend({\r\n  render(h) {\r\n    return renderComponent(h, MyComponent, { props: { foo: 0 } }); // error: type of property 'foo' are imcompatible\r\n  }\r\n});\r\n\r\n``` \r\n\r\n\r\n### What does the proposed API look like?\r\nNow, `ExtendedVue<Vue, {}, {}, {}, { foo: string }>` and `ExtendedVue<Vue, {}, {}, { foo: string }, {}>` generate same type.\r\n\r\nThis means we can't determine `Props` type from `ExtendedVue` object.\r\n\r\nI think, easiest (and most reasonable) way to achieve this is adding types to `$props` and `$data`\r\n\r\n```diff\r\n- export type CombinedVueInstance<Instance extends Vue, Data, Methods, Computed, Props> = Instance & Data & Methods & Computed & Props;\r\n+ export type CombinedVueInstance<Instance extends Vue, Data, Methods, Computed, Props> = Instance & Data & Methods & Computed & Props & { $data: Data, $props: Props };\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/klesk/0x4q5kup/1/](https://jsfiddle.net/klesk/0x4q5kup/1/)\r\n\r\n### Steps to reproduce\r\nA/ Press enter in the input\r\n\r\nB/ Check the checkbox (that emultae keyboard event)\r\n\r\n### What is expected?\r\nA/  the classList should appear\r\n\r\nB/ the classList should appear\r\n\r\n### What is actually happening?\r\nA/  the classList of it appear\r\n\r\nB/ nothing appear\r\n\r\n---\r\nRemove the modifier in the template (eg: @keyup) and the checkbox raise event.\r\n\r\nIs that normal? Or a bug ?\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nCurrently there is no way to receive alerts (and possibly rerender) in production concerning SSR vs VDom mismatch.  \r\n\r\nThis is critical because different browsers will handle this in unexpected ways.  For instance, I just finished trouleshooting an issue that is specific to Windows 10 and IE11 where a rendered vdom tree does not match ssr rendered html and causes a white screen.  Chrome and other browsers were able to recover. The mismatch renders fine when navigating to this from an already rendered vue. Just not when the initial rendering happens with a specific page.\r\n\r\nDiscussion in forum.  \r\nhttps://forum.vuejs.org/t/ssr-render-mismatch-error-emit-in-production/20083\r\n\r\n### What does the proposed API look like?\r\nI think the bulk of code currently lives here.\r\n\r\nhttps://github.com/vuejs/vue/blob/adff0084e1b7bc4b8ffa2b87390c66afbc435582/src/core/vdom/patch.js#L662\r\n\r\nI think during initial ssr render we need more granular flags to opt in to alerts on this behavior.  Currently it is only NODE_ENV \r\n\r\nInitial (maybe too verbose) thoughts would be.\r\n  WARN_ON_SSR_MISMATCH\r\n  RECOVER_ON_SSR_MISMATCH\r\n  \r\nThen if those are true we can change behavior.\r\n\r\nI understand that this is performance critical so am very open to suggestions.  I would be willing to implement this myself in a PR.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement",null],"text":"### What problem does this feature solve?\r\nFunctional components with templates allow users to improve performance without sacrificing readability or ease of use. However, currently these do not support the \"components\" option. This limits this feature a lot, to a very limited set of use cases. \r\n\r\n### What does the proposed API look like?\r\nSimply support the components option just like non-functional components\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nFor custom HTML elements Vue overwrites some attributes with default values. One example is the `selected` attribute which will always be set to `selected=selected` for truthy values. This absolutely makes sense for HTML elements that are defined in the HTML standard, but not for custom elements. Custom elements are not yet a web standard but there are already ways to build and use them. We experienced the issue when experimenting with a custom element for a tab bar which has the selected tab stored in a selected attribute.\r\n\r\nFind a code example in:\r\nhttps://jsfiddle.net/1pc2e9yj/2/\r\n(The code example is currently limited to Chrome and Safari, because of missing polyfills for other browsers)\r\n\r\n### What does the proposed API look like?\r\nVue already has a config setting for `ignoredElements`. My proposal would be, that attributes are not set to their default values for elements in the `ignoredElements` array. If that approach is valid, then the example code in the jsfiddle would stay the same, but the output would change to \"selected attribute value: tab1\"\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.5.2\r\n\r\n### Reproduction link\r\n[https://github.com/wonderful-panda/vue-sandbox](https://github.com/wonderful-panda/vue-sandbox)\r\n\r\n### Steps to reproduce\r\nCompile this code by tsc\r\n\r\n```typescript\r\nimport Vue, { VNode } from \"vue\";\r\n\r\nconst NgComponent = Vue.extend({\r\n    name: \"NgComponent\",\r\n    props: {\r\n        foo: { type: String },\r\n        bar: {}    // any types are accepted\r\n    },\r\n    render(h): VNode {\r\n        return h(\"div\", this.foo);\r\n    }\r\n});\r\n```\r\n\r\nor clone from repro link and `npm install && npm run build`\r\n\r\n\r\n### What is expected?\r\nSuccessfully compiled.\r\n\r\nAnd `this.foo` is treated as string, `this.bar` is treated as any.\r\n\r\n### What is actually happening?\r\nFailed to compile.\r\n\r\n```\r\nsrc/index.ts(10,30): error TS2339: Property 'foo' does not exist on type 'CombinedVueInstance<Vue, {}, {}, {}, Readonly<{}>>'.\r\n```\r\n\r\n\r\n---\r\nWorkaround:\r\n\r\n```ts\r\nimport Vue, { VNode } from \"vue\";\r\n\r\nVue.extend({\r\n    name: \"Workaround\",\r\n    props: {\r\n        foo: { type: String },\r\n        bar: {} as (() => any)   // any types are accepted\r\n    },\r\n    render(h): VNode {\r\n        return h(\"div\", this.foo);\r\n    }\r\n});\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/xrecft4f/](https://jsfiddle.net/xrecft4f/)\r\n\r\n### Steps to reproduce\r\nparent1 is not rendering anything, while parent2 is rendering correctly.\r\n\r\n### What is expected?\r\nv-for should work if the slot-scope is given on the element.\r\n\r\n### What is actually happening?\r\nAs visible in the fiddle, parent1 is not rendering anything. Right now it only works if it's wrapped inside a template tag.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.5.2 (and 2.4.4)\r\n\r\n### Reproduction link\r\n[https://github.com/nemtsov/repro-vue-ssr-nomaps](https://github.com/nemtsov/repro-vue-ssr-nomaps)\r\n\r\n### Steps to reproduce\r\nFirst, thank you for the amazing work you do on Vue, especially SSR! \r\n\r\nThis issue is about rendering a component on the server (SSR) and using asynchronous / lazy-loaded components. When there's an error in a lazy-loaded component, `renderToString` is not called with an error, but instead, the error gets logged to the console and (most importantly) source-maps are not used, making the error very difficult to debug.\r\n\r\n\r\n## Repro:\r\n\r\n1. Clone the repo above and `npm install`\r\n2. `npm start`\r\n3. curl -i http://localhost:3000\r\n\r\nIf you look at the `src/entry-server.js`, you'll notice:\r\n\r\n```\r\nimport App from './App.vue';\r\n// const App = () => import('./App.vue');\r\n```\r\n\r\n\r\n### What is expected?\r\nImporting `App` synchronously, and then running `npm start` and the curl, we see the following output:\r\n\r\n**SYNCHRONOUS:**\r\n```\r\n# STDOUT/STDERR\r\n[Vue warn]: Error in data(): \"ReferenceError: a is not defined\"\r\n\r\nfound in\r\n\r\n---> <App> at src/App.vue\r\n       <Root>\r\n\r\n# HTTP OUTPUT\r\nHTTP/1.1 500 Internal Server Error\r\nX-Powered-By: Express\r\nDate: Fri, 13 Oct 2017 13:46:55 GMT\r\nConnection: keep-alive\r\nContent-Length: 797\r\n\r\nReferenceError: a is not defined\r\n    at module.exports.__webpack_exports__.a (src/bad.js:5:0)\r\n    at module.exports.__webpack_exports__.a (src/first.js:4:0)\r\n    at VueComponent.data (src/App.vue:14:0)\r\n    at getData (node_modules/vue/dist/vue.runtime.esm.js:3301:0)\r\n    at initData (node_modules/vue/dist/vue.runtime.esm.js:3260:0)\r\n    at initState (node_modules/vue/dist/vue.runtime.esm.js:3199:0)\r\n    at VueComponent.Vue._init (node_modules/vue/dist/vue.runtime.esm.js:4437:0)\r\n    at new VueComponent (node_modules/vue/dist/vue.runtime.esm.js:4609:0)\r\n    at createComponentInstanceForVnode (/repro-vue-ssr-nomaps/node_modules/vue-server-renderer/build.js:7330:10)\r\n    at renderComponentInner (/repro-vue-ssr-nomaps/node_modules/vue-server-renderer/build.js:7515:40)\r\n```\r\n\r\nThis is what I expect. Notice that:\r\n  1. The status code is `500` (meaning `renderToString` was called with an `err`)\r\n  2. The stack trace uses source maps to clearly show where the error is coming from\r\n\r\n### What is actually happening?\r\nOn the other hand, importing `App` asynchronously (uncommenting `import('./App.vue')`), and then running `npm start` and the curl, we see the following output:\r\n\r\n\r\n**ASYNC:**\r\n```\r\n# STDOUT/STDERR\r\n[Vue warn]: Error in data(): \"ReferenceError: a is not defined\"\r\n\r\nfound in\r\n\r\n---> <App> at src/App.vue\r\n       <Root>\r\n[vue-server-renderer] error when rendering async component:\r\n\r\nReferenceError: a is not defined\r\n    at exports.modules.__webpack_exports__.a (0.server-bundle.js:195:3)\r\n    at exports.modules.__webpack_exports__.a (0.server-bundle.js:182:71)\r\n    at VueComponent.data (0.server-bundle.js:167:73)\r\n    at getData (server-bundle.js:3422:17)\r\n    at initData (server-bundle.js:3381:7)\r\n    at initState (server-bundle.js:3320:5)\r\n    at VueComponent.Vue._init (server-bundle.js:4558:5)\r\n    at new VueComponent (server-bundle.js:4730:12)\r\n    at createComponentInstanceForVnode (/repro-vue-ssr-nomaps/node_modules/vue-server-renderer/build.js:7330:10)\r\n    at renderComponentInner (/repro-vue-ssr-nomaps/node_modules/vue-server-renderer/build.js:7515:40)\r\n\r\n\r\n# HTTP OUTPUT\r\nHTTP/1.1 200 OK\r\nX-Powered-By: Express\r\nDate: Fri, 13 Oct 2017 13:45:41 GMT\r\nConnection: keep-alive\r\nContent-Length: 7\r\n\r\n<!---->\r\n```\r\n\r\nNotice that:\r\n  1. The status code is `200` (meaning `renderToString` was called *without* an `err`)\r\n  2. The stack trace does not use source maps and is very difficult to debug\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.4\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/qok5vcnf/1/](https://jsfiddle.net/qok5vcnf/1/)\r\n\r\n### Steps to reproduce\r\nAdd an errorHandler that throws an exception, and notice that the app halts badly.\r\n\r\n### What is expected?\r\nExceptions thrown from errorHandlers should use the console to print something, or fail silently.\r\n\r\n### What is actually happening?\r\nThe whole app rendering halts.\r\n\r\n---\r\nWas using the raven-js plugin for Vue, which triggers this behavior.  I have filed an issue over there with my feedback (https://github.com/getsentry/raven-js/issues/1061), but I thought it might save some future developers time to not fail quite so catastrophically in this case.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.4\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/TomKaltz/aao0waem/](https://jsfiddle.net/TomKaltz/aao0waem/)\r\n\r\n### Steps to reproduce\r\nDefine a component where the top level element has a v-if.  Declare that component in the parent template with a ref.\r\n\r\n### What is expected?\r\nThe ref should be available even if the component top-level v-if is false\r\n\r\n### What is actually happening?\r\nEven if the v-if is false, the component is still accessible via $refs on first load.  When you toggle the component v-if from false to true to false the parent ref becomes undefined.  The component beforeDestroy and destroyed event also does not fire.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.3.4\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/mapleeit/dnh0zpy8/](https://jsfiddle.net/mapleeit/dnh0zpy8/)\r\n\r\n### Steps to reproduce\r\nSSR will use `JSON.stringify` method stringify initial state to `window.__INITIAL_STATE__`\r\nbut this initial state has circular quote which will throw error like `TypeError: Converting circular structure to JSON`\r\n\r\nIs there any way to avoid this, or only thing I can do is to remove this circular state?\r\n\r\n### What is expected?\r\nuse something like [Circular] to avoid throwing error \r\n\r\n### What is actually happening?\r\nTypeError: Converting circular structure to JSON\r\n\r\n---\r\nIt's not convenient to make minimal reproduction on JSFiddle because of the webpack step.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.3\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/jLrvghtL/8/](https://jsfiddle.net/jLrvghtL/8/)\r\n\r\n### Steps to reproduce\r\n```\r\n<div id=\"app\">\r\n  <div v-if=\"status\" v-html=\"status\"></div>\r\n  <div v-else class=\"status\">else</div>\r\n  <button @click=\"toggleEdit\">\r\n    toggleEdit\r\n  </button>\r\n</div>\r\n```\r\n```\r\nnew Vue({\r\n  el: '#app',\r\n  data: {\r\n    status: false\r\n  },\r\n  methods: {\r\n    toggleEdit: function() {\r\n      this.status = !this.status\r\n    }\r\n  }\r\n})\r\n```\r\n\r\n\r\n### What is expected?\r\nThe `v-html=\"status\"` could be display correctly\r\n\r\n### What is actually happening?\r\nThe status won't be display, if the `status` equal `true` and the userAgent were `Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36`, unless we replace span with other tag.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://jsbin.com/qejofexedo/edit?html,js,output](https://jsbin.com/qejofexedo/edit?html,js,output)\r\n\r\n### Steps to reproduce\r\nsee reproduction link.\r\n\r\n### What is expected?\r\nWhen I click `Expand is True`, then `expand` to become `false`. And only `countA` changed.\r\n\r\n### What is actually happening?\r\nWhen I click `Expand is Ture`, nothing happened.\r\nThe `countA` and `countB` changed.\r\nI guess when I click, `expand` changed to `false`, but immediate the click event triggered. It executes another vnode click event. Then expand changed to `true`.\r\n\r\n### And More\r\n\r\n* If I rename the second div to another tag name, such as `p`, `section`, no errors occur.\r\n* If I move click event from `i` tag to parent `div` tag in the first div, no errors occur\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://github.com/busheezy/what-am-i-doing](https://github.com/busheezy/what-am-i-doing)\r\n\r\n### Steps to reproduce\r\nyarn  \r\nnpm run dev  \r\nopen link in internet explorer 11 and compare to chrome  \r\n\r\n### What is expected?\r\n```<progress value=\"50\" max=\"100.0\">50</progress>``` assigns value to ``50`` inside Vue document.\r\n\r\n### What is actually happening?\r\n```<progress value=\"50\" max=\"100.0\">50</progress>``` assigns value to ``1`` inside Vue document.\r\n\r\n---\r\nThanks. Sorry if I'm doing something silly.  \r\n```<progress value=\"50\" max=\"100.0\">50</progress>``` assigns value to ``50`` works correctly outside of the app.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/2pbthd1v/](https://jsfiddle.net/2pbthd1v/)\r\n\r\n### Steps to reproduce\r\nWhen calling `createElement`, pass a function that returns a promise which resolves to a Vue options bag.\r\n\r\nFor example:\r\n\r\n```html\r\n<div id=\"app\">\r\n  <p>{{ message }}</p>\r\n</div>\r\n```\r\n\r\n```ts\r\nvar options = {\r\n  template: '<div id=\"replacement\">Hello!!</div>',\r\n}\r\n\r\nnew Vue({\r\n  el: \"#app\",\r\n  render(h) {\r\n    return h(() => new Promise(r => r(options)));\r\n  }\r\n});\r\n```\r\n\r\n### What is expected?\r\nEither something useful or an error message.\r\n\r\n### What is actually happening?\r\nThe entire page stops responding.\r\n\r\n---\r\nThis was part of [the .d.ts test suite](https://github.com/vuejs/vue/blob/e51c0c0e68c53363caaf7f5893460a360b0e6bd7/types/test/options-test.ts#L99-L103). I wanted to see if a test case was legitimate, but I ended up finding that it triggers some sort of bad behavior.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://output.jsbin.com/hokacib](https://output.jsbin.com/hokacib)\r\n\r\n### Steps to reproduce\r\nUse a custom element that uses the slot element inside a Vue component. Elements meant to fill slots for the custom element are not rendered in HTML with the slot attribute.\r\n\r\n### What is expected?\r\nSlots for custom elements should behave as expected by the custom element in question. In the example I referenced, the left navigation drawer should remain identical in behavior when using either HTML or VueJS (the drawer on the left should open on wide browsers and hide on small browsers, which can be demonstrated by resizing the browser window horizontally on a computer). The custom element that uses slots is ```app-drawer-layout```.\r\n\r\n### What is actually happening?\r\nThe [slot] attribute is being picked up by VueJS, but is not being rendered in HTML. This causes the custom element to not behave as expected. In the example referenced, the drawer does not open on wide browser windows when using VueJS. By manually editing the rendered HTML from VueJS and adding the ```slot=\"drawer\"``` attribute to the ```app-drawer``` element, the custom element (```app-drawer-layout```) behaves as expected.\r\n\r\n---\r\nSince web components is still being drafted, I didn't know whether to submit this as a bug or a feature request. I haven't looked deep into the source code of Vue yet, but ideas I've had to solve this issue include:\r\n\r\n1) Ensuring that a Vue component absorbs the slot attribute, and rendering it to HTML if it is not absorbed\r\n 2) Add a directive before the slot attribute to signal to Vue to ignore that slot and render it to HTML instead of absorbing it (```slot=\"drawer\"``` to ```v-keep:slot=\"drawer\"```, or something along those lines)\r\n\r\nI'll look through the source code to get a better understanding of what is happening, but I wanted to submit this issue to get some sort of review for whether a fix for this issue would be a welcomed integration into Vue. I like the data binding nature of Vue, but I also have custom elements that I'd like to use at the same time. I've had no other issues with using Vue and custom elements except for this issue with ```slot```.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/4s3hj82k/](https://jsfiddle.net/4s3hj82k/)\r\n\r\n### Steps to reproduce\r\n1. Create a template using <a> as the root element\r\n\r\n2. Try to use it in an <svg>\r\n\r\n### What is expected?\r\nI either expected vue to understand that the <a> is supposed to be an SVG a tag (and not an xhtml a tag), or a way for me to override vue's decision and give it the proper namespace (e.g. making <svg:a> work ?)\r\n\r\n### What is actually happening?\r\nVue is creating the <a> tag as an xhtml:a tag, and so the browser doesn't render it.\r\n\r\nYou can make it render by wrapping it in an <svg>. This is undesirable however, for many reasons. Having a way to explicitly tell vue the namespace from which to create the element would be nice.\r\n\r\n---\r\nSVG &lt;a&gt; tag : https://developer.mozilla.org/fr/docs/Web/SVG/Element/a\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[http://jsfiddle.net/8zgakspv/49/](http://jsfiddle.net/8zgakspv/49/)\r\n\r\n### Steps to reproduce\r\n1. Add an item\r\n2. While the item moves to it's position quickly type something in the input.\r\n\r\n### What is expected?\r\nThe added item transition should be **list-enter**\r\n\r\n### What is actually happening?\r\nThe which is being added gets **list-move** transition applied\r\n\r\n---\r\nLooking a bit in the code it seems that the \"move\" transition is applied whenever the position of an element in [the list changes](https://github.com/vuejs/vue/blob/ae93d2bef8e20402ae3501aa5cdcf14b0ee19c12/src/platforms/web/runtime/components/transition-group.js#L161)\r\n\r\n\r\nwhich is triggered upon [update](https://github.com/vuejs/vue/blob/ae93d2bef8e20402ae3501aa5cdcf14b0ee19c12/src/platforms/web/runtime/components/transition-group.js#L101)\r\n\r\nwhich I assume is triggered by the input change which causes the transition group component to be updated\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[http://jsfiddle.net/zjsuzqgu/15/](http://jsfiddle.net/zjsuzqgu/15/)\r\n\r\n### Steps to reproduce\r\nThis issue only occurs in Internet Exporer 11 on textareas and input fields when using v-model binding.\r\n\r\n1. Open the http://jsfiddle.net/zjsuzqgu/15/ with IE 11\r\n2. Quickly enter text into the second textarea (maybe you should press 3 buttons at same time)\r\n\r\nWe used a barcode scanner to enter the texts, but its also possible to reproduce it with the keyboard.\r\nWe also recognized that it happens more often on slow machines\r\n\r\n### What is expected?\r\nAll keys are recognized\r\n\r\n### What is actually happening?\r\nSome letters are missing randomly\r\n\r\n---\r\nWe made a video of this behaviour: https://youtu.be/w-IYuPBGdR0\r\n\r\nYou could reproduce this even on the vuejs page https://vuejs.org/v2/guide/forms.html#Text\r\n\r\nI just added a v-on:input to the textarea to see whats logged there. \r\nThe result was \r\nA\r\nA\r\nAC\r\nAC\r\n\r\nThe B was never recognized even in input event\r\n\r\nI also changed the intercharacter delay of the scanner from 1 ms to 25 ms without success\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\n[env.js](https://github.com/vuejs/vue/blob/dev/src/core/util/env.js) currently contains 6 user agent sniffing detections that can be faked, and may not always return what's expected.\r\n\r\nFor instance, `isAndroid = UA && UA.indexOf('android') > 0` will also detect Firefox on Android. Is the real intention to detect WebKit browsers on Android, because that would require also checking for `'WebkitAppearance' in document.documentElement.style` or `!'MozAppearance' in document.documentElement.style`?\r\n\r\nSimilarly, some Android devices use `iPhone` and `iPad` in their UAs to get around, ironically, bad UA sniffing. True iOS can be detected with `'webkitOverflowScrolling' in document.documentElement.style`.\r\n\r\nEdge can be detected with `!!(window.CSS && window.CSS.supports('-ms-user-select', 'none'))`\r\n\r\nIE can be detected with `('msScrollLimit' in document.documentElement.style || 'behavior' in document.documentElement.style) && !isEdge`\r\n\r\nIE9 can be detected with `isIE && !'msUserSelect' in document.documentElement.style`\r\n\r\nChrome can be detected with `window.chrome && !isEdge`, which also returns true for Opera, and false for Chrome on iOS.\r\n\r\n\r\n\r\n### What does the proposed API look like?\r\n```\r\nconst htmlStyle = document.documentElement.style\r\nexport const isEdge = !!(window.CSS && window.CSS.supports('-ms-user-select', 'none'))\r\nexport const isIE = ('msScrollLimit' in htmlStyle || 'behavior' in htmlStyle) && !isEdge\r\nexport const isIE9 = isIE && !'msUserSelect' in htmlStyle\r\nexport const isAndroid = UA && UA.indexOf('android') > 0 && 'WebkitAppearance' in htmlStyle\r\nexport const isIOS = 'webkitOverflowScrolling' in htmlStyle\r\nexport const isChrome = window.chrome && !isEdge\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://github.com/johnlindquist/vue-typescript-simple](https://github.com/johnlindquist/vue-typescript-simple)\r\n\r\n### Steps to reproduce\r\nCreate a new Vuejs project with Typescript and add a plugin that passes 3 arguments into the use command.\r\n1. download https://github.com/johnlindquist/vue-typescript-simple\r\n2. install vue-native-websocket\r\n\r\n    npm install vue-native-websocket --save\r\n3. Add the following lines to src/main.ts:\r\n\r\n    import VueNativeSock from 'vue-native-websocket'\r\n    Vue.use(VueNativeSock, 'ws://localhost:9090', { store: store, format: 'json' })\r\n\r\n\r\n\r\n### What is expected?\r\nThat the vue.d.ts definition for the use function reflects the actual functionality.\r\n\r\n### What is actually happening?\r\nThe vue.d.ts definition only allows for the Plugin object or function and an options object. \r\n\r\n---\r\nThe actual function defined in vue/use.js takes in the Plugin object or function and any number of optional parameters, it doesn't actually ask for an options object, that's all up to the Plugin. \r\n\r\nMy suggestion would be to make the following change:\r\nThe vue.d.ts line 101 should be:\r\n\r\n    static use<T>(plugin: PluginObject<T> | PluginFunction<T>, ...additionalParams: any[]): void;\r\n\r\nand not:\r\n\r\n    static use<T>(plugin: PluginObject<T> | PluginFunction<T>, options?: T): void;\r\n  \r\nYou could have both options available, but the way that the function is written in use.js, the definition I've written above should be more correct.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nI have developed some components that can generate large amounts of HTML, and allow content to be added via slot. It appears that if the slot content is updated, the render function is called for the component; however, this seems like something that could be avoided through optimization which would significantly improve the performance of my component in some instances.\r\n\r\nIs this possible?\r\n\r\n### What does the proposed API look like?\r\nNot proposing API changes.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nLoading a vue component with a syntax error breaks the the entire application. More robust handling of the error in the stack.\r\n\r\nSee fiddle:https://jsfiddle.net/mgoetzke/f0cd61a3/\r\n\r\nWhen pressing 'Show 3' first a new item appears. When pressing 'Show 2' first it will break the app and 'Show 3' won't work anymore. \r\n\r\n```\r\n[Vue warn]: Error in nextTick: \"InvalidCharacterError: Failed to execute 'setAttribute' on 'Element': 'style ' is not a valid attribute name.\"\r\nwarn @ vue@2.4.2:485\r\nhandleError @ vue@2.4.2:568\r\n(anonymous) @ vue@2.4.2:709\r\nnextTickHandler @ vue@2.4.2:654\r\nPromise resolved (async)\r\ntimerFunc @ vue@2.4.2:669\r\nqueueNextTick @ vue@2.4.2:717\r\nqueueWatcher @ vue@2.4.2:2815\r\nupdate @ vue@2.4.2:2950\r\nnotify @ vue@2.4.2:784\r\nreactiveSetter @ vue@2.4.2:1006\r\nproxySetter @ vue@2.4.2:3075\r\nclick @ VM632:2\r\ninvoker @ vue@2.4.2:1820\r\nvue@2.4.2:572 DOMException: Failed to execute 'setAttribute' on 'Element': 'style ' is not a valid attribute name.\r\n    at setAttr (https://unpkg.com/vue@2.4.2:5816:10)\r\n    at Array.updateAttrs (https://unpkg.com/vue@2.4.2:5776:7)\r\n...\r\n```\r\n\r\n\r\n### What does the proposed API look like?\r\nThere would not be a new api, just don't render anything and log the error but don't break the rest of the application similar to html parse errors.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### What problem does this feature solve?\r\nErrors raised by the html parser (`options.warn` in the code) don't register the location of the error.\r\n\r\nWith the location it will be much easier to debug.\r\n\r\nFor example if I forget to close an HTML tag, the compiler will complain and tell me the name of the tag. However I will have no idea where the opening tag is located. For moderately big files it's quite impractical.\r\n\r\n### What does the proposed API look like?\r\nIn `parseHTML` we could add a property in options that will include the line at which the HTML is included in the `.vue` file. We can use this to offset the location before printing it.\r\n\r\nAs for getting the locations themselves I have no idea how to proceed. If someone can give me some pointers I may submit a pull request.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://github.com/vuejs/vue/blob/dev/packages/vue-server-renderer/build.js#L372](https://github.com/vuejs/vue/blob/dev/packages/vue-server-renderer/build.js#L372)\r\n\r\n### Steps to reproduce\r\n&lt;div :data-id=\"id\" :data-url=\"\"url&gt;&lt;/div&gt;\r\n\r\n### What is expected?\r\nnot cache escape attribute\r\n\r\n### What is actually happening?\r\nattribute is cached\r\n\r\n---\r\nsee https://github.com/vuejs/vue/blob/dev/packages/vue-server-renderer/build.js#L372\r\n\r\nthe attribute will be cached when escaped.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://github.com/Justineo/vue-esnext-in-template](https://github.com/Justineo/vue-esnext-in-template)\r\n\r\n### Steps to reproduce\r\n`vue init webpack esnext-in-template`\r\n\r\n`src/components/Hello.vue`:\r\n\r\n```vue\r\n<template>\r\n<div :class=\"{ a: true, ...b }\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return { b: true }\r\n  }\r\n}\r\n</script>\r\n```\r\n\r\n(`babel-preset-stage-2` is already enabled after initializing with `vue-cli`.)\r\n\r\n### What is expected?\r\nThe `class` value should be `a b`.\r\n\r\n### What is actually happening?\r\n```\r\nError compiling template:\r\n\r\n- invalid expression: :class=\"{ a: true, ...b }\"\r\n```\r\n\r\n---\r\n`vue-template-compiler` seems to be [validating the expression before it goes through Babel](https://github.com/vuejs/vue/blob/c628103ca1ec4d0798c67412f6c458055a2073c8/packages/vue-template-compiler/build.js#L3764) with trying to evaluate `new Function(exp)`. This makes ES features that can be used in templates limited to those Node supports and causes confusion: I can translate spread operators for arrays both in templates and elsewhere but I can translate spread operators for objects anywhere except in templates. I think this might not be intentional so I mark this as a bug.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### What problem does this feature solve?\r\nPlease provide a declaration file, thanks.\r\n\r\n### What does the proposed API look like?\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/hgfx55h6/](https://jsfiddle.net/hgfx55h6/)\r\n\r\n### Steps to reproduce\r\n1. Create large array (in my case this array contains more Arrays)\r\n2. Prevent extensions with `Object.preventExtensions`\r\n3. Set the array on a Vue viewmodel\r\n\r\n### What is expected?\r\nVue's reactivity system should not do anything with this array, and setting this property should have the same runtime as setting a string on the viewmodel (i.e. O(1) )\r\n\r\n### What is actually happening?\r\nThe [`dependArray`](https://github.com/vuejs/vue/blob/dev/src/core/observer/index.js#L249) function is invoked recursively on the object every time the array is accessed, causing the setting of that property to take linear time. This can occur many times per tick.\r\n\r\n---\r\n[This reproducer](https://jsfiddle.net/hgfx55h6/) is very close to my actual scenario. I am building a virtual grid, where I have a large source array, and I compute some start index (normally this would be based on scroll position, in this case I've just added a button to simulate scrolling), and the template renders these rows.\r\n\r\nIn this jsfiddle, I have `Object.preventExtensions()`'d the array and never change it. The only thing I am changing is the start index, however doing so has an enormous amount of lag. When I profile this I see:\r\n\r\n![image](https://user-images.githubusercontent.com/1354771/28982036-3b60e298-7922-11e7-8c45-d5cd197991b8.png)\r\n\r\nMy issue at its core has nothing to do with reactivity, and is solely about performance. This does not seem like something that should perform this poorly.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.4.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/0wvstw39/1/](https://jsfiddle.net/0wvstw39/1/)\r\n\r\n### Steps to reproduce\r\n1. Create `<input type=\"checkbox\" :value=\"[1]\" />`\r\n2. Bind it to an array using `v-model`.\r\n\r\n### What is expected?\r\nToggling the checkbox will add/remove the `value` array to the `v-model` array.\r\n\r\n### What is actually happening?\r\nToggling the checkbox adds the contents of the `value` array to the `v-model` array. Checkbox is not toggled and contents are added as many times as clicked.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nIf I have a computed property with only getter, setter is set to a noop. If I then try to assign to such a computed property, nothing happens. This can hide programming errors.\r\n\r\n### What does the proposed API look like?\r\nI would suggest that when not in production, instead of a noop a warning function would be assigned to a setter and a warning message would be printed if one tries to assign a value to such computer property.\r\n\r\nAlternatively, output of computed property without setter could be configured without a setter at all, as a read-only property.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nIf one has an iteration over object or array, but do not know that before hand, would be usefull to use `(value, key, index) in object` or `(value, key, index) in array` having `key` and `index` properly populated.\r\n\r\n### What does the proposed API look like?\r\nWhen using `(value, key, index) in array`, `key` and `index` would have both the same value, the index of the element in the array.\r\n\r\n**Template:**\r\n\r\n```html\r\n<ul id=\"repeat-object\">\r\n    <li v-for=\"(value, key, index) in object\">\r\n       {{key}} = {{ value }}\r\n    </li>\r\n    <li v-for=\"(value, key, index) in vector\">\r\n       {{key}} = {{ value }}\r\n    </li>\r\n</ul>\r\n```\r\n\r\n** JS: **\r\n\r\n```js\r\nnew Vue({\r\n    el: '#repeat-object',\r\n    data: {\r\n        object: {\r\n             firstName: 'John',\r\n             lastName: 'Doe',\r\n             age: 30\r\n        },\r\n        vector: [\r\n            \"a\", \"b\", \"c\"\r\n        ]\r\n    }\r\n})\r\n```\r\n**Result**\r\n\r\n- firstName = John\r\n- lastName = Doe\r\n- age = 30\r\n- 0 = a\r\n- 1 = b\r\n- 2 = c\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### What problem does this feature solve?\r\nConsidering this binding:\r\n\r\n```<input type=\"text\" v-model=\"data.val1\">```\r\n\r\nThis works fine if there is for example { data:{ val1:null }} defined in component-data, but if only { data:{} } is defined it doesn't work correctly because while val1 is created by v-model, it's not made reactive.\r\n\r\nBy using Vue.set for setting values, this wouldn't be a problem which would make live easiert for certain usecases.\r\n\r\n### What does the proposed API look like?\r\nNo visible change.\r\n\r\nBut to maintain the actual behaviour this could also be implemented using a modifier like 'set' for example:\r\n\r\n```<input type=\"text\" v-model.set=\"data.val1\">```\r\n\r\nThis would use Vue.set(data, 'val1', ...) instead of simply generating data.val1 = ...\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"I see that in [looseEqual](https://github.com/vuejs/vue/blob/dev/src/shared/util.js#L238) function you are using `JSON.stringify`, but `JSON.stringify` has no quarantines on key order when serializing. [See here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description):\r\n\r\n> Properties of non-array objects are not guaranteed to be stringified in any particular order. Do not rely on ordering of properties within the same object within the stringification."},{"labels":["enhancement"],"text":"### Version\r\n2.3.4\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/v0dbnvv0/1/](https://jsfiddle.net/v0dbnvv0/1/)\r\n\r\n### Steps to reproduce\r\nVue.set(array, \"indexInTheArrayInString\", value) is not working as expected compare to Vue.set(array, \"indexInTheArrayInNumericForm\", value)\r\n\r\n### What is expected?\r\nBoth version working the same i suppose?\r\n\r\n### What is actually happening?\r\nWatcher on the value are not triggered even if the value is correctly changed in the model\r\n\r\n---\r\nMy currently fixed in my code:\r\nexport function AdvVueSet(obj, path, value) {\r\n    if (!isNaN(path)) {\r\n        path =  +path;\r\n    }\r\n    Vue.set(obj, path, value);\r\n}\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement",null],"text":"### Version\r\n2.3.3\r\n\r\n### Reproduction link\r\n[http://jsbin.com/fegogus/edit?html,css,js,output](http://jsbin.com/fegogus/edit?html,css,js,output)\r\n\r\n### Steps to reproduce\r\nApply a transition group to v-for when using popular CSS frameworks, most noticeable with Semantic-UI but also apparent with Bootstrap. Example uses table rows but issue also appears with something more simple, such as an unordered list.\r\n\r\n### What is expected?\r\nTransition group continues to have similar performance as it does without any CSS applied\r\n\r\n### What is actually happening?\r\nThere is a considerable amount of update lag, particularly when changing the v-for array using slice\r\n\r\n---\r\nThis obviously walks the line between a VueJS issue and an issue for one of the involved frameworks. I'm opening the case here though as honestly I don't know that anyone on the Semantic-UI side of things would be able to help.\r\n\r\nThe example is a little more complicated than needed to reproduce the issue simply because I wanted to show my use case - which is animating additions to the array used by v-for but otherwise having no transitions. This is because the table will also be paginated (sliced) or sorted and I don't want to animate that process at all.\r\n\r\nIn the example you can toggle using a transition-group on and off. Without the transition group the DOM updates instantly as expect. With it turned on, and even without any transition being active, you can see that toggling between sliced and the full array is very slow to update the visible DOM.\r\n\r\nAlso sorry for submitting this three times, the new issue vue site was doing something goofy in Chrome, had to switch to Safari.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement",null],"text":"### Version\r\n2.3.3\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/ma7moudat/u82ugj8z/1/](https://jsfiddle.net/ma7moudat/u82ugj8z/1/)\r\n\r\n### Steps to reproduce\r\nSet up a transition group that automatically rotates through a list of items and shows one item at a time (a slider if you will).\r\n\r\n\r\n\r\n### What is expected?\r\nThe last item disappears and the new item appears at the specified intervals.\r\n\r\n### What is actually happening?\r\nEverything seems to be running perfectly fine, but if you leave the window for a minute or so (go to a new tab or another window) and then come back, the transition group becomes a mess, because the transition classes get added over and over without being removed from the items.\r\n\r\nSo you would get something like this!\r\n\r\n```<div class=\"item crossfade-enter-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to crossfade-enter-to crossfade-leave-to .........\">```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### What problem does this feature solve?\r\nFrom compiling template error message:\r\n`Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.`\r\nBut `Cannot use `<template>` as component root element because it may contain multiple nodes.`\r\n\r\nSo I can't use `<template>` as component root element even if it contains only one node.\r\n\r\n### What does the proposed API look like?\r\n**Allow the following code as component root.**\r\n```html\r\n<template v-if=\"conditionA\">\r\n\t<div v-if=\"conditionC\"></div>\r\n\t<div v-else-if=\"conditionD\"></div>\r\n\t<div v-else></div>\r\n</template>\r\n<template v-else>\r\n\t<div></div>\r\n</template>\r\n```\r\n\r\n**Do not allow the following code as component root.**\r\n```html\r\n<template>\r\n\t<div v-if=\"conditionA\"></div>\r\n\t<div v-if=\"conditionB\"></div>\r\n</template>\r\n```\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.3.3\r\n\r\n### Steps to reproduce\r\nSet\r\n  Vue.config.silent = true;                                                                                                                            \r\nOpen DevTools in Electron (which doesn't support Chrome extensions).\r\n\r\nVue spams the devtools console with \"Download the Vue Devtools extension...\" despite needing to be silent.\r\n\r\n### What is expected?\r\nVue.config.silent = true; ought to shut Vue up.\r\n\r\n### What is actually happening?\r\nVue can't be silenced when devtools are used despite any possible reasons for not having vue-devtools.\r\n\r\n---\r\nHere's a patch to fix the issue:\r\n\r\n\t--- vue/dist/vue.common.orig 2017-05-21 17:48:33.757145111  0200\r\n\t    vue/dist/vue.common.js   2017-05-21 17:59:42.254510594  0200\r\n\t@@ -7578,7  7578,7 @@\r\n\t   if (config.devtools) {\r\n\t     if (devtools) {\r\n\t       devtools.emit('init', Vue$3);\r\n\t-    } else if (process.env.NODE_ENV !== 'production' && isChrome) {\r\n\t     } else if (process.env.NODE_ENV !== 'production' && isChrome && !config.silent) { // shutup inside electron\r\n\t       console[console.info ? 'info' : 'log'](\r\n\t         'Download the Vue Devtools extension for a better development experience:\\n'  \r\n\t         'https://github.com/vuejs/vue-devtools'\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"### Version\r\n2.3.2\r\n\r\n### Reproduction link\r\nhttps://jsfiddle.net/frctmhLd/3/\r\n\r\n### Steps to reproduce\r\nCreate a scoped slot using the <template> element, as is necessary\r\nUse dynamic props to set the slot property on the <template>\r\nAttempt to utilize this slot\r\n\r\n\r\n### What is expected?\r\nThe slot is loaded and display correctly\r\n\r\n### What is actually happening?\r\nDynamic properties don't seem to work on the <template> component, so the \"slot\" property is getting set to null and it is not being loaded\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,null,"enhancement"],"text":"### Version\r\n2.3.2\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/yywfw3cL/5/](https://jsfiddle.net/yywfw3cL/5/)\r\n\r\n### Steps to reproduce\r\nMake a component extend another one while both parent and child define an injection : the parent' injection is lost (overridden)\r\n\r\n### What is expected?\r\nInjections to be merged\r\n\r\n### What is actually happening?\r\nInjections override parent' ones\r\n\r\n---\r\nThe injections initialisation looks for the injections own keys - so we cannot merge with a prototype like it is done in function mergeAssets or with \"Other object hashes\" : props/methods/computed\r\nWe instead have to copy the object and extend it in its own properties.\r\nIt might be cleaner if it was allowed to use the prototype.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.3.2\r\n\r\n### Reproduction link\r\n[https://github.com/amoe/vue-ssr-template-expansion](https://github.com/amoe/vue-ssr-template-expansion)\r\n\r\n### Steps to reproduce\r\n* `npm install`\r\n* `npm run build:server`\r\n* `node renderingServer.js`\r\n\r\nThen access `http://localhost:8080`.\r\n\r\n### What is expected?\r\nNo error and to see the text: `Blah`\r\n\r\n### What is actually happening?\r\nAn error during rendering.\r\n\r\n    [ReferenceError: itl is not defined]\r\n    ReferenceError: itl is not defined\r\n        at Object.eval (eval at <anonymous> (/home/amoe/foobar/node_modules/lodash.template/index.js:1089:12), <anonymous>:8:5)\r\n        at TemplateRenderer.renderSync (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:1976:16)\r\n        at RenderContext.done (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:5701:39)\r\n        at RenderContext.next (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:2169:17)\r\n        at RenderContext.next (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:2186:12)\r\n        at RenderContext.cachedWrite [as write] (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:1646:9)\r\n        at RenderContext.next (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:2180:14)\r\n        at RenderContext.cachedWrite [as write] (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:1646:9)\r\n        at RenderContext.renderNode (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:5412:15)\r\n        at RenderContext.next (/home/amoe/foobar/node_modules/vue-server-renderer/build.js:2177:14)\r\n\r\n\r\n---\r\nThis error is caused by the omission of whitespace in `index.template.html`.\r\n\r\n    <title>{{title}}</title>\r\n\r\nshould be\r\n\r\n    <title>{{ title }}</title>\r\n\r\nThis whitespace requirement should be documented, or removed if it's unnecessary; it's not consistent with the way that templates work elsewhere.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.2.6\r\n\r\n### Reproduction link\r\n[https://fiddle.jshell.net/whoisbigZ/ec11h6gj/2/](https://fiddle.jshell.net/whoisbigZ/ec11h6gj/2/)\r\n\r\n### Steps to reproduce\r\nI use deep watch to trace an object. See source code, it's very simple.\r\n\r\n\r\n\r\n### What is expected?\r\nI hope the setter of v-model should notice deep watch. Why not?\r\n\r\n### What is actually happening?\r\nBut I found the vue cannot detect the array change from checkbox.\r\n\r\n\r\n---\r\nI know some caveats about detect the changes of array, but I just use v-model in checkbox.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.2.6\r\n\r\n### Reproduction link\r\n[https://github.com/kailniris/vue-multi-window](https://github.com/kailniris/vue-multi-window)\r\n\r\n### Steps to reproduce\r\n1. clone repo\r\n2. npm run dev\r\n3. Start the app in nw.js sdk *\r\n4. press the 'Open sub window button' some times to open new windows\r\n\r\nstep 3:\r\n- Start the app in nw.js sdk\r\n- download nw.js https://dl.nwjs.io/v0.21.4/nwjs-sdk-v0.21.4-win-x64.zip\r\n- create a shortcut with this target C:\\path\\to\\nw.exe C:\\path\\to\\vue-multi-window\\package\r\n- after the main window loaded open devtools and start record allocation timeline\r\n\r\n### What is expected?\r\nNo memory leak happens when a sub window is opened then closed.\r\n\r\n### What is actually happening?\r\nWith every window the memory consumation is grown by 10mb aprox. A memory leak happens every time a window is opened and closed.\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.2.6\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/rstoenescu/uqsath1t/2/](https://jsfiddle.net/rstoenescu/uqsath1t/2/)\r\n\r\n### Steps to reproduce\r\nRun jsfiddle, uncheck the tick box and look at browser console log. Vue tries to call Node.insertBefore() API but parent node does not match element's parent (which has been relocated in `mounted()` method). \r\n\r\n### What is expected?\r\nNot to throw the error.\r\n\r\n### What is actually happening?\r\nError is thrown: `DOMException: Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.(…)`\r\n\r\n---\r\nSubmitting fix in a bit. This helps with some features of Quasar Framework (Tooltip, Popover, and new ones currently unreleased).\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.2.4\r\n\r\n### Reproduction link\r\n[https://jsfiddle.net/gL3f27eg/4/](https://jsfiddle.net/gL3f27eg/4/)\r\n\r\n### Steps to reproduce\r\nRun the darn thing\r\n\r\n### What is expected?\r\nAn alert saying \"Caught error\"\r\n\r\n### What is actually happening?\r\nA console error with the exception\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":["enhancement"],"text":"### Version\r\n2.2.4\r\n\r\n### Reproduction link\r\nhttps://martar.fr/demo-vue.html\r\n\r\n### Steps to reproduce\r\n- Use the following snippet:\r\n\r\n```\r\n<script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\r\n\r\n<div id=\"app\">\r\n    <form @submit.prevent=\"doSomething()\">\r\n        <input type=\"email\" v-model=\"email\" name=\"email\">\r\n        <input type=\"password\" name=\"password\">\r\n        <input type=\"submit\" value=\"send\">\r\n    </form>\r\n\r\n    {{ email }}\r\n</div>\r\n\r\n<script type=\"text/javascript\">\r\n  new Vue({\r\n    el: '#app',\r\n    data: {\r\n      email: ''\r\n    },\r\n    method: {\r\n      doSomething() {\r\n        alert(this.email)\r\n      }\r\n    }\r\n  })\r\n</script>\r\n```\r\n- Go to Chrome Mobile\r\n- Begin to tap an email\r\n- Choose an email from Chrome list\r\n- See that v-model did not work\r\n\r\nHere some screenshots of the problem:\r\n\r\n![Step 1](https://sc-cdn.scaleengine.net/i/86f1b336982e895a13ab625f6072eb10.png)\r\n\r\n### What is expected?\r\nv-model is supposed to be updated on autoupdate\r\n\r\n### What is actually happening?\r\nthe model is not updated\r\n\r\n---\r\n\r\n<!-- generated by vue-issues. DO NOT REMOVE -->"},{"labels":[null,"enhancement"],"text":"## Versions\r\n\r\nVue 2.0.1\r\nvue-server-renderer 2.0.1\r\nWindows 7\r\n\r\n## What is Expected?\r\nvue-server-renderer faster.\r\nserver-render is just for rendering html string, reusing code with browser side maybe easier to maintenance, but still cause lower performance which can't be ignore, especially using it with giant number of users(qq qzone hybrid website).\r\n\r\n## What is actually happening?\r\nUsing virtual dom to render html string on server side will cost more time which is about 10-20 times than traditional template engine without using virtual dom.\r\n\r\n## Reproduction repository\r\nI write a small js called jscHelper to convert vue virtual dom tree to normal render function for improving performance. \r\nBut the compatibility is not good. \r\nSo I hope there will be an original way to solving it.\r\nhttps://github.com/jialunguo/vue-server-render-jscHelper.git\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Jsfiddle vue v2.2.1: https://jsfiddle.net/dobuznsc/1/\r\nJsfiddle vue v1.0.12: https://jsfiddle.net/dobuznsc/2/\r\n\r\nAs you can see, there're 3 textareas and inputs in 3 different scopes:\r\n - out of vue / body scope: textarea and input values as preserved, as expected\r\n - root vue instance scope: textarea and input values are preserved, as expected\r\n - component scope: input value is preserved, textarea's is not (in v2), however, they are preserved in v1\r\n\r\nMy question is, why are textareas in root and component scope handled differently, is this a bug? "},{"labels":["enhancement"],"text":"### Versions\r\nVue 2.2.1  \r\nChrome 56.0.2924.87 (64-bit)\r\nWindows 10\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/zey5eL5v/\r\n\r\n### Steps to reproduce\r\nTesting on Chrome, bind `{ cursor: 'grab' }` to an element's `style` attribute.\r\n\r\n### What is Expected?\r\nAt least on Chrome, `style` should be assigned `cursor: -webkit-grab` (noting that it should also be autoprefixed).\r\n\r\n### What is actually happening?\r\nOn Firefox, `style` is assigned `cursor: grab` (works as expected). On Chrome, the element doesn't receive a `style` attribute.\r\n\r\nI'm guessing Vue is simply ignoring the property because it's not recognized by Chrome."},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.2.0\r\nOlder versions have this issue too.\r\n\r\n### Reproduction Link\r\nhttps://jsbin.com/sujuwabufi/3/edit?html,js,output\r\n\r\n### Steps to reproduce\r\nThe steps must be in order. If any step is skipped or the order is changed the bug does not appears.\r\n\r\n1. Register a global component. The component has to have a watcher, watching a data property or a prop.\r\n2. Create a Vue instance and attach it to an element in a dom.\r\n3. Create/get a data set and put it in a shared state. (global object)\r\n4. Create a new Vue instances with the following criteries and attach it to an element in the dom.\r\n\r\n- The shared state has to be reactive in this instance (put it into the instances data property)\r\n- The instance has to watch the shared state with a deep watcher.\r\n- The instance needs a computed property returning any value.\r\n- The instance needs a computed property returning a value based on the shared state object.\r\n\r\n5. Mutate the shared state. (repro case test button )\r\n\r\n### What is Expected?\r\nApp does not freeze.\r\n\r\n### What is actually happening?\r\nThe app freezes for several seconds, depend on how big the data set is. The reason behind this is change detection triggered for every object in the data set but it should only for the watcher one time and for the computed property one time.\r\n\r\nOne thing to note is this only happen one time after the first mutation. After that everything work as intended.\r\n\r\nHere is a profiling \r\n![timeline](https://cloud.githubusercontent.com/assets/19587188/23340320/8709263a-fc34-11e6-9a72-a0a3ebb723bb.jpg)"},{"labels":["enhancement"],"text":"To reproduce:\r\n- open https://vuejs.org/v2/guide/forms.html#Multiline-text with IE 11.0 (Edge) on Windows 7\r\n- type some text in the textarea\r\n- move the cursor at the beginning of the text (press the Home key)\r\n- quickly type random chars\r\n=> the cursor jumps to the end\r\n\r\nsame issue with input type=text (https://vuejs.org/v2/guide/forms.html#Text)\r\n"},{"labels":["enhancement"],"text":"Hi Vuejs team,\r\n\r\nThank you to take time have a look at this issue. \r\nThere are lots of `<span><span></span></span>`, and it never crosses my mind that it may because the event handler binding issue.\r\nAnd worse, there is no error message in Chrome DevTools Console with Vue Devtools (Debug mode) at all.\r\nFinally I change the method name and the issue is solved, but I think there is a improvement on it, either in the Vue compiling code checking or at the document.\r\n\r\nI make a simple demonstration for the issue, please refer to the sample Code with issue at [JSfiddle](https://jsfiddle.net/ut9ofv57/7/)\r\n\r\n### Vue.js version\r\n2.1.10\r\n\r\n### Reproduction Link\r\nSample Code with issue at JSfiddle: <https://jsfiddle.net/ut9ofv57/7/>\r\n\r\n### Steps to reproduce\r\n#### 1. delete(s) case - not as expected\r\n* Step 1): When using delete(s) in methods{}, it __compiles successfully__ and there is __no warning__.\r\n```JavaScript\r\n        methods: {\r\n            delete(s) {\r\n                alert('delete!')\r\n            }\r\n        }\r\n```\r\n* Step 2): Click the \"Delete Me (Not Working)\" button.\r\n\r\n### What is Expected?\r\nThere should not compile successfully, or there is some warning message at the Vue Devtools (Debug mode).\r\n\r\nAn example of expected result as following,\r\n#### 2. delete() case - as expected\r\n* When define the method name as delete() for a button click event.\r\n```JavaScript\r\n        methods: {\r\n            delete() {\r\n                alert('delete!')\r\n            }\r\n        }\r\n```\r\n* It is showing compiling warning. It is __OK__ and a __expected result__.\r\n```\r\n[Vue warn]: failed to compile template:\r\n\r\n<div id=\"app\">\r\n<button type=\"button\" @click=\"delete()\">Click Me</button>\r\n</div>\r\n\r\n- avoid using JavaScript keyword as property name: \"delete\" in expression @click=\"delete()\"\r\n (found in root instance)\r\n```\r\n\r\n### What is actually happening?\r\n* Page __Compiles successfully__.\r\n* There is __no warning__ at Chrome DevTools Console with Vue Devtools (Debug mode).\r\n* Event handler is not binding with the name of delete(s).\r\n\r\n### Solution (Temporary)\r\nJust simply rename the method, DO NOT use the name of delete(s).\r\n\r\n### Suggestion\r\nI read the document on <https://vuejs.org/v2/guide/events.html>, but there is not information about this.\r\n\r\nSo here I would like to suggest,\r\n* Enhance the compile checking to \"delete(s)\" or similar case, if it is possible.\r\n* Enhance Vue Devtools to show the warning message (in this case, showing it when click the button), if it is possible.\r\n* Improve the document to include some rules (e.g. \"avoid using JavaScript keyword as property name\" is a good one) or examples for the method names that the developers should not use in Vue methods:{}.\r\n\r\nBest Regards,\r\nShijian"},{"labels":["enhancement",null],"text":"### Vue.js version\r\n2.1.10\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/bhrztdjn/4/\r\n\r\n### Steps to reproduce\r\nClick on \"Toggle\" button.\r\n\r\n### What is Expected?\r\nTransitions for a component should have the same behavior as transitions applied to HTML element.\r\n\r\n### What is actually happening?\r\nA CSS transition works fine with an HTML element with both directive - `v-if` and `v-show` (as [declared in docs](https://vuejs.org/v2/guide/transitions.html#Transitioning-Single-Elements-Components)).\r\nBut for the component, which has a directive v-show on its root element the transition isn't applied on entering and leaving states.\r\nAnd for the component, which has a directive v-if on its root element the transition isn't applied on leaving state."},{"labels":["enhancement"],"text":"In Vue 1.0 with `.config.debug` set to `true` I just spent ages trying to find out why `v-html` was causing errors and finally realised it was because I had a custom directive v-html for a WYSIWYG editor.\r\n\r\nWould it be a good idea to issue a warning when this happens?\r\n\r\nThanks. \r\n\r\nAmazing work, by the way. I _love_ Vue!"},{"labels":["enhancement"],"text":"Hello, I think that undefined values should be handled as falsy values in attributes.\r\n\r\nhttps://jsfiddle.net/0yzf8wgf/\r\n\r\nThanks."},{"labels":["enhancement"],"text":"<!-- BUG REPORT TEMPLATE -->\r\n### Vue.js version\r\n2.1.10\r\n\r\n### Reproduction Link\r\n<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub repository that can reproduce the bug. -->\r\n<!-- You could start with this template: http://jsfiddle.net/df4Lnuw6/ -->\r\nhttps://jsfiddle.net/avnch8k5/\r\n\r\n### Steps to reproduce\r\n1.) Create a component\r\n2.) specify a foreignObject as the first tag in the component\r\n3.) Look for errors in console output\r\n\r\n### What is Expected?\r\nIt should recognize that it's a valid tag and carry on\r\n\r\n### What is actually happening?\r\nIf you look at the code pen above you'll notice that vue is looking for a component called foreignObject but not finding one and gives a warning about that. Interestingly, with the inline template it still seems to work.\r\n\r\nI was messing around with this in a single file component and it wasn't rendering. Same error spit out in the console as before. I noticed that it was making `foreignObject` all lowercase... same for the `requiredFeatures` attribute. Otherwise I suspect it would work despite the warning. \r\n\r\n```pug\r\n  //- g.HTMLNode\r\n  foreignObject(\r\n    requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"\r\n    width=\"100\"\r\n    height=\"100\"\r\n  )\r\n    body(xmlns=\"http://www.w3.org/1999/xhtml\")\r\n      p hello world!\r\n</template>\r\n```\r\n\r\nHere's the DOM output:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/3087225/22413525/b14533d0-e686-11e6-8348-343b669a30eb.png)\r\n\r\nInterestingly if I uncomment the `g` tag in front of the `foreignObject` tag it works. \r\n"},{"labels":["enhancement"],"text":"My custom \"select\" component behaves differently when compared to simply using a raw select element in my template.\r\n\r\nWhen the custom select's value is null and the options are loaded async, the first option is automatically selected.\r\n\r\nExpected: The custom select's \"selected\" value should remain empty. This is the behavior when using a raw select in the template (not a custom component).\r\n\r\nHere's a simple fiddle illustrating the issue:\r\nhttps://jsfiddle.net/33df9qu8/3/\r\n\r\n![Custom select bug](http://i.imgur.com/hGrGcNM.png)\r\n\r\nIf you uncomment the option with a null optionId in my fiddle:\r\n\r\n{ text: 'Not selected', optionId: null },\r\n\r\n...the select behaves perfectly fine and selects that option. But that's not really a workaround as it forces us to add a null option and changes our UX.\r\n\r\nIt may be related to these similar issues here:\r\nhttps://github.com/vuejs/vue/issues/1008\r\nhttps://github.com/vuejs/vue/issues/3673\r\n\r\n### Vue.js version\r\n2.1.10\r\n\r\n### Chrome version\r\n55.0.2883.95 (64-bit)\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/33df9qu8/3/\r\n"},{"labels":["enhancement",null],"text":"**To replicate**:\r\n\r\n- create a simple component and bind something immediately inside the template tag\r\n\r\n```\r\n<template>\r\n    {{title}}\r\n    <div class=\"example\"></div>\r\n</template>\r\n```\r\n\r\nI have been tripped up by this a couple of times (vue 2.8.0), where a simple binding outside the root div gives no output to the DOM, but also gives no error, like you would receive if you had two root nodes:\r\n\r\n```\r\ntemplate syntax error Component template should contain exactly one root element:\r\n...\r\nIf you are using v-if on multiple elements, use v-else-if to chain them instead.\r\n```\r\n\r\nIs there a valid reason to allow bindings like this in the root? If not it is a very small thing but it might help very new users from scratching their head like I did"},{"labels":[null,null,"enhancement"],"text":"### Vue.js version\r\n2.1.9\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/o2azdhbx/\r\n\r\n### Steps to reproduce\r\n\r\n### What is Expected?\r\nExpect to see an alert saying \"Caught an error\"\r\n\r\n### What is actually happening?\r\nSee an uncaught exception in the console"},{"labels":["enhancement"],"text":"Currently, SSR will warn like this when a standalone build is used in the SSR bundle:\r\n\r\n> [vue-server-renderer] You are using the standalone build (vue/dist/vue.js) for server-side rendering. It is recommended to use the CommonJS build (vue/dist/vue.common.js) instead so that the code can run in production mode by setting NODE_ENV=production. The server renderer supports the template option regardless of what build you are using.\r\n\r\nAfter the new build introduced with Vue 2.1, this should probably read:\r\n\r\n> [vue-server-renderer] You are using the standalone build (vue/dist/vue.**common**,js) for server-side rendering. It is recommended to use the **runtime-only CommonJS** build (vue/dist/vue.**runtime**.common.js) instead so that the code can run in production mode by setting NODE_ENV=production. The server renderer supports the template option regardless of what build you are using.\r\n"},{"labels":["enhancement"],"text":"### Vue.js version\r\nv2.1.8 (Fiddle links to https://unpkg.com/vue/dist/vue.js)\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/5phxc71r/\r\n\r\n### Steps to reproduce\r\n* Enter value into first input box\r\n* Array value changes\r\n* Enter value into second input box\r\n* Array value does not change\r\n\r\n### What is Expected?\r\n\r\nThe value should be changed within the typed array by Vue\r\n\r\n### What is actually happening?\r\n\r\nThe value in the typed array is not changing."},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.1.5 and 2.1.6\r\n\r\n### Reproduction\r\nhttps://github.com/MrSlide/vue-blank-page-issue-example\r\n\r\n### Steps to reproduce\r\nI have a Vue + Vuex + Vue Router app, using Webpack 2 and Vue Loader to bundle and precompile the code. I set up my project in a similar way to the HackerNews example provided, but instead of resolving the app on the server side as soon as a route is matched, I resolve it after a route is entered, so that route guards can be used properly. I began building it with v2.1.3 and everything was working on v2.1.4 too.\r\n\r\n### What is Expected?\r\nThe app renders on the server, and when on the browser everything looks the same as the content rendered on the server.\r\n\r\n### What is actually happening?\r\nThe app is rendered correctly on the server, and for a fraction of a second the app can actually be seen on the browser sometimes, but immediately becomes empty. There is only a blank screen and the element the app is mounted onto is has no children.\r\n"},{"labels":["enhancement"],"text":"Per the doc ( https://vuejs.org/v2/api/#v-for ), string iteration is supported, but I think it hasn't been implemented ( https://github.com/vuejs/vue/blob/dev/src/core/instance/render.js#L176 )\r\n\r\nJSFiddle: http://jsfiddle.net/fenivana/5sH6A/969/\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\r\n  </head>\r\n\r\n  <body>\r\n    <div id=\"app\">\r\n       hello <span v-for=\"v in foo\">{{v}}</span>\r\n    </div>\r\n\r\n    <script>\r\n    new Vue({\r\n      data: {\r\n        foo: 'foo'\r\n      },\r\n\r\n      el: '#app'\r\n    })\r\n    </script>\r\n  </body>\r\n</html>\r\n```"},{"labels":["enhancement"],"text":"<!-- BUG REPORT TEMPLATE -->\r\n### Vue.js version\r\n1.0.28\r\n\r\n### Reproduction Link\r\n<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub repository that can reproduce the bug. -->\r\n<!-- You could start with this template: http://jsfiddle.net/df4Lnuw6/ -->\r\nI've identified what is needed to fix the bug and I think, by inspection, it is the right thing to do.  Producing a fiddle to reproduce this is somewhat complex and seems out of proportion to the fix, however if I absolutely have to then I will.\r\n\r\n### Steps to reproduce\r\nWhere there is an app with dynamic elements with transitions defined with callback hooks on the transitions, open it in IE (tested in 11 and 9,10 through emulation.  No problem in other browsers)\r\n\r\n### What is Expected?\r\nThe transition completes with the hooks called at the right times.\r\n\r\n### What is actually happening?\r\nThe transition does not complete and an error is thrown in Vue: \"Invalid calling object\" on this code (which starts on line 37 src/transition.js, the error is thrown on line 40):\r\n\r\n```\r\nconst raf = inBrowser && window.requestAnimationFrame\r\nconst waitForTransitionStart = raf\r\n  /* istanbul ignore next */\r\n  ? function (fn) { raf(function () { raf(fn) }) } //<-- error thrown here!\r\n  : function (fn) { setTimeout(fn, 50) }\r\n```\r\n\r\nThe error seems to be because the `requestAnimationFrame` method of the `window` object is being called without its parent object.  \r\n\r\n### What seems to fix it?\r\nBy changing line 37 to\r\n```\r\nconst raf = inBrowser && window.requestAnimationFrame.bind(window)\r\n```\r\nthe error goes away.  Using bind seems, to me, obviously correct.  Clealy in other browsers because the default `this` is the `window` object anyway it should not matter, however IE seems to take a dislike to this approach and throw the error.  Binding window to the method would seem harmless otherwise.\r\n\r\nI'm an old-hand at coding but new to github (and relatively new to JS and vue) - The fix works but I don't really know if there are other reasons why this is not a good idea so I'm cautious about just closing it.\r\n"},{"labels":[null,"enhancement"],"text":"In files like https://github.com/vuejs/vue/blob/dev/flow/component.js there's a lot of uses of `any`, `Object`, and `Function`.\r\n\r\n> I'm currently improving the documentation around this in Flow, because we don't do a good enough job of explaining it right now. Sorry about that.\r\n\r\nThese types aren't actually type-safe. They are there for convenience purposes.\r\n\r\n- Instead of `any` you should use `mixed` (or a more specific type).\r\n- Instead of `Function` you should use `(type, type) => type`\r\n- Instead of `Object` you should use `{ prop: type }` or `{ [key: type]: type }` (for maps)\r\n\r\nThis will drastically improve user's experience with Vue using Flow."},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.1.3\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/z11fe07p/83/\r\n\r\n### Steps to reproduce\r\nClick the \"Switch\" button a few times, sometimes the squares pop in, sometimes they fade like they should.\r\n\r\nIf everything works fine, reload a couple of times, it seems to be triggered at random on load.\r\n\r\n### What is Expected?\r\nSquares should always fade in/out.\r\n\r\n### What is actually happening?\r\nIt feels random, but sometimes the squares will pop in, instead of fading in. I can't wrap my head around why this is happening.\r\n"},{"labels":["enhancement"],"text":"`bower install vue`'s result doesn't include a \"main\" field in the resulting `.bower.json` file, which messes up some libraries like `wiredep`.\r\n\r\nright now:\r\n```\r\n{\r\n  \"name\": \"vue\",\r\n  \"homepage\": \"https://github.com/vuejs/vue\",\r\n  ...\r\n}\r\n```\r\n\r\nfixed:\r\n```\r\n{\r\n  \"name\": \"vue\",\r\n  \"main\": \"dist/vue.js\",\r\n  \"homepage\": \"https://github.com/vuejs/vue\",\r\n  ...\r\n}\r\n```\r\n\r\nSorry about the nitpick, but I figured this is a quick fix and I haven't integrated webpack or browserify into my workflow yet"},{"labels":["enhancement"],"text":"Here is the minimal code that can reproduce the error, just run in browser:\r\nThe JSFiddle: http://jsfiddle.net/fenivana/58s5x2kb/\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\r\n  </head>\r\n\r\n  <body>\r\n    <div id=\"app\" server-rendered=\"true\"><div class=\"foo\">foo</div></div>\r\n\r\n    <script>\r\n    new Vue({\r\n      el: '#app',\r\n\r\n      template: '<div id=\"app\"><foo></foo></div>',\r\n\r\n      components: {\r\n        foo: resolve => {\r\n          setTimeout(() => {\r\n            resolve({\r\n              template: '<div class=\"foo\">foo</div>'\r\n            });\r\n          });\r\n        }\r\n      }\r\n    });\r\n    </script>\r\n  </body>\r\n</html>\r\n```\r\n\r\nIf you comment out `setTimeout`, there's no problem.\r\n```js\r\nresolve => {\r\n  // setTimeout(() => {\r\n    resolve({\r\n      template: '<div class=\"foo\">foo</div>'\r\n    });\r\n  // });\r\n}\r\n```\r\n\r\nOf course, the code splitting point in real code is in the router, and only client entry bundle will do code splitting, not server entry bundle."},{"labels":["enhancement",null],"text":"### Vue.js version\r\n2.x.x\r\n\r\n### Reproduction Link\r\nBecause it is a ssr issue and hard to provide a running demo online, please see **Steps to reproduce**\r\n\r\n### Steps to reproduce\r\n- clone the https://github.com/vuejs/vue-hackernews-2.0.git repostory\r\n- edit file `src/\\components/ItemList.vue` to cause an error. For example:\r\n\r\n```\r\n// ...\r\nimport Spinner from './Spinner.vue'\r\nimport Item from './Item.vue'\r\nimport { watchList } from '../store/api'\r\n// abc is a undeclared variable that can cause a ReferenceError\r\nconsole.log(abc)\r\n// ...\r\n\r\n```\r\n- then run `npm run build`, `npm run start` in command line\r\n- open browser and navigate to http://localhost:8080\r\n- the command line will report some error info as below:\r\n\r\n```\r\nerror during render : /\r\nReferenceError: abc is not defined\r\n    at Object.module.exports.exports.default.props (__vue_ssr_bundle__:388:13)\r\n    at __webpack_require__ (__vue_ssr_bundle__:21:30)\r\n    at Object.module.exports.__vue_styles__ (__vue_ssr_bundle__:994:19)\r\n    at __webpack_require__ (__vue_ssr_bundle__:21:30)\r\n    at Object.module.exports.module.exports (__vue_ssr_bundle__:866:83)\r\n    at __webpack_require__ (__vue_ssr_bundle__:21:30)\r\n    at Object.<anonymous> (__vue_ssr_bundle__:650:80)\r\n    at __webpack_require__ (__vue_ssr_bundle__:21:30)\r\n    at Object.module.exports.exports.default.name (__vue_ssr_bundle__:224:66)\r\n    at __webpack_require__ (__vue_ssr_bundle__:21:30)\r\n```\r\n\r\n### What is Expected?\r\n\r\nThe error info in the command line should include the specific file path and line number, for example:\r\n```\r\nReferenceError: abc is not defined\r\n    at src/components/ItemList.vue (26:13)\r\n    ...\r\n```\r\n\r\n### What is actually happening?\r\n\r\nError info dose not include the file path and line number that cause the error to produce..\r\n\r\nI know it is the bundle render that cause the error hard to locate. And is there any solution, like soucemap, that can solve this debug issuse with bundle render? "},{"labels":["enhancement"],"text":"I have virtual scrolling list with a lot of rows. I only show a few of them at a time using\r\n\r\nthis.view = this.items.splice(position, position + 5)\r\n\r\nIf 'position' is incremented or decremented, you would expect that in the DOM one element gets added, and one  gets deleted. In the 'up' direction, that is the case. But in the down direction, all elements get removed and added again. I have a couple of images in each row, and this hurts performance quite a bit.\r\n\r\n### Vue.js version\r\n2.1.3\r\n\r\n### Reproduction Link\r\nhttps://jsbin.com/netereyuxa/1/edit?html,console,output\r\n\r\n### Steps to reproduce\r\npress up / down, see that in the up direction one LI is removed and one added at each step, and in the down direction all LIs are replaced every time.\r\n\r\n### What is Expected?\r\nOnly one LI added, one LI removed\r\n\r\n### What is actually happening?\r\nAll LI's removed and added\r\n"},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.1.0\r\n\r\n### Reproduction Link\r\nhttps://jsfiddle.net/m0pg5a7e/\r\n\r\n### Steps to reproduce\r\nCheck console\r\n\r\n### What is Expected?\r\nI think it would be nice to have `this.$scopedSlots` as empty object (match `this.$slots`) if component doesn't have scoped slot. Would be easier to use in an if condition `if (this.$scopedSlots.named) {}` instead of `if (this.$scopedSlots && this.$scopedSlots.named) {}` "},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.0.5\r\n\r\n### Reproduction Link\r\nhttp://jsfiddle.net/df4Lnuw6/45/\r\n\r\n### What is Expected?\r\nVue should create attributes having case consistent with that in the template.\r\n\r\n### What is actually happening?\r\nVue creates attributes that are the lowercased version from the template.\r\n\r\nThis problem is only noticeable when using the subset of tags that are case-sensitive, like the <svg> tag.  For example, consider the \"viewBox\" attribute.  In the demo linked above, Vue produces the attribute \"viewbox\" instead of \"viewBox\", causing the SVG to be rendered incorrectly (tested in Firefox and Chrome)."},{"labels":["enhancement"],"text":"2.0.5 introduced a feature that Vue warns if user is trying to override an internal method. It's a good thing, though I think the current detecting implementation is debatable.\r\n\r\nAccording to [this commit](https://github.com/vuejs/vue/commit/4078ce9c58830fecff095ab96dc41693377794dd#diff-cb87aa7890fa694dd923ea9f162256d2R154), every method on Vue's prototype is checked. But not everything there is necessarily an internal method. For example, if I manually add a method to `Vue.prototype`, and try to manipulate this method later on, I'll get a warning. Same thing happens when a third party package adds some method to `Vue.prototype`.\r\n\r\nSuch cases can be confusing because the method that gets warned is not actually shipped with Vue itself. Any chance this will get improved?\r\n"},{"labels":["enhancement"],"text":"\r\n### Vue.js version\r\n2.0.3\r\n\r\n### Reproduction Link\r\n```\r\n<div v-if=\"type===1\"></div>\r\n<div v-if=\"type===2\"></div>\r\n<div v-if=\"type===3\"></div>\r\n<div v-if=\"type===4\"></div>\r\n<div v-if=\"type===5\"></div>\r\n```\r\n\r\n### Steps to reproduce\r\n\r\n### What is Expected?\r\n\r\nNo warning, because it will generate at most one element.\r\n\r\n### What is actually happening?\r\n\r\nWarning: Component template should contain exactly one root element"},{"labels":["enhancement"],"text":"### Vue.js version\r\n2.0.3\r\n\r\n### Reproduction Link\r\n<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub repository that can reproduce the bug. -->\r\n<!-- You could start with this template: http://jsfiddle.net/df4Lnuw6/ -->\r\n\r\nhttps://jsfiddle.net/crswll/5yynzyj3/\r\n\r\n### Steps to reproduce\r\nFocus the input and try using W, A, S or D to trigger key up instead of UP, RIGHT, DOWN and LEFT.\r\n\r\n### What is Expected?\r\nI expected to be able to hit W or UP to trigger `up2`, A or LEFT to trigger `left2`, S or DOWN to trigger `down2`, D or RIGHT to trigger `right2`.\r\n\r\n### What is actually happening?\r\nNothing. I thought it would work because of this line from the source but it doesn't...\r\n\r\nhttps://github.com/vuejs/vue/blob/b51b9eae4d427d0a909aff8c5f08575c450711a1/src/compiler/codegen/events.js#L15\r\n\r\nAlso, kind of a side note:\r\n\r\nCan we overwrite the default keyCodes? I'd rather name my custom alias `up` instead of `up2`.  \r\n\r\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n2.0.0\n### Reproduction Link\n\n<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub repository that can reproduce the bug. -->\n\n<!-- You could start with this template: http://jsfiddle.net/df4Lnuw6/ -->\n### Steps to reproduce\n\n```\n// components/index.js export Foo, Bar etc.\nimport * as components from './components';\n\nexport default {\n  name: 'app',\n  components\n};\n```\n### What is Expected?\n\nShow ok without errors.\n### What is actually happening?\n\nBrowser throw error `components has only getter.`\n### Reasons\n\n```\nfunction normalizeComponents (options) {\n  if (options.components) {\n    var components = options.components;\n    var def;\n    for (var key in components) {\n      var lower = key.toLowerCase();\n      if (isBuiltInTag(lower) || config.isReservedTag(lower)) {\n        \"development\" !== 'production' && warn(\n          'Do not use built-in or reserved HTML elements as component ' +\n          'id: ' + key\n        );\n        continue\n      }\n      def = components[key];\n      if (isPlainObject(def)) {\n        // should create or clone new components object inside Vue\n        // instead of old one\n        components[key] = Vue$3.extend(def);\n      }\n    }\n  }\n}\n```\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n2.0.3\n### Reproduction Link\n\nhttps://jsfiddle.net/r4jpy72a/1/\n### Steps to reproduce\n\nOpen the jsfiddle, click the button multiple times.\n### What is Expected?\n\nBoth component not to be re-rendered if the props are not changing.\n### What is actually happening?\n\nThe functional component is re-rendered when the props are unchanged.\nThe regular component exhibits the expected behaviour.\n\nTo optimise and avoid expensive renders in a complex application, I'm moving most of the HTML logic to functional components and expect them not to be re-rendered if the data passed doesn't change.\n\nIf this is intended, perhaps the docs should reflect this quirk, but I don't see any reason why we should always call the render function when we can safely assume the resulting HTML to be unchanged (same input == same output).\n"},{"labels":["enhancement"],"text":"I am not sure if this is intentional, I would like to be able to do:\n\n`<div :style=\"{ '--color': player.color }\">…</div>`\n\ninstead of:\n\n`<div :style=\"'--color :' + player.color\">…</div>`\n\nI was able to find the workaround quickly thanks to the doc search here: http://vuejs.org/guide/migration.html#v-bind-style-with-Object-Syntax-and-important-deprecated\n\nIt's a bit different from !important so I would like to push for this feature.\n\nThanks a lot for your good work, I can work on a PR if you agree with this proposition.\n"},{"labels":["enhancement",null],"text":"Hello,\n\nWith Vue 1 \"style\" attribute is \"merged\", but with Vue 2 it is completely overwritten. Is this by design?\n\nIn the following jsfiddle, if you remove \"style\" attribute it will then apply \"style\" from within component definition. As long as \"style\" is present on \"<my-car>\" (from main HTML window), it will completely overwrite component's style:\nhttps://jsfiddle.net/rstoenescu/t0kb6vyu/2/\n\nThanks!\n"},{"labels":["enhancement"],"text":"jsFiddle: http://jsfiddle.net/fenivana/xr63gj2x/\n\n``` js\nconst a = [];\nVue.set(a, 10, 'foo');\nconsole.log(a); // ['foo']\nalert(a.length); // 1\nalert(a[10]); // undefined\nalert(a[0]); // 'foo'\n```\n\nExpected `a` would be `[ undefined x 10, 'foo']`, bug got `['foo']` instead.\n"},{"labels":["enhancement"],"text":"I noticed that the Issues template states by default vue 2.0.0rc1. It would be nicer if it just state 2.x.x.\n\nAdditionally if you follow the fiddle link provided it doesn't execute as the example is setting the body as element, which is now forbidden.\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n2.0.1\n### Reproduction Link\n\nhttps://jsfiddle.net/haobxtgh/\n### Steps to reproduce\n\nUse <![CDATA[ <div></div> ]]> in a slot.\n### What is Expected?\n\nVue treats the content inside cdata as plain text.\n### What is actually happening?\n\nVue attempts to parse the cdata content and does strange things.\n"},{"labels":["enhancement"],"text":"### Vue.js version\r\n\r\n1.0.27 + \r\n### Reproduction Link\r\n\r\nhttps://jsfiddle.net/zb7872qz/\r\n### Steps to reproduce\r\n\r\n< 1.0.27, you can pass down a prop with a name like `sectionID` by naming it `section-id` in the parent component. I have no idea if this is the intended consequence or the suggested convention/practice, but it does work. Example: https://jsfiddle.net/g1srmert/\r\n\r\nBut => 1.0.27, this will break. Example: https://jsfiddle.net/zb7872qz/\r\n\r\nAfter finding this ticket https://github.com/vuejs/vue/issues/3187, I guessed that a fix would involve passing a prop with the name `section-i-d` -- which totally makes sense in retrospect (how would the parser know you meant sectionID and not sectionId?). Solved: https://jsfiddle.net/yz4hw2ds/\r\n\r\nNote that the above fix (`section-i-d`) will _break_ code in Vue <1.0.26 Example: https://jsfiddle.net/75tntoqt/\r\n\r\nIn other words, this is definitely an edge case. That being said, it _does_ break existing code that _did_ work (for better or worse) in a prior patch version.\r\n### What is Expected?\r\n\r\nContinuity of passing down props with names like `sectionID`.  To reiterate: I have no idea if this is the intended consequence or the suggested convention/practice, but it does work.\r\n### What is actually happening?\r\n\r\nI don't know if this is a tiny manifestation of a smaller bug or even worthy of a bug fix (assuming that's even possible). But it does seem like there should be a warning (somewhere?) and/or slightly more explicit docs here https://vuejs.org/guide/components.html#camelCase-vs-kebab-case and here https://vuejs.org/2016/02/06/common-gotchas/\r\n"},{"labels":["enhancement"],"text":"It says \"Vue Warn : Handler for event click is undefined\"\nIt has got an error on somewhere related to event click, I've hundreds of component with click events. In which component/file will I get the error?\n\n![erroe](https://cloud.githubusercontent.com/assets/7802528/19020309/0f0313de-88c7-11e6-9cea-ebe2a2cbc4be.png)\n"},{"labels":["enhancement"],"text":"I just upgraded an app from 1.0 to 2.0 and stubbed my toe on a few things. Here's a list of items that might help others if they were added to the transition guide:\n1. A mention that the `events` option is gone. It's implied but not obvious.\n2. A mention that `.literal` directive modifier is gone and how to handle.\n3. A mention that `twoWay` directives and filters should be converted to `v-model` on a component wrapping an `input` (at least that seems the case).\n\nI did not use the migration tool. My project was small enough where it didn't seem worth the effort.\n"},{"labels":["enhancement"],"text":"<!-- BUG REPORT TEMPLATE -->\n### Vue.js version\n\n1.0.23\n### Reproduction Link\n\nhttp://jsfiddle.net/e035jvj6/\n### Steps to reproduce\n\nin comp:\n\n``` coffee\nprops:\n  coerce:\n    type: Function\n```\n\n``` html\n<comp :coerce=\"Number\"></comp>\n```\n### What is Expected?\n\n`this.coerce === Number`.\nOr at least a error if global functions are not allowed\n### What is actually happening?\n\nsilently fails:\n`this.coerce === undefined`\n"},{"labels":["enhancement"],"text":"As somebody new to vue, I decided to start with vue 2, as it seems to be very close to an official release.\n\nI was using v1 docs as the API didn't appear to have changed much.\n\nTook me a week to find out there is actually rc.vuejs.org. It was mentioned in some newsletter.\n\nIt would be a major help for developer new to vue if the documentation could be more easily found. For example, just link to it from the official docs.\n"},{"labels":["enhancement"],"text":"``` html\n<template>\n  <div>\n    <slot v-if=\"slotAlreadyAttached\"></slot>\n    <div class=\"ui attached segment\" v-else>\n      <slot></slot>\n    </div>\n  <div>\n</template\n```\n\nThis fails compiling with error `template syntax error Duplicate default <slot> found in the same template.`  The logic is that we can choose to wrap the default slot content in some tag or not under certain condition, such as the slot content itself.\n"},{"labels":["enhancement"],"text":"Here is the escape\n\n```\n<p>Hello, {{ this.constructor.constructor('alert(\"oops\")')`` }}</p>\n```\n### Vue.js version\n\n1.0.26\n### Reproduction Link\n\nhttp://jsfiddle.net/yvt7eckL/1/\n### Steps to reproduce\n\nOpen the jsfiddle\n### What is Expected?\n\nNo alert boxes\n### What is actually happening?\n\nAlert box pops up\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n2.0.0-rc.4\n\neslint-plugin-flow-vars is deprecated\n\nhttps://github.com/zertosh/eslint-plugin-flow-vars\n\nhttps://github.com/gajus/eslint-plugin-flowtype\n"},{"labels":["enhancement"],"text":"I've recently started to read code on the next branch, and found that Flow is used to check types. I think it's really a wise decision to statically analyse types for more reliable code base.\n\nHowever, I found that vim-flow reported errors. The errors occur in Flow 0.30.0, which I installed in my global env. I understand it's not an urgent issue and it's completely okay for now to stick to the current version, but it's always good to get prepared.\n\nFYI, errors are about string interpolation for Maybe type. An example is listed below:\n\n```\nsrc/compiler/codegen/index.js:77\n 77:   return `(${exp})?${genElement(el)}:${genElse(el)}`\n                  ^^^ undefined. This type cannot be added to\n 77:   return `(${exp})?${genElement(el)}:${genElse(el)}`\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ string\n```\n\nIf you don't mind, I'd like to help this issue to be resolved. Please feel free to drop a comment.\nCheers!\n"},{"labels":["enhancement"],"text":"Hi,\nWhen an exception is thrown while rendering a computed value, the error message makes no mention of the origin of the exception. We just now about the actual function executed, but not the name of the computed value that failled to evaluate. That makes it hard to find where the error comes from in some cases (we dont even know that it comes from a computed value)\n### Vue.js version\n\n1.0.26 (devel)\n### Reproduction Link\n\n**Please open your console to see the error**\nMinimal reproduction: https://jsfiddle.net/8e2z3qfr/2/\nReal use case (in this case it can be even harder to find where the error comes from when we work with a large app): https://jsfiddle.net/8e2z3qfr/1/\n### What happens\n\nThe following error prints into the console:\n\n```\n[Vue warn]: Error when evaluating expression \"function (){\n        throw 'some error';\n      }\": some error\n```\n### What is expected\n\nThe name of the computed value that failed to evaluate should be printed in the error message\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n1.0.26\n### Reproduction Link\n\nhttp://jsfiddle.net/nbq25a5L/\n### Steps to reproduce\n\nTry to access an object property using the `object['key']` notation in a filter parameter.\n### What is Expected?\n\nBoth `value | filter object.key` and `value | filter object['key']` should work \n### What is actually happening?\n\nOnly `value | filter object.key` works\n"},{"labels":["enhancement"],"text":"For example: @chartclick=\"onChartClicked\", if there is no: methods: { onChartClicked () { ...etc } }, then vuejs will report something like:\n\n```\nvue.common.js:1406 Uncaught TypeError: o.fn is not a function\n(anonymous function) @ vue.common.js:1406\nVue.$emit @ vue.common.js:2142\n```\n\nI think there should be an error message as this isn't very clear that the method is missing.\n"},{"labels":["enhancement",null],"text":"### Vue.js version\n\n2.0.0.-alpha\n### Reproduction Link\n\n<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub reprository that can reproduce the bug. -->\n\nhttps://jsfiddle.net/ncLrLh6z/6/\n### Steps to reproduce\n\nClick 'Get' button.\n### What is Expected?\n\nno js error\n### What is actually happening?\n\n[Vue warn]: Error during component render (found in root instance)\nconsole.error('[Vue warn]: ' + msg + (vm ? formatComponentName(vm) : ''));\nvue.js (line 2168)\nTypeError: value.indexOf is not a function\noption.selected = value.indexOf(getValue(option)) > -1;\n"},{"labels":[null,"enhancement"],"text":"I just noticed it doesn't while revising some docs. I'm not sure if it's worth throwing a warning for.\n"},{"labels":["enhancement"],"text":"JSFiddle: http://jsfiddle.net/fenivana/wso9prne/\n\nVue.js version: latest\n\ntree.js:\n\n``` js\nmodule.exports = {\n    name: 'v-tree',\n  props: ['list'],\n  template: '<ul>' +\n              '<li v-for=\"item in list\">{{item.value}}' + \n                '<v-tree v-if=\"item.children\" :list=\"item.children\"></v-tree>' + \n              '</li>' +\n            '</ul>'\n};\n```\n\napp.js:\n\n``` js\nvar tree = require('./tree');\n\n// registered the tree component with a different name\n// e.g. add namespace\n// this will cause error\nVue.component('ns-tree', tree);\n\n// but if I registered it with\n// Vue.component('ns-tree', Vue.extend(tree));\n// this works fine.\n\nnew Vue({\n    el: 'body',\n    data: {\n        list: [\n        { value: 'foo' },\n        { value: 'bar', children: [\n          { value: 'baz' }\n        ] }\n      ]\n    }\n});\n```\n\napp.html:\n\n``` html\n<ns-tree :list=\"list\"><</ns-tree>\n```\n\nThrows error:\n\n```\nVM408 vue.js:1018 [Vue warn]: Unknown custom element: <v-tree> - did you register the component correctly? For recursive components, make sure to provide the \"name\" option.\n```\n\nUsing `Vue.component('ns-tree', Vue.extend(tree))` works fine, but this is verbose, and I need to tell the users of this component that you need to call `Vue.extend()` before `Vue.component()`, or you must register as the same name as the internal name.\n"},{"labels":["enhancement"],"text":"### Vue.js version\n\n1.0.24\n### Reproduction Link\n\nhttps://jsfiddle.net/xm438tvz/\n### What is Expected?\n\nWarning is shown that provided `coerce` is not a function, with the `vm` instance in question.\n### What is actually happening?\n\n`Uncaught TypeError: coerce is not a function`\n"},{"labels":["enhancement"],"text":"Was having a world of trouble getting prop inheritance to work between a template and its instance (with the `class` prop specifically). Turns out that having comments in the code breaks this behavior.\n\nPresumably an issue of trying to apply them to the first node in the template's element tree, regardless of whether it is a CommentNode.\n\n<script src=\"https://gist.github.com/efc-awebb/bc6b4bccc2d9c426f20f.js\"></script>\n"},{"labels":["enhancement"],"text":"Binding viewBox attribute on svg does not seen to work.\n\nRepro: https://jsfiddle.net/ct1zagyz/2/\n"},{"labels":["enhancement"],"text":"No issue as such. \r\n\r\nI personally am always finding (I'm not sure if others do, maybe I'm OCD...) that having 12 'cuts' in the grid is never enough to stop **stuff** being chopped in some form.  \r\n\r\nCould we not have 24 (like some older 'other' frameworks had). It just gives that extra flexibility to make things fit.\r\n\r\nAs its simply an addition it shouldn't have any impact on backwards compatibility.\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Search google for the title. I am confident you will find this extremely useful component in many other frameworks but this one."},{"labels":["enhancement"],"text":"How about a vertical timeline component with a header and a paragraph? Many frameworks already have it and it would be nice to have it in Bootstrap."},{"labels":["enhancement"],"text":"When I use `media-breakpoint-up(lg)` I'm given `@media (min-width: 992px) ` which is sweet. \r\nBut when I use `media-breakpoint-down(lg)` that returns `@media (max-width: 1199.98px)` which is the next breakpoint up, not the one I specified.\r\n\r\nUp means \"equal to or greater than this number,\" but down does not mean \"less than this number\" it means \"less than some other variable.\" Breakpoints are each a single value but `media-breakpoint-down` is finding another value to then deduct 0.02px from. That's odd; it should use the variable given (less 0.02px).\r\n\r\nTo work around this behaviour I need to set two variables instead of one. \r\n\r\nIn variables.scss\r\n```\r\n// In case we change the breakpoint threshold, store it in a variable\r\n$layout-breakpoint-down: lg; \r\n$layout-breakpoint-up: xl;\r\n```\r\nAnd then in many places\r\n```\r\ninclude media-breakpoint-down($layout-breakpoint-down){\r\n    ...\r\n}\r\n\r\ninclude media-breakpoint-up($layout-breakpoint-up){\r\n    ...\r\n}\r\n\r\n```\r\n\r\nBut I shouldn't' have to define two variables.\r\n\r\nIn variables.scss\r\n```\r\n$layout-breakpoint: lg;\r\n```\r\nIn many places\r\n```\r\ninclude media-breakpoint-below($layout-breakpoint){\r\n    ...\r\n}\r\n\r\ninclude media-breakpoint-up($layout-breakpoint){\r\n    ...\r\n}\r\n\r\n```\r\n\r\nCall it what you like, media-breakpoint-below, media-breakpoint-lessthan, media-breakpoint-downfrom, but please add this to solve the problem where two different variables need to be used for one breakpoint threshold.\r\n"},{"labels":["enhancement"],"text":"currently in bootstrap every contrast color is generated automatically. there is only \"dark\" and \"light\". this is a great development!\r\n\r\nHowever, for some $theme-colors you might want to assign a fixed color value.\r\n\r\nFor example, I'm currently setting a $primary color: #30bc55 The contrast system detects here that $color-contrast-dark should be used. However, I would like to have #f2f2f2 as the contrast color. And that globally in the whole project.\r\n\r\nIt would be a great enrichment if this could be implemented before the stable version :)"},{"labels":["enhancement"],"text":"Nowadays, dark theme is very important and is beneficial to your vision (quoted from rxoptical.com)\r\n\r\n> Dark mode can reduce eye strain in low-light conditions. 100% contrast (white on a black background) can be harder to read and cause more eye strain. It can be harder to read long chunks of text with a light-on-dark theme\r\n\r\nSo I was thinking, why not have an option for dark theme? I know this is possible already with just changing the variables file or using Bootswatch, but other frameworks support an actual dark theme option. It could be as easy as adding `darktheme=\"true\"` to the <body> tag, etc. I would love to see this supported in Bootstrap 5.\r\n"},{"labels":["enhancement",null,null,null],"text":"Maybe this is not a real bug report but a feature request.\r\n\r\nI'm trying to use [Bootstrap Navs with JavaScript behaviour](https://getbootstrap.com/docs/4.5/components/navs/#javascript-behavior) but instead of the tabs and pill I would like to have button toolbar.\r\n\r\nNow with a simple toolbar this works:\r\n\r\n```\r\n  <div class=\"nav btn-toolbar\" role=\"tablist\">\r\n    <a class=\"nav-link btn btn-secondary active\" role=\"button\" data-toggle=\"tab\" href=\"#home-tab\">Home</a>\r\n    <a class=\"nav-link btn btn-secondary\" role=\"button\" data-toggle=\"tab\" href=\"#profile-tab\">Profile</a>\r\n    <a class=\"nav-link btn btn-secondary\" role=\"button\" data-toggle=\"tab\" href=\"#contact-tab\">Contact</a>\r\n  </div>\r\n  \r\n  <div class=\"tab-content\">\r\n    <div class=\"tab-pane fade show active\" id=\"home-tab\" role=\"tabpanel\">\r\n      Home...\r\n    </div>\r\n    <div class=\"tab-pane fade\" id=\"profile-tab\" role=\"tabpanel\">\r\n      Profile...\r\n    </div>\r\n    <div class=\"tab-pane fade\" id=\"contact-tab\" role=\"tabpanel\">\r\n      Contact...\r\n    </div>\r\n  </div>\r\n```\r\n\r\nI'm applying the `nav` and `nav-link` classes and the tab behaviour kicks in.\r\n\r\n\r\nNow I wanted to go a but further with a grouped button toolbar like:\r\n\r\n```\r\n  <div class=\"nav btn-toolbar mb-3\" role=\"tablist\">\r\n    <div class=\"btn-group mr-2\" role=\"group\">\r\n      <a class=\"nav-link btn btn-secondary active\" role=\"button\" data-toggle=\"tab\" href=\"#home-tab\">Home</a>\r\n      <a class=\"nav-link btn btn-secondary\" role=\"button\" data-toggle=\"tab\" href=\"#profile-tab\">Profile</a>\r\n    </div>\r\n    <div class=\"btn-group\" role=\"group\">\r\n      <a class=\"nav-link btn btn-secondary\" role=\"button\" data-toggle=\"tab\" href=\"#contact-tab\">Contact</a>\r\n    </div>\r\n  </div>\r\n```\r\n\r\nThe first time I navigate to each tab (using the toolbar buttons) works, but as soon as I want to navigate to a tab the second time it doesn't work.\r\n\r\nThe reason it does show the tab again is that the navlink anchor in the toolbar was still `.active`.  The `.active` class was never removed as it is only looking for children under the `.nav` div:\r\n\r\nhttps://github.com/twbs/bootstrap/blob/v4-dev/js/src/tab.js#L137-L140\r\n\r\n```\r\n  _activate(element, container, callback) {\r\n    const activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL')\r\n      ? $(container).find(SELECTOR_ACTIVE_UL)\r\n      : $(container).children(SELECTOR_ACTIVE)\r\n\r\n    ..\r\n\r\n    if (active && isTransitioning) {\r\n      const transitionDuration = Util.getTransitionDurationFromElement(active)\r\n\r\n      $(active)\r\n        .removeClass(CLASS_NAME_SHOW)\r\n        .one(Util.TRANSITION_END, complete)\r\n        .emulateTransitionEnd(transitionDuration)\r\n    } else {\r\n      complete()\r\n    }\r\n\r\n```\r\n\r\nNow I wonder if it would as simple to change:\r\n\r\n`$(container).children(SELECTOR_ACTIVE)`\r\n\r\nto:\r\n\r\n`$(container).find(SELECTOR_ACTIVE)`\r\n\r\n\r\nI think it would be nice to be able to navigate tabbed tabbed content with other Bootstrap controls like this.\r\n\r\n\r\nBug reports must include:\r\n\r\n- Operating system and version: macOS 10.15.5\r\n- Browser and version: Chrome 83.0.4103.116\r\n- Test case: https://jsfiddle.net/marceloverdijk/5eznyvua/\r\n"},{"labels":["enhancement"],"text":"Hello team, I'm here today to propose a grid that can be triggered on the phone thanks to the pixel ratio. Indeed, your grids are based on the number of pixels and therefore do not offer a display for phone. So I have created the attached (incomplete) form gathering some features of the \"-xs\" \"-sm\" \"-md\" \"-lg\" \"-xl\" in a \"-phone\". I hope my idea will be interesting.\r\n\r\nGood continuation\r\nPS: not being able to attach a css file, I put it in Word format.\r\n\r\n[css phone.docx](https://github.com/twbs/bootstrap/files/4819577/css.phone.docx)\r\n\r\n"},{"labels":["enhancement"],"text":"v5: There is no variable to change default y-gutter between columns.\r\n\r\n```scss\r\n@mixin make-row($gutter: $grid-gutter-width) {\r\n  --bs-gutter-x: #{$gutter};\r\n  --bs-gutter-y: 0;\r\n  // ...\r\n}\r\n```\r\n\r\n**--bs-gutter-y** is hardcoded. It would be great to have a variable to change it.\r\n\r\n"},{"labels":["enhancement"],"text":"Block embedding of docs pages inside iframes. Embedding these pages inside iframes is basically the same thing as copying and pasting from the docs pages."},{"labels":["enhancement"],"text":"I'd suggest adding scrollbar utilities. \r\n\r\nFirefox supports `scrollbar-color` and `scrollbar-width` properties since `v64`. \r\nhttps://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Scrollbars\r\n\r\nWebkit offers even more customization.\r\nhttps://developer.mozilla.org/en-US/docs/Web/CSS/::-webkit-scrollbar\r\n\r\n```\r\n.scrollbar-thin {\r\n    scrollbar-width: thin;\r\n    scrollbar-color: #c1c1c1 #f5f5f5;\r\n    scroll-behavior: smooth;\r\n}\r\n.scrollbar-thin::-webkit-scrollbar{\r\n    width: 6px;\r\n    height: 6px;\r\n    background-color: #f5f5f5;\r\n}\r\n.scrollbar-thin::-webkit-scrollbar-thumb{\r\n    border-radius: 10px;\r\n    background-color: #c1c1c1;\r\n}\r\n.scrollbar-thin::-webkit-scrollbar-thumb:hover {\r\n    background-color: #9d9d9d;\r\n}\r\n```\r\nI hope this utility would make a scrollable sidebar and modal a little concise."},{"labels":["enhancement",null],"text":"I think [popovers dismissed on next click](https://getbootstrap.com/docs/4.5/components/popovers/#dismiss-on-next-click) should not dismiss when the click is inside the popover, to allow selecting text, etc."},{"labels":["enhancement"],"text":"I'm developing an addon for multiple selection which requires focus and disable classes.\r\n\r\nBasically I'm mimicking an input tag but actually it's an ul tag. Mostly same structure with [BsMultiSelect](https://dashboardcode.github.io/BsMultiSelect/)\r\n\r\nAlso they are having the same issue. https://github.com/DashboardCode/BsMultiSelect/blob/572e82a5b195f50db0b47a5cf131b1fff4e8328f/scss/BsMultiSelect.scss#L14\r\n\r\nul tag with form-control class looks like an input but if you want to open a dialog or a selectbox you have to add a focus listener and this listener prevents :focus pseudo-element. \r\n\r\nTherefore we should add a class with same rules like;\r\n\r\n```html\r\n<ul class=\"form-control form-control-focus\"></ul>\r\n```\r\n\r\nFor disabled\r\n```html\r\n<ul class=\"form-control form-control-disabled\"></ul>\r\n```\r\n\r\nIf we have these classess it would be amazing. I can send a PR if it's ok.\r\n\r\nThank you."},{"labels":[null,"enhancement",null],"text":"I suggest we use the accordion alternative of the Collapse plugin for the docs' sidebar.\r\n\r\nAt first sight I think it may be more practical and pleasant to use (+ resulting in a less long sidebar ; is it useful to have more than one section expanded at a time?)\r\n\r\nhttps://github.com/twbs/bootstrap/pull/30230 for reference "},{"labels":["enhancement"],"text":"What about modernizing a bit the caret? The following style outputs something like this:\r\n![image](https://user-images.githubusercontent.com/9438102/84885058-c8468500-b092-11ea-958d-1bf9989ad058.png)\r\n\r\n```\r\n.dropdown-toggle::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  margin-left: .45em;\r\n  vertical-align: 0.2em;\r\n  border: solid $body-color;\r\n  border-width: 0 2px 2px 0;\r\n  padding: 3px;\r\n  transform: rotate(45deg);\r\n}\r\n```\r\n\r\nMaybe we could even use the [Chevron down](https://icons.getbootstrap.com/icons/chevron-down/) BS Icon.\r\n\r\nI swear I tried (not for a long time though) to directly make a PR for this to integrate all directional variations and variables, but I couldn't properly figure out how the project pipeline works (I managed to launch the server but changes were not taken into account)."},{"labels":["enhancement"],"text":"I just stumbled opon the new [Bootstrap 5 alpha page](https://v5.getbootstrap.com/docs/5.0/getting-started/javascript/#sanitizer) and saw some words that could be improved to a more natural / tech specific wording, e.g. the `allowlist` and `blocklist` instead of `whitelist` and `blacklist`.\r\n\r\nThere are many projects that try to ban oppressive words from their code. This could be a great chance when releasing BS5\r\n\r\nRefs: https://tools.ietf.org/id/draft-knodel-terminology-00.html, https://localheinz.com/blog/2020/06/12/black-lives-matter/\r\n"},{"labels":[null,"enhancement"],"text":"Most of the bootstrap component has blue Outline focus style. At least add a class as an optional to be able to remove the outline thik focus border. Not the thin border. The outline thik border. Sometime it looks odd! for example in group buttons or group forms.  [check here](https://v5.getbootstrap.com/docs/5.0/forms/input-group/)\r\n"},{"labels":[null,"enhancement"],"text":"I know this has been nixed a few times, but the time is right to add chips to the UI toolbox. Would make life a lot easier for forms development.\r\n\r\nhttps://material.io/components/chips"},{"labels":[null,"enhancement"],"text":"Hello,\r\n\r\nI see there is currently a class called \"position-absolute\" but there are no classes like: \"top: 0\", \"left: 0\", \"right: 0\" ... I think there should be support classes Support for \"position-absolute\" and \"position-fixed\"\r\n\r\nFor example:\r\n.top-0\r\n.top-25\r\n.top-50\r\n\r\nThe same goes for bottom, left, and right\r\n\r\nThanks"},{"labels":[null,"enhancement",null],"text":"I'd suggest to add a Stepper component, similar to the component of MDB.\r\nSteppers provide a convenient way of breaking a complex form down to smaller steps.\r\nBenefits:\r\n- Smaller space required (since it uses a collapse-like style)\r\n- Easier to read (since you always just see a part of the whole)\r\n\r\nExample:\r\nYou have a registration which requires you to fill out a form of 16 input fields which can be overwhelming for a user.\r\nWith a stepper you could create 4 steps and group it logically, e. g. contact data, interests etc.\r\n\r\nURL: https://mdbootstrap.com/docs/jquery/components/stepper/\r\n\r\n**Example Screenshots taken from the MDB component page**\r\n![grafik](https://user-images.githubusercontent.com/20150243/84431874-52729180-ac2c-11ea-8a63-09acc2c28ce3.png)\r\n\r\n---\r\n\r\n![grafik](https://user-images.githubusercontent.com/20150243/84431926-64543480-ac2c-11ea-82b5-b9cc57d4585d.png)\r\n\r\n---\r\n\r\n![grafik](https://user-images.githubusercontent.com/20150243/84431962-703ff680-ac2c-11ea-99a2-937138bffc80.png)\r\n\r\n---\r\n\r\nThere is also a similar component in Semantic UI: https://semantic-ui.com/elements/step.html\r\n\r\n![grafik](https://user-images.githubusercontent.com/20150243/84440693-bac86f80-ac3a-11ea-8922-836406241e71.png)\r\n\r\n---\r\n\r\n![grafik](https://user-images.githubusercontent.com/20150243/84440754-d3388a00-ac3a-11ea-8bda-f24b83ff93de.png)\r\n"},{"labels":[null,"enhancement"],"text":"It would be really useful to have the label on the left of the toggle. If it's possible to update this so the order of the `label` and `input` determine the order they are displayed would one option.\r\n\r\nWhen I have right-aligned switches, it looks a lot better when the text is on the left of the switch."},{"labels":[null,"enhancement",null,null,null],"text":"There have been quite a few dicussions around this in Bootstrap, and it's probably been asked more often than any other feature.\r\n\r\n## Pre-requisites\r\n\r\n1. Should work in [all supported browsers](https://twbs-bootstrap.netlify.app/docs/5.0/getting-started/browsers-devices/), meaning Edge Legacy and Safari 10 for the oldest.\r\n2. Should work seamlessly with all our components and utilities.\r\n3. Should be tested, probably with new examples templates.\r\n4. Should be maintainable, thus not lay on hacky things.\r\n\r\nAm I missing any pre-requisite, @twbs/team?\r\n\r\nFWIW, one of the best resource I ever read about RTL is very recent: [RTL Styling 101 by Ahmad Shadeed](https://www.rtlstyling.com/posts/rtl-styling/).\r\n\r\n## Solutions\r\n\r\nLet me try to sum up the various ways to tackle this in v5.\r\n\r\n### Another `dist` file\r\n\r\nThis is what we used in [Boosted v4](https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap), using [rtlcss](https://rtlcss.com).\r\n\r\n#### Pros\r\n- another file, not a single bloated one\r\n- easy to setup\r\n\r\n#### Cons\r\n- some values have to be ignored, and rtlcss is not very pleasant to use with clunky CSS comments to flag things: https://rtlcss.com/learn/usage-guide/control-directives/#ignore\r\n- a few overrides were required in Boosted, mostly around `transform`s and inlined SVGs\r\n\r\n### Logical properties\r\n\r\nThey're meant to be **the** standard way to do. [However Edge Legacy doesn't support them](https://caniuse.com/#search=logical%20properties), so we're kinda stuck with this.\r\n\r\n[PostCSS-logical](https://github.com/csstools/postcss-logical) is meant to handle this in two ways:\r\n1. each logical property results in two new declarations, suffixed with `:dir()`\r\n2. each logical property only gets a LTR fallback: `text-align: left; text-align: start;`\r\n\r\nBoth of them will result in a bloated filesize, and the second—despite being the ordinary fallback—won't allow Edge Legacy to handle RTL.\r\n\r\n#### Pros\r\n- future-proof\r\n- standardized and CSS-y\r\n\r\n#### Cons\r\n- Lack of support\r\n- Filesize (directly due to the lack of support)\r\n\r\n#### Resources\r\n- [Adrian Roselli's post about logical properties](https://adrianroselli.com/2019/11/css-logical-properties.html)\r\n- [Can I Use logical properties?](https://caniuse.com/#search=logical%20properties)\r\n- [Chen Hui Jing's \"CSS for internationalisation\"](https://www.chenhuijing.com/blog/css-for-i18n/)\r\n- [Andy Bell's Piccalilli's post about logical properties](https://piccalil.li/tutorial/css-logical-properties/)\r\n\r\n### Sassy way\r\n\r\nAs suggested in the most recent issue about RTL— #28797— a sassy way is possible.\r\n\r\nI'd be in favor of a simpler way to handle things: \r\n- using a mixin, **like we do for media queries**: `@include rtl()`\r\n- **checking for a boolean** before going ahead, like we do for shadows or rounded: `@if $enable-rtl {}`\r\n- then wrapping mixin content in `:dir(rtl)` using `@content`\r\n- and then, just use CSS.\r\n\r\n#### Pros\r\n- Sass only\r\n- Consistent with our current way to do things\r\n- Can be `false` by default\r\n\r\n#### Cons\r\n- Requires that we write the RTL styles by ourselves\r\n- Source code bloat\r\n- A single bloated output when enabled\r\n\r\n## So…\r\n\r\nMy CSS geekery would like to go with Logical properties; rtlcss seems simpler to me since I'm already used to it and it's a robust and proven solution; the sassy way looks a bit naive…\r\n\r\n**I'd like to hear opinions and suggestions before trying something**.\r\n\r\n## Related issues\r\n\r\nThanks @ZaidBarghouthi for listing this!\r\n\r\n#28797 #28238 #24807 #27123 #27122 #26879 #26818 #19545 #26299 #25422 #24662 #23703 #24332 #23117 #22708 #22137 #21619 #21180 #20293 #19555 #20075 #19787 #19703 #19668 #19643 #19545 #19379 #18184 #17595 #16455 #16419 #15717 #15700 #15509 #15479 #15433 #14717 #14510 #13564"},{"labels":[null,"enhancement",null,null],"text":"- Windows 10\r\n- Chrome  81.0.4044.138\r\n- Bootstrap 4.7.0\r\n\r\nAfter fiddeling around with a vertical nav, i found out there is no scss variable to change the color of these. There is `$link-color` but that changes all the links. I expected there to be a `$nav-color` or something. A nav is different than a navbar, and also different than just normal links. So should there be a scss variable to change the color, hover etc for an a href inside `.nav-item` thats inside `.nav`"},{"labels":[null,"enhancement",null,null],"text":"[Hugo v0.70.0](https://github.com/gohugoio/hugo/releases/tag/v0.70.0) introduced the ability to use [Babel](https://gohugo.io/hugo-pipes/babel/), which means we can finally use ES6 everywhere in the codebase for v5.\r\n\r\nThere's still a bug that needs to be fixed, but should only affect Windows: <https://github.com/gohugoio/hugo/issues/7251>\r\n"},{"labels":[null,"enhancement"],"text":"Just wanted to make resizable columns in a table so i built this:\r\nhttps://jsfiddle.net/xodtjy2v/2/\r\n\r\nit's not that advance, it's simple lightweight and don't depend on any javascript at all. doe it's not as good as any javascript solution that can resize a hole column at any y-axis.\r\n\r\ndoing this css trick on x-axis was really buggy and not even worth implementing without a js solution.\r\n\r\neither way. i thought it would be worth implementing this into bootstrap core:\r\n\r\n```css\r\n.table.table-resize-y thead th {\r\n  overflow-y: auto;\r\n  resize: horizontal;\r\n}\r\n\r\n\r\n /* optional */\r\n.table.table-resize-y ::-webkit-resizer {\r\n    background-color: transparent;\r\n}\r\n```\r\n\r\nhuge benefit with little css and no extra DOM elements 😉 "},{"labels":[null,"enhancement"],"text":"In current version of bootstrap classes `mh-100` and `mw-100` respectively define the `max-height` and `max-width` to `100%`.\r\nBut none for `min-height` and `min-width` ; usefull, for example, in the `dropdown-menu` aligned to the width of its parent but not restricted.\r\n\r\nI had the idea to use the classes : \r\n- `mh-100` and `mw-100` for `min-height` and `min-width`\r\n- `Mh-100` and `Mw-100` for `max-height` and `max-width`\r\n\r\nI know that this feature is complicated because of long time implemented feature but it's cool if you can think of that in future versions.\r\n\r\nThank you"},{"labels":[null,"enhancement"],"text":"1rem height is by default for Progress currently. if, We will want increase or decrease progress height. So, We will need to add inline css style. So, Here, I am request you to for add `.progress-sm` (Small progress) and `.progress-lg` (Large progress).\r\n\r\nhttps://stackoverflow.com/questions/23414333/thinner-bootstrap-progress-bars/60463601#60463601"},{"labels":[null,"enhancement"],"text":"This is an easy feature that anyone can implement with a little extra css, but I think it is a extremely common case that I think it would be necessary and useful for it to be built into Bootstrap."},{"labels":[null,"enhancement"],"text":"Capturing ideas from https://github.com/twbs/bootstrap/pull/29491#issuecomment-538315322."},{"labels":["enhancement"],"text":"Here is the code I use when testing different breakpoints. It would be perfect to have something like this activatable by a flag.\r\n\r\n``` SCSS\r\nbody::before{\r\n  color: red;\r\n  position: fixed;\r\n  top: 5px;\r\n  left: 5px;\r\n  padding: 2px;\r\n  background-color: white;\r\n  border-radius: 10%;\r\n  border: 1px solid black;\r\n  z-index: 100000000000;\r\n  opacity: 0.3;\r\n  @each $breakpoint in map-keys($grid-breakpoints){\r\n    @include media-breakpoint-up($breakpoint){\r\n      content: to-upper-case(\"#{$breakpoint}\");\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"In the current bootstrap version, dark mode is a painful choice for the dropdown menu (and a few other components).\r\n\r\nDark nav bar with white can create troubles for people sensitive to UI/UX.\r\n\r\nThere are existing workarounds, but the implementation gives us the feeling that there is a bug in the design of bootstrap, dropdown menu dark mode should be as accessible as navbar dark mode.\r\n\r\nPlenty of people are proposing complicated workarounds of something that should as basic navbar-dark bg-dark **dropdown-dark**:\r\n\r\n- https://stackoverflow.com/questions/44612813/how-to-change-bootstrap-4-drop-down-colors/44612898\r\n\r\n- https://community.plot.ly/t/i-cant-change-color-of-dropdown-menu/28174\r\n"},{"labels":[null,"enhancement",null],"text":"The accordion now is a mixture of cards with a header made of a button and some utility classes. I think it should be a standalone component which is configurable with some Sass variables.\r\n\r\nMaybe we should also have a striped (like the [tables](https://getbootstrap.com/docs/4.4/content/tables/#striped-rows)) or flushed (like the [list group](https://getbootstrap.com/docs/4.4/components/list-group/#flush)) variant."},{"labels":[null,"enhancement"],"text":"It would be nice to use open search to search through the docs. I made a PR (https://github.com/twbs/bootstrap/pull/29872), but first we got to figure out how to deal with caching and have a solution for the absolute urls in the config xml. Maybe we should also make a separate search page in the docs."},{"labels":["enhancement"],"text":"Hello everyone.\r\n\r\nIn the last project i thought about horizontal/vertical slider for thumbs, partners and other things which everybody use for scrollable lists, and which can be slid right and left/up and down, and i hope i found a easy solution. \r\n\r\nSo, my idea was to provider the\r\n- Minimal weight slider supporting bootstrap grid system. \r\nI want `carousel` behaviour (not all behaviour for now), but for multiple items. As a note, there are a lot of supporting Google queries which make standard bootstrap carousel works as I want, but they a very complicated and not unique - you always need cheating solutions, need more code. \r\nI want to use usual `grid` and `flex` utilities to create the slider which you need. \r\nAt this moment I've dropped infinite loop at all, because I don't have tests which passing this option in usability. Those kind of elements usually come from _design_ and _common things for nowage web_. \r\n\r\n- No nav slider utils on mobile (nav is redundant when you have swipes). I want native browser swiping (because it's cheaper for fx). \r\n- I want easy and fast customisation with `html` only, because it's independent from other languages.\r\n \r\nAs the result, I came up to the following solution, and I want to discuss it (it has bugs). Because it needs more work, but I think it can become a new component.\r\n\r\nhttps://github.com/twbs/bootstrap/pull/29929\r\n\r\nHere is the fiddle:\r\nhttps://jsfiddle.net/wtorsi/2agmz9cp/9/\r\n\r\nAnd here is the vertical:\r\nhttps://jsfiddle.net/wtorsi/7g0zdyv5/5/\r\n \r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n "},{"labels":[null,"enhancement",null,null],"text":"Before opening:\r\n\r\nI read https://github.com/twbs/bootstrap/issues/28499 and would like to request an additional configuration instead of a reversion.\r\n\r\nI think it's pretty common to want to have a table's caption come before the table, see [Example 1](https://www.w3.org/WAI/tutorials/tables/caption-summary/#identifying-a-table-using-a-caption) from Web Accessibility Tutorials' Caption & Summary. \r\n\r\nIt'd be nice to be able to apply a class to a caption and have it override default behavior like:\r\n\r\n```css\r\n    padding-top: .75rem;\r\n    padding-bottom: .75rem;\r\n    text-align: left;\r\n    caption-side: top;\r\n    /** insert additional properties to mimick a, say, h2\r\n}\r\n``` "},{"labels":[null,"enhancement"],"text":"Just putting this here, maybe for v5.\r\n\r\n[Sass Module System](http://sass.logdown.com/posts/7858341-the-module-system-is-launched)"},{"labels":[null,"enhancement"],"text":"According the the HTML5 specs and as explained [here](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/u), `<u>` has been previously deprecated and reintroduced with a new meaning.\r\n\r\n> This element used to be called the \"Underline\" element in older versions of HTML, and is still sometimes misused in this way. To underline text, you should instead apply a style that includes the CSS `text-decoration` property set to **underline**.\r\n\r\nHowever, the BS docs suggests to use `<u>` element to underline text as it's used to be in the past (as I understand it): https://getbootstrap.com/docs/4.3/content/typography/#inline-text-elements\r\n\r\nOne more thing, from [this ressource from w3](https://www.w3.org/TR/REC-html40/present/graphics.html#h-15.2.1) about `<b>`, `<i>`, etc.:\r\n\r\n> The following HTML elements specify font information. Although they are not all deprecated, their use is discouraged in favor of style sheets.\r\n\r\nMay be BS should at least provide an utility class to underline text? We can already use `.font-weight-bold` instead of `<b>` and `.font-italic` instead of `<i>`."},{"labels":[null,"enhancement",null],"text":"Follow up on https://github.com/twbs/bootstrap/pull/29493#issuecomment-538807109.\r\n\r\nI think we can go one step further and make it possible to use the thumbs as a stand alone subcomponent which for example can be displayed below the carousel."},{"labels":["enhancement",null,null,null],"text":"- OS: Windows 10 64 bit\r\n- Browser: Mozilla Firefox Quantum\r\n- Stackoverflow Question: https://stackoverflow.com/q/57872680/1920035\r\n- Live example: https://codepen.io/Johann-S/pen/wvwXpOp\r\n\r\nWhat I have found is that when setting up a tab control to dynamically display content does not work if you do not specify a tablist. The markup that I'm using is:\r\n``` html\r\n<div class=\"tab-content\">\r\n  <form class=\"tab-pane active\" id=\"login\">\r\n      <fieldset>\r\n          <legend>Sign In</legend>\r\n          <div class=\"form-group\">\r\n              <label for=\"username\">Username</label>\r\n              <input class=\"form-control\" id=\"username\" type=\"text\" required=\"required\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n              <label for=\"password\">Password</label>\r\n              <input class=\"form-control\" id=\"password\" type=\"password\" required=\"required\" />\r\n          </div>\r\n          <div class=\"form-group text-center\">\r\n              <button type=\"submit\" class=\"btn btn-primary\">SIGN IN</button>\r\n          </div>\r\n      </fieldset>\r\n      <a class=\"d-block text-center\" href=\"#password-reset\" data-toggle=\"tab\">Forgot Password?</a>\r\n  </form>\r\n\r\n  <form class=\"tab-pane\" id=\"password-reset\">\r\n      <fieldset>\r\n          <legend>Forgot Password</legend>\r\n          <div class=\"form-group\">\r\n              <label for=\"email\">Email</label>\r\n              <input class=\"form-control\" id=\"email\" type=\"email\" required=\"required\" />\r\n          </div>\r\n          <div class=\"form-group text-center\">\r\n              <button type=\"submit\" class=\"btn btn-primary\">SEND RESET</button>\r\n          </div>\r\n      </fieldset>\r\n      <a class=\"d-block text-center\" href=\"#login\" data-toggle=\"tab\">Go Back</a>\r\n  </form>\r\n</div>\r\n```\r\nIf you click on the Forgot Password link it will redirect you to the password-reset form. If you click on Go Back it will redirect you back to the login form. If you attempt to click on the Forgot Passowrd link (a second time) it does nothing."},{"labels":[null,"enhancement"],"text":"Hi, how can I create a col-auto with mixin?\r\n\r\nI've tried with `@include make-col(auto)` but this doesn't work.\r\n\r\nCan u help me?\r\nThanks"},{"labels":[null,"enhancement"],"text":"`text-body` exists, but `bg-body` is [missing](https://getbootstrap.com/docs/4.3/utilities/colors/) from Bootstrap. It's commonly needed... for example, with absolute / fixed position elements that overlap other elements, or just when you have one element with `bg-success` or something and you need a \"plain\" background element inside it.\r\n\r\nIt's super easy to add, but I've had to add it to every project I've ever used bootstrap in. It just seems like it would make sense to be there to begin with."},{"labels":[null,"enhancement"],"text":"As a heavy user of Bootstrap, I think it is **confusing** that the documentation is using `bd-callout` - something that is not offered with Bootstrap.\r\n\r\nThe callouts are beautiful, and they would be a very nice addition to Bootstrap.\r\n\r\nI think we should either:\r\n* Not use them at all in the Documentation.\r\n* Offer them with Bootstrap, or document how to add them _unofficially_. \r\n\r\nI browse the documentation regularly to get new ideas on things to use. I suspect other users to the same. I spent time researching how to add them or if this was simply missing in the docs, and I think I did the same ~2 years ago. I also suspect other users have had the same issue.\r\n\r\n**The debate:**\r\nWould it not be confusing to users, if the documentation would start using multiple things that are not possible with Bootstrap?\r\n\r\nAfter looking at the other issues, it is still not clear to my why it was not possible to include it.\r\n\r\nRelated: #18723 #9938 #8296 "},{"labels":["enhancement"],"text":""},{"labels":["enhancement",null],"text":"In the past I have used tooltipster for tooltips, but recently I switched to tippy because it uses popper.js for the positioning, but now I'm attempting to move to BS4 native tooltips to try and thin down the number of libraries I am using.\r\n\r\nHowever, I am finding that BS4 tooltips don't support enough things that I need from tooltips.\r\n\r\nFrom Tooltipster and Tippy I use their interactive feature, ie. \"interactive: true\", this means that when I hover over the element with the tooltip, the tooltip will display, if I then move the mouse over the now displayed tooltip, the tooltip will remain until I move my mouse away from the tooltip (and the element it is attached to).\r\n\r\nThe benefit of this is that I can put things inside it that a person can interact with (obviously).\r\n\r\nFrom Tippy, I use the 'followCursor' option a decent amount so that the tooltip is where the mouse cursor is, this is especially useful because with elements that have a longer width, the tooltip often ends up further to the right than the content in the element, with followCursor turned on, the tooltip ends up wherever the arrow is.\r\n\r\nTippy: https://atomiks.github.io/tippyjs/\r\nTooltipster: https://iamceege.github.io/tooltipster/\r\n"},{"labels":[null,"enhancement",null],"text":"Toasts would be handy to support a js behavior like tooltips. \r\n\r\nA basic template (that can be changed globaly), header text, body text, option for close btn and maybe the theme color class \r\n\r\nAs of this , it would be nice if it could be configured to be positioned somewhere, fixed  "},{"labels":[null,"enhancement",null,null],"text":"OS is Windows 7. Browsers showing problem include chrome 74 and IE 11 browsers.\r\n\r\nNormally, bootstrap does not display a tooltip for a disabled button. However, when a button is disabled while the tooltip is being displayed, the tooltip persists. Of course this looks terrible. So when clicking a button results in the button being disabled, the tooltip does not go away.\r\n\r\nThis is either a bug, or there is some setting that I am not aware of that needs to be added to my source code. However, I have looked through the documentation and cannot find anything I am failing to add. Also, I have searched the internet, including this site, and cannot find an answer to this problem. However, it seems likely the problem must have previously happened to others.\r\n\r\nI have included a complete test case below, with detailed comments. Could you please run the test case and at least see if the problem occurs when you run it?\r\n\r\nAssuming the problem occurs, could you please verify if this is a bug, or I am just missing something? If the latter, what am I missing, and I would suggest adding to the docs, or making the default case automatically work. Any help appreciated. Thanks\r\n\r\n```\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<title>Bootstrap 4 Tooltip Persists, Looks Terrible</title>\r\n<meta charset=\"utf-8\">\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n<meta http-equiv=\"Content-Type\" content=\"text/html\">\r\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n<link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\">\r\n<script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\"></script>\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\"></script>\r\n<script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\"></script>\r\n</head>\r\n<body>\r\n<div class=\"container\">\r\n<h3>Bootstrap 4 Tooltip Persists, Looks Terrible</h3>\r\n<br> \"Other button disabled\" scenario works fine.\r\n<br> First, hover over buttons. Look at tooltips while hovering.\r\n<br> Then, click button A to disable button B. Works fine:\r\n<br> - Button B is disabled, and no tooltip.\r\n<br> - Tooltip still works correctly on button A.\r\n<br> <br>\r\n<button type=\"button\" id=\"button_a\" class=\"btn btn-primary\" data-toggle=\"tooltip\" data-trigger=\"hover\" title=\"Disables Button B\" onclick='change_button (\"button_b\", true);'>\r\nButton A\r\n</button>\r\n<button type=\"button\" id=\"button_b\" class=\"btn btn-primary\" data-toggle=\"tooltip\" data-trigger=\"hover\" title=\"Disabled by Button A\">\r\nButton B\r\n</button>\r\n<br> <br> <hr>\r\n<br> \"Same button disabled\" scenario fails.\r\n<br> First, hover over Button C. Look at the tooltip.\r\n<br> Then, click button C to disable button C. Messes up:\r\n<br> - Button C is disabled, so that part is OK.\r\n<br> - But Button C tooltip persists, looks terrible.\r\n<br> <br>\r\n<button type=\"button\" id=\"button_c\" class=\"btn btn-primary\" data-toggle=\"tooltip\" data-trigger=\"hover\" title=\"Disables Button C\" onclick='change_button (\"button_c\", true);'>\r\nButton C\r\n</button>\r\n<button type=\"button\" id=\"button_d\" class=\"btn btn-primary\" data-toggle=\"tooltip\" data-trigger=\"hover\" title=\"Enables Button C\" onclick='change_button (\"button_c\", false);'>\r\nButton D\r\n</button>\r\n<br> <br> <hr> <br>\r\nSo if a button is disabled while the cursor is hovering over it, the tooltip persists.\r\n<strong>\r\nCould you please explain how to make tooltip go away when Button C is disabled?\r\n</strong>\r\nI would prefer if tooltip went away when Button C disabled,\r\nsince that is default behavior of bootstrap disabled buttons.\r\nAnd disabled button may later get enabled again, so I do not want to delete title attribute.\r\nBasically I want bootstrap to behave the same way as when Button B is disabled.\r\nI have looked around and cannot find how to fix this problem,\r\nand have tried various things, with no success.\r\nThere are real instances where a button carries out an action,\r\nand then the button needs to be disabled, so I appreciate the help. Thanks\r\n</div>\r\n<script>\r\n$(document).ready(function(){$('[data-toggle=\"tooltip\"]').tooltip();});\r\nfunction change_button (button_id, bool_val) {\r\nvar button_obj = document.getElementById (button_id);\r\nbutton_obj.disabled = bool_val;\r\n}\r\n</script>\r\n</body>\r\n</html>\r\n\r\n```\r\n"},{"labels":["enhancement",null],"text":"80% of admin templates in themeforest is Vertical Navbar because it's can have many items inside it because it's scrollable & core bootstrap navbar without it, it's very weird\r\n\r\n![Untitled-1](https://user-images.githubusercontent.com/17777237/59141270-ecfd1c80-89a9-11e9-832b-80bdf5eaad38.jpg)\r\n"},{"labels":[null,"enhancement"],"text":"File : _root.scss\r\n\r\nTo simplify and extending theming with bootstrap, i would recommend to change this to\r\n\r\n:root, [data-theme=\"default\"] {\r\n  ...\r\n  ...\r\n}\r\n\r\nIntroducing [data-theme=\"default\"] to all CSS variables would give us new ways to switch themes at runtime."},{"labels":["enhancement",null,null,null],"text":"#### Issue description\r\n\r\nWhen using a simultaneous implementation of multiple collapse functions and scrollSpy for a continous scroll through a nav bar, the use of *any* collapse will unset/break the scrollSpy, and futhermore cannot seem to be reset or 'refreshed'\r\n\r\n#### Steps to reproduce the issue\r\n\r\nhttp://jsfiddle.net/lopac1029/9ork8Lts/embedded/\r\n\r\n1. Scroll to or click to the \"Classes\" section\r\n2. Click toggle any of the \"COLLAPSEABLE [class] Archetypes\"\r\n3. Scroll in any direction\r\n\r\n\r\n#### What's the expected result?\r\n\r\n- The scrollSpy should not change from the current active sidebar nav item until it reaches the next \"chapter\" element as defined in the scrollSpy init configuration\r\n\r\n\r\n#### What's the actual result?\r\n\r\n- the scrollSpy becomes completely disconnected from its view location and does not reset\r\n\r\n#### Additional details / screenshot\r\n\r\n- binding a `var $spy = $('#view').scrollspy('refresh')` to the collapse and nav button clicks does nothing to reset the spy\r\n- Operating system: macOS\r\n- Browser: Chrome, Firefox, Safari, and likely others"},{"labels":[null,"enhancement"],"text":"It would be nice if there were a way to indicate progress in buttons. Some examples:\r\nhttps://tympanus.net/Development/ProgressButtonStyles/\r\nhttps://lab.hakim.se/ladda/#progress\r\nhttps://coreui.io/docs/components/loading-buttons/#built-in-progress-bar\r\nhttps://tutorialzine.com/2013/10/buttons-built-in-progress-meters\r\n\r\nThe value is providing information while preserving space.\r\n\r\nAn implementation might embed progress bars similarly to spinners:\r\nhttps://getbootstrap.com/docs/4.3/components/spinners/#buttons\r\n"},{"labels":["enhancement",null],"text":"Popper.js provides a lot of configuration that can be used for our utilities, but most of them are not being used by the plugins themselves.\r\n\r\nI'm in a situation where I require a `dropdown` to be of `fixed` position rather than `absolute`, popper allows this via:\r\n\r\n```\r\nPopper.Defaults.positionFixed = true\r\n```\r\n\r\nHowever that would change everything that is using Popper in my page. I can't really change this configuration per-element basis.\r\n\r\nIt would be of great help to let us pass a second param to the built in functions, being the Popper options (not supported in the plugin) to be merged in the Popper config when initializing an object.\r\n\r\n```\r\n$('.dropdown-toggle').dropdown({\r\n    boundary:'viewport' // Plugin config\r\n}, {\r\n    positionFixed: true // Popper config\r\n});\r\n```"},{"labels":[null,"enhancement",null],"text":"It's nice to be able to quickly use opaque text classes for both light and dark scenarios:\r\n\r\n```\r\n<p class=\"text-black-50\">.text-black-50</p>\r\n<p class=\"text-white-50 bg-dark\">.text-white-50</p>\r\n```\r\n\r\nHowever, I have always thought an even better need or feature would be to have opaque background classes for both, to quickly apply to overlay divs or even the navbar.\r\n\r\nWe have a `bg-dark` and `bg-white`, even a `bg-transparent` but nothing in between similar to the text classes.\r\n\r\n```\r\n<div class=\"p-3 mb-2 bg-black-50 text-white\">.bg-dark</div>\r\n<div class=\"p-3 mb-2 bg-white-50 text-dark\">.bg-white</div>\r\n```\r\n\r\nA simple rgba background value should easily achieve these\r\n\r\n```\r\n.bg-black-50 {\r\n    background-color:rgba(0,0,0,.5);\r\n}\r\n.bg-white-50 {\r\n    background-color:rgba(255,255,255,.5);\r\n}\r\n```"},{"labels":[null,"enhancement",null],"text":"It would be great to be able to set narrower line-heights via text utility classes such as `text-line-height-narrow`, `text-line-height-narrower`, etc. similar to font weight.\r\n\r\nWould a PR be appreciated?"},{"labels":[null,"enhancement"],"text":"v4.2 features spinner. They can be embedded inside a button: https://getbootstrap.com/docs/4.3/components/spinners/#buttons\r\n\r\nWould be nice to be able to also embed a spinner inside an input.\r\n\r\nSometimes you have fields that perform async actions, a spinner inside the input would give feedback to the user (something is pending).\r\n\r\nExample: https://github.com/tkrotoff/bootstrap-spinner\r\n\r\n![bootstrap-spinner demo](https://github.com/tkrotoff/bootstrap-spinner/raw/master/doc/demo.gif)\r\n"},{"labels":[null,"enhancement"],"text":"Please add variables to the form-control-plaintext class so the background color and borders can be styled through variables.  Similar to how form-control supports more variables."},{"labels":[null,"enhancement"],"text":"Is there an official/sanctioned/blessed/Bootstrap best practices solution for having checkboxes (natural or custom) in a menu like list of items, wrapped in a collapsible drop down (see screen shot)? Clicking anywhere on the item toggles the checkbox. There are various implementations around but all seem a bit kludgy and bloated - including mine that stuffs everything in the checkbox label to preserve their click relationship. \r\n\r\n[https://jsfiddle.net/dragontheory/78aj5dhr/](https://jsfiddle.net/dragontheory/78aj5dhr/)\r\n\r\nIs it possible to create a **new feature** that demonstrates best practices for implementation? Any guidance would be appreciated. Thank you!\r\n\r\nBTW, your hard work has improved UX for millions of users. No pressure! Doing great!\r\n\r\n![checkbox_radio_btn_example_01](https://user-images.githubusercontent.com/80736/54556565-81e61000-498f-11e9-88b6-79c266e8e20f.jpg)"},{"labels":["enhancement",null,null],"text":"Skipping some previous v4-based PRs given our move to regular JS has already landed in `master`.\r\n\r\n- #27646: Allow shift-tab focusing for modals\r\n- #25651: Modal input autofocus attr & keyboard nav\r\n\r\n/cc @Johann-S "},{"labels":[null,"enhancement",null],"text":"I know it was a discussion before but I will bring this up again, any chance that the grid system in bootstrap could be rewritten using CSS Grid  and for the older browser fallback to flexbox/float based grid if necessary. \r\n\r\nThis shouldn't be hard to do anymore thanks to https://developer.mozilla.org/en-US/docs/Web/CSS/@supports\r\n"},{"labels":[null,"enhancement",null],"text":"I dug around an hour, sure I'd find this, tho i didn't. It is small, tho it would help responsive layout. In my case, I have a nav sidebar, fixed when 'lg' and 'sm', but i need to make it display as block on tablets and phones.\r\nThank you. \r\n```html\r\n<header class=\"position-fixed[-md-up|-md-lg-xl]\">\r\n  <nav>\r\n  </nav>\r\n</header>\r\n```"},{"labels":[null,"enhancement"],"text":"Just like the .text-wrap and .text-nowrap classes that sets white-space to \"normal\" and \"nowrap\", there could also be a text class as mentioned in the title?\r\n"},{"labels":[null,"enhancement"],"text":"Would be lovely with the possibility to add the \"sticky-top\" class based on viewport.\r\nLike for an example: sticky-top, sticky-sm-top, sticky-md-top, sticky-lg-top sticky-xl-top, and same for sticky-bottom.\r\n\r\nCouldn't find this as a feature request, so here it is.\r\n\r\nThe good thing is, it wouldn't break any existing sites :) "},{"labels":[null,"enhancement"],"text":"I've been looking through the docs and issues and am having trouble determining what I should do. Closed issues seem to suggest that the bootstrap team advocates for using anchor tags when something actually navigates or takes you to another page, while buttons should be used for all other actions. This fits well with accessibility since screen readers do treat anchors and buttons differently. Anchors can be styled as buttons using the `.btn` class, and buttons can be styled to be like links with `.btn-link`, so it seems that everything is covered. However, elements with `.btn` class don't line up well when placed next to other text as mentioned here: https://github.com/twbs/bootstrap/issues/27515\r\n\r\nI've created my own .btn-link-inline in our customized bootstrap based around the referenced issue. Here is a screenshot of the issue it is trying to solve:\r\n\r\n![btn-link-inline](https://user-images.githubusercontent.com/1603868/52370053-f7210580-2a1f-11e9-84e7-707565a16569.png)\r\n\r\nMy particular use case is a control that allows you to browse a tree. Nothing in this control links to another page. At the top are breadcrumbs allowing you to view parent folders in the tree (essentially go back). My inclination is to make these \"links\" buttons with `.btn-link`. Unfortunately, they don't align vertically at all with neighboring text, i.e. the divider. I can use a disabled button for the active folder but the divider is still an issue and making those disabled buttons as well makes no sense. I've tried adding p-0 border-0 and the like but they still don't line up well (an `.align-inherit` util is what is missing). What is the recommendation here?\r\n\r\n- implement custom styling for buttons that need to be rendered exactly like link text (this feels like it should be a bootstrap feature and I would be willing to create a PR)\r\n- go against accessibility standards and use anchor tags with void hrefs\r\n"},{"labels":[null,"enhancement",null],"text":"I have a fairly complex application where information in dynamic pages are often shown in tables.  The `<thead>` rows of which look <u>much</u> better using `font-weight: 600`.  I have created a class, arbitrarily named `.font-weight-medium`:\r\n\r\n```css\r\n.font-weight-medium {\r\n    font-weight: 600 !important;\r\n}\r\n```\r\n\r\nI see an issue (#18433) that wanted it to be called \"semi-bold\" instead of \"medium\", that would be fine, too.\r\n\r\nI just try to \"push\" those things out of my CSS file and onto the \"platform\", which includes Bootstrap.  Thanks."},{"labels":["enhancement"],"text":"Hi,\r\n\r\nI was wondering if there have been any discussions on releasing a set of bootstrap web components; they seem to be the perfect use case for something like bootstrap.\r\n\r\n[Web Components](https://developer.mozilla.org/en-US/docs/Web/Web_Components) are a set of standards that allows developers to make reusable, encapsulated and modular components using standards based APIs. More so, web components are [reusable](https://custom-elements-everywhere.com/) in almost any framework.\r\n\r\nWith the recent anouncement that [support for IE11 will be dropped](https://twitter.com/getbootstrap/status/1080553927181983744), polyfills won't even be necessary; it seems like the perfect time.\r\n\r\nInstead of applying classes, bootstrap web components could be usable like so:\r\n\r\n```html\r\n<bootstrap-button></bootstrap-button>\r\n<bootstrap-button raised></bootstrap-button>\r\n<bootstrap-button raised warning></bootstrap-button>\r\n<bootstrap-button raised warning large></bootstrap-button>\r\n```\r\netc.\r\n\r\nThere is already a community effort by @morbidick :\r\nhttps://github.com/morbidick/bootstrap-webcomponents\r\n\r\nSome examples of existing web component catalogs are:\r\n- [Vaadin](https://vaadin.com/components)'s components:\r\n<img width=\"993\" alt=\"screen shot 2019-01-28 at 22 15 28\" src=\"https://user-images.githubusercontent.com/17054057/51866907-7e001f00-234a-11e9-8c38-419ae045f9f7.png\">\r\n\r\n- [Polymer's paper-elements](https://www.webcomponents.org/collection/polymerelements/paper-elements):\r\n<img width=\"494\" alt=\"screen shot 2019-01-28 at 22 15 46\" src=\"https://user-images.githubusercontent.com/17054057/51866904-7b052e80-234a-11e9-88d3-4d118e8b50dd.png\">\r\n\r\nIf you're interested in learning more, you can find a ton of information at:\r\n- [webcomponents-the-right-way](https://github.com/mateusortiz/webcomponents-the-right-way) maintained by @web-padawan\r\n\r\nRecommendations/tooling:\r\n- [open-wc](https://open-wc.org)\r\n\r\nAs well as these blogs:\r\n- [Let's Build Web Components!](https://dev.to/bennypowers/lets-build-web-components-part-1-the-standards-3e85) by @bennypowers\r\n- [Web Components: from Zero to Hero](https://dev.to/thepassle/web-components-from-zero-to-hero-4n4m) by yours truly."},{"labels":[null,"enhancement",null],"text":"hello sir,\r\n\r\nis it possible to add two thumbs in the range currently range can provide only one thumb like in below link\r\n\r\nhttps://getbootstrap.com/docs/4.2/components/forms/#range\r\n\r\nbut if bootstrap provide this feature in feature update so it makes the design as well as development easiest and faster,\r\ngiven below link is for an external plugin which currently I used in a project for two-thumb in range\r\n\r\nhttp://seiyria.com/bootstrap-slider/#example-2\r\n\r\nalso, the range will provide tooltip if possible it was extremely good for design and development\r\n\r\nthanks,\r\nMr. Viral Dhimmar"},{"labels":["enhancement",null,null],"text":"**Browser**: Chrome 71.0.3578.98;\r\n\r\nI use dynamical content with popovers and i came across a problem.\r\nWhen you init popover using delegating  and set **trigger** option like **manual**, **content** option doesn't work.\r\nYou can see it on the link - https://jsfiddle.net/zac43y8e/ ."},{"labels":[null,"enhancement",null],"text":"Just like input, dropdown, pagination and button; checkbox, toggle and slider should have a class (`form-control-lg`) to increase or reduce the size."},{"labels":[null,"enhancement"],"text":"Would be nice to have utility classes like `rounded-lg` and `rounded-sm` as you already have SCSS variables for `border-radius-lg` and `border-radius-sm`."},{"labels":[null,"enhancement",null,null],"text":"Currently it is not possible to (properly) size custom radios and checkboxes, as one can do with other form-controls.\r\n\r\nOne can add `.col-form-label-sm` or `.col-form-label-lg` to the custom checkbox/radio markup to scale the label accordingly, but the indicator icon does not scale with the change in label font size.\r\n\r\n![image](https://user-images.githubusercontent.com/2781561/49677219-ff76b780-fa53-11e8-97ad-88fbf094e54b.png)\r\n\r\nOne could switch the units of the `::before` and `::after` `width/height/top`, and the left gutter `padding` to `em` units instead of `rem` units (as these pseudo elements inherit the base font-size from their parent element - the label).  This makes the indicators scale nicely when the font-size of the label scales, without needing additional CSS rules for the indicators.  All that would be needed would be new classes `.custom-control-sm` and `.custom-control-lg` (as an alternative to using `.col-form-label-sm` and `.col-form-label-lg`) to control the font-size (and possibly top/bottom padding of the label text)\r\n\r\nExample (switching pseudo element units to `em`):\r\n\r\n![image](https://user-images.githubusercontent.com/2781561/49677209-eb32ba80-fa53-11e8-8d37-70289016897c.png)\r\n"},{"labels":[null,"enhancement",null],"text":"Multi drop-down must be created in bootstrap because we have to use another plugin for this.\r\nHere are some screenshots of what i looking for.\r\n![image](https://user-images.githubusercontent.com/20210961/48386853-3be51b00-e715-11e8-81d4-6a9dfebe8f33.png)\r\n\r\nhttps://codepen.io/SurajVerma/pen/wBMbqL\r\nhttps://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_ref_js_dropdown_multilevel_css&stacked=h\r\nhttps://www.cssscript.com/create-a-multi-level-drop-down-menu-with-pure-css/ \r\n\r\n"},{"labels":["enhancement",null,null],"text":"I'm using the last version of Boostrap (v4) and I find myself facing a limitation.\r\n\r\nI'm trying to implement a carousel with multi-items active **with a step 1 by 1**  and I don't want a dirty solution like:\r\n```HTML\r\n<div id=\"carouselExampleSlidesOnly\" class=\"carousel slide\" data-ride=\"carousel\">\r\n  <div class=\"carousel-inner\">\r\n    <div class=\"carousel-item active\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=777&fg=555&text=First slide - First picture\" alt=\"First slide - First picture\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=666&fg=444&text=First slide  - Seconde picture\" alt=\"First slide - Seconde picture\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=First slide - Third picture\" alt=\"First slide - Third picture\">\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=777&fg=555&text=Second slide - First picture\" alt=\"Second slide - First picture\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=666&fg=444&text=Second slide - Seconde picture\" alt=\"Second slide - Second picture\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=Second slide - Third picture\" alt=\"Second slide - Third picture\">\r\n    </div>\r\n  </div>\r\n</div>\r\n```\r\nBecause in this situation the step for the picture rotation will be 3 by 3. So I propose a solution to handle this case (but I don't have any skill in JS to do it and open MR).\r\n\r\n**Current process:**\r\nThe property `active` was removed from the current `carousel-item` and added to the next `carousel-item`. So we can imagine to add a value to know how many ative elements the carousel can display.\r\n\r\n**Concrete case:**\r\n```HTML\r\n<div id=\"carouselExampleSlidesOnly\" class=\"carousel slide\" data-ride=\"carousel\" data-value=3>\r\n  <div class=\"carousel-inner\">\r\n    <div class=\"carousel-item active\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=777&fg=555&text=First slide\" alt=\"First slide\">\r\n    </div>\r\n    <div class=\"carousel-item active\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=666&fg=444&text=Second slide\" alt=\"Second slide\">\r\n    </div>\r\n    <div class=\"carousel-item active\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=Third slide\" alt=\"Third slide\">\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=Fourth slide\" alt=\"Fourth slide\">\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=Fifth slide\" alt=\"Fifth slide\">\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n      <img class=\"d-block w-100\" src=\".../800x400?auto=yes&bg=555&fg=333&text=Sixth slide\" alt=\"Sixth slide\">\r\n    </div>\r\n  </div>\r\n</div>\r\n```\r\n\r\nThe JS take the value from `data-value` (or whatever the name is defined) and understand he have 3 (in the example) `active` property at the same time. So I remove the first `active` found and I add `active` to current element + 3.\r\n\r\nIn this way, we can handle many new possibilities for the carousel.\r\n"},{"labels":[null,"enhancement",null],"text":"I 've done some quick search, without results, so I opened this issue as suggestion \r\n\r\nIn order to use scss variables we can use the following css with the help of a **data-attribute** so every developer can use any string he wants\r\n\r\n```\r\n.custom-file-input~.custom-file-label::after {\r\n    content: attr(data-label);\r\n}\r\n\r\n<div class=\"custom-file\">\r\n  <input type=\"file\" class=\"custom-file-input\" id=\"customFileLang\" >\r\n  <label class=\"custom-file-label\" for=\"customFileLang\" data-label=\"Can't see me?\">Seleccionar Archivo</label>\r\n</div>\r\n```\r\n\r\nThe result as I tested, below\r\nhttps://jsfiddle.net/hc0v648r/1/\r\n"},{"labels":[null,"enhancement"],"text":"Hi,\r\n\r\nIn a input group prepend i wan't added a custom select.\r\n\r\nWhen i put the custom select in the groep-prepend the border is rounded.\r\n\r\n``                                    <div class=\"input-group\">\r\n                                        <div class=\"input-group-prepend\">\r\n                                            <select class=\"custom-select form-control\">\r\n                                                <option>test</option>\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" class=\"form-control\" placeholder=\"\">\r\n                                    </div>``\r\n\r\nI have added this in my css to fix it\r\n\r\n``       .input-group .input-group-prepend .custom-select, .input-group .input-group-prepend .form-control {\r\n            border-top-right-radius: 0;\r\n            border-bottom-right-radius: 0;\r\n        }``\r\n\r\nMaybe this is a good feature."},{"labels":[null,"enhancement"],"text":"Most of mobile apps use smaller font sizes, but it's not a good idea to modify the base font size, so shall we add some font size classes?\r\n\r\n### Just like `margin` and `padding` utilities\r\n- `m-1`\r\n- `m-2`\r\n- `m-3`\r\n\r\n### Font sizes\r\n- `fs-1` - font size level 1, means the smallest font size, maybe 0.7rem (or em ?)\r\n- `fs-2` - font size level 2, maybe 0.8rem\r\n- `fs-3` - font size level 3, maybe 0.9rem\r\n\r\n### Better way\r\n- `fs-sm-1` - **smaller** font size level 1 , maybe 0.9rem\r\n- `fs-sm-2` - **smaller** font size level 2 , maybe 0.8rem\r\n- `fs-sm-3` - **smaller** font size level 3 , maybe 0.7rem\r\n- `fs-lg-1` - **larger** font size level 1 , maybe 1.25rem\r\n- `fs-lg-2` - **larger** font size level 2, maybe 1.5rem\r\n- `fs-lg-3` - **larger** font size level 3, maybe 1.75rem\r\n- etc...\r\n\r\n> `sm` or `lg` may confuse us. Any other advice?\r\n"},{"labels":[null,"enhancement",null],"text":"I was just playing around with the Alert component in the latest version of Bootstrap (4.1.3) of the Bootstrap docs.\r\n\r\nI was playing around with having additional markup/modifiers as the Alerts are a little bland (https://getbootstrap.com/docs/4.1/components/alerts/#additional-content).\r\n\r\nI'm not entirely sure what a good use case would be for these changes further below, but I thought I'd raise it and see what you guys think:\r\n\r\nEssentially, I was thinking about having an `.alert-header` and `.alert-body`, and maybe an `.alert-footer` to allow for more control over Alerts and their content.\r\n\r\nMy concern is that this could be a breaking change, but something worth considering?\r\n\r\n**Mockup:**\r\n\r\n<img width=\"864\" alt=\"screenshot 2018-09-30 at 11 14 41\" src=\"https://user-images.githubusercontent.com/25177538/46256442-0a84f880-c4a3-11e8-9ec1-c7706dff8e46.png\">\r\n"},{"labels":[null,"enhancement",null],"text":"I've been playing around the list group component recently in some projects. One thing I'd like to see in **Bootstrap 4.2** is possibly to have a **horizontal list group** or the ability to make any of the list groups provided (https://getbootstrap.com/docs/4.1/components/list-group/#basic-example) horizontal by adding a class. Technically, I don't know if it would be too difficuilt to add. I was playing around in the inspector and changed two things:\r\n\r\n```\r\n.list-group {\r\n    // originally flex column\r\n    flex-direction: row;\r\n}\r\n\r\n.list-group-item {\r\n    // originally margin-bottom\r\n    margin-left: -1px;\r\n}\r\n```\r\n\r\nBy making these relevant changes, you'd get the following:\r\n\r\n![list-group-horizontal](https://user-images.githubusercontent.com/25177538/45917292-b7d88a80-be6b-11e8-912d-349cf3ff2056.PNG)\r\n\r\nAnd if we remove the `max-width` from the documentation:\r\n\r\n![list-group-horizontal-100](https://user-images.githubusercontent.com/25177538/45917302-e6566580-be6b-11e8-871f-df9facb37e10.PNG)\r\n\r\nI was thinking we could have a modifier class to the `list-group-*` something like:\r\n\r\n`-horizontal`\r\n`-vertical`\r\n\r\nThoughts? \r\n\r\n"},{"labels":[null,"enhancement",null],"text":"I'm a junior front-end developer and I've recently turned Bootstrap into my daily driver when developing webpages and web apps. However, I don't see the reason behind Bootstrap not having a responsive typography 'engine'. Why hasn't it been implemented (yet)? "},{"labels":["enhancement",null,null],"text":"Bootstrap 4.3  (budnle from dist folder) fails when global is null.\r\n\r\nFrom sources:\r\n```\r\n(function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('jquery'), require('popper.js')) :\r\n  typeof define === 'function' && define.amd ? define(['exports', 'jquery', 'popper.js'], factory) :\r\n  (factory((global.bootstrap = {}),global.jQuery,global.Popper));\r\n}(this, (function (exports,$,Popper) {...});\r\n\r\n```\r\nThere `this` from next line can't be null since we will get an excpetion on `global.bootstrap = {}`\r\n\r\nAnd there are situations when `this` can be null during loading e.g. importing using native module support:\r\n\r\n ```\r\n<script type=\"module\">\r\n            import Popper from \"./js/popper.js\"; // esm version\r\n            window.Popper = Popper;\r\n            import \"./js/bootstrap.js\"; // TODO : error\r\n            // expected : window.bootstrap created , plugins attached to jquery etc.\r\n</script>\r\n```\r\n\r\nCheck sources of jquery. They support this new type of loading by checking (this==null)?window:this. \r\n\r\n\r\n"},{"labels":[null,"enhancement",null,null],"text":"I recently became in need of having a badge or a pill with an outline over a solid background. Such a need is consistent with what already exists for [outlined Buttons](https://getbootstrap.com/docs/4.1/components/buttons/#outline-buttons).\r\n\r\nI found a Codepen showing [somebody has already done this](https://codepen.io/uimax/pen/NRWVmo), but I think it should be part of Bootstrap itself.\r\n\r\n<img width=\"264\" alt=\"screen shot 2018-08-20 at 1 33 38 pm\" src=\"https://user-images.githubusercontent.com/120044/44365111-aae80600-a47d-11e8-9dba-76e3fe6a5e55.png\">\r\n\r\n"},{"labels":["enhancement",null],"text":"I hope it will be stronger. can customize \"active\" and \"show\" and more.\r\nExample：\r\n`<ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\" tab-active-class=\"xxxxx\" >`\r\n\r\nExample2：\r\n```\r\n<ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">\r\n  <li class=\"nav-item\">\r\n    <a class=\"nav-link active\" id=\"home-tab\" data-toggle=\"tab\" href=\"#home\" role=\"tab\" aria-controls=\"home\" aria-selected=\"true\" tab-active-class=\"xxxxx\">Home</a>\r\n  </li>\r\n```"},{"labels":[null,"enhancement",null],"text":"Would it be worth while to add breakpoints for collapsible content?\r\n\r\nhttps://codepen.io/danielmarkavis/pen/WKBOBG\r\n\r\nI added a class to show items on desktop and collapse on mobile.\r\n\r\nThe main issue is the JS as it does not know in which collapse state it is in and does some weird double open.\r\n\r\nSo adding classes such as \".show-sm\", \".show-md\", and adapting the JS would be a great thing.\r\n\r\n"},{"labels":["enhancement",null],"text":"I was recently working on a project where I themed a Bootstrap modal as a side drawer. I made an implementation that is compatible with the modal sizing classes. Maybe this is something that's nice to have in Bootstrap by default?\r\n\r\nDemo: https://codepen.io/MartijnCuppens/pen/OwwjWV?editors=1100\r\n\r\n![ezgif-2-21a3fc9652](https://user-images.githubusercontent.com/11559216/43793285-5b9277cc-9a7b-11e8-9a60-614215ee953b.gif)\r\n\r\nPR incomming..."},{"labels":[null,"enhancement",null],"text":"- More sizes\r\nthe w- and h- sizes utilitie is great and i think it should be extended, many sizes are very commonly used and it can be a good way for reducing code.\r\nw-0 width: 0;\r\nh-0 height: 0;\r\ni found this two very helpfull when i make a collapsable sidebar with js\r\nbut here are a comlete list of clases that a usually added to my projects: \r\n  0: 0,\r\n  25: 25%,\r\n  50: 50%,\r\n  75: 75%,\r\n  100: 100%,\r\n  auto: auto,\r\n  1rem: 1rem,\r\n  2rem: 2rem,\r\n  3rem: 3rem,\r\n  4rem: 4rem,\r\n  5rem: 5rem,\r\n  6rem: 6rem,\r\n  7rem: 7rem,\r\n  8rem: 8rem,\r\n  9rem: 9rem,\r\n  10ren: 10rem,\r\n  15rem: 15rem,\r\n  20rem: 20rem,\r\n  25rem: 25rem,\r\n  30rem: 30rem,\r\n  40rem: 40rem,\r\n  50rem: 50rem\r\n\r\n- Borders sizes, i think the  border utilities should be extended adding a size subfix, like:\r\nborder-0 border: none; \r\nborder-1 border-width: 1px;\r\nborder-2: border-width: 2px;\r\nborder-3: border-width: 3px;\r\nborder-4: border-width: 4px;\r\nborder-5: border-width: 5px;\r\n\r\nso this can be use in combination whit thr border and border-color clases, like this:\r\nborder border-primary border-5\r\n\r\n-Colored Shadows: the shadow utilities only have some size based options, adding color option can be a great function, for example: shadow-primary, shasow-sm-danger, etc."},{"labels":[null,"enhancement",null,null],"text":"With v4.1.3, we'll be updating the source Sass to use tooltip vars, but these should be their own and remapped for improved customization.\r\n\r\nSee #26816."},{"labels":["enhancement",null,null],"text":"Popper.js by default adds a padding of 5px between its boundary and popper in it's preventOverflow modifier. Would be nice to have the ability to have this as an Option for dropdowns. "},{"labels":[null,"enhancement",null],"text":"https://getbootstrap.com/docs/4.1/utilities/sizing/"},{"labels":[null,"enhancement"],"text":"How many times have you come across a bunch of content within a `<div>` or an `<article`> tag with a bunch of `<p>`, `<ul>` and possibly even **headings** and thought to yourself if only there was a simple **classname** I can add to the div that would prevent me having to add specific classes to all of these elements?\r\n\r\nThis is an issue I've come across, and whilst I'm sure Bootstrap provides some base default styling, I'm not totally convinced that this is appropriate in most projects.\r\n\r\nI was thinking this...\r\n\r\nTo add a new component under the **'Components'** heading on the docs (https://getbootstrap.com/docs/4.1/getting-started/introduction/) called something like: **'Content'**\r\n\r\nThe purpose of this component is to provide a simple method for styling elements within a div or article element, all the user would need to do is add a class called `.content` to their parent element, and elements within would be styled. **I was thinking of adding support for the following HTML elements:**\r\n\r\n- `<p>` paragraphs\r\n- `<ul>`, `<ol>` and `<dl>` lists\r\n- `<h1>` to `<h6>` headings\r\n- `<blockquote>` quotes\r\n- `<em>`, `<b>` and `<strong>` tags\r\n- `<table>` with _relevant child elements of a table_\r\n\r\nWhat's people's opinion on this?"},{"labels":[null,"enhancement",null],"text":"Item group has `input-group-sm` variant. It will be great if You introduce also size variant for List group. Now `input-group-sm` next to `list-group` looks weird :/"},{"labels":[null,"enhancement",null],"text":"When the modal has the property:\r\n\r\n```javascript\r\n{backdrop: 'static', keyboard: false}\r\n```\r\n\r\nOr when it has the attributes:\r\n\r\n```html\r\ndata-backdrop=\"static\" data-keyboard=\"false\"\r\n```\r\n\r\nObviously, it would not be close if the user tries to click outside of it and also using <kbd>esc</kbd> key. Then it should show the user that anything is important in modal (user needs to check modal) by showing any animation like `scale` to get the user attention there. Like the chrome's clear browser data modal:\r\n\r\n![ubhyfdbl4s](https://user-images.githubusercontent.com/39026124/41271037-e80f45bc-6e2b-11e8-9c55-8a0da0cd725d.gif)\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Add variable for cursor on buttons? :+1:  :)\r\n\r\nI'm not sure about the justification for having the pointer cursor on buttons, but it doesn't sit quite right for me, and I'd love to have the option to change it without hacking it. The comments even say it's \"opinionated\" :)"},{"labels":[null,"enhancement",null],"text":"Currently, bootstrap supports several browser widths, with the largest as 'extra large' which catches all experiences greater than 1200px. Unfortunately, w3schools has identified that as of last year, [90% of all browsers exceed this](https://www.w3schools.com/browsers/browsers_display.asp). While I can create a custom solution, it seems ideal for bootstrap to add additional widths (xl2, xl3, etc) to encompass the growing display situation."},{"labels":[null,"enhancement",null],"text":"Here me out first... Based on this technique:\r\n\r\n* https://scotch.io/tutorials/build-multiple-stacking-sticky-sidebars-with-pure-css-and-bootstrap-4\r\n\r\nWith Bootstrap 4 flex grid, all columns are equal height. See:\r\n\r\n* https://codepen.io/ncerminara/pen/EjqbPj\r\n\r\nThis means doing `position: sticky;` is really easy, performant and useful for \"sticky\" content or affixing content.\r\n\r\nHere's a demo in pure CSS:\r\n\r\n* COMPLEX: https://codepen.io/ncerminara/pen/VdLpzd\r\n* SIMPLE: https://codepen.io/ncerminara/pen/eKNROb\r\n\r\n**PROPOSAL**\r\n\r\nAdd a `utility class` called `.make-me-sticky`. Where:\r\n\r\n```sass\r\n.make-me-sticky {\r\n\tposition: sticky;\r\n\ttop: 0;\r\n        padding: 0 15px; // 15 is equal to padding of gutter\r\n}\r\n```\r\n\r\nThen, based on column collapse of sm, md, lg have things additional class to disable the stickiness.\r\n\r\n**Light-weight, easy, high functionality.**\r\n\r\nAnyway just a thought. Love Bootstrap and feel like it makes sense to have as part of the project. `sticky` has really good browser support and at the very least will fall back to `position: relative` (partial support).\r\n"},{"labels":[null,"enhancement",null],"text":"If I use the .(in)valid-feedback class, there is no built-in possiblity to leave space for the feedback if it is not validated so far. Because of the sibling rule, I cannot embed the .invalid-feedback into a div with a min-height.\r\n\r\nNow, when validating a form (only .invalid-feedback, no valid-feedback) with invalid syntax the content below the input jumps down when .invalid-feedback gets active\r\n\r\nThus, I propose to add a form-feedback container to allow reserving some space.\r\n\r\nHere my example css code, limited to .invalid-feedback:\r\n\r\n```\r\n/* show invalid-feedback inside form-feedback if form was validated and form control is invalid */\r\n.was-validated .form-control:invalid ~ .form-feedback .invalid-feedback {\r\n  display: block;\r\n}\r\n\r\n/* reserve some space for the embedded invalid-form */\r\n.form-feedback {\r\n  margin-top: 0.25rem;\r\n  min-height: 1.25em;\r\n}\r\n\r\n/* margin-top is applied by .form-feedback, don' add it again */\r\n.form-feedback .invalid-feedback {\r\n  margin-top:0;\r\n}\r\n```\r\n"},{"labels":[null,"enhancement",null],"text":"if you give an anchor a class like \"text-dark\", it automatically gets the hover/focus color of darken($color, 10%). I would like to set the \"active\" state colors explicit and not like that.\r\n\r\nSo, for example, you have an anchor `<a ... class=\"text-dark text-active-primary\">...` and the hover/focus color becomes the primary color. (i hate to overwrite implicit stylings and just wanted to change the color :) )"},{"labels":[null,"enhancement",null],"text":"I like sass variables and they're great during buildtime. But projects that need a microfrontend architecture (i.e. webcomponents) tend not to rebuild components. They rather reuse existing components and provide the style context to it. \r\n\r\nUsing CSS variables will allow to provide runtime configuration for styling, such as colors. CSS variables can work in conjunction of SASS. \r\nI'm happy with a few the first couple of CSS variables in bootstrap, but as [already mentioned](https://github.com/twbs/bootstrap/issues/23349#issuecomment-346813716) they're only exposed and not used by bootstrap itself. This means, if a project likes to override these CSS variables at runtime, there's no effect with the bootstrap components themself. \r\n\r\nIs there anything against going into the CSS variable direction? [Browser support is really great](https://caniuse.com/#feat=css-variables) and the fallback option will keep non-supported browsers happy. \r\n\r\nI understand this is a big change though. It woudl work like this:\r\n\r\nIntialize CSS vars. We use use double-double fallback to ensure we have a fallack and do not need to repeately add the fallback everywhere. \r\n```\r\n:root {\r\n    --primary: var(--primary-color, #{$primary});\r\n}\r\n```\r\n\r\nThen for each and every component that uses the primary color, we could use the --primary variable instead. For example on a button, it would go like this (just a few lines that i'm using in my sandbox project, so its not so relevant to bootstrap sources):\r\n```\r\n.btn {\r\n    &-primary {\r\n        background-color: var(--primary);\r\n        border-color: var(--primary);\r\n        &:hover,\r\n        &:not(:disabled):not(.disabled):active {\r\n            background-color: var(--primary-darken);\r\n            border-color: var(--primary-darken);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis would allow to change the color at runtime. \r\n\r\n"},{"labels":[null,"enhancement"],"text":"I would like to implement a feature for lists.\r\n\r\nWere you would be able to use a responsive class to modify the amount of columns in a list.\r\n\r\n```\r\n<ul class=\"columns-2\">\r\n  <li>In col one</li>\r\n  <li>In col two</li>\r\n</ul>\r\n```\r\n\r\nOr \r\n\r\n```\r\n<ul class=\"columns-md-2\">\r\n  <li>In col one</li>\r\n  <li>In col two from md-onwards</li>\r\n</ul>\r\n```\r\n\r\nBasically the class would be applicable to `<ul>, <ol>, and <dl>` and have the format: `columns-{breakpoint}-{amount}`.\r\n\r\nI would implement using the css[ columns property](https://caniuse.com/#search=columns).\r\n\r\nIs there interest for this feature?"},{"labels":[null,"enhancement",null],"text":"Wondering if anyone has had a crack at making the text color classes work with the breakpoints.\r\n\r\nMY USE CASE:\r\nwhen on a mobile the text content of a column wraps onto a different background. as the text is white, you can no longer see the content\r\n\r\nPROPOSED ADDITIONAL CLASSES:\r\ntext-sm-white\r\ntext-sm-primary\r\ntext-sm-secondary\r\netc..\r\n\r\nAnyone have any strong opinions against?\r\n"},{"labels":[null,"enhancement",null],"text":"I didn't find a way to set different sizes on one element with [sizing utilities classes](https://getbootstrap.com/docs/4.0/utilities/sizing/). It would be nice to be able to use classes like\r\n\r\n```html\r\n<div class=\"w-25 w-md-50 w-lg-100\"></div>\r\n```\r\n\r\nAnd resize the element according to the breakpoint.\r\n\r\nI would be happy to work on it if it gets approved."},{"labels":[null,"enhancement",null],"text":"Hello, I think some responsive variations to the <code>.h-100 </code>  class would be useful. \r\nThanks!"},{"labels":[null,"enhancement",null],"text":"Form validation [tooltip](https://getbootstrap.com/docs/4.0/components/forms/#tooltips) displays to the bottom of input.\r\n\r\nIt would be nice to have the ability to show it to the right (and probably to the left and top as well), since currently it might overlay other inputs making it difficult to an user to see what's typed in other form inputs."},{"labels":[null,"enhancement",null,null],"text":"### New .display-5 class\r\n\r\nWhen creating website banners I often find myself using one of the `.display-*` headings from Bootstrap. They're clean, simple and look great!\r\n\r\nThe problem I've encountered is I find myself slightly restricted with the current `.display-*` classes, more specifically with the sizing, I often find myself needing something slightly smaller than `.display-4` and often tend to create my own `.display-5` class, and in the very rare occasion a `.display-6` class.\r\n\r\nCould we extend this part and create an additional `.display-65` class?\r\n\r\n**Something like:**\r\n\r\n```\r\n.display-5 {\r\n    font-size: 2.5rem;\r\n    font-weight: 300;\r\n    line-height: 1.2;\r\n}\r\n```\r\n\r\nI'm sure this wouldn't take too long to add?\r\n\r\n**This is a mock-up of what the sizing would look like:**\r\n\r\n![display-5-class](https://user-images.githubusercontent.com/25177538/40019274-a4545f96-57b6-11e8-820b-be915b0af22a.PNG)\r\n\r\nMany Thanks!\r\n\r\n:-)\r\n\r\nReference: https://getbootstrap.com/docs/4.1/content/typography/"},{"labels":[null,"enhancement",null],"text":"I was wondering whether it would be possible to include a section in the jumbotron component of the Bootstrap 4.1 docs for essentially creating full-height jumbotrons.\r\n\r\nI'm finding more and more designs these days using full-height banners on their website, and I guess this is usually done using `height: 100vh` with some kind of possible fallback.\r\n\r\nFirstly, we don't seem to have that as a utility class in Bootstrap, we have `height: 100%` but not `100vh`.\r\n\r\nIs it possible to create a full-height jumbotron example in the docs and possibly this additional utility class?\r\n\r\nhttps://getbootstrap.com/docs/4.1/components/jumbotron/"},{"labels":["enhancement",null],"text":"### New switch component as part of forms!\r\n\r\nI've made quite a few feature requests to the Bootstrap community here, and I'd like to make another one, let me know your thoughts....\r\n\r\nSo I've been using the forms component for quite some time in a couple of websites now since the v4 release. One particular feature that I'd love to see as part of the forms component is some kind of switch? A simple switch that  changes it's state depending on whether it's on or off, 1 or 0 etc. I was thinking to add it to the forms component as a addition to check boxes as this could make it easier to get a value back from it with jQuery, I was thinking of something like the following:\r\n\r\n![switch-example](https://user-images.githubusercontent.com/25177538/39969345-55c07b9c-56d2-11e8-9619-4141e86d2745.PNG)\r\n\r\n\r\n"},{"labels":["enhancement",null],"text":"### Awesome new emails feature proposal!\r\n\r\nI've been using Bootstrap 4 for quite some time, **I'm a huge fan of what Bootstrap has to offer**, especially with quick and efficient utility classes for margin, padding and alignment.\r\n\r\nHowever, there is one **big feature** that I think Bootstrap needs and it's one of the reasons I turn to the _(in my opinion)_ less popular framework... Zurb Foundation.\r\n\r\nI'm talking about Emails. Unlike Bootstrap, Zurb Foundation has the ability to create email-friendly markup using their CSS inliner and email templates, see this link => https://foundation.zurb.com/emails.html\r\n\r\n**I think this would certainly make a great feature to Bootstrap** and possibly attract another type of audience to Bootstrap.\r\n\r\nIt could take a while to potentially develop, but it could be worth releasing it in a beta stage similarly to how Bootstrap 4 was released in an Alpha stage. I've mocked up how we could potentially add this section to the Bootstrap site by including a 'Emails' link, making use of your badges to highlight that it's a beta feature, this would be great because it releases a new feature quicker so people can start using it and providing feedback!\r\n\r\n#### Current Navbar\r\n![bootstrap-nav](https://user-images.githubusercontent.com/25177538/39961258-64a07f20-562a-11e8-8a54-f43f607455e0.PNG)\r\n\r\n#### Proposal mockup with Emails\r\n![bootstrap-nav-mockup](https://user-images.githubusercontent.com/25177538/39961257-6487e32a-562a-11e8-9dc1-a969da79ff50.PNG)\r\n\r\nWhat do you guys think of this? I think emails are just as important these days for marketing and interacting with customers and generating leads! By implementing this you're essentially showing the Bootstrap brand to even more people because they could see your logo in emails that people generate.\r\n\r\n**Personally, I think this feature would be great to see! <3**\r\n\r\n\r\n"},{"labels":["enhancement",null],"text":"I was considering whether it would be possible to integrate or have some kind of setting to use SweetAlert in Bootstrap 4 as a component possibly?\r\n\r\nhttps://sweetalert.js.org/"},{"labels":["enhancement",null],"text":"Hi , I want to suggest a feature to you , add some coll transitions and animations like fadein, fadeout, bounce, rotate and ......"},{"labels":[null,"enhancement",null],"text":"Is there a thought about `list-group-small`?\r\n\r\n/idea"},{"labels":[null,"enhancement",null,null],"text":"Hi, I'm suggesting another simple feature here for Bootstrap. Often I find in some projects I'm needing to set `overflow` to hidden to maintain consistent sizing or as part of jQuery functionality, I often find either having to set overflow on either the horizontal axis or vertical axis.\r\n\r\nI was thinking we could possibly create some helper classes like this - `overflow-*`\r\n\r\nSuch as:\r\n\r\n```\r\n.overflow-y {\r\n     overflow-y: hidden\r\n}\r\n```\r\n\r\nAny possibility of getting some base functionality in place for this? We could possibly make use of SCSS variables to choose either hidden or auto for example."},{"labels":[null,"enhancement",null,null],"text":"With the last version of Angular (6.0.0) there is a CLI to automatically add dependencies to an angular project. This makes it possible to import the NPM library and to modify the files of the project to use this library.\r\nhttps://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4#cff5\r\n\r\nIt could be great to have a shematic to just have to launch `ng add bootstrap` and the last version of bootstrap is added in the package.json, installed and the main style file import the bootstrap css or scss."},{"labels":[null,"enhancement",null],"text":"Hi! I'm suggesting a simple, yet effective utility class here for buttons to be added. Whilst the Bootstrap docs does indeed have a `rounded-circle` utility class found in the border section (https://getbootstrap.com/docs/4.1/utilities/borders/#border-radius) this doesn't quite work too well when applied to buttons to essentially create a pill shaped button.\r\n\r\nThe `rounded-circle` utility class looks like this and doesn't quite work as expected when added to buttons.\r\n\r\n```\r\n.rounded-circle {\r\n    border-radius: 50%!important;\r\n}\r\n```\r\n\r\nI suggest creating an additional utility class with a **px** value for buttons to create a nice effect, possibly something like this...\r\n\r\n```\r\n.btn-rounded {\r\n    border-radius: 50px!important;\r\n}\r\n```\r\n\r\nI use rounded buttons a lot in my work and find myself having to create these classes, I don't think it would take too much to add this in the next release? \r\n\r\nCheers!\r\n\r\n"},{"labels":["enhancement",null,null],"text":"It is currently impossible to build a carousel that allows us to preview the previous and the following item, that's too bad, we don't always need our items to be full width"},{"labels":[null,"enhancement",null,null],"text":"Margin utilities such as `ml-auto` should be included in `bootstrap-grid.css`. They are even mentioned in the [Grid System documentation](https://getbootstrap.com/docs/4.0/layout/grid/), but right now, those examples don't work if you only include the Grid System.\r\n\r\nIs there any reason why those aren't included with the Grid System?"},{"labels":["enhancement",null,null],"text":"Add `originalEvent` to bootstrap `eventListeners` like hide.bs.dropdown, if support it.\r\n\r\nI need to know, which element was clicked, before a dropdown was closed. I tried to add this code to the `Dropdown._clearMenus` function in `dropdown.js` file (after the definition of the `relatedTarget` variable).\r\n\r\n`if (event) {\r\n relatedTarget.original = event.originalEvent;\r\n}`\r\n\r\nThis code snippet make the `originalEvent` accessible from the `hide.bs.dropdown` event. For other events may be used similar way."},{"labels":[null,"enhancement",null],"text":"At the moment it only supports \r\n![screen shot 2018-04-18 at 10 50 34](https://user-images.githubusercontent.com/5120965/38907349-6ef88022-42f6-11e8-94cd-e1498e3cf92f.png)\r\n\r\nWill `d-table-row-group` is added in the future?"},{"labels":[null,"enhancement",null],"text":"I find when I'm making websites that I'll often want `.no-gutters` only on small screens, to keep a 3 column grid on small devices. This is dependent on the design of course, but I find it useful.\r\n\r\nCan we look at adding `.no-gutters-sm`, `.no-gutters-md`, `.no-gutters-lg` and `.no-gutters-xl` to use this Bootstrap-specific property with breakpoints?\r\n\r\nCurrent: https://getbootstrap.com/docs/4.0/layout/grid/#no-gutters\r\nNotation with breakpoints: https://getbootstrap.com/docs/4.0/utilities/spacing/#notation"},{"labels":[null,"enhancement",null],"text":"On Bootstrap 4.x, maybe the class \".no-gutters\" could work different with viewport classes, like \"no-gutters-sm\"."},{"labels":[null,"enhancement",null,null],"text":"Since colors, spacers, sizes, ... are generated based on map I think it would be just as suitable to introduce a `$embed-ratios` variable.\r\n\r\nSee [this gist](https://gist.github.com/c0defre4k/9699b11263ca6df239be3962eb1d0e01) for an implementation example,"},{"labels":[null,"enhancement",null,null],"text":"Hi! First of all, sorry for broken english. Please admins feel free to\r\nedit / ask for clarification is something doesn't make sense.\r\n\r\nSo, as I understand it, bootstrap has some options for the use of\r\ntypography. Like $font-size-lg and $font-size-sm variables and\r\nthe `.small` and `<small />` tags. Also, there's the possibility to \r\nuse the `.h1 ... .h6` classes to change the font size of any element.\r\n\r\nStill I find that `lg` and `sm` font-sizes are insufficient for every\r\ncase. And even though the `.hX` could serve this purpose, they\r\nhave some inherent semantic sense that is inappropriate in many\r\ncases. The docs even intruct to use them: \r\n\r\n> for when you want to match the font styling of a heading, but\r\ncannot use the associated HTML element.\r\n\r\nIt'd be useful to have dedicated: `size-1` to `size-6` (or better name)\r\nthat are only supposed to modify the element's font size. These\r\nclasses would be dependent on a potential `$type-scale`  variable like:\r\n\r\n```\r\n$type-scale: (\r\n  1:  2.5,\r\n  2:  2,\r\n  3:  1.75,\r\n  4:  1.5,\r\n  5:  1.25,\r\n  6:  1,\r\n  7:  .8,\r\n  8:  .7\r\n);\r\n```\r\n\r\nThis could be implemented with a function called `font-size($scale-number)`.\r\n\r\nI understand one of the counterpoints to this feature is that it can\r\nbe implemented with custom, per-project css, and it's true. But I\r\ncan see the benefit of having it by default in the framework. One\r\nway it could be extended is having another `line-height-for($scale-number)`\r\nfunction that calculates a line height that is a multiple of the base line\r\nspacing `($line-height-base * $font-size-base)`, as an example.\r\nSo `size-1` could, for example, apply:\r\n\r\n```\r\nfont-size: font-size(1);\r\nline-height: line-height-for(1);\r\n```\r\n\r\n\r\nNotice that there's space for additional font sizes smaller than the\r\nbase, (7 & 8). This is more practic than having\r\n`$font-size-{sm/lg/base/smaller/larger/super-large}`.\r\n\r\nIn summary, the things why I'd like to see this implemented are:\r\n\r\n 1. Consistency / One source of truth. Font size units not  \r\n     scattered around / duplicated.\r\n 2. Versatility. `size-1` would allow developers to just modify the\r\n     sizing aspect of an element's typography. Leaving `.hX`\r\n     classes for proper title-replication.\r\n 3. Example value. By implementing a good-practice, well defined\r\n     type scale.\r\n 4. Extensibility. A couple of issues in the past were raised, in\r\n     my opinion partly, because of a lack of font related features.\r\n     Some of them: #24856 ,  #18137, #23119 . \r\n 5. Easy to implement.\r\n\r\nI'd love to hear your opinion, cheers!"},{"labels":[null,"enhancement"],"text":"\r\nWhen suggesting a feature, include:\r\n\r\n- As much detail as possible for what we should add and why it's important to Bootstrap\r\n- Relevant links to prior art, screenshots, or live demos whenever possible\r\nI am wondering if it would be possible to support nesting with `input-groups`.  My use case is that I am using Angular 5 and have written a dropdown button component with the template being the following\r\n\r\nBelow is the template for component named `question-dropdown-button`\r\n```\r\n<div class=\"input-group-append\" ngbDropdown>\r\n  <button ngbDropdownToggle class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Dropdown</button>\r\n  <div ngbDropdownMenu class=\"dropdown-menu\">\r\n    <a class=\"dropdown-item\" href=\"#\">Action</a>\r\n    <a class=\"dropdown-item\" href=\"#\">Another action</a>\r\n    <a class=\"dropdown-item\" href=\"#\">Something else here</a>\r\n    <div role=\"separator\" class=\"dropdown-divider\"></div>\r\n    <a class=\"dropdown-item\" href=\"#\">Separated link</a>\r\n  </div>\r\n</div>\r\n```\r\n\r\nI then use this component anywhere that I need it, for example:\r\n\r\n```\r\n<div class=\"input-group\">\r\n  <input type=\"text\" class=\"form-control\" />\r\n  <question-dropdown-button></question-dropdown-button>\r\n</div>\r\n```\r\n\r\nWhen loading this does not apply the border radius correctly to the dropdown button even though this is in an `input-group-append`.  Looking at the generated CSS I believe this is down to the combinator that is used and relies on the `input-group-append` being a child of the `input-group` class.\r\n\r\nIn the case of Angular 5 and it's component rendering the following is the HTML output\r\n\r\n```\r\n<div _ngcontent-c12=\"\" class=\"input-group\">\r\n  <input _ngcontent-c12=\"\" class=\"form-control\" type=\"text\">\r\n  <question-dropdown-button _ngcontent-c12=\"\" _nghost-c13=\"\">\r\n    <div _ngcontent-c13=\"\" class=\"input-group-append dropdown\" ngbdropdown=\"\">\r\n      <button _ngcontent-c13=\"\" aria-expanded=\"false\" aria-haspopup=\"true\" class=\"btn btn-outline-secondary dropdown-toggle dropdown-toggle\" data-toggle=\"dropdown\" ngbdropdowntoggle=\"\" type=\"button\">Dropdown</button>\r\n      <div _ngcontent-c13=\"\" class=\"dropdown-menu\" ngbdropdownmenu=\"\">\r\n        <a _ngcontent-c13=\"\" class=\"dropdown-item\" href=\"#\">Action</a>\r\n        <a _ngcontent-c13=\"\" class=\"dropdown-item\" href=\"#\">Another action</a>\r\n        <a _ngcontent-c13=\"\" class=\"dropdown-item\" href=\"#\">Something else here</a>\r\n        <div _ngcontent-c13=\"\" class=\"dropdown-divider\" role=\"separator\"></div>\r\n        <a _ngcontent-c13=\"\" class=\"dropdown-item\" href=\"#\">Separated link</a>\r\n      </div>\r\n    </div>\r\n  </question-dropdown-button>\r\n</div>\r\n```\r\n\r\nYou will notice the additional element that wraps the `input-group-append` element which means this is no longer a direct child of `input-group` and so \"breaks\" the combinator.\r\n\r\n"},{"labels":["enhancement",null,null],"text":"We should add a libs which will allow us to use Spies, Mocks and Stubs, I thought about Sinon : http://sinonjs.org/\r\n\r\nIt would be easier for us to test our plugins\r\n\r\nBecause, I work on improving our code coverage but it's very difficult to test everything with QUnit which do not provide enough tools for that...\r\n\r\n/CC @XhmikosR, @bardiharborow "},{"labels":[null,"enhancement"],"text":"It might be interesting to add an `accordion-flush` class like `list-group-flush`. "},{"labels":["enhancement",null],"text":"\r\n\r\n**Feature Request**\r\n \r\nFloating Labels (https://getbootstrap.com/docs/4.0/examples/floating-labels/) for:\r\n- Textarea\r\n- Input-Group in combination with Buttons with dropdowns (https://getbootstrap.com/docs/4.0/components/input-group/#buttons-with-dropdowns)\r\n\r\nThanks\r\n"},{"labels":[null,"enhancement",null],"text":"It would be useful to be able to set the initial state of collapsible items at different breakpoints using css classes.  e.g.  `.show-md`, `.show-lg`.\r\n\r\n```\r\n<p>\r\n  <a data-toggle=\"collapse\" href=\"#collapseExample\" role=\"button\">\r\n    toggle button\r\n  </a>\r\n</p>\r\n<div class=\"collapse show-md\" id=\"collapseExample\">\r\n   shown by default at 'md' breakpoint and up.\r\n</div>\r\n```"},{"labels":["enhancement",null,null],"text":"We have a lot's of unit test, and it's difficult to see which case our units tests covered or not.\r\n\r\nWe should add a something to see our code coverage\r\n\r\n/CC @XhmikosR, @bardiharborow "},{"labels":[null,"enhancement"],"text":"custom-range looks great! How about adding styling for datalist elements linked to &lt;input type=range &gt; ? For example, the following HTML code should display range with tick marks:\r\n\r\n&lt;label for=\"datalistRange\">Marks&lt;/label>\r\n&lt;input type=\"range\" class=\"custom-range\" min=\"0\" max=\"5\" id=\"datalistRange\" list=\"marks\"&gt;\r\n&lt;datalist id=\"marks\"&gt;\r\n&lt;option value=\"0\"&gt;\r\n&lt;option value=\"40\"&gt;\r\n&lt;option value=\"60\"&gt;\r\nvoption value=\"80\"&gt;\r\n&lt;option value=\"100\"&gt;\r\n&lt;/datalist&gt;\r\n\r\nThanks,\r\nNitin "},{"labels":["enhancement",null,null],"text":"Get an issue when using [Menu forms](https://getbootstrap.com/docs/4.0/components/dropdowns/#menu-forms) with a large form which is supposed to fix itself below the button.\r\nThe PreventOverflow feature is good, but we'd disable it in a lot of cases which is impossible when using Dropdown.\r\n\r\nThanks and Best Wishes."},{"labels":[null,"enhancement",null],"text":"Feature request:\r\n\r\nIt's odd that the Bootstrap carousel just has a single effect, so it's rather useless.\r\n\r\nPlease add some different transitions like i.e. **fade** to the slider.\r\n\r\nThere are several solutions outside, none of them works reliant because of constant changes in classes between versions. This really should be part of the core."},{"labels":[null,"enhancement",null],"text":"https://github.com/twbs/bootstrap/blob/2f4e785a8c623fbe1b011edabecafe99b9f0817b/scss/mixins/_forms.scss#L53\r\n\r\nI would like to add a file validation on the following form:\r\n\r\n``` scss\r\n.form-control,\r\n.form-control-file,\r\n```\r\n"},{"labels":[null,"enhancement",null,null],"text":"Carousel has no theme where the control arrows aren't white. In this case, using a bg-light (or if someone used a bg-white) it should have black or dark grey left/right controls. Right now it's white-on-light or white-on-white and so the arrows are useless.\r\n\r\n```html\r\n<div id=\"carouselReviews\" class=\"carousel slide bg-light \" data-ride=\"carousel\">\r\n  <div class=\"carousel-inner bg-light\">\r\n    <div class=\"carousel-item active\">\r\n        <div class=\"d-block w-100 bg-light\">CONTENT</div>\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n        <div class=\"d-block w-100 bg-light\">CONTENT</div>\r\n    </div>\r\n    <div class=\"carousel-item\">\r\n        <div class=\"d-block w-100 bg-light\">CONTENT</div>\r\n    </div>\r\n  <a class=\"carousel-control-prev\" href=\"#carouselReviewsControls\" role=\"button\" data-slide=\"prev\">\r\n    <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n    <span class=\"sr-only\">Previous</span>\r\n  </a>\r\n  <a class=\"carousel-control-next\" href=\"#carouselReviewsControls\" role=\"button\" data-slide=\"next\">\r\n    <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n    <span class=\"sr-only\">Next</span>\r\n  </a>\r\n</div>\r\n```"},{"labels":["enhancement",null],"text":"I have a custom drop down that I've created, which includes functionality to use the arrow keys to move up and down the list.  \r\n\r\nAs of right now, the only way to highlight an item is with li.dropdown-item:hover.  I have no way to highlight an item using a class.\r\n\r\nI would like to propose adding a class that I can add to my li.dropdown-item that will mimic the hover style.\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Besides tabs and pills add a wizard style navigation tab.\r\n\r\nSee http://benjii.me/2014/03/wizard-style-navigation-tabs-for-bootstrap/ for a demo.\r\n\r\nSee https://gist.github.com/tiesont/5b291c8344944f22c3d67cb902464048 for some more recent css.\r\n"},{"labels":[null,"enhancement"],"text":"What about having a class that gives a little stretched effect on the button. \r\n\r\n```\r\n.btn-stretched\r\n```\r\n\r\nA little more padding on the left and right.\r\n"},{"labels":["enhancement",null],"text":"Hello fine folks of Bootstrap, today I wanted to discuss the potential of modifying the bootstrap source JS to support browser based imports natively, without any third party tools/transpilers or the like.\r\n\r\n## Preface\r\n\r\nAt the moment, all of [Bootstraps JS modules ](https://github.com/twbs/bootstrap/tree/v4-dev/js/src) are wirtten to support ES6 and export the class definition. This issue would require a slight tweak so that they are browser complaint, additionally, the import $ from jQuery declaration would need to be removed.\r\n\r\nThe upside of this, is that code such as \r\n\r\nimport {Alert} from './js/bootstrap/alert.js';\r\n\r\nwould now work when using <script type='module'>, which even though has somewhat [limited](https://caniuse.com/#search=modules) scope, still becomes a useful feature in the future. Especially now Chrome has added [dynamic imports](https://developers.google.com/web/updates/2017/11/dynamic-import).\r\n\r\n## Changes required\r\n\r\nThe changes are trivial:\r\n\r\n1: Delete import $ from 'jquery' from each src module file\r\n\r\n2: \r\nimport Alert from './alert' \r\nbecomes \r\nimport Alert from './alert.js'\r\n\r\n3: In your HTML file:\r\n\r\n```\r\n<script type=\"module\">\r\n\r\n//import {Alert} from './js/bootstrap/index.js';\r\nimport Alert from './js/bootstrap/alert.js';\r\n\r\n//$(\".alert\").alert('close');\r\n\r\n</script>\r\n```\r\n\r\nYou can also use dynamic imports using this method too, although I have not personally tested this.\r\n\r\n## Performance benefits\r\n\r\nbootstrap.min.js (2298 lines) - 14.9kb\r\nutil.js (162 lines) - 4.2kb (unminified), **1.7kb minified**\r\nalert.js (193 lines) - 4.5kb (unminified), **1.7kb minified**\r\n\r\nLoading _only_ what you need, and loading _on demand_ has obvious advantages and is something that is possible today :)\r\n\r\n## Next steps\r\n\r\nSince the changes are fairly trivial, is it possible to integrate these into the v4 branch? I'm happy to PR some documentation changes. If it's possible to make this browser-module compatible without much effort that would be awesome. Heck, maybe they can be exported in a browser-module friendly format during build time.\r\n\r\nCheers.\r\n  \r\n  "},{"labels":[null,"enhancement",null],"text":"```\r\n<div class=\"d-block d-md-none\"> I want only show in small screen ... </div>\r\n<td class=\"d-table d-md-none\"> I want only show in small screen ... </td>\r\n<div class=\"d-flex d-md-none\"> I want only show in small screen ... </div>\r\n```\r\n\r\nIn this way, we need to know the display type of this element in advance, and if you set up a d-block for a TD, this TD will become very strange. So we suggest using the following way, so that it is easy to remember, and will not change the original properties of display.\r\nBy the way of free combination:\r\n\r\n```\r\n<div class=\"hidden-sm hidden-md\">Hidden in small and middle screen </div>\r\n<div class=\"hidden-md hidden-lg\">Hidden in middle and large screen </div>\r\n```\r\n\r\nThe big screen lets the user toss itself, as a framework to compromise and trade-offs, convenience and simplicity is bigger and better.\r\n\r\n```\r\n@media (max-width: 576px) {\r\n  .hidden-sm { display: none !important; }\r\n}\r\n@media (min-width: 576px) and (max-width: 992px){\r\n  .hidden-md { display: none !important; }\r\n}\r\n@media (min-width: 992px) {\r\n  .hidden-lg { display: none !important; }\r\n}\r\n```\r\n  \r\n  "},{"labels":["enhancement",null,null,null],"text":"Currently it's necessary to add a small junk of JS (created below) to activate NAV tabs/pills based on the anchor link provided on the tab/pill itself when a page is loaded. This is for **deep linking** to a tab/pill on a page. This feature request is to integrate this *behaviour* automatically as part of bootstrap v4 JS.\r\n\r\n```JS\r\n// Show appropriate pill based on #anchor in URL\r\nvar url = window.location.href;\r\nif (url.indexOf(\"#\") > 0){\r\nvar activeTab = url.substring(url.indexOf(\"#\") + 1);\r\n  $('.nav[role=\"tablist\"] a[href=\"#'+activeTab+'\"]').tab('show');\r\n}\r\n```"},{"labels":["enhancement",null],"text":"It would be very useful if we could find out what breakpoint is being displayed at the moment with Javascript.\r\n\r\nFor example:\r\n\r\n`if( bootstrapBreakpoint() == \"xs\"  ) {\r\n  // do something\r\n}\r\nelse {\r\n  // do something\r\n}`"},{"labels":[null,"enhancement",null],"text":"With Beta 3 bringing `.input-group-append` and `.input-group-prepend` it seems like an opportune moment for one additional group structure: `-between`.  This pattern would ideally be for situations where multiple input fields need to be more visually connected.  Such patterns might include:\r\n\r\n- Inputting dimensions: `[width][x][height]`\r\n- Inputting time: `[hour][:][minutes] or [mm][/][yyyy]`\r\n\r\nCurrently this pattern can be achieved with existing CSS; with the exception that you get either a double border on the left or right of the input field depending on whether you used `-prepend` or `-append`.  Adding this additional class would be as simple as:\r\n\r\n- Modifying class declarations for `..input-group-append, .input-group-prepend { }` to include the new wrapper.\r\n- Removing the `border-radius` as well as the left and right `border` of `.input-group-between .input-group-text { }`\r\n\r\nI have created an example on CodePen to illustrate the current implementation (using both `.input-group-prepend` and `.input-group-append`) which results in the aforementioned double-border, as well as the proposed `.input-group-between`.\r\n\r\nhttps://codepen.io/rkieru/pen/Mrmagb"},{"labels":[null,"enhancement",null],"text":"This issue is based on comment https://github.com/twbs/bootstrap/pull/23444#issuecomment-322407624, the discussion in #25050 and finally comment https://github.com/twbs/bootstrap/pull/25050#issuecomment-353690247. It is a followup of PR #25050 because the discussion became a feature request and went out of scope of the PR content.\r\n\r\n**Situation**\r\n\r\nA group of radio buttons or checkboxes. For the application logic a certain requirement is posed on the group of inputs, but not on the individual inputs. For example (checkboxes): at least one checkbox must be checked, or the checkboxes must satisfy a certain relation.\r\n\r\nUsually, if radio buttons or checkboxes are grouped they are placed either in a `<fieldset>` or `<div>` which may have additional styling for a better UX. (This also helps users with a screen reader a lot.)\r\n\r\nOnce the form is submitted it is validated. That may be server side, or a client side JS library. Either way, often a class is added to the top level where the validation has occurred. For a normal text input this is the `<input>`. For the groups of radio buttons or checkboxes, this is the `<fieldset>` or `<div>`. It does not make sense to add the validity class to each child `<input>` element because the validity state does not depend on the input itself but rather on the group.\r\n\r\n**Problem**\r\n\r\nAt the moment there is no support for adding either the `.is-valid` or the `.is-invalid` class the top-level validation element, without marking it as a form control (which is not correct, a wrapper is not an actual thing you can control). The labels of the checkboxes and/or radio buttons are not colored as invalid.\r\n\r\n**Example**\r\n\r\nBootstrap 3 markup (generated with a Symfony form) which achieves the required effect:\r\n```html\r\n<div class=\"form-group has-error\"><label class=\"col-sm-2 control-label\">C2</label>\r\n    <div class=\"col-sm-10\">\r\n        <div id=\"form_c2\">\r\n            <div class=\"radio\"> <label class=\"\"><input type=\"radio\" id=\"form_c2_placeholder\" name=\"form[c2]\" value=\"\" checked=\"checked\"> None</label>\r\n            </div>\r\n            <div class=\"radio\"> <label class=\"\"><input type=\"radio\" id=\"form_c2_0\" name=\"form[c2]\" value=\"1\"> 0</label>\r\n            </div>\r\n            <div class=\"radio\"> <label class=\"\"><input type=\"radio\" id=\"form_c2_1\" name=\"form[c2]\" value=\"2\"> 1</label>\r\n            </div>\r\n            <div class=\"radio\"> <label class=\"\"><input type=\"radio\" id=\"form_c2_2\" name=\"form[c2]\" value=\"3\"> 2</label>\r\n            </div>\r\n        </div><span class=\"help-block\">    <ul class=\"list-unstyled\"><li><span class=\"glyphicon glyphicon-exclamation-sign\"></span> This value should not be blank.</li>\r\n        </ul>\r\n        </span>\r\n    </div>\r\n</div>\r\n```\r\n\r\nBootstrap 4 markup. The current workaround in Symfony 3.4: adding the `.form-control` class to a grouping `<div>`.\r\n```html\r\n<fieldset class=\"form-group\">\r\n    <div class=\"row is-invalid\">\r\n        <legend class=\"col-sm-2 col-form-legend\">C2</legend>\r\n        <div class=\"col-sm-10\">\r\n            <div id=\"form_c2\" class=\"form-control is-invalid\">\r\n                <div class=\"form-check\"><label class=\"form-check-label\"><input type=\"radio\" id=\"form_c2_placeholder\" name=\"form[c2]\" class=\"form-check-input\" value=\"\" checked=\"checked\"> None</label></div>\r\n                <div class=\"form-check\"><label class=\"form-check-label\"><input type=\"radio\" id=\"form_c2_0\" name=\"form[c2]\" class=\"form-check-input\" value=\"1\"> 0</label></div>\r\n                <div class=\"form-check\"><label class=\"form-check-label\"><input type=\"radio\" id=\"form_c2_1\" name=\"form[c2]\" class=\"form-check-input\" value=\"2\"> 1</label></div>\r\n                <div class=\"form-check\"><label class=\"form-check-label\"><input type=\"radio\" id=\"form_c2_2\" name=\"form[c2]\" class=\"form-check-input\" value=\"3\"> 2</label></div>\r\n            </div>\r\n            <div class=\"invalid-feedback\">\r\n                <ul class=\"list-unstyled mb-0\">\r\n                    <li>This value should not be blank.</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</fieldset>\r\n```\r\n\r\nThe image below is a comparison between BS 3 and BS 4 beta 2.\r\n\r\nWith the workaround:\r\n\r\n![1](https://user-images.githubusercontent.com/1073881/34318957-bfe49e6c-e7d4-11e7-9310-ef87e18d95af.PNG)\r\n\r\nWith the `.form-control` removed. No validation errors are visible\r\n\r\n![2](https://user-images.githubusercontent.com/1073881/34318958-c405bd00-e7d4-11e7-8b2f-dfc19103ba51.PNG)\r\n\r\n"},{"labels":["enhancement",null,null],"text":"## Feature Request\r\n\r\n**Please allow configuring Bootstrap to use a second version of jQuery that is available in a global other than `$` or `jQuery`, via use of `jQuery.noConflict(true)`.**\r\n\r\nSeveral issues have already been addressed regarding `$.noConflict()` support (in which `$` would be unavailable, but `jQuery` would be). This was largely due to WordPress running jQuery in no conflict mode. \r\n\r\nWordPress also runs an old version (`1.12.4`) which no longer receives patches (and is [vulnerable](https://nodesecurity.io/advisories/jquery_xss) ). Many developers will \"upgrade\" jQuery before WP does. However, upgrading WordPress's jQuery in place via `wp_deregister_script` is typical, but [responsible developers should not replace WP's jQuery](https://pippinsplugins.com/why-loading-your-own-jquery-is-irresponsible/).  [A better way is described by WP Engine](https://nodesecurity.io/advisories/jquery_xss): WP developers should leave WP Core's library alone as to not break what is depending on them, and register a new version with `$.noConflict(true)`.\r\n\r\nIf Bootstrap looked for jQuery in some other global, `var twbs$ = jQuery.noConflict(true)` (naming variables is hard) would allow using a modern version of jQuery in Bootstrap, while preserving WP core's version for itself.\r\n\r\nThere may be other use-cases of wanting to use a jQuery that isn't on the `jQuery` or `$` globals. "},{"labels":[null,"enhancement",null],"text":"It'd be great to have `border-md-0` and `border-sm-0` for instance to apply responsive border styles."},{"labels":[null,"enhancement",null],"text":"The background of a secondary button was darken than v3, I feel \"heavy\" when use a secondary button into input group. To make lighter, @mdo comments in #24216:\r\n\r\n> It looked better with the default Bootstrap button styles there\r\n\r\nBut, the default button does not have borders and hover state.\r\n\r\nI think not a few people prefer light buttons like v3. Could you consider adding a button with a white (or light weight) background like v3? It may be similar to pagination items.\r\n\r\n![image](https://user-images.githubusercontent.com/4065765/33975093-b8a6845a-e0cf-11e7-99db-17cde69a438b.png)\r\n"},{"labels":[null,"enhancement",null,null],"text":"- Operating system and version: Any\r\n- Browser and version: Any\r\n- Bootstrap V4\r\n\r\nCurrently, `.col-form-label` and two helper classes for sizing `.col-form-label-sm` and `.col-form-label-lg`, so that the label can be matched with the form-control's sizing.\r\n\r\nWhen using a `<fieldset>` to group related controls in a form-group, one uses the `<legend>` element to label the group of inputs, and one can use the corresponding class `.col-form-legend` to style the legend. \r\n\r\nUnfortunately there are no helper classes `.col-form-legend-sm` or `.col-form-legend-lg` to control the legend text size so that it matches up with the form-control size or other `col-form-labels` that may be in the same  form.\r\n\r\nI have tried applying the `.col-form-label-sm` (or `-lg)` classes to the `<legend>` along with `.col-form-legend`, but it does not work, due to the order of the definition of the CSS rules which make `.col-form-legend`'s font size overrule `.col-form-label-sm`\r\n\r\nMaybe just simply moving the `.col-form-legend` CSS rule before the `.col-form-label-{size}` rules would suffice?\r\n\r\n"},{"labels":["enhancement",null,null],"text":"This is concerning the lines in the dropdown.js:\r\n\r\n```\r\nif ($(parent).hasClass(ClassName.DROPUP)) {\r\n  if ($(this._menu).hasClass(ClassName.MENULEFT) || $(this._menu).hasClass(ClassName.MENURIGHT)) {\r\n    element = parent;\r\n  }\r\n}\r\n```\r\n\r\nwhich landed in https://github.com/twbs/bootstrap/commit/70f4a30defaa1d3269385ce713a5926ab84d7727\r\n\r\nI'm not sure why the code is so explicit in declaring the element parent to be used in popper for this exact circumstance. It makes for some frustrating styling.\r\n\r\nSee example here, which is extremely ugly looking visually but I have provided to make clear the issue:\r\n\r\nhttps://jsfiddle.net/g09bzzzw/18/\r\n\r\nYou can see that the first dropdown runs as expected, the menu is aligned to the button, everything is great.\r\n\r\nThe second menu appears aligned with the <th> parent, because of the condition which matches the code in dropdown.js. This makes for a nice menu that appears outside of the \"toolbar\" area (the yellow hover).\r\n\r\nThe third menu does not appear nicely, because it is missing the \"dropup\" class which is needed to have popper affix to the parent according to the code in dropdown.js.\r\n\r\nGiven that in some cases, affixing to dropdown-toggle is desired, and in other cases, the parent of dropdown-toggle, I think this should just merely be a config option. Then it can be affixed to either, instead of the above custom code.\r\n\r\nThen the above code could just be changed to\r\n\r\n```\r\nif (this._config.affix === 'parent') {\r\n  element = parent;\r\n}\r\n```\r\n\r\nThis also has other benefits of having the dropdown menu easily affix to other elements regardless of the .dropdown-toggle's shape or visibility. (it can even be hidden and programatically shown and still work). Another use case would be to position the menu aligned with the whole button for a split button dropdown:\r\n\r\nhttps://getbootstrap.com/docs/4.0/components/dropdowns/#split-button-dropdowns\r\n\r\ninstead of aligned with the split button.\r\n\r\nWhat do you think?"},{"labels":[null,"enhancement",null],"text":"FEATURE REQUEST: `.container-*-fluid`\r\n\r\nDESCRIPTION: Switch to fluid layout for viewports larger than a certain size.\r\n\r\nUse case: https://codepen.io/anon/pen/WXaoyo?editors=1100#0\r\n\r\nImplementation for `.container-xl-fluid`:\r\n\r\n```css\r\n@media (min-width: 1200px) {\r\n  .container-xl-fluid {\r\n    width: 100%;\r\n    margin-right: auto;\r\n    margin-left: auto;\r\n    padding-right: 15px;\r\n    padding-left: 15px;\r\n    width: 100%;\r\n    max-width: none;\r\n  }\r\n}\r\n```"},{"labels":[null,"enhancement"],"text":"Hello,\r\n\r\nBootstrap 5 may be rely on the new standard CSS Grid layout which allow to divide available space for layout into columns and rows:\r\n\r\nhttps://caniuse.com/#feat=css-grid"},{"labels":["enhancement",null,null],"text":"I have a bootstrap themed site that utilizes a common master layout including a navbar. One page is hosting an angular application, which is only rendering parts of the content, not the full page. Since bootstrap plugins do not work in Angular, I'm using ng-bootstrap inside my Angular app. Unfortunately, the bootstrap javascript I load for my page layout conflicts with the code ng-bootstrap is providing.\r\n\r\nThe problem would be eliminated if there was a way to restrain bootstrap plugins to a certain page area (i.e. '#page-navbar' and all children) or to disable the bootstrap plugin for a certain page area (i.e. '#my-angular-app-container' and all children).\r\n\r\nI understand that it is possible to globally turn off the data-api with `$(document).off('.data-api')`, but not for specific elements like `$('#my-angular-app-container').off('.data-api')`.\r\nIs there any existing solution that I missed or an idea what might be done to enable this scenario?\r\nHow about introducing a selector like `.no-bootstrap-js` that blocks the instantiation of bootstrap code on the element and its children?\r\n```\r\n<nav id=\"page-navbar\" class=\"navbar navbar-expand-lg navbar-light bg-light\">...</nav>\r\n<div id=\"my-angular-app-container\" class=\"container no-bootstrap-js\"><myAngularApp></myAngularApp></div>\r\n```\r\n\r\nI hope that is making some kind of sense. Thanks for reading."},{"labels":[null,"enhancement",null],"text":"```scss\r\n$font-size-base:              1rem !default; // Assumes the browser default, typically `16px`\r\n$font-sizes: () !default;\r\n$font-sizes: map-merge((\r\n    \"base\":    $font-size-base,\r\n    \"sm\":  ($font-size-base * 1.25),\r\n    \"lg\":    ($font-size-base * .875),\r\n), $font-sizes);\r\n\r\ndiv {\r\n    font-size: font-size(\"sm\")\r\n}\r\n```"},{"labels":["enhancement",null,null],"text":"Hello,\r\nI think that option should be in each slider, so Carousel too - reponsive items.\r\n\r\nFor example:\r\ndevices ≥992pxs: 5 items*\r\ndevices ≥768px: 3 items*\r\ndevices <576px: 1 item*\r\n\r\n*by items i mean bootstrap cards, panels etc in 1 slide. Options could be changed by breakpoint classes in carousel structure or javascript code like:\r\n\r\n```\r\n$('.carousel').carousel({\r\nresponsive : {\r\n'ES': { items: 1 }, // ES <576px\r\n'SM': { items: 3 }, // SM ≥768px\r\n'LG': { items: 5 } // LG ≥992pxs\r\n}\r\n});\r\n```"},{"labels":[null,"enhancement",null],"text":""},{"labels":[null,"enhancement",null],"text":"Opening a new issue from #24260 to track this.\r\n\r\nIn v3, we had a complex navbar that automatically had a `max-height` and some scrolling for longer navs on smaller viewports. In v4, we have a ton more flexibility around the nav, but no overflow support."},{"labels":[null,"enhancement",null],"text":"Can you add Column count for each Breakpoint?\r\n\r\nExample:\r\n\r\n```\r\n$card-columns-breakpoints: (\r\n  xs: 1,\r\n  sm: 1,\r\n  md: 2,\r\n  lg: 3,\r\n  xl: 4\r\n) !default;\r\n```\r\n\r\nRegards Jonny"},{"labels":[null,"enhancement",null],"text":"Does the navbar in BS4 have an option whereby the hamburger menu slides from right to left, also pushing the content to the left too, instead of top to bottom?"},{"labels":[null,"enhancement",null],"text":"Feature proposal:\r\nCurrently you can enlarge the size of a heading using the `display-1`-like classes. Very useful for standing out a heading!\r\n\r\nThe large size does not fit well on smaller viewports, so my suggestion is to make it viewport dependent. E.g. `display-sm-2` to apply this display-setting to the sm-breakpoint and above.\r\n\r\nThis way you could control the Heading size using something like `<h1 class=\"display-4 display-sm-2\" ...` to fit it in a smaller viewport.\r\n\r\nWhat do you think about this idea?"},{"labels":[null,"enhancement",null],"text":"What do you think about creating a `$enable-*` variable for each component? So the [bootstrap.scss](https://github.com/twbs/bootstrap/blob/v4-dev/scss/bootstrap.scss) would be even more modular.\r\n\r\nBy default, the variables would be set to `true`. For example, if the \"jumbotron\"component is not desired, you could disable it as follows:\r\n\r\n```\r\n$enableJumbotron: false;\r\n```\r\n\r\nhttps://v4-alpha.getbootstrap.com/getting-started/options/"},{"labels":[null,"enhancement",null,null],"text":"Looking to add a **`list-striped`** class that is similar to **`table-striped`** to create a little more visual distinction between list-group-items.  This is especially helpful on wider lists.  _Switching to a single column table to use table-striped isn't really semantically correct._\r\n\r\nSample codepen here: https://codepen.io/anon/pen/JOdBGG\r\n\r\nUnfortunately this starts to fall apart when combined with other styles such as .active or the contextual classes..\r\n\r\nIf it's acceptable that a list-group-striped class doesn't play well with other list-group styles, I could submit a PR for this, otherwise perhaps someone with more expertise can provide a more elegant solution.\r\n"},{"labels":[null,"enhancement",null],"text":"Bootstrap generates a lot of helper functions based on breakpoints which leads to many classes which may be unused in production CSS. The problem gets even bigger if you want to add another breakpoint. Now since `offset-*` classes are back this isn't helping either.\r\n\r\nIn order to have more granular control I would suggest to add more option variables to allow the developer to choose which helpers should be auto generated and which ones not. I'll add some examples below.\r\n\r\nDo you have any other plans or ideas in implementing such a feature? If necessary I would prepare a PR if this seems legit to be implement.\r\n\r\nIn case of `_flex.scss` it would be useful to limit the breakpoints for which the helpers should be generated as well as disabling some helpers at all. In this case I would suggest a new variable `$flex-breakpoints` which inherits its values from `$grid-breakpoints` as a default. Then I'd suggest the variables `$enable-flex-justify-content`, `$enable-flex-align-items`, `$enable-flex-align-content`, `$enable-flex-align-self` to enable or disable auto generation of these helpers. For the other `flex-*` helpers I'm currently unsure if there should be variables for each of them, or just disabling the wrap helpers or if we just keep them all the time as they were needed more often then the others.\r\n\r\nThe same scheme can be applied to `_grid-framework.scss` where I would create variables `$enable-grid-order` and `$enable-grid-offset` to disable them. Offsets, may not be used by many people since they had been removed and brought back in the newest beta.\r\n\r\nI'd really appreciate your thoughts about this. In my opinion this would help developers a lot to keep their CSS small."},{"labels":[null,"enhancement",null,null],"text":"We have utilities for weight, italic, smaller/bigger size, why not have one for monospace?\r\nIt would be useful for tables with columns showing numbers, to easily see which number is greater.\r\ni.e. 99999 (5 numbers) gives the false impression of being greater than 111111 (6 numbers) because it has a bigger width when using the default font and size"},{"labels":[null,null,"enhancement",null],"text":"OK... this is probably something we might never get to do it due to the amount of changes.\r\n\r\nThat being said, [Hugo](https://gohugo.io/) is blazingly fast, has no dependency like Jekyll has to Ruby, and is very extensible too.\r\n\r\nIf anyone starts working on it, please let me know."},{"labels":["enhancement",null,null],"text":"If a link in the footer (**user cannot scroll further down**) opens a collapse **under it**, the user wont see it.\r\n\r\n**Could we have some type of auto-scroll in this case?**\r\n\r\nSee example here: https://jsbin.com/yezuvevici/edit?output\r\n\r\n~~Tested on: Windows 10 with Microsoft Edge 40.15063.674.0 and Ubuntu 16.04 LTS with Firefox 56.0~~"},{"labels":[null,"enhancement",null],"text":"Hello,\r\n\r\nBefore that, in 2013, I pull a request https://github.com/twbs/bootstrap/pull/10534 and @mdo said that it's okay.\r\nThen I pull a new request https://github.com/twbs/bootstrap/pull/10672 and he rejects that way, funny huh? :D\r\n\r\nAnyway, we are now close to 2018, and Bootstrap 4 did not support RTL yet? Seriously?\r\nMay I know when you intended to support RTL? in 2030? Or v10?\r\n\r\nThank you."},{"labels":["enhancement",null,null],"text":"When I hover a popover trigger, then move my mouse the popover that appears, I expect for the popover to stay open as long as my mouse is on either the trigger or the popover itself. Can this behavior be implemented?\r\n\r\nI would provide a gif of this behavior but I'm not sure how to record it."},{"labels":[null,"enhancement",null],"text":"I really like the `.border` class. However, I find I constantly add this to my code:\r\n\r\n```\r\n@border : 1px solid #e9ecef !important;\r\n.border-top    { border-top:    @border; }\r\n.border-right  { border-right:  @border; }\r\n.border-bottom { border-bottom: @border; }\r\n.border-left   { border-left:   @border; }\r\n```\r\n(I'm using Less, but you get the idea).\r\n\r\nIt's a quick addition which makes things a bit more readable, so instead of doing this:\r\n\r\n`class=\"border border-top-0 border-left-0 border-right-0\"`\r\n\r\nI do this:\r\n\r\n`class=\"border-bottom\"`\r\n\r\nI think it makes sense, and it's really easy to add. \r\n"},{"labels":[null,"enhancement",null,null],"text":"We can use `<div class=\"row no-gutters\">` in html, but in case of implementing this in Sass we need to manually add zero-margin/padding:\r\n\r\nFor example:\r\n\r\n```scss\r\n// Grid with 'no-gutters' NOW\r\n\r\n.example-row {  \r\n  @include make-row(); // or just @extend .row;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n}\r\n\r\n.example-col-2 {\r\n  @include make-col-ready(); // or just @extend .col-2;\r\n  @include make-col(2);\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n\r\n.example-col-10 {\r\n  @include make-col-ready();\r\n  @include make-col(10);\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n```\r\n\r\nMaybe it will be usefull to add an option for Sass mixins like: \r\n```scss\r\n@mixin make-row($gutters: 'gutters') {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  @if $gutters == 'gutters' {\r\n    margin-right: ($grid-gutter-width / -2);\r\n    margin-left:  ($grid-gutter-width / -2);\r\n  }\r\n}\r\n\r\n@mixin make-col-ready($gutters: 'gutters') {\r\n  position: relative;\r\n  // Prevent columns from becoming too narrow when at smaller grid tiers by\r\n  // always setting `width: 100%;`. This works because we use `flex` values\r\n  // later on to override this initial width.\r\n  width: 100%;\r\n  min-height: 1px; // Prevent collapsing\r\n  @if $gutters == 'gutters' {\r\n    padding-right: ($grid-gutter-width / 2);\r\n    padding-left:  ($grid-gutter-width / 2);\r\n  }\r\n}\r\n```\r\n\r\nSo we could write:\r\n```scss\r\n// Grid with 'no-gutters' AFTER\r\n\r\n.example-row {  \r\n  @include make-row('no-gutters');\r\n}\r\n\r\n.example-col-2 {\r\n  @include make-col-ready('no-gutters');\r\n  @include make-col(2);\r\n}\r\n\r\n.example-col-10 {\r\n  @include make-col-ready('no-gutters');\r\n  @include make-col(10);\r\n}\r\n```\r\n"},{"labels":["enhancement",null,null],"text":"Popper.js allow to pass function to this parameter it'll allow folks more flexibility on how they handle their offsets.\r\nSee : https://popper.js.org/popper-documentation.html#modifiers..offset.fn\r\n\r\n- [x] Dropdown\r\n- [ ] Popover/Tooltip\r\n\r\nRelated to #24208\r\n/CC @romanlex "},{"labels":[null,"enhancement",null,null],"text":"An idea raised by me already in #24015, it might be nice to have classes which can be e.g.\r\n used in order to not just hide certain columns when printing (e.g. a side navigation bar) but also to display other columns (e.g. the main content) in full width, see <https://stackoverflow.com/a/32253969>."},{"labels":["enhancement",null,null],"text":"Especially when using dropdowns in a navbar as a site navigation element I would like to show the dropdown menu on \"mouseenter\" events without requiring the users to click on the split toggle.\r\n\r\nI think this could be an optional feature and would require only a small amount of extra code; cf. my minimal test implementation at\r\nhttps://github.com/heikojansen/bootstrap/commit/7ff501a314a9c4eb47a9e1db69ed2c9ea6a7a69a\r\n\r\nThis does require scripted initialization (the data api as currently implemented wouldn't suffice) and a special config flag but I would consider that a feature...\r\n\r\nYou can test it here: https://jsbin.com/caciqujudi/edit?output\r\n(Note that I also need a small css modification to close a gap between the parent .nav-item and the dropdown which would trigger \"mouseleave\" events.)\r\n\r\nI wonder if you would be willing to add this as an official feature to bootstrap?\r\nIf yes, I'd try to put together a proper pull request on the js source file.\r\nIf not, I am interested in the reasons, e.g. if you think that this has accessibility issues."},{"labels":[null,"enhancement",null,null],"text":"Hello,\r\n\r\nis there a plan to add support for - only select one checkbox in group? \r\nhttps://stackoverflow.com/questions/9709209/html-select-only-one-checkbox-in-a-group\r\n\r\nAlso what do you think about changing colors for active/hover btn checkbox? They are the same now and it's not easy to differentiate is checked or not on hover when clicking.\r\n\r\nThanks"},{"labels":["enhancement",null,null],"text":"Hello\r\n\r\nRadio button.\r\n\r\nIs input.focus() required at https://github.com/twbs/bootstrap/blob/v4-dev/js/src/button.js#L104 ?\r\n\r\nInput field behaves as \"hidden\", not sure what is the idea of focus? If it is required could we add some option to disable it? Let say we have some radio buttons which gets triggered from something else. On small screens those radio buttons could be below viewport and on every change it gets focus or jump to.\r\n\r\nThanks"},{"labels":[null,"enhancement",null,null],"text":"## documentation\r\nhttps://getbootstrap.com/docs/4.0/components/popovers/\r\n\r\nWhat is this bullet under \"overview\" referring to?:\r\n> When triggered from hyperlinks that span multiple lines, popovers will be centered. Use `white-space: nowrap;` on your <a>s to avoid this behavior.\r\n\r\nanchor text?   popover content?  I couldn't reproduce.\r\nexample or remove the bullet\r\n\r\n## Dismissible popovers\r\n> Use the focus trigger to dismiss popovers on the next click that the user makes.\"\r\n\r\nIronically not dismissed if the next click is on the button that opened the popover.  Yet Non-dismissible popover will toggle the popover on repeat btn clicks\r\n\r\n## options\r\ncontent option:  string | element | function\r\n   * example usage for element/jquery-obj would be nice ie `$('#myPopoverContent')`\r\n   * specifying an element currently moves the element within the dom when popover is displayed\r\n   * since the element is moved,  something like `<div id=\"myPopoverContent\" class=\"d-hide\">tada</div>` will remain hidden.  calling `.show()` will not overwrite the `.d-hide`'s !important\r\n   * add a small note that \"obviously\" only a string may be specified via `data-content` attribute\r\n   \r\n## Feature request:\r\nnew option:  `target`\r\nThis would provide the ability to specify content element via `data-target` attribute much like one can do with a modal.    \r\nBy providing this option, the \"element\" type could/should? be deprecated/removed from the `content` option"},{"labels":[null,"enhancement",null],"text":"I think it would be great to include some more font-weight options in bootstrap. Even when you look at the documentation, you can see that the weights have been modified because current design sensibilities call for a wider range of font weights that the default. I realized that when I'm creating bootstrap projects, I end up modifying the font-weights a lot, so maybe this could be added into the classes.\r\n\r\n![screen shot 2017-09-16 at 7 22 29 pm](https://user-images.githubusercontent.com/216426/30516697-657091d2-9b14-11e7-9faf-a0866a469639.png)\r\n\r\nAlthough `font-weight-bold` and `font-weight-normal` exist, I feel like there needs to be a bit more broad.  I'm proposing adding some font-weight classes.\r\n\r\n`font-weight-light`\r\n`font-weight-medium`\r\n`font-weight-normal`\r\n`font-weight-bold`\r\n`font-weight-heavy`\r\n\r\nThese could be tied to sass variables. We could also add numbered font-weight classes.\r\n\r\n`font-weight-100`\r\n`font-weight-300`\r\n...etc"},{"labels":[null,"enhancement",null],"text":"It would be great to be able to do something like this:\r\n`<div class=\"border-top border-lg-top-0 border-lg-left\">...</div>`\r\nSo in this example, you'll have:\r\n\r\n1. a 1px top border from xs to md\r\n2. a 1px left border from lg to xl (the top border get's removed)\r\n\r\nHere's what the SASS might look like:\r\n\r\n`@each $breakpoint in map-keys($grid-breakpoints) {\r\n\t@include media-breakpoint-up($breakpoint) {\r\n\t\t$infix: breakpoint-infix($breakpoint, $grid-breakpoints);\r\n\r\n\t\t.border#{$infix}-top-0{\t\tborder-top: 0 !important;}\r\n\t\t.border#{$infix}-right-0{\tborder-right: 0 !important;}\r\n\t\t.border#{$infix}-bottom-0{\tborder-bottom: 0 !important;}\r\n\t\t.border#{$infix}-left-0{\tborder-left: 0 !important;}\r\n\t\t.border#{$infix}-top{\t\tborder-top: 1px solid $gray-200 !important;}\r\n\t\t.border#{$infix}-right{\t\tborder-right: 1px solid $gray-200 !important;}\r\n\t\t.border#{$infix}-bottom{\tborder-bottom: 1px solid $gray-200 !important;}\r\n\t\t.border#{$infix}-left{\t\tborder-left: 1px solid $gray-200 !important;}\r\n\t\t.border#{$infix}-x{\t\t\tborder-left: 1px solid $gray-200 !important; border-right: 1px solid $gray-200 !important;}\r\n\t\t.border#{$infix}-y{\t\t\tborder-top: 1px solid $gray-200 !important; border-bottom: 1px solid $gray-200 !important;}\r\n\t}\r\n}`\r\n"},{"labels":[null,"enhancement",null,null],"text":"How about adding \"ghost\" badges (badge outlines)?\r\n![image](https://user-images.githubusercontent.com/581458/30203100-9eb2f5ca-9489-11e7-8a58-9e2693906701.png)\r\nbackground color -> outline (border) color & text color\r\nhover state for the link badge is the same as ordinary (text color changes according to brightness to black/white)\r\n"},{"labels":[null,"enhancement",null],"text":"Hello there,\r\n\r\nAn utility class for text-underline would be awesome!"},{"labels":[null,"enhancement",null],"text":"The maybe toughest thing to get your head around when using TWBS is finding out which files are needed to be included when one wants to use a component. I have just (again) gone through all the hoops with the migration of a build that originally started with `v0.4.0-alpha.2` and is now on `v0.4.0-beta`. Files disappeared, additional ones were necessary and it took me three hours of just finding out what's missing and what changed. \r\nFYI: This is not a \"include CSS and JS from CDN and call it a day\"–site, but one that includes only what's actually in use (by `@import`ing SCSS files, etc.).\r\n\r\n**Feature request for documentation:** Please, add the files needed (SCSS, JS) that make a component work."},{"labels":[null,"enhancement",null],"text":"I'm using `.form-control` with a custom control that contains an input element. Because the `.form-control` class is added to a div, and not to an input element, it doesn't get the focus. If the `form-control-focus()` mixin could be updated to `&:focus, &:focus-within` this would mean that the form-control would get the correct focus styling when the input controls it contains are focussed.\r\n\r\nThis would not be supported by MS browsers but would not harm them either: http://caniuse.com/#search=focus-within\r\n\r\nWould it be possible to this in?"},{"labels":[null,"enhancement",null],"text":"I feel like some of the documentation gets unnecessarily long because of all of the options. I ran into this same issue when I was trying to document the features for my online courses, so I switched to a model where I used more visually appealing formulas with colors. I think this could easily be accomplished with button tag classes. Something like the following.\r\n\r\n![screen shot 2017-08-31 at 7 57 19 pm](https://user-images.githubusercontent.com/216426/29950149-da333a04-8e87-11e7-8fa0-fa6e7027c76e.png)\r\n\r\n![screen shot 2017-08-31 at 8 04 48 pm](https://user-images.githubusercontent.com/216426/29950148-da2e8f22-8e87-11e7-8b51-b692a62b1d74.png)\r\n\r\n![screen shot 2017-08-31 at 8 04 29 pm](https://user-images.githubusercontent.com/216426/29950147-da2ccb06-8e87-11e7-9ab0-ac0f6768e12d.png)\r\n\r\n"},{"labels":[null,"enhancement",null,null],"text":"We are defining different shadows in different components. There are about 25 shadow definitions on variables.\r\n\r\nTo keep consistency, I think we unify all of them in 4 shadow variables (sm, md, lg and inset) and then reuse them across components.\r\n\r\nFor example, instead of:\r\n```scss\r\n$popover-box-shadow:                  0 .3rem .6rem rgba($black,.2) \r\n```\r\n\r\nWe would have something like:\r\n```scss\r\n$component-box-shadow-md:                  0 .3rem .6rem rgba($black,.2) \r\n$popover-box-shadow:                  $component-box-shadow-md \r\n```\r\nThis follows the same idea as #23674 \r\n\r\nBefore I send a PR I'd like to know what do you guys think?"},{"labels":["enhancement",null,null],"text":"## Summary of Issue\r\n\r\nAs the issue describes currently selectors from the parent are only discovered 2 levels down. This severely limits collapse to an exact structure. \r\n\r\nFor clarification I am using the term \"Accordion\" to convey the intention that **showing** a collapsed section will **close** all other open sections.\r\n\r\n## Where to find the Issue\r\n\r\nThe line that creates this problem can be located here:\r\nhttps://github.com/twbs/bootstrap/blob/v4-dev/js/src/collapse.js#L132\r\n\r\n## Suggestion to fix\r\nUsing jQuery find would work, however there are a few things to consider, like should it traverse the entire tree under the selected parent id. My suggestion would be able to set a max search depth.\r\n\r\nSecond problem is potential nested accordions. Although the parent selector could be the anchor to all other accordion events, which means the nested accordion would not get toggled unless they share the same parent id.\r\n\r\nA side benefit, this would greatly open the opportunity to sidebar menus with accordion collapse behaviors.\r\n\r\n## Concerns\r\nWhile I understand the need for performance to avoid having to traverse all parent to child nodes, a compromise could be made to allow a certain search depth. Also jQuery find(), used in some of the Bootstrap Source Javascript files, once traversed the DOM and selectors discovered is cached."},{"labels":["enhancement",null,null],"text":"Hi, is this possible to add in new bootstrap v4 navbar on the hover displaying? I mean we can add navbar with dropdowns and the will be display after click on them, maybe good feature will be add displaying dropdowns on hover coursor on the dropdown element? This is possible to do manually, but \r\nthis is really bugged.\r\n\r\nSecond idea is add hidding popovers after click out of them, but still display block them when we click on them. Now we can just set hide popover after click somewhere so when we add link or button with eg. modal this will not be triggered or will hide after click on button.\r\n\r\nI don't know, i checked whole documentation and i don't found something about this. Let's discuss about it.\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Before opening an issue:\r\n\r\n- [Search for duplicate or closed issues](https://github.com/twbs/bootstrap/issues?utf8=%E2%9C%93&q=is%3Aissue)\r\n- [Validate](https://validator.w3.org/nu/) and [lint](https://github.com/twbs/bootlint#in-the-browser) any HTML to avoid common problems\r\n- Prepare a [reduced test case](https://css-tricks.com/reduced-test-cases/) for any bugs\r\n- Read the [contributing guidelines](https://github.com/twbs/bootstrap/blob/master/CONTRIBUTING.md)\r\n\r\nWhen asking general \"how to\" questions:\r\n\r\n- Please do not open an issue here\r\n- Instead, ask for help on [StackOverflow, IRC, or Slack](https://github.com/twbs/bootstrap/blob/master/README.md#community)\r\n\r\nWhen reporting a bug, include:\r\n\r\n- Operating system and version (Windows, Mac OS X, Android, iOS, Win10 Mobile)\r\n- Browser and version (Chrome, Firefox, Safari, IE, MS Edge, Opera 15+, Android Browser)\r\n- Reduced test cases and potential fixes using [JS Bin](https://jsbin.com)\r\n\r\nWhen suggesting a feature, include:\r\n\r\n- As much detail as possible for what we should add and why it's important to Bootstrap\r\n- Relevant links to prior art, screenshots, or live demos whenever possible\r\n"},{"labels":[null,"enhancement",null],"text":"Hello, It will be nice if someone could add a class that let you point the cursor.\r\nexample:\r\n\r\n```\r\n.c-pointer {\r\n cursor: pointer;\r\n}\r\n```"},{"labels":[null,"enhancement",null,null],"text":"1. `text-dark` and `text-light` are classes used to make sure the text differentiates when we apply a special background.\r\n2. As text is usually already black, and we have a `text-white` class for pure white, the current behavior doesn't add functionality\r\n3. If `text-light` and `text-dark` were instead based on `rgba(255,255,255,.5)` and `rgba(0,0,0,.5)`, they would better represent their name; lightness and darkness\r\n\r\nCurrent:\r\n<img width=\"338\" alt=\"screen shot 2017-08-27 at 3 18 39 pm\" src=\"https://user-images.githubusercontent.com/3094044/29747609-2f6baf42-8b3b-11e7-8f93-486661bdb322.png\"><img width=\"333\" alt=\"screen shot 2017-08-27 at 3 23 28 pm\" src=\"https://user-images.githubusercontent.com/3094044/29747637-cfc87664-8b3b-11e7-8c0c-c4b93de44edc.png\">\r\n\r\nSuggested:\r\n<img width=\"337\" alt=\"screen shot 2017-08-27 at 3 19 37 pm\" src=\"https://user-images.githubusercontent.com/3094044/29747611-33a756a6-8b3b-11e7-8333-26a5587a2b44.png\"><img width=\"334\" alt=\"screen shot 2017-08-27 at 3 24 13 pm\" src=\"https://user-images.githubusercontent.com/3094044/29747639-d34b99ce-8b3b-11e7-850b-d48ff4689878.png\">"},{"labels":[null,"enhancement",null],"text":"I suggest a `d-<breakpoint>-initial` class to override the `d-<breakpoint>-none`\r\n\r\nThe reason for this is that certain content on a page may have a dynamic `display` style. You can no longer hide these elements and display them again on certain breakpoints without knowing their initial display.\r\n\r\nUse case: A client adds content to a page via a page builder, selects the `d-xs-none` yet doesn't want to hide it on `lg` and up, but content may be a table, block, inline-block - no one knows - so to solve every display case you can use `d-lg-initial`"},{"labels":[null,"enhancement",null],"text":"It would be great to have \"border-x-0\" and \"border-y-0\" CSS classes to complement the existing \"no border\" styles (as shown on https://getbootstrap.com/docs/4.0/utilities/borders/)\r\n\r\nThis would also fit with the sizing properties where \"x\" and \"y\" are already present."},{"labels":[null,"enhancement"],"text":"How about line-clamp utility ?\r\nhttp://caniuse.com/#search=line-clamp\r\n\r\nscss/mixins/_line-clamp.scss\r\n\r\n```scss\r\n//https://stackoverflow.com/a/26634773\r\n@mixin line-clamp($numLines: 1, $lineHeight: 1.5) {\r\n  overflow: hidden;\r\n  text-overflow: -o-ellipsis-lastline;\r\n  text-overflow: ellipsis;\r\n  display: block;\r\n  /* autoprefixer: off */\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: $numLines;\r\n  -webkit-box-orient: vertical;\r\n  max-height: $numLines * $lineHeight + unquote('rem');\r\n}\r\n```\r\n\r\nscss/utilities/_line-clamp.scss\r\n\r\n```scss\r\n@each $breakpoint in map-keys($grid-breakpoints) {\r\n  @include media-breakpoint-up($breakpoint) {\r\n    $infix: breakpoint-infix($breakpoint, $grid-breakpoints);\r\n\r\n    @each $size, $length in $spacers {\r\n      .line-clamp#{$infix}-#{$size}  {\r\n        @include line-clamp($size);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n"},{"labels":[null,null,"enhancement",null],"text":"I just want to suggest something i think is helpful, for the examples on bootstrap 4 documentations we need a mobile phone or tablette toggle button to see what will be the example on mobile, now is there just html comment that say the box is 100% width on desktop but on mobile is 50% width, when i want to see what will be happen i resize the browser window but the example i want scroll to top or bottom and i just scroll down to find that example, \r\nWould you please add toggle mobile button side by side every exemple?\r\nThank you (edited)"},{"labels":["enhancement",null,null],"text":"In bootstrap 3 (and v4 beta), if a user wants to change the icon of a \"[Collapse](https://v4-alpha.getbootstrap.com/components/collapse/#content)\" element, like on a button, accordion, panel or similar, they have to add their own custom CSS and JS to do this.\r\n\r\nCan we include this by default in BS4 JS so it can be easily toggled via data attributes - something similar to the following JSFiddle.\r\n\r\nJSFiddle: https://jsfiddle.net/8fyrrh7p/\r\n_Note: Watch the font awesome caret icon change on click._\r\n\r\nThe HTML span element would have the `icon-in` and `icon-out` attributes, we can toggle them with JS automatically if a user has provided them. This way, a user can use any icon library and simply provide the icon class name and we can toggle it on their behalf (with no additional CSS or JS to be provided by the user).\r\n\r\nThere are a number of questions on SO regarding this (search \"bootstrap 3 collapse icon change\")  - which all require adding custom CSS and/or JS, it would be nice to have this handled out the box with BS4, it could be used in any situation where you want to collapse something with an icon.\r\n\r\n- https://bootsnipp.com/snippets/3kB4m\r\n- https://stackoverflow.com/questions/19024218/bs3-collapse-change-chevron-icon-on-click/\r\n- https://stackoverflow.com/questions/18147338/bs3-icon-change-on-collapse\r\n- https://stackoverflow.com/questions/18325779/bs3-collapse-show-state-with-chevron-icon\r\n\r\nExample:\r\n\r\n**HTML** - Add the `data-icon-in` and `data-icon-out` attributes to toggle the icon.\r\n```html\r\n<a class=\"btn btn-primary\" data-toggle=\"collapse\" href=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n    Link with caret icon\r\n    <span class=\"fa fa-caret-down fa-fw\" \r\n               data-icon-in=\"fa-caret-down\" \r\n               data-icon-out=\"fa-caret-up\"\r\n     ></span>\r\n</a>\r\n\r\n<div class=\"collapse\" id=\"collapseExample\">\r\n    Content to collapse.\r\n</div>\r\n\r\n```\r\n\r\n**JS** - Toggle the icon on click (or better - via the BS4 events `shown.bs.collapse` & `hidden.bs.collapse`).\r\n```javascript\r\n// Find the icon with attributes, if so, toggle it with the icons specified by the user.\r\n$('[data-toggle=\"collapse\"]').on('click', function () {\r\n    var iconElement = $(this).find(\"[data-icon-in]\")\r\n    var iconIn = iconElement.attr('data-icon-in')\r\n    var iconOut = iconElement.attr('data-icon-out')\r\n\r\n    if (iconElement.hasClass(iconIn)) {\r\n    \ticonElement.removeClass(iconIn).addClass(iconOut)\r\n    } else {\r\n        iconElement.removeClass(iconOut).addClass(iconIn)\r\n    }\r\n})\r\n```\r\n\r\n**Note** - Can we rotate/animate the icon instead of switching it? perhaps via: `data-icon-animate`\r\n\r\nI'd find this really useful, hopefully so will many others.\r\n\r\nDiscuss, add or close ticket. Thanks!"},{"labels":[null,"enhancement",null],"text":"I think would be good to add horizontal cards."},{"labels":[null,"enhancement",null,null],"text":"It would nice to quickly add shadows to components, please add this feature into utilities"},{"labels":[null,"enhancement",null,null,null],"text":"Loving the new popper.js but was wondering if there was a way to disable the custom styles it auto adds to elements?\r\n\r\nIts adding the following:\r\n```\r\n    position: absolute;\r\n    transform: translate3d(0px, 0px, 0px);\r\n    top: 0px;\r\n    left: 0px;\r\n    will-change: transform;\r\n```\r\n\r\nThis in turn overrides some custom animations I am trying to implement, it also messes up alignment if I wanted to put dropddowns in a container. The plugin is great but there must be a way to disable this custom \"hardcode\" style feature?"},{"labels":[null,"enhancement",null],"text":"When visiting a site using a mobile device with a **navbar with .fixed-top**, if the opened navbar-collapse area runs beyond the end on the viewport vertically (due to lots of links etc), you cannot scroll down the the links at the bottom of the navbar as you can in Bootstrap 3.\r\n\r\nWhen you do try to scroll, the body behind the navbar scrolls, with the navbar fixed in place.\r\n\r\nThis can be fixed by setting `overflow-y: auto;` and adding a `max-height:Xpx` to the `.collapse.show` class and allows you to scroll the navbar-collapse area.\r\n\r\nThis happens in (the ones I tested) major browsers (Safari, Chrome, both on the latest updates). I haven't yet tried whether this fix breaks anything elsewhere."},{"labels":[null,"enhancement",null],"text":"Hey,\r\n\r\nI have small idea - Responsive Borders.\r\nThis feature can help some developers.\r\nPreview - [http://fiddle.jshell.net/pqonupeo/11/show/light/](http://fiddle.jshell.net/pqonupeo/11/show/light/)\r\nCode - [https://jsfiddle.net/pqonupeo/11/](https://jsfiddle.net/pqonupeo/11/)\r\n\r\nThanks\r\nMichael"},{"labels":[null,"enhancement",null],"text":"When using `text-danger` (or any others) with `btn-link`, hover and focus states don't affect the color because of `!important` on `text-danger`.\r\n\r\nhttps://jsfiddle.net/oo7xy2bL/1/\r\n\r\nIs this up for consideration for v4, or is the extra CSS not worth it?  I'm trying to break away from misusing anchors and desperately want consistent focus/hover effects.  I know icons were taken out, but this also helps with making clickable icons that still adhere to the palette.\r\n\r\nRelated v3 issue: https://github.com/twbs/bootstrap/issues/15940"},{"labels":[null,"enhancement",null],"text":"Please add flex-x class to bootstrap 4, x is a variable:\r\n```sass\r\n.flex-#{$x} {\r\n    flex: #{$x};\r\n}\r\n```\r\n![](http://ninamind.com/flex-x.png)"},{"labels":[null,"enhancement",null],"text":"I saw a bug was rejected regarding implementing an indeterminate state for the progress bar (https://github.com/twbs/bootstrap/issues/22599). But I was thinking about a little hack for which it seems that it would cost almost nothing to implement and could enable a pretty good indeterminate-like state.\r\n\r\nFirst, the problem that I have is that when you trigger an action in my GUI, it takes some time before the progress bar moves from 0%. So I'd like to show some animation in that time, to let the user know that the action was indeed triggered. Once the progress is strictly over 0%, then I would go back a more normal look. And my idea to give this feedback of indeterminate state is with the following CSS style:\r\n\r\n    progress-bar progress-bar-striped progress-bar-animated bg-faded\r\n\r\nSo, width 100%, faded+animated. With the gray style and full-width progress bar, I would be a pretty good indeterminate state, I think.\r\n\r\nObviously the issue for me is that bg-faded doesn't exist for the progress bar :-)\r\nSo the question is, do you think it would make sense to add it for that purpose, or you see it as a hack and don't want to add it?\r\n\r\n*EDIT:* aha I think I can achieve that myself by overriding the `background-color` to lightgray or something of the sort. Well, maybe this could still be already out of the box in bootstrap.."},{"labels":[null,"enhancement",null],"text":"Since bootstrap 4 is targeting mobile, Fab button should be the first component to be included. Angular Material has so many examples showing the utility of Fab button:  https://material.angular.io/components/button/examples"},{"labels":[null,"enhancement",null,null,null],"text":"Currently there is no font-resizing implemented in Bootstrap. Font resizing is needed to make large texts readable on all devices and to prevent longer words and [compounds](https://en.wikipedia.org/wiki/Compound_(linguistics)) to fall off screen. \r\n\r\nIt's currently possible to alter the font size of the html element with media queries (see [Responsive typography](https://getbootstrap.com/docs/4.1/content/typography/#responsive-typography)), but this method can cause the font-size of text to be too small on mobile devices and because the rem-value is overridden, users can't change their font-size in their browser anymore.\r\n\r\n[RFS](https://github.com/twbs/rfs) can solve this by because this mixin automatically calculates the appropriate font-size based on the width of the device. \r\n\r\nRFS is also available in Sass, Less, PostCSS and Stylus.\r\n\r\n**Example problem with bigger font-sizes:** \r\nhttp://getbootstrap.com/docs/4.1/content/typography/#display-headings\r\n\r\n**RFS solution:**\r\nhttps://project-rfs.github.io/docs/4.1/content/typography/#display-headings\r\n\r\n**Bootstrap implementation demo:** \r\nhttps://project-rfs.github.io/\r\n\r\n**Github page:** \r\nhttps://github.com/twbs/rfs\r\n\r\n**Pull request**\r\nhttps://github.com/twbs/bootstrap/pull/23816\r\n"},{"labels":[null,"enhancement",null,null],"text":"Currently the dynamic javascript enabled tab navs http://v4-alpha.getbootstrap.com/components/navs/#javascript-behavior allow for the use of a dropdown.\r\n\r\nThis particular use is fairly non-standard, and from an accessibility point of view this impedes adopting a \"proper\" tabbed interface pattern with correct `role=\"...\"` etc https://www.w3.org/TR/wai-aria-practices-1.1/#tabpanel as that pattern does not foresee anything other than straight \"tab\" triggers.\r\n\r\nAs such, I'd like to get opinion from implementers about whether or not they find the current tab with dropdowns useful, or if dropdowns can be removed (which would then allow a proper ARIA tab implementation)."},{"labels":[null,"enhancement",null],"text":"Could be rad to see something like https://github.com/siddharthkp/bundlesize in our CI status. It's easy for compiled code to get outta hand with small changes. Could help with that."},{"labels":["enhancement",null,null],"text":"Replacement issue for #17759 and #19921. Would be rad to tackle this for a v4.1 or v4.2 release.\r\n\r\nAlso includes dropdowns now: #21510.\r\n\r\n- [ ] Tooltips\r\n- [ ] Popovers\r\n- [ ] Dropdown\r\n\r\n/cc @Johann-S "},{"labels":[null,"enhancement",null],"text":"With #22940 I unshipped the Sass map and code used to loop over those values. It generated the wrong code and isn't the approach I'd like to use moving forward. Looking at `.no-gutters`, I think this is the method I'd like to use—modifier classes on the row that can be customized by breakpoint."},{"labels":[null,"enhancement"],"text":"With many/most components in Bootstrap there is an inverse variant that flips the background & foreground contrast. However, the `<code>` element does not have one. The `<code>` element is always presented with a white background and red text, regardless of the parent element having a light or dark background. On a dark background, it is a bit of an eye sore, in my opinion. Example:\r\n```html\r\n<div class=\"card card-inverse card-success\">\r\n    <div class=\"card-block\">\r\n        <p class=\"card-text\">\r\n            This is an example using <code>.card-success</code>.\r\n        </p>\r\n    </div>\r\n</div>\r\n```\r\n\r\nI am proposing that an inverse variant be created for `<code>`, perhaps `.code-inverse`? There are numerous ways this can be accomplished, but here is what I came up with that, in my opinion, works well against darker (but not close to black) backgrounds:\r\n```sass\r\ncode.code-inverse {\r\n    background-color: rgba($black, 0.1);\r\n    color: rgba($white, 0.99);\r\n}\r\n```\r\nI used the `rgba()` SASS function to generate the RGBA values so that if the browser is old enough to not support alpha, it will just ignore the color properties and look the same as it does now. I played around with the alpha of the black background color and found 0.1 to be my preferred sweet spot that roughly equals the difference in alpha that `<code>` currently has on a light background.\r\n\r\nSomething similar could also be done for the `kbd` element for when the background color approaches black."},{"labels":["enhancement",null,null],"text":"**Feature Request:** *Add support for closing dropdowns through the JavaScript API*\r\n\r\nThere is one JS method for dropdowns:\r\n\r\n```javascript\r\n$().dropdown('toggle')  // Toggles the dropdown menu of a given navbar or tabbed navigation.\r\n```\r\ndocs:  https://v4-alpha.getbootstrap.com/components/dropdowns/#methods\r\n\r\nThough the alert component is not exactly a parallel, I think this would provide some consistency to the API, which provides a way to close alerts:\r\n\r\n```javascript\r\n$().alert('close')  // Closes an alert by removing it from the DOM. If the .fade and .show classes are present on the element, the alert will fade out before it is removed.\r\n```\r\ndocs: https://v4-alpha.getbootstrap.com/components/alerts/#methods\r\n\r\nFurther, modals provide a similar close ('hide') feature.\r\n\r\ndocs: http://v4-alpha.getbootstrap.com/components/modal/#methods\r\n"},{"labels":["enhancement",null,null],"text":"Hello, \r\n\r\ncould we add browserify support to package.json? It would allow easy import of single bootstrap files.\r\n\r\n`\"browserify\": {\r\n    \"transform\": [\r\n      [\r\n        \"babelify\",\r\n        {\r\n          \"presets\": [\r\n            \"es2015\"\r\n          ]\r\n        }\r\n      ]\r\n    ]\r\n  }`\r\n"},{"labels":["enhancement",null],"text":"As Joomla will use BS4 for the next major version it would be good to know how you intend to handle the mr-auto and ml-auto classes in RTL? Knowing would help avoid any B/C breaks for when Bootstrap introduces RTL support.\r\n\r\n"},{"labels":[null,"enhancement",null,null],"text":"#22395 is removing the icons for now (to limit scope), so we'll need to restore those in a later release. We'll need to tackle some other issues, so I'm consolidating and referencing all of those here. Hoping to get to it in Beta 2, but it might wait to a patch or minor bump.\r\n\r\n- [ ] #22670: Icon should be positioned from the top for textareas\r\n- [ ] #22696: Sometimes icons don't appear in inputs in modals in Edge\r\n- [ ] #19852: Custom selects mess up icon size due to custom background-image for the caret\r\n\r\n"},{"labels":["enhancement",null,null],"text":"The target option in scrollspy can be used for selecting a navigation element - \r\nbut the selector for the anchor element (`<a>[...]</a>`) is always appended to it:\r\n```js\r\n[...]\r\n    this.selector       = (this.options.target || '') + ' .nav li > a'\r\n[...]\r\n````\r\nBecause I really like to use the data attribute approach for initialization, \r\nit would be great if the anchor-element selector can be customized, too, using data attributes."},{"labels":[null,"enhancement",null],"text":"It would be nice to have styles for a sidenav, maby also with dropdown/accordion functionality for submenus. Also a full height style (if sidenav is shorter than the content). And a responsive support to open/close the sidenav"},{"labels":[null,"enhancement",null,null],"text":"Hello \r\nWould be interesting include some CSS to format table without borders (borderless)\r\n\r\n```css\r\n.table-borderless > tbody > tr > td,\r\n.table-borderless > tbody > tr > th,\r\n.table-borderless > tfoot > tr > td,\r\n.table-borderless > tfoot > tr > th,\r\n.table-borderless > thead > tr > td,\r\n.table-borderless > thead > tr > th {\r\n    border: none;\r\n}\r\n```\r\n\r\nBest regards\r\nWanderlei"},{"labels":[null,"enhancement",null],"text":"Righteo,\r\n\r\nQuite often when i'm working with Bootstrap, i'll usually always change the alert component. Either i'll give it an opaque background or completely change it to the type in the Bootstrap 3 docs (white panel with left border).\r\n\r\nJust a thought and definitely not urgent / necessary, but what about either adding a variant for this or completely replace the old alerts with something like this?\r\n\r\n[See on Pastebin](https://jsbin.com/muvicigayo/edit?html,output)"},{"labels":[null,"enhancement",null],"text":"Any chance to have progress-bar indeterminate like Material?\r\n\r\nhttps://material.io/guidelines/components/progress-activity.html"},{"labels":[null,"enhancement",null],"text":"As per #22283, `<select>` inside input groups generally work, except for the vertical alignment in Chrome/macOS (possibly also other browsers), which is caused by `display: flex` applied to the select element.\r\n\r\nIMHO this should be supported in BS4 just like it was in BS3.\r\n\r\nDemo (Bootstrap 4): https://plnkr.co/edit/VzaynmMMWmahVQVjviO7?p=preview\r\nDemo (Bootstrap 3): https://plnkr.co/edit/zV3Y4AKDNXaB4iCDfNiS?p=preview"},{"labels":["enhancement",null],"text":"Meta-issue to explore the use of `:focus-ring` https://github.com/WICG/focus-ring for situations that currently aren't all that great (with things keeping a visible focused style after being clicked with the mouse), including:\r\n- dropdown triggers\r\n- buttons and their related variants\r\n- carousel controls\r\n\r\nWould be great to get this added before V4 final, by which time there should be good support in latest browser versions (and to add polyfill for older versions)"},{"labels":[null,"enhancement",null],"text":"I think this is more of a feature request, to be able to style svg icons.\r\n\r\nWhat I have now:\r\n\r\nI have a class `svg-icon`, for icons that are inside text and buttons, and that will scale according to the text size etc..... This is really great to use icons inside text. The only problem is the color of these icons. Now I need to copy/paste the bootstrap scss, and change color to my svg-icon-color mixin, so that svg icons have the same color.\r\n\r\nWhat I want to see:\r\n\r\nThe addition of an `svg-icon` class, and everywhere color is used, svg icons should get that color too."},{"labels":[null,"enhancement",null],"text":"It would be good to still have these for `orientation` media queries. \r\nIf you guys think it's a good idea, i'll make a PR.\r\n\r\n```\r\n@media (min-width: $grid-breakpoint-sm) and (orientation: landscape), (min-width: $grid-breakpoint-lg) {\r\n  rules: here;\r\n}\r\n```\r\n\r\nI don't believe you can generate a group of similarly named variables recursively in SASS from the $grid-breakpoints map, but this function accomplishes the same thing:\r\n\r\n```\r\n@function breakpoint($size) {\r\n  @if map-has-key($grid-breakpoints, $size) {\r\n    @return map-get($grid-breakpoints, $size);\r\n  }\r\n\r\n  @warn \"Unknown `#{$size}` in $grid-breakpoints.\";\r\n  @return null;\r\n}\r\n```\r\n\r\nthen: \r\n\r\n`  @media (min-width: breakpoint(sm)) and (orientation: landscape), (min-width: breakpoint(lg)) {`\r\n"},{"labels":["enhancement",null,null,null],"text":"Similar to #16124, but for modals.\r\n\r\nBecause `shown.bs.modal` is triggered after the transition ends, any transformation to the HTML in the modal happens after the modal has been displayed. This creates a jarring visual effect, if say, you want to add something like [selectize.js](http://selectize.github.io/selectize.js/) to a form in the modal.\r\n\r\nHaving an event that is triggered after the modal has been inserted in the DOM but before the transition begins would provide a hook that can be used to apply any transformation or event bindings, making it also useful for data binding or templating libraries as well.\r\n\r\nExample implementation in [modal.js](https://github.com/twbs/bootstrap/blob/v3-dev/js/modal.js#L95-L97):\r\n```js\r\n       that.enforceFocus()\r\n  \r\n +      that.$element.trigger($.Event('inserted.bs.modal', { relatedTarget: _relatedTarget }))\r\n +\r\n        var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\r\n```\r\n"},{"labels":[null,"enhancement"],"text":"If you want to keep columns on print this is a good idea\r\n\r\n@media print {\r\n  .make-grid(print);\r\n}\r\n\r\n.make-print-column(@columns) {\r\n    @media print {\r\n        float: left;\r\n        width: percentage((@columns / @grid-columns));\r\n    }\r\n}"},{"labels":[null,"enhancement",null],"text":"I'd like to specify the number of columns which a .card-columns class has by using a class, e.g.\r\ncard-columns-{2,3,4}.\r\n\r\nThis would give the user the opportunity to specify the layout even further. The css would be something like this for the correspoding classes.\r\n\r\n    .card-columns-2 {\r\n        -webkit-column-count: 2;\r\n        -moz-column-count: 2;\r\n        column-count: 2;\r\n    }\r\n\r\nMaybe even with the sm, md, lg, xl prefix: card-columns-{sm,md,lg,xl}-{2,3,4}, so you could resolve the issue, that card decks for example aren't responsive currently, but this would lead to responsiveness. I'm currently using the sm prefix for my project to distinct between one and two columns. Works like a charm :)"},{"labels":[null,"enhancement",null],"text":"I often see sites that use a color palette and its various tints/shades throughout the design to create a visual hierarchy. What if we could define a few base color variables that are then extended into various color classes similar to how display heading classes work.\r\n\r\n.bg-primary = base color\r\n.bg-primary-1 = lightest tint\r\n.bg-primary-2 = lighter tint\r\n.bg-primary-3 = increase saturation\r\n.bg-primary-4 = shade\r\n\r\n![colors](https://cdn-images-1.medium.com/max/800/1*VfncQaKuCPAhnfRk5iKDyQ.png)\r\n\r\nArticle referenced - https://medium.freecodecamp.com/how-to-construct-a-design-system-864adbf2a117"},{"labels":[null,"enhancement",null],"text":"I really like these larger, thinner headings that are provided:\r\n\r\n```html\r\n<h1 class=\"display-1\">Display 1</h1>\r\n<h1 class=\"display-2\">Display 2</h1>\r\n<h1 class=\"display-3\">Display 3</h1>\r\n<h1 class=\"display-4\">Display 4</h1>\r\n```\r\nAs shown here: https://v4-alpha.getbootstrap.com/content/typography/#display-headings\r\n\r\nBut I've find that on smaller screens, these are almost always way too large. Could you consider adding responsive breakpoints like so:\r\n\r\n```html\r\n<h1 class=\"display-l-1\">Display 1</h1>\r\n<h1 class=\"display-l-2\">Display 2</h1>\r\n<h1 class=\"display-md-3\">Display 3</h1>\r\n<h1 class=\"display-md-4\">Display 4</h1>\r\n```\r\n\r\nso that the text can return to the standard h1 h2 etc font style on smaller screens?\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"The following screenshots show the situation: .btn-group-vertical is OK on large display, KO on smaller display; .btn-group is OK on small display, KO on larger display.\r\n\r\nThere may be a CSS way to make .btn-group display differently whether it's in a large or small col-\r\n\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 17\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503059/4de9777a-ff3a-11e6-87a7-6bcac0c4a844.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 25\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503056/4de6b486-ff3a-11e6-877b-e8428e163598.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 46\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503058/4de7e978-ff3a-11e6-9a90-2f42b574d644.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 17 56\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503057/4de77dd0-ff3a-11e6-9cd2-926bccd3f613.png\">\r\n\r\n\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"Apologies if this was already brought up but I didn't find any mention of it. I've come across use cases where you might want to make a div `overflow: hidden` for improved design. I would like to propose a new class (or set of classes) relating to controlling the overflow CSS property. Perhaps something like `.overflow-{visible|hidden|scroll|auto}`. These classes do not have to be responsive."},{"labels":[null,"enhancement",null],"text":"I was wondering since bootstrap has been built with \"mobile first\" in mind, why there is no slider and toggle (which are key components in the mobile world)!\r\n\r\nShouldn't be new features to add to the new v4?\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"The burger menu is becoming more popular and just used by default on many website, it would be good if we can have a class that will take all of our nav elements and just display the burger, either on the left of on the right. \r\n\r\nSome website with that burger style:\r\nhttp://demos.creative-tim.com/rubik-agency\r\nhttps://ewebdesign.com/\r\nhttp://brianhoffdesign.com/#/\r\n"},{"labels":[null,"enhancement",null,null],"text":"The current bootstrap v4 beta 6 comes with a new custom-select class, but it appears broken when the \"multiple\" attribute is also defined.\r\n\r\nFor example:\r\n```<select multiple class=\"form-control\" id=\"exampleSelect2\">```\r\n\r\nchanges into\r\n```<select multiple class=\"custom-select\" id=\"exampleSelect2\">```\r\n\r\nMaybe the documentation could mention that multiple is not supported, or if it is not too much work, to implement custom-select a bit better for displaying on a multiple select.\r\n\r\nThank you.\r\n"},{"labels":[null,"enhancement",null],"text":"extend the round borders for switch the media breakpoints\r\n\r\n\r\n\r\n\r\n```\r\n//\r\n// Border\r\n//\r\n\r\n.border-0        { border: 0 !important; }\r\n.border-top-0    { border-top: 0 !important; }\r\n.border-right-0  { border-right: 0 !important; }\r\n.border-bottom-0 { border-bottom: 0 !important; }\r\n.border-left-0   { border-left: 0 !important; }\r\n\r\n//\r\n// Border-radius\r\n//\r\n\r\n@each $breakpoint in map-keys($grid-breakpoints) {\r\n  @include media-breakpoint-up($breakpoint) {\r\n    $infix: breakpoint-infix($breakpoint, $grid-breakpoints);\r\n \r\n\t.rounded#{$infix}        { @include border-radius($border-radius); }\r\n\t.rounded#{$infix}-top    { @include border-top-radius($border-radius); @include border-bottom-radius(0); }\r\n\t.rounded#{$infix}-right  { @include border-right-radius($border-radius); @include border-left-radius(0); }\r\n\t.rounded#{$infix}-bottom { @include border-bottom-radius($border-radius); @include border-top-radius(0); }\r\n\t.rounded#{$infix}-left   { @include border-left-radius($border-radius); @include border-right-radius(0); }\r\n\t.rounded#{$infix}-circle { border-radius: 50%; }\r\n\t.rounded#{$infix}-0 {  border-radius: 0;\t}\r\n\r\n  }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n"},{"labels":["enhancement",null,null],"text":"request to expose an event like index change event from Carousel component"},{"labels":[null,"enhancement",null,null],"text":"I think there could be an utility class like `f-grow-1` that would correspond to CSS rule `flex-grow: 1`. (possibly also `f-grow-2`, `f-grow-3`, etc.)\r\n\r\nI've been really enjoying working with the Bootstrap 4 [flexbox utility classes](https://v4-alpha.getbootstrap.com/utilities/flexbox/), but I feel this one is still missing and could be very useful for a lot of people to do stuff like this:\r\n\r\nhttps://stackoverflow.com/questions/29467660/flexbox-row-how-to-stretch-children-to-fill-cross-axis\r\n\r\nIf it's a stupid idea, please let me know why."},{"labels":[null,"enhancement",null],"text":"Currently, the **_Sizing_ utility** (https://getbootstrap.com/docs/4.1/utilities/sizing/) only allows for the sizing of the height or width of an element **without regard to the viewport size**.\r\n\r\nSo for instance the \"w-50\" class makes a lot of sense on a large device in order to limit the width of, for instance, a help text, but not so much on a small device. \r\n\r\nThis could be resolved by adding **breakpoints** to the utility in the same way as it is done for the _Spacing_ utility:\r\n- w-lg-25 (_width: 25%_ only on large+ devices)\r\n- w-md-50 (_width: 50%_ only on large+ devices)\r\n- w-sm-75 (...)\r\n- w-100 (would be like _w-xs-100_)\r\n\r\nThis enhancement would not change existing usage, but would allow more flexibility for various device sizes.\r\n\r\n### Summary: Add support for the following classes:\r\nw-sm-100, w-sm-75, w-sm-50 and w-sm-25\r\nw-md-100, w-md-75, w-md-50 and w-md-25\r\nw-lg-100, w-lg-75, w-lg-50 and w-lg-25\r\nw-xl-100, w-xl-75, w-xl-50 and w-xl-25\r\nh-sm-100, h-sm-75, h-sm-50 and h-sm-25\r\nh-md-100, h-md-75, h-md-50 and h-md-25\r\nh-lg-100, h-lg-75, h-lg-50 and h-lg-25\r\nh-xl-100, h-xl-75, h-xl-50 and h-xl-25\r\n"},{"labels":[null,"enhancement",null],"text":"https://github.com/hamad-almamari/bootstrap/pull/1/commits/b19ee58caf91c8b832e21b115689d8dc8f946f3f\r\n\r\nHello what about add negative margin spacing, I thing it is very usefull."},{"labels":["enhancement",null,null],"text":"For default is impossible set data-toggle for tooltips (on hover) and data-toggle for modal/popover/tab/dropdown (on click) events on one DOM element\r\nTo separate events \"on hover\" and \"on click\" i offer change default \"data-toggle\" attribute on \"data-toggle-hover\" and \"data-toggle-click\"\r\nIt will be obviously"},{"labels":[null,"enhancement",null],"text":"I've tried to find a issue where a discussion was why the btn-xs was removed from Bootstrap? Its was very helpfull in Bootstrap 3 for mee in many many cases.\r\n\r\nCondensed Tables with buttons so the text fits to the right hight, .....\r\n\r\nwould be cool if the user could decide what to use and not only to remove the Items you think the user should not use any more. Because bootstrap is used from so many ppl out there there are many pages which need the -xs "},{"labels":[null,"enhancement",null],"text":"we can add prefix for container like\r\n\r\ncontainer-lg , container-md, container-xl\r\n\r\nwhen screen get small the container will be fluid container. it just idea \r\n\r\nbecause sometimes we need the margins  just for big screen ."},{"labels":[null,"enhancement"],"text":"`<input type=\"file\" />` has always been very hard to style.\r\nI've seen that there is a `.custom-file` but this shows the filepath.\r\nhttps://v4-alpha.getbootstrap.com/components/forms/#file-browser\r\n\r\nWhat if you want the same look and feel as a button?\r\n\r\nMy proposal is to be able to style a file input as a btn.\r\n\r\nWhat do you guys think?\r\n\r\n**Proof of concept**\r\nCheck out this plunkr\r\nhttps://plnkr.co/edit/feW4kk?p=preview\r\n\r\nI've tested the button with successful results in:\r\nChrome 55\r\nSafari 10\r\nFirefox 49\r\nIE Edge\r\nIE 11\r\nIE 10\r\n\r\nThe code if you don't want to look at the plunkr\r\n```html\r\n<div class=\"btn btn-default btn-file\">\r\n  <input type=\"file\" />\r\n  Upload a file\r\n</div>\r\n```\r\n```css\r\n.btn-file {\r\n  position: relative;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-file input {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  max-width: 100%;\r\n  min-height: 100%;\r\n  margin: 0;\r\n  opacity: 0;\r\n  transform: translate(-100%, 0) scale(3);\r\n  direction: ltr;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Hack for forcing webkit to show a cursor all the time */\r\n.btn-file input::-webkit-file-upload-button {\r\n  cursor: pointer;\r\n}\r\n```"},{"labels":[null,"enhancement",null],"text":"Creating off page navigation and off page panels has required me to use negative positioning. \r\n\r\nLooks like these mixins spit out classes (only?) to enable me to use `@extend .push-md-2` for example. \r\n\r\n```\r\n@mixin make-col-offset($size, $columns: $grid-columns) {\r\n  margin-left: percentage($size / $columns);\r\n}\r\n\r\n@mixin make-col-push($size, $columns: $grid-columns) {\r\n  left: if($size > 0, percentage($size / $columns), auto);\r\n}\r\n\r\n@mixin make-col-pull($size, $columns: $grid-columns) {\r\n  right: if($size > 0, percentage($size / $columns), auto);\r\n}\r\n```\r\nI can use `@include make-col-push(2)` directly, but I'd like to specify here `@include make-col-push(sm, 2)` but that doesn't work. [Feature request for that]\r\n\r\nContinuing on, I want to be able to use negative positioning, so in the same vein use `@include make-col-push(sm, -2)` (minus symbol), but the mixin looks at only calculating the position if it's greater than 0, otherwise making it default to 'auto'.\r\n\r\nNow, I am able to do this using the `make-col-offset` mixin and multiplying by a negative `grid-columns` number gives me the abilty to minus things by 12/17/Whatever/48/etc columns. Mucho useful. For example:\r\n\r\n```\r\n.off-canvas {\r\n  @include make-col-offset(-3);\r\n}\r\n```\r\nOutputs:\r\n```\r\n.off-canvas {\r\n  margin-left: -25%;\r\n}\r\n```\r\n\r\nNow, the only drawback to this again is when designing for responsive views that have different column widths at different viewport sizes, so going back to that $size parameter. It would be great to be able to do the following:\r\n```\r\n.off-canvas {\r\n  @include make-col-offset(sm, -3);\r\n  @include make-col-offset(md, -4);\r\n  @include make-col-offset(lg, -5);\r\n}\r\n```\r\n\r\nRight now, I'm doing the following as a workaround:\r\n```\r\n    @include media-breakpoint-up(xs) {\r\n      &.secondary {\r\n        @include make-col-offset(-8);\r\n      }\r\n    }\r\n    @include media-breakpoint-up(sm) {\r\n      &.secondary {\r\n        @include make-col-offset(-4);\r\n      }\r\n    }\r\n    @include media-breakpoint-up(md) {\r\n      &.secondary {\r\n        @include make-col-offset(-3);\r\n      }\r\n    }\r\n```\r\n\r\nThoughts welcomed,\r\nD"},{"labels":[null,"enhancement",null,null],"text":"A nice ability would be to add plain text in a dropdown menu instead of only `<a>` and `<button>` elements. Currently this can be more or less done with `a.disabled`, but being able to use a `<p>` or `<span>` element would be nice, and would also remove having the disabled cursor. Behavior could be like `.navbar-text` is to a navbar.\r\n\r\nExample usage, short username on navbar and full username on menu to save valuable navbar space:\r\n![capture](https://cloud.githubusercontent.com/assets/2054816/22070679/dc7fde58-dd6a-11e6-92bb-3af2301a3eb7.PNG)\r\n"},{"labels":[null,"enhancement",null,null],"text":"Couldn't find any similar component currently in BS4.\r\n\r\nNotifications (\"toasters\") are very common part of modern UI which can be used to send small notifications to a user (confirm action, new message received, action with confirmation, etc)\r\n\r\nI have own Notify component based on BS4 Alert styles.\r\n\r\nWhat is your opinion on adding a new component or extending Alert with classes like `alert-fixed-top-right`?"},{"labels":[null,"enhancement",null],"text":"**Footers** are commonly used for more elaborate navigation, copyright information, maps, and more. An example of an awesome footer is available on the [**official Google Developers website**](https://developers.google.com/):\r\n\r\n![](http://i.imgur.com/YY7KJsS.png)\r\n\r\nConsidering the substantial amount of pages on this site, the footer navigation is super helpful for users who have not previously visited. It is also a refreshing alternative to the `navbar` we see all over the web now (and typically associate with Bootstrap).\r\n\r\nThat said, I think we should consider giving the `<footer>` element a little attention, especially with the V4 release coming up. Some key ideas:\r\n\r\n1. `footer.footer-bottom`, which would push the footer element and its content to the bottom of the page. Currently, the only bottom-positioned element is a `.navbar` with the `.fixed-bottom` class. However, this utilizes fixed positioning and isn't really ideal (especially with large footer navs such as the one on the Google Developer website). Example usage `<footer class=\"footer-bottom\">Copyright 2017 Bootstrap</footer>`\r\n2. `footer ul.footer-nav`, or even more abstractly, something like `.nav-vertical` which could display navigation elements like an non-styled list with a little extra padding. The headers (`li.nav-vertical-header`) could have a heavier font.\r\n\r\nI may expand on this later, but I'd be interested in seeing what others think."},{"labels":[null,"enhancement",null],"text":"_This change suggestion is purely for developers or site maker who don't write CSS much and don't change the Bootstrap style on their site, we'd like to make it look as good as possible when we come across the \"default bootstrap site\"._\r\n\r\nI think the search field would look much better if it's dark gray background instead of white on inverse navbar. Not as strict HEX, but as low opacity white via SASS/SCSS, just in case background CSS is changed to dark gray instead of black. Perhaps we could make it outline, like one with outline button. \r\n\r\nBeside making it look better, would we run into any issues?\r\n\r\n---\r\n\r\nInverse navbar (black background) navbar image for reference:\r\n![image](https://cloud.githubusercontent.com/assets/3248782/21737545/d9af9a28-d447-11e6-8856-1f4bbe3a4d0c.png)\r\nImage source: http://blog.getbootstrap.com/2017/01/06/bootstrap-4-alpha-6/"},{"labels":["enhancement"],"text":"It's somewhat of an \"issue\" to me that the Navbar doesn't support slide in effects for extra small screens. When I click the nav toggler button, instead of it expanding downward, I would like to see a full height menu slide from the left to the right, perhaps taking up 80% of the screen. I use this effect in all of my projects and constantly have to code this in on top of Bootstrap, but I thought it would be neat if this were baked into it instead.\r\nExample: http://bootsnipp.com/snippets/featured/navbar-lateral-slide-menu\r\n\r\nWould be cool if there was support to slide in from all directions, the height and width of the slide in, etc."},{"labels":[null,"enhancement",null],"text":"This is what I posted below is very often seen in the case of UI Dashboards.\r\n\r\nSo my question:\r\n- Can we add \"Pills\" in the navbar?\r\n- ~~Can we add „Tabs\" to navbar?~~ _- found in „Scrollspy\" section_ ( http://v4-alpha.getbootstrap.com/components/scrollspy/ )\r\n\r\nWhat do you think?\r\n![zrzut ekranu 2017-01-03 17 13 57](https://cloud.githubusercontent.com/assets/2330394/21614105/71e312a6-d1d8-11e6-9bd3-52577d84a385.png)\r\n"},{"labels":[null,"enhancement",null],"text":"I wonder, why has no connection `btn-block` with `dropdown`. \r\nI wanted such a solution several times used **as a substitute for select**.\r\n\r\nSo I would **have three options** for the dropdown:\r\n![btn-block-with-dropdown](https://cloud.githubusercontent.com/assets/2330394/21587068/73646b9e-d0d8-11e6-8425-99bdcfadc128.png)\r\n\r\n\r\n\r\n\r\n"},{"labels":["enhancement",null],"text":"This could be super useful for things like navbars\r\nhttp://codepen.io/IamManchanda/pen/VPZMba\r\n\r\n**Simple** \"smooth-scroll\" class on anchor tags \r\n\r\nHere is the simple javascript ( jquery ) code\r\n\r\n```\r\n$('a.smooth-scroll[href*=\"#\"]:not([href=\"#\"])').click(function() {\r\n  if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\r\n    var target = $(this.hash);\r\n    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\r\n    if (target.length) {\r\n      $('html, body').animate({\r\n        scrollTop: target.offset().top\r\n      }, 1000);\r\n      return false;\r\n    }\r\n  }\r\n}); \r\n```\r\n\r\nSource: CSS Tricks \r\n\r\n**Update** : I am not looking for any plugin, only **simple** basic smooth scroll for basic landing page functionality specifically for navbars and **simple** anchor tags which will help to scroll the page smoothly."},{"labels":[null,"enhancement",null],"text":"Dear , @mdo & team <3\r\n\r\nJust wanna know are you accepting css transition's ticket requests ?\r\nThe reason i am asking this as IE9 is not supported for CSS3 Transitions and if i propose any CSS3 Transitions , will that proceed ahead to the bootstrap core ? \r\n\r\n**Update**: Oh sorry i got a bit confused with IE9 & IE10,,,, IE9 is already out #flexbox .... and CSS3 Transitions is supported in IE 10 ... \r\n\r\nSo, here's my feature request as asked later in the comment \r\n\r\nAnimated Input Form on focus\r\nhttp://codepen.io/IamManchanda/pen/XpraGx"},{"labels":[null,"enhancement",null],"text":"Kinda basic but should be added to bootstrap core \r\nDemo => http://codepen.io/IamManchanda/pen/bgbraw\r\n\r\nHere's the **SCSS** I used for the above example\r\n\r\n```\r\n.dropcaps:first-of-type:first-letter {\r\n  height: 0.7em;\r\n  margin: 0.08em 0 -0.05em 0;\r\n  padding: 0 0.065em 0 0;\r\n  font-size: 5em;\r\n  line-height: 0.85em;\r\n  float: left;\r\n}\r\n```\r\nThat tiny negative margin is for the next line (4th line in this case) to start from scratch after dropcap has finished its variable height!  "},{"labels":["enhancement"],"text":"For static sites, Surely the best use case for **html includes** is static site generators like jekyll or hugo.\r\nI am not denying that but many static websites ( specially bootstrap ones ) dont want to use these static site generators simply because its complicated at first and thus use this type of below crutch\r\n\r\n`document.write(\"<h1 class=\\\"task\\\">Task for the day<\\/h1>\");`\r\n\r\nThis type of code is meant for testing only and isn't for production but still websites use this type of codes because its easy to get started with. Infact there are many [html to js convertors](https://www.google.co.in/search?q=html+to+js+converter) for the same use case.\r\n\r\nAs per my best of knowledge and experience, this doc_write is mostly and widely used in navbars, sidebar, and footers of website which is surely not great!!\r\n\r\nSo i wanna purpose this simple below thing for `**bootstrap.js**`\r\nhttp://www.w3schools.com/w3css/w3data_includes.asp\r\n\r\nDemo => http://www.w3schools.com/w3css/tryit.asp?filename=tryw3data_html_include_2\r\n\r\nYup, maybe bootstrap is not meant for this type of stuff but what's better than saving the developer's and designer's day ??"},{"labels":[null,"enhancement",null],"text":"Here's what i am referring to http://www.w3schools.com/howto/howto_css_contact_chips.asp"},{"labels":[null,"enhancement",null],"text":"( https://github.com/twbs/bootstrap/pull/21211 ) I feel that there should be a responsive variations for the same ? \r\n\r\nExample \r\n\r\n- .no-gutters\r\n- .no-gutters-sm-up\r\n\r\n**Special note:** I have never used such variation ~~and wont be surprised if this suggestion doesn't proceed ahead~~ but i found the similar thing in zurb so i want to know whether bootstrap should have these responsive variations or not\r\n\r\nSource : http://foundation.zurb.com/sites/docs/grid.html#collapse-uncollapse-rows "},{"labels":[null,"enhancement"],"text":"Not a fan of duplicacy so, here below is my issue/suggestion \r\nhttps://github.com/zurb/foundation-sites/issues/9553 \r\n\r\nCodepen for reference --> http://codepen.io/IamManchanda/pen/Pbvmxg"},{"labels":[null,"enhancement",null],"text":"I have a feature request to add in `<picture>` tag support.\r\n\r\n**Highlights**\r\nAllows you to define multiple image resources for responsive design\r\n\r\nIn HTML 5.1, you can use <picture> tag together with the srcset attribute to make responsive image selection possible. The <picture> tag represents an image container that allows developers to declare different image resources in order to adapt to the UA‘s viewport size, screen pixel density, screen type, and other parameters used in responsive design.\r\n\r\nThe <picture> tag itself doesn’t display anything, it functions merely as context for the multiple image resources. You need to declare the default image resource as the value of the src attribute of the <img> tag, and the alternative image resources go within the srcset attributes of the <img> and <source> elements.\r\n\r\n```\r\n<picture>\r\n  <source srcset=\"mobile.jpg, mobile-hd.jpg 2x\"\r\n      media=\"(max-width: 360px)\">\r\n  <source srcset=\"large.jpg, large-hd.jpg 2x\"\r\n      media=\"(min-width: 1920px)\">\r\n  <img src=\"default.jpg\" srcset=\"default-hd.jpg 2x\"\r\n      alt=\"your image\">\r\n</picture>\r\n```\r\n\r\nSourced from here:\r\n- http://www.hongkiat.com/blog/html-5-1-new-features/\r\n\r\nAlso see: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture\r\n"},{"labels":[null,"enhancement",null],"text":"For example: https://getuikit.com/docs/grid.html#grid-gutter\r\n"},{"labels":[null,"enhancement",null],"text":"I feel like the Button Toggle Inactive and Active states are not clear. I would prefer it myself if the inactive state was styled as `btn-secondary`, and active state actually used the applied class (such as `btn-primary`). Maybe a new class would be applicable, so users aren't confused (`btn-primary-active`).\r\n\r\nHere's an example of what I'm talking about:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/7062604/21168668/99b95226-c17b-11e6-8078-0a18def1136d.png)\r\n\r\nHere's some CSS to make it work now (it still uses the off color for .active).\r\n\r\n    [data-toggle=\"buttons\"] .btn:not(.active) {\r\n      color: #373a3c;\r\n      background-color: #fff;\r\n      border-color: #ccc;\r\n    }"},{"labels":[null,"enhancement",null,null],"text":"I want to add a new feature request for bootstrap 4 : **Card Flips** . I am using this in my projects from quite some time and i felt that this should be contributed as its a cool feature if added in bootstrap 4!\r\n\r\nHere is the codepen --> http://codepen.io/IamManchanda/pen/zoaWdW\r\n**Update:** Codepen with multiple rows --> http://codepen.io/IamManchanda/full/GNVKOQ/\r\n\r\nand here is the simple and small **SCSS** for the same.\r\n\r\n```css\r\n.card-flip {\r\n  perspective: 1000px;\r\n  &:hover .flip, &.hover .flip {\r\n    transform: rotateY(180deg);\r\n  }\r\n}\r\n.card-flip, .front, .back {\r\n  width: 100%;\r\n  height: 480px;\r\n}\r\n.flip {\r\n  transition: 0.6s;\r\n  transform-style: preserve-3d;\r\n  position: relative;\r\n}\r\n.front, .back {\r\n  backface-visibility: hidden;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.front {\r\n  z-index: 2;\r\n  transform: rotateY(0deg);\r\n}\r\n.back {\r\n  transform: rotateY(180deg);\r\n}\r\n```\r\n\r\nand also a very simple and one line javascript ,\r\n\r\n```javascript\r\ndocument.querySelector(\".card-flip\").classList.toggle(\"flip\");\r\n```"},{"labels":[null,"enhancement",null,null],"text":"I want to add a feature request! I would like to see floating labels be incorporated into bootstrap 4. Please take a look at this dribble shot: https://dribbble.com/shots/1254439--GIF-Float-Label-Form-Interaction which shows this in action as well as some pros for it:\r\n\r\n> User keeps context\r\n> The main advantage of this pattern is that the user keeps the field’s context after they’ve focused and entered a value. This provides for a more accessible, less frustrating experience.\r\n> \r\n> Clean and scannable by default\r\n> This pattern allows for a clean inline label experience by default, and only becomes a little more cluttered once the user has filled things out.\r\n> \r\n> Elegant\r\n> It needs to be said: this pattern is sexy. You usually can’t say that about forms. It looks good and the animations are a nice subtle touch.\r\n> \r\n\r\nGoogle uses floating labels in their material design: https://material.google.com/components/text-fields.html#text-fields-floating-labels and designers love them: https://dribbble.com/search?q=floating+label \r\n\r\nHere is a live example http://mrlopez.me/bootstrap-floating-labels/ someone else did with bootstrap."},{"labels":[null,"enhancement",null],"text":"`btn-outline-*` is a great option but adding inverse classes ( `btn-outline-*-inverse`  ) will help buttons on dark backgrounds to be presented better\r\n\r\nfor eg. \r\n\r\n```\r\nbtn-outline-primary-inverse {\r\n    color: #fff;\r\n    background-image: none;\r\n    background-color: transparent;\r\n    border-color: #fff;\r\n}\r\n.btn-outline-primary-inverse:hover {\r\n    color: #fff;\r\n    background-color: #0275d8;\r\n    border-color: #0275d8;\r\n}\r\n.btn-outline-primary-inverse:focus, .btn-outline-primary-inverse.focus {\r\n    color: #fff;\r\n    background-color: #0275d8;\r\n    border-color: #0275d8;\r\n}\r\n```\r\n\r\nAdding some screenshots for the demo purposes \r\n\r\n![screenshot from 2016-12-07 11-28-42](https://cloud.githubusercontent.com/assets/4970624/20956675/6657a7d4-bc71-11e6-8cf5-a71dd1818bb1.png)\r\n\r\n![screenshot from 2016-12-07 11-29-02](https://cloud.githubusercontent.com/assets/4970624/20956684/79d047bc-bc71-11e6-8b85-6539a1a14be5.png)\r\n\r\n"},{"labels":["enhancement",null,null],"text":"I'm currently working on an off canvas navigation and I'm trying to use BS as much as possible. \r\n\r\nI implemented a nav as standard and just styled it to be like a sidebar. When applying collapse to it, as I would a top of page nav, the functionality works but collapse is setting `height:0` and scrolling vertical. I can overcome a lot of this in CSS. \r\n\r\nFeature Idea: Can we also collapse left/right with `.collapse-h` or `.collapse-v` and then we can do the rest in CSS?\r\n\r\nThanks\r\n\r\n**EDIT:**\r\nI see that you can add .width to dictate collapse direction, however it's not working 100% and is much worse when using flexbox."},{"labels":["enhancement",null,null],"text":"As it said in the documentation : \r\n\r\n> Options can be passed via data attributes or JavaScript. For data attributes, append the option name to data-, as in data-animation=\"\".\r\n\r\nAnd ``title`` is an option, so according to the documentation we should be able to use ``data-title`` but it's not the case (X-Ref : #21273).\r\n\r\nOnly ``title`` and ``data-original-title`` works to set the content of a Tooltip.\r\n\r\nSo my question is : What should we do about that ? Should we update the documentation to notice users or should we update ``tooltip.js`` ? Maybe I misunderstood something because of my English so if it's the case forgive me 😄 \r\n\r\n/cc @mdo @bardiharborow @cvrebert "},{"labels":[null,"enhancement",null,null],"text":"When enabling flex to create an auto-layout column, the colum reset with the use of .clearfix doen't work.\r\n```\r\n<div class=\"row\">\r\n<div class=\"col\">1 </div>\r\n<div class=\"col\">2</div>\r\n<div class=\"clearfix\"></div>\r\n<div class=\"col\">3</div>\r\n<div class=\"col\">4</div>    \r\n</div>\r\n```\r\n\r\nWe get:\r\n![Image of Flex clearfix](http://i.imgur.com/qFXaKmU.png)\r\ninstead of the expected result:\r\n![Image of Flex clearfix](http://i.imgur.com/1vxnqz0.png)\r\n"},{"labels":[null,"enhancement",null],"text":"Currently there is active class for dropdown items which adds dark blue background by default, however, it doesn't have any hover and focus style changes.\r\n\r\nI have a custom multiple select based on BS4 dropdown. When there are many items selected and navigating menu with arrow up/down keys I have no idea which menu item is currently in focus like I can see it when item is not active and have a light grey bg when hovered/focused.\r\n\r\nWhat about adding another variable(s) and state here, may be another bg or even an inner shadow (border without breaking box size)?\r\n\r\n```scss\r\n  // Active state\r\n  &.active {\r\n\r\n    // move default styles here and change hover-focus\r\n\r\n    @include plain-hover-focus {\r\n      color: $dropdown-link-active-color;\r\n      text-decoration: none;\r\n      background-color: $dropdown-link-active-bg;\r\n      outline: 0;\r\n    }\r\n}\r\n```\r\n\r\nVariable name suggestions:\r\n\r\n$dropdown-link-active-hover-color;\r\n$dropdown-link-active-hover-bg;\r\n$dropdown-link-active-hover-border;"},{"labels":[null,"enhancement",null,null],"text":"I tried to increase the *y-spacing* of the [stacked radio buttons](http://v4-alpha.getbootstrap.com/components/forms/#stacked) but noticed this is currently not adjustable. \r\n\r\nThere is a variable ```$custom-control-spacer-y``` [in the _variables.scss](https://github.com/twbs/bootstrap/blob/v4-dev/scss/_variables.scss#L432) but it isn't used anywhere. I suppose this variable is supposed to defined the margin between the stacked ```.custom-control```s, right?\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Hello\r\n\r\nIt is possible that options in button dropdown and split button dropdown have colos like this example provided by GLPI : \r\n\r\n![bootstrap-4-improvements](https://cloud.githubusercontent.com/assets/2016950/20831745/d14fa4ea-b886-11e6-85e9-da103389e617.jpg)\r\n \r\nColors are the same like buttons : primary, success, ..."},{"labels":[null,"enhancement",null],"text":"In order to standardize transitions it would be useful to add variables for transitions.\r\nWhen looking at **[transition usage](https://github.com/twbs/bootstrap/search?l=SCSS&q=%40include+transition&utf8=%E2%9C%93)**, I see that in most cases `ease-in-out` is used as timing-function and 0.2s / 0.6s as duration. These values could be transfered into variables.\r\n\r\nAdditionally, the mixin could be extended to provide those variables as default values if no parameters are given. So using `@include transition();` could end up in `transition: all 0.2s ease-in-out;` after compiling.\r\n\r\nI would be happy to make those changes and open a PR 😃 "},{"labels":[null,"enhancement",null],"text":"Sometimes we need to add images as background like so:\r\n\r\n`<div style=\"background-image:...\"></div>`\r\n\r\nThat way the element is empty and it will not display on the browser.\r\nMy idea is to add responsive height heplers, similar to the mt-1 and pt-1.\r\n\r\nSomething like this:\r\n\r\n`h-xs-100 h-sm-200 h-md-300`\r\n\r\nHeight: 100px - in mobile\r\nHeight: 200px - in tablet\r\nHeight: 300px - in desktop\r\n\r\nThis will allow us to play with card that have background image instead of the image tag.\r\n"},{"labels":["enhancement",null,null],"text":"I have a tooltip on a `<button>` which disappears once the mouse leaves the button. However, if the button becomes disabled (using the `disabled` attribute) whilst the tooltip is visible, the tooltip is not removed when the mouse leaves the button. This is a Bootstrap feature &mdash; not functionality that I have implemented myself. I encountered this on Windows 10 Pro x64 using Bootstrap v4.0.0-alpha.5.\r\n\r\n<details>\r\n\t<summary>This affects every desktop browser I have installed.</summary>\r\n\t<ul>\r\n\t\t<li>Chrome 54.0.2840.99 m</li>\r\n\t\t<li>Firefox 50.0</li>\r\n\t\t<li>Microsoft Edge 38.14393.0.0</li>\r\n\t\t<li>Opera 41.0.2353.69</li>\r\n\t\t<li>Internet Explorer 11.447.14393.0</li>\r\n\t\t<li>Safari 5.1.7</li>\r\n\t</ul>\r\n</details>\r\n\r\n<hr/>\r\n\r\nChrome does not fire mouse events for disabled buttons, and possibly other disabled elements (`<input>` etc). Firefox _does_ fire mouse events for disabled buttons, but is still somehow affected by this issue.\r\n\r\nAs a result of the `mouseleave` not firing, Bootstrap does not remove the tooltip.\r\n\r\nInstead of listening for the `mouseleave` event from the button, we could listen for the `mousemove` event from the document. As Firefox _does_ fire `mousemove` events for disabled buttons, we also need to ensure that the `mousemove` event did not bubble from the button in question.\r\n\r\nHere's an example of the bug and the above `mousemove` approach: [https://jsbin.com/dobucebiwi](https://jsbin.com/dobucebiwi/edit?js,output)\r\n\r\nThe `.btn-danger` button does not use this workaround, and the `.btn-success` button does. Mouse-over the buttons to see their tooltips. Click buttons to disable them. You should observe that the `.btn-success` button's tooltip is removed when the mouse leaves the disabled button."},{"labels":[null,"enhancement",null],"text":"For `.btn-primary` (and others) was made an option to set color of caption text on `_variables.scss`\r\n\r\nBut for all `.btn-outline-*` caption text in active state is white, even if black is better to look. It would be good feature add similar option for `.btn-outline-` or use colors from `$btn-*-color` in `button-outline-variant` mixin, or use sass functions for checking color [lightness](http://sass-lang.com/documentation/Sass/Script/Functions.html#lightness-instance_method)."},{"labels":["enhancement"],"text":"**Feature Request**\r\n\r\nAny plan to add such feature? It's extremely useful when we don't have a progress measure...\r\n\r\nIf it's not planned, what do you recommend to use?"},{"labels":[null,"enhancement",null],"text":"please implement badges that are compatible for having in top right corner\r\n"},{"labels":["enhancement",null,null],"text":"If you have a button with a popover, and you disable the button while the popover is displayed, the popover will never be dismissed (until you re-enable the button and hover over it again).\r\n\r\n```\r\n<button type=\"button\" data-content=\"Click here to disable\" data-toggle=\"popover\" class=\"btn btn-labeled btn-primary\" title=\"My Example\" data-placement=\"top\">\r\n    <i class=\"fa fa-plus\"></i>\r\n</button>\r\n\r\n<script>\r\n    $(\"button\").click(function() {\r\n        $(this).addClass(\"disabled\").attr(\"disabled\", \"disabled\");\r\n    });\r\n</script>\r\n```"},{"labels":["enhancement",null],"text":"For v4.\r\n\r\nI've been using Tether (for my own projects) for a while now, and I've noticed that in a significant number of computers, Tether tends to blurry the text in its popup elements. \r\n\r\n![image](https://cloud.githubusercontent.com/assets/275014/20281859/cd96ee98-aa77-11e6-8462-a13ccf2f4abc.png)\r\n\r\n_Don't know if Github will change the image resolution, but anyway, there it is._\r\n\r\nThis is caused because Tether uses CSS 2D transforms to positioning the elements, which, in theory, is a great idea. Nevertheless, a quick search in Stack Overflow for \"[css transform blurry](http://stackoverflow.com/search?q=css+transform+blurry)\" shows that using translate and other transforms causes this unwanted side effect on some computers.\r\n\r\nI worked out this by disabling the GPU optimizations in Tether (http://tether.io/#optimization), this allows to use absolute coords when positioning the popups. Of course, according to Tether docs, this _slightly_ degrades the popups performance, but, in most cases, for me, it's a good trade vs showing blurry info to the user (because it used to be a frequent complaint among my users ¬¬).\r\n\r\nSo... Could it be posible to have and option to disable this optimizations or it's something out of scope for the project?\r\n"},{"labels":[null,"enhancement"],"text":"Have you ever considered adding a q tag CSS definition in Bootstrap? Here's the one I've been using:\r\n\r\n// HT: Disgruntled Goat\r\n// http://stackoverflow.com/users/37947/disgruntledgoat\r\nq:before { content: \"\\201c\"; }\r\nq:after { content: \"\\201d\"; }\r\nq q:before { content: \"\\2018\"; }\r\nq q:after { content: \"\\2019\"; }\r\n"},{"labels":[null,"enhancement",null],"text":"It appears like  \"ul\" listing is dropped out from dropdown items ( See Bootstrap 4 alpha version).\n\"ul\" listing would be a great feature to have especially when the dropdown needs to be extended and to have sub-dropdowns.\nHere attached are:\n- A screenshot of a navbar with dropdown and sub-dropdowns\n- HTML code with additional CSS\n  [bootstrap4-nabvar-menu.txt](https://github.com/twbs/bootstrap/files/555472/bootstrap4-nabvar-menu.txt)\n  ![bootstrap4-navbar](https://cloud.githubusercontent.com/assets/13536983/19763625/c72166b4-9c36-11e6-8010-782641e53ea8.png)\n"},{"labels":[null,"enhancement",null],"text":"Screen fonts sizes are much too big for printing - e.g. an H1 on an A4 page (portrait) only has about 4 words per line. \n\nIts the same for normal text, printing a page (A4, portrait)  gives about 10 words/line, but standard printing is about 20 words/line.\n\nIt would be better to reduce font sizes for printing, or at least have it as an option.\n\n```\n<body class=\"print-sm\">\n<body class=\"print-xs\">\n```\n\n(Reason, my website is walks, so people print the pages to take with them. People who need glasses prefer big print so they can read without them. 20-20 people like small print to save paper)\n\nIn Bootstrap 3, there is no easy solution, as all sizes are in px. \n\nWith the switch to rem units, this should be possible to fix/implement.\n"},{"labels":["enhancement",null,null],"text":"Hi,\n\nI apologize if this has been asked before, but Im having trouble finding a simple solution to have an image sequence crossfading transition (like carousel with an image fading effect rather than slide, a slow opacity fade into new image (1-3 second animation time) with 5-8 seconds interval between images.  Tried tons of examples, bootply, custom ones ppl made, none work for me.  I want a smooth, slow crossfade thats enjoyable to watch.  Its odd that bootstrap 3 ( i use 3.3.5) has such an easy copy/paste carousel slide, with no CSS needed, yet something comparable like an image fade carousel doesnt exist without convoluted css and js and  jquery, media queries and tons of configs which do not work, because of absolute positioning tricks etc.  Wish this feature could be added.  \n\nExamples of what Im looking for are here (tried them all- doesnt work with my standard carousel:\n\nDemo 3:  http://css3.bradshawenterprises.com/cfimg/#cfimg3\nhttp://www.1squarepear.com/_docs/bootstrap_carousel_fade.html\nhttps://codepen.io/crashy/pen/JoKMgG\n"},{"labels":["enhancement",null,null],"text":"Hi guys,\n\nusing the carousel of Bootstrap 4 without `data-ride` causes unexpected behavior if you triggered a slide via `data-slide` annotated elements. This seems to trigger the `.carousel('cycle')` behavior instead of just sliding to the next or previous slide. I currently don't have the time to dig into the javascript code of the carousel, but on the first sight the methods look good and there is a check whether the carousel is cycling or not. So this seems to be a bit odd.\n\nReproducible example: http://www.bootply.com/uhiBQulEfU\n\nOS: Windows 10 Home\nBrowser: Google Chrome Version 53.0.2785.143 m\nBootstrap: 4.0.0-alpha.5\n"},{"labels":["enhancement",null],"text":"hi , i suggest to add another option shiftOffset{x:number,y:number} \nso i can shift in relative way the position of tooltip/popover from the default calculated position(very simple modification very usefull)\n\nBotton the modified file\n\n<pre><![CDATA[\n\n\nTooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n   <b> shiftOffset:{x:0,y:0}</b>,\n    html: false,\n    container: false,\n    viewport: {\n      selector: 'body',\n      padding: 0\n    }\n  }\n\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\n      if (e.isDefaultPrevented() || !inDom) return\n      var that = this\n\n      var $tip = this.tip()\n\n      var tipId = this.getUID(this.type)\n\n      this.setContent()\n      $tip.attr('id', tipId)\n      this.$element.attr('aria-describedby', tipId)\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n        .data('bs.' + this.type, this)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n      this.$element.trigger('inserted.bs.' + this.type)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var orgPlacement = placement\n        var viewportDim = this.getPosition(this.$viewport)\n\n        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :\n                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :\n                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :\n                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n      <b>var shiftOffset=(typeof (this.options.shiftOffset)=='function')?this.options.shiftOffset():this.options.shiftOffset;\n      calculatedOffset.top  += shiftOffset.y;\n      calculatedOffset.left += shiftOffset.x;\n      </b>this.applyPlacement(calculatedOffset, placement)\n\n      var complete = function () {\n        var prevHoverState = that.hoverState\n        that.$element.trigger('shown.bs.' + that.type)\n        that.hoverState = null\n\n        if (prevHoverState == 'out') that.leave(that)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one('bsTransitionEnd', complete)\n          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n        complete()\n    }\n  }\n\n]]></pre>\n"},{"labels":[null,"enhancement",null],"text":"Can card-columns have responsive variants? I can't set the number of columns on different device widths without doing custom media queries.\n"},{"labels":[null,"enhancement",null],"text":"For example, `.v-align-middle` and what not.\n"},{"labels":[null,null,"enhancement",null],"text":"[Getting Started > Flexbox](http://v4-alpha.getbootstrap.com/getting-started/flexbox/) notes that: \"Alternatively, if you don’t need the source Sass files, you may swap the default Bootstrap compiled CSS with the compiled flexbox variation. Head to the download page for more information.\"\n\nCurrently, neither the [download page](http://v4-alpha.getbootstrap.com/getting-started/download/) or the Bootstrap CDN info on the front page link to the compiled flexbox variation.\n\nThis would be handy to have, assuming that the flexbox variation of the Bootstrap CSS is in as good shape as the non-flexbox variation.\n"},{"labels":[null,"enhancement",null],"text":"Often you want an image to fill the whole width of the containing element. `.img-fluid` can be used to fill the containing element and scale down, but there's no option for scaling up. If the containing element is bigger than the actual image size, even if it's only some pixels in some special viewports, the image won't fill the whole element. This is bad for the design, in most cases worse than upscaling an image for some pixels.\n\nFor this case, we created a class `.img-fill` which sets `display: block; width: 100%; height: auto;`. The frontend developer then can decide if he want's images to scale up and down by using .img-fill or if he only wants them to scale down by using .img-fluid. \n\nI propose this as an official feature of Bootstrap 4.\n"},{"labels":["enhancement"],"text":"This project is no longer maintained, and should really be incorporated in the official release:\n**Bootstrap Application Wizard**\nhttps://github.com/amoffat/bootstrap-application-wizard\n\nCheers \n"},{"labels":[null,"enhancement",null],"text":"Instead using a empty div in markup [like](http://v4-alpha.getbootstrap.com/layout/grid/#example-mobile-tablet-desktop):\n\n```\n<!-- Optional: clear the XS cols if their content doesn't match in height -->\n<div class=\"clearfix hidden-sm-up\"></div>\n```\n\nI suggest something like:\n`<div class=\"row clear-sm-2 clear-md-3 clear-xl-5\">`\n\nWith some implementation like\n\n```\n$max-clear-cols: 5;\n@each $breakpoint in map-keys($grid-breakpoints) {\n  @include media-breakpoint-up($breakpoint) {\n    @for $i from 2 through $max-clear-cols {\n        .clear-#{$breakpoint}-#{$i} >*:nth-child(n) { clear:none; }\n        .clear-#{$breakpoint}-#{$i} >*:nth-child(#{$i}n+#{$i+1}) { clear:both; }\n    }\n  }\n}\n```\n"},{"labels":[null,"enhancement",null,null],"text":"I think it's very common use case that you want to have card content vertically in small screen and in bigger screens content is aligned horizontally. For example: http://www.apple.com/newsroom/\n\n![example](https://cloud.githubusercontent.com/assets/22469162/18866616/74ae8352-84a9-11e6-9575-e31a9c8e6e2d.png)\n\nI implemented this for my own project roughly so that:\n\n```\n.card {    display: flex; flex-direction: column;}\n.card-img {    order: -1;}\n.card-block {    order: 0;}\n.card-img-last {    order: 1;}\n```\n\n.card-img-last is basically same than .card-img-bottom, but it doesn't care about order in source and also naming works better with horizontal cards where last refers to the right side.\n\nThen I have horizontal classes for cards which needs to be added in addition to basic card class:\n\n```\n.card-horizontal {    flex-direction: row;}\n.card-horizontal-sm-up { ... }\n.card-horizontal-md-up { ... } etc.\n\n.card-horizontal .card-img {    flex: 0 0 $card-img-width;}\n.card-horizontal .card-block {    flex: 0 0 calc(100% - $card-img-width)}\n```\n\nSomething like that, not a perfect example but gives the basic idea how it is working. I'm using card-block now as a flex item but it won't work if I want to have card header or footer. There should be some wrapper div which contains all content expect image.\n\nOnly problem with this is to make image behave well in horizontal view. In my implementation .card-img is just a div container, then img is inside that and I use object-fit (IE/Edge fix with Javascript) to cover the whole div. I've set minimum and maximum height for .card-block to have always reasonably sized image there.\n\nI would like to hear if this is wanted feature and then opinions what would be the correct implementation. Obviously we need to have also non-flex-box solution for that.\n"},{"labels":["enhancement",null,null],"text":"AFAIK it's not included.\n"},{"labels":[null,"enhancement",null],"text":"Any news about `btn-responsive` like this one?\n\nhttp://stackoverflow.com/a/19937581/4412054\n\nI wrote an example of what I think:\n\nhttp://plnkr.co/edit/UobgFbNdwOAOU8JmtssW?p=preview\n"},{"labels":[null,"enhancement",null],"text":"Dealing with breakpoints and re-positioning elements, we always face problems with spacing. In one of my projects ( https://github.com/vinpac/base-kit ) I've created a margin-framework that work with breakpoints to solve this and it's been great. So I'm here to suggest this feature.\n\nExample:\n\n```\n<div className=\"col-lg mg-md-bottom-1 col-fill\">\n  <div className=\"pull-xs-left pull-lg-none mg-lg-bottom-1\">\n    <a  href=\"\" className=\"text-weight-semibold text-accent\">\n      <i className=\"fa fa-location-arrow mg-xs-right-2\" />\n      United States\n    </a>\n  </div>\n  <div className=\"pull-xs-left pull-lg-none mg-xs-left-3 mg-lg-left-none\">\n    <a href=\"\" className=\"text-weight-semibold text-accent\">\n      <i className=\"fa fa-comment mg-xs-right-2\" />\n      English\n    </a>\n  </div>\n</div>\n```\n\n---\n\n_variables.scss\n\n```\n$margin-horizontal: .5rem .8rem 1.25rem !default;\n$margin-vertical: 1rem 2rem 2.5rem !default;\n```\n\n_margin-framework.scss\n\n```\n@mixin make-margins($position, $margin-list, $breakpoints: $grid-breakpoints) {\n  @each $breakpoint in map-keys($breakpoints) {\n    @include media-breakpoint-up($breakpoint, $breakpoints) {\n      .mg-#{$breakpoint}-#{$position}-none {\n        margin-#{$position}: 0 !important;\n      }\n\n      @for $i from 1 through length($margin-list) {\n        .mg-#{$breakpoint}-#{$position}-#{$i} {\n          margin-#{$position}: nth($margin-list, $i);\n        }\n      }\n    }\n  }\n}\n```\n\n_margin.scss\n\n```\n@include make-margins(left, $margin-horizontal);\n@include make-margins(right, $margin-horizontal);\n@include make-margins(top, $margin-vertical);\n@include make-margins(bottom, $margin-vertical);\n\n.no-margin {\n  margin: 0 !important;\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"So I'm using BS4 with flex enabled and I'm typically copy/pasting angular material utility classes into my project to make use of those for building the whole layout and doing flex magic like vertical and horizontal alignment: `layout-fill, layout-row, layout-column, layout-space-between-center` etc. Is there any plan to include a range of flex utility classes in BS4?\n\nMinimal pen: http://codepen.io/intellix/pen/ALLJqK\nAngular material layout documentation: https://material.angularjs.org/latest/layout/container\nLayout code: https://github.com/angular/material/blob/master/src/core/style/layout.scss\n"},{"labels":[null,"enhancement"],"text":"Hi, \n\nAs Bootstrap is been gaining popularity in Web development and has empowered millions of websites, Packt is proud to publish books on Bootstrap.\n\nThis year Packt has published 4 titles on Bootstrap. 3 books and a video\n**Books:**\n[Bootstrap Site Blueprints Volume](https://www.packtpub.com/web-development/bootstrap-site-blueprints-volume-ii)\n[Bootstrap Site Blueprints](https://www.packtpub.com/web-development/bootstrap-site-blueprints)\n[Learning Bootstrap 4 - Second Edition](https://www.packtpub.com/web-development/learning-bootstrap-4-second-edition)\n\n**Video:**\n[Building a Responsive Application with Bootstrap [Video]](https://www.packtpub.com/web-development/building-responsive-applications-bootstrap-video)\n\nWe would appreciate if you could create a Resources page to feature such content. I think it would really help the Bootstrap community and budding developers.\n\nLet me know what you think.\n\nMany thanks\n"},{"labels":[null,"enhancement",null,null],"text":"It seems that there is alot of people wanting to have their navbars centered on the page, may be good to include a css class such as navbar-center that will center all the element in the navbar.\n\n`text-center` on the navbar div doesn't work as it meant to only center text and not all elements.\n\nReference:\nhttp://stackoverflow.com/questions/21980660/bootstrap-3-align-navigation-to-center\nhttp://stackoverflow.com/questions/18777235/center-content-in-responsive-bootstrap-navbar\n"},{"labels":[null,"enhancement",null],"text":"Right now Bootstrap uses the hardcoded font weights `bold` and `normal`.\n\nWebsites might use different weights such as `medium` or `thin` or use `light` as default weight instead of `normal`.\n\nIf Bootstrap used settings variables for `$font-weight-normal` and `$font-weight-bold` the user could easily override the default values or use numerical weights.\n\nThis would also help #18605. \n\nThose two lines could be added to the _variables.scss:\n\n```\n$font-weight-normal: normal;\n$font-weight-bold: bold;\n```\n\nAll occurrences of `font-weight: normal;` would be replaced by `font-weight: $font-weight-normal`. The same applied for `font-weight: bold;`.\n\nFoundation uses a [similar approach](https://github.com/zurb/foundation-sites/blob/master/scss/settings/_settings.scss#L69-L70).\n\nI could create a pull-request for this.\n"},{"labels":[null,"enhancement",null],"text":"I would like to request a separator option for `.list-inline`.  Similar to how breadcrumbs currently work in that between each `.list-inline-item` is a `|`.\n\nhttp://codepen.io/_benwa/pen/NRNRWO?editors=1100#0\n"},{"labels":[null,"enhancement",null,null,null],"text":"Refs #20716\n"},{"labels":[null,"enhancement",null,null],"text":"I love the responsive float classes in v4, but I was wondering if a similar concept could be applied to the `.btn-block` class. Here is a demo page which, as an example, has paging buttons. Without the convenience of a `.btn-[size]-block` class, you end up duplicating markup. (I only made the smallest size for the sake of the example.)\n\nhttp://codepen.io/peiche/pen/wzvEyJ\n"},{"labels":["enhancement",null,null],"text":"It's a feature request.\n\nWhen using layout libraries ([golden layout](https://www.golden-layout.com) for example) it is necessary to be able to select the container (the tab) so the backdrop doesn't fill the whole window and the modal can target the right tab!\n"},{"labels":[null,null,"enhancement"],"text":"I would like to request official support for `.dropdown` inside of `.input-group-addon`.\nCompared with a `select` (#20527) we would have the advantage that the content can be styled as needed. \nBrowser support looks pretty good. Yet, I tested on 3 OS' / 11 Browsers; more to come.\n\nI implemented this in a prototype yesterday, so I can open a PR (but not sure where to put the documentation). It looked like this:\n\n![dropdown-in-input-addon](https://cloud.githubusercontent.com/assets/5536910/18161806/d5c78c04-7033-11e6-8c9d-7e774519f76e.png)\n"},{"labels":["enhancement",null],"text":"Now columns width calculated depend of window size (**lg, md, sm**) - media query breakpoints.\nI propose to add option for column width, dependent of size any html-element (no only window size).\n\nI think way to this - via js: specify name of html-element (by default - window size).\n\nIt's will be like **universal** media queries.\n\nFor example:\n\n```\n<div class=\"row\">\n    <div class=\"one-div col-md-6 row\">\n        <div class=\"row\" data-media-query-element=\"onediv\"> // now child col's width calculate dependent of onedive size\n            <div class=\"col-md-6\"></div> // 50%, then min-width of one-div (no window width) is: 992px\n            <div class=\"col-md-6\"></div>\n        </div>\n    <div class=\"sec-dev col-md-6\"></div>\n</div>\n```\n\nBut I do not know whether it is possible to implement, because media queries - it is a css-function...\n"},{"labels":[null,"enhancement",null],"text":"1140px is way to small on an 1900+ display.\n\nPlease add an new grid size for XXL displays\n"},{"labels":[null,"enhancement",null],"text":"In addition to `form-control-sm` and `form-control-lg`, it would be nice to have an `form-control-condensed` which could be used alone or in combination with small and large, to cut down on top and bottom padding.\n"},{"labels":[null,"enhancement"],"text":"### Required behaviour:\n\nThe labels of a form element with a validation class, like `has-danger`, are highlighted in the validation colour, like red.\n### Observed behaviour:\n\nThere is no colour change. It seems `.has-danger .col-form-label` has no associated styles.\n\nScreenshot: \n![2](https://cloud.githubusercontent.com/assets/1073881/17731301/fd0cdabc-646c-11e6-9352-335d425cadf2.PNG)\n### Details:\n\nBS 4: Alpha 3\nOS: Windows 10, x64 (10.0.10586 Build 10586)\nBrowser: Chrome 52.0.2743.116 m, Firefox 48.0, Microsoft Edge 25.10586.0.0\n\nCodePen: http://codepen.io/anon/pen/XKGVaR\n"},{"labels":[null,"enhancement",null],"text":"In #18433 it was proposed to add a number of `font-weight-*`-classes. Only `font-weight-bold` and `font-weight-normal` were added because these \"apply rather universally to default web fonts\".\n\nHowever, since then #19098 has been implemented, using the \"Native system font stack\". Most (if not all) of these fonts do provide a wide array of font weights. I do believe including an utility class for all of them is perhaps a step to far, but I think that at the very least the inclusion of `font-weight-light` has to be reconsidered. As (at least) Segoe UI, San Fransisco and Roboto all support this font weight, making up the vast majority of devices.\n"},{"labels":[null,"enhancement",null],"text":"When adding a selectbox to input-group-addon the increased padding (?) from alpha 3 breaks the size :\n![padding_alfa3](https://cloud.githubusercontent.com/assets/7106739/17688770/a485a9e0-6382-11e6-89ea-b69d538ca860.png)\nnote: the first one is default \"out of the box\" the second one I \"applied\" `padding-top: 6px; padding-bottom: 6px;` to input-group-addon\n\n```\n<div class=\"form-group row\">\n          <label for=\"inputPassword\" class=\"col-sm-2 form-control-label\">Temperature</label>\n          <div class=\"col-sm-6\">\n            <div class=\"input-group\">\n              <input type=\"text\" name=\"temp\" class=\"form-control\" aria-label=\"temperature\">\n              <span class=\"input-group-addon\">\n              <select name=\"unit_temp\">\n                  <option value=\"C\"> &deg;C</option>\n                  <option value=\"F\"> &deg;F</option>\n                  <option value=\"K\"> K</option>\n                </select></span>\n            </div>\n          </div>\n        </div>\n```\n\nI tried adding form-control to the select, but that does not seem to be intended : \n![form_control](https://cloud.githubusercontent.com/assets/7106739/17688838/3bb605f8-6383-11e6-88df-12ac5eb82539.png)\n\nThe issue seems to be that padding is 8px; within the input-group-addon, before it was 6px; ?\n\nTested on Chromebook : \nVersie 53.0.2785.55 beta (64-bit)\nPlatform 8530.49.0 (Official Build) beta-channel leon\nFirmware Google_Leon.4389.61.46\n\nGreat work guys, keep up ! Thanks for the framework!\n"},{"labels":[null,"enhancement",null],"text":"Sass unit tests via [True](http://oddbird.net/true) are useful for validating Sass functions and mixins, while linting tools like [scss-lint](https://github.com/brigade/scss-lint) enforce style guidelines.\n"},{"labels":[null,"enhancement",null,null],"text":"Since pills are not very responsive, a combination of pills and accordion/collapse is often useful (where pills are used on desktop an up and accordion/collapse are used on mobile). Unfortunately they share the same class ‘in’ which creates some unwanted behavior when resizing (selecting a new tab will remove ‘in’ from other tab panes and hereby unintendedly collapsing them when resizing). Please consider using unique class names for each JavaScript plugin to make combinations easier.\n"},{"labels":[null,"enhancement",null],"text":"I suggest a feature that I'm unaware of in bootstrap but I found useful working with w3.css. \nIt's a grid class [.w3-rest](http://www.w3schools.com/w3css/w3css_grid.asp) which helps a column take the remaining space in a row.\n\nFor example instead of **class=\"col-sm-9 col-lg-10\"** as in: \n\n``` html\n<div class=\"row container\">\n    <figure class=\"col-sm-3 col-lg-2\">\n        <a href=\"index.php\"><img src=\"../img/image.png\" </a>\n    </figure>\n    <div class=\"col-sm-9 col-lg-10\">\n        <h1><span>Big Heading</span></h1>\n    </div><!-- .col-*-* -->\n</div><!-- .row -->\n```\n\none could write a bit simpler version of **class=\"col-rest\"** as in: \n\n``` html\n<div class=\"row container\">\n    <figure class=\"col-sm-3 col-lg-2\">\n        <a href=\"index.php\"><img src=\"../img/image.png\" </a>\n    </figure>\n    <div class=\"col-rest\">\n        <h1><span>Big Heading</span></h1>\n    </div><!-- .col-rest -->\n</div><!-- .row -->\n```\n\nwith .col-rest css rules is my_styles.scss file: \n\n``` scss\n/* location of mixin after installation with Composer */\n@import \"../vendor/twbs/bootstrap/scss/mixins/_grid.scss\";\n\n/* w3 hack for containers with floating elements *inside* OR/AND to the *left/right* */  \n.col-rest {\n    overflow: hidden;  \n    @include make-container();    /* provide the same padding as in col-*-* classes */\n    }\n```\n\nwhich after compilation resulted in: \n\n``` css\ncol-rest::after {\n    clear: both;\n    content: \"\";\n    display: table;\n}\n\n.col-rest {\n    margin-left: auto;\n    margin-right: auto;\n    overflow: hidden;\n    padding-left: 15px;\n    padding-right: 15px;\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"Change Request.\n\nIn the CSS, use @padding-xs-horizontal on components, e.g. alerts, tabs, panels\n\nWhy? I have an alert-component / panel-components inside a tab-component.\nOn a smartphone (portrait), the combined padding of both components is a good chunk of the available screen width.\nOn 'xs' screens only, it would be good to reduce horizontal padding.\nThere's already a variable - @padding-xs-horizontal - it just isn't used yet\n\ni.e. something like:\n.alert { padding: @alert-padding;}\n@media screen and width < 768 { .alert { padding:@padding-xs-horizontal; } }\n\nApologies if this has already been suggested before ... I did search for it...\n\nAndrew\n\n, \n"},{"labels":[null,"enhancement",null],"text":"Currently, you have to choose between either a title or a nav inside a `.card-header`. I think it would be nice if Bootstrap supports adding both a title and a nav in the same `.card-header` as shown here:\n\n![knipsel](https://cloud.githubusercontent.com/assets/1693592/17272850/e6a79768-56a1-11e6-9b00-fefbbc449dd0.PNG)\n"},{"labels":[null,"enhancement",null],"text":"Greetings,\n\nAs Bootstrap v4 replaces the old `.progress` `<div>` with a real `<progress>` element, we should consider adding [`<meter>`](https://html.spec.whatwg.org/multipage/forms.html#the-meter-element) support to better match the HTML semantics of each element.\n\nI would also suggest that `<progress>` tag should be stripped by default, or even animated since it aims to represent the completion progress of a task (quoting [WHATWG spec](https://html.spec.whatwg.org/multipage/forms.html#the-progress-element)).\n"},{"labels":[null,"enhancement",null],"text":"Please consider implementing form steppers:\nhttps://material.google.com/components/steppers.html# \n"},{"labels":[null,"enhancement",null],"text":"I have come across use cases where you might want to center justified texts for improved design. I would like to propose a new class, `.text-justify-center`, which centers the last line of justified text. [Most](http://caniuse.com/#feat=css-text-align-last) browsers support this feature except for Safari. If the browser does not support it, this class simply makes the text justified as `.text-justify` does. Below is the implementation:\n\n``` css\n.text-justify-center {\n  text-align: justify !important;\n  text-align-last: center !important;\n}\n```\n"},{"labels":["enhancement",null,null],"text":"The important requirement to any program product from the Arabic/Hebrew customer's perspective is support for base text direction. For detailed explanation of what base text direction term means please see, for instance, pages 5-9 of the following reference document. \r\n\r\n​https://docs.google.com/document/d/1dDrSwimrQbpbXybhMYDEiJXLeeqvelnY4cc8HeCP1Nk/edit?usp=sharing \r\n\r\nEvery platform (like MS Office or Open Office) or web based (like CKEditor, IBM Docs) text editor as well as large variety of program products and platforms (like dojo) allows the possibility to specify the base text direction that impacts the display of Arabic/Hebrew text. \r\nThe current proposal is to introduce the base text direction into Bootstrap JS widgets. Possible candidates for support are  Popover and Tooltip (these widgets create their HTML markup dynamically). \r\n\r\nHow to specify 'base text direction' for bootstrap widgets\r\nBootstrap widgets would provide BTD basing on 'textdir' option been passed to widget constructor.\r\nAlternatively BTD may be specified decoratively as 'data-textdir' attribute of corresponding html element.\r\n\r\nAllowed values are: \"ltr\" (left-to-right), \"rtl\" (right-to-left) and \r\n\"contextual\" (meaning that either 'ltr' or 'rtl' value is used depending on \r\nthe first strong(Arabic/Hebrew or English) character of string been displayed.  \r\n"},{"labels":[null,"enhancement",null],"text":"Just curious about collapse breakpoints like `.collapse-xs`, `.collapse-sm` and  `.collapse-md`. I know the same result can be achieve by using the the `.navbar-toggleable-xs` and so on. But it doesn't feel right(i think) to use it outside `.navbar` component.\n\n``` sass\n// Collapse breakpoint\n// scss-lint:disable ImportantRule\n.collapse-xs,\n.collapse-sm,\n.collapse-md {\n  display: none;\n}\n\n.collapse {\n  &-xs {\n    @include media-breakpoint-up(sm) {\n      display: block !important;\n    }\n  }\n  &-sm {\n    @include media-breakpoint-up(md) {\n      display: block !important;\n    }\n  }\n  &-md {\n    @include media-breakpoint-up(lg) {\n      display: block !important;\n    }\n  }\n}\n// scss-lint:enable ImportantRule\n```\n\nFeel free to close it if this already asked or not relevant.\n\nThanks\n"},{"labels":[null,"enhancement",null],"text":"Add `nav-inline-pipe` class for separate nav links with pipe lines.\n"},{"labels":[null,"enhancement"],"text":"Feature: Allow the Bootstrap LESS to be included using conditional LESS/SASS in a project.\n\nHi we use bootstrap 3 as a isolated include using an id to give it high specificity over our old core css. We wrap the include in a #bootstrap this works well in keeping the 2 sets of rules separate for the most part but a problem occurs with the use of training & \n\nThe use of this structure:\n`.btn & {\n    position: relative;\n    top: -1px;\n  }`\nwill transpile to:\n`.btn #bootstrap .badge {\n    position: relative;\n    top: -1px;\n  }`\n\nThere seems to be 28 uses of this in the SASS(which is converted from the LESS source). I understand that I have a use case that is not typical but it seems like only a small loss in grouping. I have no problem doing the work myself and submitting a pull request If that is acceptable? \n"},{"labels":[null,"enhancement"],"text":"The stacked pills don't react to color changes in their background and don't have an inverse or dark version.\nhttp://v4-alpha.getbootstrap.com/components/navs/#pills\nThis is probably similar to #18115.\n- when the wrapper of `nav nav-pills nav-stacked` has `bg-primary`, shouldn't the pill be inverted?\n- should there be a `nav-inverse` or a `nav-dark` add on class?\n\nRight now, it looks like this\n<img width=\"526\" alt=\"bildschirmfoto 2016-07-23 um 06 43 25\" src=\"https://cloud.githubusercontent.com/assets/111561/17075846/fc4bc85c-50a0-11e6-92fb-91df161e3682.png\">\n"},{"labels":[null,"enhancement",null],"text":"This would be a very cool addition... on a collapsed navigation senario when you click the hamburger icon (?)    have the ability to show the navigation in a grid format  with icon.    currently we have a list .\n"},{"labels":["enhancement",null,null],"text":"One of the most annoying bits when using sticky navbars is the need to add fixes for anchor links on that page. Whenever one clicks on an anchor link, the target will be hidden below the navbar. This happens _every time_, whether you're using Bootstrap or not.\n\nI know you guys are reluctant on adding additional libraries and I generally think that's a good policy. Yet, I thought addressing the problem mentioned above could be a feature welcome by many users – at least those who prefer working with sticky navbars, if not all of them.\n\nOne script that addresses this is [sticky-pagination-fixer](https://github.com/murtaugh/sticky-pagination-fixer), but more importantly its `README` describes the problem in detail.\n\nScreenshots nicked from the mentioned `README`:\n\n![a diagram of a normal pagination event](https://github.com/murtaugh/sticky-pagination-fixer/blob/master/demo-assets/img/figure-1.png?raw=true)\n_Fig 1: Normal navbar_\n\n![a diagram of a pagination event with a sticky header](https://github.com/murtaugh/sticky-pagination-fixer/blob/master/demo-assets/img/figure-2.png?raw=true)\n_Fig 2: Sticky navbar_\n"},{"labels":[null,"enhancement",null],"text":"Refs https://github.com/twbs/bootstrap/pull/18927#issuecomment-233224020\nHas anyone ever actually wanted the Web's default \"text runs outside of the box and often creates a scrollbar\" behavior?\n"},{"labels":[null,"enhancement",null,null],"text":"The previous issue about this was #19826 but got closed by the reporter without getting the ability to receive proper feedback.\n\nIt would really great to be able to define how many cards per row you maximum want. The card deck is an awesome (and only way in BS) to get the same height of all the items in the row. But the main problem is that if you have more then 2-3 items in it, it already starts to become squeezed together on smaller screens.\n\nIn the previous ticket it was mentioned to use something like `card-deck cards-sm-6 cards-md-4 cards-lg-3` but maybe something like `card-deck-md-3 card-deck-lg-4` where you define the amount of columns you want could work too. As people may want to include 5 columns and that doesn't work well with the grid system.\n"},{"labels":[null,"enhancement",null],"text":"If you have `.c-select form-control form-control-lg` it does not use proper padding and so it is not a `lg`, it's tiny.\n"},{"labels":[null,null,"enhancement",null],"text":"https://github.com/yaniswang/HTMLHint\n\nRefs #20295.\n"},{"labels":[null,null,"enhancement",null],"text":"Off-canvas classes and navigation are essential for true responsive navigation and it's something that seems to be missing for V4. \n"},{"labels":[null,"enhancement",null],"text":"I saw there is no support for flex-direction, not being set anywhere so it uses the default value of \"row\".\n\nI suggest to add _.col_ and _.row-*_ classes to support _flex-direction: column_. Those classes would be the same as current _.row_ and _.col-*_ classes, except that _.col_ class would use flex-direction: column.\n\nSo Bootstrap 4 could have (using xs and 12 for this example):\n\n```\n<div class=\"row\"> <!-- uses flex-direction: row -->\n  <div class=\"col-xs-12\"></div>\n</div>\n\n<div class=\"col\"> <!-- uses flex-direction: column -->\n  <div class=\"row-xs-12\"></div>\n</div>\n\n<div class=\"row\"> <!-- nesting -->\n  <div class=\"col-xs-6 col\">\n    <div class=\"row-xs-6\"></div>\n    <div class=\"row-xs-6\"></div>\n  </div>\n  <div class=\"col-xs-6 col\">\n    <div class=\"row-xs-6\"></div>\n    <div class=\"row-xs-6\"></div>\n  </div>\n</div>\n```\n\nOf course, there should be some study about what do \"xs\", \"md\" and \"lg\" mean in the context of \"column\" layout. Media queries with screen height I suppose?\n\nCheers.\n"},{"labels":["enhancement",null,null],"text":"There were a couple of good reasons for implementing this, and they were brought up with the initial issue: #3722.\n\nI'll repeat them here for completionist sake though.\n- Event bindings break if you copy the html, and not use the actual element.\n- This would let the popover work nicer with other JS frameworks, such as AngularJS.\n\n_Current workaround_:\nJust copy the html, and rebind the events. It's not fun or pretty.\n\n_Side note:_\nThe initial issue (#3722) was closed simply because of lack of action, and the final comment: \"Locking this due to its age. Added a note to look at this for v4 though.\" , which was stupid.\nYou don't close a ticket because of it's age, let alone if the ticket might be considered for a later version.\nKeeping it open means people don't have to go through 13,000 other tickets to check if any are still actively wanted/needed.\nOtherwise you run the risk of it just vanishing into the ether.\n\nSo, closing it was a stupid idea, and brings to question how many other issues have been closed similarly, and then completely forgotten?\nIn short, don't close a ticket like that.\n"},{"labels":[null,"enhancement",null,null],"text":"If $subject is not there, What if we include it to bootstrap v4 ?\n\n![rating component](https://cloud.githubusercontent.com/assets/7569427/16444025/85801110-3df9-11e6-888f-7f9ef437da17.png)\n\nI already have a component  that I developed sometime back: https://rawgit.com/jeradrutnam/css-rating/master/example.html\n\nI would happy to contribute it with some enhancements.\n"},{"labels":[null,null,"enhancement"],"text":"This is a very nice feature to have\n"},{"labels":[null,"enhancement",null,null],"text":"i.e. https://github.com/ten1seven/what-input\nRefs https://github.com/twbs/bootstrap/pull/19708#issuecomment-208103768\nRefs https://github.com/twbs/bootstrap/issues/19968#issuecomment-221686064\n\nThis would allow us to robustly prevent sticky `:hover` styles and prevent non-keyboard interaction from triggering `:focus` on `<button>`s etc.\n\n@patrickhlauke Any other arguments/details you'd like to present?\n"},{"labels":[null,null,"enhancement",null],"text":"I did search everywhere, there is not setup to change modal header color of the background and the chars color!\n\nI try to put class title color and it doesn't work too!\n"},{"labels":["enhancement",null],"text":"Request: ADD typehead or auto complete input boxes with ajax json support\n"},{"labels":["enhancement",null,null],"text":"hi,\ni know there is a plenty of jQuery plugins for:\n`$('textarea').autoResize();`\nbut having an intergrated `.auto-resize` class for the bootstrap.js would be a overload?\n\ncheers, Stefano\n"},{"labels":[null,"enhancement",null],"text":"Would be nice to have a native SVG Icons color-support for the nav-bar. It would just required the `fill` command parallel to the `color` command. \n\nHere is how I made it for my site on Bootstrap v3:\n\n```\n.navbar-inverse {\n    .navbar-nav {\n        > li > a {\n            fill: #9d9d9d;\n\n            &:hover,\n            &:focus {\n                fill: #fff;\n            }\n        }\n        > .active > a {\n            &,\n            &:hover,\n            &:focus {\n                fill: #fff;\n            }\n        }\n        > .disabled > a {\n            &,\n            &:hover,\n            &:focus {\n                fill: #444;\n            }\n        }\n    }\n}\n```\n\ndefault (the SVG is actually black) | with fill command\n![image](https://cloud.githubusercontent.com/assets/2886913/16101731/fa1cf074-3368-11e6-8cd5-8c8789a70dac.png)\ndefault (the SVG is actually black) | with fill command\n![image](https://cloud.githubusercontent.com/assets/2886913/16101733/fc900d28-3368-11e6-9556-8dccfc399839.png)\n\n[talking about this part in the v4 source code](https://github.com/twbs/bootstrap/blob/ac1ea8c26ccb4b65d14bf207974854ca993ea4e5/scss/_navbar.scss#L166-L232)\n"},{"labels":[null,"enhancement",null],"text":"By default, Bootstrap v4 SASS comes with the following settings for `$container-max-widths`:\n\n```\n$container-max-widths: (\n  sm: 576px,\n  md: 720px,\n  lg: 940px,\n  xl: 1140px\n)\n```\n\nWhile I understand that I could use `container-fluid` to get the container width set to 100% **all the time**, I would like to be able to set certain widths to a percentage.\n\nFor example:\n\n```\n$container-max-widths: (\n        sm: 100%,\n        md: 100%,\n        lg: 940px,\n        xl: 1140px\n);\n```\n\nThis makes sure, that on smaller screens, the layout has a nice complete width, while on large screens it is bound to a max-width.\n\nExcept, setting these values causes an error while compiling the sass files:\n`Incompatible units: 'px' and '%'.`\n\nI currently override these values by adding the following to my own sass files, but it would be nice if it could be done directly from within Bootstrap.\n\n```\n@media (max-width: map-get($grid-breakpoints, \"lg\")) {\n  .container {\n    max-width: 100%;\n  }\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"I tried to style the custom checkbox by setting the color of the check mark to black. I expected that setting `$custom-control-checked-indicator-color: $body-color;` does the job but it doesn't work.\n\n`$custom-control-checked-indicator-color` is applied to the [`color` attribute of `.custom-control-indicator`](https://github.com/twbs/bootstrap/blob/v4-dev/scss/_custom-forms.scss#L29). With that, I think, the author intended to enable what I want to accomplish. Instead, however, the `fill` attribute of the background SVG image needs to be changed. But [`$custom-checkbox-checked-icon`](https://github.com/twbs/bootstrap/blob/v4-dev/scss/_variables.scss#L374) as well as [`$custom-radio-checked-icon`](https://github.com/twbs/bootstrap/blob/v4-dev/scss/_variables.scss#L380) hardcode `fill='%23fff'`.\n\nThat said, of course I can now overwrite the `$custom-checkbox-checked-icon` variable and hardcode a different `fill` value.\n\nBut there is a very neat Sass-based solution that allows to automatically compile the icon with the intended `$custom-control-checked-indicator-color` value: http://codepen.io/noahblon/pen/xGbXdV\n\nThe big question now is if the solution is helpful for everyone. For people like me who only want to change the colors it is definitely good. For people who want to use their own SVG icons might get confused when they just want to paste their own SVG string because they have to understand the function.\n"},{"labels":[null,"enhancement",null],"text":"As it stands at the moment the media object only really caters for desktop / small tablets.\n\nI feel the media object is in need of a class / classes to break the media object into 2 rows at a certain break point.\n\nI realize this is something that could be achieved with a column grid however, the columns are set at specific sizes and wont work for instances where the image is defining the column width.\n\nThis could be as simple as `media-sm` although I am putting it out there for suggestions.\n\nIn many occasions I find the thumbnail image is larger than 64x64 for example in blog listings. This works for small devices but in places where the image is 256x256 or even 512x512 the media object isn't as effective.\n\n![example](https://cloud.githubusercontent.com/assets/3974301/15985318/d309e176-2fe0-11e6-849d-6164e0899a55.PNG)\n"},{"labels":[null,"enhancement",null],"text":"Compiler says they are undefined.\nBut if I'm adding it through jquery\n`$(elem).addClass('input-group-sm')` it works well.\n\nI think it would be better to fix it, because in my case it is the easiest and quite clean way to add necesarry styling to element and it can be useful for others/\n"},{"labels":[null,"enhancement",null],"text":"Hi Bootstrap Developers,\n\nAny plans on including alignment classes when flexbox is enabled? This would actually make it easier for developer to build their website easier and quicker.\n\n**Examples**\n\n```\n.pull-top {\n    align-items: flex-start;\n}\n\n.pull-bottom {\n    align-items: flex-end;\n}\n\n.pull-middle {\n    align-items: center;\n}\n\n.pull-center {\n    justify-content: center;\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"`<button>` is a best tag for clickable control elements which are not links (well, just buttons) from semantics and accessibility point of view and it default browser styling is ugly and nobody uses it.\n\nEach time you have a close button, button in custom select or anything else you have to add a custom reset class or use `.btn-link` and add a bit less reset styles anyway. I propose reseting button default styles on `<button>` tag.\n"},{"labels":[null,"enhancement",null],"text":"Now, by default all columns float to the left, if I want to make it float to right I need to add ''pull-right'' atrr\nto every Col or overide the default by css for each size of column. \n\nSo in V4, is it possible to add one variable in the Sass file to control the float direction of all columns size?\n"},{"labels":["enhancement",null,null],"text":"would be great if, bootstrap comes with the option of stack modals together with the background overlay, some people are trying to do it with some hacks, like this [StackOverflow Post](http://stackoverflow.com/questions/19305821/multiple-modals-overlay)\n\nexample:\n\n``` js\n$('#myModal').modal('stack');\n```\n"},{"labels":[null,"enhancement",null],"text":"I'd suggest to add display:flex to utilities \nthis will be need a lot i guess.\n"},{"labels":["enhancement",null],"text":"When studying the website of Bootstrap Docs, I was resizing my browser to test the intricacies of columns and rows. However, when I did so, the page keeps jumping up and down, making it very hard for me to focus on the change that happened. I had to scroll to the correct location every time I stopped resizing the browser width. \n\nSuggestion for a feature: to make websites built with Bootstrap always focus on the same exact location no matter what happens with resizing the browser.\n\nThis will furthermore improve user experience.\n\nI am using:\n\nMac OS El Capitan 10.11.5, MacBook Pro Late 2013 Model, Chrome latest version, Bootstrap latest version.\n"},{"labels":[null,"enhancement",null,null],"text":"Feature Request\n\nhttp://materializecss.com/cards.html#reveal\n"},{"labels":["enhancement",null,null],"text":"Bootstrap 3 supports multiple targets for tab controls - http://stackoverflow.com/questions/19719653/control-multiple-tab-contents-with-one-nav-tabs \n\nBootstrap 4 does not support this, yet, but it is a useful feature. I have added a basic workaround for time being:\n\nfile: /js/src/tab.js\n\nline: 116\n`\n target = $(selector)[0]\n`\nto \n`\ntarget = $(selector)\n`\n\nline: 138\n`\nthis._activate(target, target.parentNode, complete)\n`\nto\n`\nfor (i=0; i<target.length; i++) {\n    this._activate(target[i], target[i].parentNode, complete);\n}\n`\n"},{"labels":[null,null,"enhancement",null],"text":"I'm fiddling with Bootstrap 4 and I really like how you can apply different components via `@include make-row();` etc. But currently I don't know how to apply e. g. forms or headline styles.\n\nI wonder: will it be possible to apply forms, headline styles etc. just like this? (Let's say `@include form-group();` and `@include h1();`)\nIs it just not there because version 4 is still alpha? Or is it supposed to work in a different way? Or not at all?\nAnd if it works the way I imagine, will the docs include a SCSS version of all components or a general documentation \"how to work with SCSS\"?\n"},{"labels":[null,null,"enhancement",null],"text":"The most common use case for me when using the `hidden-*-down` and `-up` classes is to hide button labels on phone screens and similar use-cases. This is a sensible thing to do, and would result in markup like follows:\n\n```\n<a class=\"btn\" href=\"https://google.com\">\n   <i aria-hidden=\"true\" class=\"fa fa-search\"></i>\n   <span class=\"hidden-sm-down\">Go to google</span>\n</a>\n```\n\nThe issue here, is that for accessibility features on the phone (like VoiceOver), the text of the button will now be hidden, and it will simply read \"Button\". This is fixed right now by using the `aria-label` tag on the button element:\n\n```\n<a class=\"btn\" href=\"https://google.com\" aria-label=\"Go to google\">\n   <i aria-hidden=\"true\" class=\"fa fa-search\"></i>\n   <span class=\"hidden-sm-down\">Go to google</span>\n</a>\n```\n\nThis will be read correctly even on mobile screens. However, this result in needless repetition in the HTML, when the same effect could be acheived if we had a `sr-only-sm-down` utility class, like follows: \n\n```\n<a class=\"btn\" href=\"https://google.com\">\n   <i aria-hidden=\"true\" class=\"fa fa-search\"></i>\n   <span class=\"sr-only-sm-down\">Go to google</span>\n</a>\n```\n\nThis will correctly read in VoiceOver on the iPhone, remaining universally accessible. I suggest these classes should be added to standard bootstrap 4. To make it easier to create accessible websites\n"},{"labels":[null,"enhancement",null],"text":"As alluded to in #19942, right now v4 is flex or no flex. Could be rad to allow more opt-in use of flex with additional utilities and examples without enabling flex completely.\n"},{"labels":[null,"enhancement",null],"text":"I heard Bootstrap 4 was going to be including support for utilizing flexbox out of the box with the framework and was excited; but not just starting to use the alpha version available I have noticed that using flex is a \"use it for everything\" or not at all and personally I find that rather annoying.\n\nWhy not just add additional classes which use flex rather than floats and then we can pick and choose on what elements we want to use flex on and what ones we prefer to use floats on?\n\nUnfortunately because of thi9s I won't be enabling flex in bootstrap and will continue to applying it manually like I was doing in V3. :(\n"},{"labels":["enhancement",null,null],"text":"Something really common while making Webdevelopment is when a user clicks a button, it never gets clicked once, its always twice or multiple times, which sometimes makes the form element to send the same amount of times which of course creates bugs and duplicated items. \n\nWe always have to input Javascript code on each button to avoid this behavior, which of course is very annoying. It could be great if there is a class, option or label were we can disable the button after the first click. \n\nWe usually do this using jQuery \n\n`onClick=\"$('button').prop('disabled', true);\"`\n\nBut it would be a great improvement in user experience to have a simple label, class, option, etc, which automatically does the job. \n\nBest regards, \n- Flavio\n"},{"labels":["enhancement",null,null],"text":"I would like to use a popover but pass 'center middle' as the attachment value to Tether.\n\nThe tooltip AttachmentMap only allows 4 values. Would it be possible to pass the input value through if it is not found in the AttachmentMap? Or maybe add a center mapping?\n"},{"labels":["enhancement",null,null],"text":"I am using Bootstrap 2 right now, with several, reused / custom made solutions for modal stacking. \nI am aware there is http://jschr.github.io/bootstrap-modal/ for Bootstrap 3.\n\nBut what about Bootstrap 4? Are there any internal efforts / external efforts to get this going? At least for me, thats a / the deal breaker.\n\nThanks\n"},{"labels":["enhancement",null],"text":"Hi\nIt been create if in Bootstrap 4 dropdown on hover will be added natively. And we you could add mega menu too that would be awesome. Just Wanted this feature as most site use dowpdown on hover not on click.\n"},{"labels":[null,"enhancement"],"text":"Installing Bootstrap to a website means a lot of data that has to be transferred. If you use all of the great features this is not a big problem, but if you only use some features as the grid system you may do not want to transfer the complete bootstrap installation.\n\nSo it would be awesome if a developer could include (by sass) only the features to his stylesheet that he really needs. This has several advantages. First, you only need one .css file which is great for SEO, secondly you do not transfer unused styles to the user and furthermore it would be much more easy to style the website as you don't have to overwrite the bootstrap defaults on elements you don't want to have the bootstrap styles.\n\nHoping, that this feature will be included in the fourth version of bootstrap.\nThanks a lot in advance.\n"},{"labels":[null,"enhancement",null],"text":"A common scenario for buttons is to contain either text, icons or icons with text.\nIn the case of a button containing an icon with text, the icon obviously needs some margin to get some spacing to the text. If the button just contains an icon, the icon doesn't need any margin. \nOf course it's easy to write custom classes for this scenario, but it would be great to have a native bootstrap solution that doesn't require any additional markup or classes. \n\n![buttonwithicon](https://cloud.githubusercontent.com/assets/10029073/15140031/7caecba8-1699-11e6-9a65-ed1e49ba15a6.png)\n"},{"labels":[null,"enhancement",null],"text":"When using the `.has-danger`/`.form-control-danger` classes on a `.c-select` custom menu, the `.c-select`'s `background-size` overrides the `.form-control-danger`'s, making the validation icons really tiny.\n\nJSFiddle: https://jsfiddle.net/rjp4ys24/2/\n\nScreenshot (\"Name\" is a text input and looks correct; \"Country\" is the custom select menu):\n\n![validation](https://cloud.githubusercontent.com/assets/4731/15086463/aa7ed82a-13a6-11e6-8520-e482dd58aa5e.png)\n"},{"labels":[null,"enhancement",null],"text":"Hello, \nCould you please add submenus in version 4 and update the examples. I think sub-menus are very important and every need that. I searched for that in this repository but couldn't find that. If you have already add that please give me update links.\n\nI have found something for Bootstrap 3.3.6 from \"Vasily\" in here: https://vsn4ik.github.io/bootstrap-submenu/\n\nThanks from your great CSS.\n"},{"labels":[null,"enhancement",null],"text":"Bootstrap needs a .text-gray-dark utility class.\n\nCurrently .bg-danger on an ancestor will set all child paragraph text font color to #fff.\n\nA .text-gray-dark utility  would be useful for a situation where you wanted to override an ancestor .bg- class changing color to white\n"},{"labels":[null,"enhancement",null],"text":"Hi there.\nI'm facing an inconsistency issue (between Firefox and Chrome) when using `float`s on a multi-line \"form\" that contains `input-group`s, as [demonstrated here](http://jsfiddle.net/chvg8v9z/31/).\n![image](https://cloud.githubusercontent.com/assets/1295829/15010608/a4e84138-11f5-11e6-9c37-8c2f7cd96ad3.png)\n\nA [workaround that I ended-up was to wrap every `input-group` with a `form-inline`](http://jsfiddle.net/chvg8v9z/32/), but obviously this doesn't have exactly the same result.\n![image](https://cloud.githubusercontent.com/assets/1295829/15010690/090a08f4-11f6-11e6-95a8-a47cb682e1be.png)\n\nAfter some hours of searching and since I couldn't find something relevant (sorry if this ends up to be a duplicate), I decided to report this here and get an official suggested way to approach this use case (which would hopefully be useful to others as well).\n\nTested with Bootstrap v3.3.6 on Firefox 48.0a2 and Chrome 49.\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nDuring a recent mock-up of a site using V4 alpha 2 it was required to remove the gutter on particular columns allowing the content inside the column to issue the padding and the two columns to line up side by side with no space between.\n\nI created the classes `.ng`, `.ng-[$break-point]-l`, `ng-[$break-point]-r`, these have actually come in pretty useful and with the use of Sass to; `$enable-no-gutters : true/false`, it could also come in handy depending on the build requirements.\n\nTo make it truly useful I feel it would need to have the same principles as the \"Available classes\" on the \"Responsive utilities\" page of the docs. Again if this is opt in or out it is down to the designer or developer if they are happy with the extra code.\n\nMy reason for removing the the padding is that on smaller screens to make certain components optimized I did not want the double padding from the column and then the component.\n\nI had also used the classes again when adding some block buttons to the bottom of a column that I wanted stretched to either side of the column.\n\n[You can take a look at the project here.](http://codepen.io/Craig-Watson/pen/vGVbVK/)\n\nIt is just a rough mock-up so excuse and unused classes or unfinished business as I will still be working on it in the coming days.\n\nApologies if this is of topic im still getting used to github.\n\nCraig\n"},{"labels":[null,"enhancement",null],"text":"There should be an easy way to customize the color of the `.card` background. \n\nRight now the colors are hard coded inside https://github.com/twbs/bootstrap/blob/1a6d0cc446259cf86d73bf7437f2ca3b095f6781/scss/_card.scss#L123-L141\n\nInstead there should be a default similar to this:\n\n``` scss\n// Cards\n$card-spacer-x:            1.25rem !default;\n$card-spacer-y:            .75rem !default;\n$card-border-width:        1px !default;\n$card-border-radius:       $border-radius !default;\n$card-border-color:        rgba(0,0,0,.125) !default;\n$card-border-radius-inner: $card-border-radius !default;\n$card-cap-bg:              #f5f5f5 !default;\n$card-bg:                  #fff !default;\n$card-primary-bg:          $brand-primary !default;\n$card-success-bg:          $brand-success !default;\n$card-info-bg:             $brand-info !default;\n$card-warning-bg:          $brand-warning !default;\n$card-danger-bg:           $brand-danger !default;\n\n$card-link-hover-color:    #fff !default;\n```\n"},{"labels":[null,"enhancement",null],"text":"I hope to support RTL\n"},{"labels":[null,"enhancement",null],"text":"Hi, I use Bootstrap 3 in many occasions. I'm not sure if the RTL problems I fix are caused due to the Drupal Bootstrap themes that are built in a total LTR paradigm, or it is the Bootstrap 3 release that itself doesn't fully support RTL...\n\nIs Bootstrap 4 going to be different in that manner? Maybe I could report and contribute fixes that deals with RTL if not...\n"},{"labels":["enhancement",null],"text":"Would really like to see a better Carousel\n"},{"labels":[null,"enhancement",null,null],"text":"It would be really nice to have a custom file control which would style like a link, as the one GitHub uses for attaching files to issues.\n\n![screen shot 2016-04-15 at 13 03 13](https://cloud.githubusercontent.com/assets/851745/14559678/c118c28c-030a-11e6-8813-fee4c9c61ce7.png)\n\nWhat do you think?\n"},{"labels":[null,"enhancement",null],"text":"Are there any ways in BS4 right now to make a grid (let say two columns) with left column fixed width? If no, how would you recommend to do it using BS4 grid framework?\n"},{"labels":[null,"enhancement",null],"text":"It would be really nifty if we had something like the btn-xs in Bootstrap 3, since it allowed to easily add buttons to tables. I think it's a pretty common use case to have tables of data with \"Edit\", \"Remove\" etc. buttons at the right end of it. \n\nThis is how it looks with btn-sm, it's a bit too big. \n\n<img width=\"493\" alt=\"screen shot 2016-04-10 at 15 26 37\" src=\"https://cloud.githubusercontent.com/assets/773926/14413492/bd8bdbdc-ff30-11e5-9c45-00aa32d1c7da.png\">\n"},{"labels":[null,"enhancement",null],"text":"Please consider to make a RTL version of Bootstrap. \n\nI know that there are some RTL forks, but it doesn't support well, and they not update for each version of Bootstrap.\n\nHope you will make that.\n"},{"labels":["enhancement",null,null],"text":"Hi Bootstrap Team,\n\nIs it possible to have multilevel dropdown menus for the navbar and others like buttons, pills, ect... in Bootstrap 4?\n\nKeep up the good work!\nThanks,\n\n**Sam**\n"},{"labels":[null,"enhancement",null],"text":"It would be nice to have printing specific grid columns, i.e. `col-pr-*` that is nested in a @media print\n\nI have an external mixin that uses:\n\n``` scss\n$print-breakpoints: ( pr: 0 );\n\n@media print {\n  .hidden-pr,  // alias for .hidden-print\n  .col-pr-0 { display: none !important; }\n  @include make-grid-columns($grid-columns, $grid-gutter-width, $print-breakpoints);\n}\n```\n\n(...but _make-grid-columns_ does not add the `!important` bit to the end of the `width` in `col-pr-*` items ☹)\n\nThis would help in developing rich printed output and one could create printed media that behaves differently to the screen versions.  e.g. one could print only the content of a page with side bar:\n\n``` html\n<div class=\"row\">\n  <div class=\"col-md-4 col-pr-0\">\n    Sidebar here, but not printed\n  </div>\n  <div class=\"col-md-8 col-pr-12\">\n    Content here, but full width when printed\n  </div>\n</div>\n```\n"},{"labels":[null,null,"enhancement",null],"text":"One thing I'm struggling with (but loving at the same time) on V4 is the new responsive classes.\n\nFor instance, I want to hide a piece of text wrapped in a span when the viewport is medium.\n\nBased on the docs:\n\n> You can combine one `.hidden-*-up` class with one `.hidden-*-down` class to show an element only on a given interval of screen sizes.\n\nSo given the grid:\n\nhttp://v4-alpha.getbootstrap.com/layout/responsive-utilities/\n\nI should be able to do:\n\n```\n<span class=\"hidden-md-down hidden-md-up\">Content</span>\n```\n\n... as the summation of those two leads to the medium column being hidden.\n\nAlas this does not work, the content in the span is ALWAYS hidden.\n\nAny pointers?\n\nThank you =)\n"},{"labels":["enhancement",null,null],"text":"Would it be possible to add a `placement` setting/property for the `$.dropdown()` plugin in V4?\n\nFor instance, it would be awesome to have a dropdown/dropup/dropleft/dropright feature for button dropdowns.\n"},{"labels":["enhancement",null,null],"text":"Hello, I would be glad if I could add Numeric shaping feature at Bootstrap v4\nArabic and many other languages (Thai and Bengali) have classical shapes for digits “National Digits\" that are different from the conventional Western Digits (European).\n\nNational digits have the same semantic meaning as the European digits, and the numbers they form are read from left to right (most significant digit on the left). The difference is only a difference in glyphs.\n\n| European Digits | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |\n| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |\n| **Arabic-Indic Digits** | ٠ | ١ | ٢ | ٣ | ٤ | ٥ | ٦ | ٧ | ٨ | ٩ |\n\nFrom the Arabic user's point of view, Arabic-Indic numerals are the basic numerals used in almost all forms of documents such as most of government documents (IDs, birth certificates, driver's licenses, passports and household bills), bank statements, newspapers, calendars, road signs and menus.\n\n<br>\n### Options for Arabic Numeric Shaping\n\nThere are 3 options which should be taken into consideration when implementing national numeric shaping support in any framework/technology. These options are:\n- **None**: No shaping is performed, and the value appears as it is in the data source.\n- **National**: Digit shapes are determined from the user’s language.\n- **Contextual**: Digit shapes are determined from the preceding characters in the buffer. European digits follow strong Latin character and Arabic-Indic digits follow strong Arabic character.\n  When there is no preceding strong characters, the base text direction attribute determines the digit shaping.(Arabic-Indic digits in RTL context and European digits in LTR context).\n\n| **Pseudo Sample** | 123 abc 456 _ARABIC_ 789 |\n| --- | :-- |\n| **Arabic Sample** | 123 abc 456 أبجد 789 |\n| **Sample Buffer** | ![sample buffer](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/buff.png) |\n\n| Option | LTR Context | RTL Context |\n| --- | --- | --- |\n| None | ![](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/01.png) | Same as LTR. |\n| Contextual | ![](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/02.png) | ![](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/03.png) |\n| National | ![](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/04.png) | Same as LTR |\n\n<br>\n### Problem Statement\n\nMost of the available frameworks/technologies lack the contextual shaping option of national digits. Contextual digit shaping is a very important feature as the Arabic users don’t expect to see Arabic-Indic numerals or European numerals only when they have mixed English and Arabic data. \n\nFor example if a document has many paragraphs some in Arabic and others in English, in the Arabic paragraphs the Arabic users expect to see national or Arabic-Indic numerals, and in the English paragraphs the Arabic users expect to see European numerals.\n\nSince the mixed English and Arabic data cases are very common in Arabic region, the same case with numerals is very common too.\n\n| ![Figure 1](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/fig1.png) |\n| :-: |\n| Figure 1: Sample communication thread using IBM Lotus Notes |\n\n| ![Figure 2](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/fig2.png) |\n| :-: |\n| Figure 2: Sample Arabic and English list of references. |\n\nArabic paragraphs that list references’ names(which include numerals) are very common for Arabic users as well. In that case the Arabic users expect to see the numerals as European not Arabic-Indic.\n\n| ![Figure 3](https://raw.githubusercontent.com/ACGC/national_numeric_shaping_draft/master/images/fig3.png) |\n| :-: |\n| Figure 3: Sample Arabic paragraph where users expect to see European numerals. |\n\n<br>\n\n**_So direct conversion of digits from latin to national will not fulfil Arabic users’ needs.\nContextual behavior is the core numeric shaping option that is needed from the Arabic users’ point of view._**\n<br>\n\n**# About how to do that at Bootstrap:**\nI will add a function at each js file under JS folder to support digit shape at each component\nAnd the core numeric shape js file will be placed at a separate util module \n"},{"labels":["enhancement",null,null],"text":"Tether js for dropdowns?\n\nI like the improvements Tether provides for tooltips/popovers in bootstrap v4. Is there a reason it was not implemented for dropdowns?\n\nThis would help with having dropdowns flow outside of overflows, as well as positioning.\n\nExample:\nhttps://jsfiddle.net/719media/0f8vc7td/\n\nThe idea here is that I should not have to write custom event handlers to capture the dropdowns and introduce tether.\n"},{"labels":[null,"enhancement",null,null],"text":"Sticky table headers are a key concept on all mobile platforms. Since the display sizes are quite small, you usually can't see the table header any more if the height of the table is bigger than the height of the screen. The project [stickyRows](http://maslianok.github.io/stickyRows/default.html) gives a good demonstration of what I mean.\n\nThis project is a bit too complicated though, because it includes handling of different types of table headers and stacking of those. What I think should really be part of Bootstrap 4, is a class like `.table-sticky-header` (similarly to `.navbar-fixed-top`) that you can add to each `.table` and then Bootstrap does the rest and always keeps the current `<thead>`-section on the top until the last row scrolled to the top or the next `<thead>`-section goes up.\n"},{"labels":[null,"enhancement",null],"text":"I was thinking, a lot of people do not need all of what bootstrap has to offer. And some might want a subset of classes from a module. Take for instance if my app has no need for the outline buttons.\n\nI am aware there are tools that exist which will scan over your site and find usage and report accordingly. But it would be a cool feature to have.\n\nThe idea is that every class definition would use the placeholder syntax, then in the variables we have a list of all classes to hoist, which we then loop over and create by extending the placeholder.\n\n```\n// _buttons.scss\n%btn-outline-primary {\n  ...\n}\n\n// _variables.scss\n$classes-to-hoist = \"btn-outline-primay\", ... !default;\n\n@each $class in $classes-to-hoist {\n  .#{$class} {\n    @extend %#{$class};\n  }\n}\n```\n\nThe only pain would be maintaining this list.\n\nCurious on other people's thoughts.\n"},{"labels":[null,null,"enhancement",null],"text":"As the version 3 for boostrap is coming to its latest release, it would be interesting to add an offiial RTL support atop of it.\n\nThis could be done that easily and a patch for that is already implemented and is now been polished by @MohammadYounes in https://github.com/MohammadYounes/RTL-bootstrap/commit/3be91ac69ddd92a47e1e53bcebe2b80b3d04b30e#diff-f3e99e0bb007ace7a370f0492b9cb5ab\n\nit would be great if bootstrap could offer off the shelf the following additional files:\n- boostrap-rtl-inline.css\n- bootstra-rtl-inline.js\n\nthose files could then be used by the users that want to go for that and any app would be able to be in RTL by simply using the HTML dir attribute: https://www.w3.org/International/questions/qa-html-dir\n"},{"labels":[null,"enhancement",null],"text":"Sometimes we need different margin size based on different screen size.\n\nEx:\n`m-y-3` is good for desktop, but `m-y-1` is best for mobile for same div area. \n\nJust like we have `text-xs-center` and `text-sm-left`\n\nI think we should have similar for padding and margins.\n\n```\np-xs-y-3\nm-xs-y-3\nm-sm-y-3\n```\n\nThis will make it true responsive support for margin and padding. \n"},{"labels":["enhancement",null],"text":""},{"labels":["enhancement",null,null],"text":"This would be great, as it's not easy at the moment\n"},{"labels":[null,"enhancement",null],"text":"I want to be able to select in scss variables use pixel then rem. For example some generator like DocRaptor doesnt understand rems.\n"},{"labels":[null,"enhancement",null],"text":"Hey guys. Its really powerful framework ever. I have one request for you. Are you going to add RTL support on bootstrap 4 or not?\n"},{"labels":[null,"enhancement",null],"text":"If you see majority of websites, The quotes / testimonials are center aligned. So its good to make a center-aligned blockquote. \n\n``` html\n<blockquote class=\"blockquote blockquote-center\">\n  <p class=\"m-b-0\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>\n  <footer class=\"blockquote-footer\">Someone famous in <cite title=\"Source Title\">Source Title</cite></footer>\n</blockquote>\n```\n\nOptional: Add an Image Avatar at top in the Docs using existing classes?\n\nPS: Is that search button on the documentation actually works? I did a search for \"blockquote\" but returned no result found :(\n\n~Surjith\n"},{"labels":[null,"enhancement",null],"text":"Title says its all. There is nothing doing anything with the audio-width.\n\nMy own fix is:\n`audio {\n    width: 100%;\n}`\n"},{"labels":[null,null,"enhancement",null],"text":"Would it be possible/useful to use responsive classes for per class basis. That is something like `responsive-*-down-class` or `reponsive-*-up-class` where class is any bootstrap (or possible personal) class and \\* is sizes xs, sm, md, lg?\n\nSo for example right now I can do some like this\n\n``` html\n<h4 class='title hidden-xs-down'>I am a title in large, but small in tiny</h4>\n<h4 class='small hidden-sm-up'>I am a title in large, but small in tiny</h4>\n```\n\nbut could you have something like\n\n``` html\n<h4 class='responsive-sm-up-title responsive-xs-down-small'>\n  I am a title in large, but small in tiny\n</h4>\n```\n\nmaking the element itself responsive. I found my own cases for this, but the situation can be solved already with the first code snippet. Wasn't sure if this feature could open up possibilities for making more responsive elements.\n"},{"labels":[null,"enhancement",null],"text":"Hello,\n\nI have made some improvements to the flex row contained in core_grid.scss\n\n``` scss\n@each $breakpoint in map-keys($grid-breakpoints) {\n    @include media-breakpoint-up($breakpoint) {\n      .row-#{$breakpoint}-top    { align-items: flex-start; justify-content: flex-start; }\n      .row-#{$breakpoint}-center { align-items: center; justify-content: center; }\n      .row-#{$breakpoint}-bottom { align-items: flex-end; justify-content: flex-end; }\n      .row-#{$breakpoint}-between { align-items: center; justify-content: space-between; }\n      .row-#{$breakpoint}-around { align-items: center; justify-content: space-around; }\n      .row-#{$breakpoint}-stretch { align-items: stretch; justify-content: center; }\n    }\n  }\n```\n\nBy adding justify-content and creating between/around/stretch classes, I now have even more access to displaying UI elements utilizing flex.\n"},{"labels":[null,"enhancement",null],"text":"Hi Developers,\n\nDo your have any plans to introduce block grids similar to Foundation ones in v4?\n"},{"labels":[null,"enhancement",null],"text":"Currently, we can give a component an inverse background color using the `.bg-inverse` class. However, `.bg-inverse` is hard set to use `background-color: $gray-dark`. \n\nNon-gray dark bg's are pretty common, so It'd be great to have a `$background-color-inverse` sass var in _variables.scss that could be referenced directly, and by utility classes like `bg-inverse`.  \n\nLet's give dark colors some love! :rainbow: \n"},{"labels":[null,"enhancement",null,null],"text":"Hi, really like the first and the last one\nhttps://github.com/lukehaas/css-loaders\ndemo :http://projects.lukehaas.me/css-loaders/\n"},{"labels":[null,"enhancement",null],"text":"Hello @mdo, \nI am interesting to add GUI mirroring feature at bootstrap, and following is the approach that I will follow:\n(https://cloud.githubusercontent.com/assets/17547411/13808034/d55512ce-eb6c-11e5-99de-b85e489e93f4.jpg).\n"},{"labels":["enhancement",null,null],"text":"Is it possible to extend the `$.modal` plugin to add addional helper methods for setting titles and body/contents of a specific modal within it's scope, lets say like this:\n\n```\n$('#exampleModal').on('show.bs.modal', function (event) {\n  var button = $(event.relatedTarget) // Button that triggered the modal\n  var recipient = button.data('whatever') // Extract info from data-* attributes\n  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).\n  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.\n  var modal = $(this).getModalInstance();\n  // or\n  var modal = $.getModalInstance(this);\n  // or\n  var modal = $(this); // I belive additional methods can be added within this scope of this or any event of the modal component, or maybe prototype-ed...\n\n  modal.title('New message to ' + recipient);\n  modal.body().find('input').val(recipient);\n  // or\n  modal.body('Contents of the modal\\'s body...');\n})\n```\n\nIn this example, the `title()` and `body()` methods would return the DOM/jQuery object of related elements if no arguments are supplied and in that way we'd avoid finding/typing `.modal-title`' and `.modal-body` classes and might be helpful.\n\nOr via `data-` attributes, or with options object, like, lets say:\n\n```\n{\n   title: 'Some modal title.',\n   body: 'Some awesome body.'\n}\n```\n\nAnd those could be catched with methods I've mentioned above.\n\nSame can be applied to the `.modal-footer` as well...\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nI would like to request the functionality to be able to pin the left side and the header and then allow the rest of the table area to be scrollable.\n\nI couldn't find this in the documentation of the bootstrap 4 but it's a very common functionality to have in for example a grid environment such as Excel or similar.\n\nSearched among the issues but couldn't find a relating issue.\n"},{"labels":[null,"enhancement",null,null],"text":""},{"labels":[null,"enhancement",null],"text":"I need to create custom button variant and simply darkening input colours is not suitable.\n"},{"labels":[null,"enhancement",null],"text":"It would be really nice if bootstrap included a generic class to align the contents of a div to the right (a center-align class would be nice as well). I couldn't find a way to do this that worked correctly inside of a column div on Bootstrap 4.0.0.alpha3\n\nExample:\n\n```\n.align-right\n{\n  text-align: right;\n}\n\n<div class=\"align-right\">\n  Right-Aligned Text\n</div>\n```\n"},{"labels":[null,"enhancement",null],"text":"I'd like to see column dividers with media breakpoints something like the following:\n\n```\n$divider-height: 100%;\n\n@mixin make-column-dividers($breakpoints: $grid-breakpoints) {\n    // Common properties for all breakpoints\n    %col-divider {\n        position: absolute;\n        content: \" \";\n        top: (100% - $divider-height)/2;\n        height: $divider-height;\n        width: $hr-border-width;\n        background-color: $hr-border-color;\n    }\n    @each $breakpoint in map-keys($breakpoints) {\n        .col-#{$breakpoint}-divider-right:before {\n            @include media-breakpoint-up($breakpoint) {\n                @extend %col-divider;\n                right: 0;\n            }\n        }\n        .col-#{$breakpoint}-divider-left:before {\n            @include media-breakpoint-up($breakpoint) {\n                @extend %col-divider;\n                left: 0;\n            }\n        }\n    }\n}\n```\n\nhttps://gist.github.com/robmoggach/316f3f2b66c26173c076\n"},{"labels":[null,"enhancement",null],"text":"Hello everyone,\n\nIt would be nice to add default values in each .sass component rather than put everything only in _variables.sass. It would encourage reuse of specific Bootstrap components without the need to add all variables or to define all of them.\n\nI also believe it would simplify the custom Bootstrap build generator.\n\nObviously, it may not be possible for all components that depend on each other. But it may be discussed.\n"},{"labels":[null,"enhancement",null],"text":""},{"labels":[null,"enhancement",null],"text":"Are there any current plans to implement helper classes for flexbox i.e.\n\n`.flex-start {align-items: flex-start}`\n\nor even something like:\n\n```\n.row-start {\n//current row styles\nalign-items: flex-start\n}\n```\n\nSeems like there is only flexbox grids in (really awesome by the way) but no (boostrap) way of manipulating flexbox. Doesn't seem completely in-keeping with the bootstrap ethos!\n\nThanks!\n"},{"labels":["enhancement",null,null],"text":"Like native selects are displayed at top of the input when height between input and window bottom corner is too small to show select items.\n\nbs4 dropdown js should check for this condition too, if you have dropdown in footer, some options are otuside of screen. Below is my code you can adapt to your version.\n\n``` es6\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.getElementsByClassName('dropdown').forEach((el) => {\n        // get toggle button\n        let btn = el.getElementsByClassName('dropdown-toggle')[0];\n        // get menu\n        let menu = el.getElementsByClassName('dropdown-menu')[0];\n\n        // is dropdown menu style top changed\n        let changed = false;\n\n        // original dropdown menu style top\n        let original_top = menu.style.top;\n\n        // add event listener when dropdown toggles 'open' class\n        new MutationObserver(function(mutations) {\n            if (mutations[0].attributeName === 'class') {\n                if (el.classList.contains('open')) {\n                    // dropdown opened\n\n                    // get space between btn bottom and window bottom corner\n                    let height_to_end = window.innerHeight - btn.getBoundingClientRect().bottom;\n\n                    // get menu height when it becomes visible in browser\n                    let menu_height = menu.offsetHeight;\n                    menu_height += 5;\n\n                    // if menu_height > height_to_end - display menu up not down\n                    if (menu_height > height_to_end) {\n                        menu.style.top = '-' + menu_height + 'px';\n                        changed = true;\n                    }\n                } else {\n                    // dropdown closed\n\n                    if (changed) {\n                        // restore style only if it was changed\n                        menu.style.top = original_top;\n                        changed = false;\n                    }\n                }\n            }\n        }).observe(el, { attributes: true });\n    });\n});\n```\n"},{"labels":[null,"enhancement",null],"text":"Currently `.dropdown-menu` has `min-width`, while dropdown button dont have any width.\n\nMay be add a custom class to make dropdown button same min-width as `.dropdown-menu` item?\n\nImage example in #19444\n"},{"labels":["enhancement",null,null],"text":"As the title says, can you add support for jQuery 3.\n"},{"labels":[null,"enhancement"],"text":"To allow developers to configure and style the framework more easily to their needs, developers should be allowed to upload their project source code when editing the Bootstrap style sheets. For example, the changes to the Bootstrap style sheets can be done on the left of the screen, whereas the right side would show a preview of the resulting implications to his project by the changes, similar to https://jsfiddle.net/.\n\nPlease let me know what you think about this possible improvement.\n"},{"labels":[null,null,"enhancement",null],"text":"The [customize](https://getbootstrap.com/customize/) page provides an overview of all style sheet values that can be changed to suit a developer's needs. However, most style sheet rules (in both the source code and the customize page) and the description of their responsibilities and their implications are limited or even non-existing. \n\nIn order to make the project more easily configurable, all non-self-explanatory style rules should be documented so that developer's know how and where to alter the styles. This will also overcome the issue of less experienced developers creating unnecessary issues.\n\nPlease let me know what you think of this possible improvement.\n"},{"labels":[null,"enhancement",null],"text":"Hello\n\nIf I set a container as a row using flex box, shouldn't its elements spread across and split the available space without have to give each column a size?\n\n`<div class=\"row\">\n\n<div>column 1</div>\n\n<div>column 2</div>\n\n<div>column 3</div>\n\n<div>column 4</div>\n\n</div>`\n\nif we had something like:\n\n`.row > * { flex: 1 0 auto}`, this should work automagically.\n"},{"labels":["enhancement",null,null],"text":"This is a suggestion I have from a long time. I thought it was missing in version 3, and it might be well to allow it in version 4.\nWhen we want to customize the popover (width, content padding...) we actually do not have other choice that to redefine the full template, which is not very readable, maintainable and evolutive.\nA better option might be to allow to add a class to the popver, so we could add our custom styles to this class without impacting all the popovers.\n\nExample :\n\n```\n.popover-custom .popover-content {\n  padding: 0;\n}\n\n$('#foo').popover({\n  title: ...,\n  content: ...,\n  class: 'popover-custom'\n});\n```\n"},{"labels":[null,"enhancement",null],"text":"rt,thanks\n"},{"labels":["enhancement",null,null],"text":"Hi,\nI love bootstrap carousel it has many many good options. My problem is with this carousel is it does move only one slide at one time. let me explain to you what i mean.\n\nif user is on first slide and he wants to go lets say number five slide. Carousel will move only one slide and reach on its clicking destination. What I want carousel should scroll all between slides from 1 to 5. This way user will notify i came here to pass four slides.\n\nI hope it makes sense to you.\n\nI will really really appreciate your help it someone tweak the code.\n\nmany thanks\n"},{"labels":[null,"enhancement",null],"text":"Each browser is making his own arrow for `<select>` and Firefox's one is the most ugly. It adds grey block behind arrow which does not have border radius when input has.\n\nI would recommend adding same triangle to all selects as used in .dropdown.\n\nHowever, ::after selector does not work on select tag, it should be wrapped within another class, let say `.form-group-select` and markup will be:\n\n``` html\n<div class=\"form-group-select\">\n   <select ...>\n</div>\n```\n\nThis approach will add custom arrow only when select is wrapped aroung new class and if developers want keep using native UI they still can do it.\n\nFirst, hide native arrows:\n\n``` sass\n// remove browser dropdown arrow and use custom class to add dropdown arrow\n.form-group-select select {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.form-group-select select::-ms-expand {\n  display: none;\n}\n```\n\nAnd now add custom arrow, something like:\n\n``` sass\n.form-group-select::after {\n  content: \"\";\n  border-top: 0.3em solid #999;\n  border-right: 0.3em solid transparent;\n  border-left: 0.3em solid transparent;\n  position: absolute;\n  top: 35%;\n  right: 20px;\n}\n```\n"},{"labels":[null,"enhancement",null,null],"text":"What it does?\n1. if select.form-control has a placeholder attribute\n2. adds a new first option with value=\"\" and content from palceholder attribute\n3. if there are no any option with \"selected\" attribute then also make first option selected\n4. now select has a \"placeholder\" same color as .form-control::placeholder\n5. Enjoy, welcome to 2016 and say good bye to \"stackoverflow: how to add placeholder for select\"\n\nsass:\n\n``` sass\nselect.form-control[placeholder] option:first-child {\n  color: $input-color-placeholder;\n}\n\nselect.form-control[placeholder] option:not(first-child) {\n  color: $input-color;\n}\n\n.placeholder {\n  color: $input-color-placeholder;\n}\n```\n\nand JS for side effects:\n\n``` es6\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.getElementsByTagName('select').forEach((select) => {\n        let placeholder = select.getAttribute('placeholder');\n        if (placeholder !== null) {\n\n            let selected = false;\n            for (let k = 0; k < select.options.length; k++) {\n                if (select.options[k].hasAttribute('selected')) {\n                    selected = true;\n                    break;\n                }\n            }\n\n            let option = document.createElement('option');\n            option.setAttribute('value', '');\n            option.textContent = placeholder;\n            select.insertBefore(option, select.firstChild);\n\n            if (!selected) {\n                select.selectedIndex = 0;\n            }\n\n            if (select.selectedIndex === 0) {\n                select.classList.add('placeholder');\n            } else {\n                select.classList.remove('placeholder');\n            }\n            select.addEventListener('change', () => {\n                if (select.selectedIndex === 0) {\n                    select.classList.add('placeholder');\n                } else {\n                    select.classList.remove('placeholder');\n                }\n            });\n        }\n    });\n});\n```\n\nIf you will upvote this I'll make an ES5 version without my .forEach() added to many oldschool prototypes.\n"},{"labels":[null,"enhancement",null],"text":"You've done new responsive classes which can work in both direction: hide only on large or hide only on small. It would be logical to extend this functionality on other things.\n\nIt would be useful to make column offset only for small device:\n\n``` html\n<div class=\"row\">\n    <div class=\"col-xs-2\">.col-xs-2</div>\n    <div class=\"col-md-4 col-sm-8 col-xs-8\">.col-md-4 .col-sm-8 .col-xs-8</div>\n    <div class=\"col-md-1 col-sm-2 col-xs-2\">.col-md-1 col-sm-2 col-xs-2</div>\n    <div class=\"col-md-5 col-sm-10 col-xs-10 col-sm-down-offset-2 col-xs-down-offset-2\"></div>\n</div>\n```\n\nSo the last column will be with offset only on extra small and small devices.\n"},{"labels":[null,"enhancement",null],"text":"Let say I have a form:\n- name\n- day, month, year (3 inputs in 1 row)\n- form-group3 input\n- ...\n\nAnd want to style row with 3 inputs so each input would save form-group spacing.\n\nI've added new class `.form-row` and there is sass:\n\n``` sass\n.form-row [class^=\"col-\"] {\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.form-row [class^=\"col-\"]:not(:last-of-type) {\n  padding-right: $form-group-margin-bottom / 2;\n}\n\n.form-row [class^=\"col-\"]:not(:first-of-type) {\n  padding-left: $form-group-margin-bottom / 2;\n}\n```\n\nand HTML:\n\n``` html\n    <div class=\"form-group\">\n        <input type=\"text\" class=\"form-control\">\n    </div>\n\n    <div class=\"row form-row\">\n        <div class=\"col-xs-3\">\n            <div class=\"form-group\">\n                <input type=\"text\" class=\"form-control\">\n            </div>\n        </div>\n        <div class=\"col-xs-3\">\n            <div class=\"form-group\">\n                <input type=\"text\" class=\"form-control\">\n            </div>\n        </div>\n        <div class=\"col-xs-6\">\n            <div class=\"form-group\">\n                <input type=\"text\" class=\"form-control\">\n            </div>\n        </div>\n    </div>\n```\n\nAnd now form looks amazing and all inputs have same spacing between each other from all sides.\n\nI also would add the example on how to make inline inputs (not inline-form) into tutorial http://v4-alpha.getbootstrap.com/components/forms\n"},{"labels":[null,"enhancement",null],"text":"Now there are only 2 variables to style focused input:\n\n$input-border-focus\n$input-box-shadow-focus\n\nHowever, there are additional 2 variables to style input and there is no way to change those styles when element is focused:\n\n$input-bg:\n$input-color:\n\nAdding 2 new variables $input-bg-focus and $input-color-focus would fix this.\n"},{"labels":[null,"enhancement",null],"text":"Possible to set only border color for tooltip\n\nSee: http://jsfiddle.net/2htZe/1852/\n"},{"labels":[null,"enhancement",null],"text":"There is a lack of ability to center element based on screen size.\nThis is inconsistent with the general class syntax of bootstrap 4, see below:\n\n**Text Center Evolution**\n`<p class = \"text-center\"> Bootstrap 3 </p>`\n`<p class = \"text-*-center\"> Bootstrap 4 </p>`\n\n**Block Center Evolution**\n`<img class = \"center-block\"/>    //Bootstrap 3`\n\n`<img class = \"center-block\"/> // Bootstrap 4 (current)`\n\n`<img class = \"center-*-block\"/> // Bootstrap 4 (fix)`\n\n**Conclusion**\nCreate \"center-*-block\" classes\n"},{"labels":[null,"enhancement",null,null],"text":"For the moment the button gets darken by 10% when active, for us the shade difference between active and non-active is too small. That'd be nice to be able to be able to change that.\n"},{"labels":[null,"enhancement",null,null],"text":"I think will be great if bootstrap gives choice how navigation getting responsive on mobile with slide-direction and some framework offer tooltips like a tour pointing element of website by sequence to help user understand web app feature or functionality of something..\n"},{"labels":[null,"enhancement",null],"text":"Many Frameworks have Sidebars available out of the box.\n\nWhat about a customisable sidebar? It seems to be the only thing i have an issue with is creating my own sidebar.\n\nGreat for people building admin panels, one less thing to create / worry about.\n\nallow, items, sub-menus, headers etc.\n"},{"labels":[null,"enhancement",null],"text":"Refs #19254.\n"},{"labels":[null,"enhancement",null],"text":"Hi, could we see some new components in Bootstrap? Such as full-width modals that can be solid or transparent, buttons with labels etc.\n\nI like the Semantic UI components and wish they were in Bootstrap.\n"},{"labels":[null,"enhancement",null,null],"text":"Relevant pull request: https://github.com/twbs/bootstrap/pull/19316\n\nVery long words can break out of its containing tag. \n\nOne can force these long words to break to the next line(s) if necessary.\n\nSee an example on https://jsfiddle.net/AdrienBe/n16vqz5p/\n\nResources:\nhttp://css-tricks.com/snippets/css/prevent-long-urls-from-breaking-out-of-container/\nhttp://stackoverflow.com/questions/320184/how-to-prevent-long-words-from-breaking-my-div\nhttp://caniuse.com/#search=word-wrap\nhttp://stackoverflow.com/a/22811590/759452\nhttp://developer.mozilla.org/en-US/docs/Web/CSS/word-wrap\n"},{"labels":[null,"enhancement",null,null],"text":"As explained in the below StackOverflow question, one might often want to add an ellipsis to some text if it overflows.\n\nhttp://stackoverflow.com/questions/802175/truncating-long-strings-with-css-feasible-yet/22811590#22811590\n\nI created a pull request for this feature https://github.com/twbs/bootstrap/pull/19313\n\nIt's my first time contributing to Bootstrap so forgive me if I'm doing anything incorrectly.\n"},{"labels":[null,"enhancement",null],"text":"Hi Developers,\n\nDo your have any plans to introduce responsive typography based on Sass maps in v4?\n"},{"labels":[null,"enhancement",null],"text":"Currently there is only one variable to set $grid-gutter-width which is 30px by default, however, in modern applications on some screens (breakpoints) another gutter size and container padding would be more preferable.\n\nI would suggest adding new map variable and mixin so `.container`, `.row`, `.col-*` and other grid class paddings could be easily configured. Map can be empty if there is no need in chaning spacings for different breakpoints.\n\nHere is an example how I am changing spacers for different screens.\n\n```\n// default main section padding (for > xl)\n$app-section-padding-y: 3rem;\n$app-section-padding-x: 5rem;\n\n// main section padding for different breakpoints down\n$app-section-padding: (\n  xl: (3rem, 4rem),\n  lg: (2.75rem, 3.5rem),\n  md: (2.5rem, 3rem),\n  sm: (1.25rem, 2rem)\n);\n\n\n@mixin app-section {\n  margin-left: auto;\n  margin-right: auto;\n  padding: $app-section-padding-y $app-section-padding-x;\n\n  @each $key, $list in $app-section-padding {\n\n    @include media-breakpoint-down($key) {\n      padding: nth($list, 1) nth($list, 2);\n    }\n\n  }\n\n};\n```\n"},{"labels":[null,"enhancement",null],"text":"Currently grid .row class has only\n\n```\n  margin-left:  ($gutter / -2);\n  margin-right: ($gutter / -2);\n```\n\nWhich adds spacing between columns, but no spacer between rows.\n\nI have many cards and displaying N cards per row. Right now cards are stacked to each other at top/bottom with 0 spacer and because of that I have to manually add to .row class top/bottom spacing.\n\nAdding a new config variable could allow easily add margin-top/bottom to ($gutter / 2) or a new .row-\\* class could be added.\n"},{"labels":[null,"enhancement"],"text":"Hi again. One more question: why we can change some things as \"pagination-hover-color\" or \"pagination-disabled-bg\" by variables, and can't do this for pager. Are these variables unnecessary?\n"},{"labels":[null,null,"enhancement",null,null,null],"text":"Would help with organization and getting all the relevant info. Requires adding files issue_template.md and pull_request_template.md\n"},{"labels":[null,"enhancement",null],"text":"For context and a HTML example, see [this post](http://stackoverflow.com/questions/35456129/bootstrap-specify-column-size-on-the-parent-element) on Stack Overflow.\n\nNormally you specify the column size of the `<div>` on the element itself.\n\nBut e.g. when building a form with multiple rows of similarly styled attribute-value pairs, it would be beneficial to specify this on a parent element, so that you don't have to repeat the exact same styling on multiple rows of elements. Another way to achieve the same effect would be to use the first row as a template, and to apply this style to subsequent rows.\n\nOn my current layout, I have 11 attribute-value pairs, so I would save 20 ((11-1)*2) classes if I could specify this on a parent or template element. This would improve brevity (and, in my opinion, legibility) and reduce room for errors.\n\nHas this been proposed for Bootstrap 4 (or previous versions)? I assume this must have been raised by other people than myself, but I haven't found any threads. I guess I'm missing the correct keyword or term. Sorry if this is a duplicate.\n"},{"labels":[null,"enhancement",null],"text":"1. Right now there is .invisible utility class to set visibility: hidden, however, some elements might be hidden by default and it would be helpful to have also a `.visible` utility class to make visibility: visible;\n2. In bs4 and not only in bs4 there are elements set to display: none by default, however, there is no option to make element visible again. Since there is no way to restore back HTML tag's display property I am suggesting adding some utility classes like `.display-block`, `.display-inline-block`, `.display-inline`.\n3. I am not sure but looks like in bs4 there is also no `.hidden` class to set `display: none`; There are only hidden up/down for breakpoints.\n"},{"labels":[null,"enhancement",null],"text":"Is there a helper to set a width: 100%? I'm currently making an autocomplete input and using .dropdown-menu as base style, however, I can't find a class to make dropdown full width.\n\n~~Also some bs4 elements are set to display: none by default and I can't find helper to make element visible while there is helper to make element invisible. What are bs4 recommendations on how to do it?~~\n"},{"labels":[null,"enhancement",null,null],"text":""},{"labels":[null,"enhancement",null],"text":"We can have an advanced breadcrumb, which will have a dropdown for navigating to a specific position in case of nested pages.\n\nFor example:\n`Home / Dashboard v / Profile`\n\nHere, 'Dashboard' leads to different pages and profile is one of them. So, if the user wants to directly navigate to some other page from Profile page, then, it can do so by clicking on the dropdown on Dashboard link and selecting the desired page; instead of first going back to Dashboard and then selecting the desired page.\n"},{"labels":[null,"enhancement",null],"text":"Please consider adding support for a progress bar inside of a button:\n\n``` html\n<button class=\"btn btn-primary btn-block\">\n  <progress class=\"progress progress-striped\" value=\"25\" max=\"100\">25%</progress>\n</button>\n```\n\nIn this case I have added `btn-block` so the button does not shrink to nothing. A minor tweak to the margin may be all that is required.\n\n``` css\n.btn .progress {\n  margin: 0.313rem 0; /* just playing around this happen to be all I needed */\n}\n```\n\nThe current (alpha-2) default css has a bottom margin that messes with centering within .btn and the resulting button can effect alignment within a grid.\n\n~Thanks\n"},{"labels":["enhancement"],"text":"I understand that you have already rejected namespacing the entire library in this issue: https://github.com/twbs/bootstrap/issues/17474.\n\nWhile that's a reasonable decision, it's unfortunate for a certain class of developer.  Just because you want to use Bootstrap and have a legacy codebase that doesn't play well with it, that doesn't mean that you use a CSS pre-processor.  Or even if you do, it doesn't mean you want to deal with integrating 3rd party code in to your build process.\n\nHowever, there's a simple way this could be solved, while still respecting https://github.com/twbs/bootstrap/issues/17474: add a namespace option to the customizer.\n\nThe Boostrap customizer can already give me just the grid CSS or just the modal JS.  It can also fill in a bunch of Less variables.  Since it can already do all that, wouldn't it be great if it could also have just one extra input asking for a namespace, and then apply that namespace to the generated file?\n"},{"labels":["enhancement",null],"text":"The only problem I have with bootstrap is that it relies on the document-oriented semantic of HTML.\n\nIndeed, when a developer wants to add a navbar, he should write that he wants a navbar, not 3 or 4 embedded `<div>` with many classes and roles.\n\nI've tried once to write an XSLT file to allow me use of XUL vocabulary (`<menubar>`, `<hbox>`, etc.) and transform it to html using bootstrap style. (you have a proof of concept here: http://xul.ccoste.fr/, just have a look to the source code of the page...)\n\nBut XUL is deprecated and Bootstrap is evolving too fast so I can't do it on my own in my cave...\n\nWhat about specifying a vocabulary with bootstrap specific UI components like `<navbar>`, `<jumbotron>`, `<panel>`, and so on...?\n\nI think it could help to make templates a bit more easy to read if we could use something like :\n\n```\n<tabbox>\n  <tabs>\n    <tab>Home</tab>\n    <tab>Profile</tab>\n    <tab>Messages</tab>\n    <tab>Settings</tab>\n  </tabs>\n  <tabpanels>\n    <panel>...</panel>\n    <panel>...</panel>\n    <panel>...</panel>\n    <panel>...</panel>\n  </tabpanels>\n</tabbox>\n```\n\nInstead of:\n\n```\n<div>\n  <!-- Nav tabs -->\n  <ul class=\"nav nav-tabs\" role=\"tablist\">\n    <li role=\"presentation\" class=\"active\"><a href=\"#home\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\">Home</a></li>\n    <li role=\"presentation\"><a href=\"#profile\" aria-controls=\"profile\" role=\"tab\" data-toggle=\"tab\">Profile</a></li>\n    <li role=\"presentation\"><a href=\"#messages\" aria-controls=\"messages\" role=\"tab\" data-toggle=\"tab\">Messages</a></li>\n    <li role=\"presentation\"><a href=\"#settings\" aria-controls=\"settings\" role=\"tab\" data-toggle=\"tab\">Settings</a></li>\n  </ul>\n  <!-- Tab panes -->\n  <div class=\"tab-content\">\n    <div role=\"tabpanel\" class=\"tab-pane active\" id=\"home\">...</div>\n    <div role=\"tabpanel\" class=\"tab-pane\" id=\"profile\">...</div>\n    <div role=\"tabpanel\" class=\"tab-pane\" id=\"messages\">...</div>\n    <div role=\"tabpanel\" class=\"tab-pane\" id=\"settings\">...</div>\n  </div>\n</div>\n```\n"},{"labels":["enhancement",null,null],"text":"I'm coming from the context of React+Webpack+CSS modules where I am getting the Bootstrap CSS class names like this in my React component:\n\n``` js\nimport bsStyles from 'bootstrap.css'\n\n// if you're unsure, bsStyles is now a hash of original classes to renamed classes, something like:\n{\n  collapse: 'bootstrap__collapse___1wPer',\n  navbar: 'bootstrap__navbar___2YbzV'\n}\n\n<div className={bsStyles.collapse} id=\"exCollapsingNavbar\">\n  <div className={bsStyles.bgInverse + ' ' + bsStyles.pA1}>\n    <h4>Collapsed content</h4>\n  </div>\n</div>\n```\n\nWhen you use the collapse component that ships with BS, the classes it adds in JS don't exist anymore.\n\nThe JS modules that ship with Bootstrap don't allow one to override/set the classes. E.g. imagine being able to do something like:\n\n``` js\nimport collapse from 'bootstrap/dist/js/umd/collapse'\n\ncollapse.provideClassNames({ ...bsStyles })\n```\n\nTaking an example of how the current collapse JS module looks:\n\n``` js\nvar ClassName = {\n  IN: 'in',\n  COLLAPSE: 'collapse',\n  COLLAPSING: 'collapsing',\n  COLLAPSED: 'collapsed'\n};\n```\n\nCould that object be made configurable when the module is included? I would suspect that maybe it needs to be changed to lowercase first since the keys in `bsStyles` are the original classes with no uppercasing and the object could almost be swapped out exactly for the given replacement (but making sure that the default classes are also defined for the standard Bootstrap use cases):\n\n``` js\nvar ClassName = {\n  in: 'in',\n  collapse: 'collapse',\n  collapsing: 'collapsing',\n  collapsed: 'collapsed'\n};\n```\n\nThoughts?\n"},{"labels":["enhancement",null,null],"text":"Subj; achievable only by javascript plugin.\n\nExample for 2.0: http://www.eyecon.ro/bootstrap-tabdrop/#\n\nIf this behavior is acceptable, I can make a PR.\n"},{"labels":[null,"enhancement",null,null],"text":"There are many instances when u want the grid to don't have the gutters in it .\r\nAs it just take small 8-9 lines of code then why not \r\n\r\n```css\r\n.row.no-gutters {\r\n  margin-right: 0;\r\n  margin-left: 0;\r\n}\r\n.row.no-gutters > [class^=\"col-\"],\r\n.row.no-gutters > [class*=\" col-\"] {\r\n  padding-right: 0;\r\n  padding-left: 0;\r\n} \r\n```\r\n\r\nThe SCSS/Less Version of the same \r\n\r\n```scss\r\n.row.no-gutters {\r\n  margin-right: 0;\r\n  margin-left: 0;\r\n\r\n  & > [class^=\"col-\"],\r\n  & > [class*=\" col-\"] {\r\n    padding-right: 0;\r\n    padding-left: 0;\r\n  }\r\n}\r\n```\r\n\r\nThe scss-lint version\r\n\r\n```scss\r\n.row.no-gutters {\r\n  margin-right: 0;\r\n  margin-left: 0;\r\n\r\n> [class^=\"col-\"],\r\n> [class*=\" col-\"] {\r\n    padding-right: 0;\r\n    padding-left: 0;\r\n  }\r\n}\r\n```\r\n\r\nWill be great if this can be added in v4 ?\r\n"},{"labels":[null,"enhancement",null],"text":"For v4, it would be nice to be able to set `$print-media = false` or something similar.\n\nThat would enable us to simply `@import` bootstrap.scss, rather than having to import everything (by copying the contents of bootstrap.scss) and remove the print-styles partial.\n"},{"labels":[null,"enhancement",null],"text":"I would like to propose the addition of extra tags, like-\n\n'.space-medium','.space-small','.space-large' in the css\n\n<p>Many times while developing a website,we require some additional padding to be given between different div's,sections,etc. Instead of adding padding to them we can make divs with the following class name in order to get required spacing.</p>\n\n\n<h5>For eg:</h5>\n\n.space-small{\n height:10px;\n}\n.space-medium{\nheight:20px;\n}\n.space-large{\nheight:40px;\n}\n"},{"labels":[null,"enhancement",null],"text":"I would like to propose adding additional `_variables.scss` to be baked into b4. I have been finding these two variables quite handy.\n\n```\n$text-uppercase:    uppercase !default;\n$text-lowercase:    lowercase !default;\n```\n\nI'm sure there could be more but definitely cuts down on time.\n"},{"labels":[null,"enhancement",null],"text":"Progressbars in v3 allow a label over the progressbar. The v4 version don't. For example, in the documentation you can see this example:\n\n```\n<progress class=\"progress\" value=\"50\" max=\"100\">50%</progress>\n```\n\nI'd expect to see a \"50%\" label over the progressbar, but instead there's nothing, just the bar.\n"},{"labels":[null,"enhancement",null],"text":"One of the things I really missed in Bootstrap 3 was the ability to add multilevel dropdowns. It would be really nice not having to look for extensions to allow this, as it makes it even harder to convert to WordPress. I'm still pretty new to coding, so it might just be me...\n"},{"labels":[null,"enhancement",null],"text":"In the v4 docs there is this:\n\n``` html\n<nav class=\"nav nav-inline\">\n  <a class=\"nav-link active\" href=\"#\">Active</a>\n  <a class=\"nav-link\" href=\"#\">Link</a>\n  <a class=\"nav-link\" href=\"#\">Another link</a>\n  <a class=\"nav-link disabled\" href=\"#\">Disabled</a>\n</nav>\n```\n\nwhy not also have the option to use `nav-stacked` with this markup? ie. \n\n``` css\n.nav-stacked .nav-item,\n.nav-stacked > .nav-link {\n  display: block;\n  float: none;\n}\n.nav-stacked .nav-item+.nav-item,\n.nav-stacked > .nav-link+.nav-link {\n  margin-top: .2rem;\n  margin-left: 0;\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"Maybe it's time to add new component for footers / sticky footers into bootstrap 4 out of the box? I can make PR if you agree.\n"},{"labels":[null,null,"enhancement",null],"text":"wish u append to v4\n"},{"labels":[null,"enhancement",null],"text":"current offset is to left only...\n[sm-2][sm-2 offset-2][sm-6]\n[oo][__oo][oooooo]\n\ni would like some offset right\nex.\n[sm-2][sm-2 offset-right-2][sm-6]\n[oo][oo__][oooooo]\n\nsample code from stack overflow...\n\n``` less\n.col-offset-right(@i, @type) when (@i >= 0) {\n    .col-@{type}-offset-right-@{i} {\n        margin-right: percentage((@i / @grid-columns));\n    }\n    .col-offset-right(@i - 1, @type);\n};\n.col-offset-right(@grid-columns, xs);\n.col-offset-right(@grid-columns, sm);\n.col-offset-right(@grid-columns, md);\n.col-offset-right(@grid-columns, lg);\n```\n\nanswered Jul 29 '15 at 22:29\n\nuser1809033\n\nthanks\n"},{"labels":[null,"enhancement",null],"text":"Hello. Can you add some variable like \"$breadcrumb-link-color\" in v4, which affects on \"a\" tags, please? Designers are unstoppable and re-styling it allmost always, but now impossible to change it without changing \"breadcrumb.scss\" (or global only). Thank you.\n"},{"labels":[null,"enhancement",null],"text":"need a vertical sidebar navigation, which is widely used in mobile app development.\n"},{"labels":[null,"enhancement",null,null],"text":"For administrative console-style apps, the ability to host sub-areas of the screen that can manage their own modals, overlays, etc would be useful.  If I want a window-manager-like controller that can bring up mutliple sub-areas, I want to be able to have modals and overlays that are local only to that area and which can further be overlain by outer such viewports' overlays.\n\nI don't think there's anything in the CSS that would make this difficult.  The javascript has only a few references to `document.body` or `window`.  Conceptually though, addressing a modal or an overlay would need rethinking.  I assume there would be some new `.viewport` class (bad name?) and for backwards compatibility the default viewport would be the body, but that additional modals and scrolling effects would have additional options for being bound to other viewports.\n"},{"labels":[null,"enhancement",null],"text":"![image](https://cloud.githubusercontent.com/assets/7641760/12324821/27819524-bace-11e5-9c8d-7538e20cad68.png)\n\nLets call the green part (completed) the foreground and white part (incomplete) the background.\n\nCurrently we have `progress-variant` to change the foreground color of the progress bar:\n\n```\n@mixin progress-variant($color) {\n  &[value]::-webkit-progress-value {\n    background-color: $color;\n  }\n\n  &[value]::-moz-progress-bar {\n    background-color: $color;\n  }\n\n  // IE10+, Microsoft Edge\n  &[value]::-ms-fill {\n    background-color: $color;\n  }\n\n  // IE9\n  @media screen and (min-width:0\\0) {\n    .progress-bar {\n      background-color: $color;\n    }\n  }\n}\n```\n\nHowever, there's no easy way to style the background of the progress bar (default: `$progress-bg: #eee !default`), which kinda sucks when you want to change colors of the progress bars that happen to be on gray backgrounds but don't want to override all the progress bars. \n\nOne option would be passing another value to the `progress-variant`\n\n```\n@mixin progress-variant($color, $background-color: $progress-bg)\n```\n\nMost likely this would mean that the all the progress bars should be / would be made with this mixin only, as the mixin would have to handle pretty much everything in `scss/_progress.scss` (sans the animations etc.).\n\n(Sorry if there's some inconsistencies with the names of the elements, the progress bars are a pain in the ass in general :facepunch: )\n"},{"labels":["enhancement",null,null],"text":"After applyinng bootstrap , i am unable to close/dismiss numpad of ipad while tapping screen outside of textbox. \n\nI think , bootstrap css should fix this issue. Please fix it and let me know.\n"},{"labels":[null,"enhancement",null],"text":"Howdy,\n\nIt would be great if we could have centered content in the navbar built into Bootstrap.\n\nI find it useful to be able to slightly off-center content depending on the rest of the content in the navbar eg lots of content using .navbar-right... use .navbar-center-left to slightly move it to the left.\n\nI use this to do it which works great:\n\n.navbar-center {\n    position:   absolute;\n    left:       50%;\n    -webkit-transform:  translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform:      translateX(-50%);\n    -o-transform:       translateX(-50%);\n    transform:      translateX(-50%);\n}\n\n.navbar-center-left {\n    position:   absolute;\n    left:       40%;\n    -webkit-transform:  translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform:      translateX(-50%);\n    -o-transform:       translateX(-50%);\n    transform:      translateX(-50%);\n}\n\n.navbar-center-right {\n    position:   absolute;\n    right:      40%;\n    -webkit-transform:  translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform:      translateX(-50%);\n    -o-transform:       translateX(-50%);\n    transform:      translateX(-50%);\n}\n\nThe 40% could easily be a variable for custom aligning per site.\n\nHope you like my idea. :-)\n"},{"labels":["enhancement",null],"text":"The user can customize bootstrap on Customize tab of getbootstrap.com website and download the less and css stuff for use in their own apps. But why not add a \"Apply to this site\" button so that the users can see how all the examples on other tabs are affected by the customization.\n\nOf course this should apply to that user's session. And the customizations will have to be remembered for that session.\n"},{"labels":[null,"enhancement",null],"text":"It would be nice if the Component Utility Spacing classes were optionally responsive i.e.:\n\n{property}-{sides}-{size}-{breakpoint}\n\n.p-x-0-sm\n"},{"labels":[null,"enhancement",null],"text":"The `.embed-responsive` reserves document space to the element, avoiding layout recalculation.\nBut the `.img-responsive` (`.img-fluid` in v4) doesn't do that.\nDave Rupert expanded the responsive video solution to images to solve this (and gave it a background color, so you know the space will be filled with something):\nhttp://daverupert.com/2015/12/intrinsic-placeholders-with-picture/\n\nI think it would be nice to refactor `.embed-responsive` as `.media-responsive` (or media-fluid to follow the new image nomenclature) to embrace images too and include the following new classes:\n- `.embed-responsive-1by1` for squared images like avatars (and videos too, instagram and vine videos are squared)\n- `.embed-responsive-9by21`, `.embed-responsive-9by16`, `.embed-responsive-3by4` for portrait images\n\n(I think img-fluid should still exist, there will be cases when the images dimension will not follow a pattern: a news site can have a squared image in a article, and a 16x9 in another article)\n"},{"labels":[null,"enhancement",null],"text":"# About\n\nCards will be used as teaser elements to link to other content elements where the teaser has only one link target.\nFrom a UX point of view, this teaser should behave like this:\n- the whole teaser-card-box is a link\n- the link-interaction (mousover/hover, mousedown/active, visited) should be triggert on the whole box (but probably only on certain elements will show the interaction styles)\n- the the teaser box should have a \"click here\" affordance linke a styled link or button who's hover, active, visited states should change once the link-interaction on the whole teaser box is triggert (not just the link/button itself)\n\nhttp://v4-alpha.getbootstrap.com/components/card/\n# What it looks like ATM\n\n**Right now, one can create with button this html**\n\n``` html\n<a class=\"card card-block\" href=\"/groups/1\">\n<h4 class=\"card-title\">Card title</h4>\n<p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n<div class=\"btn btn-primary\">Button</div>\n</a>\n```\n\n**Which looks like this for default and hover**\n\n<img width=\"330\" alt=\"bildschirmfoto 2016-01-09 um 09 14 36\" src=\"https://cloud.githubusercontent.com/assets/111561/12215178/b63fec46-b6b1-11e5-857d-9a8cdec14909.png\"> <img width=\"320\" alt=\"bildschirmfoto 2016-01-09 um 09 14 40\" src=\"https://cloud.githubusercontent.com/assets/111561/12215179/b6418074-b6b1-11e5-9186-f11ef2a3a834.png\">\n\n**And a card with link with this html**\n\n``` html\n<a class=\"card card-block\" href=\"/groups/1\">\n<h4 class=\"card-title\">Card title</h4>\n<p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n<span class=\"card-link\">Card link</span>\n</a>\n```\n\n**Which looks like this for default and hover**\n<img width=\"316\" alt=\"bildschirmfoto 2016-01-09 um 09 27 52\" src=\"https://cloud.githubusercontent.com/assets/111561/12215213/925c9d9a-b6b3-11e5-9d5a-6a114ed48867.png\"> <img width=\"314\" alt=\"bildschirmfoto 2016-01-09 um 09 27 56\" src=\"https://cloud.githubusercontent.com/assets/111561/12215212/925ac33a-b6b3-11e5-9efd-bfc9bf935fe5.png\">\n### Issues\n- Title and text should not have the link style, only the button should\n- The button 'Card button' does not follow the link styles (:hover and so on) (the link 'Card link' does)\n- There is no :active state for the links (which is a general problem IMO but should be fixed for this case at least)\n- There is no :visited state for button or link\n# Hacky proof of concept\n\nI think bootstrap needs additional css to solve this use case.\n\nSome hacky sass:\n\n``` sass\n  a.card\n    .card-title, .card-text\n      color: black\n    &:visited\n      .btn\n        background-color: darken(#64B9FE, 10%)\n    &:hover, &:focus\n      text-decoration: none\n      .btn\n        background-color: lighten(#64B9FE, 10%)\n      .card-link\n        text-decoration: underline\n    &:active\n      .btn\n        background-color: lighten(#64B9FE, 15%)\n      .card-link\n        color: lighten(#64B9FE, 15%)\n```\n## Result for button (default, hover, active)\n\n<img width=\"319\" alt=\"with hacky sass default 2016-01-09 um 09 32 20\" src=\"https://cloud.githubusercontent.com/assets/111561/12215238/614f4cf6-b6b4-11e5-8537-d53de7f60a6c.png\"> <img width=\"313\" alt=\"with hacky sass hover 2016-01-09 um 09 32 23\" src=\"https://cloud.githubusercontent.com/assets/111561/12215239/6152a9aa-b6b4-11e5-8aa9-24d0004a5295.png\"> (Cannot get a screenshot of the active state without a proper screenshot app but you get the idea.)\n## Result for link (default, hover, active)\n\n<img width=\"311\" alt=\"link with hacky sass default 2016-01-09 um 09 32 34\" src=\"https://cloud.githubusercontent.com/assets/111561/12215241/6a16a5be-b6b4-11e5-9e5d-a90d233d9055.png\"> <img width=\"310\" alt=\"link with hacky sass hover 2016-01-09 um 09 32 43\" src=\"https://cloud.githubusercontent.com/assets/111561/12215243/6a1810ac-b6b4-11e5-9e22-9d6dd44f5104.png\"> (Cannot get a screenshot of the active state without a proper screenshot app but you get the idea.)\n\nNote: I left the visited states out of it since for buttons it requires more discussion (probably no visited state at all for the whole teaser-card) and for links this should follow the default pattern which I don't understand right now (are there no visited link styles in bootstrap4?).\n"},{"labels":[null,"enhancement",null],"text":"In order to use bootstrap, all the code of a given module has to be present in the final CSS. In current versions, it generates a lot of collisions and the need to make up confusing names for my own classes.\n## An example\n\nIf I want to use `.card` as a base for a class of my own (`@extend`ing it), the whole CSS for `.cards` would end up in the final CSS together with my implementation.\n\nIt also brings concerns regarding existing classes. eg: `.card` could be a semantically significant element in my page.\n## An idea on how to solve it\n\nSass enables us to create silent classes, that are not expressed in the final CSS. This could be used (as an opt-in; just like the current flex-grid) to use Bootstrap as a mixin library.\n\nBootstrap:\n\n``` scss\n// bootstrap/scss/_card.scss\n%card {\n  // all the declarations for .card elements (current code)\n}\n@if not($silent-classes) {\n  .card { @extend %card }\n}\n```\n\nCustom SCSS\n\n``` scss\n@import \"bootstrap/scss/card\";\n\n.projects {\n  // class definition for the wrapper\n  &__item { @extend %card }\n}\n```\n\nThis is not a perfect solution as it would still generate child elements with the original names (although this already happens when using mixins like `card-inverse`) and would force the user to `@extend` a lot of classes (like `.card-block` by doing a `.projects__item-content { @extend %card-block }`).\n\nThat said, as far as I can think, this would not change anything when using bootstrap as is, but it would give a lot more power for experienced developers who want to use Bootstrap together with their existing codebases.\n\nWhat do you guys think about this?  \nAny better ideas on how to achieve this?  \nWould this change be welcome?\n"},{"labels":["enhancement",null,null],"text":"Hello all,\nFirst i like to thank you for creating and maintaining the Bootstrap framework, i like it a lot.\n\nIn the past we just the JqueryUI;s Dialog a lot in our application but now we have switched over to bootstrap we want also to replace the dialog's to the modal layout. \nWith the Dialog we used the option to set the buttons dynamically a lot based the content we are putting in the dialog (via an ajax call).\n\nMy question is, when i implement this into the modal widget, do you be interesting to include this into future version as well? My idea is to do let it work the same way as jQueryUI made it.\n"},{"labels":[null,"enhancement",null],"text":"Refs #18748\n"},{"labels":[null,"enhancement",null],"text":"Is there a way to put icon inside a label-pill ? When trying to put span.close inside span.label.label-pill X is oversized.\n"},{"labels":[null,"enhancement",null],"text":"I am suggesting the addition of an `_color.scss` file for better color control. Something like what is seen on Google Design.\n\nIn adding a color palette we would be control color in one location with a better overview of your projects colors.\n\nReference:\n- https://www.google.com/design/spec/style/color.html#color-color-palette\n- https://github.com/Dogfalo/materialize/blob/master/sass/components/_color.scss\n"},{"labels":[null,"enhancement",null],"text":"Hi,\nI tried use a `.btn-group-justified` component with `.visible--xx` class but this class dont have a option with `display: table-cell !important`.\n\nI used this media query for mobile view and work fine but it would be very good to include a similar class on bootstrap\n\n```\n@media (max-width: 767px){\n    .btn-group-justified .visible-xs{\n        display: table-cell !important;\n    }\n}\n```\n\nHappy new year!\n"},{"labels":[null,"enhancement"],"text":"Bootstrap uses this http://bootsnipp.com/snippets/featured/bootstrap-outline-buttons in the documentation, we could have this classes on core as alternatives to the standard buttons?\n"},{"labels":[null,"enhancement"],"text":"Bootstrap uses bs-callout in its documentation, we coud have a class for this in native bootstrap as this\nhttp://cpratt.co/twitter-bootstrap-callout-css-styles/ but on top, right and bottom too, yea?\n"},{"labels":[null,"enhancement"],"text":"we could have a new component of process like this? http://bootsnipp.com/snippets/featured/process-steps as simple for pages process and in a detailed page something like this?\nhttp://bootsnipp.com/snippets/featured/content-in-bootstrap-tabs\n"},{"labels":[null,"enhancement",null],"text":""},{"labels":["enhancement",null,null],"text":"Hi,\nis there a way to do scrollTo little more automatic in Bootstrap? \nI mean something like this:\n\n``` html\n<button class=\"scrollTo\" data-scrollto=\"target_id\">scrollTo</button>\n<div id=\"target_id\">Target</div>\n\n<script>\n$( '.scrollTo' ).on('click', function() {\n    var target_id = $(this).data( 'scrollto' );\n    $('html,body').animate({ scrollTop: $( '#' + target_id ).offset().top });\n});\n</script>\n```\n\nbut without that js part. Only with using **class=\"scrollTo\"** and **data-scrollto=\"target_id\"** attributes. It would be fine to have it. Also it could work with anchors and add #fragment to window.location. \nWhat do you think about it? \n"},{"labels":["enhancement",null],"text":"why in bootsrap 4 can't create sub menu in nav ??\n"},{"labels":[null,"enhancement",null,null],"text":"Good morning Bootstrap!\nCongrats on the upcoming V4.0 release.  What great stuff!\n\nAccording to Bootstrap's homepage:\n\"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.\"\n\nRight now Bootstrap is a great library from frontend WEBSITE design, however, WEBSITES are only part of the projects on the web.  Have ya'll considered building a similar email template library?  It seems as if email templates are one of the next frontiers of the web.  Everybody has to do them and everybody hates having to do them because all of the extensive testing that has to take place to make sure things work with every client.  It would be great if I could build a \"Boostrap Email\" and just know that it will work on every client and have the tools that handle doing things like inlining styles and such.\n\nJust an idea.\n"},{"labels":[null,null,"enhancement",null,null],"text":""},{"labels":[null,"enhancement",null],"text":"Refs #18546.\n"},{"labels":[null,"enhancement",null,null],"text":"I think it would be great if you could show the list of used z-index numbers in the documentation on http://getbootstrap.com/\n"},{"labels":[null,"enhancement",null],"text":"Beside `.small`, it would be nice to have `.large` and `.larger` type classes for quick text emphasizing. \n"},{"labels":[null,"enhancement",null],"text":"It would be nice to have responsive spacing utility classes to manage gutters easily. \n\nlike `p-xs-a-2` where `xs` is breakpoint and `2` is a kind of multiplation factor for `$spacer` value.\n\nIt would be also nice to keep abbreviations like `md, lg` for only breakpoints to reduce the confusion.\n\nAnd classes like `.m-xs-auto`, `.m-xl-auto` would be great for responsively centering block elements.\n"},{"labels":[null,"enhancement",null],"text":"It would be nice to have a class `dropdown-menu-reverse` that would reverse the X direction of a dropdown menu. \n\n![dropdown-reverse](https://cloud.githubusercontent.com/assets/4535422/11664748/a5e3269e-9da0-11e5-9ee9-cea359ac7cbc.png)\n\nDoing this would be as simple as adding a class:\n\n```\n.dropdown-menu-reverse {\n    left: initial;\n    right: 0;\n}\n```\n"},{"labels":[null,"enhancement",null,null],"text":"Relative position class could be a real time saver in many situations.\n`.pos-r{\n    position: relative\n}`\n"},{"labels":[null,"enhancement",null],"text":"First, we should try https://github.com/benbalter/jekyll-seo-tag, see how good it works for our case, otherwise I'll do it manually.\n\nWould be good to have it for v3 too, but I don't think I'll bother with it personally.\n"},{"labels":[null,"enhancement",null],"text":"``` scss\n// Text weights - https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Common_weight_name_mapping\n.text-black {\n  font-weight: 900;\n}\n\n.text-extra-bold {\n  font-weight: 800;\n}\n\n.text-bold {\n  font-weight: 700;\n}\n\n.text-semi-bold {\n  font-weight: 600;\n}\n\n.text-medium {\n  font-weight: 500;\n}\n\n.text-normal {\n    font-weight: 400;\n}\n\n.text-light {\n  font-weight: 300;\n}\n\n.text-extra-light {\n  font-weight: 200;\n}\n\n.text-thin {\n  font-weight: 100;\n}\n```\n\n[Pull request #18440 ](https://github.com/twbs/bootstrap/pull/18440)\n"},{"labels":["enhancement",null,null],"text":"Hi,\n\nit would be nice if bootstrap would include a table sorter by default.\n\nIt doesn't need to be as elaborate like https://mottie.github.io/tablesorter/, something simple out-of-the-box like e.g. http://joequery.github.io/Stupid-Table-Plugin/ would be just enough.\n\nRegards,\nDaniel\n"},{"labels":[null,"enhancement",null],"text":"As #11391 is locked, I can not comment on it or reopen it, so I have to add a new issue:\n\nI second the addition of the above classes (or at least a generic col-0), but for completely different reasons than already advocated: I like to change the width of my elements with javascript, for example, I have two columns with width 4 and 8 respectively, and want to hide the first one while making the second one full width. This does not work nicely with hidden-*.\n\nHave a look at this http://jsfiddle.net/McNetic/zd4bzd9k/4/ . It shows the behaviour with hidden-\\* and also with the proposed col-0.\n"},{"labels":[null,"enhancement",null],"text":"It would be great to have some utility classes for each breakpoint:\n\n```\n.block\n.block-sm\n.block-md\n.block-lg\n\n.inline\n.inline-sm\n.inline-md\n.inline-lg\n\n.inline-block\n.inline-block-sm\n.inline-block-md\n.inline-block-lg\n```\n"},{"labels":["enhancement",null,null,null],"text":"Hello,\nI am trying to build a webpage with a navbar and different tabs in it.\nI build the following codesnippet: http://jsbin.com/nikakararo/edit?html,output\n\nThe navbar is good working, but I have one problem: When you click first to the Button \"Alle\", you will the the tab for this. In this is a clickable text and this should change the tab to something other. In this case it is the word \"Zangen\", if you click on it, you will see the tab content of \"Werkzeuge -> Zangen\" but the Button \"Alle\" is still selected. Now it is the problem, that I can't click again to \"Alle\" to see this tab content again. The pages thinks that \"Alle\" is still clicked :/\n\nWhat would be the correct way to change to another tab when clicking on text or pictures or something else? Is it possible to \"manipulate\" the active tab in the navbar or is it possible to \"simulate\" a click on it? I think it would be an easy work for you, but I can't find any solution\n\nRegards \n"},{"labels":[null,"enhancement",null],"text":"Is it possible to create the [block-grid feature](http://foundation.zurb.com/sites/docs/v/5.5.3/components/block_grid.html) (like foundation)\n\nI created a custom version here ([bootstrap-block-grid](https://github.com/JohnnyTheTank/bootstrap-block-grid)), but it would be better in the native framework\n\n---\n\nthis plnkr shows the benefits: http://plnkr.co/edit/qkyOlC?p=info\nwith block-grid, you have no glitches when the \"items\" have different heights\n"},{"labels":["enhancement",null,null],"text":"Why do we use the only 16by9 and 4by3?\nIt is possible to use a height (calculate padding-bottom for .embed-resposive with js), based on params  of the source (e.g. iframe height=\"xx\") if params is specified?\n"},{"labels":["enhancement",null,null],"text":"Hello,\n\nWhether Bootstrap allows hide class \"in\" when use mobile scale ? - I Want hide Collapse panel for mobile.\n\nor Do I need to write my own solution?\n"},{"labels":["enhancement",null,null],"text":"Hi,\nI have collections of 3 to 20 cards, grouped currently into one card group or deck.\nOn opening the view, 1 to 3 cards shall be visible and, if the users wants so (click on some element), expand the view to show all cards. Any example in that direction ?\nThanks,\nsrdjan\n"},{"labels":["enhancement",null],"text":"We had the issue a lot of times where - for example the navbar - has to be sticky on `< @grid-float-breakpoint` but not on `>= @grid-float-breakpoint`. Currently the affix is lacking that feature and it is really complicated to destroy an affix instance (#5870, #13655).\n\nI would love a consistent way to bind an affix to a specific media breakpoint.\n\nHere are some suggestions to achieve that:\n\n```\n<div data-spy=\"affix\" data-offset-top=\"60\" data-offset-bottom=\"200\" data-min-width=\"768\" data-max-width=\"data-min-width=\"996\">\n  ...\n</div>\n```\n\nOr as suggested for [srcset](https://ericportis.com/posts/2014/srcset-sizes/):\n\n```\n<div data-spy=\"affix\" data-offset-top=\"60\" data-offset-bottom=\"200\" sizes=\"(min-width: 768px) and (max-width: 996px)\">\n  ...\n</div>\n```\n"},{"labels":[null,"enhancement",null],"text":"E.g. there are no classes like `container-md`. I wrote [a gist](https://gist.github.com/ucavus/13fb483dabab0ce9dec9) to work around the issue.\n\nIt seems odd that the framework allows column styles to be invoked only at certain screen widths, but not for containers (and rows).\n"},{"labels":["enhancement",null,null],"text":"The following code would allow tabs to function without selectors providing they are wrapped either within a `[role=tabpanel]` or a `[role=tabcontainer]`. The default behaviour would pair the index `[role=\"tab\"]` to `[role=\"tabpanel\"]`. \nThis allows for deep nesting tabs without specifying #ids or .classes. \nIf a tab is required to perform something other than the default pairing then a selector can be specified.\nIf multiple matching targets are found then the selector is looked for within the context of the wrapper.\n\nIf at this point more that one matching targets are found then it selects the target which has the same  `[role=\"tabpanel\"]` index as the `[role=\"tab\"]` if it exists. \n\nOtherwise the $target does not change and the script continues as normal. \n\nThe JavaScript is probably the best approach for best performance, I has many nested `if, else`'s which may look untidy but makes sure no unnecessary methods are called. \n\nI recommend looking/testing the demo\n\n<p data-height=\"268\" data-theme-id=\"0\" data-slug-hash=\"avMKgM\" data-default-tab=\"result\" data-user=\"tarranjones\" class='codepen'>See the Pen <a href='http://codepen.io/tarranjones/pen/avMKgM/'>Bootstrap tab.js (working nested tabs without using selectors)</a> by Tarran Jones (<a href='http://codepen.io/tarranjones'>@tarranjones</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\n\n\n```\n// changes\nif ($target.length != 1) {\n    var container = '[role=\"tabpanel\"],[role=\"tabcontainer\"]'\n    var $context = $this.closest(container);\n    if ($context.length) {\n        if ($target.length > 1) {\n            $target_idx = $context.find(selector).filter(':eq(' + $this.parent().index() + ')')\n        } else {\n            $target_idx = $context.find(container).filter(function(i, el) {\n                var $closest = $(el).parent().closest(container, $context);\n                return !$closest.length || $context.is($closest);\n            }).eq($this.parent().index());\n        }\n        if ($target_idx.length) $target = $target_idx\n    }\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"Feature request: It would be good to have a divider class for list elements of a sidebar.\n"},{"labels":[null,"enhancement",null,null],"text":"I think it would be very useful to be able to link entire cards. We tried doing this in our application, but realised all text got blue which is not ok for us. \n\nI would expect them to behave similar to linked list group items, and think a card view is a nice alternative to plain lists.\n"},{"labels":[null,null,"enhancement",null],"text":"For those who don't want to download and compile the SCSS files it'll be useful to include something like bootstrap-flexbox.css in the dist folder.\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nWhen developing with Bootstrap it would be nice if it was possible to turn on/off components in the variables.scss file to keep file sizes down.\n\nMaybe something like this:\n\n```\n$components: (\n  alert: true,\n  breadcrumb: true,\n  ...\n) !default;\n```\n\n... and something like this in each component:\n\n```\n@if map-get($components, alert) == true {\n  .alert {\n    ...\n  }\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"I've been building bigger sites pretty frequently with the Bootstrap Sass partials and started to gain some opinions about structuring for scalability. Harry Roberts has a cool concept called [\"Inverted Triangle CSS\"](http://www.creativebloq.com/web-design/manage-large-scale-web-projects-new-css-architecture-itcss-41514731) Essentially the concept is around structuring partials in order of specificity and type. Bootstrap currently has a basic implementation of structure, however I strongly think it could be improved using Harry's concept. I've created a repo that utilizes some of the [Bootstrap Partials](https://github.com/cameronjroe/bootstrap-itscss) in this manner. \n\nRecently, I've wanted to also have variables closely tied with their components. Rather than going through a monolithic `_variables.scss` partial, I've wanted to modify all a single component's color, padding, etc in a partial specifically for that component: Ex. `_modal-vars.scss`, `_panel-vars.scss`.\n\nI'm curious to gauge the community's stand on this subject and potentially propose a structure that would aim to help the developers improve the speed of customizing and extending Bootstrap following a well architected partial structure. For example, a structure with directories for each component, yet still imported into a `_bootstrap.scss` partial, but slotted in correctly based on a ITCSS architecture. \n\nI'd love to hear feedback or loop into an open issue on this. Thanks!\n"},{"labels":[null,"enhancement",null],"text":"Bootstrap has container and container-fluid classes for content. While container-fluid is full-width, it comes with some padding, which is undesirable in certain scenarios (e.g. sidebars that are not floating).\n\nI recommend a container-flush class (or a different name if you prefer) that mimics fluid, but has 0 padding on all sides.\n"},{"labels":[null,"enhancement",null],"text":"So for a project of mine i wanted bootstrap’s grid system only, i wanted the latest version so i decided to separate bootstraps v4 grid system my self, [Check it out here](https://github.com/Code-Lobster/Bootstrap-4-grid-system). While i was working at it i realised the amount of flexibility it provides is just amazing, i could change the breakpoints AND the number of columns, wow   man! that was amazing.\n\nI also leaned about sass-script and the awesome things you can do with them.So i came-up with an cool idea:\n\nbootstrap provides six basic classes: `primary, secondary, info, danger, warning, and success`. These classes are used in all components: Buttons, labels, alerts, etc. Instead of hard coding these classes why don’t we let the user create them.\n\nTo better explain things i created [this repository, check it out](https://github.com/Code-Lobster/Bootstrap-ultra-buttons-system). We can create a sass map of these properties and let the user change the map and css will be generated accordingly just like [Bootstrap ultra button system](https://github.com/Code-Lobster/Bootstrap-ultra-buttons-system).That way users can have exactly the classes they want.\n\nThis will have large impact on how people use bootstrap, i think this will encourage people to start editing bootstrap directly and not add extra css file on top of bootstrap to override it’s rules. Not only that it will promote use of css pre-compilers, this will also accelerate the growth of the css pre-compilers themselves (because we will be using lots of advanced features). Long story short it’s better for web in general :)\n\nI understand implementing this will take lots of time (may be you will leave it for bootstrap 5) and you guys are very very busy. But hey, i am a student who is really into bootstrap and i have some time in my hand, vacations are coming and i was thinking for doing an internship anyways. I would be glad to become a volunteer, not only for this modification but bootstrap in general, i can try and fix most of those v4 issues. On demand i can send my resume as well :)\n\nThanks for reading,\nRegards Karan\n"},{"labels":[null,"enhancement",null],"text":"Will there be RTL language support (Arabic, Farsi, Urdu) in Bootstrap 4?\n\nThanks\n"},{"labels":[null,"enhancement",null,null],"text":"Hi, the below script, make more easy fine responsive adjusts, what do you think about implement  something like this by default?\n\n```\njQuery(function($) {\n\n\n    $.fn.isBreakPoint = function(device) {\n        return $().getBreakPointClass() == 'device-' + device;\n    };\n\n    $.fn.setBreakPointClass = function() {\n        var bodyClasses  = [];\n\n        if ($('body').attr('class') != undefined) {\n            bodyClasses = $('body').attr('class').split(' ');\n        }\n\n        var classBlackList = ['device-xs', 'device-sm', 'device-md', 'device-lg'];\n\n        jQuery.grep(bodyClasses, function(bClass) {\n            if (jQuery.inArray(bClass, classBlackList) != -1) {\n                $('body').removeClass(bClass);\n            }\n\n        });\n\n        $('body').addClass($().getBreakPointClass());\n    };\n\n    $.fn.getBreakPointClass = function() {\n        var deviceClasses = $($('.device:visible')[0]).attr('class').split(' ');\n        var classBlackList = ['device', 'visible-xs', 'visible-sm', 'visible-md', 'visible-lg'];\n\n        var actualDeviceClasses = '';\n\n        jQuery.grep(deviceClasses, function(el) {\n            if (jQuery.inArray(el, classBlackList) == -1) actualDeviceClasses = el;\n        });\n\n        return actualDeviceClasses;\n    };\n\n    $(document).ready(function () {\n\n        $(document).ready(function () {\n\n            $('body').append('<div class=\"device device-xs visible-xs\"></div>');\n            $('body').append('<div class=\"device device-sm visible-sm\"></div>');\n            $('body').append('<div class=\"device device-md visible-md\"></div>');\n            $('body').append('<div class=\"device device-lg visible-lg\"></div>');\n\n            $().setBreakPointClass();\n\n            $(window).resize(function () {\n                $().setBreakPointClass();\n            });\n        });\n    });\n});\n```\n"},{"labels":[null,"enhancement",null],"text":"Hello\n\nthis is to propose a new feature, placing them in tabs to the left or right of the tab-content\n\n![left_sidebar_menu](https://cloud.githubusercontent.com/assets/14580377/10975938/4688ade8-839e-11e5-89d0-09b113a41f94.PNG)\n![right_sidebar_menu](https://cloud.githubusercontent.com/assets/14580377/10975939/468cd1b6-839e-11e5-9964-812f09a6f3b4.PNG)\n"},{"labels":[null,"enhancement",null],"text":"Would be great to have a container class that grows until it reaches full width.\n\n`.container-fluid` can often be to large on big screens, whereas `.container` has a lot of whitespace on smaller screens\n\nSomething like this would be great:\n\n```\n.container-grow {\n  @include max-container();\n  max-width: map-get($container-max-widths, 'xl');\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"### justify-content row helpers\n\nCurrently there only appears to be align-items level alignment of row and their columns. Would be great to add some classes to align items along the justify-content axis.\n\nFor example:\n\n```\n.row-xs-justify-center {\n    justify-content: center;\n}\n\n<div class=\"row row-md-justify-center\">\n  <div class=\"col-md-4\">This content is centered</div>\n  <div class=\"col-md-4\">This content is centered</div>\n</div>\n```\n\nInstead of this:\n\n```\n<div class=\"row\">\n  <div class=\"col-md-4 col-md-offset-2\">This content is centered</div>\n  <div class=\"col-md-4\">This content is centered</div>\n</div>\n```\n### column alignment row helpers\n\nWould also be great to allow 'floating' of columns, eg.\n\n```\n.col-md-right {\n  margin-left: auto;\n}\n\n<div class=\"row\">\n  <div class=\"col-md-4 col-md-right\">Right aligned content</div>\n</div>\n```\n### extra flex grid helper classes\n\n```\n.col-fluid {\n  padding-left: $grid-gutter-width / 2;\n  padding-right: $grid-gutter-width / 2;\n}\n\n.row-nowrap {\n  flex-wrap: nowrap;\n}\n\n.col-grow {\n  flex-grow: 1;\n}\n\n<div class=\"row row-nowrap\">\n  <div class=\"col-fluid\">I am a fluid column</div>\n  <div class=\"col-fluid\">I am a fluid column</div>\n  <div class=\"col-fluid\">I am a fluid column</div>\n</div>\n```\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nWe are using BS4 alpha currently in our web app and we have no plans supporting IE9 at all. Therefore I think it would be nice to have config file where we could specify minimum supported browser version. I have been following bootstrap development and noticed that every now and then there is hack made specifically for IE9. \n\nThe idea would be to have config where you set the browser and minimum supported version and then in grunt compilation time it removes the code if its outside the browser requirements. There could be defaults of course what you guys want to support offically and then people who want to tweak it could increase the level. This way shipped code would not contain that much \"bloat\".\n\nThanks and good work with V4 :+1: \n"},{"labels":[null,"enhancement",null],"text":"Okay, this one's seriously useful: Pleasant heading sizes in all devices (the H1 is a little too H1 on a mobile)\n\n(10% smaller headings in each mode, except for `xs`, which is 20% smaller than `sm`)\n\n```\n.responsive-headings(@tag-name){\n  @selector: ~\"@{tag-name}, .@{tag-name}\";\n  @size-variable: ~\"font-size-@{tag-name}\";\n\n  @{selector} {\n    font-size: @@size-variable * 0.6;\n  }\n\n  @media (min-width: @screen-sm-min) {\n    @{selector} {\n      font-size: @@size-variable * 0.8;\n    }\n  }\n  @media (min-width: @screen-md-min) {\n    @{selector} {\n      font-size: @@size-variable * 0.9;\n    }\n  }\n  @media (min-width: @screen-lg-min) {\n    @{selector} {\n      font-size: @@size-variable;\n    }\n  }\n}\n\n.responsive-headings(h1);\n.responsive-headings(h2);\n.responsive-headings(h3);\n.responsive-headings(h4);\n.responsive-headings(h5);\n.responsive-headings(h6);\n```\n"},{"labels":["enhancement",null,null],"text":"See #15747 for the original feature request.\n\nWhat we want: An additional JavaScript option of `$(e).collapse()` that let us disable the animation.\n\nMy proposal is that such option would be named `animate`, and has a default value of `true`.\n\nExample usage: \n\n``` js\n// Collapses the element without any animation.\n$(element).collapse({\n  toggle: true,\n  animate: false\n});\n\n// Collapses the element with animation, as animate is true per default.\n$(element).collapse({\n  toggle: true\n});\n```\n\nThere are probably other Bootstrap APIs that could also benefit by having such option.\n\nIf this sounds good, I could look into creating a PR.\n"},{"labels":[null,"enhancement",null],"text":"A pluggable margin-bottom that is `20px` in `xs`, `30px` in `sm/md`, and `40px` in `lg`. \n\nThis is something I find myself needing increasingly in diverse projects. Who knows if I need a margin on component XYZ? Shouldn't be built-in into the component, but optional, IMO.\n\nI also keep anti-component-margin classes undoing the previous components margin (by negative `margin-top`), for example when an element with component-margin is visible only in certain screen sizes.\n\nDunno if it can be something to add as a responsive utility.\n\n```\n@component-margin-xs: 20px;\n@component-margin-sm: 30px;\n@component-margin-md: 30px;\n@component-margin-lg: 40px;\n\n.component-margin {\n  margin-bottom: @component-margin-xs;\n\n  @media (min-width: @screen-sm-min) {\n    margin-bottom: @component-margin-sm;\n  }\n  @media (min-width: @screen-md-min) {\n    margin-bottom: @component-margin-md;\n  }\n  @media (min-width: @screen-lg-min) {\n    margin-bottom: @component-margin-lg;\n  }\n}\n\n.component-margin-xs {\n  margin-bottom: @component-margin-xs;\n\n  @media (min-width: @screen-sm-min) {\n    margin-bottom: 0;\n  }\n}\n\n.component-margin-sm {\n  @media (min-width: @screen-sm-min) {\n    margin-bottom: @component-margin-sm;\n  }\n  @media (min-width: @screen-md-min) {\n    margin-bottom: 0;\n  }\n}\n\n.component-margin-md {\n  @media (min-width: @screen-md-min) {\n    margin-bottom: @component-margin-md;\n  }\n  @media (min-width: @screen-md-min) {\n    margin-bottom: 0;\n  }\n}\n\n.component-margin-lg {\n  @media (min-width: @screen-lg-min) {\n    margin-bottom: @component-margin-lg;\n  }\n}\n```\n"},{"labels":[null,"enhancement",null,null],"text":"for instance: http://compass-style.org/reference/compass/utilities/color/contrast/#function-contrast-color\n\nUseful in among others `mixins/background-variants.scss`:\n\n```\n// Contextual backgrounds\n\n// [converter] $parent hack\n@mixin bg-variant($parent, $color) {\n  #{$parent} {\n    color: contrast-color($color,$gray-dark,$gray-lightest);\n    background-color: $color;\n  }\n  a#{$parent} {\n    @include hover-focus {\n      background-color: darken($color, 10%);\n    }\n  }\n}\n```\n\nSee also: https://github.com/twbs/bootstrap/issues/18118\n"},{"labels":[null,"enhancement",null],"text":"i found that in the current version the cards module has not got `card-variant()` mixins, just like the button module.\nCompare:\nhttps://github.com/twbs/bootstrap/blob/v4-dev/scss/_card.scss#L90\nand\nhttps://github.com/twbs/bootstrap/blob/v4-dev/scss/_buttons.scss#L56\nOf course i understand the card variant only set two properties, but on the other hand not having these mixins seems inconsequent and not futur proof?\n"},{"labels":[null,"enhancement",null],"text":"Would there be any interest in adding some utility classes for simple flexbox properties? The `row`s and `col`s are a good starting point, but they miss out on a bit of the _flexibility_ of flexbox. :trollface: \n\nSome possibilities:\n- `display: flex` without `flex-wrap` set\n- ~~`flex-order`~~ `order`\n- `flex-direction`\n- `align-items`\n- `align-self`\n\nI'm putting something together for myself to use, and was wondering if a pull request would be welcome.\n"},{"labels":[null,"enhancement",null],"text":"I'm glad you dropped Glyphicons from v4, but now you even _embed_ base64 SVGs for `form-control-success`, etc?\n"},{"labels":[null,"enhancement",null],"text":"In particular, the next iOS Safari feature release should (modulo secret Apple machinations) support it (see http://trac.webkit.org/changeset/191452), whereas it's uncertain whether WebKit will (ever) decide to remove the delay on all pages with mobile viewports (see https://bugs.webkit.org/show_bug.cgi?id=150469) like Chrome et al. already do.\nSome background on the delay: http://developer.telerik.com/featured/300-ms-click-delay-ios-8/\nCC: Touchy guy @patrickhlauke \n"},{"labels":[null,"enhancement",null],"text":"Why in Bootstrap does not exist classes like\n\n```\n.row-xs-start {\n    justify-content: flex-start;\n}\n\n.row-xs-center {\n    justify-content: center;\n}\n\n.row-xs-end {\n    justify-content: flex-end;\n}\n```\n\nAnd you could rename classes `.row-xs-top, .row-xs-center, .row-xs-bottom` to `.row-xs-top, .row-xs-middle, .row-xs-bottom` && `.col-xs-top, .col-xs-center, .col-xs-bottom` to `.col-xs-top, .col-xs-middle, .col-xs-bottom`\n"},{"labels":["enhancement",null],"text":"Any plans to migrate to [Web Components](http://webcomponents.org)? Maybe with [Polymer](https://www.polymer-project.org)?\n\n**Example 1**\n\nBefore:\n\n``` html\n<button type=\"button\" class=\"btn btn-primary\">Primary</button>\n```\n\nAfter:\n\n``` html\n<bs-button type=\"primary\">Primary</bs-button>\n```\n\n**Example 2**\n\nBefore:\n\n``` html\n<div id=\"carousel-example-generic\" class=\"carousel slide\" data-ride=\"carousel\">\n  <ol class=\"carousel-indicators\">\n    <li data-target=\"#carousel-example-generic\" data-slide-to=\"0\" class=\"active\"></li>\n    <li data-target=\"#carousel-example-generic\" data-slide-to=\"1\"></li>\n    <li data-target=\"#carousel-example-generic\" data-slide-to=\"2\"></li>\n  </ol>\n  <div class=\"carousel-inner\" role=\"listbox\">\n    <div class=\"carousel-item active\">\n      <img data-src=\"holder.js/900x500/auto/#777:#555/text:First slide\" alt=\"First slide\">\n    </div>\n    <div class=\"carousel-item\">\n      <img data-src=\"holder.js/900x500/auto/#666:#444/text:Second slide\" alt=\"Second slide\">\n    </div>\n    <div class=\"carousel-item\">\n      <img data-src=\"holder.js/900x500/auto/#555:#333/text:Third slide\" alt=\"Third slide\">\n    </div>\n  </div>\n  <a class=\"left carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"prev\">\n    <span class=\"icon-prev\" aria-hidden=\"true\"></span>\n    <span class=\"sr-only\">Previous</span>\n  </a>\n  <a class=\"right carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"next\">\n    <span class=\"icon-next\" aria-hidden=\"true\"></span>\n    <span class=\"sr-only\">Next</span>\n  </a>\n</div>\n```\n\nAfter:\n\n``` html\n<bs-carousel indicators controls>\n  <img data-src=\"holder.js/900x500/auto/#777:#555/text:First slide\" alt=\"First slide\">\n  <img data-src=\"holder.js/900x500/auto/#666:#444/text:Second slide\" alt=\"Second slide\">\n  <img data-src=\"holder.js/900x500/auto/#555:#333/text:Third slide\" alt=\"Third slide\">\n</bs-carousel>\n```\n"},{"labels":[null,"enhancement",null,null],"text":"I think there should be a mixin to allow for a range - there should be an easier way than this: @media (min-width: breakpoint-min(sm)) and (max-width: breakpoint-max(md)) {}\n"},{"labels":[null,"enhancement",null],"text":"we have text formatting classes like text-muted, text-left etc.\n\nlike wise please  add classes like text-normal, text-bold, text-italic\n\nI know there are alternatives for : \ntext-bold : `<strong>`\ntext-italic : `<em>`\n\nbut if I have a already bold text and I want to remove the text formatting, then text-normal would be very helpfull.\n"},{"labels":[null,"enhancement",null],"text":"Hi, most of developers use an uncompiled version of bootstrap (ex, SCSS version for twbs/4).\n\nShould you expose a _sass variable_ that disables the responsivness feature when compiled?\n\n`$useResponsive: false;`\n\nthere are many posts that help users to disable responsive but I think that this could be a simple, standard way.\n"},{"labels":[null,"enhancement",null],"text":"Like clothes, buttons should also come in all sizes.\n"},{"labels":[null,"enhancement",null],"text":"Recently I use a class for form element which is .form-blanks and it simply has three lines code.\ncan we add this class?\n\n![screenshot from 2015-10-15 18 20 48](https://cloud.githubusercontent.com/assets/11308328/10513475/97b69e04-7369-11e5-9183-68a5739519e8.png)\n"},{"labels":[null,"enhancement",null,null,null],"text":"https://github.com/samccone/drool\n"},{"labels":[null,"enhancement",null],"text":"I am using Chrome 45.0.2454.10.\n\nThis issue persists in v3 and v4, when an input group contains only one `<input type=\"text\" class=\"form-control\"/>` element, it would lost the 100% width and renders all four corners without radius.\n\nAnother problem about the selector is when I add more than one addon at the same side, only `:first-child` and `:last-child` removes the border of the opposite side.\n\nSee [this plunker](http://run.plnkr.co/plunks/Tud4LzDeDy8p3O6XetXk/) for a demo.\n\nThis issue can be fixed by,\n1. Adding `width: 100%` to `.input-group`.\n2. Flipping `:first-child` selectors to `:not(:last-child)` in `.form-control`, `.input-group-addon` and `.input-group-btn` under `.input-group`\n3. Flipping `:last-child` selectors to `:not(:first-child)` in `.form-control`, `.input-group-addon` and `.input-group-btn` under `.input-group`\n\nNot sure if this introduces other issues, any ideas?\n"},{"labels":[null,"enhancement",null],"text":""},{"labels":["enhancement",null],"text":"I would like to implement a (slide/push) menu feature into Bootstrap. I am looking to get approval before I start integrating the feature.\n"},{"labels":[null,"enhancement",null],"text":"I would like to submit a PR for this feature:\n\n![demo](https://cloud.githubusercontent.com/assets/3004849/10472898/68a37224-726d-11e5-83e6-65317b7c9b7a.png)\n\nTested with:\n\nChrome 45.0.2454.101 m\nInternet Explorer 11.0.23\nFirefox 40.0.3\n"},{"labels":[null,"enhancement",null,null],"text":""},{"labels":[null,"enhancement",null],"text":"Hey\n\nWhile configuring v4 I ​was surprised to see​ that there's no `$alert-border-width` variable.\n"},{"labels":[null,"enhancement"],"text":"Create a paragraph in HTML with the text:\nLOREM IPSUM DOLOR SIT AMET, CONSECTETUR ADIPISICING ELIT\n\nAdd BS class \".text-capitalize\"\n\n---\n\nExpected: Should convert the paragraph to sentence case, like this:\nLorem Ipsum Dolor Sit Amet, Consectetur Adipisicing Elit.\n\nActual:\nNo effect.\n"},{"labels":[null,"enhancement",null],"text":"Thanks @cvrebert , here you go!\n\nCurrently [card-columns](http://v4-alpha.getbootstrap.com/components/card/#columns) seems to only support ordering from top to bottom in column 1, then from top to bottom of column 2, etc. \n\nI run a marketplace with 117 cards, ordered (in Angular) by number of 'upvotes'. My `ng-repeat` inside the `card-columns` div and it looks like:\n\n| 1st | 39th | 72nd |\n| --- | --- | --- |\n| 2nd | 40th | 73rd |\n| 3rd | 41st | 74th |\n| 4th | 42nd | 75th |\n\nAnd so on. \n\n[Packery](http://packery.metafizzy.co/) has support for ordering across across rows, which is very important for _large_ lists because you often want your higher order items to be the first that are visible first for your users.\n\n| 1st | 2nd | 3rd |\n| --- | --- | --- |\n| 4th | 5th | 6th |\n\nObviously, this is how a list of `col-md-4` divs would look, but it breaks up badly when the content of those divs have different heights. Is it possible to use `card-columns` but order in rows? (Maybe call it \"bootstrap-rows\"?) \n\nI understand that technically, this is more challenging than top-down ordering because it doesn't require an algorithm to fill empty spaces when cards have different heights, but it seems like an important feature for Bootstrap-4.\n\nThanks in advance for your time, I'm loving b4 so far.\n\nTaylor\n"},{"labels":["enhancement",null],"text":"please add Glyphicons icon fonts as in the version 3.3.5 which is best to use an appropriate icon easily while it's not available in v4-alpha.  I think its necessary and i recommend to add in v4 bootstrap. and tooltip in v4 is not working, please check.\n"},{"labels":[null,"enhancement",null],"text":"My proposal is to put a stylization the panel body respecting the same tone of context. for this you should add a Modified class \"color\" to paint the body panel.\n\nfile: less/mixins/panels.less\n\n```\n  & > .panel-body.color {\n    background-color: lighten(@heading-bg-color,15%);\n  }\n```\n"},{"labels":[null,"enhancement",null],"text":"I think Foundation handles this well, you enter in a pixel value (or multiple) and the output is in rem units.\n\nEg. \n\n```\nrem-calc(56) \n```\n\n...or for shorthand properties:\n\n```\nrem-calc(56 56 56 10) \n```\n\nI find this particularly helpful when editing values in the variables file. It's a lot easier to think in pixels but output in rems. Especially if you're working off a PSD.\n\nTake this for example:\n\n```\n$font-size-h1: 2.5rem   \n```\n\nWhat is 2.5rem? It doesn't mean much to me. I need to run this through an online rem convertor before I can figure out what it actually is.\n\nIn my opinion, this is much easier to understand quickly:\n\n```\n$font-size-h1: rem-calc(40); // 2.5rem\n```\n"},{"labels":["enhancement"],"text":"Has anyone seen this: https://github.com/ampproject and what do you think the chances are to implement this in bootstrap?\n\nGoogle even has a separate index to only search amp'd content: g.co/ampdemo \n"},{"labels":["enhancement",null,null,null],"text":"Refs #17796 and **many** others. Making the code throw an exception is worth a thousand warnings in the docs themselves.\n"},{"labels":["enhancement"],"text":"While i was working on a project, just thought it would be great to have few famous icons for social networking sites such as Facebook, Google plus, Twitter etc. What say ?\n"},{"labels":[null,"enhancement"],"text":"hi developers,\nI suggest whay we cant set width of columns of a page in e.g. col-md-1.5    .\nIn this web development world we need all these setting for workspace and I need this oe for my work in my office .\npls, accept this and answer to me what is your answer about it?\n"},{"labels":[null,"enhancement",null],"text":"![qq 20151002225358](https://cloud.githubusercontent.com/assets/3542138/10249620/e8891570-6958-11e5-8bc6-3cc01214ab94.png)\nLike the Framework7's toolbar\n"},{"labels":["enhancement",null,null],"text":"Currently bootstrap only supports [4 placement options](https://github.com/twbs/bootstrap/blob/v4-dev/js/src/tooltip.js#L56-L60), while tether supports 12.\n\nCan we allow bootstrap's `_getAttachment` function to fall back to just routing the placement value straight through to tether if the map is not found? In other words, if I supply `{placement: 'top right'}` tether should happily receive it and not throw an error \"You must provide an attachment\".\n\nOn a side note, the docs need updating as the \"auto\" placement is no longer supported.\n"},{"labels":["enhancement",null],"text":"Could you please implement this data option to tooltips?\n\ndata-rowbreaking=true|false\n\nif you set it true it would do something like this:\n\ntooltip.data(\"original-title\").replace(/(?:\\r\\n|\\r|\\n)/g, \"&lt;br&gt;\")\n"},{"labels":["enhancement",null,null],"text":"Carousel should be able to be dragged and swiped on the Touch devices. This seems to be a important and extremely serious issue right now with the carousel. It  is to be include in the next version atleast. \n"},{"labels":[null,"enhancement",null],"text":"I suggest make wells, thumbnails, and panels deprecated. Because it may break the UI when updated to v4 if those are widely used in the UI and forget to update at some places. Plus I even have custom styling for those in my UI, others may have it too. So it will be better to have them for now beside cards.\n"},{"labels":[null,"enhancement",null],"text":"Those classes are more efective,\n.hidden-_-up .hidden-_-down\n\nso is there option to add them on bootstrap v3 ?\n"},{"labels":[null,"enhancement",null,null],"text":"i.e. https://github.com/katiefenn/parker\nBy diffing a PR's CSS stats against the previous stats, we can get a warning if something causes the number of entities to explode.\n\nSee also: mdo's jQuery SF talk where he mentions similar tooling and graphs at GitHub\nhttps://speakerdeck.com/mdo/at-mdo-ular-css?slide=41\nhttps://speakerdeck.com/mdo/at-mdo-ular-css?slide=42\n"},{"labels":[null,"enhancement"],"text":"It'd be great if CSS supported this natively. However, It's a very common use case.\n    `<p class=\"text-capitalize\">Capitalized text</p>`\n    `<p class=\"text-capitalize\">UPPERCASE TEXT</p>`\nyields\n\n```\n`Capitalized text`\n`UPPERCASE TEXT`\n```\n\nThe feature I request is,\n\n```\n`Capitalized text`\n`Uppercase Text`\n```\n\nI tried applying `class= 'text-lowercase text-capitalize'` thinking that it  would apply lowercase first and then capitalize. But, it didn't work that way.\n\nI'm just looking for a feature that makes it easy to convert uppercase characters.\n"},{"labels":["enhancement",null,null],"text":"It would be cool to be able to specify position like: \"right, bottom\", so if right makes tooltip to appear off the screen it should try the next available position. At the same time \"right bottom\" position could specify the alignment. So basically it should be possible to do: \"top right, bottom left\".\n"},{"labels":[null,"enhancement",null],"text":"Same spirit as https://github.com/twbs/bootstrap/issues/17610. \n\nI'll need to apply `font-size` to resize the dropdown component to their respective button component (especially when it's resized from the default).\n\nIf the elements are buttons, I can workaround by applying `btn-lg` or `btn-sm`.\n"},{"labels":[null,"enhancement",null],"text":"Like bg-inverse, text-inverse is necessary working with text over background images.\n"},{"labels":[null,"enhancement"],"text":"Hi Bootstrap,\nNo wonder! you are doing a great job.\nI just want to suggest that \nHow is it, If we toggle the visibility of any item(tag) based on size change, That might be useful a lot.\n\nThanks \n"},{"labels":["enhancement",null,null],"text":"Refs #17544.\n`data[config] is not a function` sucks compared to `No method named \"destroy\"`\n"},{"labels":[null,"enhancement",null],"text":"At the moment I'm manually setting `font-size` for some nav components such as tabs. \n\nAre there plans for bootstrap v4 navs to get size variations?\n"},{"labels":[null,"enhancement",null],"text":"(I just assumed that they would either be located in the variable file or at least have a !default suffix if they where meant to be configurable)\n"},{"labels":[null,"enhancement",null],"text":"no news about native rtl support in v4 ?\n"},{"labels":["enhancement",null],"text":"Is there any support for mega menu with Boostrap navigation? If no then would you please integrate it?\n"},{"labels":[null,"enhancement",null],"text":"IMHO [a block component like the one in the Mochi template](http://bootstrap-themes.github.io/marketing/docs/#blocks) should be part of Bootstrap. Building site made of stacked blocks/section it's quite a de-facto standard nowadays. In Pingendo we implemented something similar. \nI would add also a .block-cover class that make the block full-height.\n## \n\nGiulio\nPingendo\n"},{"labels":[null,null,"enhancement",null],"text":""},{"labels":[null,"enhancement",null],"text":"IMHO every component should have its own color variations: primary/inverse/secondary/info/warning/success\nTo simplify the development of custom themes for every brand color a related text-color variable should defined. \nSo i would expect to find something like this:\n\n$brand-primary:             #0275d8 !default;\n$brand-success:             #5cb85c !default;\n$brand-info:                #5bc0de !default;\n$brand-warning:             #f0ad4e !default;\n$brand-danger:              #d9534f !default;\n\n$brand-primary-text:             black !default;\n$brand-success-text:             white !default;\n$brand-info-text:                white !default;\n$brand-warning-text:             white !default;\n$brand-danger-text:              white !default; \n\nSo to avoid to have dozens of text variables to override, like $btn-primary-color  $label-color $progress-bar-color etc .\n\nAlso border, active and similiar rules should be derived by the current color variation for default, instead of assigning fixed values.\n## \n\nGiulio\nPingendo\n"},{"labels":["enhancement",null,null],"text":"The fixed navbar is not compatible with in page bookmark links as clicking on a link that's supposed to take you to another point on a page causes that point on the page to be at the top of the viewport and as a result, the fixed navbar covers it. I'm able to duplicate this issue using BS3's fixed navbar example page.\n\nExample: https://jsfiddle.net/sd5nhnhg/\n"},{"labels":["enhancement",null],"text":"well topic says it all. also before anyone says that it's impossible, I have it working:\nHTML\n\n``` html\n <nav class=\"navbar navbar-inverse navbar-fixed-top\">\n      <div class=\"container\">\n        <div class=\"navbar-header\">\n\n          <label for=\"resnav\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\n            <span class=\"sr-only\">Toggle navigation</span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n            <span class=\"icon-bar\"></span>\n          </label>\n          <a class=\"navbar-brand\" href=\"#top\">Title</a>\n        </div>\n        <input type=\"checkbox\" style=\"display:none\" id=\"resnav\" style=\"display:none;\">\n        <div id=\"navbar\" class=\"navbar-collapse collapse\">\n        </div>\n</div>\n</nav>\n```\n\nCSS:\n\n``` css\n/*js-less nav*/\n@media (max-width: 768px) {\n\ninput[id=\"resnav\"] + .collapse{\n  display:none;\n  transition: display 250ms;\n}\n\ninput[id=\"resnav\"]:checked + .collapse{\n  display:block;\n}\n}\n```\n\nobviosly enough you need to include the bootstrap files and stuff.\n\nI didnt get pretty CSS3 animations to work the way they should but that's not the problem\n\nthe reason is simple, I dont visit any bootstrap sites on my phone so I have no exact experience with bootstrap, but I have seen a lot of overscripted sites where the js fails to load properly, and then you have buttons that dont work at all.\n\nand since jsfiddle and codepen both seem to be unable to work without js, you wont get any but you need to test yourself. (easiest way is either noscript for firefox or a second chrome profile)\n"},{"labels":[null,"enhancement",null],"text":"For Bootstrap 4 it would be nice to have half column offset/push support so that we can center a col-md-5 :)\n"},{"labels":["enhancement",null],"text":"Many developers & designers like me, try to use date and time pickers in their projects. Therefore, we always need to include separate JS and CSS for the pickers. So I am thinking if it is already attached as a component in Bootstrap like in UI-Kit it will be very useful for the developers & designers.\n\nIf it's already requested by someone please ignore this feature request.\n"},{"labels":[null,"enhancement",null],"text":""},{"labels":["enhancement",null],"text":"It would be nice with a horizontal collapse feature.\n\nThis would be very handy for collapsing sidebars.\n"},{"labels":[null,"enhancement",null],"text":"The new Bootstrap 4 [Cards](http://v4-alpha.getbootstrap.com/components/card) are nice, but regarding the variants, like Decks and Columns, i see that they're completely non-responsive at the moment. Am i wrong?\n\nI think many users would use them in some kind of responsive layout.\n"},{"labels":[null,"enhancement"],"text":".btn - > .b4-btn\n\nIt's conveniently for separate code and readability.\n"},{"labels":[null,"enhancement",null],"text":"Possible to add a feature/classes for `justify-content`?\n\nRan into this when on smaller screens using flexbox - the columns would align to the left by default. Would be nice for on smaller screens, a class added to the row will determine the layout of the columns\n\nSuggested addition: \n`justify-content: flex-start | flex-end | center | space-between | space-around`\n\nNot sure of naming convention:\n`.row-**-content-start         { justify-content: flex-start; }`\n`.row-**-content-end          { justify-content: flex-end; }`\n`.row-**-content-center      { justify-content: center; }`\n`.row-**-content-between  { justify-content: flex-between; }`\n`.row-**-content-around     { justify-content: flex-around; }`\n\n**Caveat** - Although I did realize if you use `justify-content: center`, then there will be no need to add any offset classes since the columns will be centered automagically.\n\nIf this is approved and you can give me the naming convention you prefer - I can make a pull request.\n\nThanks.\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nMaybe a rounded button modifier class could be a nice addition to the existing button lineup in v4?\n\n```\n.btn-rounded {\n  border-radius: 999em;\n}\n```\n\nOf course they need a little more work if they should be available for button groups and dropdowns etc.\n\nHere's a demo: http://codepen.io/asnoba/pen/XmJXKb\n"},{"labels":[null,"enhancement",null],"text":"for starters, I am more than aware that is isnt really supported (yet) to use an a element as a .btn in the navbar. but I think this really should be added especially if you cannot/dont want to rely on javascript all the time (for example for accessibility reasons or people not that well versed in js or whatever)\n\nright now it works pretty solid having a p.navbar-btn and inside the a.btn\nand button groups (even with dropdown) seem to work as well if you have the a with both btn and navbar-btn in that case.\n\nbut it would be nice to have a less roundabout way for it, and why go to a new page with a script if you can just do a link?\n"},{"labels":[null,"enhancement",null],"text":"Hey folks, I've been working lately on building a style guide for an app that's based on Bootstrap but has custom components as well. I was thinking that it would be great if there's a easy and intuitive way to also bootstrap a configurable style guide on top of Bootstrap docs. That would allow to generate a static style guide based on and extending Bootstrap docs, and letting you also add your custom modules.\nFurther, it would be great for it to have Huxley (or similar) integration into a Grunt task, so that it also allows you to test your styles for unintentional changes.\nI see a good benefit for everyone to promote the use of style guides and visual testing, and have it easily generated, customized and built, and not to be seen as an unaffordable thing. Much like what Bootstrap is giving to everyone, the ability to have a pattern library from day 0 of your project, same to having a style guide and visual testing from day 0 if you want.\nI propose myself as the first contributor to that sub-project after learning a bit more about Bootstrap documentation.\nAny feedback on this?\n"},{"labels":["enhancement",null],"text":"hi folks, i've got the following but i have no idea how to extend my dropdown menu to have a sub-menu inside, is there any official way yet?\n<img width=\"167\" alt=\"screen shot 2015-08-31 at 08 11 40\" src=\"https://cloud.githubusercontent.com/assets/7453396/9579393/ed4d5edc-4fb7-11e5-8da7-b0d81c578d22.png\">\n\n``` html\n<button class=\"btn btn-transparent btn-secondary btn-sm dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"></button>\n      <div class=\"dropdown-menu\">\n        <a class=\"dropdown-item\" href=\"#\">\n          <i class=\"fa fa-fw fa-git\"></i>&nbsp; Git\n        </a>\n        <a class=\"dropdown-item\" href=\"#\">\n          <i class=\"fa fa-fw fa-book\"></i>&nbsp; npm\n        </a>\n        <a class=\"dropdown-item\" href=\"#\">\n          <i class=\"fa fa-fw fa-eyedropper\"></i>&nbsp; Profiling\n        </a>\n        <div class=\"dropdown-divider\"></div>\n        <a class=\"dropdown-item\" href=\"#\">\n          <i class=\"fa fa-fw fa-cog\"></i>&nbsp; Process\n        </a>\n      </div>\n```\n"},{"labels":[null,"enhancement",null],"text":"With Bootstrap 3, I used to quiet often put tables in panels as shown in the v3 documentation (without the panel-body class). However, in the v4-replacement for panels - cards - doing so does not give the expected result. The table heading still has a line on top and at the bottom, there is a white margin between the table's end and card's end.\n"},{"labels":["enhancement",null],"text":"Bootstrap is mobile first, so how to make a large modal in desktop show as full screen modal in mobile to give it the feeling of a native app? I'm surprised this isn't an out of the box feature.\n"},{"labels":[null,"enhancement",null],"text":"### Goal\n\nTo be able to enable/disable borders on form controls and buttons separately. We oft like to leave borders on form controls but prefer to have flat, borderless buttons. But to do that (borderless buttons) and maintain consistent heights with form controls is a pain with currently-available variables.\n\nWould love to hear thoughts from others on this.\n### Potential Solution\n\n1) add two new variables: `enable-border-btn` and `$enable-border-control`\n2) add statements to control presence of borders & calculations to ensure padding is correct with/without the borders\n\nExample code that I think would achieve such is below. I'm happy to develop the PR if this feature/concept would be considered.\n##### `_variables.scss`\n\n``` scss\n// primary variable remains: border width (when shown) on any element\n$border-width:               .0625rem !default;\n\n// (new definitions) whether borders are shown on `btn`/`form control` elements\n$enable-border-btn:          true !default;\n$enable-border-control:      true !default;\n\n// added after default declarations of said variables, \n// to account add extra padding when borders are disabled\n@if $enable-border-control == false {\n  $input-padding-x:          $input-padding-x + $border-width;\n  $input-padding-y:          $input-padding-y + $border-width;\n\n  $input-padding-x-sm:       $input-padding-x-sm + $border-width;\n  $input-padding-y-sm:       $input-padding-y-sm + $border-width;\n\n  $input-padding-x-lg:       $input-padding-x-lg + $border-width;\n  $input-padding-y-lg:       $input-padding-y-lg + $border-width;\n}\n```\n##### `_buttons.scss`\n\n``` scss\n.btn {\n  ...\n  @if $enable-border-btn {\n    border: $border-width solid transparent;\n  }\n  ...\n}\n```\n##### `mixins/_buttons.scss`\n\n``` scss\n@mixin button-size($padding-y, $padding-x, $font-size, $line-height, $border-radius) {\n  @if $enable-border-btn {\n    padding: $padding-y $padding-x;\n  } @else {\n    padding: ($padding-y + $border-width) ($padding-x + $border-width);\n  }\n  font-size: $font-size;\n  line-height: $line-height;\n  @include border-radius($border-radius);\n}\n```\n##### `_forms.scss`\n\n``` scss\n.form-control {\n  ...\n  @if $enable-border-control {\n    border: $border-width solid $input-border;\n  }\n  ...\n}\n```\n"},{"labels":[null,"enhancement",null],"text":"With the demise of the responsive utility classes like `visible-xs-block`, `visible-sm-block`, etc.; I think we need some additional utility classes (`clearfix-xs`, `clearfix-sm`, etc) for grid column clearing purposes.\n\nSo we can write something like this:\n\n``` html\n<div class=\"row\">\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix-sm\"></div> <!-- Show only for sm -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix-md\"></div> <!-- Show only for md -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix-lg\"></div> <!-- Show only for lg -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n</div>\n```\n\ninstead of this:\n\n``` html\n<div class=\"row\">\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix hidden-xs-down hidden-md-up\"></div> <!-- Show only for sm -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix hidden-sm-down hidden-lg-up\"></div> <!-- Show only for md -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n    <div class=\"clearfix hidden-md-down hidden-xl-up\"></div> <!-- Show only for lg -->\n    <div class=\"col-sm-6 col-md-4 col-lg-3\">.col-sm-6 .col-md-4 .col-lg-3</div>\n</div>\n```\n\n(I actually wanted to create a pull request about this, but SASS code is currently far beyond my comprehension ability.)\n"},{"labels":[null,"enhancement",null],"text":"Hi,\n\nCan you add in v4 something like that `text-right text-xs-center`?\n"},{"labels":[null,"enhancement",null],"text":"Here are my suggestions for the former panel style:\n![img_2015 08 25_21h01m59s_002_](https://cloud.githubusercontent.com/assets/1368405/9476618/e06bca26-4b6d-11e5-9972-37a22f407f96.png)\n## 1. Split classes into `card-primary-outline` and `card-primary-fill`\n\n**SCSS**\n\n``` scss\n$primary: #0275d8;\n$warning: #f0ad4e;\n\n.card-primary {\n  &-outline {\n    border-color: $primary;\n  }\n  &-fill {\n    background-color: $primary;\n    color: #FFF;\n  }\n}\n\n.card-warning {\n  &-outline {\n    border-color: $warning;\n  }\n  &-fill {\n    background-color: $warning;\n    color: #FFF;\n  }\n}\n```\n\n**Example** https://jsbin.com/kifejew/edit?html,css,output\n\n``` html\n<div class=\"card card-primary-outline\">\n    <div class=\"card-header card-primary-fill\">\n        Featured\n    </div>\n    <div class=\"card-block\">\n        <h4 class=\"card-title\">Special title treatment</h4>\n        <p class=\"card-text\">With supporting text below as a natural lead-in to additional content.</p>\n        <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\n    </div>\n    <div class=\"card-footer\">\n        2 days ago\n    </div>\n</div>\n<div class=\"card card-warning-outline\">\n    <div class=\"card-header card-warning-fill\">\n        Featured\n    </div>\n    <div class=\"card-block\">\n        <h4 class=\"card-title\">Special title treatment</h4>\n        <p class=\"card-text\">With supporting text below as a natural lead-in to additional content.</p>\n        <a href=\"#\" class=\"btn btn-warning\">Go somewhere</a>\n    </div>\n    <div class=\"card-footer\">\n        2 days ago\n    </div>\n</div>\n```\n## 2. Split classes into `card-primary-outline` and `card-primary-fill` and add class `card-primary-header`\n\n`card-primary-fill` can be added to every color class (like primary, warning etc.) and applies the right color.\n**SCSS**\n\n``` scss\n$primary: #0275d8;\n$warning: #f0ad4e;\n\n.card-primary {\n  &-outline {\n    border-color: $primary;\n  }\n  &-header {\n    background-color: $primary;\n    color: #FFF;\n  }\n  &-fill {\n    border-color: $primary;\n    background-color: $primary;\n  }\n}\n\n.card-warning {\n  &-outline {\n    border-color: $warning;\n  }\n  &-header {\n    background-color: $warning;\n    color: #FFF;\n  }\n  &-fill {\n    border-color: $warning;\n    background-color: $warning;\n  }\n}\n```\n\n**Example** https://jsbin.com/jixuyo/2/edit?html,css,output\n\n``` html\n<div class=\"card card-primary-outline\">\n  <div class=\"card-header card-primary-header\">\n      Featured\n  </div>\n  <div class=\"card-block\">\n      <h4 class=\"card-title\">Special title treatment</h4>\n      <p class=\"card-text\">With supporting text below as a natural lead-in to additional content.</p>\n      <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\n  </div>\n  <div class=\"card-footer\">\n      2 days ago\n  </div>\n</div>\n<div class=\"card card-warning-fill card-inverse\">\n  <div class=\"card-header card-warning-header\">\n      Featured\n  </div>\n  <div class=\"card-block\">\n      <h4 class=\"card-title\">Special title treatment</h4>\n      <p class=\"card-text\">With supporting text below as a natural lead-in to additional content.</p>\n      <a href=\"#\" class=\"btn btn-warning\">Go somewhere</a>\n  </div>\n  <div class=\"card-footer\">\n      2 days ago\n  </div>\n</div>\n```\n\nThese are just suggestions. \nOpen for discussion :)\n\n---\n\nBTW, in the current v4 code there are some issues, if you use `card-primary` with `card-header`or `card-footer`:\n![img_2015 08 25_22h13m10s_003_](https://cloud.githubusercontent.com/assets/1368405/9478198/a587217c-4b76-11e5-8f3a-11dd78bd9f44.png)\n![img_2015 08 25_22h13m34s_004_](https://cloud.githubusercontent.com/assets/1368405/9478218/bc0ab206-4b76-11e5-872a-5c8ce365a8ed.png)\n"},{"labels":["enhancement",null,null],"text":"It's a common need but I'd like to demonstrate it a the tab extension:\n\nUsing a custom handler\n\n```\n$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n    // all undefined: e.altKey, e.ctrlKey, e.shiftKey\n});\n```\n\nHere's the reason `bootstrap.js:2145`:\n\n```\nvar clickHandler = function (e) { // e.g. e.altKey == true, e.ctrlKey == false, e.shiftKey == true\n    e.preventDefault()\n    Plugin.call($(this), 'show')\n}\n```\n\nDo you mind to provide the orginal source event (here's the click event) as a property of the passed event inside my custom handler?\n\nThanks\n"},{"labels":[null,"enhancement",null],"text":"hi!\ni customize bootstrap3 and make it's direction dynamically by adding a $dir var in variables file then on each files check if $dir == 'rtl' then float:right else float left. why you don't add this feature to bootstrap 4?! it's make bootstrap more amazing ;-)\n"},{"labels":["enhancement",null],"text":"After modal appears ... the content behind the modal should be editable(copy/select) when modal should not be close..as like as gmail compose window..\n"},{"labels":[null,"enhancement",null],"text":"Good day, in bs3 was an option to show custom text(elements) over progress element (using div.progress), see image.\nBut when using `<progress>` element, I will be not able to reproduce this behaviour (same in bs3).\n<img width=\"944\" alt=\"screen shot 2015-08-24 at 11 37 58\" src=\"https://cloud.githubusercontent.com/assets/1107171/9436072/82f57586-4a55-11e5-9512-446e2f596237.png\">\n"},{"labels":[null,"enhancement",null],"text":"I wonder why Bootstrap doc team does not add a next & previous button on the documentation footer (above the site footer).\nI think, if Bootstrap doc has a next & previous button on the footer, it helping user to navigate to next/previous documentation page.\n\nCan you add a next & previous button on the documentation footer?\n\nSorry for bad english, because I'am Indonesian.\n"},{"labels":["enhancement",null],"text":"It's just a thought, rather than relying solely on Javascript/jQuery for a lot of the components, how about implementing as much as possible using CSS. Seeing as CSS can do a lot of functions that can make Javascript unneeded these days, for those people that don't use jQuery, it would at least still allow them to use Bootstrap. And maybe still have some Javascript functions to make things like tooltips do extra things that Javascript is needed for, but the components can still work in at least a rudimentary form if jQuery, or Javascript isn't used. Anyway, just food for thought.\n"},{"labels":[null,"enhancement",null],"text":"Before I write the doc I'd like some feedback on the text below. \n\nNew (and lazy) users of Bootstrap may or may not be aware of options to slim down Bootstrap and, as a result, load the entire library when they use a fraction of it.  We need to avoid the \"kitchen sink approach\"  that leads to bloated pages and slower load times. \n## Providing docs on available customizers\n\nIs there a list of community customizers? Removing the official customizer web tool leaves a lot of people out in the cold as to how to customize it and some people may decide it's not worth the effort \n## Add an uncss option to the grunt build process or instructions for how to add it to an existing build process\n\n[UNCSS](https://github.com/giakki/uncss) trims unused CSS selectors based on what is used in a given HTML document.  There are plugins for most build  systems and making note of it may help when people try to shrink the size of a Bootstrap install. \n\nAm I missing the documentation or would it be OK if I start writing it?\n"},{"labels":[null,"enhancement",null],"text":"Core of some components done by mixins, and new option of not generating default css. Just like Foundation Zurb does.\n"},{"labels":["enhancement",null,null],"text":"Hey Guys,\n\nI wanted to know if there was interest in me creating a tool to migrate projects from V3 to V4. I was thinking about building a ruby gem which would go through source files and (if a flag was provided) prompt the user would they like to change `.XXX` with `.YYY`. I understand that the alpha isn't the correct time to build this as there is a lot of churn and change at this time, but I wanted to see if there was interest by the core team in having something like this built to ease the transition / migration for users and increase adoption of V4.\n\nAny feedback or thoughts you have on this would be greatly appreciated.\n\nI believe this would help to address issues such as #17240 where there is concern about ecosystem and migrations.\n\nI know it's possible as I did it for V2 -> V3 just never released it publicly and feel it would be pretty straight forward\n"},{"labels":[null,"enhancement",null],"text":"In V3 there was a series of bg classes (bg-primary for example) that provided a muted version of the same theme color.\n\nIn V4 those were changed to directly use the theme color ($brand-primary etc).  Please at least also provide muted backgrounds for those who want to have a more subtle color change or want to be able to read a variety of text colors against these highly saturated backgrounds.\n\nIdeally these would be another variable which is derived from the $brand variables for ex: $brand-primary-muted: lighten(desaturate($brand-primary, 10%), 10%) !default;\n"},{"labels":[null,"enhancement",null],"text":"I am a huge fan of the new Card-component. Like many other components, it also has [some variants](http://v4-alpha.getbootstrap.com/components/card/#background-variants). These apply for the background only, and require another class, `.card-inverse` for proper text colors.\n\nMy suggestions:\n- Add the `.card-inverse` styles for the `.card-primary`, `.card-info`, `.card-danger`, `.card-warning` and `.card-success` classes as an mixin\n- Add new classes `.card-primary-outline`, `.card-info-outline`, `.card-danger-outline`, `.card-warning-outline` and `.card-success-outline` which would style the borders only, otherwise maintaining the regular style similar to those on `.btn`'s for quick styling\n\n![image](https://cloud.githubusercontent.com/assets/7641760/9428238/58067304-49ae-11e5-97e3-10b71fb3311f.png)\n"},{"labels":[null,"enhancement",null],"text":"As we use things like `.table.table-striped` and `.btn.btn-primary` I suggest we use `.col.{size}-{n}` and so on. This allows us to simplify from:\n\n```\n.col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12, .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12, .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12, .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12, .col-xl-1, .col-xl-2, .col-xl-3, .col-xl-4, .col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-10, .col-xl-11, .col-xl-12 {\n  position: relative;\n  min-height: 1px;\n  padding-right: .9375rem;\n  padding-left: .9375rem;\n}\n```\n\nTo:\n\n```\n.col {\n  position: relative;\n  min-height: 1px;\n  padding-right: .9375rem;\n  padding-left: .9375rem;\n}\n```\n\nThis would also allow us to use `.{size}-{n}` (and the related offsets, pushes, and pulls) for things other than columns (e.g. form groups where we might not want the min-height, position, and/or padding of columns).\n"},{"labels":[null,"enhancement",null,null],"text":"I did not believe a pull request was appropriate yet, but I wanted to provide some SCSS additions and some example HTML for easily adding additional animations for modals.\n\nCurrently, all animations still require .fade since the JS is looking for fade. I'm proposing this is a starting point to evolve to the final solution.\n\n_modal.scss\n\n``` scss\n.modal {\n  &.scale {\n    .modal-dialog {\n      transition-property: all;\n      transform: scale(0.75);\n    }\n\n    &.in .modal-dialog {\n      transform: scale(1);\n    }\n  }\n\n  &.from-left {\n    .modal-dialog {\n      transition-property: all;\n      transform: translateX(-100%);\n    }\n\n    &.in .modal-dialog {\n      transform: translateX(0);\n    }\n  }\n\n  &.from-right {\n    .modal-dialog {\n      transition-property: all;\n      transform: translateX(100%);\n    }\n\n    &.in .modal-dialog {\n      transform: translateX(0);\n    }\n  }\n\n  &.from-bottom {\n    .modal-dialog {\n      transition-property: all;\n      transform: translateY(100%);\n    }\n\n    &.in .modal-dialog {\n      transform: translateY(0);\n    }\n  }\n\n  &.from-front {\n    .modal-dialog {\n      transition-property: all;\n      transform: scale(3);\n    }\n\n    &.in .modal-dialog {\n      transform: scale(1);\n    }\n  }\n\n  &.newspaper {\n    .modal-dialog {\n      transition-property: all;\n      transform: scale(0) rotate(540deg);\n    }\n\n    &.in .modal-dialog {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n}\n```\n\nHTML testing\n\n``` html\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-fade-scale\">Modal: fade scale</button>\n    <div class=\"modal fade scale\" id=\"md-fade-scale\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-from-right\">Modal: from right</button>\n    <div class=\"modal fade from-right\" id=\"md-from-right\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-from-left\">Modal: from left</button>\n    <div class=\"modal fade from-left\" id=\"md-from-left\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-from-bottom\">Modal: from bottom</button>\n    <div class=\"modal fade from-bottom\" id=\"md-from-bottom\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-from-front\">Modal: from front</button>\n    <div class=\"modal fade from-front\" id=\"md-from-front\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#md-newspaper\">Modal: newspaper</button>\n    <div class=\"modal fade newspaper\" id=\"md-newspaper\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n              <span class=\"sr-only\">Close</span>\n            </button>\n            <h4 class=\"modal-title\" id=\"myModalLabel\">Modal title</h4>\n          </div>\n          <div class=\"modal-body\">\n            ...\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n```\n"},{"labels":[null,"enhancement",null],"text":"I wonder why Bootstrap comes without auto-skinning. As the name suggests, this feature will automatically skinning components that could be skinned.\nI also request a feature, named Auto-skinning Prevention. As the name suggests, this feature will prevent Bootstrap automatic skinning using **data-native** tag.\n\nSorry for bad english, because I Indonesian people.\n"},{"labels":["enhancement",null,null],"text":"With the new version, dropdown content does not reconize, when the element is out of view and does not change the align:\n![img_2015 08 20_23h35m40s_003_](https://cloud.githubusercontent.com/assets/1368405/9396325/5ad99b18-4794-11e5-9e24-06623534e49e.png)\n"},{"labels":["enhancement",null,null],"text":"I was wondering if I could get some more information about the requirements would be for a form validation polyfill as mentioned in @mdo's pull request (#17021) under big picture ambitious nice to haves. \n"},{"labels":[null,"enhancement",null],"text":"Perhaps it would be useful to add `.col-{size}-auto` with `flex: 1` to allow for auto width columns. We'll then be able to create 5, 7, 8, and 10 column grids on-the-fly without changing or adding to the CSS.\n"},{"labels":["enhancement",null],"text":"can it have touch events support on mobile device?\n"},{"labels":[null,null,"enhancement",null],"text":"In v3, I'm currently using the following additional responsive utilities, and I was hoping to get your opinion/approval for making it into a feature of v4. Bootstrap currently has the following responsive utility classes:\n\n``` css\n.visible-xs-*\n.visible-sm-*\n.visible-md-*\n.visible-lg-*\n.hidden-xs\n.hidden-sm\n.hidden-md\n.hidden-lg\n```\n\nwhere the \"*\" is either `block`, `inline` or `inline-block`.\n\nCurrently the only way to do something like \"Show _this_ for `md` and above, hide _that_ for `sm` and below\" is:\n\n``` html\n<div>\n    <div class=\"visible-md-block visible-lg-block\"></div>\n    <div class=\"hidden-xs hidden-sm\"></div>\n</div>\n```\n\nBesides, v4 has one more responsive breakpoint now, `xl`.\n# Additional responsive utility classes\n\n``` less\n// visible-x when greater than or equal to @screen-(xs|sm|md|lg)-min\n.visible-gteq-xs-block,\n.visible-gteq-sm-block,\n.visible-gteq-md-block,\n.visible-gteq-lg-block,\n\n.visible-gteq-xs-inline,\n.visible-gteq-sm-inline,\n.visible-gteq-md-inline,\n.visible-gteq-lg-inline,\n\n.visible-gteq-xs-inline-block,\n.visible-gteq-sm-inline-block,\n.visible-gteq-md-inline-block,\n.visible-gteq-lg-inline-block {\n    display: none !important;\n}\n\n// block\n.visible-gteq-xs-block {\n    @media (min-width: @screen-xs-min) {\n        display: block !important;\n    }\n}\n\n.visible-gteq-sm-block {\n    @media (min-width: @screen-sm-min) {\n        display: block !important;\n    }\n}\n\n.visible-gteq-md-block {\n    @media (min-width: @screen-md-min) {\n        display: block !important;\n    }\n}\n\n.visible-gteq-lg-block {\n    @media (min-width: @screen-lg-min) {\n        display: block !important;\n    }\n}\n\n// inline\n.visible-gteq-xs-inline {\n    @media (min-width: @screen-xs-min) {\n        display: inline !important;\n    }\n}\n\n.visible-gteq-sm-inline {\n    @media (min-width: @screen-sm-min) {\n        display: inline !important;\n    }\n}\n\n.visible-gteq-md-inline {\n    @media (min-width: @screen-md-min) {\n        display: inline !important;\n    }\n}\n\n.visible-gteq-lg-inline {\n    @media (min-width: @screen-lg-min) {\n        display: inline !important;\n    }\n}\n\n// inline-block\n.visible-gteq-xs-inline-block {\n    @media (min-width: @screen-xs-min) {\n        display: inline-block !important;\n    }\n}\n\n.visible-gteq-sm-inline-block {\n    @media (min-width: @screen-sm-min) {\n        display: inline-block !important;\n    }\n}\n\n.visible-gteq-md-inline-block {\n    @media (min-width: @screen-md-min) {\n        display: inline-block !important;\n    }\n}\n\n.visible-gteq-lg-inline-block {\n    @media (min-width: @screen-lg-min) {\n        display: inline-block !important;\n    }\n}\n\n/*\n * visible-x when less than @screen-(sm|md|lg)-min\n */\n.visible-lt-sm-block,\n.visible-lt-md-block,\n.visible-lt-lg-block,\n\n.visible-lt-sm-inline,\n.visible-lt-md-inline,\n.visible-lt-lg-inline,\n\n.visible-lt-sm-inline-block,\n.visible-lt-md-inline-block,\n.visible-lt-lg-inline-block {\n    display: none !important;\n}\n\n// block\n.visible-lt-sm-block {\n    @media (max-width: @screen-xs-max) {\n        display: block !important;\n    }\n}\n\n.visible-lt-md-block {\n    @media (max-width: @screen-sm-max) {\n        display: block !important;\n    }\n}\n\n.visible-lt-lg-block {\n    @media (max-width: @screen-md-max) {\n        display: block !important;\n    }\n}\n\n// inline\n.visible-lt-sm-inline {\n    @media (max-width: @screen-xs-max) {\n        display: inline !important;\n    }\n}\n\n.visible-lt-md-inline {\n    @media (max-width: @screen-sm-max) {\n        display: inline !important;\n    }\n}\n\n.visible-lt-lg-inline {\n    @media (max-width: @screen-md-max) {\n        display: inline !important;\n    }\n}\n\n// inline-block\n.visible-lt-sm-inline-block {\n    @media (max-width: @screen-xs-max) {\n        display: inline-block !important;\n    }\n}\n\n.visible-lt-md-inline-block {\n    @media (max-width: @screen-sm-max) {\n        display: inline-block !important;\n    }\n}\n\n.visible-lt-lg-inline-block {\n    @media (max-width: @screen-md-max) {\n        display: inline-block !important;\n    }\n}\n\n// hidden\n.hidden-lt-sm {\n    @media (max-width: @screen-xs-max) {\n        .responsive-invisibility();\n    }\n}\n\n.hidden-lt-md {\n    @media (max-width: @screen-sm-max) {\n        .responsive-invisibility();\n    }\n}\n\n.hidden-lt-lg {\n    @media (max-width: @screen-md-max) {\n        .responsive-invisibility();\n    }\n}\n```\n\n---\n\n**gt:** \"Greater than\"\n**gteq:** \"Greater than or equal to\"\n**lt:** \"Less than\"\n**lteq:** \"Less than or equal to\"\n\n---\n# A use case\n\nUsing the code above, the following example means that \"Show me both the images and the text for `md` and above, and hide the text for those below that (`sm` and `xs`)\"\n\n``` html\n<ul class=\"list-inline\">\n    <li>\n        <img src=\"foo.png\" alt=\"\">\n        <span class=\"hidden-lt-md\">Item #1</span>\n    </li>\n\n    <li>\n        <img src=\"bar.png\" alt=\"\">\n        <span class=\"hidden-lt-md\">Item #2</span>\n    </li>\n\n    <li>\n        <img src=\"baz.png\" alt=\"\">\n        <span class=\"hidden-lt-md\">Item #3</span>\n    </li>\n</ul>\n```\n"},{"labels":["enhancement",null],"text":"I'm just putting this out there. This was an often requested feature in v3, to have tabs be embeddable in panels. Since panels are gone in favor of cards, I wonder if it makes sense to have them in cards? See https://github.com/twbs/bootstrap/issues/16934\n"},{"labels":[null,"enhancement",null],"text":"Bootstrap v4 add great features, which cover all my needs:\n- .hidden-X-up .hidden-X-down\n- no-margin and spacers\n- great adaptive modal dialog\n\nExcept one:\n- no vertical aligment in div (example or component)  \n"},{"labels":[null,"enhancement",null,null,null],"text":"This is must be introduced in v3. \nIf bootstrap goes adaptive and mobile friendly - carousel must support swipe on touch devices!\nhttp://v4-alpha.getbootstrap.com/components/carousel/#example \n"},{"labels":["enhancement",null],"text":"how to apply  any theme, just like google material on bootstrap  \n"},{"labels":[null,"enhancement"],"text":"Why below mentioned default flexible CSS cover styles not available.\nEx:\nhttp://nicolasgallagher.com/flexible-css-cover-images/\n"},{"labels":[null,"enhancement"],"text":"There seems to be a lot of very valid points made by UX designers around the hamburger responsive menu actually not being effective for users, due to lack of connection with what they think they are looking for.\n\nexamples:\nhttps://medium.com/design-philosophies/apple-and-hamburgers-a17e4099fada\nhttps://medium.com/daily-ui-ux-inspirations/state-of-the-hamburger-buttons-fc49797af27a\n\nand many apps are moving well away from it.  Apple has never liked it much from what I've read.\nhttps://medium.com/mobile-growth/who-moved-my-hamburger-d237860bc589\n\nThe 2 most common alternatives seem to be static 'tab-bars', and left side flyouts.\n\nI'm just interested in the core teams thoughts on this, and what options seem like things you're happy to support in TWBS.  I feel like the hamburger has its place, but that having a small curated collection of techniques for nav might be an improvement.  Technically the tab-bar can be done with just grid-style, and a bit of custom css, at least to get something workable.  Flyouts are a little trickier.\n"},{"labels":["enhancement",null],"text":"Hello.\n\nThe dropdown menu is not displayed right under the button when there is not enough horizontal place on the screen.\n\nSee an example:\n\n```\n<div class=\"dropdown text-right\">\n  <a href=\"#\" data-toggle=\"dropdown\" class=\"dropdown-toggle\" role=\"button\">Click on me</a>\n  <ul class=\"dropdown-menu\">\n    <li><a href=\"#\">Action</a></li>\n    <li><a href=\"#\">Action</a></li>\n  </ul>\n</div>\n```\n\nYou can see the results on: http://jsfiddle.net/uywss44p/1/\n\n![Screenshot of the problem](http://xwiki.kephpage.net/bootstrap/issue-dropdown/bad.png)\n\nIn my opinion, when there is not enough place on the right side of the screen, the dropdown menu should still be displayed under the button, with the top-right corner aligned with the bottom-right corner of the button, exactly as it is on a right centered navbar (see http://jsfiddle.net/uywss44p/3/).\n\n![Screenshot of a good behaviour](http://xwiki.kephpage.net/bootstrap/issue-dropdown/good2.png)\n\nThanks,\n\nGuillaume\n"},{"labels":["enhancement",null],"text":"I understand mobile first, but bootstrap is used in many products and not only for mobile applications and such a simple things as opening menu items on mouse over on desktop should be available by default (or with simple class switch) without using external scripts like: \n\nhttps://github.com/istvan-ujjmeszaros/bootstrap-dropdown-hover\n\nThis is basic stuff and it's such a standard UX feature for web pages on desktop that by not including it you're confusing end users used to this behaviour on desktop.\n"},{"labels":["enhancement",null],"text":"Hi the following page has some drop down enhancement which are very nice. It would be nice if you adopt this enhancements in bootstrap \n\nhttp://behigh.github.io/bootstrap_dropdowns_enhancement/index.html\n"},{"labels":[null,"enhancement"],"text":"The basic premise is based on the article [UI Unit Tests via CSS: Automatically catch errors in your code, in production](https://medium.com/@aleemb/ui-unit-tests-via-css-automatically-catch-errors-in-your-code-in-production-6f75826ec170).\n\nIt would be useful to include and work upon a `tests.css` stylesheet that is included in development environments and automatically catches and reports errors via the UI.\n"},{"labels":["enhancement",null],"text":"I wonder why no combination for Bootstrap - **\"Panel with Tabs\"**.\nEven the simplest. It is very often used a combination of applications, for example: \"GitHub\".\n\nIs it possible?\n![bootstrap-panels-with-tabs](https://cloud.githubusercontent.com/assets/2330394/9056423/35a79484-3a93-11e5-9eba-091ad1a57a57.png)\n"},{"labels":["enhancement"],"text":"I want to know if there are plans to create a calendar and/or scheduler components like http://fullcalendar.io/ and http://fullcalendar.io/scheduler/?\n"},{"labels":["enhancement"],"text":"Many native applications designed for mobile devices have menus that slide out from a side. Bootstrap navbar's slide out from the top. It would be really cool if we have the option to get something that slides out from a side.\n\nWhile this could be done by using CSS and some hidden-xs (etc.) classes, having the option within bootstrap itself would make life simpler.\n"},{"labels":["enhancement",null],"text":"Hi, guys. I have suggestions relatively popover positions: top-left, top-right, bottom-left, bottom-right. Something like this\n\n![popover-bottom-left-position](https://cloud.githubusercontent.com/assets/5597196/8911832/70552ed6-3497-11e5-94ca-e8e3e71dfad3.png)\n\nThanks.\n"},{"labels":[null,"enhancement"],"text":"Bootstrap only supports 6 types of coloured buttons. We can add other colour buttons like Black for cancel and Brown for Help or so on. It would give developers more options.\n"},{"labels":["enhancement",null],"text":"Example: http://getbootstrap.com/javascript/#live-demo-1\nAfter initializing Popover plugin on the button, original \"title\" attribute becomes empty.\nBut how can I keep it as is if I want the button to show original (browser) tooltip?\n"},{"labels":["enhancement"],"text":"Hello everybody,\nI'm wondering if it could be possible to integrate the Glyphicons free in bootstrap.\nOn the bootstrap web site, you say that the Halflings is integrate, but do you think it could be possible to include the free version ?\nI'm actually using the bootstrap 3.3.5 version on a internal project I'm developping, and was wondering if it could be integrated.\nIn advance, thank you for the return you could provide.\np.s.: sorry for my bad english.\n"},{"labels":[null,"enhancement"],"text":"I was reading documentation \"forms\" and not found how to mark required fields.\n\nhttp://getbootstrap.com/css/#forms\n"},{"labels":[null,"enhancement",null],"text":"Yes it will add some more classes. Peoples who use bootstrap for mobile first support can't use col-xs for print. They need it for to handle smaller devices. As we use col- classes a lot, it will be great to have something specific to print. There's some issues posted about it.\n\nHere's the JSFiddle: https://jsfiddle.net/3aompwbp/3/embedded/result/ (print preview from browser)\n\nPlease tell me if there's anything else to add. If col-pr is not good name, can you suggest something better?\n"},{"labels":["enhancement",null,null],"text":"Bootstrap v3.2\nWhen I hide the popover with $(..).popover('hide'); the popover is removed from dom. When i reopen the popover with $(..).popover('show'); the changed content (eg. checked checkbox) is not shown, because the popover had been removed from dom.\n\nasked allready on stackoverflow: http://stackoverflow.com/questions/31310958/bootstrap-popover-is-removed-from-dom-on-close\n\nAny solution to this?\n"},{"labels":["enhancement",null],"text":"I often use modals for editing items in an application. If, for example, I display a list of items each with an edit button I don't like the idea of creating a separate modal div for each item. To allow using just one modal div I needed a way to dynamically set the fields in the modal window. I realized this was fairly trivial to add by assigning the data to the open button and then populating it to the modal div on `show.bs.modal`.\n\nI have implemented this feature in the pull request below.\n\nIt triggers by adding the class `modal-dynamic` to any modal div, and then adding the class `input-dynamic` to any element in the modal. Then before `show.bs.modal` triggers (I figured before would be better, so a listener could interact post dynamic data), any element that has the `input-dynamic` class has it's `name` attribute checked against the open button for a `data-[name]` attribute. Then the `.val()` of the element is set to the value of the data attribute.\n\nI have also added it to the visual and unit tests in the js folder.\n\nLet me know if you have any questions, or need me to change something.\n"},{"labels":[null,"enhancement"],"text":"There should be a way to customize the label attributes like\nmargin-bottom: 5px;\n\nAre there any workarounds for this?\n"},{"labels":[null,"enhancement"],"text":"- https://speakerdeck.com/ninjanails/death-to-icon-fonts\n- https://css-tricks.com/icon-fonts-vs-svg/\n\n**It would increase accessibility**. Providing both formats is also an option.\n"},{"labels":[null,"enhancement"],"text":"Downloading the bootstrap LESS files, then compiling them inside of \n\n```\n.bs-styles {\n    @import \"less/bootstrap.less\";\n}\n```\n\nor similar works, but it would be great if you could set a prefix on the customize page on the getbootstrap.com website.\n\nThis way bootstrap styling dosn't have to be sitewide, and can be contained to an individual element, or group of elements.\n\n```\n<div class=\"bs-styles\">\n    <div class=\"container\">\n    </div>\n</div>\n```\n"},{"labels":["enhancement",null],"text":"I have a form in a moral to do the edit job. And then the form become too big that it does not fit in the modal. Then I realise that collapse could be a good alternative for the modal. \n\nAnd then I noticed that collapse event does not have the .relatedTarget property as modal events. I have to get some data from the relatedTarget to render the form.\n"},{"labels":[null,"enhancement"],"text":"Text align classes should use !important or there should be extra classes for this purpose.\n\nAlso would be useful to have device specific alignment classes; like\n\n```\n.text-left-xs\n.text-right-md\n.text-center-lg\n```\n\nand all others etc. hehe\n"},{"labels":[null,"enhancement"],"text":"When the font size and line height are very large, the bottom margin for `p`/`ul` elements are too small. \nFor example, when the `font-size` is `17px` and line-height is `1.75em` (`~30px`), the calculated bottom margin is `15px`.\n\nIs it possible to create a new variable for the bottom margin for `p`, `ul`, `ol`, `table`...?\n"},{"labels":["enhancement",null,null],"text":"I know this has been brought up many times but Bootstrap can currently be installed via a GitHub download/clone, CDN, Bower, npm, Composer and Meteor. Adding NuGet would be a helpful addition.\n\nThe best [NuGet Bootstrap Package](https://www.nuget.org/packages/bootstrap) is managed by [Outercurve Foundation](http://www.outercurve.org/). Unfortunately their package has had [issues in the past](https://github.com/twbs/bootstrap/issues?utf8=%E2%9C%93&q=nuget) and is often out of date (still on v3.3.4 currently).\n\n@mdo suggested I open an issue to see how much interest there is. If this is something the core team would consider, I believe it could be fully automated with the addition of a couple files. I'd be happy to take on setting it up.\n"},{"labels":[null,"enhancement"],"text":"it is possible to encapsulate the SVG with \"embed-responsive\" for responsives SVGs\nor daydreaming !?\n"},{"labels":[null,"enhancement"],"text":"Hi\nWhy not to introduce classes for padding, margin etc to bootstrap? e.g .p-l-30 {\npaddin-left: 30px } then class for mobile with media query max like p-l-30-sm {\n{padding-left: 30px;} etc... does it make sense?\n"},{"labels":["enhancement",null],"text":"It would be awesome to see support for basic code blocks with toggles. This would be incredibly useful when needing to display a code sample in multiple programming languages (Which happens quite often).\n\nHere's a visual example (from Parse) of what I mean:\n\n![Code Block With Toggles (Image from parse.com)](https://cloud.githubusercontent.com/assets/1724674/8031577/55f8f836-0d84-11e5-801f-fab19b5a07f7.png)\n"},{"labels":[null,"enhancement"],"text":"Hi.\n\nI use in my interface labels with 'text-right' class to align right label and control to left.\nWhen I resize my window to XS size, my align text label is set to right but for this screen size I want to align to left.\n\nCan you add, like col-xs, col.sm, ... a class like:\ntext-right-xs, text-right-sm, ....\ntext-center-xs, text-center-sm, ...\n... \n\nAnd my code will be: <label class=\"text-left-xs text-right-sm\">TEST</label>\n\nSo when I resize my screen the good align will be selected.\n\nThanks.\n"},{"labels":["enhancement",null],"text":"It would be nice to have a similar functionality to **jquery-ui**'s, meaning that the package should check for the **_define**_ function, and act as an AMD module if found... \n\nI spent around 2 hours figuring out why jquery-ui's widgets were not overwritten by bootstrap's (eg: **tooltip**)... it was because my **_grunt-require**_ task's **_wrap**_ option was set to **_true**_. If the package would have had detected it's AMD wrapping by default, it would've been great :+1: \n\n_jquery-ui's way_:\n\n``` javascript\n(function( factory ) {\n    if ( typeof define === \"function\" && define.amd ) {\n\n        // AMD. Register as an anonymous module.\n        define('jquery-ui',[ \"jquery\" ], factory );\n    } else {\n\n        // Browser globals\n        factory( jQuery );\n    }\n}(function( $ ) {\n/*!\n * jQuery UI Core[...]*/\n```\n\nLE: **wrap:false** or **wrapShim:** false do not help me undo the autocall at the end ( **_(this)**_ ):\n\n``` javascript\ndefine(\"bootstrap\", [\"jquery\"], (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.bootstrap;\n    };\n}(this)));\n```\n"},{"labels":["enhancement"],"text":"Hi,\nI'm using the Bootstrap to build my webiste,it's cool and fast.\nHowever,I found I cannot find the Chinese sns icon,Could you please add some?\nFor example, Wechat from tencent,Weibo from Sina.\nThanks very much.\n"},{"labels":["enhancement",null],"text":"- linebreaks should convert `\\n` to `<br>` in the tooltip bubble\n- see http://stackoverflow.com/questions/358874/how-can-i-use-a-carriage-return-in-a-html-tooltip\n"},{"labels":[null,"enhancement"],"text":"Popovers have a nice dropshadow to them, but their arrow doesn't. Would there be any way to add a shadow to the arrow, too?\n\n![screen shot 2015-05-19 at 8 09 06 am](https://cloud.githubusercontent.com/assets/293004/7695863/8cb14292-fdfe-11e4-86fb-77a637c66a9b.png)\n\nThanks!\n"},{"labels":[null,"enhancement"],"text":"I think this is a feature request.\n\nWould it be acceptable to add `figure` and `figcaption` styles? \n"},{"labels":[null,"enhancement"],"text":"I do an issue before making a pr in order to know what you think about it and being sure to not working on a bad idea.\n\nSo !\nThe idea is to enjoy an customized bootstrap as we all can build on http://getbootstrap.com/customize/, but without using the doc's tool. The goal is to be more usefull for guys using bower. Could be usefull also when you're in core coding and your customized version is missing a component.\n\nInto the code, the idea is to create of less/sass variables for each common css/components/javascript component, that I call triggers. Thoses triggers are booleans and on true it css print the wanted components, with \"Guarded Namespaces\" less feature & @if less directive.\n\nResult  Scalable customized front-end developpers friendly !\n\nLet me know what you think of it and I'll make it if you like it\n"},{"labels":[null,"enhancement"],"text":"The callout classes (bs-callout) used in the getbootstrap documentation are really attractive and would be useful to have. While it's not hard to find sources that have recreated them, it would be good to have it officially a part of Boostrap.\n"},{"labels":["enhancement"],"text":"hi first i should say bootstrap is the best responsive framework, and big thanks from bootstrap and twitter.\n\nbut one big problem that we have with it is:\nbootstrap is ltr and it have not rtl version support by bootstrap\nbut some iraninan pepole do it. such as http://www.webdesignermag.ir/download/473/ that you see it's 3.1.1 version, but now 3.3.4 released.\nfor solving this problem , I have an offer to crate an ability in http://getbootstrap.com/customize for download rtl version for rtl language pepole.\nwith respect hooman mirghasemi.\n"},{"labels":[null,"enhancement"],"text":"It would be nice if it were possible to have nested input-groups like this:\n\n![image](https://cloud.githubusercontent.com/assets/27655/7474021/c914f95c-f379-11e4-9271-6bb8f95217e8.png)\n"},{"labels":[null,"enhancement"],"text":"Is there any way to modify inputs glow and elements like popup shadow via editing less variables?\n\nAnd connected to that question  - I think as Bootstrap is 'framework' - if you get any UI kit from your designer that have elements that bootstrap have - it should be possible to achieve such look only by editing less variables.\n"},{"labels":[null,"enhancement"],"text":"This may be a dupe of #14735 and others but wanted to re-raise in light of upcoming BS4 work.\n\nIt would be nice to be able to specify the class `has-error` directly on a `form-control` element.\n"},{"labels":[null,"enhancement",null],"text":"We should be able to easily configure the value of emulateTransitionEnd speed via options, like: `data-emulate-speed=\"200\"`\n\n```\n<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-emulate-speed=\"200\" data-target=\"#navbar-collapse-search\">Search</button>\n```\n"},{"labels":[null,"enhancement"],"text":"Hello all!\nI would like to propose you to define two new classes \"progress-small\" and \"progress-large\".\nThese classes, placed at the same element than the class \"progress\" is placed, will display a thinner progress-bar for class \"progress-small\" and a thicker progress-bar for class \"progress-large\"\n\nHere is an example of HTML code used for a thinner bar:\n\n```\n<div class=\"progress progress-small\">\n    <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"60\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 60%;\">\n        <span class=\"sr-only\">60%</span>\n    </div>\n</div>\n```\n\nAnd the same example but with a thicker bar:\n\n```\n<div class=\"progress progress-small\">\n    <div class=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"60\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 60%;\">\n        <span class=\"sr-only\">60%</span>\n    </div>\n</div>\n```\n\nTo define these two classes, here is the LESS snippet I propose to you to place in progress-bars.less:\n\n```\n.progress {\n  &.progress-small {\n    height: @line-height-small-computed;\n    margin-bottom: @line-height-small-computed;\n\n    > .progress-bar {\n      font-size: ceil((@font-size-small * 0.85));\n      line-height: @line-height-small-computed;\n    }\n  }\n  &.progress-large {\n    height: @line-height-large-computed;\n    margin-bottom: @line-height-large-computed;\n\n    > .progress-bar {\n      font-size: @font-size-base;\n      line-height: @line-height-large-computed;\n    }\n  }\n}\n```\n\nAnd here is the definition of the missing variables \"@line-height-small-computed\" and \"@line-height-large-computed\":\n\n```\n//== Typography (Extends)\n//** Computed \"line-height-small\" (`font-size-small` * `line-height`) for use with progress-bars\n@line-height-small-computed: floor((@font-size-small * @line-height-small)); // ~15px\n//** Computed \"line-height-large\" (`font-size-large` * `line-height`) for use with progress-bars\n@line-height-large-computed: floor((@font-size-large * @line-height-large)); // ~27px\n```\n\nI tested this also with text written into the progress-bar and both font-size and line-height seems correct to me.\n\nIs this feature can be integrated on Bootstrap?\n\nThanks a lot,\nBest regards,\n"},{"labels":["enhancement"],"text":"Hi guys,\n\nIn older versions (e.g 2.x.x) you could add sub-menus to a dropdown, but in version 3.x.x this feature is missing.\n\n![dropdown-with-submenu](https://cloud.githubusercontent.com/assets/5400982/7369927/c673dce2-edbe-11e4-9e71-069962cfbc6f.png)\n"},{"labels":["enhancement",null],"text":"Hi,\nI'm using **Dropdown** for my autocomplete component.\nHere the simple JsFiddle (without any suggestions refresh to keep it simple)\nhttps://jsfiddle.net/DTcHh/7106/\n\nMy issue is; as soon as I click on the **input** and type some text in it like **\"bootsrap\"**, I **can't click** in the middle of the word to correct it and add the missing **\"t\"** to **\"bootstrap\"**.\nIf I click in it it hides the **.dropdown-menu**.\n\nIt should be really useful to have an option to not hide the **.dropdown-menu** when clicking on the **data-toggle=\"dropdown\"** element.\nThx\n"},{"labels":[null,"enhancement"],"text":"I **love** bootstrap, especially it’s grid system: I love its flexibility, that you can nest it, and particularly that you can apply it via mixins to your custom HTML-Structure. \n\nBut it even could go better: \nA grid system with _margins_ as grid-gutter — that would be awesome! \n\nBecause then we could use the paddings for inner spacing (what they were actaully made for) **along with** grid gutters, _without_ having to nest another DIV for the actual paddings. \n\nThere are grid systems in the wild, which can do, e.g Burbon Neat: \n- The cols have a right margin (in percentage; that’s arithmetics)\n- The last-in-a-row is specially marked, to get _no_ margin-right\n- But it looks to me that this must be applied by someone(?); that is imho not yet fully developed\n\nMaybe the bootstrap grid-system could be refined into this direction:\n- Half of the gutter width on columns left and right, but as _margins_, calculated in percentage\n- Container with half gutter width as minus margin (as is)\n- No further need to lift a finger … \n- That’s it, right …!? I didn’t took the time yet to try it …\n\nMaybe you already had this idea, perhaps it’s already in the pipe for v4 — so thank you for reading, anyway …  ;-)\n\nThnx\n7R5N\n"},{"labels":[null,"enhancement"],"text":"Tracking my website visitors actions shown that checkboxes are very small to be selected from first try. It would be great to have possibility to use classes like \"small\", \"mid\", \"huge\" for checkboxes. Please note that solution must take into account different web-browsers. You can check an idea here: http://jsfiddle.net/EZHwR/1/\n\nThanks\n"},{"labels":[null,"enhancement"],"text":"I know this is a big ask, hence the future versions.\n\nThe current horizontal implementation requires a col-xx-yy class declaration on the form label and the input must be nested into a div with a column size declaration.  \n\nThis is inconsistent with the other classes.\n\nIt would be great if the html structuring could be more similar / identical; maybe have an option where the column sizes are defaults or pulled from js.\n\nThis request is born from the fact that transitioning an existing \"basic\" to \"horizontal\" form is a lot more tedious than it should be (as would transitioning back if this doesn't work out and version control doesn't exist)\n"},{"labels":["enhancement",null],"text":"https://github.com/rauchg/slackin\n"},{"labels":[null,"enhancement"],"text":".help-block can be used in two ways. Next to form control and under the form control.\n\nIf used next to form control, then the vertical alignment is off (-2px).\n\nFor example check this out: http://plnkr.co/edit/VA2lXxo3V05iG3Yh6LD1?p=preview\n\nThis could be fixed with extra condition (I already added it to the plunker style.css):\n\n```\n// If the help-block is direct descendant of form-group align with control-label and form-control\n.form-horizontal .form-group > .help-block {\n  margin-top: 7px;\n  margin-bottom: 8px;\n}\n\n```\n\nRelated to issue #14721\n"},{"labels":["enhancement",null],"text":"I'd love to see an option to configure bootstrap so it would use a CDN instead of local files when building for production. That way the versions would stay the same, but advantages of CDN could be used.\n"},{"labels":["enhancement",null],"text":"I think ScrollSpy  should provide `destroy` method to clear the event `scroll.bs.scrollspy` and element data.\n"},{"labels":[null,"enhancement"],"text":"I was told in another thread to open an issue with my suggestions for v4, so here they are.\n- (A) The behaviour of xs is inconsistent with the rest of breakpoints. col-xs-\\* gets kicked starting from 0px not from $screen-xs-min. It’s sometimes useful to have columns even below $screen-xs-min (although not that much without changing the gutter size), but the difference in behaviour with the rest of tiers make it confusing, IMO. Maybe it would be better to have default col-\\* styles between 0px and $screen-xs-min and make xs work like the rest.\n- (B) Add an least an additional breakpoint for small devices. Even with the previous fix, the distance between xs and sm is too big, anyways.\n- (C) Allow easily setting a different grid at a custom breakpoint using a make-column mixin. Right now, I workaround it using:\n\n```\n  @media (min-width: $bp-bigger-than-xs) {\n    @include make-xs-column(4);\n  }\n```\n- (D) Allow different font-sizes for different breakpoints. Using rem instead of px is not enough, the proportion between body and headings is not usually kept constant between desktop and mobile screen sizes.\n- (E) Keep specificity to a minimum and avoid deep selectors, using specialized classes instead. It would make overriding styles easier (no need to replicate bootstrap selectors) and would decouple from the predefined html structure that some components require. The worst offender is the navbar, but there are others (carousel, pager, panel).\n- (F) Decouple the javascript from the html and CSS and use custom attributes or specific js-\\* classes. (e.g. accordion effect only works with .panel)\n- Improve mobile experience. (G) Animations should be fluid (e.g. navbar toggle), (H) switching between dropdowns should require just 1 click.\n"},{"labels":["enhancement",null,null],"text":"I was searching through the source code and saw that there is no reliable way to detect the version of Bootstrap that is loaded on the page. Other popular libraries provide this functionality in some way right out of the box.\n\nExample:\njQuery.fn.jquery\nko.version\n\nI have run across a use case where I need to be able to do the following:\n\nWe need to be able to render fragments of HTML into an existing page. To prevent bloating the page and loading the same assets twice without actually knowing anything about the consuming page, I want to from the child fragment HTML detect if these libraries are loaded on the parent page and detect their exact version number for compatibility reasons. Only if a version that isn't compatible is loaded would I then load the required asset. \n\nWith jQuery and Knockout which are two of the libraries that may already be loaded on my parent page this is trivial but with Bootstrap it is not. The two most popular techniques for detecting the Bootstrap version are:\n1. To attempt to detect whether its Bootstrap 2 by checking if the typeahead plugin exists. This is not reliable at all and can give a false positive if any jQuery plugin named typeahead is loaded.\n   var bsVersion = ( typeof $.fn.typeahead !== 'undefined' ? '2.3.2' : '3.0.x' );\n2. To explicitly load the CSS file as text and parse the comment at the top for the version number. This assumes that we want to detect the version from a known asset. This does not provide the means for detecting the version that may be loaded on the page already (which may be different from the one that you have access to).\n   $.get(\"dist/css/bootstrap.min.css\", function (data) {\n   var version = data.match(/v[.\\d]+[.\\d]/);\n   alert(version);\n   });\n\nI propose that Bootstrap adds something like:\n\njQuery.fn.bootstrap \n\nwhich much like jQuery.fn.jquery returns the version number of the library that is loaded. \n\nI'm not sure what the reason behind putting the version on every plugin explicitly such as Alert.VERSION = '3.3.4' is but it doesn't seem to provide the information without actually creating an instance of that plugin. EDIT: Didn't realize you didn't have to create an instance but in my comment below I expressed that it will only tell you that SOME plugin is loaded named Alert with a VERSION number, not that Bootstrap loaded it.\n\nI apologize if this has been brought up before as I couldn't find an existing issue. If there are other alternatives that already exist to solve this problem please let me know.\n"},{"labels":["enhancement",null],"text":"Hello all.\n\nI'd first like to preface this with a little about myself. I am the primary maintainer for the [Drupal Bootstrap](https://www.drupal.org/project/bootstrap) base-theme. It currently has over 60k installs, so needless to say we get a lot of our own issues.\n\nRecently, I started the task of trying to tackle better anchor and scrolling support in the base-theme. Support for anchors or scrolling to them has always been a big pain, for not only me, but also a lot of others; especially when dealing with fixed navbars [[jsbin](http://jsbin.com/qimuqu/2)].\n\nThe code I currently have in the project was rather hack-ish and completely un-configurable (my feeble attempt to satisfy a growing issue), so I set out to tackle this once and for all [https://www.drupal.org/node/2462645]. I've poured over countless blogs, docs, support forums and even found a few in this project's issue queue [#193, #1768, #11854].\n\nThe \"solutions\" vary from CSS to JS, but more often than not require at least some sort of manual configuration for it to work with that specific theme/offset requirement.\n\nUltimately though, I've determined that a CSS-only solution just doesn't really cut it; especially when dealing with dynamic and varying content as such in CMS framework like Drupal. So, I've created the following JS based plugin instead:\n\nhttps://github.com/markcarver/bootstrap-anchor [[demo/docs](http://markcarver.github.io/bootstrap-anchor/)]\n\nIn an effort to offset the \"cost\" for using JS, I was also inspired with the recent addition using anchor.js for Bootstrap's own documentation (#14897, #15491). This got me to thinking how this could easily be expanded from Bootstrap's own Tooltip plugin, like Popovers are. What makes it even more enticing is that there has been a `glyphicon-link` available to use for quite a while.\n\nSince both Tooltips and Popovers are completely opt-in with no data API support, it made sense to follow in that direction; especially for those who still want/need a CSS-only solution.\n\nMy ultimate goal/desire is to merge this upstream into Bootstrap directly. I'm sure this will be a daunting task which is why I'm creating this issue now to get some feedback and eyes on this plugin so it can be flushed out a bit more. I'm still working on documentation of all the new options, so bare that in mind.\n\nI look forward to y'alls feedback!\n"},{"labels":[null,"enhancement"],"text":"The default font size for bootstrap is 14px on all devices.  There is no built-in responsive behavior for font size in bootstrap, despite bootstrap being a responsive orientate library.\n"},{"labels":[null,"enhancement"],"text":"Can we have progress bar sizes, like:\n- progress-bar-lg\n- progress-bar-sm\n- progress-bar-xs\n\nShould #10914 still be ignored?\n\n@adius has a good point here: https://github.com/twbs/bootstrap/issues/10914#issuecomment-75378741\n"},{"labels":["enhancement"],"text":"Among the built in plugins that I suggest are drill down menu plugin, for my own products needs, so I modified one of jQuery plugins to be exactly what I need \"Bootstrap iPod Style jQuery Drill Down Menu Plugin\", It has many good things and working well specially for long trees like Classifieds or Auctions categories and with option to display collapsed as a breadcrumb on final node selection or just as a selected menu item by setting the option:\n\n```\nshow_end_nodes     : true, // drill to final empty nodes, true/false\n```\n\nI do not consider my self a JS developer but struggle to do what I want when I do not find it ready online, so I hope some one to re write plugin similar to this one in more compact and stylish code.\n\nBootply live example  http://www.bootply.com/hIuKeY1K4t\n\nproject on github https://github.com/mewsoft/Bootstrap-DrillDownMenu\n\nSceen shot \n![bootstrap drilldown](https://cloud.githubusercontent.com/assets/7512085/6888119/0a35ecde-d674-11e4-8486-184bf28320bf.png)\n"},{"labels":[null,"enhancement"],"text":"Bootstrap resets the font properties of many of its elements (see #15925, etc), setting amongst other things the `font-weight` to `normal` (400). \n\nThis makes it very hard to use a different cross site default (in my particular case, needed the default for font-weight to be 300).\n\nCould we solve this by using a `@base-font-weight` variable instead of the hard-coded `normal` value?\n\nThanks!\n"},{"labels":[null,"enhancement"],"text":"future could implement a \".list-group-striped\" like is on the tables.\n"},{"labels":[null,"enhancement"],"text":"This seems given, I was fiddling with the navbar earlier and realized unless all my panels are \"headless\" there is no way I can use navbar-inverse and panel-default without the two clashing.\n\nCustomising either color manually is hardly difficult but that is not the point here ultimately. Just a trivial request\n"},{"labels":[null,"enhancement"],"text":"This shows an xs-sized window with input fields and input-group-addons. The first input box has .input-group.xs applied. Any text entered in the second or third boxes doesn't show up.\n\n![input-group-xs example](https://cloud.githubusercontent.com/assets/193442/6769731/0bc4ea62-d09f-11e4-8f78-11195bfeb227.png)\n\nCSS for mobile-friendly input:\n.input-group-xs > .input-group-addon {\n  height: 30px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 1.5;\n}\n\n.input-group-xs .input-group-addon {\n  border-right: 1px solid #ccc;\n}\n\n.input-group-xs > .input-group-addon {\n    border-top-left-radius:3px;\n    border-top-right-radius:3px;\n    border-bottom:none;\n}\n\n.input-group-xs > input[type=\"text\"] {\n    border-top-left-radius:0;\n    border-top-right-radius:0;\n    border-bottom-left-radius:3px;\n    border-bottom-right-radius:3px;\n    height: 30px;\n    padding: 5px 10px;\n}\n"},{"labels":["enhancement",null],"text":"To assist users of data binding / templating libraries.\nRefs #15674.\n"},{"labels":["enhancement",null],"text":"I have a situation where, due to the use of absolute and relative positioning, as well as `translateZ()` and `scale()`, jquery's `position()` is returning `0`. Because the `data-spy=\"scroll\"`element is not the `<body>`, scrollspy.js is using position() and not offset(). Commenting out the following from scrollspy.js:\n\n```\n    if (!$.isWindow(this.$scrollElement[0])) {\n      offsetMethod = 'position'\n      offsetBase   = this.$scrollElement.scrollTop()\n    }\n```\n\nrestores perfect behavior. I would like to see a scrollspy option that allows the use of either offset() or position() to be forced. (I know the offset/position thing has come up multiple times. Sorry if I'm stirring up old wounds.)\n"},{"labels":["enhancement",null],"text":"Hey--\n\nI was wondering if it's possible to make individual components available via bower (i.e. modal, dropdown, etc.). \n\nThanks!\nGreg\n"},{"labels":[null,"enhancement"],"text":"It would be great if we have site search feature in Bootstrap. It would be easy to find something very quickly :). \n"},{"labels":["enhancement",null],"text":"I'd like to suggest this functionality to override fades in javascript:\n\n```\n$('#modal').show({'fade': false});\n```\n\nWhy?\n\nIt is currently painful to debug/troubleshoot a modal w/fade which is triggered by javascript. This is because `modal.show()` merely triggers the fade.  placing a `debugger;` line in the JS will show a screen without the modal.  so the `fade` needs to be removed on the modal's html.  Debugging might not be possible in a `shown`, because that event happens in a different scope.\n\nThis isn't terribly difficult to deal with, but adds a complicated step and one has to edit multiple things/files for testing.  It might not be easy to do (or a smart thing to do) depending on the development team or application -- the javascript could be managed separately from the html.\n"},{"labels":[null,"enhancement"],"text":"One quick question: **does Twitter Bootstrap 3.3.2 support Right to Left website?**\n\nThanks,\n"},{"labels":[null,"enhancement"],"text":"For accessibility reasons we wrap our radio and checkboxes with a `<fieldset>` and use `<legend class=\"control-label\">` to make it look like a standard label. I would like to suggest removing and creating vars for hardcoded font-size, bottom-margin and border-bottom.\n"},{"labels":[null,"enhancement",null,null],"text":"Hello,\n\nI have an iframe that is like 3000+ pixels in height.  The top page scrolls, as the iframe will be whatever size it needs to be, so that it won't have a scrollbar.\n\nThere is a problem in IE, caused by this line: \n\n```\n      transition ?\n        that.$element.find('.modal-dialog') // wait for modal to slide in\n          .one('bsTransitionEnd', function () {\n            that.$element.trigger('focus').trigger(e) // this line causes the problem!!!\n            that.$element.trigger(e) // this fixes the problem!!!\n          })\n          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n        that.$element.trigger('focus').trigger(e)\n```\n\nAt approximately line 998 in 3.3.2\n\nAs you can see, removing trigger('focus') fixes it.\n\nThe problem in detail is:  the top frame's scrollTop becomes the iframes offset().top.\n\nThis can be very unwanted.  The user may be 2000 pixels into the iframe content, looking at something at the bottom, and when they open a modal, they are way at the top of the page again ( top of the iframe at least ).\n\nHere is a hack I am using to fix:\n\n```\n    $modal.on('show.bs.modal', function(){\n      // IE Fix:  bootstrap does a focus, which screws up the iframe by scrolling the parent window\n      setTimeout(function(){\n        $modal.find('.modal-dialog').off('bsTransitionEnd');\n      }, 350);\n    });\n```\n"},{"labels":[null,"enhancement"],"text":"I'd like to propose the use of Less hooks in Bootstrap. [Here's an example](http://codepen.io/zslabs/pen/RNebLq). This is done throughout the [UIkit framework](https://github.com/uikit/uikit). It means when you need to hook into Bootstrap selectors to either add or override functionality, you don't have extra selectors hanging around.\n\nWhat this means is a smarter, more extendable system that ends up being smaller than if you were to do it the old fashioned way. I'd be happy to start an initiative to get this into the core, as it would be quite an effort with the number of selectors. We could start in smaller pockets if necessary.\n\nI encourage you to play around with the Codepen I linked to so see how the final output looks. Thanks!\n"},{"labels":["enhancement",null],"text":"Hello all,\nThis is not an issue but I was not sure where to put it.(Sorry)\nIt would be nice if you can include this feature.\nCurrently we have dropdown menu on click event where we can not give the link to parent button.\nso it would be nice to have dropdown menu with link on its parent elements.\nI am so sorry if I am not able to describe properly, however if you have any doubts please let me know I will try to describe in better way.\n"},{"labels":["enhancement",null],"text":"I have a request for a feature that might be cool: never-leaving-divs. This is for a div that can be at any point of the page, but it will never scroll off the top of the page. \n"},{"labels":[null,"enhancement"],"text":"It's not uncommon to have to enable the hover state of an element, even if the element isn't actually being hovered. For example, highlighting multiple related table rows, showing a link/button that will be pressed when a user performs an action, or the need to activate hover states if you have custom mouse/keyboard input.\n\nAdding `.hover` to any selectors that implement `:hover` will allow elements to manually activated with js.\n\nThe current workaround involves copying the style and manually implementing `.hover`.\n\nIt would be a nice, relatively simple feature that will resolve this common anti-pattern.\n\nNote: Psuedo-classes `:active` and `:focus` have `.active` and `.focus` respectively already for buttons. So you can style a button as being active or focused even if they aren't, so I believe it makes sense to style a button as being hovered too.\n"},{"labels":["enhancement",null],"text":"Currently in Bootstrap 3.3.1 Dropdown menu always appears\nbelow the `dropdown button`.\n\nthe problem is when the offset of dropdown button from the bottom of page\nis less than drop-down-menu's height.\nin such case, the menu will be half-displayed.\n\nCurrently the ralated CSS is:\n<code> .dropdown-menu: {top:90%;} </code>\nthe bootstrap.js file should check, if bottom-offset is less than drop-menu's height\nthis shoud be set to:\n<code> .dropdown-menu: {bottom:90%; top:inherit;} </code>\n\nso simple :)\n\nhere is the screenshot from latest [Bootstrap Demo](http://getbootstrap.com/components/#btn-dropdowns)\n\n![image](https://cloud.githubusercontent.com/assets/638917/6429121/387c6340-bfd4-11e4-956b-2c35c398aa29.png)\n"},{"labels":[null,"enhancement"],"text":"Right now we support grids up to 1200>= pixels. As people gets better and better resolutions, maybe it is time to make 1400>= og 1600>= pixel gridsupport?\n\n![screen shot 2015-02-27 at 16 14 29](https://cloud.githubusercontent.com/assets/616231/6414984/e76a06a8-be9b-11e4-8e09-6e93fd3ad342.png)\n"},{"labels":[null,"enhancement"],"text":"Is it possible to add the following to variables.less, it makes media query handling much more compfortable. \n\n```\n@xs: ~\"(max-width: @{screen-xs-max})\";\n@sm: ~\"(min-width: @{screen-sm-min}) and (max-width: @{screen-sm-max})\";\n@md: ~\"(min-width: @{screen-md-min}) and (max-width: @{screen-md-max})\";\n@lg: ~\"(min-width: @{screen-lg-min})\";\n\n@sm-min: ~\"(min-width: @{screen-sm-min})\";\n@md-min: ~\"(min-width: @{screen-md-min})\";\n@lg-min: ~\"(min-width: @{screen-lg-min})\";\n\n@xs-max: @xs;\n@sm-max: ~\"(max-width: @{screen-sm-max})\";\n@md-max: ~\"(max-width: @{screen-md-max})\";\n```\n\nUsage example:\n\n```\n@media @xs{\n.container{\n  padding-left: 0;\n  padding-right: 0;\n}\n}\n```\n\nThanks for having bootstrap. :+1: \n"},{"labels":["enhancement",null],"text":"For easier custom theming of a tooltip it would be nice if you could pass it a css class (or multiple) that would be applied to the default wrapper of the tooltip (the one that has the \"tooltip\" class). I simply needed to change the background-color of one of my tooltips but to accomplish this i had to pass it a custom template that was actualy just a copy of the default template except it had an extra class.\n"},{"labels":["enhancement",null],"text":"I am suggesting creating a sub domain dedicated for third parties plugins called for example  plugins.getbootstrap.com similar to plugins.jquery.com where developers can have accounts and add plugins and demo pages since github until now does not allow running scripts on  the repositories pages. This will encourage jquery plugins and other developers to port their work to bootstrap and also will make it easy when searching for bootstrap plugins.\n"},{"labels":["enhancement"],"text":"I'd recommend adding off canvas as a ready built in feature in the next upgrade with simple interface like this one:\n\nhttp://foundation.zurb.com/docs/components/offcanvas.html\n\nBootstrap is built basically to support mobile devices and off canvas is a must feature used almost in every application so it should be easy to integrate.\n"},{"labels":[null,"enhancement"],"text":"Use `<table class=\"table table-bordered\">` will create a fully bordered table. But I want to have a table with outer border and a border between rows. It should not have border between columns. I asked in SO http://stackoverflow.com/questions/28439436/partially-bordered-table-of-bootstrap-3, it seems BS3 does not support that.\n"},{"labels":["enhancement"],"text":"Hey,\n\nWould it be of any interest in version four to do a pull request for a CSS only toggle switch? It would have animations and slide like you'd expect\n\nExample image:\n![screen shot 2015-02-10 at 2 11 00 pm](https://cloud.githubusercontent.com/assets/947110/6134353/b5a4d2b2-b12e-11e4-8b36-1dd8d3e8f526.png)\n\nEssentially:\n\n``` html\n<label class=\"tgl\">\n  <input type=\"checkbox\" checked/>\n  <span class=\"tgl_body\">\n    <span class=\"tgl_switch\"></span>\n    <span class=\"tgl_track\">\n      <span class=\"tgl_bgd\"></span>\n      <span class=\"tgl_bgd tgl_bgd-negative\"></span>\n    </span>\n  </span>\n</label>\n```\n\nSCSS:\n\n``` scss\n$toggle-height: 30px;\n$toggle-width: 60px;\n$switch-size: 30px;\n\n$anim-slight-bounce: cubic-bezier(0.34,1.61,0.7,1);\n$anim-speed-normal: 250ms;\n\n$border-color: #dadde1;\n$blue: #439fd8; // Guidebook blue\n\n//   BASE\n// -------------------------------------\n\n\n.tgl {\n\n  position: relative;\n  display: inline-block;\n  height: $toggle-height;\n  cursor: pointer;\n\n  > input {\n    position: absolute;\n    opacity: 0;\n    z-index: -1; /* Put the input behind the label so it doesn't overlay text */\n    visibility: hidden;\n  }\n\n  .tgl_body {\n    width: $toggle-width;\n    height: $toggle-height;\n    background: white;\n    border: 1px solid $border-color;\n    display: inline-block;\n    position: relative;\n    border-radius: 50px;\n  }\n\n  .tgl_switch {\n    width: $toggle-height;\n    height: $toggle-height;\n    display: inline-block;\n    background-color: white;\n    position: absolute;\n    left: -1px;\n    top: -1px;\n    border-radius: 50%;\n    border: 1px solid darken($border-color, 5%);\n    @include box-shadow(0 2px 2px rgba(0,0,0,.13));\n    @include transition(left $anim-slight-bounce $anim-speed-normal, transform $anim-slight-bounce $anim-speed-normal);\n    z-index: 1;\n  }\n\n  .tgl_track {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    border-radius: 50px;\n  }\n\n  .tgl_bgd {\n    position: absolute;\n    right: -10px; // 10 compensates for animation bounce\n    top: 0;\n    bottom: 0;\n    width: $toggle-width - ($switch-size / 2) + 10; // 10 compensates for animation bounce\n    @include transition(left $anim-slight-bounce $anim-speed-normal, right $anim-slight-bounce $anim-speed-normal);\n    background: $blue url('http://petelada.com/images/toggle/tgl_check.png') center center no-repeat;\n  }\n\n  .tgl_bgd-negative {\n    right: auto;\n    left: -($toggle-width - ($switch-size / 2));\n    background: white url('http://petelada.com/images/toggle/tgl_x.png') center center no-repeat;\n  }\n\n  &:hover {\n    .tgl_switch {\n      border-color: darken($border-color, 13%);\n      @include transform(scale(1.06));\n    }\n  }\n\n  &:active {\n    .tgl_switch {\n      @include transform(scale(.95));\n    }\n  }\n\n  > :not(:checked) ~ .tgl_body {\n\n    > .tgl_switch {\n      left: $toggle-width - $switch-size;\n    }\n\n    .tgl_bgd {\n      right: -($toggle-width - ($switch-size / 2));\n\n      &.tgl_bgd-negative {\n        right: auto;\n        left: -10px;\n      }\n    }\n  }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"The **goal**: to have the ability of making mobile-first & mobile-only (?) columns, and easily and transparently \"undo\" them on larger breakpoints.\n\nAs you all know, _currently_, Bootstrap lets you make columns starting from the smallest breakpoint you would like those columns to be rendered. For example, if you want a 2-column layout (each column taking up to 50% of the viewport) on every breakpoint, you would use `.make-xs-column(6)`. That mixing would then compile the code necessary for a 2-column layout for the smallest breakpoint and up to the largest one. Similarly, if you want those columns to be rendered only starting from a larger breakpoint, you would then use `.make-sm-column(6)`, `.make-md-column(6)` or `.make-lg-column(6)`, depending at which breakpoint would you like the columns to begin to exist.\nWow, very responsive, such mobile, so first.\n\nBut what if you would like to achieve the exact opposite. That is, **to create columns for smaller breakpoints _only_**, without the need to \"undo\" the (applied) styles on larger breakpoints.\n\n**Enter `.make-*-column-max()` and `.make-*-row-max()` mixins.**\n\nThe trick is simple, and mobile-first-compatible too: to rely on `@media (max-width: @screen-*-max) { ... }`.\n\nI've done a _really_ quick & dirty test on my local copy, and so far, **it seems to work properly**.\nOn `/less/mixins/grid.less`, we would then add a few mixins like the followings:\n\n```\n\n// Rows\n.make-xs-row-max(@gutter: @grid-gutter-width) {\n  @media (max-width: @screen-xs-max) {\n    margin-left:  (@gutter / -2);\n    margin-right: (@gutter / -2);\n    .clearfix; // Note: clearfix used as mixin because we can't extend from within a media query.\n  }\n}\n\n.make-sm-row-max(@gutter: @grid-gutter-width) {\n  @media (max-width: @screen-sm-max) {\n    margin-left:  (@gutter / -2);\n    margin-right: (@gutter / -2);\n    .clearfix; // Note: clearfix used as mixin because we can't extend from within a media query.\n  }\n}\n\n// ... and so on for larger breakpoints...\n\n// Columns\n.make-xs-column-max(@columns; @gutter: @grid-gutter-width) {\n  @media (max-width: @grid-float-breakpoint-max) {\n    position: relative;\n    float: left;\n    width: percentage((@columns / @grid-columns));\n    min-height: 1px;\n    padding-left:  (@gutter / 2);\n    padding-right: (@gutter / 2);\n  }\n\n.make-sm-column-max(@columns; @gutter: @grid-gutter-width) {\n  @media (max-width: @screen-sm-max) {\n    position: relative;\n    min-height: 1px;\n    padding-left:  (@gutter / 2);\n    padding-right: (@gutter / 2);  \n    float: left;\n    width: percentage((@columns / @grid-columns));\n  }\n}\n\n// ... and so on for large breakpoints...\n```\n\n(as you can see, there is some repeated code -properties, mainly- that could probable be abstracted away with some other mixin, but that's another story)\n\nThe _main benefit_ I see is the ability to easily create rows & columns for narrower viewports and \"revert back\" to full-width on larger viewports, if needed, while avoiding the need of \"undoing\" styles (that is, already applied properties).\n\nThanks for the feedback.\n"},{"labels":["enhancement",null,null],"text":"Sometimes you just need to syncrhonously show or hide the content of a collapse.\n\nBootstrap currently does not provide any API to do this, I've been trying various combinations\nof adding and removing the 'in' class from the collapse element without success.\n\nFurther, it seems one cannot even work around the situation by calling $(element).collapse ('destroy')\nto just manually show/hide the thing and re-initialize the collapse.\n"},{"labels":[null,"enhancement"],"text":"#3737\n\n> @mdo The forms can be customized easily enough to reduce this when folks need it.\n\nThis statement is inaccurate, ~~form control~~ `.form-group` margin is not exposed in the LESS.\n\n```\n.form-group {\n     margin-bottom: 15px\n}\n```\n"},{"labels":["enhancement",null],"text":"Scrollbar showing/hiding and the related _\"layout jumping\"_ is usually percieved pretty negatively by users. This is less issue on static web pages, however with dynamic pages or _single-page web applications_ (e.g. AngularJS based) it becames very uncomfortable and distracting.\n\nTo workaround this a standard solution is to force browsers to always show vertical scrollbar by setting `overflow-y: scroll` on `<body>` element. However this is incompatible with Bootstrap's modal dialog as it checks for scrollbar presence only by checking that the [content height is bigger than the viewport](https://github.com/twbs/bootstrap/blob/master/js/modal.js#L250).\n\nI would like Bootstrap to support forced scrollbars (i.e. change the [detection when the scrollbars are shown](https://github.com/twbs/bootstrap/blob/master/js/modal.js#L250)).\n\nJS-Bin to demonstrate the current state of things: http://jsbin.com/johobubafa/1/\n"},{"labels":[null,"enhancement"],"text":"add to sess and less one variable for rtl or ltr bootstarp .\nWith the variable easy change ltr or rtl boostratp \n"},{"labels":[null,"enhancement"],"text":"Please provide official RTL Bootstrap framework !\n"},{"labels":[null,"enhancement"],"text":"Tables have a condensed version, it would also be nice for list-groups, as they have a similar appearance, and flow better for areas, such as sidebars, where you may not want to take up a lot of space.\n\n```\n.list-group-condensed .list-group-item {\n    padding: @table-condensed-cell-padding;\n}\n```\n"},{"labels":[null,"enhancement"],"text":"Recently I had to create step indicator for one of my school project, I couldn't find anything inside bootstrap so I build one based on tutorial found on internet, unfortunately it wasn't responsive.\nI searched for other steps components and I found this: http://demo.titon.io/?step\nMaybe there can be similar component added to bootstrap?\n\nHere is my current steps indicator:\n![image](https://cloud.githubusercontent.com/assets/1741838/5938934/bec74ac0-a6ff-11e4-9fe0-1c34495b8caf.png)\n\nhere is titon version:\n![image](https://cloud.githubusercontent.com/assets/1741838/5939016/5cb036b6-a700-11e4-8d9d-e4ea70d2923f.png)\n\nWhat do You think? Are there any chances this might be added?\n"},{"labels":[null,"enhancement"],"text":"for example:\n\n``` html\n<div class=\"row\">\n    <div class=\"col-xs-12 col-md-8 float-right-md\">always on top</div>\n    <div class=\"col-xs-12 col-md-4\" style=\"height: 100px;\">left or bottom</div>\n    <div class=\"col-xs-12 col-md-8\">footer after #top or #bottom</div>\n</div>\n```\n\n``` css\n/* if -md */ \n.float-right-md { float: right; }\n```\n"},{"labels":[null,"enhancement"],"text":"Just whishing to be something like this:\n\n![breadcrumbs-bootstrap](https://cloud.githubusercontent.com/assets/7512085/5861330/faa3edfc-a270-11e4-9527-dbfc67c7003e.jpg)\n\nhttp://metroui.org.ua/buttons.html#_breadcrumbs\n"},{"labels":["enhancement",null],"text":"There are a lot of server side languages such as PHP which allow you to include one file into multiple pages.\n\nThis works great for navigation! However if you are using Tabs (with Pill styling) the Tab.js file prevents the default link action. This works great if the \"Tab\" is on the page that the Tab-Panel is also on, but if the \"Tabs\" are in a navigation bar that gets included on multiple pages this is not always the case.\n\nIt would be nice if the links default action was only prevented if the Tab-Panel exists on the page. So if it doesn't exist it works like a normal link and takes you to the page the Tab-Panel does exist on.\n\nOf course it would still be up to the designer to then display the proper Tab-Panel, but this can be easily accomplished on the back end as well when the page is loading.\n"},{"labels":["enhancement",null],"text":"It would be nice to set up the direction of transition, for example: right, left, up, down.\n"},{"labels":[null,"enhancement"],"text":"Please add a prefix to class names to prevent clashes with existing class= & data= names.\n\ne.g., when moving to bootstrap, I already had a class=warning, and a class=danger. And maybe some other clashes I haven't noticed yet.\n\nSo, could Bootstrap classes be twb-danger, twb-warning, twb-btn, \n- or even bs-danger :)\n\nSame for data=\"twb-something\"\n\nI realise this would break **everything**, so it would need some thought....\n\nThanks for all your work, appreciated\n\nSimilar to locked #1287\n"},{"labels":["enhancement",null],"text":"The tooltip/popover 'destroy' method is implicitly async because it calls `hide` first, and so a sequence like `$(selector).popover('destroy').popover({ ... })` does not reliably work.\n\nI suggest that, like 'show' and 'hide', 'destroy' be given events 'destroy.bs.popover' and 'destroyed.bs.popover', so that a caller can know for sure that a 'destroy' is finished and can do whatever they need to do to the elements which depends on the tooltip/popover being cleared out.\n"},{"labels":[null,"enhancement",null],"text":"The `gh-pages` branch is very useful because it offers a downloadable version of Bootstraps' docs that do not require Jekyll.\n\nI'm building a boilerplate repo to create Bootstrap themes, similar to [divshot/themestrap](https://github.com/divshot/themestrap), with the difference that it will only require `npm` and `bower` to be installed (no gulp, no ruby, no jekyll), it relies on npm scripts and it downloads Bootstraps' docs from Github requesting the `gh-pages` branch as zip, so one can test during theme development.\n\nIt works smoothly, but it can only download the latest state of the docs. If we start building a Bootstrap theme using, let's say, `v3.3.0`, after the `v4.0.0` release we cannot use the script to test the theme anymore because markup won't match.\n\nThere's a simple way to provide downloadable compiled docs as zip for every single Bootstrap release: manually tagging references to historical states of the `gh-pages` branch according to Bootstrap's releases, with some nomenclature like `v3.3.0-docs`.\n\nTaking into account what @mdo said in #12915, this is a scalable solution due git's nature and Github's features; tags and branches behave kinda the same for these purposes.\n\nIf there's a more practical way to download compiled docs for a given Bootstrap release that I'm missing, please let me know and excuse me.\n\nRegards.\n"},{"labels":["enhancement",null],"text":"I'm surprised there's no request for a function that tells if a tooltip (or popover) is visible or maybe I missed it in the issues. The closest I could find was [this on Stackoverflow](http://stackoverflow.com/q/13442749/) (these are workarounds and could break unexpectedly in a future update). \n\nHow about something like: \n\n```\n  Tooltip.prototype.isVisible = function (obj) {\n    var self = ...\n    if (self && self.$tip && self.$tip.is(':visible')) {\n      return true;\n    } else {\n      return false;\n    }\n```\n\nI understand that it isn't completely deterministic since the result could change due to an animation timeout or mouse event.\n"},{"labels":[null,"enhancement"],"text":"Hi! I would like to ask if it would be possible to isolate the css rules for an image to an exclusive class. What I mean is, if the rules for the blue border and hover were not associated with img elements, we could use also use them to other elements.\n"},{"labels":[null,"enhancement"],"text":"I discovered that the navbar does not work properly if it is contained by a form tag. Basically, in asp.net Masterpages, there is a very common need to keep the form tag in the masterpage: primarily for server side buttons, ajaxcontroltoolkit requirement for the UpdatePanel, and other items.\nBasically, when the screen width is reduced to phone size, the navbar menu option drops down for a fraction of a second, then closes immediately, making selections impossible.\nWhile a form tag can be used anywhere, having to repeat code over and over for every page defeats the purpose of a master page and slows loading time as well. ASP.Net webforms are still alive and well especially in enterprise applications.\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nIn my opinion bootstrap twitter need **_additional class for natural language forms**_.\n\nSimply explanation what is \"natural language form\"\nhttp://goodui.org/#48\n\nMy example how it looks and it works with wide width:\n![vtp70](https://cloud.githubusercontent.com/assets/3903726/5695430/ae4ebc5a-99a3-11e4-8ac1-22ec9a5fc26e.png)\n\nBut the problem is when the width is narrow:\n![2zfxn](https://cloud.githubusercontent.com/assets/3903726/5695434/ca6af660-99a3-11e4-8689-eb5bd2ac3fe3.png)\n\nIt shouldn't move to other rows in that case. What i found it's because of `class=\"form-control\"` but when i remove this class i also lose how fields appear.\n\n**_I want have responsive natural language form, but i don't see technical option in bootstrap twitter to do that in easy way. Only one option what i see is copy CSS for \"form-control\" to another class but without CSS moving forms to new lines.**_\n\nI am writing about that also there:\nhttp://stackoverflow.com/questions/27856466/bootstrap-twitter-3-natural-language-forms\n"},{"labels":[null,"enhancement"],"text":"This code:\n\n```\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-3\">\n                <div class=\"row\">\n                    <div class=\"col-md-1\" style=\"background: #eee\">X</div>\n                    <div class=\"col-md-10\" style=\"background: #ddd\">Blah blah.</div>\n                    <div class=\"col-md-1\" style=\"background: #ccc\">X</div>\n                </div>\n            </div>\n            <div class=\"col-md-3\">\n                <div class=\"row\">\n                    <div class=\"col-md-2\" style=\"background: #eee\">Y</div>\n                    <div class=\"col-md-8\" style=\"background: #ddd\">Blah blah.</div>\n                    <div class=\"col-md-2\" style=\"background: #ccc\">Y</div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">Some Text</div>\n        </div>\n    </div>\n```\n\nrenders like this: http://cl.ly/image/2c1Y1O1U080I The expected behavior is that the 2nd X should be in the same row, as it happens in the middle column with the Ys. The problem occurs with .col-{xs, sm, md, lg}-1.\n"},{"labels":["enhancement",null],"text":"Any way to make close buttons work if using it in non-alerts (like panels)? Simple add of alert-dismissable class changes nothing (close do not work). \n\nIt was working correctly before 3.3.0 version (3.2.0 and older). But with 3.3.0 and 3.3.1 it's not working. \n\nExample\n\n``` html\n<div class=\"panel panel-primary\">\n    <!-- Closing button #1 (X char) -->\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">×</button>\n    <div class=\"panel-heading\">head text</div>\n    <div class=\"some custom class\">\n        <table class=\"table table-hover table-condensed\">\n            <thead>\n                <tr>\n                    <th>column name</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td>column text</td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <!-- Closing button #2 -->\n    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"alert\">Close this popup</button>\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nThere are millions of people who write from right to left, so we wish to support RTL .\n\nThe biggest problem in Bootstrap that it does not support RTL .\n\nPlease do not marginalize this community.\n\nThank you,\n"},{"labels":[null,"enhancement"],"text":"like other form elements\n"},{"labels":[null,"enhancement"],"text":"hi\nplease add variable to sess less for rtl bootstrap\n"},{"labels":[null,"enhancement"],"text":"In response to #9250 I would like to see at the very least either placing the `.label` imports after the `.badge` imports so that their colors can be reused OR creating an `.active` state color instead of the default muted color. I may agree that badges don't need to change through the general array of colors but it would be nice if we could differentiate between 0 and n notifications with a color change. That said, it would at the VERY least make more sense to make the badge color the `$primary` color instead of what it is now if nothing else changes.\n\nExamples of major sites using primary colorations to bring attention to badges (including twitter):\n\n![screen shot 2014-12-28 at 2 59 38 pm](https://cloud.githubusercontent.com/assets/67395/5565271/f0dae75c-8ea3-11e4-9a2e-a754ef2d1132.png)\n![screen shot 2014-12-28 at 3 07 28 pm](https://cloud.githubusercontent.com/assets/67395/5565272/f0dc0ba0-8ea3-11e4-8d7b-bec49106080e.png)\n![screen shot 2014-12-28 at 3 10 42 pm](https://cloud.githubusercontent.com/assets/67395/5565274/f70120f6-8ea3-11e4-9f24-308d12ace4a4.png)\n![screen shot 2014-12-28 at 3 10 52 pm](https://cloud.githubusercontent.com/assets/67395/5565275/f716ef76-8ea3-11e4-9cff-3613e00dc4be.png)\n![screen shot 2014-12-28 at 3 06 48 pm](https://cloud.githubusercontent.com/assets/67395/5565278/fe2cd0fa-8ea3-11e4-893a-898a4e24e428.png)\n![screen shot 2014-12-28 at 3 07 09 pm](https://cloud.githubusercontent.com/assets/67395/5565277/fe2bf554-8ea3-11e4-996d-2b52b62272e8.png)\n![screen shot 2014-12-28 at 2 59 58 pm](https://cloud.githubusercontent.com/assets/67395/5565280/0323313a-8ea4-11e4-964a-4a93efb5fd63.png)\n![screen shot 2014-12-28 at 3 03 34 pm](https://cloud.githubusercontent.com/assets/67395/5565279/03222b50-8ea4-11e4-867a-9eb029d8681b.png)\n"},{"labels":[null,"enhancement"],"text":"there is no any option for right side websites languages, such as arabic and ....etc. in navbar\n"},{"labels":[null,"enhancement"],"text":"How about adding this functionality to the navbar when viewport > 767px: \nhttp://creativekick.dk/portefoelje/eks/javascript/ul-collapsible-element.html\n\nInspired by the second menu here:\nhttp://sporten.tv2.dk/sport \n"},{"labels":["enhancement",null],"text":"Is there any way with the 'hidden' event to determine how it was hidden?\n\nI have a modal which contains an iframe, inside that iframe i can click on something (such as a table row) which will run a callback on the parent causing it to update information on the page and close the modal and then focusing the very next textbox that i want to have focus.\n\nI can also press 'escape' or click the 'X' in the topright corner to close the modal. If i press 'escape' in the iframe i have it set to run a 'cancel' callback event which does things such as refocusing the textbox that caused the modal to display in the first place.\n\nIf i close the modal using the 'X' however, it closes the modal and then does nothing.\n\nI could set up 'hidden.bs.modal' except that it's going to do the same thing regardless of how the modal was closed.\n"},{"labels":[null,"enhancement"],"text":"Me and a lot of my colleagues would appreciate so much to have a search field in the site getbootstrap.com because many \"starters\" keep going back in the documentation and having trouble in finding some content.\n\nWhat do you think about it?\n"},{"labels":["enhancement",null],"text":"It would be useful to know if an expand / collapse event was triggered by a user interaction (e.g. a click) or something else (e.g. programmatically) without having to bind a new click event handler.\n\nGiven the following code (which is based off of bootstrap v3.2.0):\n\n``` javascript\n/*  Feature request:  Forward the originalEvent to (panel / accordion) collapse API handler(s)\n *\n *  In line 646 of bootstrap 3.2.0, the following click event handler is constructed:\n *\n *  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {...}\n *\n *  It would be useful to know if expand / collapse was triggered by a user interaction (e.g. a click) or\n *  something else (e.g. programmatically) without having to bind a new click event handler.\n *\n *  This could be accomplished by capturing the e.originalEvent in the event handler described above.\n */\n\nvar $collapseElements = $('.collapse'),\n    fnCollapseCallback = function (e) {\n        // if this event was triggered by something other than a desired user interaction, do nothing.\n\n        var originalEvent = e.originalEvent || {};\n\n        if (originalEvent.type === 'click') {\n            // do something useful, like fire analytics tracking\n        }\n    };\n\n$collapseElements.on({\n    'hide.bs.collapse': fnCollapseCallback,\n    'shown.bs.collapse': fnCollapseCallback\n});\n\n\n$collapseElements.collapse(); // programmatic collapse (not generated from a user interaction), do not want to track this.\n```\n\nIn the example above I have indicated capturing the e.originalEvent object and storing it on the event object supplied to the fnCollapseCallback handler.\n\nIt might be the case that there is an existing attribute more suited for storing this information (and possibly also not storing the entire originalEvent object).\n"},{"labels":["enhancement",null],"text":"I add some code like these to make modal alwatys in the center of the window\n\n``` css\n#modal{\nposition:fixed;\ntop:50%;\nbottom:50px;\n}\n```\n\n``` js\nvar $modal =$(\"#modal\");\nvar reposition = function() {\n        var modalDialog = $modal.find(\".modal-dialog\");\n        var left = modalDialog.width() / 2 * -1;\n        var top = modalDialog.height() / 2 * -1;\n        modalDialog.css({\n            marginLeft: left + \"px\",\n            marginTop: top + \"px\"\n        });\n    }\n$modal.on(\"shown.bs.modal\",function(){\n    //reposition\n    reposition();\n});\n```\n\nbut cause there is some code about animation as follow in Bootstrapt:\n that.$element .addClass('in').attr('aria-hidden', false)\n\nThe modal will jump, once show with both animation and reposition.\nhow about add delay option to make sure the animation can be excute after reposition?\n\n``` js\nsetTimeout(function() {\n  that.$element.addClass('in').attr('aria-hidden', false)\n}, that.delay);\n```\n"},{"labels":[null,"enhancement"],"text":"Hi guys, \n\nI was thinking to extend bootstrap with a stylus port. \n(I Would like to build that if you like.)\n"},{"labels":["enhancement",null],"text":"Currently it only allows a string selector.\n\nI am using inside an angular directive that wraps the menu that uses scrollspy. The jquery element is instantiated elsewhere, so repeating the selector for the scrollspy declaration goes against the DRY principle (if I change the id, I need to remember changing in the Javascript side):\n\n``` javascript\nlink: function( scope, element ) {\n    $( \"body\" ).scrollspy({\n        // \"element\" is the target I want to use here,\n        // there is no need to repeat the selector\n        target: \"#chapter-menu\"\n    });\n}\n```\n"},{"labels":["enhancement",null],"text":"I want to have a class in Bootstrap to create a div and add the `.draggable` class and be able to drag the div around. Should I create a pull request to add this?\n"},{"labels":["enhancement"],"text":"I really need to have a pulldown panel. And I can't imagine I'm the only one, so this is a feature request.\n\nBootstrap currently only supports a pulldown **menu**, but if you want to put other HTML 'things' in there, like a table or panel the layout is completely off. You can do some things with little forms in the navbar, but that is also not what I want.\n\nI did some small experiments with using a popover too, but it really doesn't seem to work. I found some external libraries, but the funny thing is that the one that came closest to what I want, actually crashes hard with Bootstrap (3)'s styling. So I'm trying to fix that now\nhttps://github.com/claviska/jquery-dropdown\n\nPerhaps you have another suggestion, or can give usability reasons why I actually wouldn't want to do this. Otherwise I hope you would seriously consider this!\n"},{"labels":["enhancement",null],"text":"Currently when the active tab element is clicked (aka re-selected) no event is fired,\nsomething similar to **shown.bs.tab** \n"},{"labels":[null,"enhancement"],"text":"On desktop:\n![img_2014 11 25_20h04m25s_007_](https://cloud.githubusercontent.com/assets/1368405/5189452/5829492e-74de-11e4-94da-8a0dc1f525cc.png)\n\nOn mobile phone (currently):\n![img_2014 11 25_20h04m17s_006_](https://cloud.githubusercontent.com/assets/1368405/5189463/63d9e6a2-74de-11e4-9a43-66472d28b9c3.png)\n\nOn mobile phone (should be):\n![img_2014 11 25_20h04m03s_005_](https://cloud.githubusercontent.com/assets/1368405/5189470/6e99b068-74de-11e4-9f6c-5b51cfd49db0.png)\n\nJust create a helper class, that gives row elements a margin on mobile devices.\n"},{"labels":[null,"enhancement",null],"text":"It would be helpful to have such class. I'm working on a project were I felt the need for it and it looks like other people are feeling the same: http://stackoverflow.com/questions/16489307/how-to-remove-gutter-space-for-a-specific-div-only-bootstrap\n"},{"labels":[null,"enhancement"],"text":"This would be great in [meteor](https://github.com/meteor/meteor), because you can just add bootstraps less files to a project without customization. Meteor compiles every *.less file for itself, but not import.less files.\n\nYes, this is a special request and as far as I know, only beneficial for a single project, but I think the import.less pattern for files which are meant to be included would be great either way.\n"},{"labels":[null,"enhancement"],"text":"I'd like to have smaller than `input-sm` form componets available upstream.\n\nI'm currently using: http://stackoverflow.com/questions/22920589/bootstrap-3-input-xs-smaller-than-sm#22920590\n"},{"labels":[null,"enhancement"],"text":"Is it feasable to generate a custom bootstrap that has certain bootstrap components (forms.less) 'namespaced' as to not conflict with existing site css?  I want to use bootstrap forms styling but I can't have bootstrap affect existing forms, so I wanted to modify forms.less to have a parent selector so the fieldset {} rule becaomes .bootstrap fieldset {}.\n\nIs there a way to accomplish this with a less script short of me hand editing individual less files?\n\nAlso, is there a reason why some components are designed to have bootstrap specific classes whereas other components have styling applied directly to the html element?  (for instance, button has no styling without adding .btn, but fieldset gets styling directly...\n"},{"labels":[null,"enhancement"],"text":"It would be quite neat if you provided a class for buttons when used inside dropdowns so that they can match the style 'a' elements. See [here](http://jsfiddle.net/wqww3pon/)\n\nI could just use 'a' markup for my buttons but it feels wrong when they're not actual hyperlinks.\n"},{"labels":[null,"enhancement"],"text":"It'd be relatively groovy to be able to put spacer divs in place that have the LESS defined height of common elements.\n\nAt the moment this is somewhat unclearly doable by placing the following relative to a fixed navbar style body:\n\n<div class=\"navbar\" style=\"margin-bottom: 0px; border: none\"></div>\n\n\nIt would be somewhat clever to have a navbar-height style as well as button-height, etc...\n"},{"labels":[null,"enhancement"],"text":"Hi,\nI had a big task working on styling pages for printed media, But I find out that Bootstrap dose not have custom grid selection for printed media. So I worked on this to make my live a bit easier\n\nBootstrap print for Twitter Bootstrap v3.\n\nTo mange grids using Twitter Bootstrap v3 for print media.\n\nThis will help controlling grid columns size on printed pages.\n\ncol-p-1, .col-p-2, .col-p-3, .col-p-4, .col-p-5, .col-p-6, .col-p-7, .col-p-8, .col-p-9, .col-p-10, .col-p-11, .col-p-12\n\nAs you can see at this Repository link\nhttps://github.com/Natshah/bootstrap-print\n\nI hop that we can have this in bootstrap so that we do need to add that in every project.\n\nThanks a lot for BS3.3 :)\n\nRewarding :)\n"},{"labels":[null,"enhancement"],"text":"https://gist.github.com/onetest/3f4883470c587c522976\n\nExample of implementation \n"},{"labels":[null,"enhancement"],"text":"Is there any changelog in the downloaded documentation?\nIf not then I think there should be a section for changelog, for example What's New in this version.\n"},{"labels":[null,"enhancement",null],"text":"Hello ~~son~~ @twbs-lmvtfy! You're still monitoring our repo, and can now [Bootlint](https://github.com/twbs/bootlint) live examples in addition to validating their HTML, right? (Thanks to https://github.com/cvrebert/lmvtfy/pull/64 )\n- HTML validity error: http://jsbin.com/hunihamavu/2/edit\n- Bootlint error: http://jsbin.com/zexesubayu/2/edit\n"},{"labels":[null,"enhancement"],"text":"Given that touch devices  have viewport sizes that also cover desktop device widths and we all want to click on stuff I suggest remove xs, sm, for buttons and input-groups etc., and make everything for fat fingers. I doubt anyone wants to feature detect, but many of the components when smallerized are hard to tap on. The smallest button should be the current btn-lg.\n"},{"labels":[null,"enhancement"],"text":"Currently caret has arrow on the bottom, there should also be option to left / right & top caret.\n\nUse case: http://getbootstrap.com/components/#btn-dropdowns-dropup\n\nIf we use multilevel Navbar then also need right caret for sub menu and it can also be used in List group.\n"},{"labels":["enhancement",null],"text":"Currently a tabs.js plugin supports a \"dropdown\" toggle class.  This is suitable for horizontal tabs sub-menu, but for vertical tabs sub-menu a \"collapse\" toggle class is much more convenient.\n\nThis is an easy to introduce feature and I have a patch provided in a comment.\nAn example vertical menu where collapsible sub-menu is used to activate tabs is presented in an attachment.\n"},{"labels":[null,"enhancement"],"text":"Perhaps for version 4 look into incorporating Google's Material design? \n"},{"labels":["enhancement",null],"text":"I like the affix widget, which takes into account top and bottom offsets.\n\nThe only thing I'd like to improve more, is to take into account affix content height against available viewport height beside the offsets.\n\nMeaning that if affix content height is bigger than the space available, it sticks to top (affix-top) until the bottom offset comes into play (you have to scroll till the bottom of the page in order to see the bottom part of the affix).\n\nThe affix element should scroll down together with the page as well until the bottom of it get's fully visible, and then stick it there (until the bottom offset).\n\nPS: another issue I have, is that if refresh the page while at the bottom of the page, the sidebar gets \"affix\" class instead of \"affix-bottom\" and breaks the render (on top of footer), until I start to scroll. I state that I fix the width of the sidebar with JS on document.ready & window.resize, in order to respect the column width\n"},{"labels":[null,"enhancement"],"text":"hi, it would be nice to implement this in the core bootstrap.\n\nExample : \n.top-sm-5 { margin-top:5px; }  // xs, sm, md, lg\n.top-sm-7 { margin-top:7px; }\n.top-sm-10 { margin-top:10px; }\n.top-sm-15 { margin-top:15px; }\n.top-sm-17 { margin-top:17px; }\n.top-sm-30 { margin-top:30px; }\n"},{"labels":["enhancement",null],"text":"Refs https://github.com/btford/mary-poppins/issues/21\nBasically, have a bot that periodically checks for currently-open issues have had an \"awaiting reply\" tag for at least N days without any subsequent posts by non-twbs-team users, and closes them with a nice explanatory comment.\n"},{"labels":[null,"enhancement"],"text":"This is just a copy of https://github.com/twbs/bootstrap/issues/4354, which was closed due to lack of a good icon (see https://github.com/twbs/bootstrap/issues/4354#issuecomment-7698773). However, the `glyphicon-new-window` seems like a very appropriate icon for this.\n\nIf this was easy to do yourself, I'd suggest that bootstrap not do anything here. However, the only way I could get it to work involved hardcoding some magic pixel numbers (see https://github.com/jfly/gjcomps/commit/121a1503182fd3beb97aa75a5ccafeb29bb2d7a6).\n"},{"labels":[null,"enhancement"],"text":"My team and I are interested in extending the media object to create @csswizardry's Flag object. The rough idea is that we have designs that call for an image to be vertically centered with respect to it's content, like so: \n\n![screen shot 2014-10-13 at 2 06 21 pm](https://cloud.githubusercontent.com/assets/39398/4617867/d9b2816a-5303-11e4-89d3-a8b33c751957.png)\n\nYou can read more about it here:\n\nhttp://csswizardry.com/2013/05/the-flag-object/\n\nWould you be open to a PR?\n\nCheers,\n@stubbornella, @jenndodd, @gpleiss, & @bebepeng \n"},{"labels":["enhancement",null],"text":"I was working on a project that needed two scrollspy data targets on a single page. I hope in future releases scrollspy.js can support multiple menus. In the meantime I have come up with a hack-ish solution to get it to work so you can see how other users may want to implement:\n\nhttp://jsfiddle.net/MUpz5/50/\n"},{"labels":["enhancement",null],"text":"Tooltip don't respect dynamically changed title attribute.\n"},{"labels":["enhancement",null],"text":"If the event of leaving a tab needs to be captured, the only way to do this at the moment is to check `relatedTarget` on show/shown events. A typical use-case would be checking if a form contained in a tab has unsaved changes to show a warning to the user when we switches to another tab. So instead of code like this:\n\n``` javascript\n  $('a[data-toggle=\"tab\"][href=\"#my-tab-with-form\"]').one('leave.bs.tab', checkDirty)\n```\n\nwe have to do something like this:\n\n``` javascript\n  $('a[data-toggle=\"tab\"]').on('show.bs.tab', function (e) {\n    if ($(e.relatedTarget).attr('href') == '#my-tab-with-form') {\n      return checkDirty();\n    }\n  })\n```\n\nThis also means that there's no way to only bind this once, because we emulate the leave event by checking the `relatedTarget` on show/shown.\n"},{"labels":["enhancement",null,null],"text":"AMD support so that individual components such as popover, etc. can be required using requirejs\n"},{"labels":[null,"enhancement"],"text":"It would be nice if there were navbar-collapse classes for each size (xs, sm, mg, lg). Otherwise we need to override it or edit it ourselves. Editing the bootstrap library directly is usually a bad idea, and it can be tedious to override this without using sass or less.\n\nAnyway, something like the following would be neat:\nnavbar-collapse-xs\nnavbar-collapse-sm\nnavbar-collapse-md\nnavbar-collapse-lg\n"},{"labels":[null,"enhancement"],"text":"Can support rtl layout like this repo:\nhttps://github.com/morteza/bootstrap-rtl\n"},{"labels":[null,"enhancement"],"text":"Hi,\nPlease add RTL languages support for bootstrap by default.\nBest Regard.\n"},{"labels":[null,"enhancement"],"text":"There is no feature in Bootstrap for making Youtube video responsive. I saw that Bootstrap Blog is using max-width: 100%. But it does not maintain the width x height ratio. So, it looks so weird. Is it possible to add a class to make Youtube video responsive? Here is a solution from http://css-tricks.com/.\n\n// HTML\n\n&lt;div class=\"videoWrapper\"&gt;\n        &lt;iframe width=\"854\" height=\"510\" src=\"//www.youtube.com/embed/010KyIQjkTk\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;\n&lt;/div&gt;\n\n// CSS\n\n.videoWrapper {\n    position: relative;\n    padding-bottom: 56.25%; /\\* 16:9 */\n    padding-top: 25px;\n    height: 0;\n}\n\n.videoWrapper iframe {\n        position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\n<b>Before</b>\n![capture](https://cloud.githubusercontent.com/assets/5278142/4441446/eba0bd6a-47d2-11e4-93ac-4dc8f2b69754.PNG)\n\n<b>After</b>\n![capture2](https://cloud.githubusercontent.com/assets/5278142/4441497/aa79c754-47d3-11e4-97f2-d9ebcf4a1748.PNG)\n"},{"labels":[null,"enhancement"],"text":"Since 1200px is no longer considered a large device, it would be nice to build in another class to the responsive utilities. Maybe a col-xl starting at 1600px? \n\nFor example, a 4 column layout looks great in 1600+ resolution, but not so much in 1280 or 1366.\n\nSeems like it might be nice to build this into the next version of bootstrap. Thoughts?\n"},{"labels":["enhancement"],"text":"Since Issue #7011 has been declined, a much more limited use case: A means of specifying that a button with `data-toggle` will show \"pushed\" when the toggle is open (or optionally, when it's closed). For instance, a button that shows a dropdown would be pushed while the dropdown is showing, and not when it isn't.\n\nOne possibility would be a `data-push` attribute:\n\n```\n<button data-toggle=\"dropdown\" data-push=\"open\">Open The Thingy</button>\n```\n\nPossible values for `data-push`:\n1. \"open\" - Show button pushed when toggle is showing something, not pushed when not showing the thing.\n2. \"closed\" - Opposite of \"open\"\n3. No value at all (e.g., `<button data-toggle=\"dropdown\" data-push>Foo</button>`): Same as \"open\"\n"},{"labels":[null,"enhancement"],"text":"I really need \".visible-*-table-cell\".\n"},{"labels":[null,"enhancement"],"text":"for coloring different types of elements in bootstrap we have to use **different** classes with **different** names, \n- .list-group-item-success  \n- .label-success  \n- .alert-success \n-  ....\n\nWell, I believe if you turn these into a common name  **success** it will be more convenient to use\nso instead of  \n\n```\n.list-group-item-success{...}  \n```\n\nusing \n\n```\n.list-group-item .success{...}   or .label .success{...}\n```\n\nwhat do you think?\n"},{"labels":[null,"enhancement"],"text":"Maybe could this be added? Found a discussion about it with a solution [here](http://stackoverflow.com/questions/11589816/twitter-bootstrap-carousel-vertical-sliding). I set up a [bootply demo](http://www.bootply.com/sbkgXmQ0rI) with the css solution.\n"},{"labels":[null,"enhancement"],"text":""},{"labels":[null,"enhancement",null],"text":"While the popover control is really nice, the dynamic nature of the displayed markup makes it difficult to apply styling for themes. The title in particular is a problem I'm running into - it is set to \"display: hidden\" via javascript if not declared in the options upon initialization. Since there are no on-page indicators that this has happened, it is difficult to style the arrow appropriately. [Here is a demonstration of the problem on my public dropbox.](https://dl.dropboxusercontent.com/u/12146987/bootstrap-popover-issue.png)\n\nWhat I'm proposing is that the popover control add a class such as `no-title` to the parent container of the dynamically generated markup to indicate that the title has been hidden. This way themes can have more control over the popover arrow colors in different scenarios. I'd actually recommend that the class itself also be responsible for hiding the title vs an inline style applied via javascript, but since that code has already been written that way it might be too jarring to developers to change now.\n\nI will make a pull request for this issue asap.\n"},{"labels":[null,"enhancement"],"text":"There are classes available for wells `well-lg` & `well-sm`, same for modals and other components.\nJumbotron should also have classes like `jumbotron-lg` & `jumbotron-sm`.\n"},{"labels":[null,"enhancement"],"text":"I noticed `.border-radius` in label is not using any of the variables defined in variables.less. When I try to compile a custom version of bootstrap (with absolutely no round-corner components), I had to write a standalone css rule to disable .label's border radius. Perhaps a new variable, like `@border-radius-fluid: 0.25em;` will make this clearer.\n\nhttps://github.com/twbs/bootstrap/blob/master/less/labels.less#L15\n"},{"labels":[null,"enhancement"],"text":"hey,\ni already created one pull request about adding a single variable (see  #14580), and after playing around with the `variables.less` file i think there should be more customization options and more consistency along the different components. example below.\n\ni would go ahead and start improving the current state if the devs agree. otherwise one could simply close this issue as _won't fix_.\n\n---\n## example\n\nthe `alert` _module_ contains variables to change text color\n\n``` less\n@alert-success-bg: @state-success-bg;\n@alert-success-text: @state-success-text;\n@alert-success-border: @state-success-border;\n```\n\nbut the `list-group` _module_, does not\n\n``` less\n@list-group-bg: #fff;\n@list-group-border: #ddd;\n@list-group-border-radius: @border-radius-base;\n```\n\ninstead it uses the `@state` variables directly\n\n``` less\n.list-group-item-variant(success; @state-success-bg; @state-success-text);\n.list-group-item-variant(info; @state-info-bg; @state-info-text);\n.list-group-item-variant(warning; @state-warning-bg; @state-warning-text);\n.list-group-item-variant(danger; @state-danger-bg; @state-danger-text);\n```\n\nmy fix would be creating the corresponding variables inside the variables.less file and use them inside the module.\n"},{"labels":[null,"enhancement"],"text":"May be in v4 created polymer component\nhttp://www.polymer-project.org/\n"},{"labels":["enhancement",null],"text":"Can Bootstrap have a feature like Foundation has?\n\nThis: http://foundation.zurb.com/docs/components/equalizer.html\n"},{"labels":["enhancement",null],"text":"The Bootstrap javascript components are great but it's a pain to write a unique ID for each of the accordion or tab. For example, we're using accordions for chat boxes. We have to specify a unique ID for `each` chatbox.\nIt would be great to have a feature in the next bootstrap release which chooses the closest accordion if no ID is specified, and uses the nearest `tab-content`'s children for tabs.\n"},{"labels":["enhancement",null],"text":"The current control for <select> is shown as a list with an veritacl scrollable bar. This is not usefull to the user when the list has more than 8 or 10 elements. Most user i work with, are use to the one in Excel where there is a checkbox next to the options.\nThis guy has done it in his own plugin but it would be nice to have this implemented in core bootstrap:\nhttps://github.com/davidstutz/bootstrap-multiselect\n"},{"labels":[null,"enhancement"],"text":"I'm not speaking any RTL languages, but since I'm working on a project supporting RTL, I was wondering if [form-groups](http://getbootstrap.com/css/#forms-control-validation) shouldn't align the icon inside a input to the left-side. Maybe a native speaker of an RTL can share their thoughts on this.\n"},{"labels":[null,"enhancement"],"text":"Why you aren't using <progress> html tag in progress bars. It will be simply to manage it with jquery\n"},{"labels":["enhancement",null],"text":"How about:\n\n``` js\n$('element').popover(\n{\n  html: true,\n  title: \"Add to basket\",\n  content: some_content,\n  show: true\n});\n```\n\nAs alias of \n\n``` js\n$('element').popover(\n{\n  html: true,\n  title: \"Add to basket\",\n  content: some_content,\n}).popover('show');\n```\n"},{"labels":["enhancement",null],"text":"I am finding that I cannot turn off keyboard navigation within the carousel. The carousel panes are sliding/changing when I use the arrow keys and I can't find a way to turn this behavior off.\n\nI can hook into .on('keydown.bs.carousel' event, but unfortunately, this fires after the carousel has executed both 'slide; and 'slid' events.\n\nIs there another event I can hook into to determine how the carousel is being advanced?\n"},{"labels":[null,"enhancement"],"text":"It would be good if there was a variable for form labels, e.g. `@form-label-color`.\n"},{"labels":["enhancement"],"text":"Square has a really nice \"Browse\" navigation that [collapses upward](https://squareup.com/register) on a mobile device (_Note: You may not be able to see this feature if you are shrinking down your browser to mobile size_). I'm proposing that the collapse plugin take a direction option that would allow you to choose how you want the menu / navigation to collapse:\n\n``` javascript\n$(\"#myCollapsible\").collapse({\n  toggle: true,\n  direction: \"up\"\n});\n```\n\nWe could probably reserve an additional CSS class for those who aren't familiar with JavaScript. Perhaps `.collapse-up`?\n\nI reviewed all issues tagged as features and didn't find any requesting what I'm looking for.\n"},{"labels":[null,"enhancement"],"text":"I know one should be careful when using `.form-inline` at smaller viewports, but hard-coding the `@screen-sm-min` media query is sort of a pain. For example, in a current project, I want it to switch at the `@screen-md-min` breakpoint. IMO this might be better as a mixin that accepts a media query parameter. Thoughts?\n"},{"labels":[null,"enhancement"],"text":"Is there any particular reason why is not supported?\n\nhttp://jsbin.com/xixul/1/\n"},{"labels":[null,"enhancement"],"text":"Hi there !\nDon't you think the navbar-text element should support contextual colors ?\n\nI think it could be great in some cases, to display some info to the user, as small and persistent text.\n"},{"labels":["enhancement",null],"text":"Hello\n\nI have a website 2 columns\n\n![tbs](https://cloud.githubusercontent.com/assets/408368/3981355/593ddb44-286d-11e4-8892-3ec36abc38a0.png)\n\nAnd I look like to be able to hide / show the filter box, with the collapse plugins.\n\nThere is lot of example of this feature in mobile application or I found some [pointers](http://designbeep.com/2013/10/22/20-jquery-side-sliding-panel-plugins-show-hide-website/).\n\nI prefer to use something that is native to bootstrap because bootstrap has a much much bigger community than others lib, then the code quality is also often better ;)\n\nWhat do you think?\n"},{"labels":[null,"enhancement"],"text":"It would be good to implement the appearance of the active menu item in center navbar at adaptation for mobile devices and tablets often do not understand what item menu is currently active, that delivers some are not comfortable.\n"},{"labels":[null,"enhancement"],"text":"In our project, our UX/XD team has decided that the `not-allowed` cursor for disabled items (buttons, checkboxes, etc.) is not ideal. Instead, they'd like us to change these to `cursor: default`.\n\nTo make this change, we'd have to manually edit `dropdowns.less`, `buttons.less`, `forms.less`, etc. (Do a search for `cursor: not-allowed` under path `/less/`.)\n\nWhat I suggest is that we create a variable in `variables.less` for disabled elements' CSS `cursor` property.\n\nI would make this change myself and submit pull request but am unsure of best name to use in `variables.less` for this. Something like `$cursor-disabled`?\n\nPlease advise.\n"},{"labels":["enhancement",null],"text":"Hi\n\nWhen clicking on a button dropdown which is located close to the right side (RHS) of the screen, the dropdown overflows the screen. \n\nSteps:\n1. goto: http://getbootstrap.com/components/#btn-dropdowns (on mobile or emulate screen in browser)\n2. click on dropdown which is close to the RHS of screen.\n\nThanks in advance!\n"},{"labels":[null,"enhancement"],"text":"Hey there,\nI recommend to add a new size \"extra large\" (xl) for desktops larger than 1600px. The reason is, the number of people using very large monitors (24\", 26\", TV) is strongly increasing.\nMaybe because of TVs an xxl-design would be also good :D\n"},{"labels":[null,"enhancement"],"text":"Sometimes, the default <code>.btn-link</code> is not enough to say what we need to say.\nThen, I propose a little upgrade to him. Mixing up the <code>.btn-link</code> with  <code>.text-[status]</code>, we can make it more useful in some cases.\n\nLets go to the code (in SCSS)!\nhttp://jsfiddle.net/cavico/fc5wynek/\n"},{"labels":["enhancement",null],"text":"Hello,\nThere seems to be an issue when loading a modal's content using a specified URL that does not\nexist : \nwhile the background color changes, the modal is never displayed.\n\nI have searched the documentation for an event which would notify for such an\nerror but there seems to be none.\n\nCould you include such an event to a future release? \n\nThanx\n"},{"labels":[null,"enhancement"],"text":"For bootstrap implemented pages with sidebars, where the sidebar should be prevented from being printable using \"hidden-print\" sure hides all of the sidebar stuff.\n\nChrome seems to be able to handle it pretty well by printing as if the page were under 768 wide (for bootstrap, in the \"sm\" range) thus making sure that a right sidebar with a \"hidden print col-md-*\" set of classes would properly disappear in the print output. However, Safari (and maybe some other browsers, I've not tested it on the other) doesn't play well; printing such a page will leave a massive blank area where the sidebar was supposed to be. Reducing the width of the window would remedy the problem but that would have to be done by the user. It would be nice if bootstrap had a separate class (perhaps \"print-fullwidth\") that could be assigned to the div of the content intended to be printable, so that the content prints at full width unambiguously in all browsers without additional intervention from the user.\n"},{"labels":[null,"enhancement"],"text":"I'd like to make it easier to customize Bootstrap, and do that in a clean way that can be incorporated into a build process. The way I see it, there are primarily two things that somebody might do to customize their copy of Bootstrap:\n1. Edit some variables. This is fairly easy; I do this by importing `bootstrap.less` in my own `project.less`, and then declaring the variables that I need to modify.\n2. Remove some modules. I currently do this by:\n   - Copying `bootstrap.less` to my project.\n   - Commenting out the imports that I do not need from `bootstrap.less`.\n   - Importing this modified `bootstrap.less` into my `project.less`, as above.\n   - I run the LESS processor to compile `project.less`, adding the Bootstrap source path (like `bower_components/bootstrap/less`) to the include paths (so it can find the files referenced from `bootstrap.less`.)\n\nI have an idea for simplifying the second scenario. How about we use variables to control whether each module is included or not? We could use [CSS guards in LESS](http://lesscss.org/features/#css-guards-feature) for this. In each file that's imported from `bootstrap.less`, we could enclose the code in a guard like this:\n\n```\n& when (@include-grid = true) {\n\n//\n// Grid system\n// --------------------------------------------------\n\n// ... the rest of grid.less ...\n\n}\n```\n\nWe'll have to add a bunch of these `@include-xxx: true;` declarations in `variables.less` or similar.\n\nWith this in place, I'll then be able to just import `bootstrap.less` into my `project.less` from a copy of the unmodified Bootstrap, and declare the modules that I do not need like this:\n\n```\n@include-glyphicons: false;\n@include-grid: false;\n```\n\nThat would make for a fairly clean and easy build with my customizations built-in.\n\nP.S. I wrote a [blog post](http://www.nikhildabas.com/blog/2013/07/customizing-bootstrap-with-a-build-process) about the process that I currently use.\n"},{"labels":[null,"enhancement"],"text":"Styling should be the same as an `<a>`\n\n(Using a button as a part of a form in a dropdown)\n"},{"labels":[null,"enhancement"],"text":"There is headings-font-family and font-family-base variables that is easy to customize.\nWhy not for links and inputs/textareas as well?\n"},{"labels":[null,"enhancement"],"text":"Class for `.form-control-static` in `.form-inline` is missing on Bootstrap 3.\n\nI could simply add this my my CSS.\n\n```\n.form-inline .form-control-static {\ndisplay:inline-block;\n}\n```\n\nBut, I request to add it in the base bootstrap also. \n"},{"labels":[null,"enhancement"],"text":"Shadow Dom has css scoping. \n\nI have make a shadowdom version, but only test on my site: https://github.com/liudongmiao/bootstrap/compare/shadowdom\n"},{"labels":[null,"enhancement"],"text":"Just like this :\n\n```\n.table-text-center th, .table-text-center td {\n    text-align: center;\n}\n```\n\nfor the table text to display in center.\n"},{"labels":["enhancement",null],"text":"Based on my experience and my reading of the code, you only can only call tooltip once on a node, so if you want to set up multiple selectors with different default values, behaviors, etc, you are out of luck.  In the following example, only \"Hover over me\" gets a tooltip:\n\n``` html\n<span title=\"hover-tooltip\" class=\"hover-tooltip\">Hover over me</span>\n<span title=\"click-tooltip\" class=\"click-tooltip\">Click on me</span>\n<script>\n  $('body').tooltip({selector: '.hover-tooltip', trigger: 'hover'});\n  $('body').tooltip({selector: '.click-tooltip', trigger: 'click'});\n</script>\n```\n\nSeems like it would be nice to be able to set up multiple delegated selectors on a node.  Would probably require a bit of work though, but if there's an interest in this, I could work on a pull request.\n"},{"labels":["enhancement"],"text":"It would be awesome if there is an option for an off-canvas navigation. There is nothing wrong with the current dropdown style navigation in mobile and I'm not against it, I just like the off-canvas style more.\n\nOf course this would not be applicable for every website, but same as the dropdown style either. So it would be good if we can have an option depending on what kind of website we are working on. In my own opinion, the off-canvas style is more \"mobile\" than the dropdown because we can see it more often in mobile apps.\n\nHere is a very good example:\nhttp://designmodo.github.io/startup-demo/framework/samples/sample-04/index.html\nAs you can see the links automatically becomes the off-canvas navigation when in small screen.\n\nAnyone with me?\n"},{"labels":[null,"enhancement",null],"text":"Currently the style of the `.collapse` class is applied unconditionally. If JavaScript is not available for one or another reason, such content is not accessible.\n\nThis can be fixed with the usual `no-js`/`js` classes like what Modernizr does.\n\nIn the most basic case this can be achieved as simple as this:\n\n```\n$(\"html\").addClass(\"js\")\n```\n\nThen in less/component-animations.less change `.collapse` to `.js .collapse`.\n"},{"labels":[null,"enhancement"],"text":"Curious if you guys would be interested in adding these classes?  I've added them to my own deploys but figured if you guys wanted them I could create a pull request.\n\nFor padding and margin what i have done is prefix this with the size... ex:\n\n```\n.margin-none\n.margin-xs\n.margin-sm\n...\n\n.margin-top-none\n.margin-top-xs\n...\n```\n\nalso we have a `.small` but not a `.strong` which would be nice to have.\n"},{"labels":[null,"enhancement",null],"text":"Hi,\nI use  many additional plugins while developing with TBS3.  I think some of them may be part of TBS:\n1. Modal dialog must be improved like http://www.onextrapixel.com/2014/06/25/create-modal-windows-that-can-be-morphed-from-anything-with-jquery-adaptive-modal-js/ or http://dixso.github.io/custombox/   or http://jspanel.de/bootstrap/index.html\n2. On-scroll animated headers like http://tympanus.net/Blueprints/AnimatedHeader/ or http://tympanus.net/Development/HeaderEffects/\n3. Sliding menus like http://demo.sonhlab.com/biz/js-plugins/openpanel/demo.php or http://mmenu.frebsite.nl/ or http://tympanus.net/codrops/tag/menu/ or http://tympanus.net/Blueprints/SlidePushMenus/\n4. Page transition animations like http://tympanus.net/Development/PageTransitions/\n5. Animations for components like http://tympanus.net/Development/ItemTransitions/\nBest regards...\n"},{"labels":[null,"enhancement"],"text":"Is it possible to have something like \"inverted panels\"? Like this:\n\n![sem ttulo](https://cloud.githubusercontent.com/assets/5774516/3527378/79a591f6-0784-11e4-891a-2803472743ad.png)\n"},{"labels":[null,"enhancement"],"text":"Hi,\nright now Bootstrap css is not applied to the Polymer custom elements because they are inside a Shadow DOM ([see here](akserg/angular.dart.ui#38)).\n\nPreviously there was the `applyAuthorStyles` property to set but since they have removed it ([see here](Polymer/polymer#425)) there are only some workarounds to solve the problem ([here](https://groups.google.com/a/dartlang.org/forum/#!topic/web/8bjmkiRFhDk)).\n\nIt is possible to adapt the bootstrap code to support the Shadow DOM as described [here](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom-201/)?\n"},{"labels":[null,"enhancement"],"text":"Would it be useful to have classes for columns in each viewport/sizes that are only valid for the single viewport with no inheritance to the other viewport classes?\n\ni.e.:  \n\n``` html\n<a href=\"#\" class=\"col-xs-12-only\">Click me</a>\n```\n\nThe link would be width = 100% if viewport XS is set but would have the size of the content width (box-model) in any other viewport like SM, MD or LG\n\n``` css\n@media (max-width: 767px) { \n    .col-xs-12-only {\n        width: 100%;\n    }\n\n    .col-xs-11-only {\n        width: 91.66666667%;\n    }\n\n    .col-xs-10-only {\n        width: 83.33333333%;\n    }\n\n    .col-xs-9-only {\n        width: 75%;\n    }\n\n    .col-xs-8-only {\n        width: 66.66666667%;\n    }\n\n    .col-xs-7-only {\n        width: 58.33333333%;\n    }\n\n    .col-xs-6-only {\n        width: 50%;\n    }\n\n    .col-xs-5-only {\n        width: 41.66666667%;\n    }\n\n    .col-xs-4-only {\n        width: 33.33333333%;\n    }\n\n    .col-xs-3-only {\n        width: 25%;\n    }\n\n    .col-xs-2-only {\n        width: 16.66666667%;\n    }\n\n    .col-xs-1-only {\n        width: 8.33333333%;\n    }\n}\n\n@media (min-width: 768px) and (max-width: 991px) {\n    .col-sm-12-only {\n        width: 100%;\n    }\n\n    .col-sm-11-only {\n        width: 91.66666667%;\n    }\n\n    .col-sm-10-only {\n        width: 83.33333333%;\n    }\n\n    .col-sm-9-only {\n        width: 75%;\n    }\n\n    .col-sm-8-only {\n        width: 66.66666667%;\n    }\n\n    .col-sm-7-only {\n        width: 58.33333333%;\n    }\n\n    .col-sm-6-only {\n        width: 50%;\n    }\n\n    .col-sm-5-only {\n        width: 41.66666667%;\n    }\n\n    .col-sm-4-only {\n        width: 33.33333333%;\n    }\n\n    .col-sm-3-only {\n        width: 25%;\n    }\n\n    .col-sm-2-only {\n        width: 16.66666667%;\n    }\n\n    .col-sm-1-only {\n        width: 8.33333333%;\n    }\n}\n\n@media (min-width: 992px) and (max-width: 1199px) {\n    .col-md-12-only {\n        width: 100%;\n    }\n\n    .col-md-11-only {\n        width: 91.66666667%;\n    }\n\n    .col-md-10-only {\n        width: 83.33333333%;\n    }\n\n    .col-md-9-only {\n        width: 75%;\n    }\n\n    .col-md-8-only {\n        width: 66.66666667%;\n    }\n\n    .col-md-7-only {\n        width: 58.33333333%;\n    }\n\n    .col-md-6-only {\n        width: 50%;\n    }\n\n    .col-md-5-only {\n        width: 41.66666667%;\n    }\n\n    .col-md-4-only {\n        width: 33.33333333%;\n    }\n\n    .col-md-3-only {\n      width: 25%;\n    }\n\n    .col-md-2-only {\n        width: 16.66666667%;\n    }\n\n    .col-md-1-only {\n        width: 8.33333333%;\n    }\n}\n\n@media (min-width: 1200px) {\n    .col-lg-12-only {\n        width: 100%;\n    }\n\n    .col-lg-11-only {\n        width: 91.66666667%;\n    }\n\n    .col-lg-10-only {\n        width: 83.33333333%;\n    }\n\n    .col-lg-9-only {\n        width: 75%;\n    }\n\n    .col-lg-8-only {\n        width: 66.66666667%;\n    }\n\n    .col-lg-7-only {\n        width: 58.33333333%;\n    }\n\n    .col-lg-6-only {\n        width: 50%;\n    }\n\n    .col-lg-5-only {\n        width: 41.66666667%;\n    }\n\n    .col-lg-4-only {\n        width: 33.33333333%;\n    }\n\n    .col-lg-3-only {\n        width: 25%;\n    }\n\n    .col-lg-2-only {\n        width: 16.66666667%;\n    }\n\n    .col-lg-1-only {\n        width: 8.33333333%;\n    }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"Greetings, I have a feature request for bootstrap documentation.\nIt's related to us, HAML fans around there. \n\nCan official docs include a button which will toggle the HTML / HAML examples?\nI think it will simplify the process for HAML users out there. (I hope we have many)\nWe can of course do the examples conversion by community.\n\nBecause now my use case is (maybe it's only me, but still)\n- go to bs docs page\n- find the info was looking for\n- copy the example\n- go to http://html2haml.heroku.com/ and paste copied example there\n- copy the haml result\n- ...\n- PROFIT!\n\nI hope that made my point clear enough, so let's discuss cons / pros of this approach.\n"},{"labels":["enhancement",null],"text":"please add notification component same alert styles can set position and custom content \n"},{"labels":[null,"enhancement"],"text":"It was a nice addition to the template, and since we are still able to use navbar-inverse I don't see why the btn is a different matter.\n"},{"labels":[null,"enhancement"],"text":"A feature to generate different grids on a single page.\n\n[Demo](http://kapooostin.github.io/arbitrary-bootstrap-grids/).\n\nI modified mixins for generating columns to accept total amount of columns as an optional parameter. Here is one of the mixins:\n\n``` css\n.make-sm-column(@columns; @gutter: @grid-gutter-width; @columns-total: @grid-columns) {\n  position: relative;\n  min-height: 1px;\n  padding-left:  (@gutter / 2);\n  padding-right: (@gutter / 2);\n\n  @media (min-width: @screen-sm-min) {\n    float: left;\n    width: percentage((@columns / @columns-total));\n  }\n}\n```\n\nIt uses a global `@grid-columns` as a default amount of columns, so the framework doesn't break. In the demo above I didn't modify any of the variables and default grid classes work fine.\n\n[Check](https://github.com/kapooostin/arbitrary-bootstrap-grids/blob/gh-pages/less/demo.less) a `.less` file used in the demo.\n\nI could make a PR to both LESS and SASS repositories if this feature would be useful for anyone else.\n"},{"labels":[null,"enhancement"],"text":"As of now it is not straightforward to add glyphicons to bootstrap. It would be nice if bootstrap would allow one to add more glyphicons uch as social, filetypes, etc.\n"},{"labels":[null,"enhancement"],"text":"Not sure if it's worth doing this or not but it makes sense to have this saved via a cookie probably.\n"},{"labels":[null,"enhancement"],"text":"instead of using 'navbar-fixed-top' or 'navbar-static-top' you can now use 'navbar-fixed-side navbar-fixed-side-right' to have the navbar be aligned vertically on the chosen side\n\nThe main focus of this feature being able to have a navbar that has very little impact on the Mobile screen and thus looks way better in the Mobile version vs the desktop version. Notice the reduced padding; to slim the design down a bit. Only an 'Icon' is displayed during non-use of the navbar, which you can 'tap' to bring forward a 'clean' and less aggressive navbar.\n\nThe second focus of this feature is to have the navbar be on the side instead of on the top, giving the ability to see the page easier during Mobile usage. The top navbar overrides the whole screen most of the time, where as the side navbar only takes up a piece of the screen.\n\nThis is a css only change, which can then be used in the html\nrequired css:\n\n```\n.navbar-fixed-side-left {\n  left: 0;\n}\n.navbar-fixed-side-right {\n  right: 0;\n}\n.navbar-fixed-side {\n  position: fixed;\n  border-width: 0;\n  z-index: 1030;\n  min-height: 5px;\n  min-width: 5px;\n  max-width: 200px;\n  margin-bottom: 0;\n  border: 0px solid transparent;\n}\n.navbar-fixed-side .navbar-toggle {\n  float: none;\n  margin: 0;\n}\n.navbar-fixed-side .nav > li > a {\n  width: 100%;\n  padding: 5px;\n}\n.navbar-fixed-side .dropdown-menu > li > a {\n  padding: 5px;\n}\n.navbar-fixed-side .dropdown-header {\n  padding: 5px;\n}\n.navbar-fixed-side .navbar-nav {\n  margin: 0;\n}\n.navbar-fixed-side .navbar-nav > li {\n  float: none;\n}\n.navbar-fixed-side .navbar-nav > li > a {\n  padding: 5px;\n  line-height: 20px;\n}\n.navbar-fixed-side .navbar-nav .open .dropdown-menu > li > a,\n.navbar-fixed-side .navbar-nav .open .dropdown-menu .dropdown-header {\n  padding: 3px 5px 3px 15px;\n}\n.navbar-fixed-side .container {\n  width: 100%;\n  padding: 0;\n}\n.navbar-fixed-side .navbar-header {\n  float: none;\n  margin: 0;\n}\n.navbar-fixed-side .navbar-collapse {\n  padding: 0 2px;\n}\n.navbar-fixed-side .container .navbar-collapse {\n  margin: 0;\n}\n.navbar-fixed-side .container .navbar-brand {\n  margin: 0;\n}\n.navbar-fixed-side .navbar-brand {\n  float: none;\n  height: 100%;\n  padding: 5px 3px;\n  font-size: 18px;\n  line-height: 20px;\n}\n```\n\nhtml:\nThis is 97~% the same as http://getbootstrap.com/examples/navbar-fixed-top/\nI changed 2 things: \n1) added the 'navbar-fixed-side navbar-fixed-side-left' instead of 'navbar-fixed-top'\n2) moved the `<a class=\"navbar-brand\" href=\"#\">Project name</a>` to be inside of the navbar-collapse div\n\n``` html\n    <html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <title>Bootstrap 101 Template</title>\n\n        <!-- Bootstrap -->\n        <link rel=\"stylesheet\" href=\"/static/css/bootstrap.css\">\n        <link rel=\"stylesheet\" href=\"http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\"></script>\n        <script src=\"/static/js/bootstrap.min.js\"></script>\n        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->\n        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->\n        <!--[if lt IE 9]>\n        <script src=\"https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js\"></script>\n        <script src=\"https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js\"></script>\n        <![endif]-->\n    </head>\n    <body>\n    <!-- Fixed navbar -->\n    <div class=\"navbar navbar-default navbar-fixed-side navbar-fixed-side-left\" role=\"navigation\">\n        <div class=\"container\">\n            <div class=\"navbar-header\">\n                <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">\n                    <span class=\"sr-only\">Toggle navigation</span>\n                    <span class=\"icon-bar\"></span>\n                    <span class=\"icon-bar\"></span>\n                    <span class=\"icon-bar\"></span>\n                </button>\n            </div>\n            <div class=\"navbar-collapse collapse\">\n                <ul class=\"nav navbar-nav\">\n                    <li><a class=\"navbar-brand\" href=\"#\">Project name</a></li>\n                </ul>\n                <ul class=\"nav navbar-nav\">\n                    <li class=\"active\"><a href=\"#\">Home</a></li>\n                    <li><a href=\"#about\">About</a></li>\n                    <li><a href=\"#contact\">Contact</a></li>\n                    <li class=\"dropdown\">\n                        <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Dropdown <b class=\"caret\"></b></a>\n                        <ul class=\"dropdown-menu\">\n                            <li><a href=\"#\">Action</a></li>\n                            <li><a href=\"#\">Another action</a></li>\n                            <li><a href=\"#\">Something else here</a></li>\n                            <li class=\"divider\"></li>\n                            <li class=\"dropdown-header\">Nav header</li>\n                            <li><a href=\"#\">Separated link</a></li>\n                            <li><a href=\"#\">One more separated link</a></li>\n                        </ul>\n                    </li>\n                </ul>\n            </div>\n            <!--/.nav-collapse -->\n        </div>\n    </div>\n\n    <div class=\"container\">\n\n        <!-- Main component for a primary marketing message or call to action -->\n        <div class=\"jumbotron\">\n            <h1>Hello, world!</h1>\n\n            <p>This example is a quick exercise to illustrate how the default, static and fixed to top navbar work. It\n                includes the responsive CSS and HTML, so it also adapts to your viewport and device.</p>\n\n            <p>To see the difference between static and fixed top navbars, just scroll.</p>\n\n            <p>\n                <a class=\"btn btn-lg btn-primary\" href=\"../../components/#navbar\" role=\"button\">View navbar docs &raquo;</a>\n            </p>\n        </div>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n        <br/>\n    </div>\n    <!-- /container -->\n    </body>\n    </html>\n```\n\npictures:\n\n![mobile-left-small](https://cloud.githubusercontent.com/assets/7979093/3377690/0785c7a6-fbe2-11e3-897e-0d6442a3d1f4.jpg)\n![mobile-left-medium](https://cloud.githubusercontent.com/assets/7979093/3377694/0dc89328-fbe2-11e3-87c6-c4107b929f0e.jpg)\n![mobile-left-large](https://cloud.githubusercontent.com/assets/7979093/3377712/2f05c3f8-fbe2-11e3-8bbe-2c8062118c7e.jpg)\n![mobile-right-small](https://cloud.githubusercontent.com/assets/7979093/3377702/15cffb92-fbe2-11e3-9314-492acc76abae.jpg)\n![mobile-right-medium](https://cloud.githubusercontent.com/assets/7979093/3377704/1958a944-fbe2-11e3-8ae4-0b00dcba5a78.jpg)\n![mobile-right-large](https://cloud.githubusercontent.com/assets/7979093/3377707/218ece9a-fbe2-11e3-8b27-98d88a1ae75f.jpg)\n\n![desktop-left-medium](https://cloud.githubusercontent.com/assets/7979093/3377714/35d81f8c-fbe2-11e3-8efd-2c315255f075.jpg)\n![desktop-left-large](https://cloud.githubusercontent.com/assets/7979093/3377715/38c429a2-fbe2-11e3-9339-74f46ccae66f.jpg)\n![desktop-right-medium](https://cloud.githubusercontent.com/assets/7979093/3377718/3b64952a-fbe2-11e3-9663-7f114bcf4a19.jpg)\n![desktop-right-large](https://cloud.githubusercontent.com/assets/7979093/3377721/40346e68-fbe2-11e3-9ce6-21a052bc3f17.jpg)\n"},{"labels":[null,"enhancement"],"text":"Hi we have many use cases where Twitter Bootstrap is only part of the page's design.  Jquery plugins, custom code, legacy templates, etc etc all collide with Twitter Bootstrap's css.  There should be an option to prefix the css for Twitter Bootstrap so that the scope is limited on page.  Thank you!\n"},{"labels":[null,"enhancement"],"text":"I found this to be the simplest way, but looking to see if there is a better way to do this:\n\n<img src=\"https://cloud.githubusercontent.com/assets/34726/3360596/709597c4-faf4-11e3-9b91-de88995233ee.png\" alt=\"screen shot 2014-06-23 at 12 35 31 pm\" width=\"300\"/>\n\nAccomplishing it via this:\n\n``` html\n<button class=\"btn btn-default btn-block\" type=\"button\" style=\"padding: 0.4em;\">\n  <span class=\"pull-left\">Add Middle Mile</span>\n  <i class=\"fa fa-angle-right pull-right\"></i>\n</button>\n```\n\n_Note: Padding is required, or both sit against the border._\n\nWould be nice if there was a way to do this with the icon on the left or right, with maybe a responsive setup..? Or is the way above the recommended way?\n"},{"labels":["enhancement",null],"text":"I know that the issue of adding touch behavior to the carousel has been discussed (#2640, #2711, #2468), and has been rejected for now, but I wanted to share my own attempt at it. I've created a [separate module](https://github.com/avinoamr/bootstrap-carousel-swipe) that wraps around the Carousel class and decorates it to add the swipe behavior. The main difference of this library compared to the previous propositions, is that it was important for me to not only use the swipe event as a trigger for sliding the carousel, but also allow users to \"drag\" the items while they's swiping - somewhat similar to how carousels are implemented in many native applications.\n\nIf you find it interesting, I'd love to add this functionality to the core Carousel class and submit a pull-request. For your consideration. \n\nAlso, any input on the code or library would be great.\n"},{"labels":[null,"enhancement"],"text":"The next release of Chrome, chrome 36, will have support for the woff2 format.\nWould you accept a PR that includes a woff2 format of the glyphicons? Or would you wait until the creator of the glypicons starts suppling them.\n\nRead more about woff2 here - https://gist.github.com/sergejmueller/cf6b4f2133bcb3e2f64a\n"},{"labels":["enhancement",null],"text":"I'm trying to show a modal dialog on top of another but bootstrap just shows one, then shows the other on top of it but its backdrop / overlay is screwed - basically their z-indexes are conflicting with each other. I have a fix for it if  you guys are too busy, and maybe you can review it and include it on the next release.\n"},{"labels":["enhancement",null],"text":"Maybe I'm missing something, but once dropdown has been enabled, there doesn't seem to be any way of destroying it.\n\nUse case:\n\nI'm retrofitting a website to be somewhat responsive. One of the requirements therein requires me to convert the navigation into something a bit more mobile-friendly. I've opted to create a collapsable menu, which I've got going, except that dropdown.js has been applied to the the navigation previously. \n\nSince toggle is returning false (which I question whether that should be a `e.preventDefault()`, but that's a different discussion), There's no way for me to attach my own click event to the button. I could hook into the announced events from the plugin, but it would be a lot easier for me to simply disable the plugin when the mobile view is hit (I'm using enquire.js for this).\n\nsomething like: `$('#samplenav').dropdown('destroy')` would be rather useful, especially since you can enable it at any time by simply applying `$.dropdown()` to an element. \n"},{"labels":["enhancement",null,null],"text":"Things it should flag:\n- PRs against the `gh-pages` branch.\n- PRs that edit only CSS files and not any of the Less source code.\n- PRs that edit only dist JS files and not any of the original JS source\n- PRs that try to edit CNAME.\n\nSplit off from comments in #11984.\n"},{"labels":["enhancement",null],"text":"How can I have fade in effect, without making any tab active.\n\n```\n<div class=\"tab-content\">\n  <!-- I don't want the any tab-pane to be active, and still want fade in effect -->\n  <div class=\"tab-pane fade in active\" id=\"home\">...</div>\n  <div class=\"tab-pane fade\" id=\"profile\">...</div>\n  <div class=\"tab-pane fade\" id=\"messages\">...</div>\n  <div class=\"tab-pane fade\" id=\"settings\">...</div>\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"I have found this old issue #2327 which I assume is talking about removed bootstrap 2 styles and has been closed. However I am about to implement a feature in my project that I think would be useful to have in the bootstrap core. Sortable table headers.\n\nI feel as thought the implementation of the sorting should be left to the consumer, via either backend sorting JS sorting ect. But that bootstrap should include a `table-sort-up` class or similar that would be applied to a table cell in the `thead`\n\nI feel like sortable tables are common, and that one of bootstraps nicest features are standard class names that everyone understands. Leaving the implementation of this leads to variances from project to project.\n\nI'd submit a PR for this. Or I'd be equally fine with this feature being rejected. Just wanted to raise the issue.\n"},{"labels":["enhancement"],"text":"@mdo and @fat : \nA suggestion for the v4 version: (or whenever possible)\nThere's a new JS library, velocityjs.org. Could BS be formed in a way so that the transitions of that library could be used at will? What do u guys think?.. :-)\n"},{"labels":["enhancement",null],"text":"Menu dropdowns disappear after clicking a link and even if only opening a new tab. I don't think it matters whether the dropdowns disappear when one clicks on a link but when one opens a new tab it is highly likely that one will open another one and so the menu dropdowns should not disappear then.\n"},{"labels":[null,"enhancement"],"text":"i am a beginner in website development and m stuck here by unable to replace the bootsrtap navbar brand with a logo-image which is a png file . \n"},{"labels":["enhancement",null],"text":"Looking to be able to have this overlay the parent element of an iframe, while I would rather not have my element inside a frame, there are instances where it is forced upon me and I must, and I would love to have this overlay the parent, as it would more seamlessly fit with the page\n\nthe main problem with it as-is: when you have a long frame that scrolls the page, the confirm dialog appears at the top and you have to scroll to get to it\n"},{"labels":["enhancement",null],"text":"Once in the wile, there is a thought flashing through my mind.\nI like to have some layer, that gonna translate my CSS/LESS code\nwritten in cutting-edge style, into code with old browsers fallbacks/support\nToday this is other way around, I'm forced to use LESS classes and mixins to achive that.\nIs this something you could thinkg about and perhaps include in future version of Bootstrap?\nThanks.\n\nWe could do even better with this. We might throw console warning when code not follow best prectices.\n\nIf anything, this could work as online service.\n"},{"labels":["enhancement",null],"text":"I have a project that uses the carousel module but with indicators that use the pagination class.  I'd would be more flexible to be able to use a marker class to define the indicators rather than the 'carousel-indicators' class which introduces its own styling.\n\nclass=\"pagination carousel-indicators-marker\"\n\nI understand it may not be in keeping with tradition (empty class for marking functionality) but it's easier than adding the 'carousel-indicators' class and having to override the default styles it brings.\n"},{"labels":[null,"enhancement"],"text":"Zero Documentation for off-canvas horizontal to vertical navbar. Utilise addClass for this. \n\nEg:\n\nDesktop:\nOne     Two    Three     Four\n\nMobile using offcavnas:\n\nOne\nTwo\nThree\nFour\n"},{"labels":[null,"enhancement"],"text":"I added the following to give myself visibility control over inline elements for all 4 sizes with-in their appropriate media queries (in the final compiled Bootstrap CSS file). Previously the .visible utility would render the element automatically a block-level element, even when used with a SPAN tag.\n\n<code>\n  span.visible-xs {\n    display: inline !important;\n  }\n</code>\n\nMaybe there was already a way to do this, but if not, then here you go :)\n\nFurther apologies if i broke any standards with my reporting method. Seemed a useful and easy feature to include in a future release.\n"},{"labels":[null,"enhancement"],"text":"To have pull-right and pull-left for Bootstrap v3 in xs, sm, md, lg media. This will help having some complex behavior for contents.\n\nI'm working on number of projects which needs some Complex behavior on content . as you can see in the Modal Window at this site http://stream.aljazeera.com .. which is messing the pull-right and pull-left for media devices.\n\nYou will notice that content will change for mobiles, Tablets.\n\nNow we are into the new Bootstrap v3 !!!!!\n\nAs for Bootstrap v3 we still see that we do not have this list Of classes.\n\n  pull-left-xs\n  pull-right-xs\n\n  pull-left-sm\n  pull-right-sm\n\n  pull-left-md\n  pull-right-md\n\n  pull-left-lg\n  pull-right-lg\n\nAs we do have to add them every time.\nI have this Repo  for that at this link https://github.com/Natshah/bootstrap-pull\n\nI hope that you consider adding add the 8 new classes.\n\nThanks :)\n"},{"labels":[null,"enhancement"],"text":"Guys,\n\nOne of the most common hacks I have to make is adjusting the widths on the dl-horizontal class, usually for smaller spaces but it would make sense to have a larger one for larger date formats. I'm happy for you to reject or change, but I feel like this should be a part of the core. It could also be provided via mixin but I'm not as certain it needs it as much.\n\nThis will allow for DT widths of 60px, 160px (default) and 260px.\nAlso, you'll be able to use the dl-horizontal in containers such as col-lg-3 etc...\n\n``` sass\n.dl-horizontal {\n  dd {\n    @include clearfix(); // Clear the floated `dt` if an empty `dd` is present\n  }\n\n    @media (min-width: $grid-float-breakpoint) {\n        dt {\n            float: left;\n            width: ($component-offset-horizontal - 20);\n            clear: left;\n            text-align: right;\n            @include text-overflow();\n        }\n        dd {\n            margin-left: $component-offset-horizontal;\n        }\n    }\n    &.dl-horizontal-sm {\n        @media (min-width: $grid-float-breakpoint) {\n            dt { width: ($component-offset-horizontal - 100); }\n            dd { margin-left: ($component-offset-horizontal - 90); }\n        }\n    }\n    &.dl-horizontal-lg {\n        @media (min-width: $grid-float-breakpoint) {\n            dt { width: ($component-offset-horizontal + 80); }\n            dd { margin-left: ($component-offset-horizontal + 90); }\n        }\n    }\n}\n```\n\nAlternatively you could use a mixin like:\n\n``` sass\n@mixin createInlineDefinitionList($component-dt-width:160px) {\n    @media (min-width: $grid-float-breakpoint) {\n            dt { width: $component-dt-width; }\n            dd { margin-left: ($component-dt-width + 10); }\n    }\n}\n.dl-horizontal {\n    dd {\n        @include clearfix(); // Clear the floated `dt` if an empty `dd` is present\n    }\n\n    @media (min-width: $grid-float-breakpoint) {\n        dt {\n            float: left;\n            clear: left;\n            text-align: right;\n            @include text-overflow();\n        }\n    }\n    &.dl-horizontal-sm { @include createInlineDefinitionList(60px); }\n    &.dl-horizontal-md { @include createInlineDefinitionList(160px); }\n    &.dl-horizontal-lg { @include createInlineDefinitionList(260px); }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nJust a thought that came to my mind as I have to do it several times, shouldn't the pulls floating be removed for mobile devices or at least 320px width?\n\nReason:\nOn smaller devices, there is no point in floating the elements in most cases (at least 80%) as display block are generally used on this small screens.\n"},{"labels":["enhancement",null],"text":"[WAS: add destroy method to affix]\nSee e.g. http://stackoverflow.com/questions/23797241/resetting-changing-the-offset-of-bootstrap-affix\n"},{"labels":[null,"enhancement"],"text":"There's only one btn-block class for all breakpoints. Classes for different breakpoints would be nice:\n\n.btn-xs-block\n.btn-sm-block\n.btn-md-block\n.btn-lg-block\n"},{"labels":[null,"enhancement"],"text":"How awesome would it be if we would be able to control the gutter width of the row like so:\n\n``` html\n<div class=\"row gutter-2\">\n    <div class=\"col-md-6\">\n        <p>Nice text</p>\n    </div>\n    <div class=\"col-md-6\">\n        <p>Other nice text</p>\n    </div>\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"I have had it quite a few times where I would really like to have a custom font size just for the navbar, so for example I want the rest of the page to be 12px font but the navbar to be 13px.\n\nThis is extremely common for e-commerce and general business sites where the navbar is always a little more pronounced than the rest of the page (not enough to blind the user though).\n\nNormally, yes, I could just add a custom font size via CSS however all of the padding etc for the menu items is based off of the line-height which in turn would be based off of the smaller font size.\n\nMaybe this would be a good feature to add?\n"},{"labels":["enhancement",null],"text":"## Problem\n\nTooltips only support fade animation. [here](https://github.com/twbs/bootstrap/blob/master/js/tooltip.js#L191)\nAnimations should be capable of being outsourced to css.\n\nBenefit: You can use libraries like animate.css in tooltips.\n## Solution\n\nIntegration of custom css animation classes.\n\nTo enable tooltip animation you pass `{ animation: true }`,\nafter this you can pass `{ animation: 'animated bouceInDown'}`\nand tooltips will automatically use this string as animation class.\n\nTake [animate.css](http://daneden.github.io/animate.css/) for example, it's an awesome collection of CSS3 based animations.\n\nInitialization is kept simplistic.\n\n**Dynamic Initialization**\n\n``` javascript\n$(\".music-menu\").tooltip({\n  animation: 'animated bounceInDown'\n});\n```\n\n**Auto Initialization**\n\n``` html\n<span data-animation=\"animated bounceInDown\" data-toggle=\"tooltip\" title=\"Gryffindor\"></span>\n```\n"},{"labels":[null,"enhancement"],"text":"I suggest this improvement on the .container mixin. I think it's a nice way to use containers with multiple grid system.\n\nSuggested new mixins with @gutter param.\n\nMy pull request is ready if you are ok with that.\n\n```\n.container-fixed(@gutter: @grid-gutter-width) {\n  margin-right: auto;\n  margin-left: auto;\n  padding-left:  (@gutter / 2);\n  padding-right: (@gutter / 2);\n  &:extend(.clearfix all);\n}\n\n.container(@gutter: @grid-gutter-width) {\n  .container-fixed(@gutter);\n\n  @media (min-width: @screen-sm-min) {\n    width: @container-sm;\n  }\n  @media (min-width: @screen-md-min) {\n    width: @container-md;\n  }\n  @media (min-width: @screen-lg-min) {\n    width: @container-lg;\n  }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"A la [`[skip ci]`](http://docs.travis-ci.com/user/how-to-skip-a-build/), we can have e.g. `[skip sauce]` and `[skip validator]`.\n"},{"labels":[null,"enhancement"],"text":"Currently, the `.sr-only` rules are mixinable in other selectors, but they are provided in `scaffolding.less`. Could it be possible to provide a real mixin for it and then use it in the class, as done for `.clearfix` and `.text-hide` ? This would allow using it when importing the Bootstrap mixins into  our own less files\n"},{"labels":["enhancement",null],"text":"I am in need to use the data-container=\"body\" on tooltips.js but I have tooltips with different colors in different sections of my page. So it is quite hard to set different styles for these. Better would be if one could just append the color inline ... just a thought!\n"},{"labels":[null,"enhancement"],"text":""},{"labels":["enhancement",null],"text":"Callbacks for the jquery methods are missing. For example:\n`$('#myTab a[href=\"#profile\"]').tab('show', function() {stuffDoAfter();});`\n\nIt would be nice to see it in the next release :)\n"},{"labels":[null,"enhancement"],"text":"Currently the carousel has only one transition effect which is a slide between pictures.\nIt would be great if we can have a fade effect too.\n\nIn a tiny project I made, you can see an exemple of a possible implementation :\nhttps://github.com/GuillaumeAmat/bootstrap-more/blob/master/bootstrap-more.css#L493\n"},{"labels":[null,"enhancement"],"text":"It would be great if we can open dropdown menus on hover.\n\nIn a tiny project I made, you can see an exemple of a possible implementation :\nhttps://github.com/GuillaumeAmat/bootstrap-more/blob/master/bootstrap-more.css#L24\n"},{"labels":[null,"enhancement"],"text":"Currently we can create a layout by setting the width (col-_-_) of the elements.\nWe can also create spaces between them by leaving cols blanks.\n\nIt would be great if we can create vertical spaces between elements with the same logic.\nIn a tiny project I made, you can see an exemple of a possible implementation :\nhttps://github.com/GuillaumeAmat/bootstrap-more/blob/master/bootstrap-more.css#L35\n"},{"labels":[null,"enhancement"],"text":"Do you think that this could work?\nBootstrap no spacing for Twitter Bootstrap v3.\n\nYou can use a ready CSS classes to control the spacing layout for bootstrap v3.\n\n```\n    no-spacing : no padding and no margin.\n```\n\nno-padding-v : no vertical padding.\n      no-padding-h : no horizontal padding.\n no-padding-right : no right padding.\n   no-padding-left : no left padding.\n    no-padding-top : no top padding.\n no-padding-bottom : no bottom padding.\n        no-margin : no margin.\n     no-margin-v : no vertical margin.\n     no-margin-h : no horizontal margin.\n  no-margin-left : no left margin.\n no-margin-right : no right margin.\n   no-margin-top : no top margin.\nno-margin-bottom : no bottom margin.\n\nAdd -xs, -sm, -md, -lg to the end of each class to restrict that the selected media.\n\nPlease, have a look at the following link.\nhttps://github.com/Natshah/bootstrap-no-spacing#bootstrap-no-spacing\n\nThanks.\n"},{"labels":["enhancement"],"text":"I really like it to use Bootstrap and the glyphicon feature is very nice. So it would be very nice, when we have something similar for country flags.\n\nWhy? My opinion is, that the most web developers want less than possible external things in the web applications they develope. Add country flags for a website is currently a external thing, that can be dispensed.\n\nBootstrap is awesome, because you can easily include one framework and use much of functionality.\n\nI don't know how many multy language web applications maded with bootstrap exists, but I can imagine that it would be a helpful feature. Maybe the community think that too?\n"},{"labels":[null,"enhancement"],"text":"It might be worth considering an option for styling tables where the inside of the table has borders for both rows and columns, but the outside of the table has no border. One possible name for this would be: `.table-bordered-inside`. One purpose for this particular style is to retain the inside borders while reducing the non-data ink noise coming from the outside border.\n\nAn example of what I mean can be seen in this fiddle: \nhttp://jsbin.com/hudaqowi/2/edit?html,css,output\n\n``` css\n.table-bordered-inside {\n  border: 0;\n}\n\n.table-bordered-inside>thead>tr>th, \n.table-bordered-inside>tbody>tr>th, \n.table-bordered>tfoot>tr>th, \n.table-bordered-inside>thead>tr>td, \n.table-bordered-inside>tbody>tr>td, \n.table-bordered-inside>tfoot>tr>td  {\n   border: 1px solid #ddd;\n   border-left: 0;\n}\n\n.table-bordered-inside>thead>tr>th:last-child, \n.table-bordered-inside>tbody>tr>th:last-child, \n.table-bordered>tfoot>tr>th:last-child, \n.table-bordered-inside>thead>tr>td:last-child, \n.table-bordered-inside>tbody>tr>td:last-child, \n.table-bordered-inside>tfoot>tr>td:last-child {\n  border-right: 0;\n}\n\n.table-bordered-inside>tbody>tr:last-child td, \n.table-bordered-inside>tfoot>tr:last-child td {\n  border-bottom: 0;\n}\n```\n\nApologies if a request similar to this has already been proposed and dropped; \nI was not able to find one in the issue tracker.\n"},{"labels":[null,"enhancement"],"text":"I use bootstrap on my every project, and the problem I face every time is BS namespace. we can have namespace by CSS preprocessors but endup in multiple css rules for example\nbootstrap has .table and .table-responsive for tables, I don't need a .table I want it applied to all table so I used it as mixin\n\n``` css\ntable { .table; }\ntable.responsive { .table.responsive; }\n```\n\nbut now I will have both of them in my css file, I just want to have my custom created classes and remove the bootstraps name spaced classes....\n1. If bootstrap provides .table(){ ... } kind of mixin and use that mixin .table(); in a seperate less file they can provide fucntionality they want and user can include only the table(); mixin file and will get only one css rule.. It will be more user friendly...\n2. when ever user wants to add / change some thing to the bootstrap file, he can just call the mixin and change the style in his less file.. So that he can really use bootstrap as a bootstrap..\n"},{"labels":["enhancement",null],"text":"e.g.\n\n``` JavaScript\n$('body').scrollspy({\n  target: $('#subnav').parent(),\n  offset: 72\n})\n```\n\nThe current modules use strings to deal with finding DOM elements; using jQuery objects would have more opportunities for expansion.\n"},{"labels":["enhancement",null],"text":"Greetings,\n\nAs described in the [paypal/bootstrap-accessibility-plugin](https://github.com/paypal/bootstrap-accessibility-plugin/blob/master/README.md#popover), we should add `role=\"tooltip\"` to the popover div as well.\n\n:heart:\n"},{"labels":["enhancement",null],"text":"Adding a bit of info to the item with `aria-describedby` to the tooltip/popover would help signal to Assistive Technology, like screen readers, that element getting targeted by the tooltip/popover that it is better described by this other DOM thing. This is illustrated on [paypal/bootstrap-accessibility-plugin source line 32](https://github.com/paypal/bootstrap-accessibility-plugin/blob/master/plugins/js/bootstrap-accessibility.js#L32)\n### Changes that would need to happen:\n- Create an unique ID / or use for the target element on show\n- Add an `aria-describedby=\"elementId\"` on the element on show\n\nWe already have `role=\"tooltip\"` :thumbsup: \n"},{"labels":[null,"enhancement"],"text":"It would be nice if input groups was easily combinable with input groups to build up something like the main search input form on amazon.\n\nAFAIK only the list element is supported for a drop down right now http://getbootstrap.com/components/#input-groups-buttons-dropdowns\n\nAt least the naiv way of putting it together didn't work out (had to apply style-overrides to the select element).\n"},{"labels":["enhancement",null],"text":"A picture is worth a thousand words; this is taken directly from the docs with chrome at 515px wide.\n\n![image](https://cloud.githubusercontent.com/assets/5419074/2854143/50ee4874-d14d-11e3-815a-0f0fe86f51ea.png)\n\nI've implemented the following solution in my own project to remedy this, and would like to know if it is worth submitting a pull request for (modified, of course)\n\n```\n$(document).on('shown.bs.dropdown', function () {\n  OffsetDropdown()\n\n  $(window).on('resize.bs.dropdown', function () {\n    OffsetDropdown()\n  })\n})\n\n$(document).on('hide.bs.dropdown', function() {\n  $(window).off('resize.bs.dropdown')\n})\n\nvar OffsetDropdown = function() {\n  var dropdown = $('.open>.dropdown-menu')\n\n  if (dropdown.length == 0)\n    return\n\n  var rightOffset = dropdown.offset().left + dropdown.width()\n  var browserWidth = $('body').innerWidth()\n  var neededLeftOffset = dropdown.position().left - (rightOffset - browserWidth)\n\n  if (neededLeftOffset < 0) {\n    dropdown.css({ left: neededLeftOffset - 3 })\n  } else {\n    dropdown.css({ left: 0 })\n  }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"I was working on a project where stuff in a `.navbar` needed to be hidden or visible when the `@grid-float-breakpoint` was reached. `.hidden-xs` and `.visible-xs` would have worked, but I changed the `@grid-float-breakpoint` variable from its default.\nEnded up using the following:\n\n```\n.hidden-gfb {\n  @media (max-width: @grid-float-breakpoint-max) {\n    .responsive-invisibility();\n  }\n}\n\n.visible-gfb {\n  .responsive-invisibility();\n}\n\n.visible-gfb {\n  @media (max-width: @grid-float-breakpoint-max) {\n    .responsive-visibility();\n  }\n}\n```\n\nI thought it might be a nice additional to `responsive-utilities.less`.\n"},{"labels":[null,"enhancement"],"text":"@mdo Two suggestions for the upcoming version:\n1. A page similar to http://html5up.net/twenty (click to slide within page)\n2. ~~A Gmaps page. (this actually is more important as many people have to figure out how to combine the libraries together)~~\n\nThanks! :)\n"},{"labels":["enhancement",null],"text":"now best time to add more bootstrap javascript plugins for mobile and desktop.\nsuch as table, list, upload, tree, picker(date,time and color), chart, slider,drag and drop, barcode, qrcode, autocomplete and others\n"},{"labels":["enhancement",null],"text":"Is possible include an official bootstrap theme maker tool (updated) like http://www.stylebootstrap.info/index.php or http://fancyboot.designspebam.com/ or http://pikock.github.io/bootstrap-magic/app/index.html on the official web site?\n\nThis would be an amazing tool for everyone!\n"},{"labels":[null,"enhancement"],"text":"Is there a way to combine multiple grids lika a 20 (gutter 0) and 12 (gutter X) column system with the mixins. I´ve tried to modify them (the less version), but gets Maximum call stack...with npm grunt. I would like a mixin like create grid(cols, gutter, name) and it outputs classe like col-NAME-md-12 and col-NAME-md-20.\n\nThe only solution I´ve found on the net is a javascript that claims it can generate columns classes on the fly, but I wan´t to use the build in classes to mix grid sizes.\n"},{"labels":["enhancement",null],"text":"This functionality is shown in the Scrollspy demo (i.e. scrollable window within a page). I believe it also exists within modals. It would be great to have that added and documented with a few settings....like: https://github.com/rochal/jQuery-slimScroll/\n\nThanks!\n"},{"labels":[null,"enhancement",null],"text":"I find the Bootstrap accordion to be too div heavy. Each collapsing panel section has 4 divs, a heading element and a link. The link and anchor have specific IDs that makes it difficult to insert new content without having to completely rejig the order if you're simply using one, two, three, etc. for your anchor IDs. This could be much simpler and less specific. My normal accordion looks like this:\n\n```\n<div class=\"accordion\">\n    <h4>Collapsing panel one header</h4>\n    <div>\n        <p>Collapsing panel one content.</p>\n    </div>\n    <h4>Collapsing panel two header</h4>\n    <div>\n        <p>Collapsing panel two content.</p>\n    </div>\n    <h4>Collapsing panel three header</h4>\n    <div>\n        <p>Collapsing panel three content.</p>\n    </div>\n    <h4>Collapsing panel four header</h4>\n    <div>\n        <p>Collapsing panel four content.</p>\n    </div>\n</div>\n```\n\nAnd the JS like this (not sure exactly where I got this, so I can't credit the original author here).\n\n```\n// accordion\n$('.accordion> h4').click(function() {\n    // remove the active class from all buttons\n    $('.accordion> h4').removeClass('active');\n    // we close all open divs\n    $('.accordion> div').slideUp('normal');\n    // we open the next div\n    if($(this).next().is(':hidden') == true) {\n        // add the active class to the button\n        $(this).addClass('active');\n        // open the div\n        $(this).next().slideDown('normal');\n    }\n});\n// close all divs on open\n$('.accordion> div').hide();\n```\n\nA bit of CSS and it looks more or less the same as Bootstrap. I think it's simple and requires much less markup. Do you think the default accordion could be simplified further in a future release? Consider this a feature request :)\n"},{"labels":[null,"enhancement",null],"text":"It is possible to mix striped and non-striped progress bars by using an inline element around the `progress-bar` element, like this:\n\n``` html\n<div class=\"progress active\">\n  <div class=\"progress-bar progress-bar-success\" style=\"width: 35%\">...</div>\n\n  <span class=\"progress-striped\">\n    <div class=\"progress-bar\" style=\"width: 45%\">...</div>\n    </span>\n</div>\n```\n\nThe result:\n![progress1](https://cloud.githubusercontent.com/assets/343404/2707207/11d8bcec-c49f-11e3-9fbf-c3472a277c4b.png)\n\nThis is not really smart, wouldn't it be easier when I could add the `*-striped` and `active` class directly to the `progress-bar` element?\n\n``` html\n<div class=\"progress active\">\n  <div class=\"progress-bar progress-bar-success\" style=\"width: 35%\">...</div>  \n  <div class=\"progress-bar progress-bar-striped\" style=\"width: 25%\">...</div>  \n  <div class=\"progress-bar progress-bar-striped active\" style=\"width: 15%\">...</div>\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"When using class=\"dl-horizontal\" dt is given a width of 160px. This is not always appropriate, for example when using numbers (< dt >1.< /dt >). Can it be made a variable to make it adaptable?\n"},{"labels":[null,"enhancement"],"text":"I've coded:\n\n```\n<div class=\"well bg-success\">some text</div>\n```\n\nBut I didn't get the green background color.\n\nShouldn't the well component accept the contextual background class background-color?\n"},{"labels":["enhancement",null],"text":""},{"labels":[null,"enhancement"],"text":"Hi,\n\nI'm trying to mix components, namely the `label` as an `input-group-addon`. Currently this doesn't allow the label to site nicely alongside an input, because the label overrides a few key properties, namely `display`, `vertical-align`, `padding` and `border-radius`.\n\nCould we consider the following:\n\n```\n// Allow labels to be used AS the add-on if included in the same element class attribute.\n&.label {\n  display: table-cell;\n  padding: @padding-base-vertical @padding-base-horizontal;\n  vertical-align: middle;\n  border-radius: @border-radius-base;\n}\n```\n\nWithin the `input-groups.less:.input-group-addon` definition, to allow labels to look structurally like an input-group-addon which could enable some different presentational styles for validation, etc? Probably need a few additional specialisms for mixing with `.input-lg|.input-sm` to futher reset `padding` and `border-radius`?\n\nRegards,\nMatt\n"},{"labels":[null,"enhancement"],"text":"Hi\n\nIt would be nice to have the \"@grid-gutter-width\" variable for each device-width individually, so for example the gutter could be smaller on mobile devices to save some space. What do you think?\n\nRegards,\nFrank\n"},{"labels":[null,"enhancement"],"text":"Bootstrap includes classes `visible-xs`, `visible-sm`, `visible-lg` etc which make an element only visible at these device widths. It would be great to get the same for a clearfix, so an element can be made to clear only at certain device widths.\n### Use Case:\n\nA grid layout with four cells of mixed height content. The cells each have the class `col-xs-6 col-sm-3` which means they span three columns at `sm` width and six at `xs` width. The problem is that none of the cells clear, meaning they'll float up next to each other if the content of the first cell is taller than the others.\n\nIf there was a `clearfix-xs` class which only cleared at the `xs` device width then this class could be applied to the third cell and the layout would behave as expected.\n### Current Solution:\n\n[Bootstrap's CSS documentation](http://getbootstrap.com/css/#grid-example-mixed) suggests a hacky way around this currently, which is to insert a `<div>` between the second and third cells with a class of `clearfix visible-xs`. This is far from ideal as it introduces unnecessary elements into the page.\n"},{"labels":[null,"enhancement"],"text":"Hi\n\nI see that checkbox label cursor is still have hand cursor on it when its disabled. \nIt should be \"not-allowed\" cursor because label is part of checkbox.\nExample: http://getbootstrap.com/css/#forms-control-disabled\n\nThanks.\n"},{"labels":[null,"enhancement",null],"text":"popover gets misplaced from its target icon when screen is rotated \n"},{"labels":[null,"enhancement"],"text":"Removed script! :P\n"},{"labels":[null,"enhancement",null],"text":"Need help. I need to use a \"dropdown\" to block only when the resolution is less than 768 (tablets), otherwise \"dropdown\" is removed from this unit (in the script I did not find something like \"destroy\")?\n"},{"labels":["enhancement",null],"text":"See #12651. It would be nice to be able to manipulate the `<input>`s directly and not care whether they're using the Button plugin and yet still have them receive the styling appropriate to their checkedness.\n\n(Might need to be opt-in?)\n"},{"labels":[null,"enhancement"],"text":"Just as alerts have alternates styles that use the existing state values (success, warning error, info, danger). Popover should also have this same ability\n"},{"labels":[null,"enhancement"],"text":"Not sure if it's worth or whatever, but I find myself many times wanting to check out the full site.\n\nMaybe overriding the viewport via JS and setting a cookie or something so that the option is saved across sessions.\n"},{"labels":["enhancement",null],"text":"Like how the Android browser behaves: hide the navbar when scrolling down, but show it when scrolling up.\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nregarding to http://getbootstrap.com/css/#forms-control-validation, on \"With optional icons\".\n\nI know you recommend to adapt the css \"top\" value when the input group doesn't contains a label.\n\nBut I was wondering if that could not be easily included to the BS core by having a label with \"sr-only\" or \"hidden\" class, then you could do something like:\n\n/**_BEGIN**_/\n/\\* SASS _/\n.has-feedback .control-label{\n    &.sr-only,\n    &.hidden, // This should include .hidden-lg, .hidden-sm, etc\n    &.hide{\n        ~ .form-control-feedback{\n            top: 0;\n        }\n    }\n}\n/_***_END**_**/\n\nI solved this issue by adding that code to my projects. Just that. A little suggestion for a general solution for everyone. \n\nPS: Nice work with BS. Really appreciated.\n\nRegards\n"},{"labels":["enhancement",null],"text":""},{"labels":["enhancement",null],"text":"Currently if I set a tooltip and a popover on the same element, it keeps the tooltip active when the popover appears. I think it should be set by default to hide the tooltip while there is a popover visible on the same element. \n\nIf you think that worth being added in, I will submit a pull request with the code and a test for that.\n"},{"labels":["enhancement",null],"text":"The show.bs-event for tooltips and popovers is fired _before_ its content is set. This is probably by design and, indeed, necessary in many use cases. However, I find myself in need of an event that is fired \"in between\" show.bs and shown.bs; I need to massage the contents after it has been set but before it is shown (e.g. \"rendered.bs\"). Is it worth considering adding such an event?\n"},{"labels":[null,"enhancement"],"text":"Hello,\n\nI have an electric cables catalog (pdf/printed). I wan to make its web page and to put online. I want a bootstrap theme for it. For Example\n\nThis is a home page for a 1oth class books site...\nhttp://elearn.punjab.gov.pk/\n\nand this is a Biology book online...\nhttp://elearn.punjab.gov.pk/home/read_book/2\n\nI want theme like this where I can display contents..ie text, images and vidoes like above link...\n\nPlease help to find a suitable theme...\n"},{"labels":[null,"enhancement",null],"text":"I'm fond of Bootstrap and would like to use it in my project. But recently we need to create a three-column page which is adjustable. Like http://layout.jquery-dev.net/demos/simple.html and http://w2ui.com/web/demo/layout. It could be better if Bootstrap provides a more fluently and easy-to-use layout for us!\n"},{"labels":["enhancement"],"text":"Also look into `compress` option for less.\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nwhen switching the 'action' and 'dropdown' button in the segmented input group from the docs causes a wrong border radius for the buttons.\nInterestingly enough it works fine on the left side, but comes out wrong on the right side. See screenshot for clarity:\n\n![screen shot 2014-03-22 at 21 44 02](https://f.cloud.github.com/assets/1105056/2491875/d45e0e34-b202-11e3-8653-850c7b45e668.png)\n"},{"labels":[null,"enhancement",null],"text":"I took the sample code for the page provided here: http://getbootstrap.com/examples/carousel/\n\nThe slideshow is only resizing images to the horizontal dimension when making the view window smaller horizontally only.  This causes stretching or degradation of the image.  Am i missing something or is this intended functionality?\n"},{"labels":[null,"enhancement"],"text":"As the doc explain itself http://getbootstrap.com/components/#navbar-fixed-top\nYou have to override the body padding-top in your custom CSS.\nBut using a static number (\"50px\") in my style.css is not an acceptable choice.\nThe only possible option is to use the less file and add the padding myself using @navbar-height.\n\nSo, why not create a `<body>` class which add the appropriate (@navbar-height) padding-top that would be used when you are using a floating navbar ?\n\nThe declaration would look like this : \nnavbar.less :\n\n```\nbody.navpadded{\n    padding-top:@navbar-height;\n}\n```\n\nindex.html :\n\n```\n<html>\n    <head>\n        <link href=\"bootstrap.min.css\" rel=\"stylesheet\">\n    </head>\n    <body class=\"navpadded\">\n        <nav class=\"navbar navbar-default navbar-fixed-top\">...</nav>\n        ...\n    </body>\n</html>\n```\n\nno custom CSS, no JS setInterval height watcher = perfect !\nThank in advance\n"},{"labels":[null,"enhancement",null],"text":"I planned on implementing this but my JS knowledge failed me.\n\nIf anybody else wants to jump in and give it a try, be my guest.\n\nI'll open a Pull Request in a moment to convert the translations section in the docs to be generated from YAML data, which might help with the implementation of this feature.\n\n/cc @twbs/team \n"},{"labels":["enhancement",null],"text":"This is for tracking #12296, in case the PR's author is unable to follow up.\n"},{"labels":[null,"enhancement"],"text":"#### You can use this as an enhancement if you would like.\n\nI had 4 images which needed to display as follows:\n\nMedium + displayed on 1 row:\n\n| Image One | Image Two | Image Three | Image Four |\n| --- | :-: | :-: | --: |\n| Left Aligned | Centered | Centered | Right Aligned |\n\nSmall displayed on 2 rows:\n\n| Image One / Three | Image Two / Four |\n| --: | --- |\n| Right Aligned | Left Aligned |\n| Right Aligned | Left Aligned |\n\nExtra Small displayed on 4 rows:\n\n| Image One - Four |\n| :-: |\n| Centered |\n| Centered |\n| Centered |\n| Centered |\n\nSo I created the following css to allow me to do that:\n\n``` css\n.text-left-xs {\n  text-align: left;\n}\n\n.text-right-xs {\n  text-align: right;\n}\n\n.text-center-xs {\n  text-align: center;\n}\n\n@media (min-width: 768px) {\n  .text-left-sm {\n    text-align: left;\n  }\n\n  .text-right-sm {\n    text-align: right;\n  }\n\n  .text-center-sm {\n    text-align: center;\n  }\n}\n\n@media (min-width: 992px) {\n  .text-left-md {\n    text-align: left;\n  }\n\n  .text-right-md {\n    text-align: right;\n  }\n\n  .text-center-md {\n    text-align: center;\n  }\n}\n\n@media (min-width: 1200px) {\n  .text-left-lg {\n    text-align: left;\n  }\n\n  .text-right-lg {\n    text-align: right;\n  }\n\n  .text-center-lg {\n    text-align: center;\n  }\n}\n```\n\nThe html to do what I want is:\n\n``` html\n<div class=\"col-md-3 col-sm-6 col-xs-12 text-left-md text-right-sm text-center-xs\">\n  <img />\n</div>\n<div class=\"col-md-3 col-sm-6 col-xs-12 text-center-md text-left-sm text-center-xs\">\n    <img />\n</div>\n<div class=\"col-md-3 col-sm-6 col-xs-12 text-center-md text-right-sm text-center-xs\">\n  <img  />\n</div>\n<div class=\"col-md-3 col-sm-6 col-xs-12 text-right-md text-left-sm text-center-xs\">\n  <img />\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"I've been playing around with the new RTL support, one thing I noticed is that sometimes you might use glyphicon arrows pointing to the right or left to mean \"backwards\" and \"forwards\" e.g. a button to take you to the next step in a process, which I guess (since I only speak English, and don't know that much about RTL internationalization) would need to be flipped when using RTL languages.\n\nAs I say, not an expert, but maybe a glyphicon-chevron-forwards and -backwards (and so on for other \"pointy\" icons like the hand) that flipped automatically with the current text direction would be one solution. \n\nWhen searching to see if this was already mentioned, I found an old bug #282  that made a similar point about tooltips and popovers.\n"},{"labels":[null,"enhancement",null],"text":"Hello,\nfor a future version is it possible to add in navbar dropdow the possibility to add checkbox to select multiple value and have a submit button or link (i used it for make filter) like this sample\n![sample checkbox](https://f.cloud.github.com/assets/3072160/2418587/561ed182-ab47-11e3-9575-0156f8b4bba8.jpg)\n"},{"labels":[null,"enhancement",null],"text":"Hey,\n\nRecently I've been putting together a page that has a lot of data. I'd like to consolidate this more by adding a scrollable feature to my table, however, overflowing the table in y with a max height causes the header to scroll. I've tried several CSS tricks and looked all over the internet for a solution. Most people suggest turning tbody into a block element, however this messes up all of the column formatting. \n\nHaving the ability to do something similar to <table class=\"table table-bordered table-scroll table-fixed-header\" ....  would be awesome.\n"},{"labels":["enhancement",null],"text":"Is a use as below not intended or am I doing sth. wrong, I have already checked it many times? Obviously the class \"in\" is not removed from the other items when clicking on another one.\n\nHere online: http://jsfiddle.net/h95sT/\n\n```\n    <dl id=\"faq\">\n    <dt data-parent=\"#faq\" data-target=\"#answer-1\" data-toggle=\"collapse\">\n    Term 1</dt>\n\n    <dd class=\"collapse in\" id=\"answer-1\">description 1</dd>\n\n    <dt data-parent=\"#faq\" data-target=\"#answer-2\" data-toggle=\"collapse\">\n    Term 2</dt>\n\n    <dd class=\"collapse\" id=\"answer-2\">description 2</dd>\n    </dl>\n```\n"},{"labels":["enhancement",null],"text":"I'm implementing a side navigation bar using a list group with linked items.  Looks something like this:\n\n``` html\n<div class=\"list-group side-nav\">\n  <a class=\"list-group-item\" href=\"#20131023_appointments\">\n    <i class=\"fa fa-chevron-right\"></i> October 23, 2013\n  </a>\n  <a class=\"list-group-item\" href=\"#20131024_appointments\">\n    <i class=\"fa fa-chevron-right\"></i> October 24, 2013\n  </a>\n  <a class=\"list-group-item\" href=\"#20131025_appointments\">\n    <i class=\"fa fa-chevron-right\"></i> October 25, 2013\n  </a>\n  <a class=\"list-group-item\" href=\"#20131026_appointments\">\n    <i class=\"fa fa-chevron-right\"></i> October 26, 2013\n  </a>\n</div>\n```\n\nScrollSpy currently only works with `.nav` elements containing links inside `li` elements.  I propose we also support list groups.  List groups support active links, which makes them a good candidate for navigation elements, therefore ScrollSpy should support them.\n\nI have an idea about how to do this, but it's really rough, so I'm just going to describe it here instead making a full pull request.  If people think the idea is good, I'll write it up and create the pull request.\n\nWe could either try and detect a list group, or allow passing an option to specify list-group mode.  I'm going with the latter.  \n\nThis would require implementing the selector something like this:\n\n``` js\nthis.selector       = (this.options.target\n       || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n       || '') + (this.options.listGroup ? ' a' : ' .nav li > a')\n```\n\nand the activation code like this:\n\n``` js\n    var active;\n    if (this.options.listGroup) {\n      active = $(this.selector);\n    } else {\n      active = $(this.selector)\n        .parentsUntil(this.options.target, '.active');\n    }\n    active.removeClass('active');\n\n    var selector = this.selector +\n        '[data-target=\"' + target + '\"],' +\n        this.selector + '[href=\"' + target + '\"]'\n\n    if (this.options.listGroup) {\n      active = $(selector);\n    } else {\n      active = $(selector)\n        .parents('li');\n    }\n    active.addClass('active'); \n```\n\nInterestingly enough the code is simpler for the list group case.  \n\nWhat does everyone think?  Should I flesh this out into a pull request?\n"},{"labels":[null,"enhancement"],"text":"Thanks for this awesome project.\n\nWhat about adding css classes to give `.nav-pills` different colors?\n\nFor example something like:\n- `.nav-pill-default`\n- `.nav-pill-primary`\n- `.nav-pill-danger`\n- etc ...\n"},{"labels":["enhancement",null],"text":"``` html\n<button data-target=\"#someSuperDuperStyledDiv\" type=\"button\" class=\"btn btn-default\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"left\" >\n  Popover on left\n</button>\n<div id=\"someSuperDuperStyledDiv\">I'm the html popover content</div>\n```\n\nHaving this we can use popovers to display html content easier and it is better to read than the `data-content` attribute, which is currently available.\n"},{"labels":[null,"enhancement"],"text":"Just curious, when using `.form-horizontal` and `.input-sm` don't we need a `.label-sm` too to match things up, or am I missing something here?\n"},{"labels":[null,"enhancement",null],"text":"Hi\nI want to suggest adding a new Javascript feature - Gallery.\nCurrently I need to add separate plugins to have a \"view image\" option for users, or to browse through some photo gallery.\nIt will be very handy if there is such javascript feature inside the bootstrap. :)\n\nFor example I give the fancybox plugin - https://github.com/fancyapps/fancyBox\n"},{"labels":[null,"enhancement"],"text":"Similar to `well` on a `div` but styled for dropping files to be uploaded. Potential features:\n- Dashed border (seems like the convention)\n- Styled heading element\n- Styled description text\n- Styled extra-large icon\n- Link / button for manual selecting files\n\nSome e.g. visuals:\n![ui-dropzone-01](https://f.cloud.github.com/assets/3760840/2369889/318183b6-a7ef-11e3-9e5d-b2ad20c821a0.png)\n"},{"labels":[null,"enhancement"],"text":"LESS 1.7.0 (included in grunt-contrib-less 0.10.0) now supports [ruleset mixins](http://lesscss.org/features/#detached-rulesets-feature).\n\nIt would be super sweet to have some mixins for commonly used media queries.\n\nAn example: https://gist.github.com/simbo/9427230\n"},{"labels":[null,"enhancement"],"text":"...can be easily done like this:\nhttps://gist.github.com/simbo/9427036\n(ready to use with autoprefixer)\n\nImho this would be a better solution than offering several mixins for two or three color-stops. Any chance to integrate this feature?\n"},{"labels":["enhancement",null],"text":"Hi.\nI need to have panel foldable.\nIt run correctly with panel-body but not with table or ul element.\n\nFor now I fixed it with this code:\n\n//\nsetBsPanelFoldable: function(context) {\n        if (typeof context == 'undefined') {\n            context = document;\n        }\n\n```\n    // ajout de l'icone\n    var dataFoldable = $('[data-bs-foldable]', context);\n    if (dataFoldable.length > 0) {\n                    //Add icon to differency panel to foldable panel\n        if (dataFoldable.data('bsFoldable') != 'noicon') {\n            dataFoldable.prepend('<div class=\"pull-right\" data-bs-tooltip=\"true\" title=\"show/hide\"><i class=\"fa fa-caret-down fa-fw\"></i></div>');\n        }\n    }\n\n    $(document).on('click', '.panel-heading[data-bs-foldable]', function() {\n        $('.panel-body, .table', $(this).parent('.panel')).first().slideToggle();\n    });\n}\n```\n"},{"labels":["enhancement",null],"text":"I'm probably not going to implement this myself, but this is something that ought to be done eventually.\n"},{"labels":[null,"enhancement"],"text":"Can the dropdown component have animation (e.g. slide up, slide down) when you click it.\n"},{"labels":["enhancement",null],"text":"Using javascript to automatically update a small preview for colour variables on the customiser (perhaps using input groups).\n\nFor example: \n![](http://i.imgur.com/Ii8H6pb.png)\n"},{"labels":[null,"enhancement",null],"text":"Many people (like me) sometimes get stuck on older versions of Bootstrap for whatever reason and as Bootstrap progresses it's easy for the docs to stop matching what you're using locally.\n\nI think it might make sense to make it possible to browse the docs for any version from http://getbootstrap.com. I think a simple way to do this could be to write a script that automatically fetches every tag for which it can't find a directory in the jekyll build and let it compile the jekyll docs for it automatically (possibly excluding the latest tag). This way it'd be extremely easy to just browse to urls like http://getbootstrap.com/3.1.0 and get docs for that version.\n\nI think I might be able to help you implementing this if you'd rather spend your time on more important issues (which is likely since this is mostly a pet peeve of mine :smile:), but I'd like to know if something like this would make sense to you and if you'd use it.\n"},{"labels":[null,"enhancement"],"text":"It would be nice if it is possible to add .active to a list-group-item when the list-group is a list and not a link.\n"},{"labels":["enhancement",null],"text":"hey guys, I been thinking of bootstrap framework includes touchswipe pluging that already exist in <a href=\"https://github.com/mattbryson/TouchSwipe-Jquery-Plugin\">touchswipe</a> making the bootstrap framework more complete than ever imagined. @mattbryson i think is a excellent jquery pluging that bootstrap can take advantage of his popularity, an satisfy more developers can make great projects.\n\nif you think this can be a great idea let me know.\nHave a nice day.\n@pablocarreraest \n"},{"labels":[null,"enhancement"],"text":"Would be interesting to have the semantic of a \"flat\" button i.e. without border.\r\n\r\nThere would be then 3 types of buttons instead of [2](http://getbootstrap.com/css/#buttons):\r\n- Regular buttons (btn-default, btn-info...)\r\n- Link buttons (btn-link)\r\n- => Flat buttons (btn-flat)\r\n\r\nTypical use case:\r\n\r\n![bootstrap_flat_button.png](http://s2.postimg.org/42vmv7eop/bootstrap_flat_button.png)\r\n\r\nThis semantic (\"flat\") exists in other libraries:\r\n- Qt (a C++ GUI library): http://qt-project.org/doc/qt-5/qpushbutton.html#flat-prop and http://qt-project.org/doc/qt-5/qtoolbutton.html\r\n- SWT (a Java GUI library): http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratesButtons.htm\r\n\r\nProposed implementation inside `buttons.less`:\r\n\r\n``` CSS\r\n.btn-flat {\r\n  .button-variant(@btn-default-color; @btn-default-bg; transparent);\r\n}\r\n```\r\n"},{"labels":[null,"enhancement"],"text":"By default, link is blue and so is .bg-primary.....so when the two are together, the link  blends into the background and cannot be seen.  Should links turn white when inside .bg-primary?\n"},{"labels":["enhancement",null],"text":"I've noticed this repo is not getting published to npm.  Any chance it will?\n\nUnderstandably, bootstrap is mostly client side stuff, but I am creating extensible theme modules that may depend on bootstrap and npm handles grabbing nested dependencies.\n"},{"labels":[null,"enhancement"],"text":"It would be nice to be able to add a danger class to the `<li>` items in the nav bar to highlight important items within the nav bar. Something like [this](http://smarchal.com/twbscolor/?bd=f2dede&bh=ebccd1&cd=a94442&ch=843534), but for individual list elements.\n\nProposal markup:\n\n``` html\n<nav class=\"navbar navbar-default\" role=\"navigation\">\n            <!-- Brand and toggle get grouped for better mobile display -->\n            <div class=\"navbar-header\">\n                <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\">\n                    <span class=\"sr-only\">Toggle navigation</span>\n                    <span class=\"icon-bar\"></span>\n                    <span class=\"icon-bar\"></span>\n                    <span class=\"icon-bar\"></span>\n                </button>\n                <a class=\"navbar-brand\" href=\"javascript:void(0)\">Brand</a>\n            </div>\n\n            <!-- Collect the nav links, forms, and other content for toggling -->\n            <div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\n                <ul class=\"nav navbar-nav\">\n                    <li class=\"active\"><a href=\"javascript:void(0)\">Link</a></li>\n                    <li><a href=\"javascript:void(0)\">Link</a></li>\n                    <li class=\"dropdown\">\n                        <a href=\"javascript:void(0)\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Dropdown <b class=\"caret\"></b></a>\n                        <ul class=\"dropdown-menu\">\n                            <li><a href=\"javascript:void(0)\">Action</a></li>\n                            <li><a href=\"javascript:void(0)\">Another action</a></li>\n                            <li><a href=\"javascript:void(0)\">Something else here</a></li>\n                            <li class=\"divider\"></li>\n                            <li><a href=\"javascript:void(0)\">Separated link</a></li>\n                        </ul>\n                    </li>\n                </ul>\n                <form class=\"navbar-form navbar-left\" role=\"search\">\n                    <div class=\"form-group\">\n                        <input type=\"text\" class=\"form-control\" placeholder=\"Search\">\n                    </div>\n                    <button type=\"submit\" class=\"btn btn-default\">Submit</button>\n                </form>\n                <ul class=\"nav navbar-nav navbar-right\">\n                    <li><a href=\"javascript:void(0)\">Link</a></li>\n                    <li class=\"dropdown\">\n                        <a href=\"javascript:void(0)\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Dropdown <b class=\"caret\"></b></a>\n                        <ul class=\"dropdown-menu\">\n                            <li><a href=\"javascript:void(0)\">Action</a></li>\n                            <li><a href=\"javascript:void(0)\">Another action</a></li>\n                            <li><a href=\"javascript:void(0)\">Something else here</a></li>\n                            <li class=\"divider\"></li>\n                            <li class=\"navbar-item-danger\"><a href=\"javascript:void(0)\">Separated link</a></li>\n                        </ul>\n                    </li>\n                </ul>\n            </div><!-- /.navbar-collapse -->\n        </nav>\n```\n"},{"labels":["enhancement",null],"text":"i'd like to propose a small change -- removing the required 'active' from the .tab-content.tab-pane\n\n```\n    <!-- Nav tabs -->\n    <ul class=\"nav nav-tabs\">\n      <li class=\"active\"><a href=\"#home\" data-toggle=\"tab\">Home</a></li>\n      <li><a href=\"#profile\" data-toggle=\"tab\">Profile</a></li>\n      <li><a href=\"#messages\" data-toggle=\"tab\">Messages</a></li>\n      <li><a href=\"#settings\" data-toggle=\"tab\">Settings</a></li>\n    </ul>\n\n    <!-- Tab panes -->\n    <div class=\"tab-content\">\n-     <div class=\"tab-pane active\" id=\"home\">...</div>\n+     <div class=\"tab-pane\" id=\"home\">...</div>\n      <div class=\"tab-pane\" id=\"profile\">...</div>\n      <div class=\"tab-pane\" id=\"messages\">...</div>\n      <div class=\"tab-pane\" id=\"settings\">...</div>\n    </div>\n```\n\nsince javascript is already required for the plugin to work, and it has already run to set event listeners, if an active tab is not set, the plugin could just set the \"active\" status for the tab-pane to the corresponding .nav-tabs active element\n"},{"labels":[null,"enhancement"],"text":"hello\nis there any way to make the bootstrap rtl support for arabic and persian support?\nis it possible to implement the base rtl support to the new versions of bootstrap?\nthank you\n"},{"labels":[null,"enhancement",null],"text":"It would be nice to have a kind of documentation page example using BS components for easy deployment. :)\n"},{"labels":[null,"enhancement",null],"text":"@mdo :\nWith the new GMaps now active, there should be an example that utilizes many features of the new API and how they interact with BS v3.2.0. This should also include examples on modals and other generated components of the framework.\n"},{"labels":[null,"enhancement"],"text":"Hi everybody. I use so much bootstrap that I have few problems at few moments.\n\nIn this moment, I work on a dashboard for my client. I use all of my screen because I have many informations to show. So, I use col-xs, col-sm, col-md and col-lg for a responsive design. It's awesome except that my dashboard own few items which are too fat when my screen is superior at 1500/1600px.\n\nI would can develop a new custom col-xlg class for my app but I don't know if other people have this problem.\n\nIn the future, our displays will be most large and I ask me if that it's necessary to develope a feature like this.\n\nThanks for your response.\n"},{"labels":["enhancement",null],"text":"If you toggle a pop-over from an element, and resize the browser window, the popover is no longer at the side of the element you requested. Is this the desired/ expected default behaviour?\n"},{"labels":["enhancement",null],"text":"It would be great from a ux-standpoint to restrict cycling through input elements on a modal (instead of all inputs in the dom) when pressing `tab` and `shift+tab`. \n\nWhat do you think? \n"},{"labels":[null,"enhancement"],"text":"I tried using this method : https://groups.google.com/forum/#!topic/twitter-bootstrap-stackoverflow/O4H28d1-d7Q\n\nbut it doesnt work well with bootstrap 3.\n\nCan anyone help me out with this?\n\nThanks.\n"},{"labels":[null,"enhancement"],"text":"[We](http://nibr.com) use a customized version of Bootstrap internally---we tweak the style to match corporate schemes and add some internally useful JavaScript utilities.. We also customize the documentation to match our changes and publish this on our intranet.\n\nHowever, this is an incredibly time-consuming and manual process, since the documentation format has changed an awful lot in the past few versions. There's a lot of find-replace on version number and product name, and we remove all the items pertaining to LESS customization.\n\nTherefore, I propose more standardized documentation that reuses values as much as possible so it's not an all-day task to update the documentation when Bootstrap is updated. \n\nLinked to [#12498](https://github.com/twbs/bootstrap/issues/12498).\n"},{"labels":[null,"enhancement"],"text":"Sometimes you need to create equal height content (e.g. for panels) on a page - similar to Foundation equalizer http://foundation.zurb.com/docs/components/equalizer.html\n"},{"labels":["enhancement",null],"text":"It would be nice to have a guided tour feature in BS - something to match Foundation Joyride http://foundation.zurb.com/docs/components/joyride.html or http://bootstraptour.com/\n"},{"labels":[null,"enhancement"],"text":"Please consider adding a class named table-fixedheader that can be applied to a table so that the body scrolls under fixed headers.\n\nSee this JSFiddle for a working demo:  http://jsfiddle.net/drueter/yqgB5/3/\n\nAll that is needed:\n\n``` css\ntable.table-fixedheader>tbody {\n    display: block;\n}\n\ntable.table-fixedheader>tbody {\n    overflow-y: auto;\n    height: 50px; /*placeholder:  override as needed*/\n}\n\ntable.table-fixedheader>thead>tr>th, table.table-fixedheader>tbody>tr>td {\n    float: left;\n    width: 100px; /*placeholder:  override as needed*/\n}\n```\n\nSee comments in JSFiddle for usage notes.  This seems to work well.\n"},{"labels":[null,"enhancement"],"text":"When you scale down the width of an interface to mobile size, with e.g. columns, it's easy to make them adapt to the new size. With a btn-group, this doesn't seem too easy. To me, the most obvious enhancement would be for a btn-group to have a class that indicates at what screen size it should switch to vertical. \n"},{"labels":[null,"enhancement",null],"text":"Hey there,\nI have tried a lot to get a dynamic grid to position the tiles, like pinterest has without external js-libraries like \"Masonry\". But it seems, that this isn't possible just with bootstrap and custom css.\n\nIs there a way I haven't seen? Or is it planned in future releases?\n\nPS: I'm using bootstrap 3\n"},{"labels":["enhancement",null],"text":"Hey!\n\nI've been trying to get multiple carousels to work in tandem with each other, using one set of controls. This works fine for the `.carousel-control` components, but not the `.carousel-indicators`. See this [JS Fiddle](http://jsfiddle.net/F4EVf/) for an example. The idea is obvious: click a carousel indicator, and both carousels slide simultaneously.\n\nReferring to issue [#11190](https://github.com/twbs/bootstrap/issues/11190), using both a shared class or ID doesn't achieve this. The event only fires on one of the carousels. I hope this can be addressed in future. \n"},{"labels":["enhancement",null],"text":"Hi there,\n\nplease create a _branch_ stable.\n\n**Why? Well that's simple.** \n\nWith that branch bootstrap can be used as submodule in other git repositories. Currently, Git 1.8.5.4 support only branch tracking, not tag tracking (according to man git-submodule).\n\n```\n~$ man git-submodule | grep -c tag\n0\n```\n\nProviding a stable branch you'll help to keep bootstrap at the most recent version in external repositories. Some other projects like jquery, leaflet or less are providing a \"Major-Minor-Stable\" (ok, kind of) branch. Please provide them also ;-)\n"},{"labels":["enhancement",null],"text":"(This is not a bug report, but a feature request)\n\nCurrently bs3 provides options for setting the title and the content of the popovers, together with an html boolean to determine if the content and title should be escaped as text, or inserted as html.\n\nI propose to allow html to be a domnode or a string. If that is the case, the content and title options are ignored, and the domnode or string are used to populate the interior of the popover.\n\nI think this feature would be immensely useful and simplify a lot of use-cases, since a lot of people out there have worked out all sorts of hacks to customize the contents of popovers (for instance, things like placing a close button on the title of the popover has been subject to numerous stack overflow questions and blog posts).\n\nPS: I can create a pull-request implementing this feature, but I don't want to waste the time if this won't be included in bootstrap.\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nLove the framework. Using it for my company's developer website.\n\nThe Bootstrap documentation has this nice element for creating callouts, e.g. \"Alternate elements\" in the <a href=\"http://getbootstrap.com/css/#type-emphasis\">Italics section of the CSS page</a>.\n\nIt doesn't look like this is part of the framework. It's a very useful feature and I would love to see it officially incorporated and expanded upon. \n"},{"labels":[null,"enhancement"],"text":"How to change bootstrap 3.1 to support Arabic language \n"},{"labels":[null,"enhancement"],"text":"This will add support for form-controls to be inline and grouped together. I propose we make it official. It may need further adjustments. \n\n```\n.input-group-field {\n    display: table-cell;\n    vertical-align: middle;\n    border-radius:4px;\n    min-width:1%;\n    white-space: nowrap;\n}\n.input-group-field .form-control {\n    border-radius: inherit !important;\n}\n.input-group-field:not(:first-child):not(:last-child) {\n    border-radius:0;\n}\n.input-group-field:not(:first-child):not(:last-child) .form-control {\n    border-left-width: 0;\n    border-right-width: 0;\n}\n.input-group-field:last-child {\n    border-top-left-radius:0;\n    border-bottom-left-radius:0;\n}\n```\n\nExample HTML:\n\n```\n    <div class='input-group'>\n        <span class='input-group-addon'>Add On</span>\n        <input type='text' class='form-control' placeholder=\"Field 1\" />\n        <div class='input-group-field'>\n            <input type='text' class='form-control' placeholder=\"Field 2\" />\n        </div>\n        <div class='input-group-field'>\n            <input type='text' class='form-control' placeholder=\"Field 3\" />\n        </div>\n    </div>\n```\n\nPreviews: http://jsfiddle.net/523Vc/, http://jsfiddle.net/523Vc/1/\n"},{"labels":[null,"enhancement",null],"text":"Let's add this feature to modal dialog component that will be controlled by option called \"draggable\".\n"},{"labels":["enhancement",null],"text":"Does this happen anywhere as would be really useful if for example '.tablet' was added to the body if you were on a tablet.\n"},{"labels":[null,"enhancement"],"text":"How to make embedded videos responsive in bootstrap?\n"},{"labels":["enhancement",null],"text":"When you click a button of a toggle-able button group (using: data-toggle=\"buttons\"), the radio button's parent label gets the 'active' class.\n\nBut when you load a form that has a checked radio button, the respective label does NOT get that 'active' class. The button thus appears to be unclicked although its hidden radio button is checked.\n\n```\n<div class=\"btn-group\" data-toggle=\"buttons\">\n  <label class=\"btn btn-primary active\"> <=== This class is not added onload\n    <input type=\"radio\" name=\"options\" id=\"option1\" checked=\"checked\"> Option 1\n```\n"},{"labels":[null,"enhancement"],"text":"Hi many times people need to use Twitter Bootstrap on only part of a web page or to otherwise have a prefix class to reduce the scope of the Bootstrap CSS.  This can be accomplished in LESS , see http://stackoverflow.com/questions/11831346/applying-css-styles-only-to-certain-elements\n\n<pre>.bootstrap-container {\n    @import \"/path-to-bootstrap-less.less\"\n    @import \"/path-to-bootstrap-responsive-less.less\"\n}\n</pre>\n\n\nIt would be great if there was an option on the bootstrap customization page to add an optional prefix to all css elements.  Thanks!  \n"},{"labels":[null,"enhancement"],"text":"I thought I would post this here and get some thoughts on it. I think it's pretty cool.\n\nThe modal body takes up whatever space that the header and footer don't and it still allows the content to grow vertically, letting document body scroll as needed.\n\nIt doesn't position anything absolute or fixed or rely on any kind of fixed height headers or footers.\n\n![](https://db.tt/hp2jZIOa)\n#### Usage\n- Add the `modal-screen` class to your `.modal-dialog' div\n- Add the following LESS\n\n```\n// Full Screen Modals\n.modal-screen {\n  width: 96%;\n  height: 96%;\n  min-height: 96%;\n  margin-top: 0;\n\n  .modal-content {\n    display: table;\n    width: 100%;\n    height: 100%;\n    border-top: 0;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n\n    .modal-body {\n      display: table-row;\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n```\n\n**_Note**_\n- Havn't thoroughly tested how well this works cross-browser.\n- Because `.modal-body` is displayed as a table-row, there's no padding and the only way to fix it would be to add the padding to a container within, which I don't think is that big of a deal considering how cool this is. \n"},{"labels":["enhancement",null],"text":"I'm really missing the possibility to load popover content like it is possible for modals. I hope somebody can add this feature. That would be really great!\n"},{"labels":[null,"enhancement",null],"text":"`build-raw-files` should return console log, as it makes new file.\n\nExample:\n\n```\nRunning \"build-raw-files\" task\nFile docs/assets/js/raw-files.min.js created.\n```\n\nI can write code to fix this issue if you agree.\n\n/cc @cvrebert\n"},{"labels":[null,"enhancement",null],"text":"It would be nice to have a busy indicator component. Almost every site I build today uses ajax in some way, usually to handle form submissions so I have a constant need for these indicators.\n\n![](https://raw.github.com/adobe/brackets/master/src/styles/images/spinner_large_sprites36.png)\n"},{"labels":[null,"enhancement"],"text":"Since 3.1, I guess, bootstrap has a rule \n.collapse.in {\n  display: block;\n}\n\nThis rule conflicts with `<tr>` elements which require \"display: table-row\". And maybe others as well.\n\nI haven't searched the sources where this rule is defined. Just using the download bootstrap-3.1.0-dist.zip and there it is defined in bootstrap.css line 2357.\n"},{"labels":[null,"enhancement"],"text":"I think this is the time to add internal RTL support. there are some derivations but internal is something else.\nThanks\n"},{"labels":[null,null,"enhancement"],"text":"As it says. Any hint is appreciated. Thanks!\n"},{"labels":["enhancement",null,null],"text":"Focus doesn't seem to happen when using the HTML5 autofocus attribute on a text input when the text input is inside a modal\n\n``` HTML\n<input type=\"text\" class=\"class\" name=\"name\" value=\"\" autofocus>\n```\n\nTested in Chrome 32.0.1700.76 m using Bootstrap v3.1\n"},{"labels":[null,"enhancement"],"text":"anchor element with classes: glyphicon glyphicon-print btn btn-success\n\nbutton's height is not same as\n\nanchor element with classes: btn btn-success\n\nso when you have several buttons in-line they are different and this looks like a bug\n\nexample code:\n\n```\n<a href=\"test/print/1\" class=\"glyphicon glyphicon-print btn btn-success\"></a>\n<a href=\"test/edit/1\" class=\"btn btn-primary\">Edit</a>\n<a href=\"test/delete/1\" class=\"btn btn-danger\">Delete</a>\n```\n\nhere's my fix:\n\n```\n.glyphicon.btn {\n    top: 0px;\n    line-height: 1.428571429;\n}\n```\n\nof course there should be fixes for different btn sizes like btn-xs etc.\n"},{"labels":[null,"enhancement"],"text":"Provide a new dashboard design, that along with the current one will make it easier to create admin pages, for different types of projects.\n"},{"labels":[null,null,"enhancement"],"text":"These are kinda annoying to manually keep in-sync as docs sections are moved/renamed/added/deleted/etc.\n"},{"labels":[null,"enhancement"],"text":"I noticed that when i set a form-group with .has-error, or any other validation state classes (.has-warning or .has-success), the placeholder's color will stay at #999999. So i came up with a interesting idea. What if the placeholder's color adapt to it's validation context? I came up with the below code for .has-error placeholders. If the form-group gets a .has-error class, all the placeholders of every control with .form-control will have it's color's set up to a lessy opaque color of the original .has-error text color, which is #b94a48. In this case, i came up with #a16363.\n\n``` css\n.has-error .form-control::-webkit-input-placeholder {\n    color: #a16363;\n}\n.has-error .form-control:-moz-placeholder {\n    color: #a16363;\n}\n.has-error .form-control::-moz-placeholder {\n    color: #a16363;\n}\n.has-error .form-control:-ms-input-placeholder {\n    color: #a16363;\n}\n.has-error .form-control::-webkit-input-placeholder, .has-error .form-control::-webkit-input-placeholder {\n    color: #a16363;\n}\n.has-error .form-control:-moz-placeholder, .has-error .form-control:-moz-placeholder {\n    color: #a16363;\n}\n```\n\nThis is a image **without** the custom CSS:\n![has-error vannilla placeholder](https://f.cloud.github.com/assets/4291391/2053352/8ed242d2-8aa6-11e3-87cc-47550ed641ed.png)\n\nThis is a image **with** the CSS i made:\n![has-error contextualized placeholder](https://f.cloud.github.com/assets/4291391/2053350/81adfe3e-8aa6-11e3-884b-cb66ed3ba3b5.png)\n"},{"labels":[null,null,"enhancement"],"text":"Instead of maintaining mixins for things like box-shadow and transition - we should just implement as part of our build process via this grunt task for  [autoprefixer](https://github.com/ai/autoprefixer). It runs off of the info from http://caniuse.com which makes it much easier to maintain proper vendor prefixes. Less mixins seems worth the price of admission alone.\n"},{"labels":[null,"enhancement"],"text":"If you want to hide something when the screen width crosses the sm size, you have to add `hidden-xs hidden-sm` as classes. It would be useful if Bootstrap contained classes that hide the size, and everything below or above that. Like `hidden-smaller-sm` would hide both xs and sm, etc.\n"},{"labels":[null,"enhancement"],"text":"\"mailto:\" links, like \"javascript:\" links, can contain large chunks of data that wouldn't really be useful to someone reading a printed document, e.g.\n\n``` html\n<a href=\"mailto:?subject=Awesome%20page&body=This%20page%20is%20awesome%20so%20I%21m%20sharing%20it%20with%20you\">Share this page in an email</a>\n```\n\nis a perfectly valid mailto link, but not very useful in a printed document. It prints like\n\n> Share this page in an email (mailto:?subject=Awesome%20page&body=This%20page%20is%20awesome%20so%20I%21m%20sharing%20it%20with%20you)\n\nThis is particularly true for script-generated mailto links, which can have multi-line message bodies.\n\nEven in the simple case of\n\n``` html\n<a href=\"mailto:some.address@example.com\">Send me your comments</a>\n```\n\nIt's currently printed as\n\n> Send me your comments (mailto:some.address@example.com)\n\nwhich has a very technical-looking \"mailto:\" at the start which might confuse people who would try to send an email to that address by manually entering it into their email client.\n"},{"labels":[null,"enhancement"],"text":"Is there something in the framework to avoid problem with height 100%. Is it possible to take the remaining height of his parent when this one has also a 100% height.\n"},{"labels":["enhancement",null],"text":"It seems to be impossible to know which version of Bootstrap is used from a third party plugin/library perspective. \n"},{"labels":["enhancement",null],"text":"I'm am not using the standard navigation for tabs which is \"nav-tabs\", instead I use the \"btn-group\" for my links that toggle the different tab pane. \n\nMy question is is there a way to add \"active\" state to the btn-group? To see if what is the current active tab. Thank you.\n"},{"labels":["enhancement",null],"text":"hi,\nsorry for my bad english :(\n\ni want to hide the popover when i click outisde it(there is no \"option\" in the documentation)\n\nwhat i have to do ?\n\nthanks\n"},{"labels":["enhancement",null],"text":"Hi i have some thinking last days. \n\nCan u guys maybe add some file where the whole changelog stands add to the download?\n"},{"labels":["enhancement",null],"text":"I'm just wondering that if `.modal('show')` or `.modal('hide')` takes callback function, then it might be convenient for some cases.\n\nHere is full context of my issue: http://stackoverflow.com/questions/21316834/is-there-any-reason-that-bootstrap-supports-only-event-emitting-rather-than-cal\n\nTo summarize the question above, I'm trying to build something like http://jsfiddle.net/theeluwin/dva6L/1/ to implement situations like http://jsfiddle.net/theeluwin/r7Qa2/6/, http://jsfiddle.net/theeluwin/8Vagr/1/ or http://jsfiddle.net/theeluwin/9uFsp/1/.\n\nThis stuffs can be done by https://github.com/theeluwin/bootstrap/commit/d48ca2b9ab787fec695b6b44b362844c3438df4e, and I do know that this is just tricky compromise, but at least `grunt test` gave no errors.\n\nI'm submitting this as an issue rather than pull request because I'm not very sure about my works.\n"},{"labels":[null,"enhancement",null],"text":"Currently, in order for the login credentials to stay secure, the Sauce and BrowserStack tests only run on branches in the `twbs/bootstrap` repo, and not on folks' PRs. On folks' JavaScript PRs, these Travis tests are skipped, which means we don't find out about failing JS tests until after we merge the PR and break the build. The current workaround is to checkout such PRs, push them to a temporary branch of the main repo, and observe the results of the resulting Travis build _before_ merging them.\nThis extra manual step is annoying and prone to being accidentally forgotten, because humans.\n\nMy proposed solution:\n- create a dummy repo, e.g. `twbs/bootstrap-js-sandbox`\n- setup a service that listens for new PRs using GitHub's hooks\n- if the PR changes the JS, and after verifying (for security) that the Gruntfile and Travis config are intact, the service will push the PR to a branch of `twbs/bootstrap-js-sandbox`\n- the service will observe the Sauce and BrowserStack results of the Travis build, and update the PR's build status accordingly using GitHub's API\n"},{"labels":["enhancement",null],"text":"As @cvrebert  mentioned in #12320, the tooltip/popover `show` + `shown` events don't include a back-reference to the `.relatedTarget`.  This argument is passed to the analogous modal events; should probably be added here.\n"},{"labels":["enhancement",null],"text":"Consider the task of determining which element triggered the visible popover(s).  \nRather than keeping a local cache of clicked-triggers or querying the entire DOM for an element whose data attributes point to a popover that also happens to be open, \ncould something like the following suffice:\n\n``` javascript\n\n$('div.popover.fade.right.in').data('bs.popover.trigger');\n```\n\nNote: the reverse is already true:\n\n``` javascript\n$('a.btn.btn-lg.btn-danger').data('bs.popover')\n```\n\nsupplies the popover instance\n\nAlso note: the trigger is not alway the 'previous' element, as coded here: https://github.com/twbs/bootstrap/blob/master/js/tooltip.js#L153\n"},{"labels":[null,"enhancement"],"text":"As of `3.0.0` you had the ability (albeit undocumented) to use nested containers, as such;\n\n```\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-md-12 col-lg-10 col-lg-offset-1\">\n            <div class=\"container\">\n                <!-- centered elements here -->\n            </div>\n        </div>\n    </div>\n</div>\n```\n\nHowever as of `3.0.3` this functionality no longer works and the documention states that nested containers are not supported due to hard coded width's on container media query.\n\nI was able to get this working by creating CSS for `.container-nested`, which duplicates everything from `.container`, apart from the media queries;\n\n```\n.container-nested {\n  padding-right: 15px;\n  padding-left: 15px;\n  margin-right: auto;\n  margin-left: auto;\n}\n\n.container-nested:before,\n.container-nested:after {\n  display: table;\n  content: \" \";\n}\n\n.container-nested:after {\n  clear: both;\n}\n\n.container-nested:before,\n.container-nested:after {\n  display: table;\n  content: \" \";\n}\n\n.container-nested:after {\n  clear: both;\n}\n```\n\nI've tested this in IE11/Chrome, and it seems to work fine.\n\nCould a core dev please confirm if such functionality would be considered for merge? If so then I'd be happy to submit a PR to add this functionality.\n"},{"labels":[null,"enhancement",null],"text":"https://npmjs.org/doc/shrinkwrap.html\n"},{"labels":[null,"enhancement"],"text":"It would be nice to have .table-extra-condensed with padding:2px for very compact tables.\n\nIn conjunction with https://github.com/twbs/bootstrap/issues/10987 it could be later named as .table-xs.\n"},{"labels":[null,"enhancement"],"text":"Is it possible to include this:\n\ntransition: all 0.2s ease;\n\nto all of the links in the distribution in order to have a smoother hover?\n"},{"labels":[null,"enhancement"],"text":"For example navbar in Google+\n"},{"labels":[null,"enhancement"],"text":"I'm using the Bootstrap v3.0.3.\n\n``` html\n   <div class=\"form-group\">\n      <label class=\"sr-only\" for=\"searchZipcode\">Zipcode</label>\n      <input type=\"text\" class=\"form-control input-lg input-search\" id=\"searchZipcode\" placeholder=\"Zipcode of home?\">\n   </div>\n```\n\nMy expectation is that when the viewport shrinks that the input form field would take on the default settings, but that is not the case. The only way I have been able to solve this issue is by writing my own media query, but I dont know the default input form field settings. Is there a better way to handle? Does Bootstrap handle this scenario?\n"},{"labels":[null,"enhancement"],"text":"I want to be able to have the \"Brand\", one or two other menu items, then the collapse button AFTER everything as been collapsed. Everything I've tried moves my additional items to a new row.\n"},{"labels":["enhancement",null],"text":"Hi, \n\nI don't know if it has already been discussed (I suppose it has but cannot find the related issue): is there any plan to add some new placements for popovers like bottom-left, top-right, etc?\nI have implemented it on my side in tooltip.js / tooltip.less, it is not so intrusive (i.e. it does not break the existing placement option), only the 'auto' option might behave differently. \n"},{"labels":[null,"enhancement"],"text":"@mdo:\n\nApologies for not commenting sooner, but I have been off the grid in Colombia for the past two weeks.\n\nThe JSbin screenshot you posted in #11990 shows exactly the problem that I'm talking about: Despite being contained in a column, the widths of the two controls are not related. That is, the width of the slider is not constrained to the column width in the way that the width of the text box is. This becomes apparent when you resize the browser window: the text box resizes itself appropriately; the range slider does not.\n"},{"labels":[null,"enhancement"],"text":"Is there a chance you could make .control-label mixin friendly?\n"},{"labels":["enhancement",null],"text":"Add sorters to table like .. along with respective js\n![image](https://f.cloud.github.com/assets/3809354/1852560/612e6b52-76fc-11e3-887c-4bf51380495f.png)\n"},{"labels":[null,"enhancement"],"text":"Ummm ....... it would be good if you add a collapse menu option that makes the menu slim. And addition of relevant icons to the sidebar would be good too to the dashboard example.\n"},{"labels":["enhancement",null],"text":"is there a way to provide a bower package without js plugin and jquery dependency?\n"},{"labels":[null,"enhancement"],"text":"If you try to build a form-horizontal with form-controls that are input-sm, labels are always baseline aligned to normal controls.\nI would see usefull a class to fit labels to the input-sm control (and viceversa for large).\n\nThank you.\n"},{"labels":[null,"enhancement"],"text":"I don't know if it is possible to automate it, but it would be nice to able to add new breakpoints and just have LESS automatically generate all the necessary grid & visible/hidden classes.\n"},{"labels":[null,"enhancement"],"text":"@mdo 2 suggestions for the next version:\n- A simple image gallery (featuring many of BS components)\n- A full page background images scroll website, where all \"pages\" are inside one page with different backgrounds. It's becomming quite popular these days.\n"},{"labels":["enhancement",null],"text":"Hi,\n   I was working on my new project and while testing I realized (sort of felt like moving carousel slides using keyboard arrow keys), and it didn't worked then I digg the source code and found no implementation for keyboard movement of carousel slides.\n\nSo I googled and found this \n\nhttps://github.com/twbs/bootstrap/issues/3731\n\nwhich confused me, is keyboard support for carousel in progress? or already had been done (and I don't know how to use it)?\n\nAlso I was considering have multiple carousels on page, and surely carousel should be able to understand the active / focus and then move the active carousel slides if keyboard arrow keys are used of navigation / movement.\n\nPlease let me know ?\n"},{"labels":[null,"enhancement",null],"text":"I've been looking for a way to change the animation for a specific modal. I'd like it to slide in from the left edge to create a sort of modal sidebar. \n\nReading through the less is rather complex so I'd appreciate any advice. \n\nIt looks like I want to create a replacement for `.fade` and its related classes, then use that instead of the standard fade. However there seems to be a class (`.in`?) that is inserted by javascript and several assumptions about things being relative to the top.\n\nHas any thought been put into a general animation definition for modals? Any thoughts on where to start? I'd like to stay away from modifying bootstrap, of course.\n"},{"labels":["enhancement"],"text":"I use http://getbootstrap.com/customize/ to make small customizations to Bootstrap – setting @brand-primary, @font-family-sans-serif, that sort of thing. But when I download the customized .css, bootstrap-theme.css isn't included. Can this be changed? Can the Customize page produce a customized bootstrap-theme.css?\n\nBTW, I have a workaround (download the source, tweak variables.less, recompile). But it'd be nice to be able to use the Customize page instead.\n"},{"labels":["enhancement",null],"text":"[**Edit**: See https://github.com/cvrebert/lmvtfy !]\n"},{"labels":[null,"enhancement"],"text":"Hi!\n\nI don't know can I here ask questions and seek help. But I would venture : )\nExplain to me how should looks like tabs in mobile view?\n\n**Code**\n\n``` html\n<div id=\"tabs\">\n    <ul class=\"nav nav-tabs\">\n        <li class=\"active first\"><a href=\"#\">Inbox</a></li>\n        <li><a href=\"#\">Sent Mail</a></li>\n        <li><a href=\"#\">Drafts</a></li>\n        <li><a href=\"#\">All Messages</a></li>\n    </ul>\n</div>\n```\n\n**Screenshot**\n![2013-12-20_363x213_scrot](https://f.cloud.github.com/assets/1256298/1790882/ac350944-6982-11e3-92e4-4cfa769495ca.png)\n\nIs possible somehow make them more mobile, or at least fix this terrible view?\n\nP.S. Active tab have custom style\n"},{"labels":[null,"enhancement"],"text":"I was thinking that a list of links, no screen shot, can be provided in the examples section titled \"User Submitted Examples\". This could be a place to direct users to when they need to do something different with Bootstrap.\n\nI am beginning a collection of various, common and uncommon examples such as an image logo, centered navigation, and more.\n\nThis is a centered min-width navigation, with the logo centered visually below the navigation. It has page anchors that are not covered up and the collapse menu closes when an anchor is clicked. It also uses an icon for the button which toggles a class to indicate open or closed.\n"},{"labels":[null,"enhancement"],"text":"How about implement http://foundation.zurb.com/docs/components/block_grid.html? This would reduce the amount of html code, by eliminating the grid within the component.\n"},{"labels":[null,"enhancement"],"text":"I am putting together a portfolio page and need to have the thumbnails butt up against one another. Currently, there's default margins between each one. I want it to look like the following:\n![thumbs-help](https://f.cloud.github.com/assets/6128684/1761454/30799f78-66cf-11e3-925f-8f6538839511.jpg)\n\nDo I have to make a new class making padding and margin = 0 and wrap them in it?\n"},{"labels":[null,"enhancement"],"text":"Some times I like to provide a different gutter width at different sizes. Some example code.\n\n```\n.myElement {\n  .make-xs-column(4, 0);\n  .make-sm-column(4, 10px);\n}\n```\n\n^ This does not work. It always takes the last applied gutter width, 10px in this example. Clearly it's because inside the mixin, the media query only includes `float` and `width`. I can't see a reason this would be? It seems like everything in the .make-**-column would be totally breakpoint dependent.\n"},{"labels":[null,"enhancement"],"text":"Right now, it's only possible to use more then 1 button in a input group. However, I think it would be useful if we could also put 2 input fields in 1 input-group (together with a button). This is handy in situations where 2 input fileds work together and correspond with the same button.\n"},{"labels":[null,"enhancement",null],"text":""},{"labels":[null,"enhancement"],"text":"Sometimes you need button(s) in the panel heading aligned to right, e.g. to hide panel, to collapse/expand, to open configuration etc.\n\nIt would be nice to have a button / button group to be supported in the panel heading. Some workarounds could be found here http://stackoverflow.com/questions/18963881/bootstrap-3-panel-header-with-buttons-wrong-position but require some padding tuning.\n"},{"labels":[null,"enhancement"],"text":"When I try to linearize my bootstrap website the navigation shows up first. For SEO it's better to have the content above the navigation. Anyway to fix this without messing up all the great features of bootstrap?\n"},{"labels":["enhancement",null],"text":"Hi,\n\nI need that the url is changed, when clicking a tab.\n\nSo when there are three tabs:\n\n```\n<div class=\"tab-content\">\n  <div class=\"tab-pane fade in active\" id=\"home\">...</div>\n  <div class=\"tab-pane fade\" id=\"profile\">...</div>\n  <div class=\"tab-pane fade\" id=\"messages\">...</div>\n  <div class=\"tab-pane fade\" id=\"settings\">...</div>\n</div>\n```\n\nand you are clicking on \"profile\" the url should change from site.com to site.com/#profile\n\nIs that already possible and I did not see that in documentation?\n\nThank you\nZoker\n"},{"labels":[null,"enhancement"],"text":"Inspired by a comment from @mdo in #11731 \n\n> This general idea is what I wanted to do for contextual states—the icons—since I redid all this stuff. Will try to work it into v3.1.\n\nI would suggest a context-depending-show-class. something like this:\n\n```\n.show-on-default,\n.show-on-success,\n.show-on-danger {\n  display: none;\n}\n\n.default .show-on-default {\n  display: block;\n}\n\n.success .show-on-success {\n  display: block;\n}\n\n.danger .show-on-danger {\n  display: block;\n}\n```\n\nI have made an example: http://jsbin.com/efExUnO/1/edit?html,css,output\n\nIt would get big benefits of simple modifier classes, how I described it here: #11794\n\nMay be it is necessary to restrict the affected level by adding some child and sibling selectors:\n\n```\n.danger > .show-on-danger,\n.danger > * > .show-on-danger, \n.danger ~ .show-on-danger,\n.danger ~ * > .show-on-danger {\n  display: block;\n}\n```\n\nor restrict it to `.input-group`:\n\n```\n.input-group.danger .show-on-danger {\n  display: block;\n}\n```\n\nThere are so many ways, but which is the best?\n"},{"labels":[null,"enhancement"],"text":"I see that `.col-xs-push`, `.col-xs-pull`, and `.col-xs-offset` were added in 3.0.2 but the equivalent mixins were not added. For those of us using a purely semantic grid, this muddies up our markup with these classes.\n"},{"labels":[null,"enhancement"],"text":"I would like my Bootstrap nav (the left justified one) to collapse when the screen size is small.\n\nI am using a full collapse of entire nav on x-small screen. Is there a way to manipulate for what I want to do on small screen size?\nThanks\n"},{"labels":[null,"enhancement"],"text":"There are a lot of examples displaying how the component/feature is rendered. Some examples have the code template or the exact code displaying how to achieve it. It would be very useful to have a code snippet available to every example showing how the example is done - very similar to how it is done in iQueryMobyle, e.g. http://view.jquerymobile.com/1.3.2/dist/demos/widgets/accordions/\n"},{"labels":["enhancement",null],"text":"Popover hides when it is hovered. If there is a link in the popover content then before clicking it, the popover hides. Please add some extra JS.\n"},{"labels":[null,"enhancement"],"text":"This is the same issue as #9209, which addressed `.visible-sx`, `.hidden-lg`, etc. Unfortunately, print classes `.visible-print` and `.hidden-print` were kept defined the old way. The same trick (putting the media queries from outside of the definitions to inside) would fix this.\n"},{"labels":["enhancement",null],"text":"I came up with an idea using BS input-groups for a nice UI feature for my web forms. \n\nThe idea is to place a checkmark glyphicon-ok immediately to the right of a form field to indicate success and a glyphicon-remove to indicate failure. I have the whole thing working perfectly using custom jQuery-based JS code that adds and removes the relevant classes as the field validation succeeds or fails. \n\nUnder BS 2.3.x, I had used home-brew colorized glyphicon image files, some custom CSS, and the help-inline class for this purpose, but with help-inline's demise and the switch to font-based glyphicons in BS 3, I switched to using input-groups and adjusted my code accordingly.\n\n~~The problem is a minor aesthetic issue with how input-groups containing a glyphicon are rendered in a browser. Whenever the glyphicons appear in the input-group-addon, the whole input-group-addon shifts downward by a couple of pixels in every browser (Mac and Win, including IE 8-11) other than FF. Frankly, it looks tacky.~~\n\n~~If I use the radical and times HTML entities from a standard webfont instead of a glyphicon, the input-group-addon doesn't shift, but none of the standard web fonts have versions of these entities that look half as good as a glyphicon.~~\n\nAnother issue that I would appreciate help with is for you to create a blank glyphicon (glyphicon-blank) that can be used as a placeholder in a stateless input-group-addon so the input-group-addon won't change sizes as the checkmark or X appear.\n\n I created a stub page to illustrate the problems at:\n\n```\n http://www.lcudev.com/test.php \n```\n\nA working example of a production form using my technique is at:\n\n```\n http://www.lcudev.com/problem-report/index.php\n```\n\nIf the site asks you to authenticate, the username is \"dev\" and the password is \"dev123\". The security exists to keep the search engines from showing development pages alongside the production site in the results for our university. \n\nHere is a screenshot of the stub page:\n\n![safari001](https://f.cloud.github.com/assets/4976640/1687033/edfb2398-5def-11e3-837c-e0715883d511.jpg)\n\nIf you like my idea, I would be happy to discuss your incorporating it into a future release of Bootstrap.\n"},{"labels":[null,"enhancement",null],"text":"Tests take five minutes to run. That's not _bad_, but I feel like it could be better. Any thoughts on how to improve it would be boss.\n"},{"labels":["enhancement",null],"text":"I think it can be good to be able to have events available on affix to be abble to fire 3 events : \n- when _$(\"#myAffix\")_ become \"affixed top\" (`.affix-top`)\n- when _$(\"#myAffix\")_ become \"affixed top\" (`.affix-bottom`)\n- when _$(\"#myAffix\")_ come back \"non affixed\" (`.affix`) \n\nExemple could look like :\n\n```\n$('#myAffix').on('top.bs.affix', function () {\n  // do something…\n})\n\n$('#myAffix').on('bottom.bs.affix', function () {\n  // do something…\n})\n\n$('#myAffix').on('none.bs.affix', function () {\n  // do something…\n})\n```\n\nThat can solve difficulties to adapt DOM in some case of uses\n\nThanks.\n"},{"labels":[null,"enhancement"],"text":"According to http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-blockquote-element, the blockquote attribution in the HTML5 spec should be within a footer. Within that, specific references to bodies of works should be within `cite` elements. However, it also appears `cite` on it's own will suffice (without the `footer`).\n\nThis breaks backward compatibility if we go right into it, so we can't do that. #11408 got us close with the `cite` element, but that leaves out the `footer` element.\n\nWhatever solution we implement should account for all of this, and update the docs accordingly (with examples and links to the above spec).\n"},{"labels":[null,"enhancement",null],"text":"Currently this is duped a few times over: #11243, #11301, and #11382—but the issue is described differently everywhere. This should clear things up and help us figure out what to do to fix it.\n#### Problem\n\nStarting with a narrow viewport, one with the collapsed navbar contents, open the menu, then resize to full-width with all navbar contents visible. Shrinking the viewport back to the narrow size still shows the un-collapsed navbar contents.\n\n(Btw, this is currently visible in the docs.)\n#### Why this happens\n\nWe're using the collapse plugin to do this. Right now it has no idea about the dimensions of your viewport. All it does is toggle the appropriate classes based on clicks—click to open, click to hide.\n\nOur CSS utilizes those changes in classes from the plugin to style the menu accordingly. The CSS has no way to remove the `.in` class that the JS adds.\n#### Fix\n\nWe need the JS plugin to be updated to detect the viewport changes and remove the class. I don't know when or how this could happen, but that's the only solution. Will need to hear from @fat or anyone else with more JS-fu.\n"},{"labels":["enhancement",null],"text":"In Bootstrap 2, button groups could be used to control tab pages. \n\nSee this example: http://bootply.com/97187\n\nThe `active` class is correctly added and removed as required and it works great, even if there are multiple button toolbars.\n\nUnfortunately, this is now broken in Bootstrap 3.\n\nThe same code, does this: http://bootply.com/97189\n\nThe tab pages are correctly selected but the buttons toggle individually, rather than as a group.\n\nCould this behaviour be reinstated please? \n\nOr am I missing something and there's now another way to do this?\n\nI tried the radio buttons example here: http://getbootstrap.com/javascript/#buttons\n\nThis correctly toggles `active` but I cannot get it to set the tab page as these are option buttons without href capability.\n"},{"labels":[null,"enhancement"],"text":"As screens are getting bigger and interfaces are getting cooler, should we provide navbar for the sides ?\n\nSomehow use the .nav for sidebars with navbar-nav.\n"},{"labels":[null,"enhancement"],"text":"It would be great if it was possible to align description lists with the grid system. I have a description list and below a grid and I would like the left and right columns to match.\n\nThe columns currently don't match, because:\n- dt has a fixed width of 160px\n- grid columns have dynamic widths\n- dd has a fixed left padding of 20px\n- grid columns have a padding of 30px by default\n\n```\nSome text\n\n<dt> item 1 | <dd> Description\n<dt> item 2 | <dd> Description\n<dt> item 3 | <dd> Description\n\nHorizontal form, using a 3:9 grid\n\nField 1 label  | Field 1\nField 2 label  | Field 2\nField 3 label  | Field 3\n\n            ^--^\n both the column start and the\n column padding are different\n```\n"},{"labels":[null,"enhancement"],"text":"It would be nice to have text utility that will simply justify the text align.\n\n``` css\n.text-justify {\n  text-align: justify;\n}\n```\n"},{"labels":["enhancement",null],"text":"Having the ability to import LESS stylesheets into the Customize section (ala jQuery mobile ThemeRoller) would be a huge help.\n"},{"labels":[null,"enhancement"],"text":"I'm not a LESS aficionado, and I haven't spent much time in the twbs .less files. But, I'm assuming this is as nontrivial as I fear it is.\n\nStill, I'm going to say it:\n\nThe sites I make with twbs look way better if I zoom my browser out one notch. Every single element, all the text and panels and buttons, shrunk down just a bit. Things fit nicer on the screen and everything looks a little more professional.\n\nI wish there was a single variable I could change from 1.0 to 0.9 and everything would magically scale down 10%, but I'm assuming it would be a pain to link every size variable to a single scale variable? Between widths and heights and paddings and margins and text sizes and line heights and all that.\n\nI'm just putting it out there. Something to chew on.\n\n`<rant>`\nOtherwise, the new 3 is incredible. I was resisting at first, and sticking with 2.3.2 for my rapid prototyping needs. But now working in v2 is a pain compared to how elegant the grid system is for v3. You guys are wizards of the internets.\n`</rant>`\n\n<3\n"},{"labels":[null,"enhancement"],"text":"Hello,\n\nWouldn't it be an idea to add a `.no-jumbo` class to (text) elements in a jumbotron who shouldn't be 'jumbood' (made big, appear as if they have the `.lead` class)?\n\nNow every `<p>`, `<small>` and other text elements are always 'jumbood' in a jumbotron. \nThis isn't bad, but in some cases you would just like to add a `<small>`on the bottom of the jumbotron, with a nice `text-muted` class.\nNow you can't, because it's still way too big and it has a lead style, which shouldn't be applied to a `<small>`, right?\n\nNormally you'd just place it outside the jumbotron, but in my example you'd want the same grey background color, the same padding; just a jumbotron style without the text itself being 'jumbood'.\n\nCouldn't you use a `:not(.no-jumbo)`? It would be clean and, as I see it, a nice little option.\n"},{"labels":[null,"enhancement"],"text":"On Bootstrap2 we have the `.nav-header` class and support for `.divider` class.\nYou should add them to `.nav-stacked` again.\n"},{"labels":["enhancement",null],"text":"This is a very useful thing! and I would like her to be complete.\n"},{"labels":[null,"enhancement"],"text":"By analogy .text-center, .text-right, .text-left\n"},{"labels":[null,"enhancement"],"text":"Hi.\n\nCan you add class to fill background-color with predefined color primary, success, danger, info ...\n~~And the same with text-color~~\nAnd the same with class \"active\" to change background with predefined colors.\n\nThanks.\n"},{"labels":[null,"enhancement"],"text":"for example\n< col class=\"success\" >\nand\n< colgroup  class=\"success\" >\n\nAnd may be able to set the width for the colgroup\nfor example\n< colgroup  class=\"col-xs-10\" >\n"},{"labels":["enhancement",null],"text":"I think it would be useful if all Less and JS files could be split up into single Bower components.\n- Importing would become easier, as all Bower packages describe their dependencies on their own and declare their main-files. Say I want to keep my file size small and I import only the Less files I need. Suddenly I need to use a carousel. Instead of importing `carousel.less` _and_ `carousel.js` in the _right_ order, I would just `$ bower install bootstrap-carousel`. I get _both_ files from the main property in `bower.json` - so I can bundle them automatically with my build script. And I get the right order of dependencies (e.g. if  `carousel.less` depends on `buttons.less` I also get the `bootstrap-buttons` package and my build script can import it before `carousel.less`, because it knows the dependency from `bower.json`).\n- It keeps documentation, tests and examples - maybe even variables - separated. You can even release single components independent from each other. (This was also very helpful for GruntJS, even if this is a JS-only project...)\n- Components can easily be exchanged. You remember when you deprecated Bootstraps typeahead, in favor for Twitters typeahead? The Angular team recently did something similar themselves: They separated their router into its own module, because many people liked to use a 3rd-party router (e.g. `ui-router`) instead. I know Angular is a different project and JS-only, but the problem is the same with typeahead. Now it is easier to use Angular with a different router. The same could be done with Bootstrap: E.g. take all of Bootstraps buttons, but choose a different grid...\n- [Topcoat](http://topcoat.io/) uses this approach [succesfully](https://github.com/topcoat/topcoat/blob/master/package.json). (Even if they use npm for this instead of Bower!) \n"},{"labels":[null,"enhancement"],"text":"It would be great if the gutter width could be configurable independently for the grid definitions in each of the screen sizes. We'd like to use a smaller value for col-xs-\\* but maintain the default value for the larger screens. Would you accept a pull request with the implementation?\n\nThanks!\n"},{"labels":[null,"enhancement"],"text":"At the customizer (http://getbootstrap.com/customize/#variables-tooltips-popovers) it's not possible to set the opacity for the tooltip.\n"},{"labels":["enhancement",null],"text":"Is it possible to add an option to affix in order to proceed with elements in checkPosition which are not visible as well? \n\nSo it would be possible to change elements from not visible to visible when an affix is toggled.\n\nAt the moment these elements are not considered in affix.js:\n\n if (!this.$element.is(':visible')) return\n\nA triggered event would be helpful as well.\n"},{"labels":["enhancement"],"text":"The accordion header links are small and easy to miss on mobile devices.\nIt would be nice if the whole panel-heading area would be clickable …\n\nOn solution could be to make the accordion links full width like so:\n\nIn panels.less:\n\n```\n// Within heading, strip any `h*` tag of it's default margins for spacing.\n.panel-title {\n  margin-top: 0;\n  margin-bottom: 0;\n  font-size: ceil((@font-size-base * 1.125));\n  > a {\n    display: block;\n    width: 100%\n    color: inherit;\n  }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"This used to work in v2 and I am now having trouble with v3.0.2.\n\nWith an inline form, I am trying to get a field label to appear on the same line as the fields.  The documentation uses \"sr-only\" to hide the labels completely so I did not see an example doing this in the documentation.\n\nExample:\nhttp://bootply.com/94990\n\nThe input is getting dropped to the second line due to the 100% width I assume.  I tried using a grid as the documentation suggests to set the length of the form control but this didn't seem to help.  If I put the label in one column and the field in another, the spacing isn't correct the the field does not line up with the label.\n\nAny pointers in the right direction?\n"},{"labels":[null,"enhancement"],"text":"Since Boostrap 3 a checkbox and label shall get a wrapping div:\n\n```\n<div class=\"checkbox\">\n  <label>\n    <input type=\"checkbox\" value=\"\">\n    Option one is this and that&mdash;be sure to include why it's great\n  </label>\n</div>\n\n<div class=\"radio\">\n  <label>\n    <input type=\"radio\" name=\"optionsRadios\" id=\"optionsRadios1\" value=\"option1\" checked>\n    Option one is this and that&mdash;be sure to include why it's great\n  </label>\n</div>\n```\n\n But where is the div for? Why you not mark the label with the class `checkbox`/`radio` like it is propagate for `checkbox-inline`?\n\nIf there is no need for, I would prefer to economize the extra div.\nI think this would be more clear and consistent.\n\n```\n  <label class=\"checkbox\" >\n    <input type=\"checkbox\" value=\"\">\n    Option one is this and that&mdash;be sure to include why it's great\n  </label>\n\n  <label class=\"radio\">\n    <input type=\"radio\" name=\"optionsRadios\" id=\"optionsRadios1\" value=\"option1\" checked>\n    Option one is this and that&mdash;be sure to include why it's great\n  </label>\n```\n"},{"labels":[null,"enhancement"],"text":"https://dl.dropboxusercontent.com/u/37682778/index.html\n"},{"labels":[null,"enhancement"],"text":"If you want to make onepage layout and separate each logical block by full width background color, you will have to use \"row\" directly in body and inside this row will be container. But there is margin-right: -15px that make horizontal scrollbar (Firefox 25.0).\n\n```\n<body>\n    <div class=\"row\" id=\"header\" style=\"background-color: #eee;\">\n      <div class=\"container\">\n        <h1>Company name</h1>\n      </div>\n    </div>\n    <div class=\"row\" id=\"contact\">\n      <div class=\"container\">\n        <h2>Contact form</h2>\n      </div>\n    </div>\n</body>\n```\n\nPlease add following simple fix:\n\n```\nbody > .row {\n    margin-left: 0;\n    margin-right: 0;\n}\n```\n"},{"labels":[null,"enhancement"],"text":"I think there's been a dismissal of this feature request before, but I haven't been able to find a reason. I'd like to know that, at least.\n"},{"labels":[null,"enhancement"],"text":"Guys; \nI think the use of  modals on small form factors is not optimal, as that is shoving-in legacy desktop UI model. Modals could fill the entire screen with content inside of them being scrollable and controls fixed at the bottom of the screen. \n\nThere are quite a few of desktop-web interaction models here that could be further optimized to make BS a true mobile-first ui kit. Things like: Lists, Checkboxes, Radios, optimal drop-downs, tooltips you can dismiss, etc. \n"},{"labels":[null,"enhancement",null],"text":"Via e.g.\n- https://github.com/bfirsh/needle (uses Selenium)\n- https://github.com/facebook/huxley (uses Selenium, image diff-er might need work)\n- http://crossbrowsertesting.com (many browsers, $27/month on yearly plan)\n- ~~https://github.com/Huddle/PhantomCSS (Firefox + Chrome, uses PhantomJS, supposedly supports screen width tests)~~\n- ~~https://github.com/bbc-news/wraith (Firefox + Chrome, uses PhantomJS, supports screen width tests)~~\n- ~~http://browsershots.org (not fully automated, uses Selenium)~~\n- ~~https://npmjs.org/package/grunt-photobox (Chrome, uses PhantomJS, supports screen width testing)~~\n- ~~https://github.com/cburgmer/csscritic (Chrome, uses PhantomJS)~~\n- ~~https://github.com/bslatkin/dpxdt~~\n- ~~https://github.com/garris/BackstopJS~~\n\n~~For storing the images, http://git-annex.branchable.com/special_remotes/ ?~~\n\nFor visual diff inspection, http://huddle.github.io/Resemble.js/ ?\n"},{"labels":[null,"enhancement"],"text":"The title should be pretty self explanatory. I'd be happy to work on a pull request for this.\n"},{"labels":[null,"enhancement"],"text":"When making themes with [`themestrap`](https://github.com/divshot/themestrap), I often end up making new variables for a number of hardcoded things in bootstrap. \nMost often these are the `border-width`s of a lot of elements.\n\nHow are you guys thinking about addings more variables in general, and especially in the `border-width`-case? I would follow up with a Pull Request if you approve.\n\nI think I would go about like this:\n\n``` css\n@border-width-default: 1px;\n@hr-border-width: @border-width-default;\n[…]\n```\n\nInspired by the `@border-radius` declarations, we could also go about it like this:\n\n``` css\n@border-width-default: 1px;\n@border-width-large: 3px;\n@hr-border-witdh: @border-width-default;\n@btn-border-witdh: @border-width-large;\n[…]\n```\n"},{"labels":[null,"enhancement"],"text":"Easiest to explain this with an example. If you have a navbar and you have simple <li> with links inside for your navigation. \n\nSomething like this. \n\n![login](https://f.cloud.github.com/assets/199760/1460867/119ced9a-447d-11e3-9992-71ad02a6c605.png)\n\nNow, on a small monitor/screen width if you wanted to have the \"Login\" and \"Signup\" links with a col-xs-6 class so that they are 50% width each... like this:\n\n![login1](https://f.cloud.github.com/assets/199760/1460872/baab5de0-447d-11e3-8354-5b4ae335faea.png)\n\nThe problem is that the column width will naturally bubble up to larger screens @media min-width >780px... which in some cases is undesirable because you only want to use column widths on small screens in this instance. \n\nA proposed solution would be to have three classes\n\n`.col-sm-auto`, `.col-md-auto`, `.col-lg-auto` which simple set the width to auto, and removes the padding on the column. \n\nThis obviously isn't perfect, because the padding will need overriding in most cases. \n\n```\n.col-sm-auto {\n     width: auto;\n     padding: 0px;     \n}\n```\n"},{"labels":[null,"enhancement"],"text":"Cause `@grid-columns` will be used to define the number of columns in make-grid() and make-grid-columns-float() it will be impossible to compile sub grid with different number of columns. See also: http://stackoverflow.com/a/19724075/1596547\n\nThe extra parameter will make possible to do:\n\n`make-grid(@grid-columns, sm, width,@grid-columns);` and `make-grid(6, sm, width,6);` etc.\n"},{"labels":[null,"enhancement"],"text":"Now col names are defined as `@item: ~\".col-xs-@{index}, .col-sm-@{index}, .col-md-@{index}, .col-lg-@{index}\";`. It is not possible to add, rename or remove columns this way. See also:  http://stackoverflow.com/a/19724075/1596547\n"},{"labels":[null,"enhancement"],"text":"Navbar.less file has the following definition of the .navbar-fixed-... styles:\n\n``` css\n.navbar-fixed-top {\n  top: 0;\n  border-width: 0 0 1px;\n}\n.navbar-fixed-bottom {\n  bottom: 0;\n  margin-bottom: 0; // override .navbar defaults\n  border-width: 1px 0 0;\n}\n```\n\nIt would be better if the border width (1px) was defined via a variable. With the fixed 1px value. to override it, I need to create a duplicate entry for the styles in a CSS file. It would be easier to use a variable, which could be overwritten by a custom LESS file (the preferred approach for style customization).\n"},{"labels":["enhancement",null],"text":"I use a default modal like in a documentation: http://getbootstrap.com/javascript/#modals\nI open a modal for a first time ('Launch demo model' button), scroll down and click 'Close'. Everything is ok.\n![firstlaunch](https://f.cloud.github.com/assets/5813787/1437321/7778b514-416b-11e3-932b-8b9fdccd836a.png)\n\nThen I open it again and it is already scrolled down. Modal has the same position where it was closed.\n![secondlaunch](https://f.cloud.github.com/assets/5813787/1437324/886cce6e-416b-11e3-92cc-6380b937a5c5.png)\n\nIs it a normal behavior? And how could I open the modal for a second time in top scroll position?\n\nP.S. I am sorry if I write it in wrong place, but I did find an answer on my question in the documentation.\n"},{"labels":[null,"enhancement"],"text":"Aiming to be a mobile first framework, Bootstrap transformed the spans to different sizes of cols in Bootstrap 3. And they work well, but I've been thinking it needs perphaps a xxs-col for 480px screen resolutions. Has anyone been interested in adding this to the current version?\n"},{"labels":["enhancement",null],"text":"Hello,\n\nwe like to close a popover on manual mode when pressing the ESC key.\nOf course this feature makes not sense to every kind of application.\nBut I would appreciate this for classical web applications.\nI put this up for discussion.\n\nActually we are using Version 2.3.2.\nSo it would be nice to have this feature in 2.3.2\nBut we could also migrate to Version 3.\n\nThanking you in anticipation.\n\nBest Regards,\n  Georgios Andreadakis\n"},{"labels":[null,"enhancement"],"text":"IMHO, Popover components can be enhanced by adding the ability to specify a CSS class to add to popover container.\n\nIn addition of adding support for custom classes, native support of contextual classes (warning, danger, ...) could be great (popover-\\* classes).\n\nUse case can be a form field which have to show multiple errors/warnings validations and display messages in popover, not below the field.\n"},{"labels":[null,"enhancement"],"text":"Would it be useful to have `.pull-right-sm`, `.pull-right-md`, `.pull-right-lg` classes, so as to responsively control the pull-right behavior?\n\nThat is, once the columns start collapsing at a smaller width have the pull-right no longer apply, such that what was pulled-right in wide-screen is now aligned-left  in narrow-view.\n"},{"labels":[null,"enhancement"],"text":"It would be nice to have `.animation(...)` mixin for animations, like for progress bars.\n"},{"labels":[null,"enhancement"],"text":"It would be great to have a Slide Panel component similar to one of those:\n- http://pupunzi.com/mb.components/mb.extruder/demo/demo.html\n- http://jakiestfu.github.io/Snap.js/demo/apps/default.html\n"},{"labels":[null,"enhancement"],"text":"It would be nice to have default `kbd` styles that really looks like keyboard button, but please not like buttons.\n\n`kbd` is very useful element for documentation, and it's nice for keyboard shortcuts.\n"},{"labels":["enhancement",null],"text":"Hello Guys!\n\nI'm trying to use bootstrap features to build up an accordion.\nI need to add a different style to the class '.panel-heading' based on the panel state, but I figured out that bootstrap only add a '.collapsed' class to the '.panel-heading .panel-title a', so I can't change the background color of the panel-heading, because it remains static when the panels is collapsed or closed.\n\nWould be great if you could add an '.collapsed' to the '.panel-heading' when it's active, so we can style it without needing any additional jQuery work.\n"},{"labels":[null,"enhancement"],"text":"Considering current theme feature of bt3, RTL support can be added externally as a theme. So RTL support for bt3.1 milestone seems redundant. I've already developed RTL theme for bt3, and it works great; much better than R2 and similar stuff. Here is the codes: http://github.com/morteza/bootstrap-rtl\n\nConsidering target developers' effort to add RTL-related tags to the html, and bilingual properties of usual RTL pages, theming seems the most reasonable method so far. No need to change bt core codes or html or anything. I've also added those official bt3 examples as showcase. Even other themes can be chained to the RTL theme and provide other regular 3rd party themes like bootswatch.\n"},{"labels":["enhancement"],"text":"Hi there \n\nNot sure if this would even be possible but I'm going to put it out there. Maybe there's a way of setting bootstrap up to do this. \n\nLots of issues come up for me - eg I can't use background image 100% for IE8 and below even though this is useful for responsive websites. I notice someone else having issues with responsive tables and IE8\n\nI would like to fix the width for IE8. I guess the issue would be that if parts of bootstrap are in media queries by default then bootstrap won't see them. Perhaps there's some clever way to set a media query so it shows to < IE8\n\nAnyway - great job everyone!\n"},{"labels":["enhancement",null],"text":"I did not find any support for page transitions and swiping gestures in bootstrap (comman in many mobile apps). What is the recommended way to implement these features? Other libraries, roll your own?\n"},{"labels":[null,"enhancement"],"text":"The Customizer page should be largely autogenerated, so that we can avoid having to manually update it to keep it in sync with the LESS (and dealing with the fallout when it's out-of-sync).\n"},{"labels":["enhancement",null],"text":"It would be nice to have a modal constructor that accepts a list of customized buttons, like in jQuery UI. In my former project - a small CRM based entirely in Ajax and jQuery UI - we had just one dialog container used for different purposes through the modal constructor.\n"},{"labels":["enhancement",null],"text":"When a page is narrow enough for the responsive navbar to kick in and you click on it and select a menu item the navbar just sits there until you click on the navbar button again to close it.  This is frustrating for users as it's not how these things normally work everywhere else.\n"},{"labels":[null,"enhancement"],"text":"Buttons, tables, and labels have \"contexts\" such as danger, warning, and success. However, list groups have no such thing. This is not consistent. It would seem that if you can use it in a table by adding the \"danger\" css tag you should be able to use it for list items.\n"},{"labels":[null,"enhancement"],"text":"With a simple tweaks thumbnails can be added to the carousel, why no to add this improvement?\n\nHTML:\n\n``` html\n<!-- Thumbnails carousel -->\n<ul class=\"carousel-thumbs\">\n    <li data-target=\"#carousel-example-generic\" data-slide-to=\"0\" class=\"active\">\n        <img src=\" . . . \" alt=\" . . . \" class=\" . . .\" />\n    </li>\n        . . . \n</ul>\n```\n\nCSS:\n\n``` css\n.carousel-thumbs {\n    margin-top: 10px;\n    padding: 0;\n    list-style: none outside none;\n}\n.carousel-thumbs li {\n    border: 1px solid black;\n    cursor: pointer;\n    display: inline-block;\n    float: left;\n}\n.carousel-thumbs img {\n    max-height: 90px;\n}\n```\n\nJS:\n\n``` js\n    $(\".carousel-thumbs li\").click(function (){\n        $('.carousel').carousel($(this).data('slide-to'));\n    });\n    $(\".carousel a\").click(function (){\n        $('.carousel').carousel($(this).data('slide'));\n    });\n\n```\n\nIts just a rough idea \n"},{"labels":["enhancement",null],"text":"hi\n\nin http://getbootstrap.com/customize, it would be a nice improvement if we could save or import less variables to customize bootstrap.\n\nit allows to easilly modify customization.\n"},{"labels":[null,"enhancement"],"text":"It would be nice if I could (optionally) control the background of `<th>` cells from that of the rest of the table body using a variable control.\n\nBy default it could be `@table-bg-header = @table-bg;`\n"},{"labels":[null,"enhancement"],"text":"Apply new class (.carousel-vertical) for slide in mode vertical.\n"},{"labels":[null,"enhancement"],"text":"In Bootstrap 2.3 there was \"Nav lists\" component. It was removed in Bootstrap 3 (the replacement is Litst groups).\n\nBut list groups can't be nested! It's very sad.\n"},{"labels":[null,"enhancement"],"text":"Although it was never advertised to be possible, it would be useful if glyphs were able to rotate in animations to produce a throbber.\n\nFrom reading earlier reports, I understand animation is not going to be implemented as a feature. But if the glyphs can be reworked so it allows better rotating, that would be great.\n\nAs you can see here, it 'wobbles' a bit: http://jsfiddle.net/CBLPz/2/\n"},{"labels":[null,"enhancement"],"text":"Feature idea.\n\nWhy not set predefined height size for progress bars ?\n\nLike the input, we could have progress-bar-sm, progress-bar-lg...\n"},{"labels":["enhancement",null],"text":"Hello,\n\nIf I use remote modal dialogs, right now there is no native way for me to inform user that his content is loading. On slow connections this could be frustrating.\n\nI know that there are ways to work around this, but why not have a better solution right out of the box?\n\nFor example, you could be adding .modal-loading class to the modal element when content is loading, so that I can style it with css.\n\nmodal.js, line 32:\n\n``` js\n        if (this.options.remote) {\n            var that = this;\n            this.$element.addClass('modal-loading');\n            this.$element.load(this.options.remote, function(){\n                that.$element.addClass('modal-loading');\n            });\n        }\n```\n\nAdding events may also be a nice solution.\n"},{"labels":["enhancement",null],"text":"I have a problem with the way the button setState method works.\n\nI have a project in which I am using a bootstrap button in a modal dialog, where the button's click action is to submit the form to a given URL, then close the dialog, with no further action allowed on the dialog. The desired result is that once a user clicks the submit button, the button is immediately disabled and remains disabled until the dialog is destroyed, but in the meantime the button state gets updated to indicate the status of the save request (e.g., maybe \"Processing...\", \"Saving...\", \"Saved\", etc).\n\nBootstrap does not provide a good way to do this. The problem is that setting the button state to anything other than \"loading\" will enable the button after the current event stack has been processed.\n\n(The only workarounds that I'm aware of involve a hack using setTimeout to set the \"disabled\" attribute again after it is enabled, or to set the text of the button without setting the state, neither of which is desirable.) \n\n(This is a duplicate of https://github.com/twbs/bootstrap/issues/3034, but that issue was closed a year ago for lack of detail.)\n\nA rough, simplified example of the problem do can be seen at:\nhttp://bootply.com/84160\n\nThe Bootstrap code in question is:\nhttps://github.com/twbs/bootstrap/blob/master/js/button.js\nlines 35-53, in the Button.prototype.setState method.\n\nAlso pasted at:\nhttp://codepaste.dev7studios.com/item/ml2kpybyn\n\nThe problem appears to be two-fold. One problem is that the code setting the disabled state of the button is located inside a call to setTimeout(function () {...}, 0), placing it at the _end_ of the current event stack. The other is that setting the button to _any_ state other than 'loading' will cause the button to be enabled. If either of these was fixed, the workaround would be easy.\n\nI think the \"best practice\" solution would be to allow the devloper to control the enabled/disabled state of the button when setting the state, which could be easily accomplished one of two ways:\n1. Adding an additional parameter to the setState method. (Maybe a flag to indicate the button's state? Or an object defining additional options to set for the button?)\n2. Accepting an additional data attribute in the html for the button. For instance:\n   `<button type=\"button\" data-whatever-text=\"Whatever\" data data-whatever-disabled=\"disabled\">Rebellious Button</button>`\n   being triggered by\n   `$('button').button('whatever')`\n   would set the text to \"Whatever\" and disable the button\n"},{"labels":[null,"enhancement"],"text":"It would be great if it was possible to use\n\n``` html\n<td class=\"info\">...</td>\n```\n\nand end up with a blue line in your table.\n"},{"labels":[null,"enhancement"],"text":"It's an unusual experiment, but it can lead to a somewhat strange result:\nhttp://jsfiddle.net/cgeF2/\n\nDoesn't seem to me like that's the desired outcome.\n"},{"labels":[null,"enhancement",null],"text":"I want to have users explicitly click the traditional 'close' button to close the modal.\n\nIs this possible with V3?\n\nThanks for any response.\n"},{"labels":[null,"enhancement"],"text":"All the text-helpers are great but we don't have one that will reset the text color back to the default.  This could be useful in places were we set all text color to text-danger but only want a single word or a single section to be the default color.\n\n`.text-default` seams like a good name for this\n\nExample\n\n```\n<div class=\"alert alert-danger\">\n   <p>I really want the word <span class=\"text-default\">default</span> to be set back to the default color</p>\n</div>\n```\n"},{"labels":[null,"enhancement"],"text":"Example.\n<table class=\"table table-box\">\n\n.table-box {\n    border-collapse: separate;\n    border: 1px solid @table-outer-border-color;\n}\n\n.table-box thead > tr > th {\n    border-bottom: 1px solid @table-head-border-separate-color;\n}\n\n@table-outer-border-color: #b7c7cf;\n@table-head-border-separate-color: #d8e6ec;\n\nhttp://jsfiddle.net/FxHGf/\n"},{"labels":["enhancement"],"text":"Bootstrap is awesome. Following list of components are missing:\n1. Window with Min, Max & Close button.\n2. Complex window layouts.\n3. Wizard.\n4. Dual List Box.\n5. Tree.\n6. Split Pane.\n7. Pill Box.\n\nFor now we need to go for Bootstrap plugins like Fuel-UX to get these feature. But these plugins are not getting updated with bootstrap 3.x or they are slow.\n\nIs there any Milestones for these kind of widgets. \n"},{"labels":[null,"enhancement"],"text":"It will be usefull to have @btn-height-base variable for customizing buttons through variables.\nCurrently this is not customizble just through variable because it implemeted as dependent on @line-height-base.\n\n// buttons.less\n.btn {\n  line-height: @line-height-base;\n}\n\nP.S.\nIn contrast @input-height-base are very usefull.\n"},{"labels":[null,"enhancement"],"text":"In order to customize the prev/next buttons (with, say, an icon), it is also required to recreate about half the styles associated with `.icon-next` and `.icon-prev`. This is because these styles also include \n\n``` css\n  .icon-prev {\n    &:before {\n      content: '\\2039';// SINGLE LEFT-POINTING ANGLE QUOTATION MARK (U+2039)\n    }\n  }\n  .icon-next {\n    &:before {\n      content: '\\203a';// SINGLE RIGHT-POINTING ANGLE QUOTATION MARK (U+203A)\n    }\n  }\n```\n\nI suggest additional classes created `.icon-prev-indicator` and `.icon-next-indicator` that just has the content associated with it. these names would avoid any existing icon conflict both in glyphicons and font awesome.\n\nthis is how it currently works (ripped from the sample site)\nhttp://jsfiddle.net/Y9HnH/\n\nhow i think it should work\nhttp://jsfiddle.net/fwqvK/\n\n---\n\nA similar complaint could be made about background styles applied via `.carousel-control.left` and `.carousel-control.right`\n"},{"labels":["enhancement"],"text":"sorry for the brevity, just throwing it out there  http://bootply.com/83384\n"},{"labels":[null,"enhancement",null],"text":"Collapse of the navbar trigger clearmenu (from dropdown.js) which removes the open class.\n\nThis prevents to do:\n\n``` js\n$(document).on('click.bs.collapse.data-api', '[data-toggle=collapse]', function (e) {\n    $('.navbar-collapse .dropdown-toggle').parent().addClass('open');\n});\n```\n\nor\n\n``` js\n$('.navbar-collapse').on('show.bs.collapse', function () {\n    $('.navbar-collapse .dropdown-menu')).dropdown('toggle');\n});\n```\n\nPossible solution will be to add a extra class with the same styles as open. B.e. opened. It will also display the dropdown when not collapsed after: `$('.navbar-collapse .dropdown-toggle').parent().addClass('open');`\n\nTo prevent this add something like:\n\n``` css\n@media(min-width:768px)\n{    \n    .nav > li.opened .dropdown-menu {display: none;}\n    .nav > li.open .dropdown-menu {display: block;}\n}\n```\n\nSee also: http://stackoverflow.com/questions/18939015/remove-dropdown-link-and-show-all-of-its-items-in-navbar-menu/18943469\n"},{"labels":["enhancement",null],"text":"I'm sure this should have been discussed. But i'm only seeing this OLD thread (https://github.com/twbs/bootstrap/issues/1411) regarding this issue. I did small piece of code to achieve this. If you wish i can give PR with that. Else, someone point me out the real reason why this should not be added into the core?\n\n-Thanks.\n"},{"labels":["enhancement",null],"text":"Hi all, there is one issue I have with twbs,  I really wish the dropdown menu can drop on mouseover instead of on click.\n\nAny help on this?\n"},{"labels":[null,"enhancement"],"text":"http://www.getuikit.com/docs/offcanvas.html \nWhether the component is implemented?\n"},{"labels":["enhancement"],"text":"Hello,\n\nI don't expect it to be accepted, but wouldn't it be nice to have a star rating system?\nWe already have the full/empty star glyphicons, as for example:\n\n```\n<div>\n<span class=\"glyphicon glyphicon-star\"></span>\n<span class=\"glyphicon glyphicon-star\"></span>\n<span class=\"glyphicon glyphicon-star\"></span>\n<span class=\"glyphicon glyphicon-empty\"></span>\n<span class=\"glyphicon glyphicon-empty\"></span>\n</div>\n```\n\nAnd for the website-builder, you would include it as\n\n```\n<div class=\"star-rating\" id=\"Item 1\" data-star-number=\"5\" data-star-value=\"3\">\n\n<!-- Optional data-star-user-select: \"0\",\nbut all these  data-star-* can be set in the function below too -->\n\n<script>\n$('.star-rating').starrate({\nhandler: savestar()\n});\n\nsavestar(theid, thevalue){\n//Do something\n}\n<script>\n```\n\nYou would have to attach mouseover and mouseclick events, and then get the number of star clicked, and do something with that value (up to the website-builder of course), but I believe it can be done, and will come quite handy.\n\nI mean, why not? \nEven if you don't think it could be done in 3.0.1, couldn't you include in in 3.1.0?\n\nP.S. I'm not that into functions, so my example might/is probably wrong, but you get what I mean.\n"},{"labels":[null,"enhancement"],"text":"Currently, Bootstrap uses plain grays for text colors throughout. Plain grays can be good because they're neutral but they can also feel dull and lifeless. Saturating the grays (balancing the amount of gray with a hint of color) can make a site feel more interesting.\n\nFacebook recently saturated their grays with their new Timeline redesign. Since their brand identity's colors are cool (blue), they added a hint of blue to slightly saturate their gray body text. Here's a before/after shot of Facebook's body text colors.\n\n![fb-colors](https://f.cloud.github.com/assets/805073/1160663/946650c4-1fdc-11e3-9870-5e860479e10d.jpg)\n\nIf right now, you're hunched over, squinting your eyes and thinking, \"What is this muppet waffling about, those colors are identical\", just trust me. Saturated grays are the business :)\n\nThere would be a bit of work in this, matching the color scheme, changing variables, testing on different devices etc. so I thought I'd run it past you guys before I launch into it.\n"},{"labels":[null,"enhancement"],"text":"the Glyphicons we could used w Bootstrap 2 were images  OK...  new set is better using fonts , but it has less icons ... how can we expand it ?\n\nsee :\nhttp://marcoceppi.github.io/bootstrap-glyphicons/\n"},{"labels":[null,"enhancement"],"text":"Hey all,\n\nI noticed that the caret does not rotate on dropdown being opened.\n\nE.G.\n![screen shot 2013-09-17 at 17 11 37](https://f.cloud.github.com/assets/2177851/1158400/d7f11a96-1fb3-11e3-97ea-25397b006ade.png)\n\nI achieve a fix using this code:\n\n```\n.dropdown.open .caret{\n  border-top: none;\n  border-bottom: 4px solid #000000;\n  border-right: 4px solid transparent;\n  border-left: 4px solid transparent;\n}\n```\n\nThe above gave me the desired effect, however I did notice that there were no solutions using the docs. Is there another way or is the above helpful for a merge?\n"},{"labels":[null,"enhancement"],"text":"Could it be possible to have info, warning, primary etc variants for list-group-items?\n"},{"labels":[null,null,"enhancement",null],"text":"In this situation:\n\n```\n<header style=\"height:200px;background-color:red;\">\n  <div id=\"affixlink\" data-spy=\"affix\" data-offset-top=\"182\" style=\"background-    color:green;\"><a href=\"#down\">Down</a></div>\n </header>\n <div style=\"height:800px;background-color:yellow;\">\n <a id=\"down\"></a>Content\n </div>  \n```\n\nsee: http://bootply.com/81402\n\nI'm not sure this is an issue of Bootstrap, but i could not find an easing fix. See: http://stackoverflow.com/questions/18799688/bootstrap-affix-navbar-for-single-page-with-scrollspy-and-page-anchors/18834770\n"},{"labels":["enhancement",null],"text":"When using a jQuery object as content (`$el.popover( { content: $form } )`), the form and form elements lose their bound events on second `setContent` call. When the popover is shown for second time, for example.\n\nThis happens because of a jQuery memory leak fix ([explanation here](http://stackoverflow.com/questions/559147/are-events-lost-in-jquery-when-you-remove-an-element-and-append-it-elsewhere), [proof here](http://jsfiddle.net/g7Yk3/)). jQuery's `html()` method (used in `Popover.prototype.setContent`) internally uses `this.empty().append( value );` and therefore removes the content before appending it again.\n\nI suggest changing:\n\n``` js\n$tip.find('.popover-content')[this.options.html ? 'html' : 'text'](content)\n```\n\nInto something like: \n\n``` js\nif (this.options.html) {\n    $(content).appendTo($tip.find('.popover-content'))\n} else {\n    $tip.find('.popover-content').text(content)\n}\n```\n\nWhich fixes the issue. Note that even if content is a jQuery object, it is wrapped again, to support DOM nodes and HTML strings.\n"},{"labels":[null,null,"enhancement"],"text":".thumbnail.active should have the same styling as its hover state.\n![image](https://f.cloud.github.com/assets/664818/1144431/0c1aa792-1d98-11e3-9d0b-3686c58d3a36.png)\n"},{"labels":[null,"enhancement"],"text":"It would be nive to have a border-top before a media object in a panel (just like with tables or list groups).\n"},{"labels":["enhancement",null],"text":"It would be great if the collapsible panel group got the \"collapsed\" / \"in\" classes instead of at a lower, less accessible level.\n"},{"labels":[null,"enhancement",null],"text":"It would be great if support for adding icons to collapsibles was added.\n\nToggle on expand/collapse, obviously.\n"},{"labels":["enhancement",null],"text":"I find that Popovers with 'click' as its trigger is kind of useless when you have many of them opened at the same time, and you have to manually go through and close each one of them.  Can we request to have ONE additional popover option?\n\ndata-backdrop\n\nWhich works the same like modals closing on click.  I believe this is rather straight forward and we will find very useful.\n"},{"labels":[null,null,"enhancement"],"text":"All in the title.\n\nThere is already quite a good starting point from http://getpreboot.com\n"},{"labels":[null,"enhancement"],"text":"Using this framework has been great every time but I was wondering if you could put back the black/inverse colored labels/buttons in the latest bootstrap release?\n\nThanks for your work and time,\n\nJon Chiappetta\n"},{"labels":[null,"enhancement"],"text":"I can't figure out the correct way of presenting this information, but here goes. I think it might help people to show a code sample of how to apply Glyphicons to an unordered list. The code I use follows this pattern:\n\n&lt;ul class=\"list-unstyled\"&gt;\n    &lt;li&gt; &lt;span class=\"glyphicon glyphicon-info-sign\"&gt;&lt;/span&gt; Info &lt;/li&gt;\n    &lt;li&gt; &lt;span class=\"glyphicon glyphicon-link\"&gt;&lt;/span&gt; &lt;a href=\"#\"&gt;Link&lt;/a&gt; &lt;/li&gt;\n    &lt;li&gt; &lt;span class=\"glyphicon glyphicon-ok\"&gt;&lt;/span&gt; Check&lt;/li&gt;\n&lt;/ul&gt;\n\nI'm thinking this should be one of the examples on the CSS page, under the Lists subsection.\n\nHope this helps.\n"},{"labels":[null,"enhancement"],"text":"When using thumbnails with custom content that varies in length the thumbnails do not clear each other. Some hang, without floating to a new \"row\".\n\nTake the example provided in the docs but try increasing the number of thumbnails to say 12. Vary the content length in each thumbnail so some have more or less.\n\nThe doc example appears to work because there are only 3 thumbnails with the same exact dummy copy content.\n"},{"labels":[null,"enhancement"],"text":"I think it would be great to have a mixin that extends .row.\n\nA 12 col grid and centering 9 column div doesn't work with any combination of offset or push.\n\n```\n<div class=\"row\">\n  <div class=\"center5\">\n        <div class=\"span2\">2</div>\n        <div class=\"span3\">3</div>\n    </div>\n</div>\n```\n\nGranted this was built using pre 3.0 BS\n\nhttp://tentaclecms.com/blog/2013/07/centring-columns-in-bootstrap/\n"},{"labels":[null,"enhancement"],"text":"Previous bootstrap used spanX, the new columns had a lot of extra clutter. I see the need and power with resolution specific columns, but I would like to see them simplified a bit.\n\n.col-xs-X\n.col-sm-X\n.col-md-X\n.col-lg-X\n\n**could simplify to:**\n\n.xsX\n.smX\n.mdX\n.lgX\n\n.pushX and .offsetX are now .col-md-offset-2 and .col-md-push-3\n\nI think these could be .md-offset2 and .md-push3\n\nIf col is used in all of the grid classes then I think it would be nice to remove it from the class names.\n"},{"labels":["enhancement",null],"text":"Hello,\n\nSince I've no idea where to put idea's for new features, maybe the Bootstrap and/or Github site should make that clear, I'll just post it here.\n\nIs it an idea to introduce an WYSIWYG/Rich Text Editor?\nI mean, you have the buttons & button-dropdowns for it, and even the Glyphicons (Bold, Italic, Text-Size)...\n\nInterested to hear your response,\n\nIsaiah\n"},{"labels":[null,"enhancement"],"text":"[Original title: Navbar.pull-right dropdown.pull-left doesn't work.]\n\nThis should fix it:\n\n.navbar-nav > li > .dropdown-menu.pull-left {\n  right: auto;\n  left: 0;\n}\n"},{"labels":[null,"enhancement",null],"text":"In Google Chrome, loading http://getbootstrap.com/examples/starter-template/\ngives a HTTP 404 for http://getbootstrap.com/assets/js/jquery-1.10.2.min.map\n"},{"labels":[null,"enhancement"],"text":"It would be great if it's possible to add butttons in a proper way too panel headings. They should be aligned to the right hand side by default so the title fits on the left hand side.\n"},{"labels":[null,"enhancement"],"text":"Is it possible to disable icons on devices (like windows phone - lumia) that dont support @font-face so it displays square instead of icon? I would like to dont display it at all.\n"},{"labels":[null,"enhancement"],"text":"How about for small devices have it as static positioning (positioned according to the normal flow of the page) for the caption. Making caption easy to read. It will change its behavior for small, medium and large devices to absolute. \n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nI think there is no real issue for that.\nThere were comments in some other issues that wish also back the dark button but no seperate issue/feature request for that.\nSo I would love to have the dark button back from RC1, not as default, because the effect would be to heavy on other devs, but as additional option btn-dark, would be great.\n\nKind regards\n"},{"labels":[null,"enhancement"],"text":"I'd like to place a `<button type=\"submit\">` in a dropdown button group, like this:\n\n``` html\n<div class=\"btn-group\">\n    <button type=\"submit\" name=\"status\" value=\"pending\" class=\"btn btn-primary\">\n        Submit as Pending\n    </button>\n    <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\"> <span class=\"caret\"></span>\n    </button>\n    <ul class=\"dropdown-menu\" role=\"menu\">\n        <li>\n            <button type=\"submit\" name=\"status\" value=\"working\">\n                Submit as Working\n            </button>\n        </li>\n        <li>\n            <button type=\"submit\" name=\"status\" value=\"solved\">\n                Submit as Solved\n            </button>\n        </li>\n        <li>\n            <button type=\"submit\" name=\"status\" value=\"invalid\">\n                Submit as Invalid\n            </button>\n        </li>\n    </ul>\n</div>\n```\n\nIt think it could be useful to have form submit buttons in dropdown button groups, but the dropdown style is now applied only to anchors (`.dropdown-menu > li > a`) and not to inputs or buttons.\n"},{"labels":[null,"enhancement"],"text":"Add the following to list-group.less\n\n```\n.panel .list-group .list-group-item {\n  border: none;\n  border-top: 1px solid @list-group-border;\n}\n\n.panel .list-group .list-group-item:first-child {\n  border-top: none;\n}\n```\n\nUse like this to create nice navigation list with heading\n\n```\n<div class=\"panel panel-default\">\n            <div class=\"panel-heading\">Personal Profile</div>\n            <div class=\"list-group\">\n                 <a class=\"list-group-item\" href=\"/profile/p\">Profile</a>\n                 <a class=\"list-group-item\" href=\"/profile/orders\">Orders</a></div>\n          </div>\n</div>\n```\n\nNote, there is no panel-body div, since it adds margins. May be it makes sense to add panel-body-list instead, to explicitly specify the intent.\n"},{"labels":[null,"enhancement"],"text":"It'd be nice to have responsive margins in addition to the grids to allow for more specific layout adjustments.\n\nI regularly use margin shortcuts for nudging layouts here and there in small or large amounts... Here's a gist:\n\nhttps://gist.github.com/mogga/6361408\n"},{"labels":["enhancement",null],"text":"I plan to provide some media player controls in the fixed navbar and want to use a popover to display information about the track currently playing.\n\nHowever, using a popover is a bit difficult as it's tricky to update the popover ([see this stack overflow trick](http://stackoverflow.com/a/12368435/418244)).\n\nPlease provide a way to make it more easy to update the content of a popover.\n"},{"labels":[null,"enhancement"],"text":"The smallest grid column supported at the moment is .col-xs- (<768px), which seems like a big range.\n\nWould it be advisable to have:\n .col-xs- (>480px and <768px)\n .col-tn- (<480px)\n\nReason being it still seems reasonable to have a 2 column grid on 768px (240px - 384px per column), while 480px have a stacked column. \n\nUsing the current .col-xs- (<768px) option, putting one stacked column on 768px seems too wide on some cases, and 2 columns on 480px seems ridiculous at times.\n"},{"labels":["enhancement"],"text":"Guys I don't see any option for changing fonts path variable as well?\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nI didn't find any class to center , right , left align Image manually.\nIf is there any class please let me know. if not then please add one.\n"},{"labels":[null,"enhancement"],"text":""},{"labels":[null,"enhancement"],"text":"is it possible to add a small class \".small\" together with the small element to add more flexibility to the styling options\n\neg. \nsmall, .small   { font-size: 85%; }\n"},{"labels":[null,"enhancement"],"text":"Would be good to put back in. Especially now that you have @headings-small-color\n"},{"labels":["enhancement",null],"text":"Is it possible to add a options to make over popover hidden when we click on a popover or on the body (html page)\n\nFor the feature version.\n\nThank's for your work\n"},{"labels":[null,"enhancement"],"text":"In carousel.less the glyphicons-chevron-left (and right) are missing scale up classes for tablet and up. see below.\n\n   .carousel-control .icon-prev,\n  .carousel-control .icon-next,\n  .carousel-control .glyphicons-chevron-left,\n  .carousel-control .glyphicons-chevron-right {\n    width: 30px;\n    height: 30px;\n    margin-top: -15px;\n    margin-left: -15px;\n    font-size: 30px;\n  }\n"},{"labels":["enhancement",null],"text":"It would be nice to add loaded.bs.modal event, which would be fired when remote option is set and remote content has loaded.\n\nSomething like:\n\n``` javascript\nif (this.options.remote) {\n\n    this.$element.load(this.options.remote, function(){\n        e = $.Event('loaded.bs.modal')\n\n        this.trigger(e)\n    })\n}\n```\n"},{"labels":[null,"enhancement"],"text":"There's another suggestion (not the same) on Issue #9235 \n\nWhat I think would be great is to have different classes for button sizes like the grid so:\n\nright now, btn-xs creates a small btn.\n\nwhat I think we could add is a feature to have different size of buttons at different grid sizes don't know how to name it unfortunatelly. But something like :\n\nbtn-col-xs-block\nbtn-col-md-sm\nbtn-col-lg-md\n\nwhich means, on small grid, use block button.\non medium grid use small button\non large grid use medium button\n\nI think, naming could be a problem and maybe it would be good to bring back old name for sizes. so you can consistently specify like\n\nbtn-xs-block\nbtn-md-small\nbtn-lg-large\n\nAt first I liked the idea of using all naming consistent with xs, sm, md, lg. but when using it heavily and everyday more inclined into thinking that those should be reserved for grid specific purposes.\n\nso we can end having something like\n\n`<h1 class=\"h6-xs h1-lg\">hello im big but small on small</h1>`\n\n`<p class=\"large-md small-xs\">Some paragraph</p>`\n\nfor text sizing as well, also some more considerations like\n`<p class=\"lead-lg\">this paragraph will only be in lead mode when on lg size grid</p>``\n"},{"labels":[null,"enhancement"],"text":"Currently, the modal width is hard-coded to 600px.  Could you expose this as a variable instead?  It would be an easy way to customize the size of modals site-wide.\n\nEven better, could you expose different variables for each breakpoint?  That would allow for ultimate flexibility.  Something like this:\n\n```\n@modal-xs-width     100%;\n@modal-sm-width     100%;\n@modal-md-width     600px;\n@modal-lg-width     800px;\n```\n"},{"labels":["enhancement",null],"text":"It would be great if the developer can choose to make the popover disappear after X seconds.\n\nIt should also take account of the fact that if the popover is destroyed, it must be reset the timer that makes it disappear.\n"},{"labels":[null,"enhancement"],"text":"I have a split button on a navbar menu. When the menu is collapsed, clicking on the split button's menu at the bottom of the menu, the sub menu will appear behind the navbar edges instead of overflowing over the navbar edges. And instead a scroll is visiable.\n\n![untitled](https://f.cloud.github.com/assets/3468092/1006127/a67727e2-0ad4-11e3-9dbe-a97d74779c71.jpg)\n"},{"labels":["enhancement",null],"text":"It seems odd to me that the offset for an affix object describes the offset from the top of the window (or document/body whatever) to the scroll position. I would expect it to be from the scroll position to the element being affixed. This is kind of like the \"sticky\" functionality of the jQuery waypoints plugin. For example:\n\nIf I have a panel under another panel, and I want the second panel to affix (let's say this is a one-column mobile page), the offset changes depending on how much content is in the first panel. Yes, I could change this offset with JS, but that's needless tight-coupling.\n\nIf it described instead the scroll pos. to element offset, I could set it to 0 and it would affix no matter what is happening above it. If, for some reason, I wanted to have it affix a little bit after I scroll past it, I could set the offset to -10.\n\nAs an example, see the jQuery waypoints method (bottom of page) http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/\n"},{"labels":[null,"enhancement"],"text":"I currently want to make the navbar red, showing that the user is going to perform some  experimental operations. A good point will be to add the standard coloring classes. Is this already possible or planned?\n"},{"labels":["enhancement"],"text":"Split the resulting CSS with comments so we'd know where section starts and ends. Currently this is visible by classes but not always and not completely apparent.\n"},{"labels":["enhancement",null],"text":"Anyway to make it so on a Desktop you can hover the menu rather than click?\n"},{"labels":[null,"enhancement"],"text":"I really like the new callouts in the docs, but ask myself why they are reserved for the docs?\nThey look way better than the default alerts, imo they can be replaced by callouts.\n"},{"labels":[null,"enhancement"],"text":"At the moment headings are calculated relative to the @font-size-base, and they look OK. For ultimate flexibility though, wouldn't they be better as variables so that we can have control sizing without reverting to overrides?\n\nIt's unlikely that every project fits with the heading sizes automatically generated for us.\n"},{"labels":[null,"enhancement"],"text":"The document says \n- Extra small devices (phones, up to 480px)\n- Small devices (tablets, 768px and up)\n- Medium devices (desktops, 992px and up)\n- Large devices (large desktops, 1200px and up)\n\nSo it seems a breakpoint & media query for devices between 480px - 768px are missing. \n"},{"labels":[null,"enhancement"],"text":"I have built this issue to discuss the approach for supporting RTL in the upcoming 3.1 version. Although it's too early for implementation code and pull requests, choosing the right approach now helps in the planning, and directing the efforts towards a specific goal (as many people have already volunteered for the task).\n\nI think the biggest issue is the lack of a standard, or best practices for adding RTL support for themes and pages. First, I want to review some of the current practices for RTL support in different parts of the web.\n- WordPress: uses RTL overrides, in a single seperate file named rtl.css, auto-loaded by WordPress in right-to-left pages. [explained here](http://codex.wordpress.org/Right-to-Left_Language_Support)\n- Drupal 7: uses RTL overrides, in a separate file with -rtl.css prefix for every css file loaded by themes, etc. again, auto-loaded in right-to-left pages. [explained here](https://drupal.org/node/222782)\n- Drupal 8: favors RTL overrides prefixed by <code>[dir=\"rtl\"]</code>, alongside the base css (no separate files). explained [here](https://drupal.org/node/2032405); also, see the [related discussion](https://drupal.org/node/2015789)\n- RTL-This (a website dedicated to turning everything RTL): Has an article comparing different ways to add RTL to css [here](http://rtl-this.com/tutorial/3-different-ways-rtl-your-css).\n- Another article by a css-expert (Jens O. Meiert): ... Indicate directionality by the dir attribute on the html element ... Avoid a separate RTL style sheet; find all declarations that specify anything specific to the left or right ... customize those declarations, and use some hook to apply them—like e.g. setting id=\"rtl\" on the body element (well, you really want to use html[dir=\"rtl\"]). article [here](http://meiert.com/en/blog/20081211/5-rtl-tips/).\n- Another popular approach is to prefix all RTL rules with a .rtl class (and possibly .ltr for base rules, to prevent overrides). per #3133, #6423, and the [less-bidi](https://github.com/danielkatz/less-bidi) model.\n\nI'd suggest using an approach than could satisfy these different requirements by simple customizations.\n1. I suggest keeping the RTL rules in a separate css file. Clearly, merging them into a single stylesheet (when required) would be a single copy-paste at the end of the base css.\n2. I suggest using overrides (vs mixins, or automated tools) in a separate .less file. Then, adding any combination of prefixes, or <code>[dir=</code> rules is as easy as a few lines of .less code. example:\n\n```\n[dir=\"rtl\"] {\n  @include \"bootstrap-rtl.less\"\n}\n```\n\nor\n\n```\n.ltr {\n  @include \"bootstrap.less\";\n}\n\n.rtl {\n  @include \"bootstrap-rtl.less\";\n}\n```\n"},{"labels":[null,"enhancement"],"text":"I think @component-active-bg needs a counterpart called @component-active-color so the contrast between background color and text can be controlled. For example I've set @component-active-bg to #ddd and the text color is being calculated as white, which is barely visible.\n"},{"labels":[null,"enhancement"],"text":"So if the viewport width is too small to show all buttons in a row, it transform into a dropdown. It could be offered via an optional trigger.\n"},{"labels":[null,"enhancement"],"text":"http://oi40.tinypic.com/wirl29.jpg\n\nIt would be nice to have the above as a feature for documentation pages.\n"},{"labels":[null,"enhancement"],"text":"In the new 3 release btn-inverse has been dropped because no semantic excuse could be made for it. I've got one now: \"advanced\" or \"technical\" actions.\n\nThis is the button for when things get hardcore. Popping open dark backroom controls and analytics spreads. Smokey translucent divs with streams of log printouts. Carbon panels with master delete switches.\n\nThis is the button that transitions you from the bright light white site to the burnt out night theme of everyone's favorite text editor and Alien Blue.\n\nTBH I'm biased, my heart aches to see that blackness missing from the button rainbow. But for reals, I would use this as the \"let's get serious\" button.\n"},{"labels":[null,"enhancement"],"text":"How about adding variables for padding, font size, weight and background color - jumbotron could then be used in lots of different ways besides just a showcase for key content.\n"},{"labels":["enhancement",null],"text":"I've come across a thought that it would be more convenient that modal script load function have a target for injection a custom block for example:\nif (this.options.remote) this.$element.find('.modal-body #load').load(this.options.remote)\ninstead of injecting into modal root element:\nif (this.options.remote) this.$element.load(this.options.remote)\nThat's not a problem to customise the script in that way, but it would be nice to have that feature \"from the box\". And I believe it would add more flexibility to Modal feature in Bootstrap 3\n"},{"labels":[null,"enhancement"],"text":"Hi, putting a `table.table` inside a `.panel`-Element instead of a .table-body works quite fine, similar to `.table-group` s. There is only one little issue: the margin-bottom should be removed.\n_Normal_:\n![panel-table](https://f.cloud.github.com/assets/640808/982903/ae215da8-082e-11e3-9031-cf789de9a6a9.png)\n_Margin removed_:\n![panel-table2](https://f.cloud.github.com/assets/640808/982904/afb19854-082e-11e3-80df-7aab18ad97e5.png)\nRemoving the margin should be as simple as\n\n``` css\n.panel>.table {\n    margin-bottom: 0;\n}\n```\n\nAnd I think this behaviour should be added to the documentation, because it's pretty nice, I think.\n"},{"labels":[null,"enhancement"],"text":"Maybe have a toggle button in the navbar?\n"},{"labels":["enhancement",null],"text":"I do this with jQuery to ensure jQuery works even if cdn is down (however unlikely!):\n\n&lt;script src=\"//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script>window.jQuery || document.write('&lt;script src=\"assets/js/jquery-1.10.2.min.js\"&gt;&lt;\\/script&gt;');&lt;/script&gt;\n\nI've tested with dummy cdn url & it works great.\nIt also works with Modernizr.\nIt would be great if I could do something similar to below:\n\n&lt;script src=\"//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc2/js/bootstrap.min.js\">&lt;/script&gt;\n&lt;script>window.Bootstrap || document.write('&lt;script src=\"assets/js/bootstrap-3.0.0-rc2.min.js\"&gt;&lt;\\/script&gt;');&lt;/script&gt;\n\nIs there a way of doing this already or is it something that would need to be added?\n"},{"labels":[null,"enhancement"],"text":"Here are a few suggestions for the examples page to add. It will make it easier to have a fast working example, particularly for open source projects:\n- Admin panel (a basic form)\n- A static left/right menu for the page\n- Gmaps\n- Basic image gallery (will have images, paging, etc)\n- A documentation page\n\nThanks :)\n"},{"labels":["enhancement",null],"text":"With bower renaming their config file to bower.json can you support the component package manager with a component.json? As this is the last unsupported package manager, according to https://github.com/wilmoore/frontend-packagers#configuration-file\n\nThanks\n"},{"labels":["enhancement",null],"text":"Hello,\n\nI think you could clear forms when they are submitted in modals. It could be cool!\n\nremontees\n"},{"labels":[null,"enhancement"],"text":"Here my demo (it still has some messes at breakpoint) : http://fiddle.jshell.net/xdjbP/show/\n\nIf responsive elements (especially with `.container`) have itself transition feature on change at each screen size, that much more cool, and, somehow, it make us ease to live with it.\n"},{"labels":[null,"enhancement"],"text":"Chrome on Mac. Comparisons between WIP and RC1.\n\nPlease allow components (specifically a right-aligned dropdown menu) to exist outside of the collapse within navbars.\n\nWith this it is relatively easy to create the common 3 component (toggle, brand, [random component]) navbar layout that seems to be popular in many mobile sites and applications. This was very easy to do in RC1 and required only a minimal amount of additional styling but attempting this in the WIP version is quite a mess, especially with the navbar-header requirement.\n\nHere are jsFiddle examples of this layout:\n\nRC1: http://jsfiddle.net/jokokoloko/t4ww3/\nWIP: http://jsfiddle.net/jokokoloko/ZmxQp/\n\nSome quick screenshots:\n\nRC1\n![rc1-767-closed](https://f.cloud.github.com/assets/5240653/979100/0c07739e-06db-11e3-981e-6e730123b915.jpg)\n![rc1-767-open](https://f.cloud.github.com/assets/5240653/979102/1612fc8c-06db-11e3-9501-c69f0b2d8f5c.jpg)\n\nWIP\n![wip-767-closed](https://f.cloud.github.com/assets/5240653/979103/20f69e9c-06db-11e3-8abe-f65de73721c8.jpg)\n![wip-767-open](https://f.cloud.github.com/assets/5240653/979104/24eaa6e2-06db-11e3-9675-a09ab719686b.jpg)\n"},{"labels":[null,null,"enhancement"],"text":"Is it good to have offset in col-xs? Because I'm putting an extra col that only visible in mobile just to achieve the offset. I'm not an expert on this, but I don't understand why there is no offset in col-xs. \n"},{"labels":[null,"enhancement"],"text":"While developing using BS3 I am finding myself needing/wanting to create list groups inside a panel without the full-width panel list group styles kicking in (.panel .list-group).  For example if I have a large/wide panel content area where I might want to display a list-group on one side and content on the other.  Am I missing a way to do this?\n\nPerhaps only do full width list groups if the list-group is a direct descendant of .panel.  This way we can put them inside a panel-body DIV for normal rendering.\n\n![panelexample](https://f.cloud.github.com/assets/1693635/972953/bca0223a-0610-11e3-807a-418b5bd1179d.jpg)\n"},{"labels":[null,"enhancement"],"text":"Simply by adding:\n\n``` css\n.modal-dialog.container {\n    width: auto;\n}\n```\n\nand adding the `container` class to your `modal-dialog`, you enable the modal to resize with the window.\nCurrently, this is prevented because `.container` sets a `max-width`, not a `width`.\n\nI think this should be built-in.\n\nSee http://jsfiddle.net/KQke6/1/\n\nP.s.: Drag the Fiddle’s frame to see the difference\n"},{"labels":[null,"enhancement"],"text":"see [navs.less#L22](https://github.com/twbs/bootstrap/blob/3.0.0-wip/less/navs.less#L22).\n\ni want a slimmer tab / pill. add variable like `@nav-link-padding` will help to customize it\n"},{"labels":[null,"enhancement"],"text":"Hi, has the .divider-vertical for navbars been dropped from bootstrap 3, or is it just a feature overlook? I don't see it in neither docs nor code.\n"},{"labels":[null,"enhancement",null],"text":"Please make lateral the navbar when it collapses on mobile devices such as foundation or purecss.\nTks\n"},{"labels":[null,"enhancement"],"text":"Like the class .img-responsive, add  a class for responsive, intrinsic  embeds would be a useful utilities\n\nA great example from @necolas\nhttps://github.com/suitcss/flex-embed/blob/master/flex-embed.css\n"},{"labels":[null,"enhancement"],"text":"I recently was toying around with Bootstrap 3 RC1, when I came across an issue.\n\nI wanted to create an implementation of a Linked List Group.\n\nI much preferred the parent as a div over a ul, however, the child element always has to be an anchor tag.\n\nIf possible, can we add support for the child to be a div element, allowing the following syntax ...\n\n```\n<div class=\"list-group\">\n\n<div class=\"list-group-item active\">\n  <div class=\"row\">\n  <div class=\"col-2\">\n  <div style=\"color:#2ecc71;text-align:center;font-size:2.0em;\"/div>\n  </div>\n   <div class=\"col-10\"><a href=\"#\">Dapibus ac facilisis in</a><br><small>March 15th 2013</small>\n</div>\n</div>\n</div>\n\n</div>\n```\n\nor\n\n```\n<div class=\"list-group\">\n\n<div class=\"list-group-item\">\n  <a>This is the title</a>\n  <small>This is a some extended information</small>\n</div>\n\n</div>\n```\n\nIn the interim, i can modify my css if no support is planned, but I think it would be a nice addition.\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nif I understand correctly, current LESS is hard-coded to generate 12-column layout. Is (or will) it be possible to generate 15, 18 or 24 column layouts? I've tried changing @grid-columns to 24 in variables.less, but it doesn't seem to work.\n"},{"labels":[null,"enhancement"],"text":"With the addition of the fade transition on this js module, the most common options found on a website will be covered. For many types of images, instead of sliding the fade in would be a lot better. For all other cases, users will have to use a separate plugin.\n"},{"labels":[null,"enhancement"],"text":"Custom content thumbnails are great. It would be nice if you add grid and list view with switch feature for next version.\n"},{"labels":[null,"enhancement"],"text":"A search function inside the bootstrap website will be very usefull.\n"},{"labels":[null,"enhancement"],"text":"Several suggestions:\n\nSmall item:\nWhite captions are hard to see on many images. I would suggest a back semi-transparent background behind \n\nBigger item:\nAbility to specify a width & height for the carousel and then size appropriately and vertically & horizontally center an image in carousel. Sizing requires setting either a max-width, max-height to 100% and auto for the other dimension. Add a black-background for styling.\n\nThis prevents the carousel from changing height based on the image size and makes the carousel able to handle many types of images.\n\nI hope this makes sense... if not, let me know and I'll try to work up an example.\n"},{"labels":[null,"enhancement",null],"text":"Instead of toggling with .active onto the label, it would be awesome to be able to toggle with the normal checked on the inputs themselves.\n"},{"labels":[null,"enhancement"],"text":"current implement\n\n``` html\n<div class=\"btn-group\">    <!-- add btn-sm for every buttons -->\n    <button type=\"button\" class=\"btn btn-default btn-sm\">Left</button>\n    <button type=\"button\" class=\"btn btn-default btn-sm\">Middle</button>\n    <button type=\"button\" class=\"btn btn-default btn-sm\">Right</button>\n</div>\n<div class=\"input-group\">    <!-- add input-sm for every inputs -->\n  <input type=\"text\" class=\"form-control input-sm\">\n  <span class=\"input-group-addon input-sm\">.00</span>\n</div>\n```\n\nvs\n\n``` html\n<div class=\"btn-group btn-sm\">  <!-- only one btn-sm required -->\n    <button type=\"button\" class=\"btn btn-default\">Left</button>\n    <button type=\"button\" class=\"btn btn-default\">Middle</button>\n    <button type=\"button\" class=\"btn btn-default\">Right</button>\n</div>\n<div class=\"input-group input-sm\">  <!-- only one input-sm required -->\n  <input type=\"text\" class=\"form-control\">\n  <span class=\"input-group-addon\">.00</span>\n</div>\n```\n\nref #9056\n"},{"labels":["enhancement"],"text":"Hi,\n\ncan you integrate a Mega Menu into bootstrap3?\n\nThere is a solution already made by someone?\n\nThanks\n"},{"labels":["enhancement",null],"text":"I am trying to use scroll spy with a linked list group but it seems like scrollspy only appends the active on list tags and not anchor tags. It would be nice to be able to specify which tag active is being appended.\n"},{"labels":[null,"enhancement"],"text":"Be useful if there was some kind of element like List Group Custom Content (http://getbootstrap.com/components/#list-group-custom-content ), but that on hover only the background color changed and individual links within the element could then be clicked. Just like the issue list here in github.\n"},{"labels":[null,"enhancement"],"text":"Hi,\nAs you know, in Bootstrap 3 RC 1 maximum container width is ~1200px. But what if someone has FullHD screen width crushing width of 1920px? He sees empty space on both sides.\n"},{"labels":[null,"enhancement"],"text":"I think a version of .hide and .show without !important rule might be useful.\n\nIn my case they create problems on working with jQuery show() and hide() functions.\n"},{"labels":[null,"enhancement"],"text":"Hi, I'm loving Bootstrap 3!\n\nOne problem I'm encountering is that button panels aren't \"responsive\" enough. I'd like to have `.btn-block` style buttons below 768px, and normal `.btn` style above, potentally with `.pull-left` or `.pull-right`\n\n![btn-responsive](https://f.cloud.github.com/assets/27655/931269/eb05269a-0028-11e3-887b-8c1eefc57e1d.png)\n\nHere's the proposal for this (thanks @ggam):\n\n``` less\n@media (max-width: @screen-sm) {\n  .btn-group-responsive {\n    margin-bottom: -10px;\n    .btn {\n      .btn-block(); // Reuse btn-block code\n      margin-bottom: 10px;\n    }\n    .pull-left, .pull-right {\n      float: none !important;\n    }\n  }\n}\n```\n"},{"labels":[null,"enhancement"],"text":"I collaborate on the Web Experience Toolkit (WET) for the Gov't of Canada. http://wet-boew.github.io/wet-boew/index.html\n\nWe are looking to move from our current responsive v3.1.3 framework into a mobile-first v4.0 approach.  WET 4 will release this winter.  We had a lot of the coding base/grids already mapped out but with the release of Bootstrap 3, a decision has been made to adopt the CSS from Bootstrap 3 instead.  \n\nWET will still exist to help the Gov't of Canada meet it's requirements (multi-language, accessibilty, usability, themes etc) but the CSS backbone will be Bootstrap 3.\n\nSince you have done amazing work on your documentation, and since we have a legal requirement to provide information in both English and French, would you be receptive to us translating your content pages into French and providing them back to you, so you can host both?\n\nCheers, \nChad\n\n...and congrats on the launch of an amazing product!\n"},{"labels":[null,"enhancement"],"text":"Text-based pages often feature a box of content on the right (showing related info/links etc) and then have heading/text covering the main content area.\n\nI have created a mock-up that would allow a float-right of the grid cell and then a reflow of the remaining info so that it wraps AROUND and BELOW the grid.\n\nhttp://jsfiddle.net/cfarquharson/tJ9WB/ \n\nIs this something that can be added?\n"},{"labels":["enhancement",null],"text":"The ability of the **Modal** to load external data via either JavaScript or `data-remote=\"remote.html\"` attribute is very powerful.\nI believe the same feature need to be available for the **Tabs**.\n\nI know you guys are concentrated mostly on removing features rather than on adding them for the initial release. Though I hope you'll see the value in this feature. If so, I could try to put together a pull request for this.\n"},{"labels":[null,"enhancement"],"text":"Like button, label and alert , they have themes of \"default\", \"primary\" and \"warning\" etc.\n\nHow about add those themes to tooltip and popover(maybe too much?) too?\n\nA warning tooltip will look like \n![warning tooltip](https://f.cloud.github.com/assets/4074472/921848/7b5f72e0-ff0c-11e2-841c-7b9b0f0c8433.png)\n"},{"labels":[null,"enhancement"],"text":"Since there are text color classes, background classes, lead classes etc, can you include border classes?  \n\nYour move away from fixed width grids to fluid grids with padding allows for lots of border options like\n\nBorder in the gutter:\n\n```\n<div class=\"row\">\n  <div class=\"col-9 border-right\">...</div>\n  <div class=\"col-3\"><p>more content</p></div>\n</div>\n```\n\nOr border on the grid content: \n\n```\n<div class=\"row\">\n  <div class=\"col-9\"><div class=\"border-dashed\">...</div></div>\n  <div class=\"col-3\"><p>more content</p></div>\n</div>\n```\n\nThe CSS would be something like this: \n\n```\n[class*=border] {\nborder-color:#999;\nborder-style:solid;\nborder-width:0;\n}\n\n.border-light {\nborder-color:#ccc;\nborder-width:1px;\n}\n\n.border-dark {\nborder-color:#666;\nborder-width:1px;\n}\n\n.border-dashed {\nborder-style:dashed;\nborder-width:1px;\n}\n\n.border-double {\nborder-style:double;\nborder-width:3px;\n}\n\n.border-left-light {\nborder-left-color:#ccc;\nborder-left-width:1px;\n}\n\n.border-left-dark {\nborder-left-color:#666;\nborder-left-width:1px;\n}\n\n.border-left-dashed {\nborder-left-style:dashed;\nborder-left-width:1px;\n}\n\n.border-left-double {\nborder-left-style:double;\nborder-left-width:3px;\n}\n\n.border-right-light {\nborder-right-color:#ccc;\nborder-right-width:1px;\n}\n\n.border-right-dark {\nborder-right-color:#666;\nborder-right-width:1px;\n}\n\n.border-right-dashed {\nborder-right-style:dashed;\nborder-right-width:1px;\n}\n\n.border-right-double {\nborder-right-style:double;\nborder-right-width:3px;\n}\n\n.border-top-light {\nborder-top-color:#ccc;\nborder-top-width:1px;\n}\n\n.border-top-dark {\nborder-top-color:#666;\nborder-top-width:1px;\n}\n\n.border-top-dashed {\nborder-top-style:dashed;\nborder-top-width:1px;\n}\n\n.border-top-double {\nborder-top-style:double;\nborder-top-width:3px;\n}\n\n.border-bottom-light {\nborder-bottom-color:#ccc;\nborder-bottom-width:1px;\n}\n\n.border-bottom-dark {\nborder-bottom-color:#666;\nborder-bottom-width:1px;\n}\n\n.border-bottom-dashed {\nborder-bottom-style:dashed;\nborder-bottom-width:1px;\n}\n\n.border-bottom-double {\nborder-bottom-style:double;\nborder-bottom-width:3px;\n}\n\n.border {\nborder-radius:1px;\nborder-width:1px;\n}\n\n.border-none {\nborder-width:0;\n}\n\n.border-large {\nborder-width:2px;\n}\n\n.border-xlarge {\nborder-width:4px;\n}\n\n.border-left {\nborder-left-width:1px;\n}\n\n.border-left-none {\nborder-left-width:0;\n}\n\n.border-left-large {\nborder-left-width:2px;\n}\n\n.border-left-xlarge {\nborder-left-width:4px;\n}\n\n.border-right {\nborder-right-width:1px;\n}\n\n.border-right-none {\nborder-right-width:0;\n}\n\n.border-right-large {\nborder-right-width:2px;\n}\n\n.border-right-xlarge {\nborder-right-width:4px;\n}\n\n.border-top {\nborder-top-width:1px;\n}\n\n.border-top-none {\nborder-top-width:0;\n}\n\n.border-top-large {\nborder-top-width:2px;\n}\n\n.border-top-xlarge {\nborder-top-width:4px;\n}\n\n.border-bottom {\nborder-bottom-width:1px;\n}\n\n.border-bottom-none {\nborder-bottom-width:0;\n}\n\n.border-bottom-large {\nborder-bottom-width:2px;\n}\n\n.border-bottom-xlarge {\nborder-bottom-width:4px;\n}\n```\n"},{"labels":[null,"enhancement"],"text":"I'm pretty sure that the docs.css is the generated file from docs.less.. Is it ok if you could push that file to the repo as well..? Nobody should rip it off ass is.. but you have some cool customizations regarding headers and `@media` related rules that could be nice to use.. ;)\n"},{"labels":[null,"enhancement"],"text":"Currently there are 3 sets of column classes, but 4 default screen sizes as specified [here](http://getbootstrap.com/css/#grid). Specifically `col-lg-*` has a double meaning. It is for screen sizes of 992-1200 and 1200+. I would like to see this broken up so that there is one set of column classes for 992-1200 and another separate set of column classes for 1200+.\n\nThe reason is that some content on the website I am building needs different column settings for medium and large devices.\n"},{"labels":[null,"enhancement"],"text":"If I use col-sm-offset-2 on smaller displays, I may want to remove the offset on larger displays. A col-lg-offset-0 would be handy to remove the offset.\n\nCan this be added?\n\n```\n.col-lg-offset-0{margin-left:0;}\n```\n"},{"labels":[null,"enhancement"],"text":"If you want to have a row of input without space between the input to mimic some type of table.\n\n``` css\n.col-condensed {\n  margin-left: 0px;\n  margin-right: 0px;\n  div[class^=\"col-\"]{\n    padding-left: 0px;\n    padding-right: 0px;\n  }\n}\n```\n\nExample of use\n\n``` html\n<div class=\"row col-condensed\">\n  <div class=\"col-4\"></div>\n  <div class=\"col-4\"></div>\n  <div class=\"col-4\"></div>\n</div>\n```\n\nAlternative use another name for the class, or maybe add 1px for padding.\nPlease fix my less code if its wrong. \n"},{"labels":[null,"enhancement"],"text":"Sometimes the navbar is used 100% width of a page, or within another element where rounded corners are not needed. I'd like to suggest a new variable in // Basics of a navbar called navbar-radius - perhaps set to @border-radius-base.\n"},{"labels":[null,"enhancement"],"text":"Lets say, I need a navbar-brand that is to long for one line, e.g.:\n\n```\n   <a class=\"navbar-brand\" href=\"#\">SommerEngineering powered by XYZ</a>\n```\n\nThen it looks ugly:\n\n![image](https://f.cloud.github.com/assets/5158645/906759/208dd79e-fcd7-11e2-899e-07444067f8a8.png)\n\nIt should possible to do it like this:\n\n![image](https://f.cloud.github.com/assets/5158645/906763/b2d6a658-fcd7-11e2-8938-d0929836ec5c.png)\n\nWhole test index.html:\n"},{"labels":[null,"enhancement"],"text":"On mobile devices you should show tabs as collapse component, not as a tab list, because you cannot show more than 2 tabs in a row on a mobile device anyway and it looks absolutely terrible.\n\nI attached a screenshot to demonstrate it. Even foundation 4 shows tabs as accordion.\n![tabs](https://f.cloud.github.com/assets/4862723/906171/98331a3a-fc77-11e2-9fb3-a0b2b74d784f.png)\n"},{"labels":[null,"enhancement"],"text":"```\n<a href=\"#\" class=\"list-group-item\">\n  <div class=\"media\">\n      <a href=\"\" class=\"pull-left\">\n         <img src=\"\">\n      </a>\n      <div class=\"media-body\">\n      </div>\n  </div>\n</a>\n```\n\nI want hover effect, but i also want nested media obejct, and it will have a tag, if `list-group-item` replace `a` tag with 'li', it will not support hover effect.  How can i do this?\n"},{"labels":[null,"enhancement"],"text":"A very long navbar with the classes: \n\n```\n.nav-collapse\n.collapse\n.navbar-responsive-collapse\n```\n\ndoes not scroll. The items that does not fit on the screen are not rendered. I am not sure if this is the intention. I think it would be nice with a 'compact' option to fit more items on the navbar.\n\n![screen shot 2013-08-02 at 14 13 46 pm](https://f.cloud.github.com/assets/557371/900727/2e225e9a-fb6d-11e2-9913-7aad0b7b195d.png)\n"},{"labels":[null,"enhancement"],"text":"Is it possible to add a <code>@font-family-weight</code> in the <code>variables.less</code> in BS3?\nMaybe it is useful also for every class\n\n```\n@font-family-sans-serif\n@font-family-serif\n@font-family-monospace\n```\n\nThere are so many times I want to use different weight such as 300\n\nThanks!\n"},{"labels":["enhancement",null],"text":"It seems to me that a non-wrapping carousel is just as popular as a wrapping one. It would be nice to have the carousel have the option to have hard stops at the end (ie - not be able to go from last one to the first one). \n\nWhile things like transitions are easy enough to tweak with the CSS that's attached to a carousel, the decision to wrap appears to be hard-coded.\n"},{"labels":[null,"enhancement"],"text":"There should be a way to mix form stylings, for example I find it handy to use the form class form-horizontal for most things, but someone I want a larger textarea and would like to have that one break out of form-horizontal and default back to the normal block styling.\n\nA way to mix block elements into form-horizontal would be very helpful.\n"},{"labels":[null,"enhancement"],"text":"At the moment column ordering is only supported with classes col-push-\\* and col-pull-_. This becomes a problem when columns have different widths on different screen sizes (classes col-_, col-sm-\\* and col-lg-*). Column ordering on different screen sizes would become much simpler with corresponding push and pull classes.\n"},{"labels":[null,null,"enhancement"],"text":"Bootstrap 2.x's fluid grid used percentage-based gutter margins for the rows/columns, which allowed for nice small nested grid layouts like so:\n\n![screenshot_84](https://f.cloud.github.com/assets/446129/890389/fe6b3cce-fa33-11e2-82c2-c99fe42267e7.png)\n\nNow that the grid gutters are fixed-width in 3.x, nesting rows/columns makes for rather ugly results within small columns, as the gutter widths end up being too large:\n\n![screenshot_83](https://f.cloud.github.com/assets/446129/890394/27dd608c-fa34-11e2-9b76-78b279a48f5f.png)\n\nI'm not going to start a debate over which grid system is better (spoiler: I like Bootstrap 2.x's system MUCH better ;) ), but here's my proposal to at least give some options to make this a little easier to customize:\n\nThe `make-row()` mixin currently uses the global `@grid-gutter-width` variable to set the margins on the row.  Likewise, the `.make-column()` mixin works the same way.  If the gutter width was a parameter to the mixins, I could (for example) make a custom condensed grid like so:\n\n```\n@condensed-gutter-width: 8px;\n.row-condensed {\n    .make-row(@condensed-gutter-width);\n    .col-lg-1 {\n        .make-column(1,@condensed-gutter-width);\n    }\n    ...\n}\n```\n\n...then when I wanted to use the condensed grid, I could just use `row-condensed` instead of `row` in my CSS.\n\nThis would be even easier with an extra mixin such as `.make-columns(@gutter-width)` to batch out all the columns at once.\n"},{"labels":[null,"enhancement"],"text":"On mobile screens the navbar is pretty big, I think it might be prudent to make a navbar-mini.\n\nHere is my proposed idea:\n\n```\n.navbar-mini { margin-bottom: 5px; min-height: 40px; padding-left: 5px; padding-right: 5px; }\n```\n\nI've been using that with great success, especially with `btn-mini`.\n"},{"labels":["enhancement",null],"text":"When using a Linked list group, the .active class doesn't apply on clicking through the links, only the first one stays active. (using bootstrap v3 RC1)\n\nmy code:\n\n```\n<div class=\"row\">\n  <div class=\"col-lg-3\">\n    <div class=\"list-group\">\n      <a class=\"list-group-item active\" href=\" #pane1\" data-toggle=\"tab\">Tab1</a>\n      <a class=\"list-group-item\" href=\"#pane2\" data-toggle=\"tab\">Tab2</a>\n      <a class=\"list-group-item\" href=\"#pane3\" data-toggle=\"tab\">Tab3</a>\n      <a class=\"list-group-item\" href=\"#pane4\" data-toggle=\"tab\">Tab4</a>\n      <a class=\"list-group-item\" href=\"#pane5\" data-toggle=\"tab\">Tab5</a>\n    </div>\n  </div>\n\n  <div class=\"col-lg-9\">\n    <div class=\"tab-content\">\n      <div class=\"tab-pane active\" id=\"pane1\">\n          <p>tab1</p>\n      </div>\n      <div class=\"tab-pane\" id=\"pane2\">\n          <p>tab2</p>\n      </div>\n      <div class=\"tab-pane\" id=\"pane3\">\n          <p>tab3</p>\n      </div>\n      <div class=\"tab-pane\" id=\"pane4\">\n          <p>tab4</p>\n      </div>\n      <div class=\"tab-pane\" id=\"pane5\">\n          <p>tab5</p>\n      </div>\n    </div>\n  </div>\n</div>\n```\n\nwhat it looks like:\n\n(clicked on tab1):\n![image](https://f.cloud.github.com/assets/5129710/888907/a3213f9e-fa15-11e2-8375-20298138479e.png)\n\n(clicked on tab5):\n![image](https://f.cloud.github.com/assets/5129710/888911/ac6bb21e-fa15-11e2-8bad-366ceae460f9.png)\n"},{"labels":[null,"enhancement",null],"text":"http://getbootstrap.com/javascript/\n\nis it possible to make it work when we swipe.\n"},{"labels":[null,"enhancement"],"text":"related to issues #8500 , #7808 , #4929 ; using `.hidden-sm` to hide span within `.nav > li > a` .  Because class is `display: block` above -sm then text wraps to new line.  Would you consider `.hidden-*` classes to be `display: inline-block` instead ?\n\nHere's a jsfiddle of the two cases - but the repercussions could be greater outside of this situation so probably needs more consideration...  http://jsfiddle.net/jholl/P86yf/\n"},{"labels":[null,"enhancement"],"text":"Good morning. I love Boostrap, and I've been using it in many projects.\n\nWith the arrival of Boostrap 3, there's a new control sizing feature in form elements, which complements button sizing (and condensed tables).\n\nSince typing the name of the class: &lt;input type=\"text\" class=\"form-control input-small\" /&gt; and &lt;button type=\"button\" class=\"btn btn-primary btn-small\"&gt;&lt;/small&gt; 30 times in a form looks repetitive, perhaps a class in the parent (or the global container) would make things faster for HTML coders.\n(And would decrease page size)\n\nFor example:\n&lt;div class=\"container size-medium\"&gt;&lt;/div&gt;\n&lt;form class=\"form form-small\"&gt;&lt;/form&gt;\n\nI hope you like this idea. Regards, Donato.\n"},{"labels":[null,"enhancement"],"text":"Headings (h1, h2, h3 and the rest) don't scale on different resolutions. H1 on desktop looks ok, but on mobile device takes up a big portion of the screen. \n"},{"labels":[null,"enhancement"],"text":"I'm having a problem with tables not being responsive. The rest of the content is responsive, except for my table.\n\n```\n    <div class=\"row\">\n        <div class=\"col-lg-12\">\n            <table class=\"table table-bordered table-hover\">\n                <thead>\n                    <tr>\n                        <th><input type=\"checkbox\"/</th>\n                        <th>Title</th>\n                        <th>Content</th>\n                        <th>Date</th>\n                        <th>Author</th>\n                        <th>Category</th>\n                        <th>Keywords</th>\n                        <th><i class=\"icon-comments\"></i></th>\n                        <th>Status</th>\n                        <th>Other</th>\n                    </tr>\n                </thead>\n```\n\nIs this just my code or is it really not working?\n"},{"labels":[null,"enhancement"],"text":"Tables do not have border-radius attribute.\n\nAwesome work so far  :)\n"},{"labels":[null,"enhancement"],"text":"Right now you can only specify one breakpoint of pull/push/offset which then applies to all viewport sizes. I can't think of any situation where this would work, since most likely the entire reason I want to push/pull/offset is to deal with a specific viewport size.\n\nSuggestion: add col-sm-offset (or col-md as I suggest in #8755), col-lg-offset, col-sm-push, col-lg-push, etc. variations.\n"},{"labels":[null,null,"enhancement"],"text":"It does not appear that Bootstrap's 3.0 RC1 Retina mixin support is sufficiently flexible. We already have over 30 million 3 dppx displays, and android 4.3 already supports 4K displays with 4 dppx. Beyond that, the W3C is already going with dppx (dots per pixel) as a the naming scheme for high density displays, Retina is and will be an Apple centric term.\n\nI would suggest renaming the mixin to .img-dppx(url) and having two variables, @img-dppx-ext: \"-#.png\" and @max-img-dppx: 3;\n\nIn the documentation we should mention something around the lines of:\nBe aware that dppx optimization may lead to larger downloads on mobile devices. It is recommended to use heavy compression on high resolution images. That may not be an option when the image has many gradients. Use your best judgement. Dppx stands for \"dots per pixel\" and is the vendor independent term for Apple's Retina displays, as well as denser displays.\n\n3x dppx devices:\nHTC One, Samsung Galaxy S4, HTC Droid DNA, Sony Xperia Z, LG Optimus G Pro, Oppo find 5, HTC Butterfly\n\nReferences:\nhttp://www.w3.org/blog/CSS/2012/06/14/unprefix-webkit-device-pixel-ratio/\nhttp://phandroid.com/2013/07/03/samsung-galaxy-s4-sales-2/\n"},{"labels":[null,"enhancement"],"text":"It would be useful to provide column push and pull classes for all three different grids.\n\nThis means that `.col-push-*` and `.col-pull-*` only affect the mobile grid and are joined by `.col-push-sm-*`, `.col-pull-sm-*` and `.col-push-lg-*`, `.col-pull-lg-*` to control the column order differently depending on the grid in use.\n\nSummary: Allow for different column reordering in different grids.\n"},{"labels":[null,"enhancement"],"text":"So I have a \"navbar navbar-fixed-top\" in my website and I added of course:\nbody { padding-top: 70px; }\n\nI don't use the Responsive layout for it!\n\nIt looks like that for screen >768px\n![screen shot 2013-07-29 at 8 40 00 pm](https://f.cloud.github.com/assets/695120/870973/adfafe86-f83b-11e2-945a-c6fcdfa9bee7.png)\n\nAnd like that for screen<768px (I use .hidden-phone to hide the text)\n![screen shot 2013-07-29 at 8 43 43 pm](https://f.cloud.github.com/assets/695120/870989/0b3aae70-f83c-11e2-8790-53104f8aec67.png)\n\nBut with Bootstrap3, I can't anymore keep my navbar just as a single row.\n\nOn screen>768px everything is OK\n![screen shot 2013-07-29 at 8 47 35 pm](https://f.cloud.github.com/assets/695120/871001/6a68bd7e-f83c-11e2-89f1-4848e481cfba.png)\n\nBut on screen<768px it is broken due to the static \"padding-top: 70px;\" on body\n![screen shot 2013-07-29 at 8 49 29 pm](https://f.cloud.github.com/assets/695120/871006/96ce3f38-f83c-11e2-957c-46213af90069.png)\n\nShould be great to be able to disabled the navbar mobile layout (screen<768px) in some way...\n"},{"labels":[null,"enhancement"],"text":"Currently (3.0.0 RC1), `.btn` has a 8px top / bottom padding, whereas `.alert` has 10px. Using the same value for both of them would allow a nice visual effect :\n\n![Example](http://www.clipular.com/c?11838025=EJc1zPDjNRrVO6Ob3SEkQ1Vgfu4&f=.png)\n"},{"labels":[null,null,"enhancement"],"text":"I got ~~some degree of~~ confirmation about these plans ~~in passing while conversing with~~ from @mdo, but I think it'd be good to start getting the word out publicly so that all the current users who find the new default \"plain\" look too \"flat\"-like (* _raises hand_ *) don't up and rage-quit Bootstrap v3. There are also some decisions about the theme that might be useful to get feedback on.\n\nTo reiterate why this isn't the default styling for BS v3, let me quote @mdo in a recent issue:\n\n> The intention is to enable easier overrides and customization for folks who treat Bootstrap as a first-step, not an end solution.\n\nThe choice was based on pragmatic considerations, not flat-vs-skeuomorphic design ideology (as some seem to have misinterpreted the decision). It's simply that fancy gradients make things harder to further customize heavily compared to plain solid colors.\n\nCaveats:\n- Just getting \"plain\" v3.0.0 fully polished and out the door is going to take a lot of effort, so it's possible/likely that this theme might not get made until some time after the release of v3.0.0-final.\n- These plans are not finalized. @mdo could change his mind.\n"},{"labels":[null,"enhancement"],"text":"Add .png support to 3.0 either through optional less file or add on.\n"},{"labels":[null,"enhancement"],"text":"When doing like the example :\n\n`<ul class=\"nav navbar-nav\">\n  <li class=\"active\"><a href=\"#\">Home</a></li>\n  <li><a href=\"#\">Link</a></li>\n  <li class=\"disabled\"><a href=\"#\">Disabled</a></li>\n</ul>`\n\nas soon as I enter nav-justified to the ul it just explodes :D\n"},{"labels":[null,null,"enhancement"],"text":"I see that in TB3 you've finally made modals scrollable which is great. But one thing I noticed is that they're centered with left: 50% and negative margin.\n\nIs there any particular reason why you didn't go with \n\n``` css\nmargin-left: auto;\nmargin-right: auto;\n```\n\nAs it's simpler and the modal will always be centered without any additional JS in case your modal changes in size.\n\nPinterest.com have auto for the side margins. \n"},{"labels":[null,"enhancement"],"text":"At first, I loved the RC 1, great work guys!\n\nWhat about remove <code>.accordion*</code> of the code?\nIts quite similar to <code>.panels</code> visualy, but <code>.panels</code> has a more appropriate name. \"A panel could be a accordion, but a accordion is just a accordion\".\n"},{"labels":[null,null,"enhancement"],"text":"It would be great to declare styles for some for come of the color variables so you could also more easily use them in other ways such as in WordPress content.  What does everyone think?  Ex\n\n@brand-primary:         #428bca;\n.brand-primary{    color: @brand-primary; }\n@brand-success:         #5cb85c;\n.brand-success{    color: @brand-success; }\n\nThen when needed you could just add the .brand-primary,etc class to certain items.\n"},{"labels":[null,"enhancement",null],"text":"To avoid bug reports like #8547 (and having been confused for a minute myself when accidentally forgetting to include jQuery a couple times; Chrome's built-in `$` in the debug console really doesn't help), I'd like to suggest including a tiny bit of JS (in the combined `bootstrap.js` only) along the lines of:\n\n``` js\nif (!jQuery) {\n    throw new Error(\"Bootstrap's JavaScript requires jQuery, but jQuery isn't loaded.\");\n}\n```\n\nto make the error perfectly clear and apparent.\n"},{"labels":[null,"enhancement",null],"text":"It seems that adding a new prototype method to Modal to deal with special exceptions for `enforceFocus` would be handy in avoiding situations like zeroclipboard/ZeroClipboard#159.\n\njQuery UI has a similar extension point for their modal dialog, called `_allowInteraction`; see zeroclipboard/ZeroClipboard#179.\n"},{"labels":["enhancement",null],"text":"With the launch of v3 and the new org, we should formalize the node packages that are out there and ensure they're kept up to date. No idea what this would take, but I'm making a note of it here so we tackle it soon. These two seem like the most popular, Less and Sass versions:\n\n**Bootstrap:** https://npmjs.org/package/twitter-bootstrap\n**Sass port:** https://npmjs.org/package/bootstrap-sass\n\nLet me know if folks think of any other ports, packages, add-ons, etc that could use formalizing (aside from Sass).\n"},{"labels":[null,"enhancement",null],"text":"X-Ref: #2539\n"},{"labels":[null,"enhancement",null],"text":"Since Bootstrap currently supports 12 jQuery plugins (and potentially more), it would make a lot of sense if all of the plugins were put under one namespace on the jQuery prototype to avoid possible naming collisions.\n\nSo instead of this:\n\n``` javascript\n$('.example').modal();\n$('.someOtherElem').tooltip();\n```\n\nit would change to this:\n\n``` javascript\n$('.example').bootstrap().modal();\n$('.someOtherElem').bootstrap().tooltip();\n```\n\nI just created a small (300 line) library that provides this support (and many other features) in case you want to check it out:  https://github.com/gfranko/jqfactory\n"},{"labels":[null,"enhancement"],"text":"hi\nplease provide capability  of defining css namespace for all css and js that render html or use classes for example:\nchange class name for modal\n\n.modal-header \nto\n.ns-modal-header\n\nfor inner example user can define namespace class for widgets in your site:     Customize section\n\nthen user can change the ns to unique name to preventing css name conflict with his css files.\n"},{"labels":["enhancement",null],"text":"I believe that moving forward scrollspy should not require the folliwng\n\n`Heads up! Navbar links must have resolvable id targets. For example, a <a href=\"#home\">home</a> must correspond to something in the dom like <div id=\"home\"></div>.`\n\nWhen you work with something like facebook's react that's not possible. I have a workaround for this but it's not very clean. This might not be priority but it would improve usability of this plugin.\n"},{"labels":[null,"enhancement"],"text":"I am trying to use bootstrap to implement a mobile app interface using HTML5/CSS/JavaScript and have worked through some basic tutorials and explanations of the bootstrap system and its components.\n\nI downloaded the bootstrap files from the bootstrap site from the custom link: http://twitter.github.io/bootstrap/customize.html\n\nI then created an index page with the following things:\n\n-A full width single column layout\n\n-Simple responsive menu with three links and a title placeholder for the app name.\n\n-6 buttons\n\nI added only the following CSS to a css/style.css i created:\n\n``` css\nbody {\n    padding-left:0px;\n    padding-right:0px;\n}\n\n.action-button{\n    background-color:black;\n    height:50px;\n    float:left;\n    border-bottom: 1px;\n    border-color:white;\n} \n\n#action-button-container button{\n    width:100%;\n}\n\n#action-button-container{\n    width:100%;\n}\n```\n\nI tested it a lot while I was making it using the Mozilla responsive view feature and it was working just fine and was beginning to resemble a wire frame of what I wanted it to look like. Then I tried uploading it to:\n\nhttp://www.risepm.co.nz/phoneapp/\n\nAnd when I looked on my Galaxy S3 it looks like its showing the desktop view...\n\nI found some people suggesting to include the following in their page:\n\n``` html\n <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n```\n\nBut I already had that...\n\nAny help would be great.\n\nLink to live example:\n\nwww.risepm.co.nz/phoneapp/index.html\n"},{"labels":[null,"enhancement"],"text":"I am a big user of `.form-horizontal` `<form>`s. They allow me to beautifully present slightly longer forms in a table-like visual structure.\n\nA common pattern that I use is that I would like to present static/constant data within my form. A use case is that I have an account page where I don't allow changing the username, but would allow the user to change the password. Other examples are database ID:s, UUID:s etc. My guess that this is also a common use case for other Bootstrap users.\n\nOne solution to overcome the above issue would be to simply set `disabled=\"disabled\"` or `readonly=\"readonly\"`. My issue with these solutions is twofold:\n- By the look of them, they both hint to my user that there is a way to edit the username. They both kinda look like input boxes, but are grayed out and inmodifiable.\n- As of semantics, they are both contained in `<input>` tags. As a developer, it feels weird putting constants in `<input>` tags. They are clearly not input.\n\nAnother possible solution (modified from the documentation) is\n\n``` html\n<form class=\"bs-docs-example form-horizontal\">\n  <div class=\"control-group\">\n    <label class=\"control-label\" for=\"inputUsername\">Username</label>\n    <div class=\"controls\">\n      JensRantil\n    </div>\n  </div>\n  <div class=\"control-group\">\n    <label class=\"control-label\" for=\"inputPassword\">Password</label>\n    <div class=\"controls\">\n      <input type=\"password\" id=\"inputPassword\" placeholder=\"Password\">\n    </div>\n  </div>\n  <div class=\"control-group\">\n    <div class=\"controls\">\n      <label class=\"checkbox\">\n        <input type=\"checkbox\"> Remember me\n      </label>\n      <button type=\"submit\" class=\"btn\">Sign in</button>\n    </div>\n  </div>\n</form>\n```\n\nwhich yields\n\n![screenshot3](https://f.cloud.github.com/assets/730342/642297/45856248-d355-11e2-8937-37c72555edb4.png)\n. As you can see, `form.form-horizontal` has artefacts for constant text.\n\nI've been visiting reading the [W3C spec for `disabled`/`readonly`](http://www.w3.org/TR/html4/interact/forms.html#h-17.12) to understand their semantic intent, but the description is very technical. So far, I haven't understood whether any of them should cover my case.\n\nIf `disabled` is for the case of presenting constants, then I would propose Boostrap would style `input:disabled` as regular text without borders etc. However since I can't defer that from the spec, **my proposal is a class that avoids the artefact in the screenshot, a `.controls.controls-static` class with correct margin.**.\n\nI'd love to hear your input on this.\n"},{"labels":["enhancement",null],"text":"Please see following demo image, when text is too short, popover's arrow should be correctly adjusted to point to the center of the label.\n- image\n  http://cl.ly/image/0W38012y3K1H\n\nI've created a simple fix for that, but it's doing from outside of the plugin, would be great if it's integrated into the plugin itself, please see it here:\n- sample code\n  https://gist.github.com/coodoo/5667953\n"},{"labels":[null,"enhancement"],"text":"Any reason why this selector isn't included in forms.less?\n"},{"labels":["enhancement",null],"text":"I ran into the following issue when trying to use bootstrap's popover. The element that triggers the popover is close to the right border of the window, which causes the popover to extend off the screen.\n\n![image](https://f.cloud.github.com/assets/1044882/432972/b3c5b592-aeb5-11e2-972c-d2ff825a658a.png)\n\nI managed to fix this issue by adding the following piece of code, to where the positioning calculation is done:\n\n``` javascript\nif (tp.left + actualWidth > $(document).outerWidth()) {\n    tp.left = ($(this.options.container).offset().left + $(this.options.container).outerWidth()) - actualWidth;\n    $tip.children(\".arrow\").css(\"left\", this.$element.offset().left - tp.left + (this.$element.width() / 2));\n}\n```\n\nThis seems to work for bottom and top placements. For left and right placements, you will need to use a slight variation:\n\n``` javascript\nif (tp.top < 0) {\n    tp.top = $(this.options.container).offset().top;\n    $tip.children(\".arrow\").css(\"top\", this.$element.offset().top - tp.top + (this.$element.height() / 2));\n}\n```\n\nHere is the end result, notice how the popover is now all contained inside the window:\n\n![image](https://f.cloud.github.com/assets/1044882/432977/f19c5088-aeb5-11e2-8bf1-77d01a0a774e.png)\n\nI'm really interested in hearing opinions on whether this is the right fix for this issue. I would also like to see this being addressed in the next version of bootstrap.\n"},{"labels":["enhancement",null],"text":"For the upcoming version, there should be an event API for (almost) all JS plugins, so they can be easily extended, without having to redefine internal functions.\n\nFor example, I wanted the tooltip plugin to show manually upon click on each position the user clicked on a canvas element. But, for this I had to redefine an internal function (because there is currently no 'show' or 'shown' events), in order to recalculate the position of the tooltip to be placed inside the element. It would be better if through a parameter object I could modify the (top, left) variables for the onshow function.\n"},{"labels":[null,"enhancement"],"text":"The alert types can be customized with alert-info, alert-sucess, alert-error and alert-danger corresponding to resp. blue, green, red, red alert boxes.\n\nPlease add an explicit warn style alert-warn.\nNote that this would correspond to the default orange alert.\n\nThe reason I'm asking is, from my backend I'm providing the alert-type (like error, warn, info) and in case if it's not provided it will fall back to info.\nIf there would be an alert-warn I could easily do something like `alert-<% the type %>` in my html page.\n"},{"labels":[null,"enhancement"],"text":"Aria attributes are used in source of the documentation but are not showed in displayed code source. I think a some dev do not check the HTML code, but just read the doc.\n\nFor example http://twitter.github.io/bootstrap/javascript.html#modals .\n"},{"labels":[null,"enhancement"],"text":"I'm currently tweaking Bootstrap 2.3 in my app so that tabs (\"nav nav-tabs\") switch to being stacked tabs (\"nav nav-tabs nav-stacked\") at phone sizes (<480px), because it looks much better that way if your tabs are long enough to line wrap.\n\nSince Bootstrap 3 is \"mobile first\", I thought that you might want to consider that as the default behavior, with an opt-out class for those that want their tabs to remain in either of the two states permanently (for example if you know your tab content ahead of time is going to be very narrow, just icons perhaps).\n\nSimilar may apply to other related navs, I've used them less so I don't have a firm opinion.\n"},{"labels":[null,"enhancement"],"text":"A simple fix for this (v2.2.2):\n\nAdd:\n\n``` css\n// Custom edits for including btn-groups within btn-groups (useful for including dropdown buttons within a btn-group)\n.btn-group > .btn-group > .btn.dropdown-toggle {\n  margin-left: 0;\n  .border-radius(0);\n}\n.btn-group > .btn-group:last-child > .btn.dropdown-toggle {\n  margin-left: 0;\n  .border-top-right-radius(@baseBorderRadius);\n  .border-bottom-right-radius(@baseBorderRadius);\n  border-left: 1px;\n}\n.btn-group > .btn-group:first-child > .btn.dropdown-toggle {\n  margin-left: 0;\n  .border-top-left-radius(@baseBorderRadius);\n  .border-bottom-left-radius(@baseBorderRadius);\n  border-right:1px;\n}\n```\n\nto your button-groups.less and recompile.\n\nThis will allow you to nest a btn-group within a btn-group such as: (for example a btn-dropdown inside a group)\n\n``` html\n<div class=\"btn-group\">\n   <a href=\"#\" class=\"btn\"><i class=\"icon icon-pencil\"></i></a>\n   <button class=\"btn\"><i class=\"icon icon-remove\"></i></button>\n   <div class=\"btn-group\">\n      <a class=\"btn dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">\n         <i class=\"icon icon-cog\"></i> \n         <span class=\"caret\"></span>\n       </a>\n       <ul class=\"dropdown-menu\">\n          <li><a href=\"#\">new</a></li>\n          <li><a href=\"#\">shipped</a></li>\n          <li><a href=\"#\">canceled</a></li>\n       </ul>\n   </div>\n</div>\n```\n\nThe LESS overrides are not all inclusive (does not include different button sizes for example), but is a good starting point, which is all I needed to come up with for now.\n\nHope this helps someone.\n"},{"labels":[null,"enhancement"],"text":"In [type.less](https://github.com/twitter/bootstrap/blob/master/less/type.less#L119), I've found it would be useful for the **unstyled** and **inline** to be mixins, rather than developers having to reimplement such things when using LESS. \n\nFor example, I'm styling a horizontal navigation bar but I have to reimplement the stylings of **ul.inline** from _type.less_ into my LESS file, which could easily be replaced with a mixin.\n"},{"labels":["enhancement",null],"text":"It would be great to be able to specify the position of typeahead's result container.\nAt least be able to position on the top of the input.\nThat can be useful if the input is positioned on the bottom of the page.\n"},{"labels":["enhancement",null],"text":"Carousel Indicators should populate automatically depending on carousel items\nwhen .carousel item has a data attribute something like:\n\n``` html\n<div id=\"myCarousel\" class=\"carousel slide\" data-show-indicators=\"true\">\n...\n</div>\n```\n\nReason why I'm requesting is when I tried to append new carousel-item to carousel **dynamically** by using:\n\n``` js\nvar new_item = \"<div class='item'> \\\n        <img alt='' src='assets/img/bootstrap-mdo-sfmoma-01.jpg'> \\\n        <div class='carousel-caption'> \\\n            <h4>First Thumbnail label</h4> \\\n            <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> \\\n        </div> \\\n    </div>\";\n\njQuery('#myCarousel').find('.carousel-inner').append(new_item);\n```\n\nthen it works for carousel item but indicator count doesn't increases.\n"},{"labels":[null,"enhancement"],"text":"Would you consider adding a component that is not a well, thumbnail, or modal, but something in between? Especially with Modal dropping the .hide class in v3 I see a great need. For example, take a look here on GitHub at the ReadMe box. It has similarities to a modal in that it has a heading and sits \"above\" the page a bit. Another example is the \"example\" boxes here in the v2 docs.\n\nOf course, thumbnail is inappropriate, and well loses importance to some degree. The generic term \"widget\" is the best name I can come up with, but there's probably a better term without quite the stigma.\n\nI'd be more than happy to add a pull request if that helps.\n\nThanks for all the hard work!\n"},{"labels":["enhancement",null],"text":"It would be nice if .alert element keeps a property of auto dismiss time out. So, that .alert item will disappear in given time without writing extra code for dismiss or get user input.\n\n``` html\n<div class=\"alert\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n    <strong>Warning!</strong> Best check your self, you're not looking too good.\n</div>\n```\n\nShould be customizable by jQ plugin or just by adding an extra attribute to button element. Like\n\n``` html\n...\n<button type=\"button\" class=\"close\" data-dismiss=\"alert\" data-auto-dismiss=\"5\">&times;</button>\n...\n```\n\nAbove attribute value for `data-auto-dismiss` could be in sec or what ever more appropriate than sec.\n"},{"labels":[null,"enhancement"],"text":"I myself sometimes need an alertbox which appears to be inactive and disabled, so I suggest we create an \"alert alert-inverse\", which will be somewhat similar to \"well\", but without inner shadows, etc.\n\nBorders and gradients inside should be as for other alerts, but in a grayscale.\n"},{"labels":["enhancement",null],"text":"Hello\n\nI've been struggling with this problem - the lack of destroy method, especially for Carousel - for a few evenings now. At first I tried to solve it from the outside of the plugins, in the script calling the plugins, trying to remove all elements, data, and events, that the plugins attach but with no luck (always at runtime some errors occur). \n\nThis evening, when I took a look inside boostrap.js., I have noticed, that most event handlers are attached without a namespace. This makes it difficult to track and unbind all events, that the plugins are attaching. \n\nWhy the need for destroy method? In my case I want some plugins (especially Carousel) to switch on and off, depending on the size of the window (on for wide window, off for narrow window). The state should be updated as the user resizes the window. And I don't want the running in background when they are not needed.\n\nFor the time being, I guess I will rewrite a bit my copy of bootstrap.js, adding the namespaces to event attachments, and some simple destroy, but I would appreciate if this feature would be available by default.\n\nRegards\nOliwer\n"},{"labels":["enhancement",null],"text":"Since https://github.com/twitter/bootstrap/pull/6380 the recommendation has been to use `data-toggle=\"tooltip\"` and `data-toggle=\"popover\"`, alongside the existing `data-toggle=\"modal\"` and `data-toggle=\"dropdown\"` attributes, which is a good idea.\n\nHowever, sometimes you might want to show a tooltip on a button which also toggles a modal or a dropdown. \n\nIt's not possible to use multiple data-toggle attributes on the same node, and `[data-toggle=modal]` doesn't match `data-toggle=\"tooltip modal\"`.\n\nPossibilities:\n- Use the ~= selector, which matches one of a set of space-separated attributes: `[data-toggle~=modal]`\n- Use separate \"data-toggle-tooltip\", \"data-toggle-popover\", \"data-toggle-modal\", \"data-toggle-dropdown\" attributes.\n"},{"labels":["enhancement"],"text":"Might possibly be worth using some ideas from [Hint.css](http://kushagragour.in/lab/hint/) in v3's tooltips.\n"},{"labels":["enhancement",null],"text":"When a typeahead control's source requires an API hit, it could be some significant amount of time -- I'd say even just a half second is enough to be considered significant -- before results are displayed. It would be nice if there were a throbber displayed over top of the input. Maybe something like this:\n\n![](http://i.imgur.com/1YPBhap.png)\n\nOf course you'd want to be able to enable/disable the feature (off by default).\n"},{"labels":["enhancement"],"text":"When a large set of tabs that displays fine on desktop/tablet resolution gets compressed down to a smartphone resolution, they flow over onto the space below producing an ugly set of stacked tabs.\n\nWhat would be really nice is on such constrained displays, that the tab list becomes horizontally scrollable or vertically scrollable if the tab list is vertically oriented\n\nSome screenshots to better explain\n\nWhat currently happens\n\n![current-tabs](https://f.cloud.github.com/assets/563860/117067/e8b8420a-6c1c-11e2-90be-33dea681e35d.png)\n\nWhat we'd like to happen\n\n![desired-tabs](https://f.cloud.github.com/assets/563860/117068/ed69ecfe-6c1c-11e2-99c8-6bbfb0cbd2c8.png)\n"},{"labels":["enhancement",null],"text":"It would be really nice if the we could get access to the actual popover DOM element or selector (the one with class=popover) that is generated by calling `$('button').popover('show');` \n\nA way to do this might be to have `popover()` return the popover selector. This would allow assigning of this jQuery object to a variable which could have a variety of uses as well as enable better management of multiple popovers on the same page.\n\nThe use case I'm immediately interested in is to only allow closing of the popover if one clicks anywhere on the document **except** on the popover itself :\n\n```\n$('button').click(function(){\n  var $this=$(this),\n  $obj=$(this).popover('show');\n  $(document).not($obj).one('click',  function(){\n     $this.popover('hide');\n  });\n}); \n```\n"},{"labels":["enhancement",null],"text":"Would be great if all the plugins had a destroy method that unbinds event listeners / removes el.data (see  [tooltip.destroy](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-tooltip.js#L243)).\n\nOtherwise there's no way to ensure they will be garbage collected in single page / long running apps.\n"},{"labels":["enhancement",null],"text":"I have a use case where it would be very helpful to know exactly what event triggered the modal to close. Was it the escape key, the backdrop click, a Cancel button, the little \"x\", or something else?\n\nI have a function which responds to the \"hide\" trigger, but looking at the event that's passed, it doesn't seem like there's any indication what was clicked or typed. Is there something I'm not seeing, or is this not possible?\n\nThanks!\n"},{"labels":["enhancement",null],"text":"I think it's really useful if there's the option to add a classname to an active accordion group, especially if you need to add an icon on it like on jquery-ui.\n\nThanks  :)\n"},{"labels":[null,"enhancement"],"text":"Congrats on the 2.2.2 release and thanks to everyone that contributes.\n\nNow that print css is included, what are your thoughts on adding responsive print utility classes? Easy enough to add to our individual projects but it may round out the printing features in bootstrap.\n\nMaybe something like\n\n``` css\n.visible-print {\n    display: none !important;\n}\n\n@media print {\n    .visible-print {\n        display: inherit !important;\n    }\n\n    .hidden-print {\n        display: none !important;\n    }\n}\n```\n"},{"labels":["enhancement",null],"text":"When several elements have the same `data-target` there is no way to determine the trigger source from the `shown` callback function.\n"},{"labels":["enhancement",null],"text":"As well as specifying top, right, bottom and left, it would also be useful to be able to specify top-right, top-left, right-top, right-bottom, bottom-right, bottom-left, left-top and left-bottom. Without these options, tooltips/popovers added to elements in the corner of the window will overlap the window itself (in some way or another).\n\nHere's an example of bottom-right (which could be used to add a tooltip/popover to an element that is in the top left corner:\n\nhttp://jsfiddle.net/fZTm4/3/\n"},{"labels":["enhancement",null],"text":"I work with lots of ajax loaded content, and sometimes when i close an ajax loaded content (in a window) the tooltip stays and i'm unable to close it. It should disappear or have a close onclick event by default.\n\nAdded demonstration of the issue link :\nhttp://mondialdeal.com/tooltip-demo.php\n"},{"labels":["enhancement",null],"text":"<code>\n$(\".reply\").popover({\ncontent:'Loading...',\nplacement:'bottom',\n });\n\n$(\".reply\").popover(\"toggle\");\n</code>\nwhich created the popover and its content correctly. I want to load the data  into the popover without closing the popover..\n\nI tried the following\n<code>\nvar thisVal=$(this);\n$.ajax({\n  type:\"POST\",\n  async:false,\n  url:\"Getdes\",\n  data:{id:ID}\n}).success(function(data)\n{\n   thisVal.attr('data-content',data);\n  thisVal.popover({placement:'bottom'});\n});\n</code>\nAfter this call the data in the element is changed and  consecutive hover in these elements displays the chnged content correctly  but not in the popover which is shown ... How should i do this.....\n"},{"labels":["enhancement",null],"text":"Please set the focus to the inpput field again, after the item was inserted.\n\nSpecially if multiple elements are allowed, it would be really useful\n"},{"labels":["enhancement",null],"text":"I was just experimenting with bower and i think it would be cool if all the bootstrap javascript would be available separate on bower and then you can add a dependency from the bootstrap project to all of the javascript files.\n"},{"labels":[null,"enhancement"],"text":"In particular, there is no way to disable transitions. I would expect the following override class works, but it does not.\n\n@media (max-width: 767px) { \n    .no-transition {\n      -webkit-transition: none;\n         -moz-transition: none;\n              transition: none;\n    }\n}\n"},{"labels":["enhancement",null],"text":"Would it be possible to add an event for Modals that fires once the dynamic content has finished loading?\n"},{"labels":["enhancement",null],"text":"Sometimes Popover content needs to have its own events, and since Popover code is changed to use .detach() instead of .remove()—this additional feature will enable setting Popover contents with already bound events. \n\nFor example this feature will enable setting Backbone.View as Popover's content, but I'm sure there are plenty of other use cases.\n"},{"labels":["enhancement",null],"text":"Currently, the 'remote' option allows only to load the body of the modal.\nit would be useful to be able to load both the title, content and footer of the modal.\na proposal: simply return a JSON object {header: ... body: ... footer ...} in place of html to supply each part of the modal.\nIf HTML is returned, then continue as now, and if it's JSON, retrieve footer, header and body.\nthx.\nJef\n"},{"labels":[null,"enhancement"],"text":"Are there any plans to add orientation to the responsive utility classes? \n"},{"labels":["enhancement",null],"text":"It would be nice if the typeahead component would allow a map source with a key/label values.\nIn this case the the label is used for the typeahead and displaying the value in the typeahead box, but the actual value submitted within a form would be the key.\n\nIn case no map is provided, but just an array - the values would act both as key and label as it works now as well.\n"},{"labels":["enhancement",null],"text":"Render function searches for anchor tag to update html, but if \"item\" option is overwriten by an element without an anchor tag (eg: &lt;li&gt;), then the element is not rendered.\n\n```\n, render: function (items) {\n    var that = this\n\n    items = $(items).map(function (i, item) {\n      i = $(that.options.item).attr('data-value', item)\n      i.find('a').html(that.highlighter(item))\n      return i[0]\n    })\n    ...\n```\n"},{"labels":[null,"enhancement"],"text":"It would be great to have static bottom nav similar to navbar-static-top, which scrolls sideways.\nCurrently there is navbar-fixed-bottom only.\nThe reason why we need this is because when content doesn't fit height, navbar-fixed-bottom overlaps it, see screenshot:\nhttp://i1304.photobucket.com/albums/s528/Vladimir_Shyshov/ScreenShot2012-10-16at52014PM_zpsa0766e23.png\n\nShould be:\nhttp://i1304.photobucket.com/albums/s528/Vladimir_Shyshov/ScreenShot2012-10-16at52104PM_zpsc464e1d3.png\n"},{"labels":[null,"enhancement"],"text":"One of the things I really miss coming from Foundation is their Mobile Grid utility classes.\n\nhttp://foundation.zurb.com/docs/grid.php\n\nIs there a way to do this currently with Twitter Bootstrap?\n\nIf not, could something similar be added?\n"},{"labels":["enhancement"],"text":"Hi,\n\nFor a project, I have created a Wizard plugin (the breacrumber is inspired from http://jsfiddle.net/weswinham/ySfN6/).\n\nIf you want, you can integrate it.\n\nCheers\n\n---\n\nCSS:\n\n<pre><code>\n@CHARSET \"UTF-8\";\n\n.wizard {\n    background-color: white;\n}\n\n.wizard-header a {\n    padding: 10px 12px 10px;\n    margin-right: 5px;\n    background: #efefef;\n    position: relative;\n    display: inline-block;\n}\n\n.wizard-header a:before {\n    width: 0;\n    height: 0;\n    border-top: 20px inset transparent;\n    border-bottom: 20px inset transparent;\n    border-left: 20px solid #fff;\n    position: absolute;\n    content: \"\";\n    top: 0;\n    left: 0;\n}\n\n.wizard-header a:after {\n    width: 0;\n    height: 0;\n    border-top: 20px inset transparent;\n    border-bottom: 20px inset transparent;\n    border-left: 20px solid #efefef;\n    position: absolute;\n    content: \"\";\n    top: 0;\n    right: -20px;\n    z-index: 2;\n}\n\n.wizard-header a:first-child:before,\n.wizard-header a:last-child:after {\n    border: none;\n}\n\n.wizard-header a:first-child {\n    -webkit-border-radius: 4px 0 0 4px;\n    -moz-border-radius: 4px 0 0 4px;\n     border-radius: 4px 0 0 4px;\n}\n\n.wizard-header a:last-child {\n    -webkit-border-radius: 0 4px 4px 0;\n    -moz-border-radius: 0 4px 4px 0;\n    border-radius: 0 4px 4px 0;\n}\n\n.wizard-header .badge {\n    margin: 0 5px 0 18px;\n    position: relative;\n    top: -1px;\n}\n\n.wizard-header a:first-child .badge {\n    margin-left: 0;\n}\n\n.wizard-header .active {\n    background: #007ACC;\n    color: #fff;\n}\n\n.wizard-header .active:after {\n    border-left-color: #007ACC;\n}\n</code></pre>\n\n---\n\nJS:\n\n<pre><code>\n/**\n * Wizard plugin for Boostrap\n * Require the carousel plugin\n * \n * An example of HTML to use it:\n * \n&lt;div id=&quot;wizard&quot; data-role=&quot;wizard&quot;&gt;\n    &lt;div class=&quot;active&quot; data-title=&quot;step 1&quot;&gt;\n        Your content\n    &lt;/div&gt;\n    \n    &lt;div data-title=&quot;step 2&quot;&gt;\n        Your content\n    &lt;/div&gt;\n&lt;/div&gt;\n\n * \n * Another one:\n * \n &lt;div id=&quot;wizard&quot; data-role=&quot;wizard&quot;&gt;\n    &lt;div class=&quot;active&quot; data-title=&quot;step 1&quot;&gt;\n        Your content\n    &lt;/div&gt;\n    \n    &lt;div data-title=&quot;step 2&quot;&gt;\n        Your content\n    &lt;/div&gt;\n&lt;/div&gt;\n\n *\n * And an example of JavaScript:\n\n$(&quot;#wizard&quot;).wizard({\n    validNextStep: function(index) { \n        return true; \n    },\n    changeStep: function(index) {\n        alert(&quot;Step &quot; + (index + 1))\n    },\n    finish: function(event) {\n        event.preventDefault();\n        alert(&quot;Finished !&quot;)\n    }\n});\n\n */\n\n!function($) {\n    &quot;use strict&quot;;\n\n    /* WIZARD PUBLIC CLASS DEFINITION\n     * ============================== */\n\n    var Wizard = function(element, options) {\n        var self = this;\n        \n        // Base\n        this.$element = $(element);\n        this.options = $.extend({}, $.fn.wizard.defaults, options);\n        this.idx = 0;\n        this.maxIdx = 0;\n        \n        // Get some informations\n        this.$items = $(&quot;&gt; div[data-title]&quot;, this.$element);\n        this.maxIdx = this.$items.length - 1;\n        \n        // Initialization\n        this.$element.find(&quot;&gt; *&quot;).wrapAll(&quot;&lt;div class='carousel slide' data-interval='false'&gt;&lt;/div&gt;&quot;);\n        this.$element.addClass(&quot;wizard thumbnail&quot;);\n        this.$base = this.$element.find(&quot;&gt; div.carousel&quot;);\n        this.$base.carousel({ interval: false });\n        \n        if(this.$element.attr(&quot;id&quot;)){\n            this.$base.attr(&quot;id&quot;, &quot;wizard-&quot; + this.$element.attr(&quot;id&quot;));\n            \n        } else {\n            this.$base.attr(&quot;id&quot;, &quot;wizard-&quot; + new Date().getTime() + &quot;-&quot; + window.parseInt((Math.random() * 1000)));\n        }\n        \n        // Wizard header\n        this.$wizardHeader = $(&quot;&lt;div class='wizard-header'&gt;&lt;/div&gt;&quot;);\n        this.$items.each(function(index, item){\n            var $item = $(item), active = index == 0;\n            \n            $item.addClass(&quot;item&quot;);\n            active &amp;&amp; $item.addClass(&quot;active&quot;);\n            \n            self.$wizardHeader.append(&quot;&lt;a href='#'&quot; + (active ? &quot; class='active'&quot; : &quot;&quot;) + &quot; data-index='&quot; + index + &quot;'&gt;&lt;span class='badge&quot; + (active ? &quot;&quot; : &quot; badge-inverse&quot;) + &quot;'&gt;&quot; + (index + 1) + &quot;&lt;/span&gt; &quot; + $item.data(&quot;title&quot;) + &quot;&lt;/a&gt;&quot;);\n        });\n        \n        this.$base.before(this.$wizardHeader);\n        this.$base.before(&quot;&lt;br /&gt;&quot;);\n            \n        // Wizard core\n        this.$items.wrapAll(&quot;&lt;div class='carousel-inner'&gt;&lt;/div&gt;&quot;);\n        this.$base.append(&quot;&lt;br /&gt;&quot;);\n        \n        this.$previous = $(&quot;&lt;a class='btn btn-inverse' data-slide='prev'&gt;&lt;i class='icon-chevron-left icon-white'&gt;&lt;/i&gt; &quot; + this.options.previousText + &quot;&lt;/a&gt;&quot;);\n        this.$previous.attr(&quot;href&quot;, &quot;#&quot; + this.$base.attr(&quot;id&quot;));\n        this.$previous.css(&quot;visibility&quot;, &quot;hidden&quot;);\n        this.$base.append(this.$previous);\n        \n        this.$next = $(&quot;&lt;a class='btn btn-inverse' data-slide='next'&gt;&lt;i class='icon-chevron-right icon-white'&gt;&lt;/i&gt; &quot; + this.options.nextText + &quot;&lt;/a&gt;&quot;);\n        this.$next.attr(&quot;href&quot;, &quot;#&quot; + this.$base.attr(&quot;id&quot;));\n        this.$base.append(this.$next);\n        \n        this.$finish = $(&quot;&lt;button type='submit' class='btn btn-primary'&gt;&quot; + this.options.finishText + &quot;&lt;/button&gt;&quot;);\n        this.$finish.css(&quot;visibility&quot;, &quot;hidden&quot;);\n        this.$finish.on(&quot;click&quot;, this.options.finish);\n        this.$base.append(this.$finish);\n        \n        // Listeners\n        this.$wizardHeader.on(&quot;click&quot;, &quot;&gt; a&quot;, function(event){\n            event.preventDefault();\n            self.index($(this).data(&quot;index&quot;));\n        });\n        \n        this.$base.on(&quot;click&quot;, &quot;&gt; a&quot;, function(event){\n            event.preventDefault();\n            $(this).data(&quot;slide&quot;) == &quot;next&quot; ? self.next() : self.prev();\n        });\n    };\n    \n    Wizard.prototype.index = function(index){\n        if(index != null &amp;&amp; index &gt;= 0 &amp;&amp; index &lt;= this.maxIdx){\n            this.$base.carousel(index);\n            this.idx = index;\n            this.update();\n            $.isFunction(this.options.changeStep) &amp;&amp; this.options.changeStep(this.idx);\n        }\n        \n        return this.idx;\n    };\n    \n    Wizard.prototype.update = function() {\n        if(this.idx == 0){\n            this.$previous.css(&quot;visibility&quot;, &quot;hidden&quot;);\n            this.$next.css(&quot;visibility&quot;, &quot;visible&quot;);\n            this.$finish.css(&quot;visibility&quot;, &quot;hidden&quot;);\n            \n        } else if(this.idx == this.maxIdx){\n            this.$previous.css(&quot;visibility&quot;, &quot;visible&quot;);\n            this.$next.css(&quot;visibility&quot;, &quot;hidden&quot;);\n            this.$finish.css(&quot;visibility&quot;, &quot;visible&quot;);\n            \n        } else {\n            this.$previous.css(&quot;visibility&quot;, &quot;visible&quot;);\n            this.$next.css(&quot;visibility&quot;, &quot;visible&quot;);\n            this.$finish.css(&quot;visibility&quot;, &quot;hidden&quot;);\n        }\n        \n        $(&quot;.active&quot;, this.$wizardHeader).removeClass(&quot;active&quot;);\n        $(&quot;a:eq(&quot; + this.idx + &quot;)&quot;, this.$wizardHeader).addClass(&quot;active&quot;);\n    };\n\n    Wizard.prototype.prev = function() {\n        if(this.idx &gt; 0){\n            this.$base.carousel(&quot;prev&quot;);\n            this.idx--;\n            this.update();\n            $.isFunction(this.options.changeStep) &amp;&amp; this.options.changeStep(this.idx);\n        }\n        \n    };\n    \n    Wizard.prototype.next = function() {\n        if(this.idx &lt;= this.maxIdx &amp;&amp; this.options.validNextStep(this.idx)){\n            this.$base.carousel(&quot;next&quot;);\n            this.idx++;\n            this.update();\n            $.isFunction(this.options.changeStep) &amp;&amp; this.options.changeStep(this.idx);\n        }\n    };\n    \n    Wizard.prototype.option = function(options){\n        for(var i in options) {\n            switch(i){\n                case &quot;nextText&quot;:\n                    this.$next.text(options[i]);\n                    \n                case &quot;previousText&quot;:\n                    this.$previous.text(options[i]);\n                    \n                case &quot;finishText&quot;:\n                    this.$finish.text(options[i]);\n                    \n                case &quot;finish&quot;:\n                    this.$finish.off(&quot;click&quot;, this.options.finish);\n                    this.$finish.on(&quot;click&quot;, options[i]);\n            \n                default:\n                    this.options[i] = options[i];\n                    break;\n            }\n        }\n    };\n\n    /* WIZARD PLUGIN DEFINITION\n     * ======================== */\n\n    $.fn.wizard = function(opts) {\n        return this.each(function() {\n            var $this = $(this), data = $this.data(&quot;wizard&quot;), options = typeof opts == &quot;object&quot; &amp;&amp; opts;\n            \n            if(data){\n                data.option(options)\n                \n            } else {\n                $this.data(&quot;wizard&quot;, new $.fn.wizard.Constructor(this, options));\n            }\n            \n        });\n    };\n\n    $.fn.wizard.defaults = {\n        nextText: &quot;Next&quot;,\n        previousText: &quot;Previous&quot;,\n        finishText: &quot;Finish&quot;,\n        validNextStep: function(index) { return true; },\n        changeStep: function(index) {},\n        finish: function(event) {}\n    };\n\n    $.fn.wizard.Constructor = Wizard;\n\n    /* WIZARD DATA-API\n     * =============== */\n\n    $(function() {\n        $(&quot;body&quot;).find(&quot;div[data-role=wizard], div.wizard&quot;).wizard();\n    });\n\n}(window.jQuery);\n</code></pre>\n"},{"labels":[null,"enhancement"],"text":"Would it be more in keeping if .label and .badge inherited their font size and line-height. It would make them more versatile, e.g. used with headings and .lead.\n\nIn or out?\n"},{"labels":[null,"enhancement"],"text":"There seems to be a decent amount of demand to scroll very long table bodies. See http://stackoverflow.com/questions/10420168/twitter-bootstrap-scrollable-table, http://stackoverflow.com/questions/130564/i-need-my-html-tables-body-to-scroll-and-its-head-to-stay-put, http://stackoverflow.com/questions/1019938/make-tbody-scrollable-in-webkit-browsers, etc.\n\nSolutions have been developed, but making this functionality a part of Bootstrap would be very powerful and would help novices like me keep the nice Bootstrap table styling you already make available.\n\nBTW: the most legitimate use-case for this would be a table with many records, and the user has to click the radio button for one of the records then scroll all the way down on a page to get to the submit button.\n"},{"labels":["enhancement"],"text":"I think most people would agree that after fixing the modals, the next big thing is to have a native datepicker, so as to not having to use a separate plugin just for this reason.\n\nWhat do you think?\n\nThanks\n"},{"labels":["enhancement",null],"text":"Was trying to find a way to have advanced positioning just like Tipsy's SW NW etc.\n\nHere is a beginning have not yet had a chance to finish it off.\n\nWill submit a commit when I get a chance\n\n**\\* bootstrap.js\n~ Ln 1106 Add\n\n``` javascript\n  case 'top-right':\n            tp = {top: pos.top, left: pos.left + pos.width}\n            break\n```\n\n**\\* popovers.less\n\n``` css\n&.top-right   { margin-left: 10px; }\n&.top-right .arrow {\n    top: 5%;\n    left: -@popoverArrowWidth;\n    margin-top: -@popoverArrowWidth;\n    border-width: @popoverArrowWidth @popoverArrowWidth @popoverArrowWidth 0;\n    border-right-color: @popoverArrowColor;\n    &:after {\n      border-width: @popoverArrowOuterWidth @popoverArrowOuterWidth @popoverArrowOuterWidth 0;\n      border-right-color: @popoverArrowOuterColor;\n      bottom: -@popoverArrowOuterWidth;\n      left: -1px;\n    }\n  }\n```\n"},{"labels":["enhancement",null],"text":"It would be nice to be able to set the amount of items to display.\nIf I have a page wide carousel with 50 content items (product photos for instance), it would be nice to be able to show 5 items per time.\n\nAlso with the option to display more items in the carousel container, the following extra options and functions would be needed for flexibility.\n\nOptions: \ndisplayitems = number - default 1\nskipsize = number - default displayitems\ndirection = string - horizontal | vertical default horizontal\n\nFunctions:\nskip(amount_of_items:Number - default 1, direction:String(next | previous) - default next)\n\nI hope this makes sense! Thanks\n"},{"labels":[null,"enhancement"],"text":"I have a case where I have multiple inputs within a single control-group, as the CSS is now it will display the highlight regardless of wether the specific field itself has the .error class. Just need to be more specific in the state selector, example:\n\n.control-group.error input.error, \n.control-group.error select.error, \n.control-group.error textarea.error {}\n\nThanks Guys!\n"},{"labels":["enhancement",null],"text":"Typeahead keep on appended to body with no way to remove it.\n\n``` html\n<ul class=\"typeahead dropdown-menu\"></ul> \n```\n\nSuggestion\n\n``` javascript\n // new method\n        remove: function() {\n            this.$menu.remove()\n        }\n\n$typeahead.typeahead('remove')\n```\n\nPerhaps need a function to remove/disable typeahead if necessary\n"},{"labels":["enhancement",null],"text":"It would be great if tooltips had an extra placement option: cursor. \n\nWhen an element has a large margin, or when a link wraps on two lines, the tooltip may appear very far away from the cursor. Since people look at the cursor when they move it, having an option to make the tooltip appear near the cursor would address these cases. \n"},{"labels":[null,null,"enhancement"],"text":"How about having three classes; alert-error-text, alert-success-text, alert-info-text, such that they change the colour of the text. The current alerts are good, but can sometimes be more than needed to get attention.\n\nWhat do you think?\n\nCheers\nLee\n"},{"labels":["enhancement"],"text":"# Revisiting #1096\n## Overview\n\nThis issue was opened and closed as #1096 7 months ago.  Forgive me for re-opening the same issue, but I just worked on my first bootstrap powered Django project, and I found myself frustrated with how to keep up with bootstrap changes long-term.\n\nIn particular, I found the following rather limiting while trying to maintain the original bootstrap source:\n- Checking out as git submodule includes docs and tests relevant to docs, along with mustache templates I don't need / use\n- Make file doesn't include a raw copy / build command for the bootstrap less and JS files (only minified / compressed versions)\n- In framework like Django, cannot be added as submodule easily updated vis-a-vis Python packages\n## Separate Repository Solution\n\nMy suggestion would be, as was noted before, to split out a bootstrap core without the extraneous jslint and other test suites and only include the js, images and less files.  If checked out as a git submodule directly from twitter/bootstrap, modifications can be made using custom less files in other paths while maintaining / preserving the bootstrap source.  This makes updates easier -- less copy / paste.\n## Make File Solution\n\nIf the source were maintained as a single git repo, modifying the make file to generate / copy clean v.2.1.x js, images and less files to a target path would be a good compromise.  One does not want all the doc files (including custom less and mustache templates) littering, say, their Django static media paths (e.g. /css, /less, /js, /imgs).\n\nMine is a specific example, but #1096 hinted at similar questions / issues with the repo setup.\n\nRegardless -- thx for all you guys do.  We, at my office, love this project.  Keep up the great work.\n"},{"labels":["enhancement"],"text":" the datepicker not supported  \n"},{"labels":["enhancement"],"text":"Can you please add a date and time picker to the js.\n\nDate picker example: http://www.eyecon.ro/bootstrap-datepicker/\n\nTime picker example: http://jdewit.github.com/bootstrap-timepicker/\n"},{"labels":[null,null,"enhancement"],"text":"Navbars with class `navbar-fixed-top` or `navbar-fixed-bottom` have `border-radius` 0, while regular navbars have some `border-radius`...\nIMO if it is a navbar, it must have non-rounded corners (see Github's above!).\n\nFixed navbar: http://jsfiddle.net/aM2hq/6/\n\nNon-fixed navbar: http://jsfiddle.net/aM2hq/5/\n"},{"labels":["enhancement",null],"text":"I think bootstrap provide some draggable functions will be better.\n"},{"labels":[null,"enhancement"],"text":"When using the grid 960 system, and then moving to bootstrap's system, I've found it very handy to have a set of .css classes to draw from for adjusting the vertical spacing between elements and/or filling empty grid elements. Perhaps you could consider adding a similar set to bootstrap? I hope what I'm trying to convey makes sense. There certainly could be mis-uses of the spacer \"helpers\", but I think on the whole, they would be of benefit as an additional scaffolding feature.\n\nHTML\n\n``` html\n<div class=\"row\">\n   <div class=\"span4\">\n       <!-- empty has no content per se, but using spacer to prevent collapse -->\n       <div class=\"spacer10\"></div>\n   </div>\n   <div class=\"span4\">\n      <p>Some text...</p>\n   </div>\n   <div class=\"span4\">\n       <p>Some text...</p>\n    </div>\n</div>\n\n<!-- Need a big space between the previous row and the next one, so use one of the bigger spacers -->\n\n<div class=\"spacer30\"></div>\n\n<div class=\"row\">\n   <div class=\"span4\">\n       <!-- empty, but using spacer to prevent collapse -->\n       <div class=\"spacer10\"></div>\n   </div>\n   <div class=\"span4\">\n      <p>Some text...</p>\n   </div>\n   <div class=\"span4\">\n       <p>Some text...</p>\n    </div>\n</div>\n```\n\nCSS\n\n``` css\n.spacer5 { height: 5px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer10 { height: 10px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer15 { height: 15px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer20 { height: 20px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer25 { height: 25px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer30 { height: 30px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer35 { height: 35px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer40 { height: 40px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer45 { height: 45px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer50 { height: 50px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer100 { height: 100px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n.spacer200 { height: 200px; width: 100%; font-size: 0; margin: 0; padding: 0; border: 0; display: block; }\n```\n"},{"labels":["enhancement",null],"text":"I saw someone put an issue up about 4 months ago about stacking modals not having the backdrops at the right z-indexes (you could see lower modals still), and couldn't figure out if he actually got his pull request in or not. \n\nAnywho, I came up with a somewhat simple CSS solution to this problem using adjacent selectors.\n\nI added a \"level2\" class to my modal with this css\n.modal.level2 {\n    z-index:1052\n}\n\nAnd then this for the stacking:\n.modal-backdrop.in + .modal-backdrop.in {\n    z-index: 1051;\n}\n\nThis isn't the most elegant solution, and it must be defined further if you want more than 2 modals open at a single time.  Will work on a way to maybe have classes that specify different z-index \"levels\" for modals to sit in, so you can have certain modals always appear over others (or a system with which the most recently opened modal-backdrop is always put on top of the preceding modals.\n"},{"labels":["enhancement",null],"text":"It would be nice if typeaheads can accept hash as a source, using keys as categories and values as arrays of values.\nFor instance: {'America': ['USA', 'Canada', 'Mexico'], 'Europa': ['France', 'England', 'Italy']}\n\nIt's a feature request of corse.\n"},{"labels":["enhancement",null],"text":"I'm working on a project where we're using Typeahead as auto-suggest, not the only options. The default behavior of selecting the first option can lead to undesirable behavior. Same thing for clearing the text box on enter if nothing is selected.\n\nI'd be happy to submit changes in a pull request, is this something people would use/are interested in? Or have I missed something completely obvious that already exists? \n"},{"labels":["enhancement",null],"text":"When creating a popover with HTML data, lets say a checkbox for example, the state of the checkbox isn't kept if the popover disappears and then reappears. This is because the entire popover is always re-rendered. I needed a more \"stateful\" behavior whose implementation can be seen in [this gist](https://gist.github.com/3122155). Basically I just created a flag to see if the popover has already been initialized, and skipped initialization if that is the case.\n"},{"labels":[null,"enhancement"],"text":"Please add a titled panel component to Twitter Bootstrap.\n\nMany off-the-shelf themes have these and I find they're useful.\n\nTo see a sample, go the following link and go to the bottom.\n\nhttp://themes.vivantdesigns.com/xtremeadmin/forms.html\n\nThe \"panel widget\" is basically a bootstrap well.  What I'm asking for is the \"widget\".\n"},{"labels":["enhancement",null],"text":"Right now, there doesn't seem to be a simple way to visually change the trigger element (e.g. switch an background image) without having to write additional javascript to listen for the event and change the class.\nIf the collapse plugin would automatically add/remove a css class on the trigger element (similar to `in` on the collapsible), then a lot of use cases would not need this additional javascript.\n"},{"labels":["enhancement",null],"text":"Not sure if anyone has ever tested this.\n\nWhen using the Bootstrap thumbnails with html that has content with varying lengths the .thumbnail containers can get hung up and do not clear when they flow or float to another \"row\" of thumbnails. Nice even thumbnail rows will not be created.\n\nTry it out. Create 10 thumbnails an add different lengths of content within each. \n\nI understand you could add a min-height to the thumbnails to make them somewhat uniform but that doesn't seem to be the best solution because you would have to tweak the min-height to each media query. Not to mention the thumbnail width is dynamic when resizing the browser.\n\nA jquery/javascript plugin that takes the tallest height thumbnail within the .thumbails container and applies it to each thumbnail might be a good solution.\n\nNotice on the bootstap site the two html thumbnails have the exact same content so it looks fine. This doesn't seem realistic.\n\nAny thoughts?\n"},{"labels":["enhancement"],"text":"I realize that that the datepicker component is not in your framework, do you guys want want add into bootstrap?\n"},{"labels":["enhancement",null],"text":"I was thinking it could be good to invoke `touchstart` on all Bootstrap buttons with `class=\"btn\"`. This would make use of the code in this post: https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE. \n\nThe point is performance and to make Bootstrap button clicks be as fast touch events.\n\nI apologize if this already has been addressed elsewhere.\n\nthanks,\ntim\n"},{"labels":[null,"enhancement"],"text":"I have a black background so obviously the default black tooltip is not visible. The color needs to be changed. I seem to have issue styling the arrow. Is there any easy way to style the tooltip?\n"},{"labels":["enhancement",null],"text":"We need keyboard nav for Carousel, like something in plugin config:\n\n{ keyboard: true }\n\nAnd to have navigation with left and right arrows, and maybe even page up/page down for next/previous, and up / down and home / end - for first and last images in the list.\n"},{"labels":[null,"enhancement"],"text":"I'd like a btn-hyperlink class that can be used like all btn\\* classes but styles the button like a hyperlink. Great for small inline forms etc. where a normal buttons takes up too much space.\n"},{"labels":[null,"enhancement"],"text":"Hi, take a look at this tooltips plugin:\nhttp://osvaldas.info/blog/elegant-css-and-jquery-tooltip-responsive-mobile-friendly\n\nIt works perfect positioning tooltips on window borders, not like Twitter Bootstrap!\n\nI'm not sure if it's a CSS or JS issue.\n"},{"labels":[null,"enhancement"],"text":"Inserting a search-query textbox inside input-append for adding a button after, cause rounded sides to dissapear, with this markup:\n\n``` html\n<form action=\"\" class=\"form-search\">\n     <div class=\"input-append\">\n         <input type=\"search\" class=\"search-query span6\"><button\n             class=\"btn\" type=\"button\"><span class=\"icon-search\"></span></button>\n     </div>\n  </form>\n```\n\nTo fix that I create next css:\n\n``` css\n.form-search .input-append .search-query {\n    border-top-left-radius: 14px;\n    border-bottom-left-radius: 14px;\n}\n.form-search .input-append button:last-child{\n    border-top-right-radius: 14px;\n    border-bottom-right-radius: 14px;\n}\n```\n\nCheck it here: http://jsbin.com/icosan/3\nThat would be nice integrate it to boostrap css source to not use this trick\n"},{"labels":["enhancement"],"text":"there is a new set of glyphicons which include lots of social icons, can these be included?\n"},{"labels":[null,"enhancement"],"text":"The current .makeColumn mixin does not support or work in a fluid layout. I have created a function that is working in my project. Is there another mixin that fills this need? I think this is a easy way to fill the need.\n\n``` less\n.makeFluidColumn(@columns: 1, @offset: 0) {\n  .input-block-level();\n  float: left;\n  width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1));\n  *width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%);\n  margin-left: @fluidGridGutterWidth;\n  *margin-left: @fluidGridGutterWidth - (.5 / @gridRowWidth * 100 * 1%);\n}\n```\n"},{"labels":[null,"enhancement"],"text":"`variables.less` defines the default 940px grid.\n\n```\n// Default 940px grid\n// -------------------------\n@gridColumns:             12;\n@gridColumnWidth:         60px;\n@gridGutterWidth:         20px;\n```\n\nBut for the default responsive, you have to change the responsive-xxpx.less files. Why not include the default options, like `@gridColumnWidth1200: 80px`  etc.\n\nThis is also mentioned in #2880 for the fluid styles, with a comment from @markdotto that this will be included in the future. Is this still planned? Doesn't seem like a large/breaking change.\n"},{"labels":["enhancement",null],"text":"It would be nice if there was a class applied to the 'accordion-heading' div for the toggled on/off state. This way we could customize the look of the heading based on if the group is closed or open (like putting +/- background images)\n"},{"labels":["enhancement",null],"text":"It is often the case that Modal dialogs are used to direct user action to some acceptance action, e.g. clicking on \"Okay\" button. Currently, I see no way to \"lock\" the user into a modal dialog until they click Ok. They can simply click anywhere on the background to exit the Modal. Even the example Modal has two buttons called \"Save Changes\" and \"Cancel\". What does a backdrop click mean? Often, a user could click the Backdrop by accident and then not know what happened.\n\nCan you implement a feature that lets me disallow backdrop clicking to exit a modal?\n"},{"labels":["enhancement"],"text":"Webkit now supports styling of the HTML5 validation popovers and since the popovers clash pretty bad with the bootstrap theme I'd love to seem them styled.\n\nHere's some articles on the matter:\n- http://trac.webkit.org/wiki/Styling%20Form%20Controls#WebKitr82180orlater\n- http://www.broken-links.com/2011/06/16/styling-html5-form-validation-errors/\n"},{"labels":[null,"enhancement"],"text":"All tables with a class of `table` automatically receive a row hover effect.\n\nKeeping in line with the other table features that Bootstrap offers, it would be great if this effect is not enabled by default. Perhaps a new `row-hover` class would be enable the feature.\n\nAt the very least it would be nice to have a class in Bootstrap that disables the hover effect.\n"},{"labels":[null,"enhancement"],"text":"I really like push and pull from http://960.gs/demo.html (bottom row)\n\nWhy? Well push is offset but pull makes it possible to show the viewer Left Middle Right but in the code it can be Middle Left Right. This is good for schreen readers, page starts straight on topic, menu later (only hidden go to menu link for screenreader is needed for screen reader). Pull is also good for the responsive design, let say Middle is your logo and you have a quote on the Left and Right and on a mobile you want the logo (Middle) first then you need to push Middle by 4 and pull Left by 4.\n\nExample:\n\n```\n<div class=\"row\">\n    <div class=\"span4 push4\">Middle</div>\n    <div class=\"span4 pull4\">Left</div>\n    <div class=\"span4\">Right</div>\n</div>\n```\n"},{"labels":["enhancement"],"text":"i think it will be useful...\n"},{"labels":[null,"enhancement"],"text":"hi,\n\nButtons allow multiple sizes : large, small and mini (with class .btn-large, .btn-small, and .btn-mini).\nIt would be a nice improvement to allow multiple sizes on pills (basic and stacked).\n\nFor example, it will allow to have small items on wide screens (navigation with mouse) and large items on smartphones (navigation with fingers).\n\ncheers.\n"},{"labels":["enhancement",null],"text":"I think it would be great if we could position our popover more precisely.\n\nAdding corner support like :\n\nhttp://craigsworks.com/projects/qtip2/demos/tips\n\nIs there a way to achieve this today?\n"},{"labels":["enhancement",null],"text":"Is there any draggable/sortable functionality like the jquery ui one on accordion available in bootstrap?\n"},{"labels":["enhancement",null],"text":"Apparently there is no way to render two popovers/tooltips in the same page differently. There needs to be a setting that allows to set a custom CSS class for them. \n\nI can code a patch for this, but before doing so I want to make sure it will go in. \n\nCheers,\nMiguel\n"},{"labels":[null,"enhancement"],"text":"hi\n\nthere is a proposal for improvement :\nallow centered columns placed in the middle of the row (this does not center the content, but centers the grid element itself).\nwith that,you are sure that the block is centered, even if you change the number of columns it contains.\nIt works only if there is only one column blocks in the row.\n\n.row .centered {\n    float: none;\n    margin-left: auto;\n    margin-right: auto;\n}\n"},{"labels":["enhancement",null],"text":"Hi,\nI think one additional feautre is missing in bootstrap. Its a (ranged)slider for values like this one: http://refreshless.com/nouislider/\nIt would be a nice addition to bootstrap\n"},{"labels":[null,"enhancement"],"text":"Hey, I didn't find any style for disabled state of links in a nav, so here it is :\n\n``` css\n.nav-list>.disabled>a {\n    color: #999;\n    cursor: default;\n}\n\n.nav-list>.disabled>a:hover {\n    background-color: transparent;\n}\n```\n\n(update: changing `.nav` to `.nav-list`).\n\nThis also works for `.nav-tabs` & `.nav-pills` :\n\n``` css\n.nav-tabs>.disabled>a, .nav-pills>.disabled>a {\n    color: #999;\n    cursor: default;\n    border: none; /** add this for tabs/pills **/\n}\n\n.nav-tabs>.disabled>a:hover, .nav-pills>.disabled>a:hover {\n    background-color: transparent;\n}\n```\n"},{"labels":[null,"enhancement"],"text":"It is possible to get images round with some bootstrap class?\n\nIf not, would be cool a \"rounded\" class to use in img tag.\n\nPrefered do not use javascript or border images, or it can be optional.\n\nI have made it using a alterated thumbnail class, but could not reproduce again.\n"},{"labels":["enhancement"],"text":"Typeahead is not usable for a search field at the bottom of the screen. Would you please add an option to show the results going upwards instead of downwords? (or point out how to do it if it's easy)\n\nThanks\n"},{"labels":["enhancement"],"text":"It would be incredibly helpful to be able to get a live preview what the user interface components would look like when customized (colors, fonts, etc).\n\nFor example, what would a success button look like in a different color and with a different font?  \n\nA couple of sites have done commendable work on demonstrating how you can style Twitter Bootstrap (http://stylebootstrap.info and http://charliepark.org/bootstrap_buttons to name two. It would be great to have these types of capabilities built into http://twitter.github.com/bootstrap. \n\nThis would greatly reduce the time from concept to implementation. \n"},{"labels":["enhancement",null],"text":"I know this has been asked several times, all answered by \"There are modals for that\". But I still think an effortless lightbox plugin should be present in Bootstrap, considering how crucial have lightboxes become for pictures zooming nowadays.\n\nPlugins like [Colorbox](http://jacklmoore.com/colorbox/) let you create lightboxes on your images simply by putting a _rel_ tag on a picture and initiating colorbox(). If I want to do the same thing with Bootstrap, I have to manually create the div#modal in my body for every picture that I want in a lightbox, and that doesn't allow for slideshows, image resizing etc.\n\nI'm aware that for every plugin request there is in the Issues list, it's always possible to answer \"You can just add it yourself\" and it is true - I can just do like I did in the old days and add Colorbox to every website I want lightboxes in. But that's not my point, Bootstrap is made to speed up the creation of a website by giving an easy access to the most commonly used tools and assets. But while I don't think people use Scrollspy-like navigation or progress bars every day, I see lightboxes on 90% of the websites I go to.\nSo in my opinion - and only mine - I think you should reconsider one last time the add of lightboxes in Bootstrap, for the benefit of everyone.\n"},{"labels":["enhancement",null],"text":"Was hoping to achieve something like this: \n\nhttp://codeblogging.net/blogs/1/15/jquery-ui-autocomplete-with-images-and-custom-html\n\nDoes typeahead offer any way to support the loading of images / custom-html? Any simple, recommended workaround? \n\nThanks!\n"},{"labels":["enhancement"],"text":"It'd be nice if Bootstrap offered a component to <code>&lt;audio&gt;</code> and <code>&lt;video&gt;</code> tags using the grid.\n"},{"labels":["enhancement"],"text":"It would be nice to have vertical button groups and toolbars.\n"},{"labels":["enhancement"],"text":"Hi,\nI see that nav-tabs and nav-pills both can have a \"second level\" nested list (the dropdown), but there's no such similar thing in nav-list; here's my very little contribute for such second level (put \"nav nav-list\" on the nested UL, too), but it surely can be improved: any contribute will be appreciated\n\n```\n.nav-list > li > ul {\n    padding-left:0;\n    padding-right:0;\n}\n.nav-list ul > li > a {\n    padding-left:30px;\n}\n```\n"},{"labels":["enhancement"],"text":"Just a feature request.\n\nIn the customize area of the docs, it would be nice to be able to choose which responsive sizes to use. I've disabled the ones I don't want for now.\n"},{"labels":["enhancement",null],"text":"So, I wanted to customise a specific \"popover\" size and style, but there is currently no way to do this.\n\nIn bootstrap.js, around line 1151, I added a quick \nif ( this.options['class'] != undefined ) {\n    $tip.addClass( this.options['class'] );\n}\n\nif ( this.options['id'] != undefined ) {\n    $tip.attr( 'id', this.options['id'] );\n}\n\nThis type of customisation should be standard for all generated components. This means when you are supplying the configuration you can set an ID or class. Demo: $('element').popover( { placement: 'bottom', id: 'myCustomPopover' } );\n"},{"labels":["enhancement"],"text":"Please add an option for other animation styles e.g.: none, fade, slide up, slide down.\n\nThanks!\n"},{"labels":["enhancement",null],"text":"Currently, the menu of items doesn't appear until you start typing. Normally this is fine, but sometimes I'd like the user to see the sorts of items in the list before typing.\n\nI propose adding an option which, if set to true, goes ahead and shows the menu (along with first `items` number of items) as soon as the Typeahead `input` is focused. This option would default false to match current behavior.\n\nSo in the State example, when the `input` was focused, the menu would open and show Alabama through Delaware (assuming `items` was left at default `8`). This prompts the user for the sort of string we're expecting them to type.\n\nOne could argue \"but if we pop open a list of items, they may think that's all the items that are offered\" which could be negated by #2042.\n"},{"labels":["enhancement",null],"text":"The `items` option on Typeahead limits the menu to `items`-number of menu items. Which is great, but optionally we should alert the user with a \"+ _n_ more\" bit of text at the bottom of the menu when there are more results than `items` allows to be shown.\n\nI propose an option, `show_item_overflow_note` or something less verbose, which if true puts a live \"+ _n_ more results\" text snippet below the last item.\n"},{"labels":["enhancement"],"text":"Modals with 'fade' seem to require either Misc.Utilities or Misc.Component animations.\n\nWithout it the modal-backdrop wasn't removing itself when closing the modal.\n"},{"labels":["enhancement"],"text":"I didn't find how to update data-source with typeahead. I tried to make it work simply with a new typehead() call and new values, but it does not update at all.\n\nThe first call works perfectly :) but the second one does.. nothing :(\n\n```\n$('select').change(function() {\n    var id = $(this).val();\n    $.getJSON(url + id, function(data) {\n        $('input').typeahead({\n            source: data\n        });\n        $('input.hide').slideDown(120);\n    });\n});\n```\n"},{"labels":["enhancement",null],"text":"It would be nice to have some indication of the total number of items in the carousel and the current position of the carousel.\n\nMany other carousel widgets use pills to display this information.\n"},{"labels":[null,"enhancement"],"text":"It would be great if you could add a progress tracker navigation device to your supported styles / examples.\n\nThese are now pretty common place navigation items and I would think that other people would want this too.\n\nI've subverted a 'pager' for this purpose with some custom styles. But it still doesn't feel right.\n\n![Progress Tracker](http://imghostr.me/images/NhybK.png)\n\nNB Some more examples\n\nhttp://www.smashingmagazine.com/2010/01/15/progress-trackers-in-web-design-examples-and-best-design-practices/\n"},{"labels":["enhancement"],"text":"There are progress bars for success, danger, and info, but there's nothing in 2.0.1-wip's progress-bars.less for warning or inverse.\n"},{"labels":["enhancement",null],"text":"Otherwise it goes by too fast without changing the speed option.\nZurb Foundation has some nice carousel options to borrow from...\n"},{"labels":["enhancement"],"text":"Not sure if anyone has mentioned this or not, but it would be cool to have something like this:\n\nhttp://papermashup.com/demos/ajax-switch/\n"},{"labels":["enhancement",null],"text":"Here's what I'm doing atm.\n\n``` javascript\nvar getPlacement = function($el) {\n    var offset = $el.offset(),\n        top = offset.top,\n        left = offset.left,\n        height = $(document).outerHeight(),\n        width = $(document).outerWidth(),\n        vert = 0.5 * height - top,\n        vertPlacement = vert > 0 ? 'bottom' : 'top',\n        horiz = 0.5 * width - left,\n        horizPlacement = horiz > 0 ? 'right' : 'left',\n        placement = Math.abs(horiz) > Math.abs(vert) ?  horizPlacement : vertPlacement;\n    return placement\n};\n```\n\nand\n\n``` javascript\n$el.popover({\n    placement: getPlacement($el),\n    trigger: 'manual',\n    html: true,\n    title: function() {\n        return 'Laddar...';\n    },\n    content: function() {\n        return 'Laddar...';\n    }\n});\n```\n"},{"labels":[null,"enhancement",null],"text":"Would be nice to have a simple way to have the headings of a table stay at the top of a table as you scroll the page. Think long list of employee data.\n\nWould be nice to have this integrated in so it's aware of the other fixed elements like the navbar and will adjust blocking accordingly.\n\nMaybe something like:\n&lt;table class=\"table-fixed-header\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\nor\n&lt;table&gt;\n&lt;thead class=\"fixed\"&gt;\n&lt;tr&gt;\n"},{"labels":["enhancement"],"text":"How would you feel about a (trivial) patch to support `<ol class=\"unstyled\">`?\n\nThe argument for is that semantically, a list may be ordered but visually, you don't want numbers.\n\nThe argument against is that pragmatically, just use an unordered list.\n"},{"labels":[null,"enhancement"],"text":"When I change the @gridColumns value to 10 here: http://twitter.github.com/bootstrap/download.html and download, it seems to keep the 12 column setting?\n\nThanks!\n"},{"labels":[null,"enhancement"],"text":""},{"labels":["enhancement",null],"text":"Please add support of multiple values in typeahead like http://jqueryui.com/demos/autocomplete/#multiple\n"},{"labels":["enhancement"],"text":"After using Bootstrap a bit I believe one thing that it could benefit  from is a media object like in stubbornella OOCSS framework  (mainly because I find overkilling using grids to layout things inside little modules, e.g. floating a post image and its contents or an author avatar and his profile etc.).\n\nThis is how it looks in OOCSS https://github.com/stubbornella/oocss/blob/master/core/media/media.html\n\nEssentially it take cares of situations where you have a \"media\" (image, video, flash) floated on the left or right of some content (e.g.. post with images, comments with author avatar, list items with images or icons etc.).  It would make a good companion for Thumbnails when laying out content.\n\nExample code:\n\n```\n<div class=\"media\">\n    <a class=\"pull-left\"><img class=\"media-object\" src=\"\"></a>\n    <div class=\"media-body\">\n        <h3>Media Content Title</h3>\n        <p>Lorem ipsum dolor sit amet[…]</p>\n    </div><!--/media-body-->\n</div><!--/media-->\n```\n\nMedia objects can be also nested:\n\n```\n<div class=\"media\">\n    <a class=\"pull-left\"><img class=\"media-object\" src=\"\"></a>\n    <div class=\"media-body\">\n        <h3>Media Content Title</h3>\n        <p>Lorem ipsum dolor sit amet[…]</p>\n        <div class=\"media\">\n            <a class=\"pull-left\"><img class=\"media-object\" src=\"\"></a>\n            <div class=\"media-body\">\n                <p>Lorem ipsum dolor sit amet[…]</p>\n            </div><!--/media-body-->\n        </div><!--/media-->\n    </div><!--/media-body-->\n</div><!--/media-->\n```\n\nThe less code:\n\n```\n.create-formatting-context() {\n    overflow:hidden;\n    *overflow:visible;\n    zoom:1;\n} \n\n```\n\n```\n.media {\n    .pull-left {\n        margin-right: 20px;\n    }\n    .pull-right {\n        margin-left: 20px;\n    }\n    .media-object {\n        display: block;\n    }\n    .media-body {\n        .create-formatting-context();\n    }\n    .create-formatting-context();\n}\n\n```\n\nA similar media-fluid object could be created.\n"},{"labels":[null,"enhancement"],"text":"Right now the entire model gets scrollbars if the modal is too small for the text.  It would probably be better if the modal-body received the scroll bars and the entire modal got none.\n"},{"labels":["enhancement"],"text":"How can I get the file `bootstrap.css` directly (without having to download the whole .zip file)? Is there a CDN of some sort?\n"},{"labels":[null,"enhancement"],"text":"Instead of using html classes like `.span4` and `.row` in your html, it was possible to set the grid in your LESS code (in 1.4) with  `makeColumn(@columnSpan)` and `.row` directyly in LESS. (See Issue #824)\n\nWith the new grid system, this has become more difficult. What is the best way to approach this?\nMy first approach was creating custom functions for my grid, like `.makeColumn(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, @gridSpan){` but than you have to do the following for every thing you want to define:\n\n```\n.block {\n      #customGridSystem > .makeColumn(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 4);\n }\n```\n\nMy second approach is changing the #gridSystem mixin\n\n```\n[class*=\"span\"] {\n  #gridSystem > .gridColumn(@gridGutterWidth);\n}\n```\n\nto \n\n```\n.span1, .span2, .span3, .span4, .span5, .span6, .span7, .span8, .span9, .span10, .span11, .span12 {\n  #gridSystem > .gridColumn(@gridGutterWidth);\n}\n```\n\nThen (also in the #gridSystem > generate() mixin)\n`#customGridSystem > .generate(); // Generate our grid (also in responsive..)`\n\nFor responsive, also just include this. I can then define my grid once.\n\n```\n#customGridSystem {\n    .generate() {   //Generate our custom grid\n        header, #main, footer {\n           .row;\n        }\n        .block {\n          .span4;\n        }\n    }\n}\n```\n\nOffcourse I could also code this directyly in the gridSystem..\n Any thoughts on the best way to handle this? Any big downfalls for using 12 selectors (span1, span2 etc) instead of `[class*=\"span\"]`, or for assigning grids like this?\n(Edit: same goes for responsive.less; \n      // Make all columns even\n    .row > [class_=\"span\"],\n    .row-fluid > [class_=\"span\"] {\n"},{"labels":["enhancement"],"text":"I think it might be a good add to let the user use buttons as prepend/addons. There are a lot of uses for it (reseting a field, single-field submit button, show field options etc) and it wouldn't be that hard to integrate. It just needs a few CSS tweaks.\n\nIt's currently possible but the CSS result is rather messy : http://jsfiddle.net/9RwWJ/5/\n"},{"labels":[null,"enhancement"],"text":"Could version 2.x include a mouse hover effect when hovering over table items?\nthanks\n"},{"labels":[null,"enhancement"],"text":"Hi, \nI think it would be useful, to add a black button.\n\nExample: http://jsfiddle.net/5xKpE/1/\nOk maybe the name should be renamed, but i think you get the idea. It would be complement the white/grey button. \n"},{"labels":["enhancement"],"text":"When I've gone through and clicked my custom set of checkboxes, and entered my custom set of CSS values, what happens when I want to update to Bootstrap 2.0.1, or if I want to redownload it because I lost the original?\n\nWhat I'd like is a URL, ideally embedded in the downloaded zip as well as displayed on the webpage, that pre-selects and pre-enters the same values.\n\nWhat I'm thinking for implementation is, use some reversible hashing algorithm on $('form').serialize() - maybe gzip with zip.js or something - and add that on the URL with a query param (not as part of the URL fragment, please). Then, even better, allow me to pass that query param directly to a download link so I can wget (as part of a build script or something) the updated zip file!\n"},{"labels":[null,"enhancement"],"text":"I'm looking into customizing an installation of Bootstrap 2 for my color scheme, and the names are virtually worthless. My scheme is light-on-dark, and the default text color variable name is \"gray\". I can set this to white and it will work, but it's completely counter-intuitive.\n\nVariable names shouldn't be names of colors, unless you're defining those colors. For example, defining your particular shade of gray in \"gray\" so you can use it is fine, but then doing \"color: @gray\" is bad design.\n\nI understand that it's rather a big change, but it would be much better if it were something like:\n\n```\n@gray: #333;\n@textColor: @gray;\n\nbody { color: @textColor; }\n```\n\nThis way is used in most places, but there are some places that use the color-named variables directly. Ideally, this shouldn't happen anywhere outside variables.less.\n"},{"labels":["enhancement",null],"text":"Using iOS5, iPhone 4S and Safari... Popover example doesn't close once you tap to the red \"hover for popover\" button.\n\nInterestingly, the popover inside the modal works just fine.\n\nIs this because the \"well area\" is too small to tap?\n\nAnd is it likely to discover a more intuitive way to interact with tooltips and popovers for touch screens? Like tapping the first time opens it, and tapping the second time closes it?\n"},{"labels":["enhancement",null],"text":"Hi Mark,\n\nthe new typeahead component is awesome. But I often have to implement an autocomplete that is fetching data from a remote source. Would it be possible to add a callback, that I can use to query the remote server and return a set of items that match the entered query?\n\n```\nfunction(query) {\n    // Do some fetching and return an array of items.\n}\n```\n\nThe jQuery UI autocompleter offers returning an array of objects. This is very helpful, as you would often like to display a human friendly title to the user and set an ugly ID in the background as the field's value.\n\n```\n[{title: 'Look at me', value: '12345xyz'}, {title: 'Foo Bar', value: '654321abc'}]\n```\n\nI know, this increases the complexity of the typeahead component, but makes it on the other side very useful.\n\nThanks Marc\n"},{"labels":[null,"enhancement"],"text":"Hi Mark,\n\nplease add some helper classes to be faster in building responsive layouts. Foundation offers:\n\n```\nshow-on-desktops\nshow-on-tablets\nshow-on-phones\n\nhide-on-desktops\nhide-on-tablets\nhide-on-phones\n```\n\nThese classes are extremely helpful to do e.g. a fast navigation bar hide on mobile phones and display a special navigation instead for mobile devices.\n\nThis would be great and a huge time saver.\nThanks Marc\n"},{"labels":[null,"enhancement"],"text":"Feature Request: Add bubbles for information (like numbers), similar to the ones you see on github \"Issues\" button.\n"},{"labels":["enhancement",null],"text":"Hi.\n\nIt would be nice to have a multiple autocomplete and multiple autocomplete with checkbox  component within bootstrap :)\n\nhttp://jqueryui.com/demos/autocomplete/#multiple\nor\nhttp://www.emposha.com/demo/fcbkcomplete_2/\n\nWhat do you think about that?\n\nThanks for all!\n"},{"labels":[null,"enhancement"],"text":"It would be nice if we could use negative offsets to allow presentation order to be independent from source order. For example, to have the first sidebar to come after the content in the source, but be presented still to the left of the content.\n\nFor example, we could use something like in mixins.less:\n\n```\n.inset(@columns: 1) {\n  margin-left: 0 - ((@gridColumnWidth * @columns) + (@gridGutterWidth * (@columns - 1))); \n}\n```\n\nThen in scaffolding.less\n\n```\n// Inset column options\n.inset1    { .inset(1); }\n.inset2    { .inset(2); }\n.inset3    { .inset(3); }\n.inset4    { .inset(4); }\n.inset5    { .inset(5); }\n.inset6    { .inset(6); }\n.inset7    { .inset(7); }\n.inset8    { .inset(8); }\n.inset9    { .inset(9); }\n.inset10   { .inset(10); }\n.inset11   { .inset(11); }\n.inset12   { .inset(12); }\n```\n\nThoughts on adding something like this? Is this already possible, and I just missed it?\n"},{"labels":["enhancement",null],"text":"I loved the way you did the subnav on docs, i would love that becomes an component and javascript plugin. \n"},{"labels":[null,"enhancement"],"text":"I read that we can now add a checkbox or a radio behavior to a button group (http://markdotto.com/bs2/docs/javascript.html#buttons)\n\nThat's great, but I think it would be better if we could use as underlying markup actual HTML checkboxes and actual HTML radio buttons, i.e :\n\n```\n<input type=\"radio\" /><label></label>\n```\n\nIt implies re-styling completely the input field.\n\nThis would allow to use button groups in forms.\nAnd no javascript would be required to get the wanted behavior, the browsers would be handling it.\n"},{"labels":["enhancement",null],"text":"Make a easy way to change Dropdown to work with hover instead of Click. something like $('.dropdown-toggle').dropdown('hover').\n\nI'm using this instead of dropdown.js:\n\n```\n$('.navbar li.dropdown').hover(\n    function(){\n        $(this).addClass('open').find('ul').stop(true,true).hide().slideDown('fast');\n    },\n    function(){\n        $(this).removeClass('open').find('ul').stop(true,true).slideUp('fast');\n    }\n);\n$('.navbar li.dropdown li').unbind('mouseover').unbind('mouseout');\n```\n"},{"labels":["enhancement"],"text":"Hi\n\nAny reason you opted to include image based icons in bootstrap which are limited to the 16px dimensions?\n\nFor example http://somerandomdude.com/work/iconic/    is available as open source fonts - means you can include icons in headers, buttons of various size etc since its vector based.  \n\nCould easily be implemented with the same approach as the current icons:\n\n<i class=\"foobar\">\n\ni.foobar:before { content: \"X\" }\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nI don't know if it's a bug, or if the dropdown menu is meant only for 4 or 5 items, but when the page height is smaller than the height of the list of items in a dropdown it's impossible to reach the items that don't show (and since its position is \"fixed\", it can't be scrolled down to)\n\nThanks for Boostrap guys!\n"},{"labels":["enhancement",null],"text":"Hi!! It would be nice to have a growl-like notification component within bootstrap :)\n\nHere are the most important jquery scripts:\nhttp://webtoolkit4.me/2009/08/13/jquery-growl-likenotification-systems/\n\nPersonally I like jquery Purr http://kitchen.net-perspective.com/purr-example-4.html\n\nWhat do you think about that?\n\nThanks for all!\nRaúl\n"},{"labels":["enhancement",null],"text":"Add support for loading remote data (like facebox) on model window\n"},{"labels":["enhancement",null],"text":"would be awesome to write a plugin which you could drop in to easily extend all other plugins with accessibility support etc.\n"},{"labels":["enhancement",null],"text":"Would be great if we have a file all.min.js with all .js there.\n\nCongratulation for your work guys.\n"},{"labels":[null,"enhancement"],"text":"I'm missing support for the \n\nhtml5-pseudo-classes \n   :invalid\nand \n   :invalid:focus\n\nIn my first suggestion they should have the some appearance as the \n\n```\nform .clearfix.error input, form, textarea\n```\n\nelements.\n\nCheers,\n   Kosta\n"},{"labels":["enhancement",null],"text":"The current JavaScript implementation of dropdowns doesn't support keyboard navigation. Adding some event handling for keyboard events would go a long way towards aiding in 508 compliance and making power-users happy.\n\nI hacked out a quick set of code that works for my purposes, but don't have time to turn it into a polished pull request right now. Perhaps someone else can take it the final mile:\n\n```\n  $('.dropdown').bind('keydown', function (evt) {\n    var $this = $(this);\n    switch(evt.keyCode) {\n      case 13: // Enter key\n      case 32: // Space bar\n      case 38: // Up arrow\n      case 40: // Down arrow\n        $this.addClass(\"open\");\n        $this.find('.dropdown-menu a:first').focus();\n        break;\n      case 27: // Escape key\n        $this.removeClass(\"open\");\n        $this.focus();\n        break;\n    }\n  });\n\n  $('.dropdown-menu a').bind('keydown', function (evt) {\n    var $this = $(this);\n\n    function select_previous () {\n      $this.parent('li').prev().find('a').focus();\n      evt.stopPropagation();\n    }\n\n    function select_next () {\n      $this.parent('li').next().find('a').focus();\n      evt.stopPropagation();\n    }\n\n    switch(evt.keyCode) {\n      case 13: // Enter key\n      case 32: // Space bar\n        $this.click();\n        $this.closest('.dropdown').removeClass('open');\n        evt.stopPropagation();\n        break;\n      case 9: // Tab key\n        if (evt.shiftKey) {\n          select_previous();\n        }\n        else {\n          select_next();\n        }\n        evt.preventDefault();\n        break;\n      case 38: // Up arrow\n        select_previous();\n        break;\n      case 40: // Down arrow\n        select_next();\n        break;\n      }\n  });\n```\n"},{"labels":["enhancement",null],"text":"Is there a way to set the modals width and have it center properly? I'm trying to make a rather large modal in terms of width, like around 950px. I'm creating it dynamically like so:\n\n```\n    var userSettingsModal = $('<div />', { class: 'modal fade', id: 'user-settings-modal', style: 'width: 950px;' })\n        .append($('<div />', { class: 'modal-header' })\n            .append($('<a/>', { class: 'close', text: 'x', href: '#' } ))\n            .append($('<h3/>', { text: 'Edit User' })))\n        .append($('<div />', { class: 'modal-body'} ));\n\n        userSettingsModal.modal({\n            backdrop: true\n        });\n```\n\nHowever, it's not centered. Anyway to accomplish this?\n"},{"labels":["enhancement"],"text":"Is it a good idea to add a nice progressbar?\n"},{"labels":[null,"enhancement"],"text":"It should be great to have a breadcrumb dropdown menu, to allow to switch the user in different subsections.\n"},{"labels":["enhancement",null],"text":"It would be nice to be able to position the tip on corners and also custom position the tip, elsewhere (corners) then middle of the tooltip.\n"},{"labels":["enhancement"],"text":"First off....Boostrap is awesome!  \n\nThis is more of a feature request as opposed to an issue.  It would great if there were the capability to have an advanced button style that allowed one to add an icon to the left or the right of the button label.\n\nAnother cool button feature would be a toggle type button similar to the Twitter \"Follow/Un-Follow\" button.\n\nThanks for your great work!\n\nNolan\n@nolandubeau\n"},{"labels":["enhancement"],"text":"I'm trying to implement tabs (actually pills in my case, with less rounding, as the styling is closer to what I want) with a close button to the right, similar to browser tabs. This should be added to Twitter Bootstrap as an option.\n\nExtending current code to do this isn't as clean/easy as it should be because the pill color is on the `<a>` element rather than the `<li>`, so anything added after the link falls outside of the visible pill bounds.\n"},{"labels":[null,"enhancement"],"text":""},{"labels":["enhancement",null],"text":"Feature request:\nAn animate option for the tabs js that would allow for a fade effect transition?\nMuch like the Twipsy or Popover plugins.\n"},{"labels":["enhancement"],"text":"Add support to Bootstrap for HTML5 figure/figcaption styles for text and images.\n"},{"labels":["enhancement",null],"text":"I think it would be great to have some CSS for a calendar widget. It may seem pointless to have CSS without some JS to accompany it. Would it be possible to have a calendar icon appended to an input that when clicked on would display the calendar. I know jQuery UI can accomplish this, but it would great if it matched the Boostrap CSS.\n"},{"labels":["enhancement"],"text":"More of a feature request. It would be really nice if there were generic drop-downs. They would be useful for options and configuration buttons/cog wheels.\n\nInstead of attaching them to tabs/nav, they could also be using for small buttons a la Google +\n"},{"labels":["enhancement"],"text":"It's a feature request :)\n\nI'm searching an easy way to do nice transitions in css, like `.slide.in, .slide.out` ... \n\ndoes it seems interesting ?\n\nIf yes maybe we can add more transitions here : https://github.com/twitter/bootstrap/blob/master/lib/patterns.less#L950\n"},{"labels":["enhancement"],"text":"There is only error class for form controls, what about adding warning, success and info? For example, success and warning are useful for password strength indication.\n"},{"labels":["enhancement"],"text":"Although there is a height definition for the topbar class, changing this, from 40px, to anything else, seemingly does nothing. I've been trying to dig around to find out precisely why this is and it seems the ul, li classes are interfering. I'm not sure what the best way to handle this is? I'd ideally like to make the topbar a larger height.\n"},{"labels":["enhancement",null],"text":"Hi, I found really helpful to have a lot of twipsy elements. For example for any element with the `title` attribute defined. But due to design usability I need different placement for some of them.\n\nSo my proposal is similar as modal plugin. You can define `<span title=\"foo text\" data-placement=\"right\">` and initially call with `$(\"[title]\").twipsy({live: true, placement: \"left\"});` so by default all twipsy has to be in left placement except for the elements with `data-placement` attribute.\n\nWhat do you think?\n"},{"labels":["enhancement"],"text":"In the example, it appears that you can create a fixed-width topbar. I tried doing this with:\n\n```\n<div class=\"container\">\n    <div class=\"topbar\">\n        <div class=\"topbar-inner\">\n            <div class=\"container\">\n                <h3>\n                    <a href=\"#\">Hello World</a>\n                </h3>\n            </div>\n        </div> \n    </div>\n</div>\n```\n\nHowever, the topbar refuses to be wrapped and restricted to a certain width. You can see this here: http://jsdo.it/rfkrocktk/2Rg6\n"},{"labels":["enhancement",null],"text":"It would be great if Bootstrap supported \"autocomplete\" like for a search field. \n"},{"labels":["enhancement",null],"text":"When working with tables, it would be great to have a js plugin that fixes thead so you can scroll only tbody.\n"},{"labels":["enhancement"],"text":"i'm found botstrap have left-hand sidebar, but have no left-hand sidebar?\n"},{"labels":["enhancement"],"text":"Table columns should be able to snap to the grid. Ideally like this:\n\n```\n<tr class=\"row\">\n    <td class=\"span2 columns\">\n        ....\n    </td>\n    ....\n</tr>\n```\n\nThere will probably be some colspan issues, but I'd not pay too much attention to that (leave something for user IQ).\n"},{"labels":["enhancement"],"text":"It would be great to have a variable for the topbar color in variables.less.\n"},{"labels":["enhancement"],"text":"Here's a feature suggestion for tabs/pills that attach to the left side, the right side, or the bottom of the content area div. For example: http://www.pagecolumn.com/webparts/js_tabs_in_the_top_bottom_right_left_side.htm\n"},{"labels":["enhancement",null],"text":"I'm a newb, so please forgive my asking about this if this issue is easily resolved or has been already addressed.\n\nACCORDION.JS\nCan you add an Accordion.js plugin like the dropdown pulgins?  One that fits with the style(s) you have created?\n\nI'd love one on my web app (on the left hand side) and have been struggling to make it feel consistent with the styles you have created (a symptom of my ignorance I accept).\n\nLastly, even if this is the wrong place to raise this issue, you guys are awesome (and the contributors).....thanks again!\n"},{"labels":["enhancement"],"text":"As variables.less is already mentioning:\n\n// More variables coming soon:\n// - @basefont to @baseFontSize\n// - @baseline to @baseLineHeight\n// - @baseFontFamily\n// - @primaryButtonColor\n// - anything else? File an issue on GitHub\n\nI just added this issue to track the progress.\n"},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"Dmitry Fadeyev has written some very useful less mixins that I think could benefit Bootstrap, such as a border-radius declaration that supports padding and margin-like positional arguments.\n\nCheck it out: \n\nhttp://lesselements.com/\nhttps://github.com/dmitryf/elements/\n"},{"labels":["enhancement"],"text":"a feature request for labels below the thumbnails\n"},{"labels":["enhancement"],"text":"To start, add a Bootstrap favicon and larger iOS touch icons. In the future, we'll include templates hopefully for this as well.\n"},{"labels":["enhancement"],"text":"Would be great to have support for right-to-left languages.\n"},{"labels":["enhancement"],"text":"Would be great to have breadcrumb like at http://veerle-v2.duoh.com/blog/comments/simple_scalable_css_based_breadcrumbs/\n"},{"labels":["enhancement"],"text":"Would be great to be able to do toggle buttons, radio-style buttons, and other variations, as in jQuery UI: http://jqueryui.com/demos/button/#radio and http://jqueryui.com/demos/button/#checkbox\n"},{"labels":[null,"enhancement",null],"text":"We have a yarn script for bundling the frontend into a docker container, and we should have one for the example backend as well.\r\n\r\nWe need to figure out how to depend on the local backend packages, and ideally only install runtime node dependencies for the backend, avoiding CLI deps etc."},{"labels":[null,null,"enhancement",null],"text":"## Feature Suggestion\r\n\r\nStandardize on supporting the [Golang way of importing remote modules](https://golang.org/doc/code.html#ImportingRemote) for catalog locations.\r\n\r\nThe syntax is more or less: `<host>/<repo-path>/<file-path>`. For example `github.com/spotify/backstage/app-config.yaml`, where `github.com` is the repo hosting provider, `spotify/backstage` is the repo path, and `app-config.yaml` is the file path. We could support this syntax without having to declare an explicit `type` for the location as well, and just determine it based on the host.\r\n\r\n## Possible Implementation\r\n\r\nWe probably end up needing custom logic for each hosting provider, at least it makes sense to start out there. So to begin with we'd only support `github.com` as the host part, and we'd expect the 2 first path components to be the repo path.\r\n\r\nI haven't dug into the Go logic for determining the location, but it's possible that there's something there that we can re-use.\r\n\r\n## Context\r\n\r\nDiscussion in https://github.com/spotify/backstage/pull/1276#discussion_r439740243\r\n"},{"labels":[null,null,"enhancement",null,null],"text":"# Purpose\r\n\r\nThis RFC describes a possible journey of a future Backstage plugin developer as they build a plugin that touches many different aspects of a Backstage. The story invents many new things that are not part of Backstage today, but are things that I'm suggesting we should add as long term or north star goals. The idea is to discuss what parts of the story makes sense to aim for, and what we'd want to do differently or not at all. The \"chapters\" are numbered to make it a bit easier to comment on parts of the story.\r\n\r\n# The Protagonist\r\n\r\nSam is an experienced developer that has worked with Backstage for a while, and knows the best practices and tools available to build plugins. Sam also likes music and wants to have a theme tune for every service in Backstage.\r\n\r\n# The End\r\n\r\nSam built a Spotify plugin for Backstage that allows service owners to define a theme tune for their service. The theme tune plays whenever a user visits the service page in Backstage. The plugin is published to NPM and available for any organization to easily install and add to their Backstage installation.\r\n\r\n# 1. A New Plugin\r\n\r\nSam chooses to develop this plugin in a standalone project and creates a new plugin using `npx @backstage/cli create-plugin`, which detects that it's not being run in an existing project and therefore creates a separate plugin repo.\r\n\r\nSpinning up the frontend with `yarn start`, Sam goes to work with getting the base functionality of a Spotify web player going. By installing a couple of dependencies and whipping together a nice UI, the player is pretty much done.\r\n\r\n# 2. The Auth Menace\r\n\r\nSam realizes users need to be authenticated towards the Spotify API to be able to play music, and Backstage doesn't support Spotify login yet. Sam adds the `@backstage/plugin-auth-backend` as local development middleware in the project, and provides the necessary wrapping logic and configuration for the `passport-spotify` strategy. The Spotify auth provider is now available in the local development backend, and by adding a frontend `SpotifyAuth` Utility API that implements the `OAuthApi` type, it's now working in the frontend too.\r\n\r\n```ts\r\nconst spotifyAuthApiRef = createApiRef<OAuthApi>({\r\n  id: 'core.auth.spotify',\r\n  description: 'Provides authentication towards Spotify APIs',\r\n});\r\n```\r\n\r\nSam realizes that Spotify auth might be useful to others, and that it would be more convenient if it was a part of the Backstage Core. After submitting and merging a Pull Request with the additions to the `@backstage/plugin-auth-backend` and `@backstage/core` packages, Spotify auth is now available for everyone to use. Since the Backstage Core team also adds it to the public demo server, Sam can now get rid of it in the local setup and rely on the shared development auth providers instead.\r\n\r\nThe only thing left now is making sure that users of the plugin provide Spotify auth in the app. Sam ensures this by adding `spotifyAuthApiRef` to the plugin's list of required APIs, as well as listing it in the requirements section in the README.\r\n\r\n```md\r\n## Requirements\r\n\r\nThis plugin requires the following APIs to function:\r\n\r\n- `spotifyAuthApiRef` from `@backstage/core@^1.1.0`\r\n```\r\n\r\n# 3. The Catalog Awakens\r\n\r\nSam now has a working player and a method for users to log in to listen to music, but the goal is to provide theme songs for services. Sam adds this functionality by defining a new metadata annotation called `sam.wise/spotify-track-id`. The annotation's value is a Spotify track ID and can be defined in a component like this:\r\n\r\n```yaml\r\napiVersion: backstage.io/v1\r\nkind: Component\r\nmetadata:\r\n  name: my-component\r\n  annotations:\r\n    sam.wise/spotify-track-id: '4uLU6hMCjMI75M1A2tKUQC'\r\nspec:\r\n  type: service\r\n```\r\n\r\nSam creates a JSON schema that documents the annotation and allows it to be used in validation and documentation for organizations that choose to adopt the plugin.\r\n\r\n```json\r\n{\r\n  \"sam.wise/spotify-track-id\": {\r\n    \"$id\": \"https://raw.githubusercontent.com/sam/backstage-spotify-theme/master/annotation.json#/sam.wise/spotify-track-id\",\r\n    \"type\": \"string\",\r\n    \"title\": \"Spotify Track Annotation\",\r\n    \"description\": \"Spotify track ID to associated with the entity\",\r\n    \"examples\": [\"4uLU6hMCjMI75M1A2tKUQC\"]\r\n  }\r\n}\r\n```\r\n\r\n# 4. The Rise of Widgets\r\n\r\nSam also wraps the music player in an entity page widget. This allows anyone that wants to use the plugin to add the player to any of their entity layout templates, which will make it show up for every entity of that kind.\r\n\r\n```tsx\r\nexport const PlayerWidget = plugin.createEntityWidget({\r\n  component: WebPlayer,\r\n  locations: ['header', 'card', 'footer'],\r\n  cardSize: [2, 4],\r\n});\r\n```\r\n\r\nThe widget receives information about the entity in whose page it's being embedded, which makes it simple to grab the track id from the annotations and hook up the player.\r\n\r\nSam also modifies the standalone plugin development setup to include this new widget inside a basic entity page, adding it to a couple of different places where users of the plugin may want to put the player, just to make sure they all work.\r\n\r\n# 5. The First User\r\n\r\nAt this point the only things that anyone that wants to use Sam's plugin needs to do is to add https://raw.githubusercontent.com/sam/backstage-spotify-theme/master/annotation.json#/sam.wise/spotify-track-id to their catalog schema, import and add the `PlayerWidget` on the desired entity template pages, and make sure they're providing Spotify auth.\r\n\r\nSam soon sees the first \"Used by\" show up on GitHub, and feedback starts rolling in. Users really like the plugin, and some a requesting the possibility to select a theme tune when creating a new component. Sam jumps on the idea and adds a new creation hook that is exported by the plugin. The hook can be installed either in a single, all, or component templates that match a label. It adds a field as a part of the component creation process with a nice search box that allow users to search for a track that they want to use as the theme tune.\r\n\r\n# 6. Return to the Repo\r\n\r\nSam is pretty content at this point, but would like to make it easier for users to change the track after creation, preferable using the same search box that was made for the creation form. By adding an edit button to the `PlayerWidget`, and a nice empty state, Sam is able to provide the appropriate hooks in the GUI to open up a search dialog.\r\n\r\nTo save the selected track, Sam uses the `RepoApi` to suggest a change to the entity definition file. This will create a Pull Request for organizations that use GitHub, a Merge Request for users of GitLab, and so on.\r\n\r\n```ts\r\nconst repoApi = useApi(repoApiRef);\r\nconst alertApi = useApi(alertApiRef);\r\n\r\nconst onSave = async () => {\r\n  const { url } = await repoApi.createChangeRequest({\r\n    title: `Change theme tune to ${track.title} by ${track.artist}`,\r\n    changes: [\r\n      {\r\n        path: entityYamlPath,\r\n        content: newEntityYamlContent,\r\n      },\r\n    ],\r\n  });\r\n\r\n  alertApi.post({ message: `Requested change, ${url}` });\r\n};\r\n```\r\n\r\nNow it's much simpler for users to change the theme tune, as they no longer need to go look up a track ID and edit a yaml file. Instead, they can now stay inside Backstage and search for the track and request the change from there. In addition, the requested change can be reviewed by the regular process of each organization.\r\n\r\n# 7. The User Strikes Back\r\n\r\nSam's plugin is pretty popular at this point, and has been picked up and used by many organizations. But some users start voicing concerns that they have too many different hand-crafted annotations in their entity descriptions, and would like to be able to avoid some of them. They really like the theme tunes though, and wish they could keep them without having to put them in the entity description, even if that means it won't go through the regular source control review process.\r\n\r\nOne day Sam receives a Pull Request for the plugin. It adds an option to use the Database provided by `@backstage/backend-common` to store the track ID. It's all packaged into a new backend plugin that will also extend the catalog backend with schema and functionality to automatically load the value of the `sam.wise/spotify-track-id` annotation from the backend plugin and database. The backend plugin also extends the common GraphQL schema with a mutation that updates the track ID in the database.\r\n\r\nOn the frontend the Pull Request doesn't change much. It defines the save action that was previously using the `RepoApi` in its own API.\r\n\r\n```ts\r\ntype ThemeTuneStorageApi = {\r\n  save(entity: Entity, trackId: string): Promise<void>;\r\n};\r\n```\r\n\r\nThe plugin also provides two different implementations of the API, one that uses the old behavior of the `RepoApi`, and a new one that calls the `GraphQL` API. The new API relies on the `IdentityApi` as a mechanism for authorizing changes, instead of source control reviews. The `IdentityApi` provides a token that is included in the request to the backend, which then must match the owner of the component for which the user is trying to change the theme tune.\r\n\r\n> Author breaking the 4th wall here. I actually think every GraphQL request should include the ID token of the user, but invented a reason to include it here anyway.\r\n\r\nThe API is selected based on a configuration parameter for the plugin, but defaults to the original `RepoApi` behavior.\r\n\r\n```ts\r\nif (config.getBoolean('storeTrackInDatabase')) {\r\n  return new GraphQLThemeTuneStore(graphqlClient, identityApi, alertApi);\r\n} else {\r\n  return new RepoThemeTuneStore(repoApi, alertApi);\r\n}\r\n```\r\n\r\nSam is amazed by the pure awesomeness of this change, replies with a \"\" and hits merge.\r\n\r\n# 8. Attack of the Clones\r\n\r\nSam just released v1.8.4 of the plugin, and at this point it's so popular that a couple of other plugins has started depending on the `sam.wise/spotify-track-id` annotation. One such plugin being the `spotify-album-art` plugin that can display the album art of the theme tune as the background of the entity header. Sam thinks it's all pretty cool, but doesn't like that the annotation that was once an internal concern of the plugin is now becoming a standard in the community.\r\n\r\nIn order to standardize the annotation in Backstage, Sam submits a Pull Request to the Backstage Core repo. The request suggest a new well-known metadata annotation called `spotify.com/track-id`, with the same schema definition as Sam's label, and refers to Sam's own plugin and the `spotify-album-art` plugin as existing usages. The Backstage maintainers merge the Pull Request, after checking with the folks over at Spotify that they're cool with the annotation, and faffing about over some minor grammar mistake in the annotation description.\r\n\r\nWith the annotation now available inside Backstage Core, Sam releases v2 of the plugin, which uses the new annotation. It can still consume the old annotation for backwards compatibility, but new users of the plugin no longer need to add the https://raw.githubusercontent.com/sam/backstage-spotify-theme/master/annotation.json#/sam.wise/spotify-track-id extension to their catalog schema, as it's now part of the core schema. The new release of Sam's plugin specifies a dependency on Backstage with a minimum version set to the same release as the one were the annotation was added to the core schema.\r\n\r\n<details>\r\n  <summary></summary>\r\n\r\n# 9. Revenge of the Sam\r\n\r\nSam, now in full control of all theme tunes in Backstage, releases v2.0.1, which switches all tracks to 4uLU6hMCjMI75M1A2tKUQC. Sam wanted to do something more nefarious, but since Backstage sandboxes sensitive actions and is mostly read-only with strict CSP, Sam's hands were tied.\r\n\r\n</details>\r\n"},{"labels":["enhancement",null],"text":"<!--- Provide a general summary of the feature request in the Title above -->\r\n\r\n## Context\r\n\r\nI want the ability to add and  configure an analytics platform for Backstage, to integrate it with providers such as GA or my own internal setup.\r\n"},{"labels":[null,"enhancement",null,null],"text":"# Context\r\n\r\nEven though Backstage uses modern frameworks and methods that mitigate Cross-site scripting (XSS) attacks, a plugin may want to take additional security measures for some sensitive actions. For example, a cluster management plugin may want to protect an action to completely remove a cluster, or a user management plugin may have an action to grant another user administrative privileges that needs to be protected.\r\n\r\n# Proposal\r\n\r\nAdd a SecureContextApi, which plugins can use to execute actions in a protected browser context.\r\n\r\nI've explored the idea in [this PoC](https://github.com/Rugvip/backstage-secure-context-poc), and my proposal is to use that as a starting point. It provides flexibility in the choice of isolation level for the app, and tries to keep it simple for plugin developers to add new actions.\r\n\r\nFrom the user's point of view there's a button to initiate the protected action. When the button is pressed a popup is opened that asks the user to confirm the action, describing what will be done, e.g. \"Are you sure you want to delete X?\". If the user confirms, the action is executed and the popup is closed.\r\n\r\n# Example\r\n\r\nThe PoC defines secure actions in standalone typescript files like this:\r\n\r\n```ts\r\nexport const id = 'delete-vault-item';\r\n\r\nexport const title = 'Destroy Item in Vault?';\r\n\r\nexport const body = `Are you sure you want to destroy the following item in your protected vault?\r\n\r\n{{ name }}`;\r\n\r\ntype Data = {\r\n  name: string;\r\n  apiOrigin: string;\r\n};\r\n\r\nexport const handler = async (data: Data) => {\r\n  const url = new URL(data.apiOrigin);\r\n  url.pathname = `/vault/${data.name}`;\r\n\r\n  return fetch(url.href, {\r\n    method: 'DELETE',\r\n  }).then(res => res.json());\r\n};\r\n```\r\n\r\nThe secure action is then consumed via the SecureContextApi inside the plugin like this:\r\n\r\n```ts\r\nimport * as deleteVaultItem from '../../secure/delete-vault-item';\r\n\r\n// inside click handler\r\nawait secureContextApi.execute(deleteVaultItem, {\r\n  name: 'mona-lisa',\r\n  apiOrigin: 'http://localhost:3002',\r\n});\r\n```\r\n\r\n# Continued Work\r\n\r\nWe don't have any immediate plans to implement the PoC in Backstage as we're still very focused on Phase 2. I still wanted to get this RFC and PoC posted to gather feedback, and also make it possible for the Backstage community to pick it up and continue the work, in case it is viewed as a requirement to use Backstage."},{"labels":[null,"enhancement",null],"text":"## Feature Suggestion\r\n\r\nWe should use an external schema format to describe the required fields in catalog descriptor files. That way we can share the schema easier, and generate documentation for it, for example something like https://github.com/adobe/jsonschema2md.\r\n\r\n## Possible Implementation\r\n\r\nUse JSONSchema to describe the format, and https://www.npmjs.com/package/ajv for validation. The descriptor file format is WIP, so keep the schema simple and just stick to what is in master atm.\r\n\r\nThe current validations are here: https://github.com/spotify/backstage/blob/2d0c1afe624e73258aed26ca5b23d38ab77d47e4/plugins/catalog-backend/src/descriptors/component.ts#L30, https://github.com/spotify/backstage/blob/2d0c1afe624e73258aed26ca5b23d38ab77d47e4/plugins/catalog-backend/src/descriptors/envelope.ts#L27\r\n\r\n## Context\r\n\r\nThe descriptor file format is being discussed in https://github.com/spotify/backstage/issues/767, and we will eventually want to have a complete schema for it. I'm thinking JSONSchema is best, but open to suggestions. Another option could be something like https://github.com/chrusty/protoc-gen-jsonschema, but I only think we should go there if we end up using gRPC more.\r\n"},{"labels":["enhancement",null],"text":"## Feature Suggestion\r\n\r\nWe should have a public Backstage app deployed for managing this project. Use cases would be exploring available plugins, overseeing PR deployments and GitHub workflows, providing an auth backend for development, and simply trying out some plugins, and more.\r\n\r\n## Possible Implementation\r\n\r\nWe may want to deploy this outside of Spotify infra so that we can have more direct dogfooding of public plugins for .e.g k8s.\r\n\r\n## Context\r\n\r\nDogfooding at it's finest 👌. But it should also be useful as a showcase and for people contributing to the project."},{"labels":[null,"enhancement"],"text":"## Feature Suggestion\r\n\r\nWe're currently using [rollup-plugin-typescript2](https://github.com/spotify/backstage/blob/a92f662d88347a912391b6a6d13dc7d64e3230b5/packages/cli/src/commands/plugin/rollup.config.ts#L47), is really slow. Benchmarking shows that by far the majority of time is spent in this plugin using build, and using `tsc` directly is about 3 times faster.\r\n\r\n## Possible Implementation\r\n\r\nTry out https://github.com/rollup/plugins/tree/master/packages/sucrase for stripping types. This will leave us without any type definitions though, and one solution to that issue could be to run a separate `tsc` process to generate types in parallel. For watch mode we would need to hook into the (rollup watch events)[https://github.com/spotify/backstage/blob/a92f662d88347a912391b6a6d13dc7d64e3230b5/packages/cli/src/commands/plugin/build.ts#L67] and spawn the `tsc` process. There are some possible issues with this approach though. Since types are not output in sync with JS, watch consumers could run into type issues, or we might end up triggering a second unwanted refresh when the type build completes.\r\n\r\n## Context\r\n\r\nThe `plugin:build` command is too slow for development right now. `backstage/core` takes ~1min to build or start up in watch mode.\r\n\r\nThis is intended to become less of an issue for plugins and separate backstage apps over time, since the plan is to rely more on `plugin:serve` to serve and watch the plugin code itself, and using packaged versions of `@backstage/core` etc. We still want `plugin:build` to be faster though, or we might need to consider switching to alternative modes of wiring things up for dev.\r\n\r\nA bit of extra context around the current architecture of separate builds for all packages is that we currently have a single build internally, and it's quite slow in a number of ways. It's slow to start up the app, which is something we're intending to solve with the separated builds and `plugin:serve`. Typescript completion in editors is also pretty slow, and the goal is to improve that by using type declarations from build output rather than source files."},{"labels":[null,"enhancement",null],"text":"As part of clarifying what is part of the open source offering and what is examples or private code, we should signal these differences using package names/namespaces.\r\n\r\nSuggested solution:\r\n\r\n* Let all public, published packages retain their `@backstage` namespace. \r\n* Change all private packages in the open source project (`plugins/home-page`, `plugins/welcome`) to be under an `@internal` namespace\r\n* Change the create-app template accordingly\r\n* For future additions to the create-app template, such as a placeholder package for internal-only shared components or so, make sure that that also gets the `@internal`+private treatment\r\n* Offer an option in the create-plugin script to configure the new plugin as `@internal` (and private) upfront, or as `@spotify`.\r\n* Update documentation accordingly, where appropriate"},{"labels":[null,"enhancement",null],"text":"<!--- Provide a general summary of the feature request in the Title above -->\r\n\r\nContext https://labs.spotify.com/2020/04/14/when-should-i-write-an-architecture-decision-record/\r\n\r\nPing @jomaxx -- author of ^\r\n\r\n## Feature Suggestion\r\n<!--- If you're looking for help, please see https://backstage.io/ --->\r\n<!--- Tell us how we could improve your experience -->\r\n\r\nStore architectural decisions somewhere in the repo.\r\n"},{"labels":["enhancement",null],"text":"<!--- Provide a general summary of the feature request in the Title above -->\r\n\r\n## Feature Suggestion\r\n<!--- If you're looking for help, please see https://backstage.io/ --->\r\n<!--- Tell us how we could improve your experience -->\r\n\r\nWhen Pull Requests make breaking changes (UI, build, etc.), screenshots are a good way to help reviewers merge PR with confidence. (We already have this.)\r\n\r\nHowever, for build fixes like https://github.com/spotify/backstage/pull/534, it will be nice to have the branch deployed somewhere on web and the reviewers can visit the link and test the changes!\r\n\r\n## Possible Implementation\r\n<!--- Not obligatory, but ideas as to the implementation of the addition or change -->\r\n\r\nHeroku can be used for this. They call it [\"Review apps\"](https://devcenter.heroku.com/articles/github-integration-review-apps). When a PR is created, the pipeline triggers, and a new app is created for the feature branch e.g. https://backstage-pr-xxx.herokuapp.com\r\n\r\n## Context\r\n<!--- What are you trying to accomplish? -->\r\n<!--- Providing context (e.g. links to configuration settings, stack trace or log data) -->\r\n<!--- helps us come up with a solution that is most useful in the real world -->\r\n\r\nMaking it easy for reviewers to accept breaking changes."},{"labels":["enhancement",null,null],"text":"## Feature Suggestion\r\n\r\nAdd a `yarn clean` command to the root package and any package with build output\r\n\r\n## Possible Implementation\r\n\r\nClean command that deletes the build output. I think we could rely on a single dependency in the root package for the remove command, such as rimraf.\r\n\r\n## Context\r\n\r\nShould be useful for troubleshooting build issues and when working on the CLI build tooling."},{"labels":["enhancement",null],"text":"## Feature Suggestion\r\n\r\nWe should run prettier checks as a part of CI, and possibly supply a yarn script for running it locally too.\r\n\r\n## Possible Implementation\r\n\r\nPrettier checks can take a while so would like to separate it out as a command inside each package, so that we can run it with `lerna --since` in CI.\r\n\r\n## Context\r\n\r\nGetting some PRs without proper code formatting, which will happen as long as we don't enforce prettier checks. Not everyone has prettier installed locally or uses an Editor that supports it."},{"labels":[null,"enhancement",null],"text":"<!--- Provide a general summary of the feature request in the Title above -->\r\n\r\n## Feature Suggestion\r\nSupport Dark Mode on browsers\r\n\r\n## Possible Implementation\r\nUsing CSS3 directives\r\n"},{"labels":[null,"enhancement"],"text":"<!--- Provide a general summary of the feature request in the Title above -->\r\n\r\n## Feature Suggestion\r\n<!--- If you're looking for help, please see https://backstage.io/ --->\r\n<!--- Tell us how we could improve your experience -->\r\n\r\nMake it possible to hide functionality behind a **feature flag**. Example from Spotify internal:\r\n\r\n<img width=\"818\" alt=\"Screenshot 2020-03-22 at 22 32 23\" src=\"https://user-images.githubusercontent.com/190856/77261197-182cd000-6c8d-11ea-9514-c7089585f8a1.png\">\r\n\r\n\r\n## Possible Implementation\r\n<!--- Not obligatory, but ideas as to the implementation of the addition or change -->\r\n\r\nExample code:\r\n```\r\nimport FeatureFlags from 'shared/apis/featureFlags/featureFlags';\r\n\r\nregisterFeatureFlag('my-feature');\r\n\r\nif (FeatureFlags.getItem('my-feature')) {\r\n  // Do something you don't want everyone to see.\r\n}\r\n```\r\n\r\n## Context\r\n<!--- What are you trying to accomplish? -->\r\n<!--- Providing context (e.g. links to configuration settings, stack trace or log data) -->\r\n<!--- helps us come up with a solution that is most useful in the real world -->"},{"labels":[null,"enhancement",null],"text":"Implement our internal use-case of allowing creation of new backend services from a template:\r\n\r\n![1](https://user-images.githubusercontent.com/190856/77178005-c33f5d00-6ac6-11ea-8774-016f3d600a2d.png)\r\n\r\n\r\nDemo video: https://www.youtube.com/embed/U1iwe3L5pzc\r\n\r\n**Basic flow:**\r\n\r\n- Select from a list of \"templates\", e.g. \"Spring Boot Service\".\r\n- Provide basic metadata about the service.\r\n- Select in which code repository the service should live in.\r\n- Create a new repo and \"hello world\" service based on the selected template.\r\n\r\nLonger term the micro service should be registered in an \"inventory system\", keeping track of what team owns it. This is out-of-scope for this Issue.\r\n\r\nMore background: https://backstage.io/blog/2020/03/18/what-is-backstage#1-creating-a-new-microservice"},{"labels":["enhancement",null,null],"text":"While I see that there is a way to maintain secrets inside of the `secrets.env` file, I know some enterprises do not like having plain-text passwords on the filesystem, this integration could prevent a security finding.\r\n\r\nPossible Library: https://www.npmjs.com/package/node-vault"},{"labels":[null,"enhancement"],"text":"Currently you have to fix all lint issues before the app serve will show the page, which is pretty annoying.\r\n\r\nThe cause is a clash between `react-scripts` and spotify `web-scripts` where the former uses warning to signal lint issues that won't cause issues during development, but `web-scripts` lists all rules as errors.\r\n\r\nI'm thinking we might be able to do more merging of the lint rules, or ask `web-scripts` to adopt a similar pattern."},{"labels":[null,null,"enhancement",null,null,null],"text":"The pattern in the main plugin header gradient is hardly visible:\r\n\r\n![Screenshot 2020-03-15 at 20 53 38](https://user-images.githubusercontent.com/190856/76709455-2e6fe480-66ff-11ea-99af-d71b8388fdcc.png)\r\n"},{"labels":["enhancement",null,null],"text":"RR6 is currently in alpha but its design is relevant to how we would like to structure the app."},{"labels":[null,null,"enhancement"],"text":"I do not seem to get the same visuals as others when creating a plugin. There is no progress indicator and some emojis seems to be missing: \r\n\r\n<img width=\"1180\" alt=\"Screenshot 2020-03-07 at 14 21 05\" src=\"https://user-images.githubusercontent.com/190856/76144331-5fa54080-607f-11ea-9317-4e7cd36fdde6.png\">\r\n"},{"labels":[null,"enhancement",null],"text":"![Screenshot 2020-03-05 at 12 55 28](https://user-images.githubusercontent.com/190856/75979373-a90b5980-5ee0-11ea-9fee-d4d43d509708.png)\r\n"},{"labels":[null,"enhancement",null],"text":"So I create a plugin and it gets added to the main app. What if this plugin should not be open sourced? How do we I move it to an internal repo and stil use it in the main Backstage app?\r\n\r\nThis needs to be documented, and ideally supported in the CLI."},{"labels":[null,null,"enhancement",null],"text":"Don't use the Home theme."},{"labels":[null,"enhancement",null,null],"text":"Currently `yarn && yarn create-plugin`. Couldn't `yarn create-plugin` run the same thing as `yarn` so that it can be removed?"},{"labels":[null,"enhancement"],"text":"Generate `plugin-info.yaml` or similar.\r\n\r\n**Include following metadata:**\r\n* Company name\r\n* Author\r\n* Description\r\n* ..."},{"labels":["enhancement",null],"text":"Introduce a site config file ([example](https://github.com/spotify/backstage-microsite/blob/master/website/siteConfig.js)) so that people deploying Backstage can customize things like:\r\n\r\n* Site name (everyone may not want to use \"Backstage\")\r\n* Site logo\r\n* Proxy URLs etc\r\n* Timezones for Homepage headers\r\n* GitHub URL\r\n* ...\r\n"},{"labels":["enhancement"],"text":"Use world wide time zones instead of Spotify focused. "},{"labels":[null,"enhancement"],"text":"Replace internal implementation of DataGrid with some other open alternative. Having a simple-to-use grid component is essential for easy development."},{"labels":["enhancement"],"text":"Custom styling is required for a plugin to render correctly with a header and content:\r\n\r\n```javascript\r\nconst useStyles = makeStyles<Theme>(theme => ({\r\n  mainContentArea: {\r\n    overflowX: 'hidden',\r\n    overflowY: 'auto',\r\n  },\r\n  pageBody: {\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nconst ExampleComponent: FC<{}> = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Page theme={theme.home}>\r\n      <div className={classes.mainContentArea}>\r\n        <Header title=\"Welcome to stefan-demo!\" subtitle=\"Example\"></Header>\r\n        <div className={classes.pageBody}>\r\n          <Typography variant=\"h3\" style={{ padding: '8px 0 16px 0' }}>\r\n            Page title\r\n          </Typography>\r\n          <InfoCard title=\"Information card\" maxWidth>\r\n            <Typography variant=\"body1\">\r\n              All content should be wrapped in a card like this\r\n            </Typography>\r\n          </InfoCard>\r\n        </div>\r\n      </div>\r\n    </Page>\r\n  );\r\n};\r\n```\r\n\r\nYou should not need divs with custom styling. This should all be taken care of by the core components such as `Page` and `Header`."},{"labels":[null,"enhancement"],"text":"Any reason why these steps could not be automated? I don't see any situations where you create a new plugin and don't want to try it out.\r\n\r\n<img width=\"910\" alt=\"Screenshot 2020-02-28 at 12 33 44\" src=\"https://user-images.githubusercontent.com/190856/75545467-a7481e80-5a26-11ea-9ca0-f050fe4d8021.png\">\r\n"},{"labels":[null,"enhancement"],"text":"I don't really understand what this means `Run yarn start in the plugin directory to start it`:\r\n\r\n<img width=\"570\" alt=\"Screenshot 2020-02-28 at 12 21 44\" src=\"https://user-images.githubusercontent.com/190856/75544809-0147e480-5a25-11ea-83ec-7e235685c827.png\">\r\n\r\nMaybe `cd` into that newly created repo?"},{"labels":[null,"enhancement"],"text":"We should set permissions on our Figma files to world-viewable and allow public comments"},{"labels":["enhancement",null],"text":"For a properly nice open source project I think the makefile should support other platforms, or at the very least it should be documented what tools are needed to install."},{"labels":[null,"enhancement",null],"text":"I notice that the standalone react-devtools use http instead https like `\"<script src=\"http://192.1.2.3:8097\"></script>\"` ([src code](https://github.com/facebook/react/blob/4c7036e807fa18a3e21a5182983c7c0f05c5936e/packages/react-devtools/app.html#L186-L194))，but my website is always https, so it will get broken because I cant change it to http if it's in `iframe`(it's diffcult to change the host environment/website protocol).\r\n\r\nI'm not familar with the react-devtools implementations, maybe something cause it can only use http to open the server, happy to hear the details, thanks!\r\n\r\nReact-devtools: 3.6.3\r\n\r\n"},{"labels":[null,null,"enhancement"],"text":"It'd be nice to have a toggle to pause the debugger when warnings fire so you can inspect the stack as it's happening.\r\n\r\n```\r\nconsole.error = function() {\r\n  ...\r\n  if (isBreakOn) {\r\n    debugger;\r\n  }\r\n}\r\n```\r\n\r\nSee https://github.com/facebook/react/pull/19044"},{"labels":[null,"enhancement"],"text":"Noticed today that Vue's devtools have an awesome \"Inspect Vue component\" option when right-clicking on a webpage (added in https://github.com/vuejs/vue-devtools/pull/479).\r\n\r\nThe React devtools should have the same feature! It would be useful when debugging for sure.\r\n"},{"labels":[null,null,"enhancement"],"text":"## The current behavior\r\n\r\nThe full value of the `key` is very difficult / impossible to find and use in the interface of the React Devtools.\r\n\r\n![Kapture 2020-04-22 at 11 47 47](https://user-images.githubusercontent.com/1935696/79997715-25222680-84ba-11ea-97ba-51f1679a8c91.gif)\r\n\r\nOnly managed to find it by accident :(\r\n\r\n## The expected behavior\r\n\r\nThe `key` is visible in the props list to the right.\r\n\r\n### Detailed Proposal\r\n\r\nAs mentioned below in https://github.com/facebook/react/issues/18702#issuecomment-617924196\r\n\r\nAdd a light divider and new section in the props panel to the right.\r\n\r\nPotentially also add a question mark that shows an explanation about the fact that things in this section are not really props.\r\n\r\nRef (Original implementation): https://github.com/facebook/react-devtools/pull/328"},{"labels":["enhancement"],"text":"## Feature Request\r\n\r\nprovide API on react-dom to convert style object to CSS string. the API could be used to build dynamic CSS easily.\r\n\r\n### Approach 1\r\n\r\n```js\r\nimport {createCSS} from 'react-dom'\r\n\r\nconst inlineStyleString = createCSS({\r\n  overflow: 'hidden', \r\n  display: '-webkit-box',\r\n  WebkitLineClamp: 2,\r\n})\r\n\r\nreturn <style>{`.clamp-text { ${inlineStyleString} }`}</style>\r\n```\r\n\r\n### Approach 2\r\n\r\nAnother approach is to only map the key and value from the original style object, and let user play with it.\r\n\r\n```js\r\nimport {createStyles} from 'react-dom'\r\n\r\n// return a object with key-value pairs of css rules\r\nconst cssStyleObject = createCSS({\r\n  WebkitTransform: 'scale(2)',\r\n})\r\n// return { '-webkit-transform': 'scale(2)'  }\r\n\r\nconst inlineStyleString = Object.keys(cssStyleObject).reduce((serialized, key) => {\r\n  serialized += `${key}: ${cssStyleObject[key]};`\r\n  return serialized\r\n}, '')\r\n\r\nreturn <style>{`.clamp-text { ${inlineStyleString} }`}</style>\r\n```\r\n\r\n\r\n## Why\r\n\r\nSee other react styling library like **radium**, the way to build css is quite similar with react inline style if they need anything aligned with react like browser prefix such as `Webkit` or detect the unit less number for some special rule such as `line-height`, they have to re-implement the logic.\r\n\r\nthe style object in react is quite convenient, but it's can only used for inline style. hope react team could consider to expose it in the react-dom. might not the origin function name, but the same functionality."},{"labels":[null,"enhancement"],"text":"Dan asked me to open up an issue: https://twitter.com/dan_abramov/status/1246883821477339139\r\n\r\nMy proposal is to extend React with a small hook that allows us to mutate nodes without causing render:\r\n\r\n```jsx\r\nimport React, { useMutation }\r\n\r\nfunction A() {\r\n  const [specialRef, set] = useMutation()\r\n\r\n  useEffect(() => {\r\n    // the following would execute sync and without causing render\r\n    // going through the same channel as a regular props update with all\r\n    // the internal interpolation (100 --> \"100px\")\r\n    set({ style: { left: 100 } })\r\n  }, [])\r\n\r\n  return <div ref={specialRef} ... />\r\n```\r\n\r\nThis would make the react eco system essentially cross platform in one strike. It uses the fact that reconcilers know how to handle props, something we don't know in userland unless we cause render to set fresh props, which is not at all optimal for animation or anything frame based. react-dom for instance knows what `margin: 3px` is, react-three-fiber knows what `position: [1,2,3]` is, and so on. These details are defined in the reconciler:\r\n\r\n```jsx\r\n  commitUpdate(instance: any, updatePayload: any, type: string, oldProps: any, newProps: any, fiber: Reconciler.Fiber)\r\n```\r\n\r\nIf libraries could use this knowledge from outside they could deal with any platform. Animation libraries like react-spring or framer-motion could animate everything: dom nodes, react native views, meshes, hardware diodes. We could finally write libraries that are not reliant on platforms."},{"labels":[null,"enhancement"],"text":"This list is pretty awesome:\r\n\r\n<img width=\"390\" alt=\"Screenshot 2020-04-03 at 00 12 08\" src=\"https://user-images.githubusercontent.com/810438/78308234-e0047780-753f-11ea-9d4f-1e2d31e5baa0.png\">\r\n\r\nBut always struggle to guess which component in the owner list I need to jump to.\r\n\r\nWe should make hovering the owner list highlight components, just like the main tree view does.\r\n\r\n@hristo-kanchev, interested?"},{"labels":[null,"enhancement",null],"text":"Feature request from a DevTools user at Faceook:\r\n> If I mouse over a node in the flame graph if you can highlight it in the view like the inspector that would be really amazing!"},{"labels":[null,"enhancement"],"text":"**What is the current behavior?**\r\n\r\nAll the components name  in the Component tree are of the same color\r\n\r\n**What is the expected behavior?**\r\n\r\nIt would be helpful if they have different colors indicating the type of Component (whether its native HTML node or Contexts or simple react component) I know we can filter it, but visual indication will be helpful too.\r\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nI have played a bit with Concurrent Mode and the Suspense API.\r\nReally exiting features and I look forward to use them in a stable release. Thank you for everything you are doing!\r\n\r\nRegarding the `Suspense` component, could it be nice to have a property (both in Concurrent Mode and in \"normal/synchronous\" mode) which would allow us to set the minimum duration of the `Suspense` fallback UI in case the fallback UI ever gets rendered?\r\n\r\n**What is the expected behavior?**\r\nLet me do an example. Try clicking on the `Next` button in this codesandbox: \r\nhttps://codesandbox.io/s/cold-monad-ifr29.\r\n\r\nYou will see that the `Suspense` fallback UI is rendered and stays in the tree just for a little moment (`~200ms`) because both promises resolve in `1200ms`, while `useTransition` has a `timeoutMs` of 1 second.\r\nIn my opinion, this is a bit unpleasant to the eye.\r\n\r\nWouldn't it be nicer if we could tell the `Suspense` component something like \"If you ever render the fallback, show it for at least N millisec.\"? E.g.:\r\n\r\n```jsx\r\n...\r\nfunction ProfilePage({ resource }) {\r\n  return (\r\n    <Suspense fallback={<h1>Loading profile...</h1>}\r\n      // If the fallback ever gets rendered,\r\n      // it will be shown for at least 1500 millisec.,\r\n      // even if the promise resolves right after rendering the fallback.\r\n      fallbackMinDurationMs={1500}>\r\n      <ProfileDetails resource={resource} />\r\n      <Suspense fallback={<h1>Loading posts...</h1>}>\r\n        <ProfileTimeline resource={resource} />\r\n      </Suspense>\r\n    </Suspense>\r\n  );\r\n}\r\n...\r\n```\r\n\r\nConsider an animated spinner used as a fallback of `Suspense`, if it happens that the promise resolves just a few milliseconds after rendering the fallback like above, the spinner will be rendered and suddenly disappear, without completing its animation cycle and showing an incomplete animation.\r\n\r\nWhereas, if we could keep the spinner in the tree for at least `fallbackMinDurationMs` millisec. once rendered, we could improve its appearance in such cases.\r\n\r\nThe `Suspense` component responsible for rendering the fallback would have to wrap the caught Promise in a promise which would look something like this:\r\n\r\n```js\r\nfunction maxDelayFallbackPromise({\r\n  promise,\r\n  timeoutMs, // ---> This would be the value of `useTransition`'s `timeoutMs`\r\n  onFallback = () => {}, // ---> This code would run in case `timeoutMs` exceeds (i.e. when `Suspense`'s fallback UI is rendered)\r\n  fallbackMinDurationMs\r\n} = {}) {\r\n  // Generate a unique identifier, like a string, a number, in order to identify which promise resolves first...\r\n  const uniqueIdentifier = `promise_value_${Math.random()}`\r\n  return Promise.race([\r\n    promise,\r\n    timeout(timeoutMs).then(() => uniqueIdentifier)\r\n  ]).then(value => {\r\n    if (value === uniqueIdentifier) {\r\n      onFallback()\r\n      return minDelayPromise(promise, fallbackMinDurationMs)\r\n    }\r\n    else {\r\n      return value\r\n    }\r\n  })\r\n}\r\n```\r\n\r\nWhere `timeout` and `minDelayPromise` are:\r\n\r\n```js\r\nfunction timeout(delayMs) {\r\n  return new Promise(resolve => setTimeout(resolve, delayMs))\r\n}\r\n\r\nfunction minDelayPromise(promise, minDelay) {\r\n  return Promise.all([\r\n    promise,\r\n    timeout(minDelay)\r\n  ]).then(([value]) => {\r\n    return value\r\n  })\r\n}\r\n```\r\n\r\nThis could also apply to the `isPending` flag of `useTransition`...\r\n\r\nDo you think such a feature could improve the UX in such cases?\r\n"},{"labels":[null,null,"enhancement"],"text":"Reopening https://github.com/facebook/react-devtools/issues/966 as I feel it'd still be a great feature to have.\r\n\r\nTo reiterate, it'd be great to have a hotkey to trigger the \"Select an element in the page to inspect it\" functionality, similar to how `Ctrl` + `Shift` + `C` triggers Chrome's element inspector mode."},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature I suppose.\r\n\r\n**What is the current behavior?**\r\nSuspense fallback component flashes on and immediately unmounts (flashes off) when fetching is complete. See similar discussions [here](https://stackoverflow.com/questions/57404653/react-suspense-prevent-flashing-of-fallback-spinner) and [here](https://stackoverflow.com/questions/54158994/react-suspense-lazy-delay).\r\n\r\n**What is the expected behavior?**\r\nIt would be ideal to add better transitions to the fallback component when it mounts and unmounts, but doing so requires using something like [TransitionGroup](https://reactcommunity.org/react-transition-group/transition-group) or [Framer Motion](https://www.framer.com/api/motion/animate-presence/), which require a prop to listen to know when to mount and unmount. If we could somehow have the fallback component receive some kind of state from Suspense on when it is mounting and unmounting the fallback component, that would be great.\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\nRight now babel plugin emits globals: https://github.com/facebook/react/issues/16604\r\n\r\n```js\r\nwindow.$RefreshReg$ = () => {};\r\nwindow.$RefreshSig$ = () => type => type;\r\n```\r\n\r\nIt would be nice to have them configurable. That would allow to use `import.meta` in environments like SystemJS and have simpler implementation:\r\n\r\n```js\r\nimport runtime from 'react-refresh/runtime'\r\nruntime.injectIntoGlobalHook(window)\r\n\r\nSystem.constructor.prototype.createContext = function (url) {\r\n  return {\r\n    url,\r\n    $RefreshSig$: runtime.createSignatureFunctionForTransform,\r\n    $RefreshReg$: (type, id) => {\r\n      id = url + ' ' + id\r\n      runtime.register(type, id)\r\n    }\r\n  };\r\n};\r\n```\r\n\r\nIf you don't mind I could create PR with changes to react-refresh/babel next week.\r\n\r\nenvironment:\r\n```js\r\n{\r\n    \"systemjs\": \"^6.1.4\",\r\n    \"react\": \"^16.11.0\",\r\n    \"react-dom\": \"^16.11.0\",\r\n    \"react-refresh\": \"^0.6.0\"\r\n }\r\n```"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?** Feature\r\n\r\n**What is the current behavior?**\r\n\r\nSo for whatever reason, terser/minification causes a bug where one of my components is undefined during render. What I get is the standard production mode minified error.\r\n\r\nFor some reason this time, I can't seem to do *any* of the following:\r\n\r\n1. See any stack information for the component (React just says \"something somewhere is undefined\")\r\n2. Set a breakpoint on the error point (for some reason with webpack + devtool sourcemap, chrome isn't letting me do a mid-line breakpoint at any place above the error)\r\n3. Disable Reacts error catching temporarily so I can pause on the actual error\r\n4. Use a development version of React with any ease but with the prod settings (I tried turning off both process.env.NODE_ENV checks but then you get an error `It is not supported to run the profiling version of a renderer (for example, react-dom/profiling) without also replacing the scheduler/tracing)`\r\n\r\nA big upgrade here would be to fix all of these (except 2, which is either a Webpack or Chrome bug). Can we get better stacks in production mode? That's the ideal. That with number 3 would be the most helpful: a query like `?disableNiceErrors=true` that prevents React from catching/re-throwing the error later would make it so much easier.\r\n\r\nAs it is now, it's incredibly painful to debug (already an hour into it and without the breakpoints working on minified React it's hard to really even figure out where besides manual code commenting).\r\n\r\nEdit: A fifth would be source maps for react itself in production bundles which may work."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n**What is the current behavior?**\r\ntrigger by press enter button\r\n**What is the expected behavior?**\r\ntrigger by out of focus or pressing enter button\r\n"},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n**What is the current behavior?**\r\nit‘s hard for me to find a component in the profiler tab\r\n**What is the expected behavior?**\r\nadd a search function,just like components tab\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"I'd like to have a button that forces a re-render of the selected component when clicked. For example, adding a button like this on the right of the component controls:\r\n\r\n![image](https://user-images.githubusercontent.com/1500684/65933573-35b06980-e3cf-11e9-8245-e5bedac5c552.png)\r\n\r\nThis can be accomplished today by adding a new prop and changing the prop, but it's more work than I want to do.\r\n\r\nThis would be useful for use while profiling how a component performs with unnecessary re-renders. Right now I just have a button that's tied to a \"forceRender\" function:\r\n\r\n```jsx\r\nfunction useForceRerender() {\r\n  const [, set] = React.useState()\r\n  return React.useCallback(() => set({}), [])\r\n}\r\n\r\nfunction FilterComponent() {\r\n  const forceRerender = useForceRerender()\r\n \r\n  return (\r\n    <>\r\n      <button onClick={forceRerender}>force rerender</button>\r\n      {/* more JSX */}\r\n    </>\r\n  )\r\n}\r\n```\r\n\r\nWould be cool to have this built-in :)"},{"labels":[null,null,"enhancement",null],"text":"Hey guys, great job with the new devtools 💯 perhaps this request can be put in the backlog for a future release as I think it could be quite useful and could save a few steps for developers. \r\n\r\n**What is the current behavior?**\r\n- Copying data to clipboard stringifies all key-value pairs of an object\r\n- When the keys' values happen to be objects or arrays, the values are given in constructor form rather than seeing the contents of that object/array\r\n\r\nThis is what was copied:\r\n<img width=\"369\" alt=\"Screen Shot 2019-09-27 at 12 24 19\" src=\"https://user-images.githubusercontent.com/30755017/65767498-f4496100-e125-11e9-8f8b-3faa4516d0c2.png\">\r\n\r\nThis is a pasted version in VSCode:\r\n<img width=\"399\" alt=\"Screen Shot 2019-09-27 at 12 24 48\" src=\"https://user-images.githubusercontent.com/30755017/65767486-ee538000-e125-11e9-9886-7dcd165c19db.png\">\r\n\r\n**What is the desired behavior?**\r\n- When I click on \"Copy to clipboard\" in react-devtools, my copied object's data _keys_ and _values_ are in an unstringified format, or at least, I am presented the option to have this copied in an unstringified format\r\n- The _values_ of each key is readable, e.g: if the value is an object, I can see the expanded object and all its key-value pairs clearly as shown here (this is logged into Chrome console from react-devtools)\r\n<img width=\"311\" alt=\"Screen Shot 2019-09-27 at 12 29 11\" src=\"https://user-images.githubusercontent.com/30755017/65767365-99176e80-e125-11e9-98d3-98fd9c4889f9.png\">\r\n\r\n"},{"labels":[null,"enhancement",null],"text":"I wonder whether is it in the plan to do the inverse of hiding components that match the filters, which is \"show only components where match the filters\"?\r\n\r\nI am currently doing a negative lookahead regex filter to achieve the behavior: https://twitter.com/lihautan/status/1174239606612647941. \r\n\r\nI am willing to work on it if this is a good feature to have."},{"labels":[null,"enhancement"],"text":"\r\n**Do you want to request a *feature* or report a *bug*?**\r\n*feature*\r\n\r\n**What is the current behavior?**\r\n[as demonstrated here, \"Why did this render?\"](https://github.com/facebook/react/issues/16437#issuecomment-524892514) does a great job reporting what prop changed, but it does not yet report which _nested_ value changed for props that are comprised of nested objects.\r\n\r\n**What is the expected behavior?**\r\nThe \"why did this render?\" shows a collapsible tree with the \"leaf\" value that changed inside the prop object displayed.\r\n\r\nA couple use cases this would benefit:\r\nIn some cases, it is most convenient creating props that are nested objects. For instance, maybe you need to pass an object to a library, and you'd like to avoid storing the individual object items as separate prop variables such that you don't need to redefine them together as a dict later on, but changes are due to a single element in the dict that you'd like visibility on in react devTools.\r\n\r\nIn rarer cases, it is unavoidable having props that aren't nested objects. For instance, how could I preserve the `.prototype` key of my `props` object without react stripping it? If I wrap my props inside an object, that key can be preserved. But now *all* my props are considered 1 prop to the profiler and I have no visibility on which prop changed. With this change, I could expand the tree and drill down to which individual values changed.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nNew feature never before released in React DevTools. I am using `16.8.6`\r\n"},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\n* feature request\r\n* Original issue is: https://github.com/facebook/react-devtools/issues/922\r\n   * There are more details.\r\n* Mozilla's Bugzilla: https://bugzilla.mozilla.org/show_bug.cgi?id=1573027\r\n\r\n**What is the current behavior?**\r\n\r\nThe react-devtools toolbar button does not light up and clicking on it says \"This page does not appear to be using react\". This is probably since extensions are not allowed to inject scripts into other extensions' pages.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe react-devtools toolbar button should light up and the addon should be able to debug the page\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nThis is still reproducible\r\n\r\n* Firefox v68~\r\n* react devtools v4.0.5\r\n* react v16.9\r\n"},{"labels":[null,null,"enhancement"],"text":"**feature**\r\n\r\n**What is the current behavior?**\r\nOn the new developer tool you are unable to see what property type the value. You used to be able to see if the value was a string or int because of the quotation marks (for example id: \"1\" (string) or id: 1 (int)). Both string and int are shown without quotes.\r\n\r\n**What is the expected behavior?**\r\nI want to see if the value inside the prop or state is an string or integer by using quotation marks on the value.\r\n`id: \"1\"`\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nI'm using version:\r\n4.0.5 (8/19/2019)\r\n\r\nDid this work in previous versions of React?\r\nYes, 3.*"},{"labels":[null,null,"enhancement"],"text":"Hi, I really like new dev tools (4.0.5), but I would like to request one useful feature.\r\n\r\nIn previous version it was possible to save inspected value (prop/state/context) and its parts as a global variable using context menu->store as global variable, so it can be easily be accessed through console using `$tmp{n}`. In current version this is behaviour was replaced be creating new \"bug\" button which will just print all values in console. Unfortunately it's hard to navigate through this object, because $_ in console will return undefined. And in order to access it you need to expand group, find desired property and open context menu->store as global variable. \r\nIt would be perfect if you combine these 2 approaches so it would be possible to both print values using \"bug\" button and opening context menu directly in react dev tools panel wihtout need of intermediate step. \r\n\r\nThanks! \r\n\r\n"},{"labels":[null,null,"enhancement"],"text":"If I understood correctly, this is the correct repository for devtools v4, right?\r\n\r\nI just noticed that react devtool were updated. I'm missing the \"Highlight Updates\" function.\r\nHow can I activate it?\r\n\r\n![image](https://user-images.githubusercontent.com/12381373/63209674-4ab58f80-c0e4-11e9-8134-40789625c81e.png)\r\n\r\n![image](https://user-images.githubusercontent.com/12381373/63209676-543ef780-c0e4-11e9-8128-a73c4b6bf8f7.png)\r\n\r\nVersion: 4.0.2 (8/15/2019)\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nBug/unexpected behavior.\r\n\r\n**What is the current behavior?**\r\n\r\nWhen an object or array is empty, there's no arrow to expand and see that it's empty, nor is there an `(empty)` indication. Initially, I was concerned that I couldn't expand any object or array from the new React DevTools due to this.\r\n\r\n![Screen Shot 2019-08-16 at 3 11 35 PM](https://user-images.githubusercontent.com/11951801/63195539-7aa75900-c038-11e9-95fe-4754f7d14693.png)\r\n\r\n**What is the expected behavior?**\r\n\r\nI would expect to either be able to expand the empty object, or to see `(empty)` next to the non-expandable object.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nChrome version: 76.0.3809.100 (Official Build) (64-bit)\r\nReact Developer Tools Version: 4.0.2 (8/15/2019)\r\n\r\n[Reference discussion on Twitter](https://twitter.com/taniarascia/status/1162441422496325633)\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nDevtools used to be able to expand observables created by Mobx. With the new update that is no longer possible.\r\n![image](https://user-images.githubusercontent.com/3083189/63194767-18495b00-c02e-11e9-95d2-1c83edbf2f26.png)\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nhttps://codesandbox.io/embed/clever-blackwell-h0nzb\r\n\r\nCheck the props of the wrappedComponent in devtools. store.things does not expand.\r\n\r\n**What is the expected behavior?**\r\nDevtools should expand Observables as it does any other object.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nThis only seems to be an issue with Observables created by Mob v4. v5 works as expected.\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nWhen the state or props are formed by Immutable.js objects, react devtools cannot expand it nor copy to temporal variable anymore.\r\n![Screenshot from 2019-08-16 16-18-09](https://user-images.githubusercontent.com/28344917/63174215-c90d2580-c041-11e9-847c-7bbd153399f9.png)\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://codesandbox.io/s/withered-cherry-h3dfh\r\n\r\n**What is the expected behavior?**\r\nBe able to inspect the value of the immutable object or at least, copy it into a temporal variable.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16.8.6\r\nChrome Version 70.0.3538.77 (Official Build) (64-bit)"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the expected behavior?**\r\n\r\nPortals are in a weird state. The core `react` knows about them but you can only create them from other libs (e.g. `ReactDOM`). You have to branch your code because they can’t be server-side rendered. And so on.\r\n\r\nThis is just a pre-RFC to brainstorm ways that Portals can become first-class citizens:\r\n\r\n* Extend `React.createRef()` to allow an optional renderer-specific argument (e.g. the DOM element), matching `useRef()`\r\n* Add `React.createPortal(child, ref)` (*note the use of `ref` rather than a e.g. a direct DOM element*)\r\n* Deprecate `ReactDOM.createPortal()`\r\n\r\nNow with some thought into the structure of your app with modals, they could be e.g. server-side rendered with:\r\n\r\n```\r\nfunction App(props) {\r\n  const modal = useRef(null)\r\n  return (\r\n    <div>\r\n      <ModalContext.Provider value={modal}>\r\n        <div>{props.content}</div>\r\n      </ModalContext.Provider>\r\n      <div ref={modal} />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Modal(props) {\r\n  const modal = useContext(ModalContext)\r\n  return React.createPortal(\r\n    props.children,\r\n    modal,\r\n  )\r\n}\r\n\r\n// Somewhere in {props.content} tree...\r\nreturn (\r\n  <>\r\n    {visible && (\r\n      <Modal>\r\n        Hello, World!\r\n      </Modal>\r\n    )}\r\n  </>\r\n)\r\n```\r\n\r\nAfter `ReactDOM.createPortal(...)` is deprecated, legacy web or those with no need to SSR portals can simply upgrade with:\r\n\r\n```\r\nthis.el = React.createRef(document.createElement('div'))\r\n```\r\n\r\nfor the same behavior.\r\n\r\nAs an initial version, React can error if `ref.current` is null when it goes to mount the portal. Some sort of dirty flag could be considered separately if proven necessary, but with the pattern proposed above, it shouldn’t be necessary as the portal host would *always* be mounted first as a natural consequence of how React works."},{"labels":[null,null,"enhancement"],"text":"Spinoff from https://github.com/facebook/react/pull/15797#issuecomment-504782329.\r\n\r\nBoth in React Native and Create React App, redboxes are full screen. But in React, most errors are recoverable. Even with accidental runtime crashes it's useful to look \"underneath\" to see whether your boundary worked as expected, and to have an idea of the end user experience.\r\n\r\nWe could solve this with a collapsed-by-default floating error panel that just shows a list of messages. You can click to expand. We could also use this as an opportunity to unify the RN and web designs."},{"labels":[null,null,"enhancement"],"text":"Spinoff from https://github.com/facebook/react/pull/15797#issuecomment-504782329.\r\n\r\nWe might want to offer a way to \"bubble\" control flow up the tree a la Algebraic Effects. `throw Redirect()` is a canonical example. However, we want them to bypass the normal error boundaries. So it probably needs to be a first-class API."},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n![2019-05-29_13-00](https://user-images.githubusercontent.com/33522235/58580030-d3254200-8211-11e9-882d-85da2664a3b2.png)\r\n\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nI think the production environment, React Devtools you should not show any information about the state or components. similar to redux Devtools. \r\n**What is the current behavior?**\r\nJust now I can Edit some information with React DevTools in the production environment\r\n\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nCurrently, the options element only allows types number and string. \r\n\r\n**What is the expected behavior?**\r\nAn option should allow for a ReactNode as a child in addition to a number + string. \r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAll versions.\r\nAll browser types.\r\nTo the best of my knowledge, no.\r\n\r\np.s. This is my first feature request here, so let me know if I need to adjust the feature request in any way. "},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature request\r\n\r\n**What is the current behavior?**\r\n\r\nThe warnings for missing act() warnings around updates only happen in jest. \r\n\r\n**What is the expected behavior?**\r\n\r\nWe should support other test runners/frameworks as well (like jasmine, karma, etc)\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.8.0+"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nCurrently the recommended way to use hooks involves coupling them with components. By this I mean that components are aware of the hooks they consume and depend on them explicitly.\r\nThis [issue thread on the recompose repo](https://github.com/acdlite/recompose/issues/756) discusses this issue in some detail and how recompose favored keeping components dumb, but wraps them in HOC's to make them smart. Hooks promote baking the smartness right into the component itself.\r\n\r\n**What is the expected behavior?**\r\nReact should offer a way to decouple components from the hooks they consume. I suggest a `withHooks` HOC that maps hooks to props. This will be a familiar model for those who have used redux with react.\r\n\r\n```jsx\r\nconst withHooks = mapHooksToProps => WrappedComponent => {\r\n  return props => {\r\n    let hookProps = mapHooksToProps(props);\r\n    return <WrappedComponent {...hookProps} {...props} />;\r\n  };\r\n};\r\n\r\nconst Counter = props => {\r\n  return (\r\n    <div>\r\n      <div>Counter: {props.counter}</div>\r\n      <button onClick={props.increment}>Increment</button>\r\n      <button onClick={props.decrement}>Decrement</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapHooksToProps = props => {\r\n  let [counter, setCounter] = useState(0);\r\n\r\n  return {\r\n    counter,\r\n    increment: () => setCounter(prev => prev + 1),\r\n    decrement: () => setCounter(prev => prev - 1)\r\n  };\r\n};\r\n\r\nconst EnhancedCounter = withHooks(mapHooksToProps)(Counter);\r\n```\r\n\r\nDemo:\r\nhttps://codesandbox.io/s/ympq0rlv79\r\n\r\nSome reasons why this is nice:\r\n\r\n1) It decouples components from the things that make them smart. Some examples of things that could make dumb components smart include hooks, redux, and good ol' parent components. By mapping hooks to props, we make it very easy to swap a dumb component's hook-powered 'brain' for a new 'brain', say a redux-powered 'brain'.\r\n\r\n2) Not sure if it's a good idea, but i know several people trying to replace redux with hooks in their applications. For these people, migrations from redux to hooks would be dead simple because they could replace `mapStateToProps` and `mapDispatchToProps` with `mapHooksToProps` and wouldn't have to worry about touching the underlying component.\r\n \r\n3) Testing is also easier because we can test the component in isolation without the hooks baked in.\r\n\r\n4) It makes prop overrides possible. In the case of our EnhancedCounter, we could override the counter prop by doing `<EnhancedCounter counter={10} />`. A real world example of hooks making things harder to override includes material-ui's [new styling approach via hooks](https://material-ui.com/css-in-js/basics/#hook-api). Because classes are provided via hook and no longer via props, we would need custom logic to override classes via props with the new hook-based approach:\r\n```jsx\r\nexport default function Hook(props) {\r\n  let classes = useStyles();\r\n  classes = {...classes, ...props.classes};\r\n  return <Button className={classes.root}>Hook</Button>;\r\n}\r\n```\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nFor versions of react >= 16.8"},{"labels":[null,null,"enhancement"],"text":"some background:\r\n\r\nwhen dealing with inline styles (e.g. radium), SSR and caching of SSR results, you might run into problems because of differences in vendor prefixes. Best tradeof is to render always with all vendor prefixes on the server. But this will lead to style missmatches on hydration. You can use `suppressHydrationWarning`, but then you have to add this property to every element that receives these styles, which is not practical.\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\nstyle missmatch causes a warning on development. \r\n\r\n**What is the expected behavior?**\r\n\r\nyou can set a global flag to supress style missmatch warnings\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16.8"},{"labels":[null,"enhancement"],"text":"(This is a spinoff from [this thread](https://github.com/facebook/react/issues/15240).)\r\n\r\nIt's sometimes useful to be able to dispatch an action from within an async function, wait for the action to transform the state, and then use the resulting state to determine possible further async work to do. For this purpose it's possible to define a `useNext` hook which returns a promise of the next value:\r\n\r\n```js\r\nfunction useNext(value) {\r\n  const valueRef = useRef(value);\r\n  const resolvesRef = useRef([]);\r\n  useEffect(() => {\r\n    if (valueRef.current !== value) {\r\n      for (const resolve of resolvesRef.current) {\r\n        resolve(value);\r\n      }\r\n      resolvesRef.current = [];\r\n      valueRef.current = value;\r\n    }\r\n  }, [value]);\r\n  return () => new Promise(resolve => {\r\n    resolvesRef.current.push(resolve);\r\n  });\r\n}\r\n```\r\n\r\nand use it like so:\r\n\r\n```js\r\nconst nextState = useNext(state);\r\n\r\nuseEffect(() => {\r\n  fetchStuff(state);\r\n}, []);\r\n\r\nasync function fetchStuff(state) {\r\n  dispatch({ type: 'START_LOADING' });\r\n  \r\n  let data = await xhr.post('/api/data');\r\n  dispatch({ type: 'RECEIVE_DATA', data });\r\n  \r\n  // get the new state after the action has taken effect\r\n  state = await nextState();\r\n\r\n  if (!state.needsMoreData) return;\r\n\r\n  data = await xhr.post('/api/more-data');\r\n  dispatch({ type: 'RECEIVE_MORE_DATA', data });\r\n}\r\n```\r\n\r\n\r\nThis is all well and good, but `useNext` has a fundamental limitation: it only resolves promises when the state _changes_... so if dispatching an action resulted in the same state (thus causing `useReducer` to [bail out](https://reactjs.org/docs/hooks-reference.html#bailing-out-of-a-state-update)), our async function would hang waiting for an update that wasn't coming.\r\n\r\nWhat we _really_ want here is a way to obtain the state after the last dispatch has taken effect, whether or not it resulted in the state changing. Currently I'm not aware of a foolproof way to implement this in userland (happy to be corrected on this point). But it seems like it could be a very useful feature of `useReducer`'s `dispatch` function itself to return a promise of the state resulting from reducing by the action. Then we could rewrite the preceding example as\r\n\r\n```js\r\nuseEffect(() => {\r\n  fetchStuff(state);\r\n}, []);\r\n\r\nasync function fetchStuff(state) {\r\n  dispatch({ type: 'START_LOADING' });\r\n  \r\n  let data = await xhr.post('/api/data');\r\n  state = await dispatch({ type: 'RECEIVE_DATA', data });\r\n  \r\n  if (!state.needsMoreData) return;\r\n\r\n  data = await xhr.post('/api/more-data');\r\n  dispatch({ type: 'RECEIVE_MORE_DATA', data });\r\n}\r\n```\r\n\r\n## EDIT\r\n\r\nThinking about this a little more, the promise returned from `dispatch` doesn't need to carry the next state, because there are other situations where you want to obtain the latest state too and we can already solve that with a simple ref. The narrowly-defined problem is: we need to be able to wait until after a `dispatch()` has taken affect. So `dispatch` could just return a `Promise<void>`:\r\n\r\n```js\r\nconst stateRef = useRef(state);\r\nuseEffect(() => {\r\n  stateRef.current = state;\r\n}, [state]);\r\n\r\nuseEffect(() => {\r\n  fetchStuff();\r\n}, []);\r\n\r\nasync function fetchStuff() {\r\n  dispatch({ type: 'START_LOADING' });\r\n  \r\n  let data = await xhr.post('/api/data');\r\n\r\n  // can look at current state here too\r\n  if (!stateRef.current.shouldReceiveData) return;\r\n  \r\n  await dispatch({ type: 'RECEIVE_DATA', data });\r\n\r\n  if (!stateRef.current.needsMoreData) return;\r\n\r\n  data = await xhr.post('/api/more-data');\r\n  dispatch({ type: 'RECEIVE_MORE_DATA', data });\r\n}\r\n```"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nit's a *feature*.\r\n\r\n**What is the current behavior?**\r\n\r\n[Internal shared libraries of ReactDOM](https://github.com/facebook/react/tree/master/packages/react-dom/src/shared) is not exported.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nn/a\r\n\r\n**What is the expected behavior?**\r\n\r\nIt is great that some shared libraries such as [`isCustomComponent`](https://github.com/facebook/react/blob/master/packages/react-dom/src/shared/isCustomComponent.js) or [`DOMNamespaces`](https://github.com/facebook/react/blob/master/packages/react-dom/src/shared/DOMNamespaces.js) are exported from `react-dom` and available externally.\r\n\r\nThey are useful to know what types of HTML tags are regarded to be valid one by React, for example, with static analysis issued at https://github.com/yannickcr/eslint-plugin-react/issues/1752.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nn/a"},{"labels":[null,null,"enhancement"],"text":"Proposal: Ensure that all reads from a `ref` use `.current`.\r\n\r\n```js\r\nexport function MyComponent() {\r\n  const isActiveRef = useRef<boolean>(false);\r\n\r\n  // Proposal: this should be a linting violation\r\n  if (isActiveRef) {\r\n    console.log('will always be true');\r\n  }\r\n\r\n  // Reads need to be done from .current\r\n  if (isActiveRef.current) {\r\n    console.log('correct usage');\r\n  }\r\n}\r\n```\r\n\r\nI often find myself doing boolean checks based on the `.current` value of a `ref`. I am paranoid that if I leave the `.current` off then I am creating a bug"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nthe shallow renderer does not run componentDidUpdate, componentDidMount, or useEffect functions. (I'll call them effect functions for short)\r\n\r\n**What is the expected behavior?**\r\nSee [this enzyme issue](https://github.com/airbnb/enzyme/issues/1938#issuecomment-476137018) for more details about where this request is coming from. But the general idea is that it is often nice to run effect functions even when shallow rendering, rather than having to use full rendering on those specific tests. \r\n\r\nIf the shallow renderer provided an option to run the effect functions, it would allow people who test with shallow rendering to more easily test their components. Enzyme currently supports this in class components by calling componentDidUpdate/mount directly on the component instance, but this would be a much harder thing to do for hooks, since they are usually anonymous.\r\n\r\nEnzyme used to not allow this at all, but then added an option to turn on this behavior in their shallow renderer, before finally turning it on by default and then adding an option to turn it off. It didn't seem to cause too many issues for them, so I think this approach could work well for the React shallow renderer as well. Obviously I'm only asking for an option to turn it on now, not to change the default or anything.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAll and no it was never supported AFAIK"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nThere is no hook based equivalent for `getSnapshotBeforeUpdate`. The docs state:\r\n> Our goal is for Hooks to cover all use cases for classes as soon as possible. There are no Hook equivalents to the uncommon getSnapshotBeforeUpdate and componentDidCatch lifecycles yet, but we plan to add them soon.\r\n\r\n**What is the expected behavior?**\r\n\r\nThere is a hook based equivalent for `getSnapshotBeforeUpdate`, maybe something like:\r\n\r\n```js\r\nfunction ScrollingList(props) {\r\n  const lengthRef = React.useRef(0);\r\n  const listRef = React.useRef(null);\r\n\r\n  const prevHeight = React.useSnapshot(() => {\r\n    if (lengthRef.current < props.list.length) {\r\n      const list = listRef.current;\r\n      return list.scrollHeight - list.scrollTop;\r\n    }\r\n  }); \r\n\r\n  React.useEffect(() => {\r\n    lengthRef.current = props.list.length;\r\n  }, [props.list.length]);\r\n\r\n  React.useEffect(() => {\r\n    if (prevHeight != null) {\r\n      const list = listRef.current;\r\n      list.scrollTop = list.scrollHeight - prevHeight;\r\n    }\r\n  }, [prevHeight]);\r\n  return (\r\n    <div ref={listRef}>{/* ... */}</div>\r\n  );\r\n}\r\n```\r\n\r\nThis code probably is bug-ridden and not the best use of hooks but you get the idea.\r\n\r\nI’d like to know:\r\n1. If this feature is planned or on the roadmap.\r\n2. What the proposed API will be.\r\n3. If anyone is working on this.\r\n\r\nSorry, if this is being tracked somewhere and I haven’t seen it. I’m planning an intense component which will use `getSnapshotBeforeUpdate` and I’d love some guidance about the future of this lifecycle method.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact v16.8.0 and later. All browsers and OSes.\r\n\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature / use case\r\n\r\n**What is the current behavior?**\r\n\r\nIt seems currently there is no way to get the order of children from the children themselves with context.\r\n\r\n**What is the expected behavior?**\r\n\r\nI've run into this now in three use cases when building a style system: Breadcrumbs, Segmented views, and Text rhythm/spacing.\r\n\r\nExample 1, breadcrumbs. You want to show an arrow on all but the last breadcrumb, but they may be deeply nested:\r\n\r\n```ts\r\nlet BreadcrumbOrder = createContext({ index: -1, total: -1 })\r\n\r\nlet Button = props => {\r\n  let order = useContext(BreadcrumbOrder)\r\n  return <div style={{ borderRight: order.index > total ? '1px solid red' : 'none' }} {...props} />\r\n}\r\n\r\nlet MyView = () => {\r\n  return (\r\n    <BreadcrumbProvider>\r\n      <Button />\r\n      <Button />\r\n      <div><Button /></div>\r\n    </BreadcrumbProvider>\r\n  )\r\n}\r\n```\r\n\r\nWhere MyView should provide the ordering so that the sub-views can access `total` and `index` and properly style.\r\n\r\nThe other use cases are basically identical, but for different patterns. One is for joining together buttons that are in a row in the interface (Segmented), and the other is for collapsing margins when you have text elements in a vertical column.\r\n\r\nReally this ticket encompasses more of a question or request for documentation clarity here. I'm not sure how it is not pre-concurrent, but I'm assuming mount-order will be non-deterministic if not now then shortly. Is there any reference to a pattern that works for this use case?\r\n\r\nNamely: how children can access their mount order / total children. I can do it now useReducer/context, but I've seen it mount in a weird order at least once and think it was due to a suspense type thing, and would be curious a better practice for this."},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\nThe `react-hooks/exhaustive-deps` will currently accept either (and fix neither) of the following:\r\n\r\n```javascript\r\n// Scenario A: Function returned by core hook IS NOT specified as a dependency.\r\nconst [value, setValue] = useState(initialValue);\r\nconst toggle = useCallback(() => setValue(v => !v), []);\r\n```\r\n\r\n```javascript\r\n// Scenario B: Function returned by core hook IS specified as a dependency.\r\nconst [value, setValue] = useState(initialValue);\r\nconst toggle = useCallback(() => setValue(v => !v), [setValue]);\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nIf we add the following to our `.eslintrc.js`\r\n\r\n```\r\n// Introduces a `requireCoreFunctions` config option.\r\n'react-hooks/exhaustive-deps': ['error', { requireCoreFunctions: true }]\r\n```\r\nthen the rule should fail in scenario A, and fixing should result in scenario B.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nn/a"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature (need better errors)\r\n\r\n**What is the current behavior?**\r\nConsider the following functional component\r\n```\r\nimport React, { useContext } from \"React\"\r\n\r\nconst myFunctionComponent = props => <div>Hello useContext</div>\r\n```\r\n\r\nThe immediate reaction for most of us (newbies to hooks) to refactor the above code to accomodate `useContext` is as follows\r\n\r\n```\r\nimport React, { useContext } from \"React\"\r\nimport MyContext from \"./MyContext\"\r\n\r\n// React does not throw error\r\nconst { myContextValue } = useContext(MyContext)\r\n\r\nconst myFunctionComponent = props => <div>Hello useContext - {myContextValue}</div>\r\n```\r\n\r\nThe way to actually refactor is to explictly convert the arrow function return expression into a function body and then accomodate `useContext` inside along with a return statement, like this\r\n\r\n```\r\nimport React, { useContext } from \"React\"\r\nimport MyContext from \"./MyContext\"\r\n\r\nconst myFunctionComponent = props => {\r\n const { myContextValue } = useContext(MyContext)\r\n return (<div>Hello useContext - {myContextValue}</div>)\r\n}\r\n```\r\n\r\nNot only, react **does not throw error**, React app actually compiles, while the component in question fails to load with no information. This is very difficult to pin the reason to this specific issue.\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nReact should ideally throw some kind of error, when `useContext` is used outside of function components. This lack of error really bites us for people who are refactoring function components without a return statement.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact `16.8.x` with hooks support\r\n"},{"labels":[null,"enhancement"],"text":"1. Regarding the performance optimization, should we always use React.useMemo in case there is no state hooks inside a function component?\r\n2. If the answer is yes, can we use some eslint rules to make sure everyone do it?"},{"labels":["enhancement"],"text":"I noticed [this unconditional `console.error`](https://github.com/facebook/react/blob/d0289c7e3a2dfc349dcce7f9eb3dee22464e97bd/packages/react-reconciler/src/ReactFiberErrorLogger.js#L86) which I'd like to prevent to keep the console clean from errors that are already \"caught\" in an error boundary.\r\n\r\nMaybe a condition on `capturedError.errorBoundaryFound` could prevent this logging?"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nThere is no rule\r\n\r\n**What is the expected behavior?**\r\nWe have some hardcore plugins like `eslint-plugin-lodash-fp`.\r\nWhy not have ESLint hardcore rule allowing default hooks using only inside custom ones?\r\n"},{"labels":[null,"enhancement"],"text":"**Feature**\r\n\r\n**What is the current behavior?**\r\n\r\nWith a UI kit that uses forwardRefs, I get error messages like this:\r\n\r\n![image](https://user-images.githubusercontent.com/12100/53372321-61ceae00-3907-11e9-9d20-190315cc7f06.png)\r\n\r\n**What is the expected behavior?**\r\n\r\nIt would look a lot better if forwardRefs were a bit less obtrusive, and if they picked up the functions displayName rather than just the name of the function they wrap.\r\n\r\nIn our UI Kit we have a pattern like:\r\n\r\n```\r\nconst View = forwardRef(function UIView(){ return <div /> })\r\nView.displayName = 'SomeDisplayName'\r\n```\r\n\r\nFor some reason it's not showing that, just showing the inner one. Further the \"bigness\" of ForwardRef() makes it hard to see visually when scanning. Perhaps something more like this would help:\r\n\r\n```\r\nWarning: Encountered two children with the same key, `confluence`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.\r\n    in div (created by ForwardRef(Gloss))\r\n    in Gloss (ForwardRef)\r\n    in Gloss (ForwardRef) (created by OnboardMain)\r\n    in div (created by Gloss (ForwardRef))\r\n    in Gloss (ForwardRef)\r\n    in Gloss (ForwardRef) (created by SliderPane)\r\n```\r\n\r\nFurther, the `created by` information is often more useful to me, but it's never aligned nicely. Could do something like:\r\n\r\n```\r\nWarning: Encountered two children with the same key, `confluence`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.\r\n      in div (created by ForwardRef(Gloss))\r\n      in Gloss (ForwardRef)\r\n    from OnboardMain:\r\n      in Gloss (ForwardRef)\r\n   from Gloss (ForwardRef):\r\n      in div\r\n      in Gloss (ForwardRef)\r\n   from SliderPane:\r\n      in Gloss (ForwardRef)\r\n```\r\n\r\nAll together, if it would pick up displayNames, the stack would be far more readable for me:\r\n\r\n\r\n```\r\nWarning: Encountered two children with the same key, `confluence`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.\r\n      in div (created by Row)\r\n      in View (forwardRef)\r\n    from OnboardMain:\r\n      in Row (forwardRef)\r\n   from Col (forwardRef):\r\n      in div\r\n      in Grid (forwardRef)\r\n   from SliderPane:\r\n      in View (forwardRef)\r\n```\r\n"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nThe `useMemo` factory function does not receive any arguments.\r\n\r\n**What is the desired behavior?**\r\n\r\nThe `useMemo` factory function would receive the dependencies as arguments.\r\n\r\n**Why?**\r\n\r\nThis would allow more compact syntax for memoizing components because of implicit returns and desctructuring. This came to mind after experiencing some of the issues in #14110. There may be other potential use cases too \r\n\r\n**Example of current behavior**\r\n\r\n```jsx\r\nconst Avatar = () => {\r\n  const [src] = useSomeGlobalState([\r\n    state => state.user.avatar.src\r\n  ]);\r\n  return useMemo(() => <img src={src} />, [src])\r\n}\r\n```\r\n\r\n**Example of proposed behavior**\r\n\r\n```jsx\r\nconst Avatar = () => \r\n  useMemo(\r\n    (src) => <img src={src} />,\r\n    useSomeGlobalState([state => state.user.avatar.src])\r\n  );\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16.8.1\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n**What is the current behavior?**\r\nIn normal rendering, you can memoize a class-based component: https://jsfiddle.net/586ea3cx/\r\n\r\nWith the shallow renderer, it seems like you can't: https://jsfiddle.net/odj217Lv/1/\r\n\r\nThis might be blocking https://github.com/airbnb/enzyme/pull/1914, in which tests are failing with `Cannot call a class as a function`. (it's tough to repro stuff with the shallow renderer)"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature/Improvement\r\n\r\n**What is the current behavior?**\r\n\r\nIf there is test code that should be wrapped in `act(...)` then the current warning is given:\r\n\r\n```\r\n console.error node_modules/react-dom/cjs/react-dom.development.js:506\r\n    Warning: An update to null inside a test was not wrapped in act(...).\r\n\r\n    When testing, code that causes React state updates should be wrapped into act(...):\r\n\r\n    act(() => {\r\n      /* fire events that update state */\r\n    });\r\n    /* assert on the output */\r\n\r\n    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://fb.me/react-wrap-tests-with-act\r\n```\r\n\r\nWhen upgrading a large code base, this is basically useless.\r\n\r\n**What is the expected behavior?**\r\n\r\nProvide at least the test name if not the line number of code that triggered the warning.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nreact@16.8.0\r\nreact-dom@16.8.0"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nReport a bug.\r\n\r\n**What is the current behavior?**\r\n\r\nI have an app that's registering event listeners for `window`'s key events (via `useEffect`). Those event listeners are triggering state updates (via `useState`). I think I have found a bug where simultaneous key events occurring in the same frame (whether down or up) will be handled out of order, causing state to becoming out of sync.\r\n\r\nTake the following simple app (https://codesandbox.io/s/1z3v9zrk4j). I've kept this as keyup only for simplicity.\r\n\r\n```\r\nfunction App() {\r\n  const [keys, setKeys] = useState([]);\r\n\r\n  console.log('App', keys);\r\n\r\n  const onKeyUp = function (event) {\r\n    console.log('onKeyUp', event.key, keys);\r\n\r\n    setKeys([...keys, event.key]);\r\n  };\r\n\r\n  useEffect(function () {\r\n    console.log('effect', keys);\r\n\r\n    window.addEventListener('keyup', onKeyUp);\r\n\r\n    return function () {\r\n      console.log('removing event listener', keys);\r\n\r\n      window.removeEventListener('keyup', onKeyUp);\r\n    };\r\n  });\r\n\r\n  return <p>{keys.join(', ')}</p>;\r\n}\r\n```\r\n\r\nIf I press down any two keys, e.g. the \"q\" and \"w\" keys, and then release them at precisely the same time, the following happens:\r\n\r\n- The `keyup` event listener for `w` is called, which in turn calls `setKeys` with `['w']`\r\n- `App` is re-rendered with `keys === ['w']`\r\n- The `keyup` event listener for `q` is called, which in turn calls `setKeys` with `['q']`\r\n- The effect's cleanup function is called, removing the event listener with `keys === []`\r\n- The effect is run again, the event listener being added with `keys === ['w']`\r\n- `App` is re-rendered with `keys === ['q']`\r\n- The effect's cleanup function is called, removing the event listener with `keys ===['w']`\r\n- The effect is run again, the event listener being added with `keys === ['q']`\r\n\r\nThis results in `keys === ['q']`. The render with `w` has been lost.\r\n\r\nWith three keys, only two keys are reliably shown. Four keys - only two are reliably shown.\r\n\r\nIf I add another `useState` call, the first `useState` has no issues - all keys are reliably detected. See https://codesandbox.io/s/0yo51n5wv:\r\n\r\n```\r\nfunction App() {\r\n  const [keys, setKeys] = useState([]); \r\n  const [dummy, setDummy] = useState('foo');\r\n\r\n  console.log(\"rendering App\", keys);\r\n\r\n  const onKeyUp = function(event) {\r\n    console.log(\"onKeyUp event received\", event.key, keys);\r\n\r\n    setKeys([...keys, event.key]);\r\n    setDummy('foo');\r\n  };\r\n\r\n  useEffect(function() {\r\n    console.log(\"adding event listener\", keys);\r\n\r\n    window.addEventListener(\"keyup\", onKeyUp);\r\n\r\n    return function() {\r\n      console.log(\"removing event listener\", keys);\r\n\r\n      window.removeEventListener(\"keyup\", onKeyUp);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <p>Keyups received:</p>\r\n      <p>{keys.join(\", \")}</p>\r\n      <button onClick={() => setKeys([])}>Reset</button>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nI would expect the final state array to contain all keys released, in order. There are a few workarounds for this issue (e.g. passing a function to `setState` to retrieve the current value instead of using the rendered value), but from the documentation it seems that is an escape hatch for use when the effect's callback is not renewed on each state change, and should not be necessary in this case (unless I've misunderstood).\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nIt happens on both versions that support hooks - `16.8.0-alpha.0` and `16.8.0-alpha.1`. This is on Chrome/Safari/Firefox on MacOS Mojave.\r\n"},{"labels":["enhancement"],"text":"if you added if directive to any element for showing the element or not that would be better than making a js expression in my opinion \r\n\r\n**regular way**\r\n```js\r\nconst App = (props) => {reactif={true}\r\n    let name = props.name;\r\n    return (\r\n        <div >\r\n            {name === 'koko' ? <div className=\"yousef\">{name}</div> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nReactDOM.render(<App name=\"koko\" />, document.getElementById('app'))\r\n```\r\n**my way** ( i edited the react file btw and it worked )\r\n```js\r\nconst App = (props) => {\r\n    let name = props.name;\r\n    return (\r\n        <div >\r\n            <div className=\"yousef\" reactif={name === 'koko'}>{name}</div> \r\n        </div>\r\n    )\r\n}\r\n\r\nReactDOM.render(<App name=\"koko\" />, document.getElementById('app'))\r\n```\r\n**mmm**\r\ni hope you talk that into consideration \r\ni mean less than 1kb will not make difference :\"D\r\n\r\n**React code**\r\n```js\r\nvar RESERVED_PROPS = {\r\n  key: true,\r\n  ref: true,\r\n  __self: true,\r\n  __source: true,\r\n  reactif: true\r\n};\r\n\r\nif (config != null) {\r\n    if (hasValidRef(config)) {\r\n      ref = config.ref;\r\n    }\r\n    if (hasValidKey(config)) {\r\n      key = '' + config.key;\r\n    }\r\n    // i added that\r\n    if (config.reactif){\r\n      reactif = config.reactif\r\n      if (reactif === false){\r\n        return null\r\n      } else if (reactif !== true || reactif !== false){\r\n        console.error('reactif expression didn\\'t return bolean value')\r\n      }\r\n    }\r\n\r\n    self = config.__self === undefined ? null : config.__self;\r\n    source = config.__source === undefined ? null : config.__source;\r\n    // Remaining properties are added to a new props object\r\n    for (propName in config) {\r\n      if (hasOwnProperty$1.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\r\n        props[propName] = config[propName];\r\n      }\r\n    }\r\n }\r\n```"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?** Feature\r\n\r\n**What is the current behavior?**\r\n\r\nThe `ref` attribute passed to a DOM node can be either a callback or a `RefObject`, but not both. Sometimes, that's exactly what's required: for example, a library like [react-pose](https://popmotion.io/pose/api/posed/#posed-usage-create-a-posed-component-existing-components) demands ref forwarding to work with a React Component, but you'd also like to retain a reference to the _same_ parent DOM node within that component itself for a different reason. It's often not possible to nest DOM nodes to achieve a similar thing using two different ref attributes as that breaks layout.\r\n\r\nHere's a link to a naive attempt to achieve this: https://codesandbox.io/s/4jyw3q3v57\r\n\r\nI'm not surprised this doesn't work as there's no reason for the parent ref callback to fire, but I don't know how else to go about it.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe callback provides the component with its own reference to the parent DOM node, whilst also providing it to the parent component via the passed `RefObject`.\r\n"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nObjects are not valid as a React child\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nN/A\r\n\r\n**What is the expected behavior?**\r\nI'm trying to build a system that auto-detects if data is used in a React component. To do this, I detect usage during `render()` by using Proxies, which can register all access. This data, in turn, is used to prevent needless re-renders.\r\n\r\nA parent component can pass a Proxy which represents a string, for example, to a child component, which, without knowing it is a Proxy, can use this value in a calculation (e.g. `props.value + 1` or `` `The value is ${props.value}` ``). This can be handled with `proxy[Symbol.toPrimitive]()`, which is called by JS automatically when used in this sort of expression.\r\n\r\nHowever, this doesn't work if the child now passes the proxy directly to React as a child:\r\n```jsx\r\n  return (<span>{this.props.childValue</span>);\r\n```\r\nReact will do a `typeof` on the child, find it is an object, and report `Objects are not valid as a React child`. Unfortunately, `typeof` cannot be spoofed with Proxy, and it will always return `'object'`.\r\n\r\nThe relevant code is found [here](https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/react/src/ReactChildren.js#L189-L204). The alternative could be for React to check if there's a `child[Symbol.tpPrimitive]` and, if so, evaluate it to find the intended value, and to retry with this value as the child.\r\nIt could be as simple as inserting the following code [here](https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/react/src/ReactChildren.js#L189):\r\n```js\r\n  if (typeof Symbol !== 'undefined') {\r\n    const toPrimitive = children[Symbol.toPrimitive];\r\n    if (toPrimitive) {\r\n      const value = toPrimitive('string');\r\n      if (typeof value !== 'object') {\r\n\t\treturn traverseAllChildrenImpl(\r\n\t\t  value,\r\n\t\t  nameSoFar,\r\n\t\t  callback,\r\n\t\t  traverseContext,\r\n\t\t)\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nIt would be great if React would support this use-case. The alternative is for parent components to resolve the value, which would attribute the access to the parent component, instead of the child, where it's really being used. This in turn would cause the parent to be rerendered when only the child is being changed.\r\n\r\nIf the child is aware it may be receiving Proxy objects, it can resolve the value itself. However, the whole point of using Proxies is to automate all the refresh logic (like `shouldComponentUpdate`). Also, not needing to resolve the value would allow the value to propagate through to descendant components which may be wholly unaware of the proxy. \r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAll version, never worked before."},{"labels":["enhancement"],"text":"This is more about a bridge between actual DOM Tree and React Tree.\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nYou can _portal_ a part of your rendering tree to another place in Dom Tree, and React would handle events, including events on Capture Phase like there were no portals - events could dive through all the _react_ parents, and bubble up through all the _react_ parents.\r\n\r\nThis is quite useful, as long as portal is an implementation detail, but useful only for normal events; there are more cases around it.\r\n\r\n**What is the expected behavior?**\r\n\r\nIt's better to explain it by example\r\n- you have a Modal Dialog and it uses a Focus Lock, ie focus could not leave it.\r\n- inside Modal you have a Custom Select, with Dropdown menu rendered via a portal.\r\n- you could not use it, as long as from DOM prospective `ModalNode.contains(DropDownNode)` is always false, and Focus Lock will prevent focusing.\r\n\r\nIt's a real issue - https://github.com/reach/reach-ui/issues/83, https://github.com/theKashey/react-focus-lock/issues/19.\r\n\r\nProposed solution:\r\n- `containsNode(domNode):boolean` - _React-aware_ version of DOM API `node.contains(anotherNode)`.\r\n- `getHostNodes():Nodes[]` - returns a list of all root nodes inside \"current component\" including direct children and portals. Similar to `ReactDom.findDomNode`, and (proposed)refs attached to React.Fragment. It just finds all nodes \"you are consists of\". As a result you will be able to `tab` from one `piece` of you to another, making focus management independed of implementation details.\r\n\r\nCons:\r\n- requires Component to access fiber, DOM node to access fiber thought node, or an new `hook` to do it in a functional way.\r\n- does twice dreadfull things than deprecated `findDomNode`\r\n- usage scope is very narrow.\r\n\r\nPros:\r\n- _my_ use case requires _momentum_ access to a rendered tree, and does not suffer async stuff as `findDomNode`, where underlaying node might not be yet created. Stuff like \"_does something `containsNode` right now_\", or _\"`getHostNodes` I consist from right now\"_ are sync, and the question asked about actual DOM tree structure.\r\n\r\nExample using [react-dom-reflection](https://github.com/theKashey/react-dom-reflection), which implements required API - https://codesandbox.io/s/1or60v506l\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nNever worked"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nIt's a feature. \r\n\r\n**What is the current behavior?**\r\n\r\nReact.Suspense mounts its children with a `display: none` style if a promise is thrown. Once the thrown promise is resolved, React removes the `display: none` style.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe children components have no easy way to know when the `display: none` style is removed by React. This is problematic when one child component needs to read from the DOM layout to correctly display its elements. Most people wait for the `componentDidMount` callback to trigger, but because the element is `display: none`, it can't read any value from the DOM layout.\r\n\r\nThe issue was discovered in https://github.com/mui-org/material-ui/issues/14077. I believe that React should provide a lifecycle so the children components know when they are visible, that it's safe to do layout computations. \r\n\r\nThe best workaround I'm aware of it to use the [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) but it requires a polyfill on IE 11 and Safari.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nVersion: 16.7.0-alpha.2"},{"labels":[null,"enhancement"],"text":"I just spend several hours debugging app blaming everything except me ofc.\r\nI am using this useTheme Hook.\r\n\r\n```ts\r\nimport React from 'react';\r\nimport ThemeContext from '../contexts/ThemeContext';\r\n\r\nconst useTheme = () => {\r\n  const theme = React.useContext(ThemeContext);\r\n  //if (theme == null)\r\n  //  throw Error('useTheme: Please provide ThemeContext value.');\r\n  return theme;\r\n};\r\n\r\nexport default useTheme;\r\n```\r\n\r\nSome styles were light while other dark. Very strange.\r\nThen I found the bug in my code, `ThemeContext.Provider` was sometimes used after using useTheme.\r\nThemeContext had an initial value different than provided.\r\n\r\nWhile it's probably fine that React allows us to use default context value without a parent provider, it can lead to hard to find bugs.\r\n\r\nTherefore, I decided to never provide default context value and throw an exception in useFooContext hook to warn about it.\r\n\r\nBecause of DX, React should reconsider default / initial context values. In my humble opinion.\r\n\r\n\r\n"},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nThe core built-in hooks – `useRef`, `useMemo`, etc. – rely on internal React state which is not exposed, namely the current rendering component. This means that these hooks cannot be implemented in user-land. Similar hooks cannot be implemented either.\r\n\r\nI'm proposing adding a built-in hook which would provide information about the current rendering component. This would enable more advanced hooks to be implementable in user-land.\r\n\r\nI have a use case which is a perfect example. I need a hook similar to `useMemo`, but where the computed value is shared across all components of the same type. I’m calling it `useSharedMemo`.\r\n\r\nThe ideal API would look something like this:\r\n\r\n```typescript\r\nconst Component = ({cacheKey}) => {\r\n  const value1 = useSharedMemo(() => /* expensive computation 1 */, [cacheKey]);\r\n  const value2 = useSharedMemo(() => /* expensive computation 2 */, [cacheKey]);\r\n  return <>{value1} {value2}</>;\r\n};\r\n```\r\n\r\nIn the code above, every instance of `Component` would get the same values for `value1` and `value2`, provided `cacheKey` is the same. When `cacheKey` changes, the two values would recompute once and the new values would be returned to all instances as they re-render. (The actual use case in my app is styles that need to update only when the theme changes.)\r\n\r\nI have a [hacky implementation](https://codesandbox.io/s/jplyz2pkr9) of this hook that works, but it requires changing the API to the following:\r\n\r\n```typescript\r\nconst useSharedMemo = createUseSharedMemo();\r\n\r\nconst Component = ({cacheKey}) => {\r\n  const ref = React.useRef();\r\n  const value1 = useSharedMemo(ref, () => /* expensive computation 1 */, [cacheKey]);\r\n  const value2 = useSharedMemo(ref, () => /* expensive computation 2 */, [cacheKey]);\r\n  return <>{value1} {value2}</>;\r\n};\r\n```\r\n\r\nFor this to work, the [implementation](https://codesandbox.io/s/jplyz2pkr9) has to keep a counter of calls that resets every time a component’s render call starts or ends. This would be trivial if there were a way to know which component is currently rendering. Since there is no way, the implementation has to make up for it by requiring a `ref` be passed in. Since it has no information about the type of the current component, it also requires that a `useSharedMemo` “instance\" be created in the component definition’s enclosing scope.\r\n\r\nWorse, the implementation uses `useLayoutEffect` to detect when the render is done, which might break with concurrent mode or with future React changes.\r\n\r\n**What is the expected behavior?**\r\n\r\nIf React provided information about the current rendering component, the implementation of `useSharedMemo` would be much easier and less brittle.\r\n\r\nA possible solution is a hook like the following:\r\n\r\n```typescript\r\nconst [currentType, currentRef] = React.useCurrentComponent();\r\n```\r\n\r\nWith this information, we can implement the ideal API above and we do not have to rely on `useLayoutEffect`:\r\n\r\n```typescript\r\nlet values = new WeakMap();\r\nlet cacheKeys = new WeakMap();\r\nlet lastRef = null;\r\nlet callIndex = 0;\r\n\r\nfunction useSharedMemo(fn, keys) {\r\n  const [currentType, currentRef] = React.useCurrentComponent();\r\n  if (currentRef !== lastRef) {\r\n    callIndex = 0;\r\n  }\r\n  const index = callIndex;\r\n  callIndex++;\r\n  const typeValues = values.get(currentType) || [];\r\n  const typeCacheKeys = cacheKeys.get(currentType) || [];\r\n  if (!typeValues[index] || !compareKeys(keys, typeCacheKeys[index])) {\r\n    typeValues[index] = fn();\r\n    typeCacheKeys[index] = keys;\r\n    values.set(currentType, typeValues);\r\n    cacheKeys.set(currentType, typeCacheKeys);\r\n  }\r\n  return typeValues[index];\r\n}\r\n```\r\n\r\n(Note that I’m treating `currentType` and `currentRef` as opaque values, so for my purposes it doesn’t matter if they are the actual type and an actual ref to the component instance. I imagine having them be accurate would be a more powerful API, but the implementation might require them to be opaque values.)\r\n\r\nP.S. - A common use case that would benefit from `useSharedMemo` is `useCallback`. 99% of the time callbacks are identical across components of the same type. It’s wasteful not to share the cache.\r\n\r\n**Demo**\r\nhttps://codesandbox.io/s/jplyz2pkr9\r\n"},{"labels":[null,null,"enhancement"],"text":"I want to report a bug for the hooks plugin.\r\n\r\n**What is the current behavior?**\r\nThere was no error report after running eslint, but the component failed when running in the browser.\r\nFrom the chrome dev console it reported \"Uncaught Error: Rendered fewer hooks than expected. This may be caused by an accidental early return statement.\" \r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React.\r\nHere is a link to the github repo:\r\nhttps://github.com/paboulos/react-hooks-eslint\r\n\r\n**What is the expected behavior?**\r\nFollowed The Hooks API guide which says React hooks provides a linter plugin to enforce these rules automatically.Therefore it should have reported a usage violation when the eslint hooks plugin is specified. \r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nUsing window 10 OS and Chrome browser.\r\n1. First ran npx create-react-app Hooks\r\n2. Installed react 16.7.0-alpha.2 and react-dom 16.7.0-alpha.2\r\n3. Installed eslint dev dependencies:\r\n \"babel-eslint\": \"9.0.0\",\r\n    \"babel-loader\": \"8.0.4\",\r\n    \"eslint\": \"5.9.0\",\r\n    \"eslint-config-airbnb\": \"17.1.0\",\r\n    \"eslint-loader\": \"2.1.1\",\r\n    \"eslint-plugin-import\": \"2.14.0\",\r\n    \"eslint-plugin-jsx-a11y\": \"6.1.2\",\r\n    \"eslint-plugin-react\": \"7.11.1\",\r\n    \"eslint-plugin-react-hooks\": \"0.0.0\"\r\n4. Created the .eslintrc.json following the instructions from the Hooks API Doc\r\nThen ran package script lint as follows: \"npm run lint\"\r\nno errors reported.\r\nThen ran package script start as follows: \"npm start\"\r\nThe React component CountHooks calls useState incorrectly and reports error in the browser dev console."},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nThere is no way to see if `componentDidMount` was caused by a context change\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n```typescript\r\nimport React from 'react';\r\n\r\ninterface ExampleContext {\r\n    param: string;\r\n}\r\n\r\nconst ExampleContext = React.createContext<ExampleContext>({\r\n    param: 'foo',\r\n});\r\n\r\ninterface ExampleState {\r\n    data: any;\r\n}\r\n\r\nclass Example extends React.Component<{}, ExampleState> {\r\n    static contextType = ExampleContext;\r\n    context!: ExampleContext;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: [],\r\n        };\r\n    }\r\n\r\n    fetchData(param: string): void {\r\n        // whatever\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData(this.context.param);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        // ???        \r\n    }\r\n}\r\n```\r\n**What is the expected behavior?**\r\nA 4th parameter for `previousContext`\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n16.6"},{"labels":[null,null,"enhancement"],"text":"Has the React team considered adding the ability to specify a time delay when scheduling callbacks on Scheduler. This would be useful to enable using Scheduler as a general scheduling solution in a JS environment, removing the need to use and manage setTimeouts/setInterval calls. "},{"labels":["enhancement"],"text":"## Timeline\r\n1. <= 16.3: `findDOMNode` is *discouraged* but accepted for certain use cases\r\n2. 16.3 (2018-03-28): `forwardRef` is introduced:\r\n  It can be used in HOCs to avoid using `findDOMNode` on the enhanced component\r\n3. 16.6 (2018-10-23): `findDOMNode` is deprecated in `React.StrictMode`\r\n4. 16.7.alpha (2018-10-24): `React.Concurrent` mode is released:\r\n  This mode *extends* `React.StrictMode` in a way that `findDOMNode` is deprecated in that mode too.\r\n5. 16.8 (Q2 2019): stable `React.Concurrent` mode\r\n  \r\n## findDOMNode use cases\r\nIf you have more use cases please let me know. I only started with some examples from `mui-org/material-ui`.\r\n### with a planned alternative\r\n- focus handling (React Fire, \"exploratory phase\") \r\n- passive event listeners ([facebook/react#6436]). \"Passive events will likely be a part of [React Fire].\" - [facebook/react#13525]\r\n\r\n## State of `forwardRef`\r\n`react` has 3.4M downloads/week.\r\n\r\n### `hoist-non-react-statics` (3.9M downloads/week; not clear what percentage is 2.x)\r\nA utility mainly used in HOCs and [encouraged to use in the official react docs](https://reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over). However everyone stuck at `2.x` will likely encounter issues with `forwardRef` since that version\r\ndoes not handle any `react@^16.3` features. ^3.2.0 should have no issues apart from some minor\r\nissues with propTypes hoisting from `forwardRef` to `forwardRef`. The latest stable from zeit/next still uses that outdated version. However the latest canary for 7.0.3 does not.\r\n\r\n### react-docgen (400k downloads/week)\r\nNot recognized as a valid component definition. PR open at [reactjs/react-docgen#311].\r\n\r\n### react-redux (1.4M downloads/week)\r\n`connect` does properly forward their refs in the beta release of 6.x. No timeline for stable release given\r\nhowever 3 betas have already been released so it's probably soon.\r\n\r\n### react-router (1.4M downloads/week)\r\n`withRouter` is planned to forward refs ([ReactTraining/react-router#6056#issuecomment-435524678]).\r\nHowever no comment about the other components and no major release candidate is published.\r\n\r\n### display name\r\n`React.forwardRef` components are recognized by `react-devtools`. However when wrapped\r\nin a HOC it's very likely that the display name is lost. See [facebook/react#14319]\r\n\r\n### The issue\r\n**Assumptions:**\r\n- you are not in control of your whole component tree i.e. you use components from 3rd party libraries\r\n- you want to use `React.ConcurrentMode`\r\n- Usable includes production and development. It specifically means for development that deprecation warnings in a component\r\n  make that component not usable in development mode because of all the *noise* it adds in those cases.\r\n  *Noise* because it's not actionable if that component is from a 3rd party library.\r\n\r\nIf none of those applies to you then you probably don't have an issue with `findDOMNode` deprecation.\r\n\r\nThe mode of a partial tree can only be made more restrictive but not loosened up. If\r\nyou wrap your tree in `React.StrictMode` and use a component from a 3rd party library\r\nthat 3rd party library has to be `React.StrictMode` compliant too. \r\n\r\nThis means that you can't use `React.StrictMode` effectiveley. This might be ok since it's for development only anyway and has no implications for production. However Concurrent mode can have actual implications for production.  Since it is new and the community wants to use new things libraries have to make sure that they are strict mode compliant too.\r\n\r\nIn addition between the relase of an alternative in the form of `React.forwardRef` and the deprecation only 7 months have passed. One could argue that this is plenty of time but (at least from my perspective) the work on migrating from `findDOMNode` to refs and `forwardRef` was postponed because `findDOMNode` was not deprecated yet.  However the actual deprecation happened one day before the release of `unstable_ConcurrentMode` virtually giving no time to migrate. ~We'll have to see when a stable `16.7` release will happen but assuming this happens today only a month has passed between deprecation and *virtual* removal.~ [React 16.x Roadmap] was release pointing towards Q2 2019 as a release date of stable `React.Concurrent` mode. This relaxes pressure for library maintainers quite a bit IMO.\r\n\r\n### Conclusion\r\nRefs are not a viable upgrade path to replace `findDOMNode` yet. \r\nUntil refs are usable without headaches from forwarding refs `findDOMNode` should be undeprecated.\r\n\r\n## Releated\r\n- [forwarding Refs guide on official react docs](https://reactjs.org/docs/forwarding-refs.html)\r\n- [findDOMNode API documentation](https://reactjs.org/docs/react-dom.html#finddomnode) (includes arguments against usage)\r\n- [pull request that deprecated findDOMNode](https://github.com/facebook/react/pull/13841)\r\n\r\n[facebook/react#6436]: https://github.com/facebook/react/issues/6436\r\n[facebook/react#13525]: https://github.com/facebook/react/issues/13525\r\n[facebook/react#14319]: https://github.com/facebook/react/issues/14319\r\n[reactjs/react-docgen#311]: https://github.com/reactjs/react-docgen/pull/311\r\n[ReactTraining/react-router#6056#issuecomment-435524678]: https://github.com/ReactTraining/react-router/issues/6056#issuecomment-435524678\r\n[React 16.x Roadmap]: https://reactjs.org/blog/2018/11/27/react-16-roadmap.html"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?** \r\n\r\nFeature idea\r\n\r\n**What is the current behavior?**\r\n\r\nCurrently there is no hook for dealing with errors in a component's sub-tree.\r\n\r\n**What is the expected behavior?**\r\n\r\nHave a hook that allows for functional components to act as Error Boundaries.\r\n\r\nExample:\r\n\r\n```\r\nfunction myErrorBoundary() {\r\n  const caughtError = useErrorCatching();\r\n  if (caughtError !== null) { return <ErrorHandler error={caughtError} />; }\r\n  return <RegularContent />;\r\n}\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nn/a"},{"labels":["enhancement"],"text":"TL;DR: Can you expose [shared/getComponentName](https://github.com/facebook/react/blob/master/packages/shared/getComponentName.js)?\r\n\r\n<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nExpose an API to get the display name of every component (in `__DEV__` only).\r\n\r\n**What is the current behavior?**\r\nMost of the ecosystem still uses `Component.displayName || Component.name || someFallbackName` \r\n (with some branching depending on the type of `Component`) when setting the display name of an enhanced component i.e. `connect()(WrappedComponent)` will result in `\"connect(WrappedComponent)\"` as a `displayName`.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\nSince components created by `forwardRef` or `memo` are not actual functions these higher-order components are not able to determine a proper display name while `react-devtools` is able to:\r\n\r\nhttps://codesandbox.io/s/zqj9v50243\r\n\r\n- `react-redux` creates `\"connect(Component)\"`\r\n- `react-router` creates `\"withRouter(undefined)\"`\r\n\r\n**What is the expected behavior?**\r\nThe new \"exotic-components\" should work with the existing 3rd party libraries WRT to `displayName`.\r\n\r\nNow there are a couple of solutions to this issue:\r\n1. **Edit:** Expose [shared/getComponentName](https://github.com/facebook/react/blob/master/packages/shared/getComponentName.js)\r\n2. This is the responsibility of the ecosystem. It should provide a solution and maintain it. Somewhat blocked by #12882, related: #12932\r\n3. Grant access to the functionality used in `react-devtools` (or would this only work on the fibers?)\r\n4. Set a `name` (or `displayName` no preference here) property on those \"exotic-components\" (don't know how to call them). Naive implementation e.g.: `name: 'ForwardRef(' + fn.name + ')'`.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nI guess this started with `forwardRef` in 16.3.\r\n"},{"labels":[null,null,"enhancement"],"text":"See https://github.com/facebook/react/issues/14287#issuecomment-440277999 and https://github.com/facebook/react/pull/14182#issuecomment-440125029. This accidentally worked for a few releases but was a bug. However we might want to consider actually supporting this with an opt-in API."},{"labels":["enhancement"],"text":"Feature request\r\n\r\n**What is the current behavior?**\r\n`react-is` now doesn't have method to check if element is `memo`(like `isForwardRef`).\r\nMaybe there are some reasons why it's not implemented?\r\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nIt can be seen as a feature or a bug, depending on angle. Let's say it's an enhancement to how `lazy` works.\r\n\r\n**What is the current behavior?**\r\n\r\nWhen using `React.lazy`, if the given promise rejects while trying to asynchronously load a component, it's no longer possible to retry loading the component chunk because `lazy` internally caches the promise rejection.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nThis does not seem to work great in CodeSandbox because it's using service workers, which get in the way when simulating offline mode, yet this small app illustrates the issue: https://codesandbox.io/s/v8921j642l\r\n\r\n**What is the expected behavior?**\r\n\r\nA promise rejection should not be cached by `lazy` and another attempt to render the component should call the function again, giving it the chance to return a new promise.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAFAIK all version of React that include `lazy`.\r\n"},{"labels":[null,null,"enhancement"],"text":"Cryptic title I can imagine, but I am not aware that something like this would have been mentioned anywhere so far.\r\n\r\nI have a page showing some statistics and it's split into two even panels. The left panel is showing some numbers and contains a form to set necessary filters. The right panel is showing some other details about filtered data. Initially, only filter form is visible, nothing else.\r\n\r\nThe user sets the filter and hits the \"filter\" button to send out a request. There is a requirement to show a text loader in the left panel and the right panel should be showing content loader animation. Too many loaders perhaps? Well, it kinda makes sense in this context :)\r\n\r\nNow my confusion is how to achieve that. Obviously, I don't want each panel to run the same query on its own. I would like to do that once in the upper level. I can surely pass down the `isLoading` prop to both panels. However, I am not too happy about it, because once there will be a fully fledged data fetching relying on the Suspense, it would mean that for such scenarios I will need to fall back to a regular solution. Am I misunderstanding something in here?"},{"labels":[null,null,"enhancement"],"text":"# Feature Request\r\n\r\n## Current Behavior\r\n\r\nuseState/useReducers Hook's updater/dispatch functions do not expose a way to execute code _after_ the update has been made.\r\n\r\n## Expected Behavior\r\n\r\nuseState or useReducer Hooks expose some way to locally execute the equivalent of inline useEffect/didUpdate etc. (to allow for overriding default side effect behavior) (e.g. emitEffect(() => ...)).\r\n\r\n## Use Case\r\n\r\nFormik exposes 2 props which control when form validation occurs: `validateOnChange` and `validateOnBlur`. When `validateOnChange` set to `true`, form validation will run whenever `handleChange`, `setFieldValue`, or `setValues` are called (these fns all update form `values`). Similarly, when `validateOnBlur` is `true`, validation will also run whenever `handleBlur`, `setFieldTouched`, and `setTouched` are called (these fns all update the `touched` state of the form). The reason that Formik doesn't centralize orchestrating validation logic into `componentDidUpdate` (i.e. run validation whenever either `this.state.values` or `this.state.touched` changes) is to allow for local overrides in custom input components.\r\n\r\nFor example, often times in a 3rd party input component (e.g. like Airbnb's Rheostat (https://github.com/airbnb/rheostat)) the value and touched state need to update together because there isn't a real \"blur\" event for the component or there isn't a prop for it. With Formik, you get around this by updating the field's value and touched state imperatively but override the validation behavior to only run once. To do this, Formik's current non-hooks API exposes an extra parameter to the `setFieldValue` and `setFieldTouched` methods which allow you to opt out of running validation after the update is made. Internally this looks like:\r\n\r\n```js\r\nsetFieldValue(name, value, shouldValidate = true) {\r\n   this.setState(prevState => setIn(prevState.values, name, value), () => {\r\n      if (this.props.validateOnChange && shouldValidate) {\r\n        this.validateForm(this.state.values)\r\n      }\r\n    })\r\n  }\r\n\r\nsetFieldTouched(name, touch = true, shouldValidate = true) {\r\n   this.setState(prevState => setIn(prevState.touched, name, touch), () => {\r\n      if (this.props.validateOnBlur && shouldValidate) {\r\n        this.validateForm(this.state.values)\r\n      }\r\n    })\r\n  }\r\n```\r\n\r\nIf a callback was supported by either `useReducer`'s `dispatch` or `useState` update fn, Formik could maintain its current API footprint and allow for the following code to work as expected:\r\n\r\n```js\r\nconst CustomRangedInput = (props) => {\r\n  const formik = useFormikContext();\r\n  function handleChangeValue(value) {\r\n    // Set the value\r\n    formik.setFieldValue(props.name, value, false /* avoid normal validation logic */)\r\n    // Mark the field as touched\r\n    formik.setFieldTouched(props.name, true)\r\n  }\r\n\r\n   return <Rheostat\r\n     onValueChange={handleChangeValue}\r\n      min={1}\r\n      max={100}\r\n      values={[1, 100]}\r\n   />;\r\n}\r\n``` \r\n\r\nHowever, with the current hooks API's there is not a way for me to expose this to users, since I have to lift update the validateOnChange/validateOnBlur validation logic to `useEffect`. In my current Formik x Hooks PR, this looks like\r\n\r\n```js\r\n React.useEffect(\r\n    () => {\r\n      if (!!didMount.current && !!validateOnChange && !state.isSubmitting) {\r\n          validateForm(state.values);\r\n      }\r\n    },\r\n    [state.values, validateOnChange, state.isSubmitting]\r\n  );\r\n\r\n React.useEffect(\r\n    () => {\r\n      if (!!didMount.current && !!validateOnBlur && !state.isSubmitting) {\r\n          validateForm(state.values);\r\n      }\r\n    },\r\n    [state.touched, validateOnBlur, state.isSubmitting]\r\n  );\r\n\r\n```\r\n\r\nThis will execute whenever `state.values` or `state.touched` change, which is usually what people want 98% of the time. However, I don't know/see a way to make this compatible with the old API (where you can locally override validation).\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.7.0-alpha\r\n"},{"labels":[null,"enhancement",null],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nThe current synthetic keyboard event does not support the [`KeyboardEvent.code`](https://www.w3.org/TR/uievents/#dom-keyboardevent-code) property.\r\n\r\n**What is the expected behavior?**\r\nThe synthetic keyboard event should pass along the [`KeyboardEvent.code`](https://www.w3.org/TR/uievents/#dom-keyboardevent-code) property. This is currently in the WD of DOM Events but is part of replacing `keyCode` and `charCode` and is much more consistent and easy to use. This is currently only supported by FF and Chrome ([CanIUse](https://caniuse.com/#feat=keyboardevent-code)) so it may be a bit premature to fully integrate. However `keyCode`, `charCode` and `which` are being deprecated so this will eventually need to be added.\r\n\r\nEdit: I spoke too quickly, CanIUse shows that FF, Chrome, Safari and Opera support it. IE, Edge and most mobile browsers do not.\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature request\r\n\r\n**What is the current behavior?**\r\n\r\nIf you use a Component that returns a string inside an option or textarea element, the Component will be rendered as '[object Object]'\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://jsfiddle.net/38tz0ym2/\r\n\r\n**What is the expected behavior?**\r\n\r\nThe string returned by the component should be rendered as the elements innerHTML.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nThis was working accidentally in react v16.0.0 - v16.4.2 but was apparently buggy and crash prone. It no longer works at all in react v16.6.0"},{"labels":[null,null,"enhancement"],"text":"Hello,\r\n\r\nI tried testing components that use the cool new hooks API, but `useEffect` doesn't seem to work with the test renderer.\r\n\r\nHere's a small failling Jest test:\r\n\r\n```js\r\nimport React, { useEffect } from \"react\";\r\nimport { create as render } from \"react-test-renderer\";\r\n\r\nit(\"calls effect\", () => {\r\n  return new Promise(resolve => {\r\n    render(<EffectfulComponent effect={resolve} />);\r\n  });\r\n});\r\n\r\nfunction EffectfulComponent({ effect }) {\r\n  useEffect(effect);\r\n\r\n  return null;\r\n}\r\n```\r\n\r\nAnd here's a minimal reproducing repo: https://github.com/skidding/react-test-useeffect\r\n\r\n> Note that other _use_ APIs seemed to work (eg. `useContext`)."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nWhen you pass a unknown prop to a DOM element - common when you pass `{...props}` to something that turns out to be a div/span/any other DOM element rather than a composite component - you get a warning like so:\r\n\r\n```Warning: React does not recognize the `propName` prop on a DOM element. ....```\r\n\r\nIf the tree is pretty complicated, especially if you're using HOCs, it can be very hard to find where this prop has been passed and to which DOM element. \r\n\r\n**What is the expected behavior?**\r\n\r\nWe had a quick muck around with react-dom and logging the DOM element that triggers this warning allows you to see the element in the DOM and makes it much easier to work out where the prop is being accidentally passed. You can even use the react dev tools to work out exactly which line the component is defined in the code.\r\n\r\nSimply logging the element is obviously not the most elegant way of showing the user where the mistake is, but would it be possible to do _something_ in order to make it quicker to fix mistaken prop passing like this?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAll."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?** Feature\r\n\r\n**What is the current behavior?**\r\n\r\nContext not passed into getDerivedStateFromProps:\r\n\r\n```\r\nstatic getDerivedStateFromProps(props, state, context) {}\r\n```\r\n\r\nJust curious with the new `static contextType`, it would save a lot of nesting if I could access context now from getDerivedStateFromProps when using this pattern. I gave it a shot assuming it may work already but I get undefined from the third argument.\r\n\r\nJust curious if there's been any discussion on this."},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nThis is feature request.\r\n\r\n**What is the current behavior?**\r\n\r\n`getDerivedStateFromError` hook receives `error` and doesn't have access to `state` or component instance. This limits possible ways in which it could be used and requires to additionally use other hooks to derive the state:\r\n\r\n```js\r\nclass App extends Component {\r\n  state = {}\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { error }\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    // do we really need this?\r\n    // the state is derived from error, not props\r\n    if (state.error)\r\n      return remapStateToPreferredStructure(state);\r\n  }\r\n\r\n  render() { /* ... */ }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\n`getDerivedStateFromError` is expected to receive previous state and have\r\n\r\n```\r\ngetDerivedStateFromError(error, state)\r\n```\r\nsignature to be consistent with related static hook, `getDerivedStateFromProps`. This `getDerivedStateFromError` signature is backward compatible with existing one (React 16.6.0).\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16.6.0\r\n"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\nOnly `className` exists right now.\r\n\r\n**What is the expected behavior?**\r\n\r\nI think adding `classList` property for DOM elements would be useful. As far as I understand React Fire will drop support for IE11 but even in IE11, you can add or remove classList from elements.\r\n\r\nAnother idea might be adding support for for array type for `className` (or future `class`, which will make more sense because array). If array is passed, `classList` will be used for DOM elements. Otherwise, `className` is used as usual in the real DOM side.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAll versions. I hope this is added in React Fire."},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nOften we will use expressions like this:\r\n\r\n`{ !x ? null : <Component title={x.title} /> }`\r\n\r\n**What is the desired behavior?**\r\n\r\nWe would like to have expressive components such as\r\n\r\n```\r\n<When c={x}>\r\n   <Component title={x.title} />\r\n</When>\r\n```\r\n\r\nIn many cases this generic syntax is preferred over an explicit child component or pure function which knows about what it is supposed to render.\r\n\r\nThe issue is that this will evaluate the children, even if they ultimately are not returned (since they are passed as children to the When component).\r\n\r\nWhat is desired is for the syntax above to be able to behave exactly like a conditional expression, in that the contained children are not actually processed at all unless a condition is met.  In reality the component could be something else entirely such as `<SuperUser />` which will only process and render the children if the current user is a super user, or `<Morning />` to only process and render items between 8 AM and 11 AM (or similar).  The key thing is that we do not want the props passed into the children, or the children themselves produced, unless a condition has been satisfied.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nPresumably any version of React."},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nRequest a feature.\r\n\r\n**What is the current behavior?**\r\nI am working on writing a custom React renderer (https://github.com/toxicFork/react-three-renderer-fiber) and right now I have to use `React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED` in order to access stack information for the current frame in order to display warnings for the developer (https://github.com/Methuselah96/react-three-renderer-fiber/blob/react-reconciler/src/core/customRenderer/descriptors/CustomDescriptor.ts#L102).\r\n\r\n**What is the expected behavior?**\r\nI would like to be able to access the stack information for the current frame without worrying for the safety of my employment. Is there a better way for me to be doing this?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16.5.2"},{"labels":[null,null,"enhancement"],"text":"I'm trying to use the Profiler server side rendering with `renderToString` but the onRender callbacks are not getting called.\r\n\r\nIs there a way to do it?\r\nI'm using 16.5.1, NODE_ENV === \"development\".\r\n\r\nMy code looks like this, works fine client side:\r\n```javascript\r\nimport React, { unstable_Profiler } from 'react';\r\n\r\nconst profilerCallback = (id, phase, actualTime, baseTime, startTime, commitTime) => {\r\n        console.log(`${id}'s ${phase} phase:`);\r\n        console.log(`Actual time: ${actualTime}`);\r\n        console.log(`Base time: ${baseTime}`);\r\n        console.log(`Start time: ${startTime}`);\r\n        console.log(`Commit time: ${commitTime}`);\r\n};\r\n\r\nconst MyComponent = () => (\r\n    <Profiler id=\"card\" onRender={profilerCallback}>\r\n        ...\r\n    </Profiler>\r\n)\r\n```"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\n*feature*\r\n\r\n**What is the current behavior?**\r\n\r\nThere is no good way to get the a list of component parents. The only way to do it is to wrap the rendered component to an error boundary, throw a dummy error and pass `componentStack` to the rendered component without throwing the error again.\r\n\r\n![image](https://user-images.githubusercontent.com/1082083/44995658-cb9b7a00-afac-11e8-83da-6b60f6edb6e6.png)\r\n\r\nUnfortunately the idea of hiding thrown errors was refused (see https://github.com/facebook/react/issues/11098) so this experimental hack isn't useful. \r\n\r\n**What is the expected behavior?**\r\n\r\nI'd like to deterministically identify components at DOM tree and use this data to assign persistent data to it without using any custom identifiers. For example store visibility state for a specific component at window.localStorage. \r\n\r\nRelated to https://github.com/facebook/react/issues/1137\r\n"},{"labels":[null,"enhancement"],"text":"This topic originally came up in a `react-devtools` discussion: https://github.com/facebook/react-devtools/issues/1099#issuecomment-414138771.\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nThe package `simple-cache-provider` does not presently provide hooks to understand when we've pulled a resource for the first time, hit the cache, or dropped something from the cache due to `MAX_SIZE`.\r\n\r\nDue to this, tools such as `react-devtools` cannot provide an interface around our cached resources which makes debugging / inspection harder.\r\n\r\n**What is the expected behavior?**\r\nIt would be great if there was a way to expose callbacks / events for when the cache resource has resolved. An idea would be to fire these callbacks / events in the existing switch statement in `read` / `preload` if we are in `__DEV__` mode.\r\n\r\nWith this information we could have a \"redux-devtools\"-esque interface to better understand where our data is coming from and when we're hitting the cache in dev mode.\r\n\r\nTools like this would also be useful to people new to the Suspend API to visually see their resources transition between the various record states.\r\n\r\n"},{"labels":[null,null,"enhancement",null],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nDocumentation of SyntheticEvent claims: \"React normalizes events so that they have consistent properties across different browsers.\" https://reactjs.org/docs/events.html#supported-events\r\n\r\nDocumentation of Keyboard Events lists `boolean repeat` as a supported field: https://reactjs.org/docs/events.html#keyboard-events\r\n\r\nIE11/Edge do not natively support `repeat`, but React does not normalize the event to set `repeat: true` when a keyDown event repeats (i.e. when a key is held down). (Edge has an open bug on this but of course IE11 is abandonware.)\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem.**\r\n\r\nTab to to the only div in this repro and hold down a key:\r\nhttps://jsfiddle.net/acsr4ofu/\r\n\r\nBug: 'repeat!' alert does not appear in IE11\r\n\r\n**What is the expected behavior?**\r\nAn alert dialog showing 'repeat!' should appear in any browser that React supports.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nCurrent version of React, any browser which does not natively support `KeyboardEvent.repeat` but IE/Edge in particular (Chrome always supported; FF since 28; Safari since 10.1). Unknown if this worked in previous versions of React."},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature Request\r\n\r\n**What is the current behavior?**\r\n`testInstance` provides a `props` property, but does not provide a `context` property allowing for context tests.\r\n\r\n**What is the expected behavior?**\r\n`testInstance.context` should return an object containing the instance's current context\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAt least 16.4.1"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nA feature.\r\n\r\n**What is the current behavior?**\r\n\r\nWhen an element is cloned with [React.cloneElement](https://reactjs.org/docs/react-api.html#cloneelement), it's possible to add new props or modify existing ones, but not to remove existing props. \r\n\r\n[Relevant code](https://github.com/facebook/react/blob/v16.8.0-alpha.1/packages/react/src/ReactElement.js#L333).\r\n\r\nExample of how it works right now:\r\n\r\n```\r\nconst element = React.createElement(\"a\", {href: \"http://github.com\"});\r\nconst newElement = React.cloneElement(element, {href: undefined});\r\nconsole.log(newElement.props); // {href: undefined}\r\n```\r\n\r\n**What is the desired behavior?**\r\n\r\nIt would be great to add some way to remove props (passing `undefined` as value?):\r\n\r\n```\r\nconst element = React.createElement(\"a\", {href: \"http://github.com\"});\r\nconst newElement = React.cloneElement(element, {href: undefined});\r\nconsole.log(newElement.props); // {}\r\n```\r\n\r\nI guess I could use directly `React.createElement` but, AFAIK, I'll have also to worry about special attributes like `key` and `ref`. I'd rather not mess with internals.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nI think it has worked this way in all React versions.\r\n\r\n**What's your use case?**\r\n\r\nI am applying a map transformation of elements recursively and I need to remove some virtual props before passing the real elements for React to render.  Console shows `React does not recognize the [unknownProp] prop on a DOM element` for those props, I'd want to avoid that."},{"labels":[null,null,"enhancement"],"text":"As stated in the docs and shown in #4410, the return value of `React.Children.map` is incompatible with the `React.Children.only` function, and will return with the error message:\r\n> Invariant Violation: Invariant Violation: React.Children.only expected to receive a single React element child.\r\n\r\nif used. \r\n\r\nThis incompatibility causes some fairly annoying restrictions, however. From what I understand, this means that you can't edit the properties of a component's children at runtime if they contain any component that requires a single child. (eg. you can't dynamically set the disabled prop of a child `TouchableNativeFeedback` component in the parent).\r\n\r\nI believe this is due to the type differences between the `this.props.children` parameter and the `React.Children.map` return value, the former being a valid element and the latter not (see #4424 and https://github.com/reactjs/reactjs.org/issues/87). \r\n\r\nI'd like to make a request to have the return type of `React.Children.map` be the same as the type of `this.props.children`, which will fix these quirks and be much more intuitive. A separate static function that converts the return type of `React.Children.map` to the same type as `this.props.children` would also solve the issue. It feels like some sort of fix is in order, since it's a broad and strange restriction on the components you can use."},{"labels":[null,null,null,"enhancement"],"text":"Currently `createPortal` only works within the current renderer.\r\n\r\nThis means that if you want to embed one renderer into another (e.g. `react-art` in `react-dom`), your only option is to do an imperative render in a commit-time hook like `componentDidMount` or `componentDidUpdate` of the outer renderer's component. In fact that's exactly how `react-art` works today.\r\n\r\nWith this approach, nested renderers like `react-art` can't read the context of the outer renderers (https://github.com/facebook/react/issues/12796). Similarly, we can't time-slice updates in inner renderers because we only update the inner container at the host renderer's commit time.\r\n\r\nAt the time we originally discussed portals we wanted to make them work across renderers. So that you could do something like\r\n\r\n```js\r\n<div>\r\n  <Portal to={ReactART}>\r\n    <surface>\r\n      <rect />\r\n    </surface>\r\n  </Portal>\r\n</div>\r\n```\r\n\r\nBut it's not super clear how this should work because renderers can bundle incompatible Fiber implementations. Whose implementation takes charge?\r\n\r\nWe'll want to figure something out eventually. For now I'm filing this for future reference."},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\n`<Surface>` of canvas mode and `<Surface>` of svg mode cannot be used in a document at the same time.\r\n\r\n**What is the expected behavior?**\r\nTwo more `<Surface>` components with each other modes can be used in a document at the same time.\r\n\r\n\r\nCurrently developers can set only one rending mode globally in react-art, using `setCurrent()` of `art/modes/current` module. So there is no way to use `<Surface>` of canvas mode and `<Surface>` of svg mode in a document together. On the other hand, `art.js` internally used in `react-art` provides a way to use each other modes together as directly importing their corresponding modules.  (e.g. svg.js for svg mode, canvas.js for canvas mode in `art.js` lib). \r\n\r\nI would like to suggest a way to set own rendering mode per instance of `<Surface>` Component by new property `mode`. This feature makes `<Surface>` with canvas mode and `<Surface>` with svg mode to be used together in a document like the following.\r\n\r\n```javascript\r\nconst {\r\n  Surface,\r\n  Group,\r\n  Shape\r\n} = require('react-art');\r\n\r\nclass TestComponent extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Surface mode=\"svg\" width={100} height={100}>\r\n          <Group>\r\n            <Shape width={10} height={10} />\r\n          </Group>\r\n        </Surface>\r\n        <Surface mode=\"canvas\" width={100} height={100}>\r\n          <Group>\r\n            <Shape width={10} height={10} />\r\n          </Group>\r\n        </Surface>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n};\r\n```\r\n\r\nIf `mode` property is not set, `<Surface>` works as canvas mode for compatibility.\r\n\r\nI have made a PR for this feature to show how to work and use it ([#13249](https://github.com/facebook/react/pull/13249)).\r\nAnd you can check this feature through `art` fixture of my PR.\r\n\r\nFeel free to discuss about this feature.\r\n\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n**feature**\r\n\r\nCan fiber._debugID also be part of performance measure [label](https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactDebugFiberPerf.js#L91) along with component name/displayName?\r\n\r\nto distinguish/track multiple instances of a react component in performance measures, please let me know if there is any other way already available to achieve this."},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\nSynthetic keyboard events do not contain `isComposing`.\r\nThey should if the value is true, per the w3 spec 4.7.5: https://www.w3.org/TR/uievents/#events-compositionevents\r\n \r\n**What is the expected behavior?**\r\n`event.isComposing === event.nativeEvent.isComposing`\r\n\r\nSyntheticKeyboardEvent#isComposing is true when a keydown even is fired after compositionstart and before compositionend.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nall versions, up through at least 16.4.1"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nProbably bug, but arguably a feature request, I suppose.\r\n\r\n**What is the current behavior?**\r\n\r\nI've attempted my best effort at a fiddle that shows off the particular issue. Obviously server side rendering is impossible via JSFiddle, but the markup should be equivalent to having rendered `Test` into a div with id `test-1` during server side render.\r\n\r\nhttps://jsfiddle.net/y8o5n2zg/\r\n\r\nAs seen in the fiddle, an attempt to ReactDOM.hydrate() a portal results in:\r\n> `Warning: Expected server HTML to contain a matching text node for \"Hello World\" in <div>.`\r\n\r\nAdditionally, after failing to hydrate, React renders the component and appends it resulting in a duplicated section of DOM:\r\n> `<div id=\"test-1\">Hello WorldHello World</div>`\r\n\r\n**What is the expected behavior?**\r\n\r\nIn an ideal world, calling hydrate on a component that has portals would allow those DOM containers to hydrate into the components they were rendered with.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nI've only tested this in 16.4.1, but I've confirmed the behavior in Chrome and Firefox. Given that I'm really looking at an edge case here I doubt it worked previously.\r\n\r\n\r\n#### *Why* I'm doing this edge-case-y nonsense:\r\n\r\nWe're currently using multiple React roots on our pages (as some portions of the pages are not rendered by React yet), most of which are server-side rendered. We'd like to be able to hydrate them into a single React root on page, so that we can share contexts between them without difficulty and without repeating those context components in memory (in some cases we can have a good number of roots on the page—20-30, perhaps?).\r\n\r\nIn searching, I found a few potentially related bugs (#12615, #10713, #11169), but it seemed like these really didn't line up with my (hopefully valid?) use case.\r\n\r\nThanks!\r\n"},{"labels":["enhancement"],"text":"I apologise for raising this issue again, I'm not intending to be annoying or disrespectful by this, but my previous issue #13034 was closed with a suggestion which I believe not does mitigate the feature request.  I'm simply not aware if I should take the hint and go away, if there's a bit of a backlog and I should hang in there, or if it's been missed.  I'm assuming the latter, but beg forgiveness if that is not the case.  Should you want me to go away I will do so :)  Thanks.\r\n\r\nI'm trying to build a container component and child component, whereby the children can sit anywhere in the hierarchy beneath the container, but know their relative order/index within that hierarchy.\r\n\r\nMy use-case is to build a helper wrapper for CSS grids, allowing subcomponents to themselves render a \"row\" component which knows it must be the next index, and may or may not progress the row counter for the next \"row\" component found in order.\r\n\r\nI've looked into two possible avenues - recursing using React.Children on the component, which stops when it hits a component without props.children (e.g. a redux-connect()-ed one), and passing some means of counting via context, which fails because it seems the render() methods of the child components isn't always called in \"DOM order\".\r\n\r\nMore background here - https://stackoverflow.com/questions/50776933/react-get-component-order-within-hierarchy\r\n\r\nIt would be great to have some feature in React which might allow for this.\r\n\r\n@aweary had previously suggested in #13034 that context could do this with nesting, however I'd raised the thought that this would give an indication of recursion depth, not relative position."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\n[Reparenting](https://github.com/facebook/react/issues/3965) is an unsolved issues of React(DOM). So far, it was possible to hack around the missing support for it by relying on unstable API (`unstable_renderSubtreeIntoContainer`) to render **and update** a subtree inside a different container. It's important to note that this API was using React's diffing algorithm so that, similar to `ReactDOM.render()`, it is possible to keep components mounted.\r\n\r\n```js\r\nReactDOM.render(<Foo />, container);\r\n// This won't get <Foo /> to be unmounted and mounted again:\r\nReactDOM.render(<Foo />, container);\r\n\r\nReactDOM.unstable_renderSubtreeIntoContainer(\r\n  parentComponent,\r\n  <Foo />,\r\n  container\r\n);\r\n// This also won't get <Foo /> to be unmounted and mounted again, no matter if \r\n// we change parentComponent (and thus call it from a different parent):\r\nReactDOM.unstable_renderSubtreeIntoContainer(\r\n  parentComponent,\r\n  <Foo />,\r\n  container\r\n);\r\n```\r\n\r\nHowever this unstable API is [going to be deprecated soon](https://github.com/facebook/react/issues/10143) and recent features like the introduction of the new context API introduced [additional issues](https://github.com/facebook/react/issues/12493).\r\n\r\nAs an alternative to this unstable API, `ReactDOM.createPortal(children, container)` was introduced. However this API is unsuitable for the reparenting issue since it will always [create a new mount point](https://github.com/facebook/react/issues/10713) inside the `container` instead of applying the diffing _when called from a different parent_ (Check out this [CodeSandbox](https://codesandbox.io/s/91o7oovo54) where calling the portal from a different portal will cause the `<Leaf />` to have a new uuid). The reason for this is that we want multiple portals to be able to render inside the same `container` which makes perfect sense for more common use cases like popovers, etc.\r\n\r\nBefore we're going to remove `unstable_renderSubtreeIntoContainer`, I suggest we find a way to portal into a specific node instead of appending to it so that we can diff its contents instead (or implement a solution for #3965 although that seems to be more complicated), similar to `unstable_renderSubtreeIntoContainer`."},{"labels":[null,"enhancement"],"text":"Hey,\r\n\r\nIt seems like there is currently no way to take two mounted component instances and tell which one of them is coming earlier in the application structure (they could have been mounted asynchronously, and tracking the instantiation/render/mount time is not enough). Ideologically I cannot traverse the application tree, that is understandable.\r\n\r\nThough, the relative positions are needed sometimes. My use case — I track focusable elements in the application using context (each focusable element reports of its existence to a focus manager which is provided by the context). This is needed to be able to limit the focusablility/accessibility of all elements which are outside of the currently shown modal dialog/popup so that the focus is trapped inside. For the sake of better accessibility, I need to automatically focus first focusable in the modal dialog when I'm in the keyboard navigation mode. So, I have the references to all focusable elements inside the dialog, but I cannot tell which one comes first using public React API. For web there is a workaround to findDOMNode and compareDocumentPosition(), but that doesn't work with React Native.\r\n\r\nCan we have something similar to compareDocumentPosition() but for React component instances?\r\n\r\nThanks!\r\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nCreating a custom element with a `ref` attribute currently is not possible, because `React.createElement('my-element', { ref: 'my-attribute' })` will interprete the `ref` attribute in a special sense.\r\n\r\n**What is the expected behavior?**\r\nLike for `htmlFor` it would be great if there were an alias that allows creating a `ref` attribute on a custom element.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n16.3"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\n`<event>.code` is undefined\r\n\r\n**What is the expected behavior?**\r\n`.code` is a very useful part of the KeyboardEvent spec: https://www.w3.org/TR/uievents/#dom-keyboardevent-code\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nI am on React 16.3, but I saw no mention of this in today's 16.4 changelog.\r\n"},{"labels":[null,null,"enhancement"],"text":"**What is the current behavior?**\r\n\r\n`ReactIs.typeOf` currently only works for element types, it does not allow you to pass a raw `Component` or `ForwardRef` to know the type.\r\n\r\nThe use case for this is in `hoist-non-react-statics` I now need a [special cases for `ForwardRefs`](https://github.com/mridgway/hoist-non-react-statics/issues/48). To do this, I will need to know the type of the source and target components, but currently I would need to turn them into elements first.\r\n\r\nAll of the `ReactIs.is*` functions also have this issue since they use the `typeOf` function internally.\r\n\r\n```js\r\nconst ForwardComponent = React.forwardRef(() => {});\r\n\r\nReactIs.typeOf(ForwardComponent); // undefined\r\nReactIs.typeOf(React.createElement(ForwardComponent)); // Symbol(react.forward_ref)\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nIdeally I could pass in just the Component and get the type of it: \r\n```js\r\nReactIs.typeOf(ForwardComponent) // Symbol(react.forward_ref)\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReactIs@16.3.2\r\n"},{"labels":["enhancement"],"text":"I find myself needing a higher-order component every once in a while when using render props, so I can get stuff from context in my lifecycle methods. It's pretty easy to create a HOC from a render prop, so I was wondering how open y'all would be to adding a HOC to the new context API?\r\n\r\nWe can already do this in userland with a little `withContext` helper:\r\n\r\n```js\r\nfunction withContext(Context, Component) {\r\n  return props => {\r\n    return (\r\n      <Context.Consumer>\r\n        {context => <Component {...props} context={context} />}\r\n      </Context.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nconst AppWithContext = withContext(MyContext, App);\r\n```\r\n\r\nIt would be useful to have this built-in to the new context API, something like:\r\n\r\n```js\r\nconst MyContext = React.createContext();\r\n\r\nconst AppWithContext = MyContext.provide(App, 'optionalNameOfTheProp');\r\n```\r\n\r\nThe second argument to `provide` (the prop name) could default to `context`.\r\n\r\nAnyway, just thought I'd open this up for discussion before making an actual PR that adds this. Thanks for your consideration 😅\r\n\r\n[EDIT: Removed example using `this.context`]"},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nMany react components render multiple times automatically.  Take a graphql component.  First it will render a loading spinner, then the data after it has been fetched.  In react-test-renderer, it's difficult to get a snapshot to consistently render for these types of components.\r\n\r\nCurrently, we set an interval timer and check the component tree to see if the data has loaded and thus rendered.  This approach results in a bunch of unnecessary checks and slows down tests because the interval timer will run after the component has been rendered.\r\n\r\n**What is the expected behavior?**\r\nI would expect react-test-render to allow a callback that will be invoked each time any component in the component tree changes, basically after any component's `componentDidUpdate` ran.  I would expect an API like:\r\n```\r\nimport TestRenderer from 'react-test-renderer';\r\nconst testRenderer = TestRenderer.create(\r\n  <Todos />\r\n);\r\ntestRenderer.onChange(() => {\r\n// check TODOS for whether the data has loaded and do the snapshot\r\n})\r\n```\r\n\r\nThis would be useful in react-dom and react-native.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nIt's a proposal for a new feature, doesn't affect any existing React versions\r\n\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nOur error logging systems has been reporting this error in production: “Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.\"\r\n\r\nHowever, we can’t reliably reproduce this error and it only affects a small percentage of our users. Moreover, we have more than 1,000 in-house components and several third-party components. So, it’s impractical to audit every single component to find out what caused it.\r\n\r\n**What is the expected behavior?**\r\nIt would be much easier for us to debug if, when the nested update count exceeds 1,000 (current NESTED_UPDATE_LIMIT), we could see what components are involved in this nested update chain.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nWe are using React 16.3.1."},{"labels":[null,null,"enhancement"],"text":"[Edit]: **I'm asking for a feature**.\r\n\r\n**Current Behaviour**\r\nAn input `onChange` function that returns a value equalling the prior value causes the cursor to jump to the end of the input. This is the same as [this comment from #995](https://github.com/facebook/react/issues/955#issuecomment-327069204) formally raised as a feature request. \r\n\r\nRepro sandbox: https://codesandbox.io/s/n4k3yx47j\r\nThat same code:  \r\n```javascript\r\nimport React from \"react\";\r\nimport { render } from \"react-dom\";\r\n\r\nclass Input extends React.Component {\r\n  state = { value: \"TypeANumber\" };\r\n\r\n  onChange = e => {\r\n    let nextValue = e.target.value;\r\n\r\n    if (/[0-9]/.test(nextValue)) {\r\n      nextValue = this.state.value;\r\n    }\r\n    this.setState({ value: nextValue });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <input\r\n        type=\"text\"\r\n        value={this.state.value}\r\n        onChange={this.onChange}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nrender(<Input />, document.getElementById(\"root\"));\r\n```\r\n\r\n**What is the expected behavior?**\r\nI'd like the cursor not to jump in the special case where the returned changed value is a rejected change i.e. the 'noop' change. \r\n\r\nI understand fully that react cannot predict cursor position if the value is _changed_ in `onChange`, ~however I cannot currently find an npm module that allows free-length regex filters (vs a fixed length mask)~ or a way to implement a filter myself, without the cursor jumping in this case. \r\n\r\n[Edit]: \r\nSince raising I now fully see this as a feature request for handling a special case of a behaviour that indeed is not a bug, differently. It would be a nice to have as it would allow very straightforward implementation of filters. \r\n\r\nRegarding the non-clarity of how to deal with the general case of non-jumping cursors I think a modernized best practice example would be ideal, but that discussion still lives at #955.  \r\n\r\nI'd be totally fine with this issue being closed by assisting instead with the education of handling the general case. Though, this would still be a nice to have for the API, if possible. \r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nI would like to request a new feature. \r\n\r\n**What is the current behavior?**\r\nAt the moment there is no way to create an instance of a `ReactTestInstance`. I would love to be able to do something like:\r\n\r\n```js\r\nconst div = document.createElement('div');\r\nconst componentRef = ReactDOM.render(<MyComponentUnderTest />, div); // or renderIntoDocument\r\nconst testInstance = new ReactTestInstance(componentRef);\r\n// now I can run queries using the API of ReactTestInstance\r\n// against a component tree that has been fully DOM rendered\r\ntestInstance.findAll(..)\r\ntestInstance.children.forEach(() => {});\r\ntestInstance.parent\r\n```\r\n\r\n**Why?**\r\nLibraries such as [Enzyme](https://github.com/airbnb/enzyme) can be used to test React components by [full DOM rendering](http://airbnb.io/enzyme/docs/api/mount.html) and providing an API to find components and get information about them.\r\n\r\nAs far as I know, there is no way of querying the component tree created by `ReactDOM.render` without relying on the internals of React nodes. This means that Enzyme, in order to support full DOM rendering and it's querying API, it has to interact with React nodes directly. This reliance causes problems in Enzyme whenever React adds a new node type (forwardRef, ContextProvider/Consumer for example).\r\n\r\nI have started [this RFC](https://github.com/airbnb/enzyme/issues/1648) that proposes that Enzyme uses `ReactTestWrapper` from `react-test-renderer` as a layer on top of React node objects. This allows the library to be decoupled from the internals of React. The solution proposed in the RFC relies on the being able to create a `ReactTestInstance` from a `ReactDOM.render` component tree.\r\n\r\nPlease let me know if this is something you would consider 😄 "},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n**What is the current behavior?**\r\nin React tree name of a Context must be like its name in code\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n```js\r\nconst MyContext = React.createContext(null);\r\n```\r\n```js\r\n   <MyContext.Consumer>\r\n   { data => ... }\r\n   </MyContext.Consumer>\r\n```\r\nlet's have a look at React tree in Chrome extention's page\r\n\r\nhere is Context - not MyContext\r\n\r\n**What is the expected behavior?**\r\n\r\nexpexted to see MyContext\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.3.2"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n*Feature.*\r\n\r\n**What is the current behavior?**\r\nWe are probably all familiar with the following message.\r\n\r\n```\r\nbundle.js:1\r\n\r\nWarning: Cannot update during an existing state transition (such as within `render`\r\nor another component's constructor). Render methods should be a pure function\r\nof props and state; constructor side-effects are an anti-pattern, but can be moved\r\nto `componentWillMount`.\r\n```\r\n\r\nFor those who never came across this message, it can be created simply by mounting the following component.\r\n\r\n```js\r\nclass UpdateDuringRender extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: 'initial',\r\n    };\r\n  }\r\n\r\n  updateState(text) {\r\n    this.setState({ text });\r\n  }\r\n\r\n  render() {\r\n    this.updateState('updated!');\r\n\r\n    return (\r\n      <div>\r\n        {this.state.text}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\nCan we be more specific which component triggers this warning (I think it could be even treated as an optional error)? When this suddenly appears in the app, sometimes it's tough to find the culprit. Some stack trace or at least the offending component would be helpful in the warning message. Not sure how it's solved internally, but yeah, would be a nice hint to help remove anti-patterns.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n`\"react\": \"^16.3.1\"`"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\n`getDerivedStateFromProps` is called on a PureComponent even if the props haven't changed\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\n**What is the expected behavior?**\r\nAs is\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAll\r\n\r\nI was hoping `getDerivedStateFromProps` wouldn't be called on a PureComponent if the props hadn't changed. Any reason why this shouldn't/couldn't be the case?\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nHydrating some server-rendered content can be difficult, inefficient or impossible. For example, in the process of rendering on the server, significant work or additional data may be required for data processing and conversion, such as custom templating or localization. The content can be large too, such as product information or a news article.\r\n \r\nWhen the resulting content is highly dynamic and changes with state, there is no choice but recreate it within React paradigm and recreate it on client. However, complicated server-generated content is often (if not typically) static. Delivering a redundant copy of static content to client just to compare and ignore it during hydration seems a waste of resources and can be prohibitively expensive. \r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nhttps://codesandbox.io/s/zx38ow3z8x\r\n\r\n**What is the expected behavior?**\r\n\r\nInstead of additional complications of recreating it on the client with hydration, wouldn’t it be much easier to just accept the content from server as-is and tell hydrate() to leave it alone?\r\n\r\nThere may be a few options for non-hydrating SSR:\r\n\r\n1. Add a new callback `shouldComponentHydrate()` to disable hydration of component content\r\n```javascript\r\nexport default class NoHydrate extends Component {\r\n    // return false to avoid re-rendering of this component in hydrate()\r\n    shouldComponentHydrate() {\r\n        return false;\r\n    }\r\n    render() {\r\n        // on server, simply render content\r\n        // on client, this is never called and server content is accepted as-is\r\n        return (\r\n            <div>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n```\r\n\r\n2. Access SSR content from DOM in `render()`\r\n_This is probably the worst option, though it is the only one that definitely works currently._\r\n```javascript\r\nexport default class AutoHydrate extends Component {\r\n    render() {\r\n        // on server, simply render content\r\n        // on client, find SSR in dom and re-render using dangerouslySetInnerHTML\r\n        // ** requires a unique id, generated before or during server rendering **\r\n        return (typeof window === 'undefined') ? (\r\n            <div id={this.props.id}>\r\n                {this.props.children}\r\n            </div\r\n        ) : (\r\n            <div id={this.props.id}\r\n                dangerouslySetInnerHTML={{\r\n                    __html: document.getElementById(this.props.id).innerHTML\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n```\r\n\r\n3. Use `dangerouslySetInnerHTML` with empty content\r\n_It actually works now, but it is not documented that it is supposed to._\r\n```javascript\r\nexport default class Ssr extends Component {\r\n    render() {\r\n        // on server, simply render content\r\n        // on client, render empty content using dangerouslySetInnerHTML,\r\n        // which normally causes a warning of content mismatch and keeps the existing content\r\n        // also add suppressHydrationWarning to turn off the warning.\r\n        return (typeof window === 'undefined') ? (\r\n            <div>\r\n                {this.props.children}\r\n            </div>\r\n        ) : (\r\n            <div\r\n                dangerouslySetInnerHTML={{\r\n                    __html: ''\r\n                }}\r\n                suppressHydrationWarning\r\n            />\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nConsidering that there is a way to make it work now, documenting (3) may be all that needs to happen. However if (1) could be added with same behavior, it would look cleaner.\r\n\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nVersion 16.2. Not sure if the working option 3 has worked before or is supposed to work in future versions."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nReport a bug\r\n\r\n**What is the current behavior?**\r\n`React.hydrate` replaces the DOM after a SSR page is served, and two sibling links in the page have the `href` attributes wrongly set.\r\n\r\nI did a little repl to replicate this behaviour [here](https://repl.it/@EnoahNetzach/SSR-whitespace-mismatch).\r\n\r\nWhen the server responds, the HTML is correct:\r\n\r\n![screen shot 2018-04-04 at 16 08 06](https://user-images.githubusercontent.com/663755/38312693-b1167650-3822-11e8-85f3-0f100caf8a50.png)\r\n\r\nbut right after hydration, the first `href` is changed: \r\n\r\n![screen shot 2018-04-04 at 16 08 20](https://user-images.githubusercontent.com/663755/38312738-c96e1b4a-3822-11e8-9e7e-0d6a9fa24ed2.png)\r\nand whitespace artifacts are added.\r\n\r\n**What is the expected behavior?**\r\nThe first `href` should not be changed.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact v16.2\r\nChrome 65.0\r\nmacOS\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n- Feature (possibly bug?)\r\n\r\n**What is the current behavior?**\r\n\r\nI've been trying out the new Context API in my project and it's awesome. However, in my haste to start using it, I managed to stumble into a situation where every time I would try and render a certain component which was making use of a few different contexts, the app would completely freeze, and the only thing that would let me get out of this error state was to forcefully kill the process via the chrome task manager.\r\n\r\nNothing would be logged to the console, the app would just completely freeze, and when I opened up the task manager and saw the CPU spiked up every time i would go to this component, and the only way I could stop it was to crash the tab. \r\n\r\nI finally threw some `console` statements in and saw that it had just entered into an infinite loop between these providers. I managed to get the app to stop crashing, but I'm still unsure as to why exactly this was happening. I'm sure I was just using this API incorrectly somehow, but this was a very confusing problem to diagnose, and some error checking here would be incredibly useful\r\n\r\n**What is the expected behavior?**\r\n\r\nIt would be very beneficial to have some sort of checks in place, similar to what happens with too many `setState` calls happening too closely when you call it from `componentDidUpdate`, for example. That way, instead of freezing everything up permanently, the app could at least crash and report some sort of information and help me realize where I'd gone wrong.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n- React `16.3.0`\r\n- Chrome `65.0.3325.181`\r\n\r\n"},{"labels":["enhancement"],"text":"Hello,\r\n\r\nI'm testing v16.3.0 and I'm getting this warning:\r\n```\r\nWarning: Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported \r\n```\r\n\r\n My use case is that I wanted to render React Test Renderer (for ex) from a Component in an another (ReactDOM) renderer but it does not seem to work - I wanted to use same Provider in both containers.\r\n\r\nI thought `React.createContext` create objects with no state and could be shared across renderers / Fiber containers.. Is there workaround for this? Are there any thoughts on this, Is this a definite behaviour?\r\n\r\nFollowing the warning, I eventually get the error message which I believe is related to the warning:\r\n\r\n```\r\nUncaught Error: Unexpected object passed to ReactTestInstance constructor (tag: 13). This is probably a bug in React.\r\n```\r\n\r\nthank you for any guidance :)"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\n**What is the current behavior?**\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\n**What is the expected behavior?**\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n![image](https://user-images.githubusercontent.com/5977311/38124026-a0984a98-3411-11e8-838f-2d6f3dc97046.png)\r\n"},{"labels":[null,"enhancement"],"text":"Moved discussion from https://github.com/facebook/react/issues/6212.\r\n\r\n## Situation\r\n\r\nThe [`focusable` attribute](https://www.w3.org/TR/SVGTiny12/interact.html#focusable-attr) from the SVG specifications is an [enumerated attribute](https://html.spec.whatwg.org/#keywords-and-enumerated-attributes) accepting values `\"true\"`, `\"false\"` and `\"auto\"`. Because it is technically not a boolean attribute (although it certainly somehow looks like it), React expects the value to be passed as a string. See the following example:\r\n\r\n```diff\r\n-<svg focusable>I should be focusable</svg>\r\n-<svg focusable={true}>I should be focusable</svg>\r\n+<svg focusable='true'>I should be focusable</svg>\r\n```\r\n\r\nThe thing is, the `focusable` attribute is often used in conjunction with elements from the ARIA specification, in which attributes are booleans and not enumerated attributes with `\"true\"` and `\"false\"` values. The [`aria-hidden` attribute](https://www.w3.org/TR/wai-aria-1.1/#aria-hidden) is a good example of that.\r\n\r\nFor instance, [following a good practice for icon-buttons](https://fvsch.com/code/svg-icons/#section-html):\r\n\r\n```html\r\n<button type=\"button\">\r\n  <svg aria-hidden=\"true\" focusable=\"false\">\r\n    <use xlink:href=\"#icon-play\"></use>\r\n  </svg>\r\n  <span class=\"access-label\">Start playback</span>\r\n</button>\r\n```\r\n\r\nFrom an authoring perspective, the above snippet would likely be written like this in JSX:\r\n\r\n```jsx\r\n<button type='button'>\r\n  <Icon icon='play' aria-hidden={true} focusable={false} />\r\n  <span class='access-label'>Start playback</span>\r\n</button>\r\n```\r\n\r\nThe problem is that `focusable` **cannot** be authored as a boolean, otherwise it will **not** be printed out in the DOM. On the other hand, `aria-hidden` is perfectly fine being written as a boolean at it gets coerced by React.\r\n\r\n## Proposal\r\n\r\nGiven the default value for the `focusable` attribute is `\"auto\"`, this is very likely this attribute gets authored to change its value to `true` or `false`. In that regard, it is confusing that it has to be specified as a string, when other attributes accepting booleans can be authored as such.\r\n\r\nThe suggestion would be to make it possible for `focusable` to be specified as either a boolean or a string, like other similar attributes. In other words, all the following should work:\r\n\r\n```jsx\r\n<svg focusable>I should be focusable</svg>\r\n<svg focusable={true}>I should be focusable</svg>\r\n<svg focusable='true'>I should be focusable</svg>\r\n<svg focusable={false}>I should not be focusable</svg>\r\n<svg focusable='false'>I should not be focusable</svg>\r\n<svg focusable='auto'>I should be focusable</svg>\r\n```\r\n\r\nFrom an authoring perspective, I believe this would be the most straightforward and less confusing."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nSee below.\r\n\r\n**What is the current behavior?**\r\n\r\n1. (Bug / Inconsistency)\r\n```jsx\r\n<input type=\"radio\" checked={false} />\r\n```\r\nNo Warning.\r\n\r\n2. (Feature Request)\r\n```jsx\r\n<input type=\"radio\" checked={true} onChange={undefined} />\r\n```\r\n`Warning: Failed prop type: You provided a 'checked' prop to a form field without an 'onChange' handler. This will render a read-only field. If the field should be mutable use 'defaultChecked'. Otherwise, set either 'onChange' or 'readOnly'.'`\r\n\r\n3. (Bug?)\r\n```jsx\r\n<select value=\"foo\" readOnly={true}>...</select>\r\n```\r\nNo warning.\r\n\r\n**What is the expected behavior?**\r\n\r\n1. Passing a falsy `value` or `checked` attribute will not trigger a warning, but a truthy value does.\r\n\r\n2. If onChange is passed as undefined (or null?) this should be considered as an acknowledgement and silence the warning. I have a case where I split the render method from the component and use it as a preview. When the component is interactive I use the component. When doing a preview I pass undefined as my change handler. A warning is shown to tell me I \"forgot\" it, but I intended it to be this way.\r\n\r\n3. Going along with 2, I can pass `readOnly={!handleChange}`, but according to DefinitelyTyped this isn't a valid attribute for select. I can't use disabled because it changes the appearance of the field.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.2.0\r\nChrome 65\r\n\r\n**Other**\r\n\r\nA proposed \"fix\" would be to change:\r\n\r\nhttps://github.com/facebook/react/blob/37e4329bc81def4695211d6e3795a654ef4d84f5/packages/react-dom/src/shared/ReactControlledValuePropTypes.js#L27-L33\r\n\r\nto:\r\n\r\n```js\r\nif ( \r\n    !(propName in props) || // Fixes 1\r\n    hasReadOnlyValue[props.type] || \r\n    \"onChange\" in props ||  // Fixes 2\r\n    props.readOnly || \r\n    props.disabled \r\n ) { \r\n```\r\n\r\nAnd:\r\n\r\nhttps://github.com/facebook/react/blob/37e4329bc81def4695211d6e3795a654ef4d84f5/packages/react-dom/src/shared/ReactControlledValuePropTypes.js#L44-L49\r\n\r\nto:\r\n\r\n```js\r\nif (\r\n    !(propName in props[propName]) || // Fixes 1\r\n    \"onChange\" in props || // Fixes 2\r\n    props.readOnly ||\r\n    props.disabled\r\n) {\r\n```"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nPerhaps a bug, but could also be seen as a feature\r\n\r\n**What is the current behavior?**\r\n\r\nWhen you move an element to a portal through `ReactDOM.createPortal` the element looses focus if it had focus. If the element gains focus while in a portal, when moving out of the portal it looses focus.\r\n\r\n**What is the expected behavior?**\r\n\r\nI would have expected React to maintain focus of the element when moving in or out of a portal\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nTested with\r\n\r\nReact version: 16.2\r\nBrowsers: Latest chrome and firefox. I did not test others but expect the behaviour to be the same\r\nOS: Tested on Mac High Sierra\r\n"},{"labels":[null,"enhancement"],"text":"_Apologies if this is documented somewhere, but I was unable to find anything related after a pretty exhaustive search of docs + code._\r\n\r\nAre there any production instrumentation hooks for the reconciler?  Specifically, I'm looking for callbacks/events that would allow me to track overall reconciliation time spans (nothing more granular).  E.g. equivalent to the `(React Tree Reconciliation)` span.\r\n\r\nAs best I can tell, there are `performance.timings` spans reported as of Fiber (and `ReactPerf` prior), but those are only enabled in development mode."},{"labels":[null,null,"enhancement"],"text":"I was curious earlier if the `onSelect` event works on things other than form elements and `contentEditable` elements, and by disabling a couple of conditions in the code, it seems — at first brush, at least — that `onSelect` works splendidly on any element that is focusable (via the `tabIndex` attribute), to obtain things like:\r\n\r\n![ezgif-2-326cf42421](https://user-images.githubusercontent.com/205375/36798178-8aa7fdda-1cb2-11e8-8838-46e04300a09a.gif)\r\n\r\nWould there be any problem with relaxing the conditions for allowing `onSelect` to include elements that have a `tabIndex` attribute? (Other than the case where existing implementations in userland rely on the event being disabled when `contenteditable = true` is removed from an element)."},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nbug? Maybe.\r\n\r\n**What is the current behavior?**\r\n\r\nUsing non-delegated handler for submit event.\r\n\r\n**What is the expected behavior?**\r\n\r\nAfter IE9, at least I know, submit event bubbled up.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.2.0"},{"labels":[null,null,"enhancement"],"text":"(This is related to https://github.com/facebook/react/issues/3965.)\r\n\r\nI'm working on a project with a lot of globally unique component instances. (In other words, their `key`s are essentially database IDs.) It also has DnD functionality. For reordering, everything is fine, but moving an instance from one parent to another causes a complete re-render of the instance.\r\n\r\nInstead of moving the nodes around myself, I was thinking of using Portals. Each instance has a prop for which element ID they should render inside. Then, to reparent them, it'd be a simple case of passing a different element ID. (I'm using Redux, so it'd just be a `string` in the state.)\r\n\r\nHowever, changing a Portal's container node also causes a complete re-render of everything passed to `ReactDOM.createPortal`. (See this [CodePen](https://codepen.io/anon/pen/PQQKRP).)\r\n\r\nWould it be possible to skip this re-rendering and effectively move the Portal contents instead?"},{"labels":[null,null,"enhancement"],"text":"A useful feature of context is creating a custom stack of things to see what your component is embedded in side.\r\n\r\nI think the primary use case is logging explicitly.\r\n\r\nCurrently that is pretty expensive to maintain just *in case* you need it. See #12234 as an example.\r\n\r\nWe could provide an API that lazily extracts a whole path of contexts from the tree.\r\n\r\n```js\r\n<FooContext.Provider value={\"foo\"}>\r\n  <FooContext.Provider value={\"bar\"}>\r\n    <FooContext.Provider value={\"baz\"}>\r\n      <App />\r\n    </FooContext.Provider>\r\n  </FooContext.Provider>\r\n</FooContext.Provider>\r\n```\r\n\r\n```js\r\nclass App extends React.Component {\r\n  log() {\r\n    var stack = this.getContextStack(FooContext);\r\n    logToServer(stack); // [\"foo\", \"bar\", \"baz\"]\r\n  }\r\n  render() {\r\n    return <div onClick={this.log} />;\r\n  }\r\n}\r\n```\r\n\r\nIt would basically synchronously rerender the shortest path to recreate the context at the time of the call to create the stack lazily.\r\n\r\ncc @acdlite "},{"labels":[null,"enhancement"],"text":"With the new context API it is really bulky to create a middle man that consumes one context value, transforms it and provides another one. You have to create many components and store an intermediate state to avoid rerendering the provider if the input is unchanged.\r\n\r\nWe could have a convenience API for this use case.\r\n\r\n```js\r\nfunction transform(inputValue) {\r\n  return [...inputValue, extraData];\r\n}\r\n\r\n<Context.Middleware transform={transform}>{children}</Context.Middleware>\r\n```\r\n\r\ncc @acdlite "},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nBug\r\n\r\n**What is the current behavior?**\r\n\r\nReentrancy checks prevent synchronous `ReactDOM.render` in a nested React component. This used to work before React 16, and [seems related to this issue about nested ReactDOM renders](https://github.com/facebook/react/issues/12034)\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nHere's a [JSFiddle](https://jsfiddle.net/e5hbzc1r/14/) that documents the problem, with a simulation of the external dependency where this manifests.\r\n\r\n**What is the expected behavior?**\r\n\r\nI'm running into what I think is a [similar problem to this one](https://github.com/facebook/react/issues/12034), with a nested `ReactDOM.render`, except where the difference is that I don't think we can use portals to address our use-case.\r\n\r\nWe have a component which manages the DOM tree for all nodes below it outside of React — it's a contenteditable node and uses the best-in-class [ProseMirror](https://prosemirror.net/) library to manage its children. The component looks something like this:\r\n\r\n```javascript\r\nclass ProseMirror extends Component {\r\n\tcomponentDidMount() {\r\n\t\t// ProseMirror manages the DOM for all nodes below this.el.\r\n\t}\r\n\r\n\tsetRef(el) {\r\n\t\tthis.el = el;\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (<div ref={this.setRef} />);\r\n\t}\r\n}\r\n```\r\n\r\nAs part of its render cycle, our configuration of ProseMirror ends up calling:\r\n\r\n```javascript\r\nReactDOM.render(<CrucialSubComponent />, someDivManagedByProseMirror);\r\n```\r\n\r\nto render an isolated child node of `<ProseMirror />`, and wants to be able to immediately afterwards be able to leverage:\r\n\r\n```javascript\r\nthis.el.querySelector('.my-subcomponent')\r\n```\r\n\r\n...but this piece of the DOM is no longer available synchronously, and it looks like this is because of the re-entrancy change that came about in React 16. Portals don't work for us, because the site where the `ReactDOM.render` is being called isn't itself directly part of the root React tree (this is [clearer to observe in the fiddle](https://jsfiddle.net/e5hbzc1r/14/)). The hierarchy is something like `<ProseMirror /> ---> (opaque ProseMirror rendering code) --> <CrucialSubComponent />`. Is there a way to skip these re-entrancy checks in these cases where there's an isolated React render happening in a grandchild of a component, but where the React tree isn't the immediate parent?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nQuerying the DOM immediately after ReactDOM.render worked in versions prior to React 16. We're excited about the async possibilities for our main React tree, but curious if there are workarounds where we can ignore the reentrancy checks for these isolated renders."},{"labels":["enhancement"],"text":"\r\n**Do you want to request a *feature* or report a *bug*?**\r\n<h2>FEATURE REQUEST</h2>\r\n\r\n\r\n\r\n**What is the current behavior?**\r\n```js\r\nclass MyComponent extends Component {\r\n  state = { a: 1 }\r\n  method1 = () => {\r\n    this.setState({ a: 2 });\r\n    this.method2();\r\n  }\r\n  method2 = () => {\r\n    // It can not log 2 in the console.\r\n    console.log(this.state.a);\r\n  }\r\n  // xxx...\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n```js\r\nclass MyComponent extends Component {\r\n  state = { a: 1 }\r\n  method1 = () => {\r\n    this.setState({ a: 2 });\r\n    this.method2();\r\n  }\r\n  method2 = () => {\r\n    // With the `getState` method, it should log 2 in the console.\r\n    console.log(this.getState().a);\r\n  }\r\n  // xxx...\r\n}\r\n```\r\n"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\n`getDerivedStateFromProps` only receives the nextProps and previousState as arguments.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nThe deprecated `componentWillReceiveProps(nextProps)` used to allow code like `this.props.foo !== nextProps.foo`. With the new `getDerivedStateFromProps` function, there's no choice (because it is a static method) but to constantly copy `nextProps.foo` into state in order to access it later.\r\n\r\nThis is illustrated in the example posted to twitter by @gaearon: https://twitter.com/dan_abramov/status/953612246634188800?lang=en\r\n\r\n**What is the expected behavior?**\r\n\r\nIdeally (if it's not difficult to implement!) the `getDerivedStateFromProps` would also take the current (previous/old) props as an argument, something like:\r\n\r\n`getDerivedStateFromProps(nextProps, prevState, prevProps)`\r\n\r\nThis would eliminate the need to constantly assign props to state purely for comparison purposes...\r\n\r\nA quick look at the source doesn't make it clear to me how easy this would be though...\r\n\r\nhttps://github.com/facebook/react/blob/4a20ff26ecfe9bc66941d79f7fce2c67be8ee236/packages/react-dom/src/server/ReactPartialRenderer.js#L456\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n16.3.0"},{"labels":["enhancement"],"text":"This is an incomplete draft for a feature I think could be\r\nreally cool. It can replace higher order components\r\nand context in a way I think is more in the component\r\nspirit of React.\r\n\r\nI do not know if this feature is feasible or desirable for\r\nReact, especially as it would lead to a bigger API surface.\r\nThe proposal is written as if it was documentation to\r\ngive a feel for how it would be to use it.\r\n\r\n# About React middleware\r\nA middleware is applied somewhere in the component tree\r\nand are instantiated just after child components are\r\ninstantiated and just before they mount. In this context,\r\nchild components means child components at any depth.\r\n\r\nMiddleware is used just like normal components, but\r\nit works slightly differently. When a middleware element\r\nis used it added to the middleware stack. If it is\r\nalready on the middleware stack, it removed from\r\nthe stack and pushed to the end, with the most\r\ninnermost props.\r\n\r\n## Simplified example\r\nIn addition to the actual classes, the stack also\r\nincludes its most recent props. But this is roughly\r\nhow it works.\r\n\r\n```javascript\r\n<MiddlewareA>\r\n  {/* middleware stack for \"A\": [MiddlewareA] */}\r\n  <A />\r\n  <MiddlewareB>\r\n    {/* middleware stack for \"B\": [MiddlewareA, MiddlewareB] */}\r\n    <B>\r\n      <MiddlewareA\r\n        {/* middleware stack for \"C\": [MiddlewareB, MiddlewareA] */}\r\n        <C />\r\n      </MiddlewareA>\r\n    </B>\r\n  </MiddlewareB>\r\n</MiddlewareB>\r\n```\r\n\r\n# Lifecycle methods\r\n\r\n## Additions to the existing lifecycle methods\r\n\r\n### Mounting\r\n- new: Middleware.shouldMiddlewareMount\r\n- new: Middleware.shouldMiddlewarePropagate\r\n- Component#constructor\r\n- new: Middleware#constructor\r\n- new: Middleware#middlewareWillMount()\r\n- Component#componentWillMount()\r\n- Component#render()\r\n- new: Middleware#interceptRender()\r\n- Component#componentDidMount\r\n\r\n### Unmounting\r\n- new: Middleware#middlewareWillUnmount\r\n\r\n## static shouldMiddlewareMount(ReactComponent)\r\nDetermine if the current middleware should apply for\r\na component. If the method isn't implemented, the\r\nmiddleware will always be applied.\r\n\r\nIf a middleware is on the middleware stack, this method\r\nis called every time a component is constructed.\r\n\r\n### Example\r\n\r\n```javascript\r\nclass TransformInlineStyles extends React.Middleware {\r\n\r\n  /**\r\n   * Only mount middleware when you set\r\n   * transformInlineStyles to a truthy\r\n   * value. Children of the given\r\n   * component can still enable\r\n   * the middleware\r\n   */\r\n  static shouldMiddlewareMount(Component) {\r\n    return Component.transformInlineStyles\r\n  }\r\n\r\n  // ...\r\n}\r\n\r\nconst A = props => (\r\n  // ...\r\n)\r\n\r\nconst B = props => (\r\n  // ...\r\n)\r\nB.transformInlineStyles = true\r\n\r\nconst App = () => (\r\n  <TransformInlineStyles>\r\n    {/* Not applied to \"A\" */}\r\n    <A>\r\n      {/* Applied to \"B\" */}\r\n      <B />\r\n    </A>\r\n  </TransformInlineStyles>\r\n)\r\n```\r\n\r\n## static shouldMiddlewarePropagate(ReactComponent)\r\nDetermine whether the middleware should remain on\r\nthe middleware stack or be excluded for the subtree\r\nbelow the given component. If not specified it returns\r\nfalse, in other words: The default behavior for\r\nmiddleware is to propagate.\r\n\r\nThis is useful if you want to limit middleware from\r\naffecting deeply nested children. It is also useful\r\nfor only giving middleware access to its immediate\r\nchildren.\r\n\r\n### Example\r\n\r\n```javascript\r\nimport React from 'react'\r\n\r\nclass ProvideTheme extends React.Middleware {\r\n  static StopPropagation = props => props.children\r\n\r\n  static shouldMiddlewarePropagate(Component) {\r\n    return Component !== this.StopPropagation\r\n  }\r\n\r\n  // ...\r\n}\r\n\r\nconst App = () => (\r\n  <ProvideTheme>\r\n    {/* middleware stack for \"A\": [ProvideTheme] */}\r\n    <A>\r\n      <ProvideTheme.StopPropagation>\r\n        {/* middleware stack for \"B\": [] */}\r\n        <B />\r\n      </ProvideTheme.StopPropagation>\r\n      {/* middleware stack for \"C\": [ProvideTheme] */}\r\n      <C />\r\n    </A>\r\n  </ProvideTheme>\r\n)\r\n```\r\n\r\n## middlewareWillMount(reactInstance)\r\nCalled before the child component calls componentWillMount.\r\nThis is a good place to initialize state for the middleware\r\ninstance.\r\n\r\n## MiddlewareWillUnmount(reactInstance)\r\nCalled before the child component calls componentWillUnmount.\r\n\r\n### Example\r\nThis is a naïve example of how it could be used to trigger\r\nautomatic updates with Mobx.\r\n\r\n```javascript\r\nclass Observer extends React.Middleware {\r\n  middlewareWillMount(reactInstance) {\r\n    this.dispose = autorun(() => {\r\n\r\n      // Let Mobx track the observables\r\n      // used in the render method.\r\n      reactInstance.render()\r\n\r\n      // Force update the component instance\r\n      // after Mobx has stopped tracking the\r\n      // autorun function.\r\n      //\r\n      // .. yes, I know it's hacky.\r\n      setTimeout(() => {\r\n        reactInstance.forceUpdate()\r\n      })\r\n    })\r\n  }\r\n\r\n  middlewareWillUnmount(reactInstance) {\r\n    // Stop listening for changes from Mobx\r\n    this.dispose()\r\n  }\r\n}\r\n```\r\n\r\n## interceptRender(children)\r\ninterceptRender is called with the result from the render\r\nfunction of the component. The resulting value is what is\r\nused to render the DOM.\r\n\r\n### Example\r\nThis is an example of a middleware that transforms object\r\nclasses into a string. The result works similarly to how\r\nng-class works in AngularJS.\r\n\r\n```javascript\r\nclass ObjectClassNames extends React.Middleware {\r\n\r\n  /**\r\n   * This is a life cycle method.\r\n   *\r\n   * Intercept the render method and recursively\r\n   * loop through all children, performing\r\n   * this.transformProps() on their props.\r\n   */\r\n  interceptRender(children) {\r\n    return React.Children.map(children, child => {\r\n      if (! React.isValidElement(child)) {\r\n        return child\r\n      }\r\n      return {\r\n        ...child,\r\n        props: this.transformProps(child.props),\r\n        children: this.interceptRender(child.children)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * If a child has an object className, call\r\n   * this.transformClassname() on it.\r\n   */\r\n  transformProps(props) {\r\n    if (! props || ! props.className || typeof props.className !== 'object') {\r\n      return props\r\n    }\r\n\r\n    return {\r\n      ...props,\r\n      className: this.transformClassname(props.className)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Concatenate the truthy keys of the className\r\n   * object into a string.\r\n   */\r\n  transformClassname(className) {\r\n    const result = []\r\n\r\n    for (const key of Object.keys(className)) {\r\n      if (className[key]) {\r\n        result.push(key)\r\n      }\r\n    }\r\n\r\n    return result.join(' ')\r\n  }\r\n}\r\n\r\nconst Widget = (props) => (\r\n  <div className={{ 'Widget': true, 'Widget--active': props.active }}>\r\n    Some widget\r\n  </div>\r\n)\r\n\r\nconst App = () => (\r\n  <ObjectClassNames>\r\n    <Widget active={true} />\r\n  </ObjectClassNames>\r\n)\r\n```\r\n\r\n# Why middleware?\r\nReact middleware can replace two problematic patterns used with React.\r\n\r\n## Context\r\nThe h2 on context in the React docs says \"Why Not To Use\r\nContext\". Context is however a very useful feature. And\r\npeople have been and will continue to use and abuse it\r\nin the forseeable future. React Router has started\r\nabusing context in its most recent version, which shows\r\nthat there is clearly a need here.\r\n\r\nWith middleware, as I propose it, you would be able to\r\ninject props into an arbitrary subtree of your app. This\r\nhas performance implications, but would be an ideal\r\nscenario for libraries such as React Router, as the\r\nrelevant props (or as it is now, context) rarely\r\nchanges. With middleware shouldComponentUpdate\r\nwill still function like you would expect.\r\n\r\n## Higher order components\r\nA primal rule of programming is DRY. When using Mobx\r\nwith React, you must use the observer decorator on\r\nall reactive classes. This isn't a really big deal,\r\nbut not having to include that would reduce the size\r\nof every single observer component by two lines and\r\nmost importantly, I wouldn't forget it.\r\n\r\nWhen creating a higher order component static properties\r\nare no longer available. The package hoist-non-react-static\r\nis designed so that you should be able to access static\r\nproperties of higher order components transparently.\r\nIf a static property is initialized in the lifecycle\r\nmethods of a component, it will however not be proxied.\r\n\r\nCreating higher order components is also a messy affair.\r\n\r\nWith middleware you could achive the same thing in a React\r\nway. To replace connect from react-redux you could set\r\nshouldMiddlewarePropagate to return false, and it would\r\naffect only one component.\r\n\r\nAlternatively you could use static properties for\r\nmapStateToProps and mapDispatchToProps."},{"labels":["enhancement"],"text":"i found this issue: https://github.com/facebook/react/issues/4770,  and @sophiebits said that React never reuses an instance after it's been unmounted. \r\n\r\ndoes it means that React will never support feature like keep-alive in Vue? or there is other way to maintain component's state?\r\n"},{"labels":["enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nI want to request a feature.\r\n\r\n**What is the current behavior?**\r\n\r\nWe have no API to verify a ReactNode is a React 16 Fragment. Though now we can use `React.isValidElement(instance) && typeof instance.type === 'symbol'` to distinguish it. It's verbose and seems uncertianly right.\r\n\r\n**What is the expected behavior?**\r\n\r\nAdd api:\r\n\r\n```\r\nReact.isFragment(object)\r\n```\r\nVerifies the object is a React.Fragment. Returns true or false.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16.2"},{"labels":[null,"enhancement"],"text":"The addition of the `Fragment` in 16.2.0 is fantastic and helps keep our HTML semantic and clean. Unfortunately there is still no way to inject HTML without a wrapping tag.\r\n\r\n```jsx\r\nconst HTML = <span>Hello World</span>;\r\n\r\n<div key={ ID } dangerouslySetInnerHTML={ { __html: HTML } } />\r\n```\r\n\r\nwhich will render:\r\n\r\n```html\r\n<div><span>Hello World</span></div>\r\n```\r\n\r\nIt would be mostly helpful for rendering HTML from jsx on the back end rather than in the SPA context. To me `Fragment` seems to be the ideal candidate to support `dangerouslySetInnerHTML` so that you may inject HTML without wrapping elements.\r\n\r\n```jsx\r\nconst HTML = <span>Hello World</span>;\r\n\r\n<Fragment key={ ID } dangerouslySetInnerHTML={ { __html: HTML } } />\r\n```\r\n\r\nwould render:\r\n\r\n```jsx\r\n<span>Hello World</span>\r\n```\r\n\r\nSimple, obvious and aligned with the current API."},{"labels":[null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nBUG or undefined behaviour\r\n\r\n**What is the current behavior?**\r\n\r\nDoing\r\n```\r\nReact.Children.toArray(\r\n  ReactDOM.createPortal(...)\r\n)\r\n```\r\n\r\nfails with:\r\n```\r\nObjects are not valid as a React child (found: object with keys {$$typeof, key, children, containerInfo, implementation}). If you meant to render a collection of children, use an array instead.\r\n```\r\n\r\nNamely, the following complete snippet fails:\r\n\r\n```jsx\r\nimport React from 'react';\r\nimport { render, createPortal } from 'react-dom';\r\n\r\nconst RenderChildren = ({ children }) => {\r\n  children = React.Children.toArray(children)\r\n  return <h1>Renders children with toArray: {children}</h1>\r\n}\r\n\r\n\r\nconst App = () => ( \r\n  <RenderChildren name=\"CodeSandbox\">\r\n    {createPortal(<div>rendered in portal</div>, document.getElementById('portal'))}\r\n  </RenderChildren>\r\n);\r\n\r\nrender(<App />, document.getElementById('root'));\r\n```\r\n\r\nwhile the following one, which wraps the portal in another element works just fine\r\n\r\n```jsx\r\nimport React from 'react';\r\nimport { render, createPortal } from 'react-dom';\r\n\r\nconst RenderChildren = ({ children }) => {\r\n  children = React.Children.toArray(children)\r\n  return <h1>Renders children with toArray: {children}</h1>\r\n}\r\n\r\n\r\nconst App = () => ( \r\n  <RenderChildren name=\"CodeSandbox\">\r\n    <div>\r\n        {createPortal(<div>rendered in portal</div>, document.getElementById('portal'))}\r\n    </div>\r\n  </RenderChildren>\r\n);\r\n\r\nrender(<App />, document.getElementById('root'));\r\n\r\n```\r\n**What is the expected behavior?**\r\nI am aware that `createPortal` is a new feature, but in the best case scenario it should be possible to use it everywhere other valid nodes are accepted.\r\n\r\nThe same thing is happening for `React.cloneElement(ReactDOM.createPortal(....))` - it's probably weird to try and clone a portal 😄  - but maybe we should specify in the `createPortal` documentation that it cannot be cloned, at least for now. Should I open a PR for that?\r\n\r\nLet me know your thoughts\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nI'm using React 16.*"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nI want to request a feature\r\n\r\n**What is the current behavior?**\r\n\r\nUsing `Symbols` as element keys throws a type error.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem. Your bug will get fixed much faster if we can run your code and it doesn't have dependencies other than React. Paste the link to your JSFiddle (https://jsfiddle.net/Luktwrdm/) or CodeSandbox (https://codesandbox.io/s/new) example below:**\r\n\r\nWhen using `key={Symbol('myKeySymbol')}` we get the following `TypeError: Cannot convert a Symbol value to a string at Object.ReactElement.createElement`\r\n\r\n[codesandbox here](https://codesandbox.io/s/733pypz57j)\r\n\r\n**What is the expected behavior?**\r\nUsing `Symbols` as keys should work seamlessly, in my opinion element keys are a perfect use-case for `Symbols`.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nUsing React `16.0.0` and the browsers affected are Safari, Chrome and Firefox on OSX, but I'm pretty sure this is not browser dependent but a matter of implementation.\r\n\r\n~~~\r\n\r\nThanks.\r\n"},{"labels":[null,null,null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nThere is no way to distinguish if a `componentDidMount` or `componentWillMount` lifecycle method was called in response to a call to `ReactDOM.hydrate`.\r\n\r\n**What is the expected behavior?**\r\n\r\nI have a component that scrolls to the top of the page in componentDidMount. This makes sense when the component is first created within the client. However, it doesn't make sense when the component has been hydrated, as `componentDidMount` is called after the content is already visible, and possibly after the user has already scrolled.\r\n\r\nWould it be possible to add a `componentWillHydrate` lifecycle method? Then I could do something like this to achieve the desired behavior:\r\n\r\n```js\r\ncomponentWillHydrate() {\r\n  this.hydrated = true \r\n}\r\ncomponentDidMount() {\r\n  if (!this.hydrated) {\r\n    this.scrollToTop()\r\n  }\r\n}\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAll"},{"labels":[null,"enhancement"],"text":"Creating this issue to track https://github.com/facebook/react/pull/11555. I intend to close the PR as it's outdated, but we probably want to turn it into a real RFC and potentially get it in during 16.x."},{"labels":[null,null,"enhancement"],"text":"Second argument of `componentDidCatch` contains componentStack like this:\r\n```\r\n{\"componentStack\":\"\r\n in _Header (created by onlyUpdateForKeys(_Header))\r\n in onlyUpdateForKeys(_Header) (created by TDSection)\r\n in TDSection (created by Container)\r\n in Container (created by AutoLookup)\r\n in AutoLookup (created by AutoLookup)\r\n in AutoLookup (created by GroupContainer)\r\n in GroupContainer (created by Container)\r\n in Container (created by AutoLookup)\r\n in AutoLookup (created by _Content)\r\n in div (created by _Content)\r\n in _Content (created by pure(_Content))\r\n in pure(_Content) (created by ContentList)\r\n in ContentList (created by TabContainer)\r\n in TabContainer (created by Container)\r\n in Container (created by AutoLookup)\r\n in AutoLookup (created by AutoLookup)\r\n in AutoLookup (created by CardBase)\r\n in div (created by SharedStorage)\r\n in SharedStorage (created by CardBase)\r\n in TDValidation (created by CardBase)\r\n in CardBase (created by Wrapper)\r\n in Wrapper (created by Connect(Wrapper))\r\n in Connect(Wrapper) (created by mapProps(Connect(Wrapper)))\r\n in mapProps(Connect(Wrapper)) (created by Connect(mapProps(Connect(Wrapper))))\r\n in Connect(mapProps(Connect(Wrapper))) (created by getContext(Connect(mapProps(Connect(Wrapper)))))\r\n in getContext(Connect(mapProps(Connect(Wrapper)))) (created by Card)\r\n in Card (created by branch(Card))\r\n in branch(Card) (created by Connect(branch(Card)))\r\n in Connect(branch(Card)) (created by getContext(Connect(branch(Card))))\r\n in getContext(Connect(branch(Card))) (created by Connect(getContext(Connect(branch(Card)))))\r\n in Connect(getContext(Connect(branch(Card)))) (created by getContext(Connect(getContext(Connect(branch(Card))))))\r\n in getContext(Connect(getContext(Connect(branch(Card))))) (created by mapProps(getContext(Connect(getContext(Connect(branch(Card)))))))\r\n in mapProps(getContext(Connect(getContext(Connect(branch(Card)))))) (created by Connect(mapProps(getContext(Connect(getContext(Connect(branch(Card))))))))\r\n in Connect(mapProps(getContext(Connect(getContext(Connect(branch(Card))))))) (created by getContext(Connect(mapProps(getContext(Connect(getContext(Connect(branch(Card)))))))))\r\n in getContext(Connect(mapProps(getContext(Connect(getContext(Connect(branch(Card)))))))) (created by _Tab)\r\n in div (created by LoadingWrapper)\r\n in div (created by LoadingWrapper)\r\n in LoadingWrapper (created by Connect(LoadingWrapper))\r\n in Connect(LoadingWrapper) (created by _Tab)\r\n in div (created by _Tab)\r\n in _Tab (created by Connect(_Tab))\r\n in Connect(_Tab) (created by withContext(Connect(_Tab)))\r\n in withContext(Connect(_Tab)) (created by Page)\r\n in Page (created by Connect(Page))\r\n in Connect(Page) (created by onlyUpdateForKeys(Connect(Page)))\r\n in onlyUpdateForKeys(Connect(Page)) (created by ContentRouter)\r\n in ContentRouter (created by _Content)\r\n in _Content (created by Connect(_Content))\r\n in Connect(_Content) (created by _SplitPane)\r\n in div (created by ContentWrapper)\r\n in div (created by ContentWrapper)\r\n in ContentWrapper (created by _SplitPane)\r\n in div (created by _SplitPane)\r\n in _SplitPane (created by Connect(_SplitPane))\r\n in Connect(_SplitPane) (created by _MasterLayout)\r\n in div (created by _MasterLayout)\r\n in div (created by _MasterLayout)\r\n in _MasterLayout (created by Connect(_MasterLayout))\r\n in Connect(_MasterLayout) (created by Root)\r\n in div (created by ThemeChanger)\r\n in ThemeChanger (created by Connect(ThemeChanger))\r\n in Connect(ThemeChanger) (created by Root)\r\n in StartupSync (created by Connect(StartupSync))\r\n in Connect(StartupSync) (created by Root)\r\n in _default (created by Root)\r\n in Provider (created by Root)\r\n in Root\r\n in AppContainer\"}\r\n```\r\nThis data don't contain any helpful error data if user send me ticket to bugtracker. Can info contain props of every component?\r\n"},{"labels":[null,"enhancement"],"text":"**Feature request**\r\nWe need to have a way to build the initial state of ReactComponent in case of usage of classes.\r\n\r\n**What is the current behavior?**\r\nWarning in case this.state modified in willComponentMount.\r\n\r\nAccess to partially constructed object in case of somewhat complex state building logic in the constructor.\r\n\r\nFor example, if we have a hierarchy of classes with the _buildState method called in the constructor to generate an initial state.\r\nDerived class overrides the _buildState method to have a richer state. In result, part of the object related to the derived class won't be constructed yet and can't be accessed in the _buildState.\r\n\r\nThe buildState approach is currently used in ReSub framework:\r\nhttps://github.com/Microsoft/ReSub\r\n\r\n**What is the expected behavior?**\r\nRather no warning in case of this.state modification or new Lifecycle method which is called right after constructor call which returns the state.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nReact 16+ is affected.\r\n"},{"labels":[null,"enhancement"],"text":"Currently ReactInternals.addUserTimingListener enables logging to the User Timing API inside a `setTimeout`. \r\nHowever, for the use case of building a profiling tool where instrumentation is turned off most \r\nof the time to avoid overhead, then randomly turned on for a period to take a sample, it would be ideal to be able to enable this logging synchronously (eg. turn it on at the start of a callstack and turn it off again at the end of the synchronous stack).\r\n\r\nThis is complicated by the fact that the enabled state of the logging should not be toggled inside a React callstack. As the profiler would have control over when the toggling happens, I think it would be fine to throw an error/return false/something like that if the logging was toggled while inside a React stack, allowing the profiler to try again later.\r\n\r\nIn fact, if the toggling was synchronous the profiler cp avoid this error by doing the toggling at the start and end of an event handler/setTimeout/reqAnimFrame etc which would ensure that we are not inside synchronous call into React (though I'm not quite sure what the implications of Fiber are here; would React async rendering mean that we could re-enter from the event loop at a time when this toggling should not happen?). \r\n\r\nAlternatively the toggling could happen 'async but just later in the same React stack' (like setState). In this case the code requesting the toggling would probably need some kind of callback to know that toggling happened so it can keep track of whether React's logging is on or off. However this variant seems like it would be more complicated to implement, and for our use case I don't think it's any more useful than having the toggling just fail in a recoverable way.\r\n\r\ncc @gaearon "},{"labels":["enhancement"],"text":"This is a feature request. It relates to https://discuss.reactjs.org/t/suggestion-for-global-context/9035\r\n\r\nThis has been a pain point for me, and I'm sure we can do better. The issue: How to have some state available to all components without passing everything down on props through the component tree.\r\n\r\nI'm speaking about global state. So why not use context? I have a couple of issue with it.\r\n\r\n1. It's not the root component's job to receive and disseminate state. The root component is just some component. It shouldn't care if it's root or not. Maybe you have (example using Express):\r\n\r\n    `res.render('homepage.jsx', {});`\r\n\r\nBut some other page might just as well have:\r\n\r\n    res.render('otherpage.jsx', {}) where otherpage has:\r\n\r\n    <div>\r\n      <Something />\r\n      <Homepage />\r\n    </div>\r\n\r\nComponents can be composed however you like, they shouldn't care what depth they're at.\r\n\r\n2. Above is talking about a multipage app. The thinking around React seems to be so skewed toward to the special case of Single Page App. SPA is sometimes the right choice. If you're Google Maps it's clearly right. If you're something broader in scope like Amazon.com it's clearly not. The general case is much more interesting to solve.\r\n\r\n3. Having every root component wrapped in some `<Provider>` that publishes context downwards, and every non-root component wrapped in some \"receiver\" higher level component that declares context is just boilerplate. It's not expressive, it's bookkeeping.\r\n\r\n4. Alternatives: There aren't any as far as I know. Each component only knows about the props (and possibly context) passed in, it doesn't have any handle on data for the current render() call. Simply importing global state through CommonJS or ES6 modules is impossible on the serverside for anything request scoped (like query params, route params, cookies, headers, anything generated by middleware based on these things).\r\n\r\n-- PROPOSAL --\r\n\r\nWhy not just handle global state at a higher level than props passed component to component? Why not extend ReactDOM.render to take a 4th argument for global context? It would just make everyone's life easier. Don't even worry about changes firing componentWillReceiveProps, at least as a first version.\r\n\r\nThink of it as analogous to Express and the \"req\" object that's passed around. One should always have access to some \"per request\" object. So many things would be useful to put in there (authenticated user, geolocation, \"store\" from Redux, query and route params, etc, etc).\r\n\r\nIt would look like:\r\n\r\n    ReactDOM.render(rootComponent, someDiv, callback, {... request specific data ...})\r\n\r\nWhere request specific data might have things that are truly request specific and also things that are the same across requests. The latter can be done with imports but it's a bit messy -- you end up with code like:\r\n\r\n    if (typeof window != 'undefined') {\r\n      // Client, get value from window object\r\n    } else {\r\n      // Server, get value from filesystem or wherever\r\n    }\r\n\r\nJust having global data available to all components in the tree simplifies things a lot. Don't you think?\r\n"},{"labels":[null,"enhancement"],"text":"I believe autoFocus should be improved for the better DX. Browser-native autoFocus is nice and all but does not work when a component is updated. Sure, that's fine. But it's pretty common to need focus after a component has been updated. Yep, declaratively. How? Immutable data ftw. At least, it works for me.\r\n\r\nI use this wrapper component https://github.com/este/este/blob/master/components/AutoFocus.js\r\n\r\nCheck componentDidUpdate method. I hope it makes sense. \r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nreact-dom SSR performance could be improved using server-side cache, but currently the\r\nReactPartialRenderer is currently not accessible from the `react-dom` package.\r\n\r\n**Desired behavior**\r\nOn the **server** only, it would be nice if _plugins_ could be used to improve render performance. Currently the only way to do this would be to externally maintain a renderer implementation. However, the `ReactPartialRenderer` already contains all the behavior required to support plugins - with a little refactoring. \r\n\r\nI've refactored the `ReactPartialRenderer` and created a **proof of concept** for supporting _plugins_ for react server side rendering. You can see the [ReactPartialPluginRenderer](https://github.com/adam-26/react/commits/pluginRenderer) in this fork, its comprised of 3 different commits:\r\n* [#1](https://github.com/adam-26/react/commit/0b2f7852a19ffabac6b83581f6821f0346434ef0): Strict refactoring of `ReactPartialRenderer`, the only addition is exporting the `ReactPartialRenderer` from the react-dom server package\r\n* [#2](https://github.com/adam-26/react/commit/d30792a8ba42d50188c0dd1fddbc73275b8ff91f): Create the `ReactPartialPluginRenderer` by extending the refactored `ReactPluginRenderer`, and introduce a plugin interface\r\n* [#3](https://github.com/adam-26/react/commit/d4f01973d535c9eb34ba450190b7c8205fe593df): Proof of concept plugin implementations and application example.\r\n\r\nYou can [view instructions for running the example in the repo](https://github.com/adam-26/react/tree/pluginRenderer/fixtures/ssrPlugins).\r\n\r\nI understand that exporting `ReactPartialRenderer` exposes the internal API, which is far from ideal. Is there any scenario in which `ReactPartialRenderer` would be made to be accessible from the `react-dom` package? Or would a plugin implementation similar to above be required to maintain its own forked `ReactPartialRenderer`? Maintaining the plugin renderer in its own repo isn't a problem, but It would be great if plugins could be used without needing to maintain the core server renderer.\r\n\r\nThanks, Adam.\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"<!--\r\n  Note: if the issue is about documentation or the website, please file it at:\r\n  https://github.com/reactjs/reactjs.org/issues/new\r\n-->\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nI’d like to request a feature.\r\n\r\n**What is the current behavior?**\r\n\r\nTo create a portal, you currently have to use a function:\r\n\r\n```jsx\r\nfunction MyComponent(props) {\r\n  return <Foo>\r\n    ...\r\n    {ReactDOM.createPortal(<Bar>\r\n      ...\r\n    </Bar>, myElement)}\r\n  </Foo>\r\n}\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\n```jsx\r\nfunction MyComponent(props) {\r\n  return <Foo>\r\n    ...\r\n    <ReactDOM.Portal target={myElement}>\r\n      <Bar>...</Bar>\r\n    </ReactDOM.Portal>\r\n  </Foo>\r\n}\r\n```\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nReport a bug\r\n\r\n**What is the current behavior?**\r\n\r\nThis test\r\n\r\n```javascript\r\nimport React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport renderer from 'react-test-renderer';\r\n\r\nconst Drop = () => (\r\n  createPortal(\r\n    <div>hello</div>,\r\n    this.dropContainer\r\n  )\r\n);\r\n\r\ntest('Drop renders', () => {\r\n  const component = renderer.create(\r\n    <div>\r\n      <input />\r\n      <Drop />\r\n    </div>\r\n  );\r\n  const tree = component.toJSON();\r\n  expect(tree).toMatchSnapshot();\r\n});\r\n```\r\n\r\nfails with\r\n\r\n> Invariant Violation: Drop(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.\r\n\r\nThis test passes if I wrap createPortal in a container.\r\n\r\n```javascript\r\n<div>\r\n  {createPortal(\r\n    <div>hello</div>,\r\n    this.dropContainer\r\n  )}\r\n</div>\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nThe code without the parent container works fine in the browser. So it seems that I'm adding the  parent `div` just for the test to pass. I believe `react-test-renderer` should support empty returns?\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nLastest\r\n"},{"labels":[null,null,"enhancement"],"text":"In order to call this method, you'd have to access it via `event.nativeEvent.stopImmediatePropagation()`: https://developer.mozilla.org/en-US/docs/Web/API/Event/stopImmediatePropagation\r\n\r\nIt'd be awesome if this was supported on `event` itself. I did see a [prior issue](https://github.com/facebook/react/issues/1734) for this, but it was for a use case that sIP wasn't required for.\r\n\r\nFor a specific use case: if you want to kill hover events for touch input, `onTouchStart` will trigger `onMouseOver` and `stopImmediatePropagation` cancels that internal cascade."},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature, but also a bug cause new API breaks old `unstable_rendersubtreeintocontainer`\r\n\r\n**What is the current behavior?**\r\nWe cannot stop all events propagation from portal to its React tree ancestors. Our layers mechanism with modals/popovers completely broken. For example, we have a dropdown button. When we click on it, click opens popover. We also want to close this popover when clicking on same button. With createPortal, click inside popover fires click on button, and it's closing. We can use stopPropagation in this simple case. But we have tons of such cases, and we need use stopPropagation for all of them. Also, we cannot stop all events.\r\n\r\n**What is the expected behavior?**\r\ncreatePortal should have an option to stop synthetic events propagation through React tree without manually stopping every event. What do you think?\r\n"},{"labels":[null,"enhancement"],"text":"The `valueAsDate` property on the ES6 definition of `HTMLInputElement` is not yet recognized by React. It should be, though.\r\n\r\nThe `valueAsDate` property relieves the pain of having to deal with both browsers that support HTML5 date inputs and those who don't; the former require the `value` property to be of the form `\"YYYY-MM-DD\"` and the latter require a nicely formatted date (e.g. `\"MM/DD/YYYY\"`) since the user will see exactly that. (React won't even allow that in conjunction with `type=\"date\"`, though, and proclaim that the machine readable format should be used.) \r\nThe browsers that do support HTML5 date input (should) alternatively support the date being passed in through the `valueAsDate` property. If we use that, we can always put a nicely formatted date in the `value` property. Pain relieved! (And also React should allow any format in the `value` property in that case.)\r\n\r\nAs indicated above, browser support is still lacky at best, even with the most avant garde browsers. Hence this is not an urgent issue for React. It will get relevant, though, and is herein duly noted."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**  \r\n\r\nbug or v16 feature (dont know)\r\n\r\n**What is the current behavior?**  \r\n\r\nWhen building in dev environment, performance timeline measures appear by default,  \r\nie. without `?react_perf` query string as in v15 described [here](https://reactjs.org/docs/optimizing-performance.html#profiling-components-with-the-chrome-performance-tab)\r\n\r\n`react@16.0.0`\r\n\r\nif it's not a bug, then what's the way to disable `react` perf measures?  \r\n\r\nNeed a way to clear timeline to focus on my own custom perf measures.\r\n"},{"labels":[null,"enhancement"],"text":"Hi,\r\nI'm trying to use the \\<animateTransform\\> Element in a React project. But I'm not able to use the \"onend\" attribute:\r\n\r\n> Warning: Unknown event handler property `onend`. It will be ignored.\r\n\r\nIs there a workaround for this ?"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nA feature\r\n\r\n**What is the current behavior?**\r\nN/A\r\n\r\n**What is the expected behavior?**\r\nIt's great that React 16 integrates with the timeline in browsers dev tools and that is very helpful in cases where you are trying to fix the performance of a specific thing. However I do miss the perf tool from previous versions and could not find any issue tracking a re-implementation of such a tool.\r\n\r\nWhat was great in the perf tool that is not covered as well with timeline integration?\r\n - Easily see which components render needlessly and therefore should be easily eliminated with sCU (and what impact it will give)\r\n - Easily see the collective render time of a component. I might for example have a component that renders very fast but which have very many instances and thus contribute to a significant render time anyway.\r\n - Give an overview of which components are slow by themselves and which are fast by themselves but render slow components. The flamegraph shows this, but I find it to specific in some scenarios with too much detail that can distract.\r\n\r\nBasically the wasted, exclusive and inclusive tables. The DOM table I feel is much better represented by the timeline integration.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n16, yes the perf addon in 15 was good."},{"labels":["enhancement"],"text":"Just before I have my view, please take a look at these 2 examples\r\n\r\nHello World React => [App.jsx](https://git.io/vdNQb)\r\nHello World Vue => [App.vue](https://git.io/vdNQN)\r\n\r\nIdentical? Isn't it?\r\nYes these are two different **paradigm** but hey they are expressing same things and both are doing it in the same way by taking benefits of the Virtual DOM \r\n\r\nMy Feature Request is that,\r\nJust like Vue supports [JSX](https://vuejs.org/v2/guide/render-function.html) for Programmatic situations.\r\nI think React should also support HTML5 Templates for Non Programmatic situations?? \r\n\r\nAlso, **Imagine trying to create a website based on an existing theme that you purchased. Changing it over to JSX literally will feel like sticking a knife through your eyeballs. With Templates, existing HTML just works.**\r\n\r\nPlease also note that Programmatic situations have a low use case\r\nand Non Programmatic situations have a high use case."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nImprovement\r\n\r\n**What is the current behavior?**\r\n\r\n[`SyntheticKeyboardEvent`](https://github.com/facebook/react/blob/e779c39dfeb41ae8f6611dc4f9830d1b1ac64f9b/packages/react-dom/src/events/SyntheticKeyboardEvent.js) does not currently support the `code` property.\r\n\r\n`code` ([MDN](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code)) is nice to have when you want to write key-specific handling—rather than input-specific (dependent on layout and modifier keys) handling.\r\n\r\n**What is the expected behavior?**\r\n\r\n`SyntheticKeyboardEvent` already exposes a `keyCode` property. It should have a `code` property as well.\r\n\r\nCurrently, if you want to use the `keyboardEvent`'s  `code`, you must access it through `SyntheticKeyboardEvent`'s `nativeEvent`.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nAffects React 16 and earlier (I assume).\r\n"},{"labels":["enhancement"],"text":"Currently there is no way to use event handlers in functional components without performance degradation e.g - unnecessary function recreations through .bind or arrow functions \r\n```\r\nfunction Node({node}){\r\n  return (\r\n    <div>\r\n      <button onClick={()=>node.parent.removeChild(node)}>remove</button>\r\n      <div>{node.text}</div>\r\n   </div>\r\n  )\r\n}\r\n```\r\nIn this case on each render a new handler will be created, and also react will need to perform some bookkeeping - remove previous handler from dom element and add new handler (ok, with event delegation system react will not touch dom elements and only replace handler somewhere in internal structure but what about events which don't bubble?) and all this take some noticeable time in my application. \r\nSure I can change to class components and solve problem by bind handlers only once when component will be created but what if I want to use functional components? \r\nSo in my application I came up with new and fastest method of binding handlers. Actually it does not preform binding at all). What is the reason of binding function in event handler? - we need to access current component props or current component state. Is there another way to get props or state of component? React does not describe this in docs but yes - we can access to props or state of current component without any unnecessary functions recreations on each render.\r\n```\r\nfunction Node({node}){\r\n  return (\r\n    <div>\r\n      <button onClick={onClick}>remove</button>\r\n      <div>{node.text}</div>\r\n   </div>\r\n  )\r\n}\r\n\r\nfunction onClick(e){\r\n  const {node} = getProps(e);\r\n  node.parent.removeChild(node)\r\n}\r\n\r\nfunction getProps(e){\r\n  return e.target[Object.keys(e.target).filter(k => k.indexOf('__reactInternalInstance') !== -1)[0]]._debugOwner.memoizedProps;\r\n} \r\n```\r\nand this demo https://codesandbox.io/s/4r59w89lox\r\n\r\nTo perform event delegations in an efficient way react need to assign current vdom-element to each rendered dom element. And vdom-element has link to actual owner component where we can get our props and state. So why react concealed this from developers and made them suffer not only from performance degradation but also from choosing problem (how many articles and advices recommend or investigate this rule to not bind handlers in render function, and how many solutions exist - use bind in constructor ? - use class field properties with arrow functions ? - use autobind decorators?) ??? And my solution not need even to recreate handlers on each component instantiation like all current solutions does, so it definitely the fastest way. I highly suggest make this api public or make some helper to get current props and state from event.target"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature\r\n\r\n**What is the current behavior?**\r\nAn (almost) immediate re-render is due after `componentWillReceiveProps` is called, unless `shouldComponentUpdate` says otherwise.\r\n\r\n**What is the expected behavior?**\r\nIf new props in `componentWillReceiveProps` cause an async call that's soon going to update the state anyway, won't it be cool if React might as well wait for that async call to do it's thing (which calls `setState`) and do one render instead of two?\r\n\r\nPotential solution: React can see if `componentWillReceiveProps` returns a `Promise`. If it does it defers the re-render until it `resolves`.\r\n\r\n```javascript\r\nasync componentWillReceiveProps(nextProps) {\r\n    const { postId } = nextProps;\r\n    const postTitle = await fetch(`https://api.example.com/posts/${postId}`);\r\n    this.setState({ postTitle });\r\n    return;\r\n}\r\n```\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nImprovement.\r\n\r\n**What is the current behavior?**\r\n\r\nRight now, the synthetic `onBeforeInput` event is being created based on two other events:\r\n\r\n- `textInput` when possible—which is in Webkit.\r\n- `keypress` as a fallback.\r\n\r\nBut these days in Chrome, Safari and Opera the spec'd `beforeinput` event is available and actually fires. And when it does, it includes other [spec'd properties](https://developer.mozilla.org/en-US/docs/Web/API/InputEvent) which can be extremely helpful:\r\n\r\n- `inputType` tells you whether the event is inserting text, replacing text, inserting a line break, etc.\r\n- `getTargetRanges()` tells you where the input is taking place in the DOM.\r\n\r\nRight now this information isn't exposed, because even if the browser supports `beforeinput`, it's not being checked for.\r\n\r\n**What is the expected behavior?**\r\n\r\nInstead React should treat `textInput` as a slightly-preferred fallback for native `beforeinput` support, but add `beforeinput` as the true goal. So we'd end up with a fallback stack of:\r\n\r\n- `beforeinput`\r\n- `textInput`\r\n- `keypress`\r\n\r\nWhich guarantees that the `nativeEvent` will always be the most spec'd and have the most relevant information associated with it.\r\n\r\n---\r\n\r\nThe `beforeinput` event's extra properties are critical in `contenteditable` situations, when you want to prevent the default browser behavior from firing but perform the logic on an internal model instead. (I'm looking to do this for [Slate](https://github.com/ianstormtaylor/slate).) \r\n\r\nWithout that extra information you have to fallback to hackier behavior—allowing the event to occur, trying to parse the DOM for what the change was, then re-rendering to remove it, etc. I want to avoid this on the more modern browsers, because it results in reduced performance.\r\n\r\n---\r\n\r\nThere is another situation that this fixes, which is that spellcheck right now doesn't trigger React's `onBeforeInput` handler, even though modern browsers fire the `beforeinput` event, because it's not being listened for right now.\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nIn React 16, the `data-react-checksum` attribute was removed from the server rendered markup. In previous versions, we used this attribute to beacon checksum mismatches to our log servers to be notified of production issues. With the attribute removed, we have no mechanism to determine if a checksum mismatch occurred.\r\n\r\nI'm aware that checksum issues no longer cause the entire DOM to re-render, however, it is still important that we know when they do occur. A typical use case is when we display ads or autoplay video. We want to know if an ad gets re-rendered (double counted) or an autoplay video is interrupted due to React re-rendering the DOM.\r\n\r\nOther related bugs/requests:\r\n- Ability to debug checksums in production - https://github.com/facebook/react/issues/10016\r\n\r\n**What is the expected behavior?**\r\nThe solution does not necessarily need to re-introduce the checksum attribute again. It could be some other event, hook, or callback that applications can leverage to handle checksum issues.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n- React 16\r\n- All browsers\r\n- Worked in  <= React 15\r\n"},{"labels":[null,"enhancement"],"text":"** This is both bug / feature\r\nhttps://www.x3dom.org/\r\n\r\nI used to be able to use x3dom with React. It was great.\r\n\r\n** React ^15 I was able to use the **is** property to generate custom elements and custom attributes that could be picked up by x3dom i.e. <shape is render=\"true\"/>\r\n\r\nNow with React16 i get many warning messages for all of the custom x3dom tag elements. Likewise it seems that certain attributes aren't getting rendered either. For instance if I do x3dom elements like so:\r\n\r\n`<fontstyle size=\"0.6\"/>` I'll get `<fontstyle/>` output without the size attribute.\r\n\r\nI don't think React should have to know what x3dom tags are, nor should they be hard-coded into React. There has got to be a way to have React output custom tags without throwing warning messsages. Why not just re-introduce the **is** attribute to indicate that it's a custom tag with custom attributes? "},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nfeature\r\n\r\n**What is the current behavior?**\r\n\r\ncurrently you cannot set the srcObject for a video.  You get an error:\r\n```\r\nWarning: React does not recognize the `srcObject` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `srcobject` instead. If you accidentally passed it from a parent component, remove it from the DOM element.\r\n```\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template for React 16: https://jsfiddle.net/Luktwrdm/, template for React 15: https://jsfiddle.net/hmbg7e9w/).**\r\n\r\n```\r\nreturn (\r\n      <video srcObject={this.props.stream}>\r\n)\r\n```\r\n\r\nThere is another issue that was closed but the issue was never resolved: https://github.com/facebook/react/pull/1474\r\n\r\nFirefox has deprecated using `URL.createObjectURL()` and Safari doesn't support it.\r\n\r\n**What is the expected behavior?**\r\n\r\nThe ability to set the `srcObject` on a video element.  This is common for WebRTC applications now.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n\"react\": \"^16.0.0\""},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\nWhen adding event handlers, it is common practice to do something like:\r\n\r\n```js\r\nconst MyButton = ({ canClick, onClick }) =>\r\n  <div onClick={canClick && onClick}></div>\r\n```\r\n\r\nThis was fine in React 15.x, but in 16 it reports a warning, which is technically correct:\r\n\r\n> Expected `onClick` listener to be a function, instead got a value of `boolean` type.\r\n\r\nHowever, this now forces you to use the more verbose variant:\r\n\r\n```js\r\nconst MyButton = ({ canClick, onClick }) =>\r\n  <div onClick={(canClick && onClick) ? onClick : undefined}></div>\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nI think it makes sense to allow `null`, `false`, and `undefined` in addition to function types for event handlers. Or just anything \"falsy\", although that may be too much to ask.\r\n\r\nI definitely understand the rationale from a type safety perspective, but this does make it less pragmatic. I am personally a huge fan of how JS evaluates `null`, `0`, `\"\"` and `undefined` to `false`, and it reduces the amount of boilerplate needed to conditionally wire up handlers.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 16, all browsers. This did not emit a warning in React 15 and below.\r\n"},{"labels":[null,null,"enhancement"],"text":"react and react-dom versions: 16.0.0\r\n\r\n```js\r\nconst { createElement: h } = require('react');\r\nconst { renderToStaticMarkup } = require('react-dom-server');\r\n\r\nrenderToStaticMarkup(h('div', null, h('svg', null, h('span')))) \r\n// '<div><svg><span></span></svg></div>'\r\n```\r\n\r\nBut they shouldn't be mixed:\r\n\r\nin browser console:\r\n\r\n```js\r\nnew Range().createContextualFragment('<div><svg><span></span></svg></div>')\r\n// \"<div><svg></svg><span></span></div>\"\r\n```\r\nI guess it's programmer responsibility to avoid that case? I understand that for performance you don't check this"},{"labels":["enhancement"],"text":"When upgrading to 16.0.0 from 15.6.1, react-test-renderer started failing on my tests with the message:\r\n> test renderer is not available in production mode.\r\n\r\nI have in fact been running unit tests using this renderer during my production build.\r\n\r\nI'm trying to understand: why was this restriction introduced?  I saw the change was made in #9514 but couldn't find any explanation on the pull request or the documentation as to why production mode is now disallowed for this renderer.\r\n\r\nThanks,\r\nAlex"},{"labels":[null,"enhancement"],"text":"Currently, its not easy to write global logic that executes after React has re-rendered. The `componentDidUpdate` lifecycle method works great when your logic is isolated to a component, but I've found myself more and more recently wanting a global `didUpdate` hook baked into React.\r\n\r\nA simple example where this is useful is if you want an isolated function (perhaps a keyboard shortcut) that creates an element on the screen and then focuses it.\r\n\r\n```js\r\nconst createNewTodo = async () => {\r\n  const id = createTodo()\r\n  await React.didUpdate()\r\n  focusTodoItem(id)\r\n}\r\n```\r\n\r\nAt [Notion](www.notion.so), we've written custom logic for doing this, but it makes upgrading with React more difficult and unstable. I think this would be useful for others too, particularly those who use Redux and are building complicated UI interactions. "},{"labels":[null,"enhancement"],"text":"We have updated our React v15 Application to v16. Everything seems to work fine instead the fact that this error appears:\r\n\r\n`Warning: Did not expect server HTML to contain the text node \"\r\n  \" in <div>.`\r\n\r\nWe are using ReactDOM.hydrate and our App was completely SSR Ready in v15. I've found an old issue on Stackoverflow where someone wrote that this could be a problem with the markup which is send from Server -> Client, but as far as we can see the HTML code is the same without any markup problem."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nBug\r\n\r\n**What is the current behavior?**\r\n\r\nReactDOMServer generates camelCased markup for the `cellSpacing` and `cellPadding` attributes:\r\n\r\n`<table cellSpacing=\"1\" cellPadding=\"2\"></table>`\r\n\r\n(Here's an example pen: https://codepen.io/anon/pen/jGBLdP)\r\n\r\nI believe these attributes are canonically lowercased. If I lowercase the attributes in JSX, React warns that I'm not using the right names:\r\n\r\n```Warning: Invalid DOM property `cellpadding`. Did you mean `cellPadding`?```\r\n\r\n**What is the expected behavior?**\r\n\r\nThe attribute names would be rendered lowercase:\r\n\r\n`<table cellspacing=\"1\" cellpadding=\"2\"></table>`\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nThis is in 16.0.0. Prior versions of React stripped these attributes."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature, that exists in previous releases of react\r\n\r\n**What is the current behavior?**\r\nfeature is not implemented\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?** React 16, worked in previous versions\r\n\r\nHey,\r\nWe would really like to be able to use ReactInstrumentation with Fiber. I have found @gaearon 's pull request, but work on it was stopped. Would like to know why? and if we can pick this up and implement it.\r\n\r\nhttps://github.com/facebook/react/pull/8152\r\n(I have also asked why in the pull request, but figured it might get ignored since it is a closed pull request)\r\n\r\nOmer\r\n"},{"labels":[null,null,"enhancement"],"text":"This is a proposal for the `createPortal` API to in addition to Nodes support strings for the second argument(container), which could pave a declarative way to achieve out of order server side rendering.\r\n\r\n```js\r\n#createPortal(..., container: Node|String, ...)\r\n```\r\n\r\nThe server could render a portals children in-place and have the client-side hydration process move it to the right location client-side using `document.querySelector` if the container is a string."},{"labels":[null,null,"enhancement"],"text":"IMO, \r\n```\r\n<select value=\"foo\" onChange={...}>\r\n  <option value=\"yes\">Yes</option>\r\n  <option value=\"no\">No</option>\r\n</select>\r\n```\r\nshould warn because there is no \"foo\" option. It should probably also warn if `value` is not specified, because there is no \"empty\" option either.\r\nOne could also argue that the change handler should be called with {value: 'yes'} when the component renders and the first option is selected instead of an invalid/non-existing one."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\n Bug\r\n\r\n**What is the current behavior?**\r\n\r\nLet's say you start filling a form input type text or a select element with `foo`. Then you click on a link and press the back button. The browser back-forward cache will kick in and change the initial value of the form elements. We will get our `foo` value back.\r\nHowever, React doesn't account for it when the component is controlled.\r\n\r\nI have tried reproducing the behavior with jsfiddle with [react@latest](https://jsfiddle.net/d4fovwxx/) and [react@next](https://jsfiddle.net/vm5vouqo/) with no luck as the BFcache doesn't kick in without SSR.\r\n\r\n**What is the expected behavior?**\r\n\r\nI expect React triggering a `onChange` event to replicate the actual form value.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\n- React `@latest`.\r\n- Chrome `@latest`\r\n\r\nWe have been [using the following hack](https://github.com/callemall/material-ui/blob/v1-beta/src/Input/Input.js#L349-#L356) on Material-UI:\r\n```js\r\n  componentDidMount() {\r\n    // Fix SSR issue with the go back feature of the browsers.\r\n    // Let's say you start filling the input with \"foo\", you change the page then after comes back.\r\n    // The browser will reset the input value to \"foo\", but we also need to tell React about it.\r\n    this.handleChange({\r\n      target: this.input,\r\n    });\r\n  }\r\n```\r\n\r\nBut it comes with issues: https://github.com/callemall/material-ui/pull/8110.\r\nSo instead, we tried simulating a change event [as suggested in StackOverflow](https://stackoverflow.com/questions/23892547/what-is-the-best-way-to-trigger-onchange-event-in-react-js) but it doesn't work anymore\r\n```js\r\nvar event = new Event('input', { bubbles: true });\r\nelement.dispatchEvent(event);\r\n```\r\n\r\nSo for now, we are going to disable the BFcache with `<form autoComplete=\"off\">`."},{"labels":[null,null,"enhancement"],"text":"When you pass a boolean to some attributes (e.g. `autoSave`, `autoCorrect`) in 15, they don't work correctly because they actually want a specific string (`yes` and `no`). I think there were also some attributes that want `on` and `off`.\r\n\r\nLet's just “make them work\"? Could use a special flag/whitelist for that. There should be very few of these.\r\n\r\nSimilarly we should probably make `<script crossOrigin />` be valid and turn into `<script crossOrigin=\"anonymous\" />`. Currently I don’t think this works on master."},{"labels":[null,null,"enhancement"],"text":"[Reason React](https://github.com/reasonml/reason-react) uses first class OCaml refs to store mutable values (instead of on `this` instances).\r\n\r\nThese are basically just an object with a mutable `contents` property. These can be updated with callback refs `n => ref.contents = n` but it would be a nice convenience feature to just have that built-in.\r\n\r\nWe could also make these first class objects on isomorphic React.\r\n\r\n```js\r\nReact.createRef = () => ({ contents: null });\r\n```\r\n\r\n```js\r\nclass Foo extends React.Component {\r\n  state = {\r\n    myDiv: React.createRef()\r\n  };\r\n  componentDidMount() {\r\n    if (myDiv.contents) {\r\n      myDiv.contents.focus();\r\n    }\r\n  }\r\n  render() {\r\n    return <div ref={this.state.myDiv} />;\r\n  }\r\n}\r\n```\r\n\r\nBasically the implementation would just be:\r\n\r\n```js\r\nif (typeof ref === 'function') {\r\n  ref(newValue);\r\n} else if (typeof ref === 'object') {\r\n  ref.contents = newValue;\r\n} else if (typeof ref === 'string') {\r\n  owner.refs[ref] = newValue;\r\n}\r\n```\r\n\r\nThis is something that needs to be implemented in the core runtime and not as part of any particular component API since refs cross that boundary.\r\n\r\ncc @adamjernst\r\n"},{"labels":[null,"enhancement"],"text":"[Reason React](https://github.com/reasonml/reason-react) has silent updates. Meaning it's a normal update in the state queue that can be reverted. The only difference is, it doesn't need a rerender by itself. If props have changed, it does rerender.\r\n\r\nUnclear if we expose this to the existing ClassComponent API or make it a feature of new APIs."},{"labels":[null,null,"enhancement"],"text":"As @gaearon [mentioned](https://twitter.com/dan_abramov/status/893511715463340033), React does not guarantee an *attribute* will be set, so probably this is not a bug.\r\n\r\nIf I understand well, react will ensure the property is set anyway. \r\n\r\n**Current behaviour**\r\nReact renders the html `<video />` element without the attribute `muted` when explicitly passed.\r\n\r\n**Demo time**\r\nIn [this pen](https://codepen.io/elrumordelaluz/pen/ba4b5294cec7ea455c66e9b9d0a6c889?editors=0010) I made a simple example setting `muted` to the element and obtaining the result below:\r\n![pen-screen-shot](https://user-images.githubusercontent.com/784056/28986491-7b2dd45e-7967-11e7-9f63-b4db88db9989.png)\r\n\r\nActually the property is set well, since the [original medial file](http://clips.vorwaerts-gmbh.de/VfE_html5.mp4) has an audio track and in the pen result is muted.\r\n\r\n**The point**\r\nI think is most a _specific need_ than the _expected behaviour_.\r\nFrom the functionality POV, it is absolutely ok, my _Component_ renders a `<video />` muted as requested and so on.\r\n\r\nBut there are _browsers_ and _policies_, more specifically related to this issue, Webkit and the [New <video> Policies for iOS](https://webkit.org/blog/6784/new-video-policies-for-ios/) updated one year ago, with some interesting changes for the `<video />` element.\r\nThe part interested is\r\n> `<video muted>` elements will also be allowed to autoplay without a user gesture.\r\n\r\nSo, the _specific need_ is to have the _explicit_ `attribute` to tell the browser that this video could be `autoPlay`ed.\r\n\r\nThere's a similar [issue](https://github.com/facebook/react/issues/6544)"},{"labels":[null,"enhancement"],"text":"_(This isn't needed for 16.0.)_\r\n\r\nI think we're missing a top-level API. If you want to integrate with non-React code around you in an async way, then you probably have some parents around you. It's not always the case that you want to show those parents before React is done. Maybe you can hide them and then show them at the callback time.\r\n\r\nHowever, it would be better if you could start building the tree async with React, and then get a callback *before* we trigger life-cycles so that you can insert the tree into the actual DOM and do whatever manipulation you need. Only after that do we trigger the life-cycles. That way they will have the CSS and layout information available to them by virtue of being in the document already.\r\n\r\nI see two possible routes:\r\n\r\na) We just call out for this hook and then commit immediately after.\r\n\r\nb) We invoke a callback and pass another function. That function, when invoked, does the actual commit. This approach has precedence in the DOM with \"append async\" and offscreen canvas.\r\n\r\nThe second option is probably preferable but we should only do that if we can do it efficiently and cleanly."},{"labels":[null,null,"enhancement"],"text":"So for the last little while I've been pursuing an idea called [React Snapshot](https://github.com/geelen/react-snapshot), where instead of running your code in a Node environment to generate static HTML, you run it in a virtual browser (jsdom or chrome headless) and take a snapshot of the DOM at a particularly moment in time, then host the snapshots like any other static file (technique also known as pre-rendering).\r\n\r\nI've been tossing around different API choices (https://github.com/geelen/react-snapshot/pull/30) in order to handle components that have async data fetching requirements, but I'm already starting to see real promise in this approach. Because the snapshot environment is so similar to the client one, far fewer changes are needed to get the performance & accessibility benefits of serving real HTML to your users. This is an example of the React Snapshot async API to make a component snapshottable:\r\n\r\n```diff\r\n+ import { snapshot } from 'react-snapshot'\r\n\r\nclass Home extends React.Component {\r\n  state = { quotes: null }\r\n\r\n  componentWillMount() {\r\n+   snapshot(() => (\r\n      fetch('/api/quotes')\r\n        .then(response => response.json())\r\n+   ))\r\n    .then(quotes => {\r\n      this.setState({ quotes })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { quotes } = this.state\r\n    return (\r\n      <div className=\"Quotes\">\r\n        {\r\n          quotes && quotes.map((quote, i) => <Quote key={i} quote={quote}/>)\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n```\r\n\r\nThe idea is that any async parts of your app can be wrapped in a `snapshot` call, which caches responses and rehydrates on the client. However, I've hit a few walls that I think means I'd need changes to React itself to take this to its logical conclusion. Hence, I wanted to start the discussion about whether such changes would be compatible with React's future direction.\r\n\r\n### Rehydration\r\n\r\nAs far as I can tell from my experimentation and from reading the code, the two criteria for reusing the existing DOM elements in a pre-rendered HTML page is:\r\n\r\n* the adler32 hash of the initial client-rendered markup has to match the `data-react-checksum` present on the `rootElement`.\r\n* the `_domID` of each instance in the render tree needs to match the `data-react-id` on each DOM element\r\n\r\nBetween those two criteria, its enforced that the _structure_ and the _content_ of the DOM is the same. I can kinda see why both are needed—the checksum is the cheapest way to confirm the structure will be the same, but the ID of each element is needed to actually wire everything up. Also, `data-react-checksum` is just an attribute, and could be calculated off something that's no longer present in the HTML.\r\n\r\nHowever, generating the exact right checksum in any other way than the existing SSR API turns out to be pretty difficult!\r\n\r\n### HTML-escaping woes\r\n\r\nI hit this problem where I was rendering the React app like normal, then taking the `innerHTML` of the root container, then passing it to [`addChecksumToMarkup`](https://github.com/facebook/react/blob/master/src/renderers/dom/stack/server/ReactMarkupChecksum.js#L26), and not getting the same checksum as `ReactDOMServer.renderToString`. I first realised I needed to add the `data-reactid` to each element along the way, which wasn't too hard, but still it wasn't working. I figured out it's due to [`escapeTextContentForBrowser`](https://github.com/facebook/react/blob/master/src/renderers/dom/shared/escapeTextContentForBrowser.js) converting things like `'` to `&#x27;` and `\"` to `&quot;`, meaning that while the content _appears_ the same once rendered, the precise string is not, therefore the checksum is not, and no rehydration takes place.\r\n\r\nFrom what I can understand, again by reading the code, React _always_ sanitises the HTML content before generating markup (on server or in client), it's just the fact that once its injected into the DOM, `innerHTML` doesn't re-sanitise things like quotes. They don't technically need to be, as discussed in issue https://github.com/facebook/react/issues/3879, and so if that were to be changed this particular problem would disappear, but there may well be more I just haven't hit yet. To me, the real issue is needing to have the content be byte-for-byte equivalent, rather than just functionally (and structurally) equivalent.\r\n\r\n### My interim solution\r\n\r\nAt the moment, I've realised its easier to boot up the app in its entirety, wait for all async processes to take place, then effectively reboot the app using `ReactDOMServer.renderToString` and splice the markup in place. Any side-effects relying on `componentDidMount` (like CSS injection or meta tags in the HEAD) that affect the DOM _outside_ the React app are preserved, but the markup and checksum of the React-rendered HTML are guaranteed to be correct. It works, but its not ideal. You still have to understand that your components are running in two different \"modes\", they'll run different lifecycle methods in each, and only one generates the final snapshot. Which I think adds an unreasonable conceptual burden, much the same way server-rendering does.\r\n\r\nThat's really the problem I see with the status quo and why I started looking into this problem in the first place. If snapshot/server rendering requires too much overhead, most people won't do it, which is exactly where we're at. Create-react-app doesn't include any because none of the options are simple enough with a broad enough applicability. The official [React Router docs](https://reacttraining.com/react-router/web/guides/code-splitting/code-splitting-server-rendering) warn agains combining server-rendering and code-splitting. Server-rendering boilerplates include fairly specific webpack hacks to provide the same environment on server and client, etc.\r\n\r\nThe result is that most people only ever do client-rendering. They serve a blank page & render everything client-side. Code splitting and service worker caching offer useful advantages but imo it's not enough. Snapshot rendering _could_ be the solution, but only if it can offer big benefits for small changes to application code.\r\n\r\n### My Dream Solution\r\n\r\nArchitecturally, what I'd like is for an arbitrary React app to be launched on one browser, executed until ready (async resources complete), snapshotted (serialised to HTML), then resumed on another browser. Those snapshots would be generated then cached at the edge of a CDN during deployment, or periodically depending on how often the content changes.\r\n\r\nPractically, I think that would require two changes to React's architecture:\r\n\r\nThe first is for a weaker check for rehydration—some other fingerprint than a hash of the escaped HTML. Some other method for a snapshot to indicate to React to reuse as much of the existing DOM as possible.\r\n\r\nThe second would be for only parts of the tree to be rehydrated rather than the whole thing. If a component has some side-effect, say in a `componentDidMount`, then the snapshotted HTML would include the result of that side-effect. But when the app boots on the client side, the render method will generate the initial behaviour. At the moment React would replace what's there with what's just been rendered, but it might be preferable to leave the DOM unchanged on the first render, then wire things up later.\r\n\r\nI don't know the exact specifics of a solution, nor do I know enough of the internals of React as it is now or as it will become, but I wanted to start the discussion and see if there was any interest from the React team & wider community in this use case and direction. I look forward to hearing your thoughts!"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n*feature*\r\n\r\n**What is the current behavior?**\r\nReact is published to NPM only as ES5 code\r\n\r\n**What is the expected behavior?**\r\nPublish react also in es2015, with es2015 entry point in the package.json\r\n\r\nMotivation: Performance. leverage the targeted client native ES features \r\nIts part of the angular 4 package format\r\nhttps://docs.google.com/document/d/1CZC2rcpxffTDfRDs6p1cfbmKNLA6x5O-NtkJglDaBVs/edit#heading=h.jt2mvxhyrshv\r\nhttp://2ality.com/2017/04/setting-up-multi-platform-packages.html"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\n\r\nFeature\r\n\r\n**What is the current behavior?**\r\n\r\n```js\r\nimport * as React from \"react\"\r\n```\r\n\r\nThe above code causes deprecation warnings because of how `_interopRequireWildcard` works in babel:\r\n\r\n```\r\nWarning: Accessing PropTypes via the main React package is deprecated, and will be removed in  React v16.0. Use the latest available v15.* prop-types package from npm instead. For info on usage, compatibility, migration and more, see https://fb.me/prop-types-docs\r\nWarning: Accessing createClass via the main React package is deprecated, and will be removed in React v16.0. Use a plain JavaScript class instead. If you're not yet ready to migrate, create-react-class v15.* is available on npm as a temporary, drop-in replacement. For more info see https://fb.me/react-create-class\r\n```\r\n\r\nYou can use this with babel:\r\n\r\n```js\r\nimport React from \"react\"\r\n```\r\n\r\nThis works because of synthetic import support in babel, using `__esModule`.\r\n\r\nIf you use TypeScript the above does not work unless you set `allowSyntheticDefaultImports` to true in tsconfig.json.\r\n\r\nMost packages work fine with `* as Module`, but React's deprecated warnings get tripped because babel copies the object with `_interopRequireWildcard`.\r\n\r\n**What is the expected behavior?**\r\n\r\n```js\r\nimport React from \"react\"\r\n```\r\n\r\nThe above should work without needing to set `allowSyntheticDefaultImports`. This can be done by providing a `default` property.\r\n\r\nPossibly by adding this to `src/isomorphic/ReactEntry.js`:\r\n\r\n```js\r\nReact.default = React\r\n```\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n\r\nReact 15.6.1\r\nChrome 59\r\nOS X 10.12.5\r\nNode 8.1.2\r\n\r\nDoes not work in previous versions since deprecation warning was added."},{"labels":[null,null,null,"enhancement",null],"text":"The new validation in #10026 only issues a warn for the first difference found in a HTML hydration scenario. Ideally it should instead queue up all the differences and then at the end (commit) issue a single warning with a nicely formatted diff.\r\n\r\n1) Instead of warning add [these warn calls](https://github.com/facebook/react/blob/8d61138186e79e1e719786c8c76186e64b603bd5/src/renderers/dom/fiber/ReactDOMFiberComponent.js#L74-L115) to a global buffer (array, map, set, whatever).\r\n\r\n2) Inside [prepareForCommit](https://github.com/facebook/react/blob/8d61138186e79e1e719786c8c76186e64b603bd5/src/renderers/dom/fiber/ReactDOMFiberEntry.js#L190), issue all the currently batched up warnings as a single message. \r\n\r\n3) Format that message in terms of a JSX diff in a nicely formatted way. With only the relevant nodes (parent and child with changes). Irrelevant child content can be replaced with ellipsis. E.g.\r\n\r\n```\r\n...\r\n<div className=\"unchanged\">\r\n- <div className=\"foo\" />\r\n+ <div className=\"bar\">…</div>\r\n+ <span />\r\n</div>\r\n...\r\n<div className=\"another_unchanged\">\r\n- <span />\r\n</div>\r\n...\r\n```\r\n\r\nThis strategy won't yield perfect results because if we're asynchronously hydrating, and it gets interrupted by another tree, we'll flush a warning before the actual hydrating particular tree is flushed. So we might show a partial diff in that case. This is probably. It's just a warning."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nI want to request a *feature*.\r\n\r\n**What is the current behavior?**\r\n- Warning code is hardcoded to call `fbjs/lib/warning`. This makes it hard to integrate warnings with tools.\r\n\r\n- As a workaround we could use webpack’s `resolve.alias` to alias `fbjs/lib/warning` into our fork which displays it on-screen.\r\n\r\n   - This use case is similar to https://github.com/facebook/react/pull/7360.\r\n\r\n- Another use case is to integrate React warnings with our testing infrastructure. This helps us to better see which warning belongs to which test.\r\n\r\n    ![image](https://user-images.githubusercontent.com/193136/27680560-587f934a-5ce6-11e7-985b-a1a2042d831a.png)\r\n\r\n**What is the expected behavior?**\r\n- React allows library user to override the default warnings behavior.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n- The workaround works in React 15 and should still work in React 16, as the flat bundles does `var warning = require('fbjs/lib/warning')` which means we can still hook into it for now.\r\n\r\n- This probably breaks when the flat bundles stopped doing `var warning = require('fbjs/lib/warning')`."},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nRequest a feature\r\n\r\nI am working on project to build AMP page with React Server Side Rendering. I am having an issue to add custom attribute to built-in AMP element. In order to be able to use [amp-bind](https://www.ampproject.org/docs/reference/components/amp-bind#bindings) we need to be able to output “bindings\", which are special attributes of the form `[attribute]`, eg. `[slide]=\"selectedSlide\"`. \r\n\r\n```\r\n<amp-carousel \r\n    layout={layout}\r\n    height={height}\r\n    width={width}\r\n    [slide]={slide}\r\n>\r\n        ...\r\n</amp-carousel>\r\n```\r\n\r\nHere is AMP carousel example that work with [amp-bind](https://ampbyexample.com/advanced/image_galleries_with_amp-carousel/#linking-carousels-with-amp-bind).\r\n\r\n**What is the current behavior?**\r\n- Parsing error: Unexpected token [ (Fatal) \r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n- All\r\n\r\nFor more information, you can read all the discussion in this [PR](https://github.com/facebook/react/pull/7311#issuecomment-311516763)."},{"labels":[null,"enhancement"],"text":"(cc @gaearon, from https://github.com/yannickcr/eslint-plugin-react/issues/1258#issuecomment-311211399)\r\n\r\nIn general, there's lots of little utilities that are helpful to have as standalone packages. One of them is https://unpkg.com/airbnb-prop-types@2.7.0/build/helpers/getComponentName.js, for example.\r\n\r\nIt'd be ideal for the React team to maintain this package - primarily, so that it would be guaranteed to either not break when a new React version is released, or be updated to work with the upcoming version prior to release.\r\n\r\nIn the interests of the React team not signing up to maintain all the package requests that might come in, would it be possible to make \"part of the release process\" be \"ensure compatible versions of community packages exist\"? I'd be happy to create the above package, for example, and I know the community would love a guarantee that enzyme would always work with any official React version release, prior to the release."},{"labels":[null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nRequest a feature\r\n\r\n**What is the current behavior?**\r\nReact ecosystem was promoting ES6 classes and modules since 2014 and many packages like react-router, redux and so on, have an \"es\" folder in the npm package with source code in ES2015 modules. Unless I am missing something, it is strange that React itself does not offer that option.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template: https://jsfiddle.net/84v837e9/).**\r\nInstall react and try to import it in a browser with native modules enabled.\r\n\r\n**What is the expected behavior?**\r\nHave an \"es\" folder in the npm package with ES2015 modules source code, like most React ecosystem projects do. Allow to import react from ES2015 native modules to make developer workflow more simple.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nAll versions"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nRequest a feature\r\n\r\nPer some discussion today with @tomocchino and @thejameskyle, I'd like a non-Flow mechanism to annotate what type(s) of elements a component expects to render.\r\n\r\nHere's some examples, with Flow types for comparison (that I realize may not be currently checked in Flow, yet):\r\n```jsx\r\nfunction Foo({ yes }){\r\n  return yes ? <Bar /> : <div />;\r\n}\r\nFoo.renderTypes = [Bar, 'div'];\r\n\r\n\r\nclass Bar extends React.Component {\r\n  static renderTypes = [Button];\r\n\r\n  render() {\r\n    return <Button />;\r\n  }\r\n}\r\n```\r\n```jsx\r\nfunction Foo({ yes }): React.Element<Bar | 'div'> {\r\n  return yes ? <Bar /> : <div />;\r\n}\r\n\r\nclass Bar extends React.Component {\r\n  render(): React.Element<Button> {\r\n    return <Button />;\r\n  }\r\n}\r\n```\r\n\r\nInside @Airbnb, we have lots of use cases where we have container components in a separate package - say, a `<ButtonRow>`, and we have intentionally restrictive propTypes on its `children` prop, to only allow a `Button` (also in the same package). However, in an app that consumes this component library package, a dev may want to create a `<SpecialProductButton />` that in turn renders a `<Button>` - however, they're unable to pass it into `ButtonRow` (our propType warnings fail tests), even though conceptually it should be permitted.\r\n\r\nHaving `.renderTypes` would allow us to widen our `children` propType to allow for either a `<Button>`, or *anything that renders a `<Button>`*, which helps us maintain separation of concerns (the package doesn't have to know about `<SpecialProductButton>` to accept it) as well as maintain strictness (the package doesn't have to allow any wacky element inside `<ButtonRow>`).\r\n\r\nI imagine the implementation to be:\r\n 1. when render() is called or an SFC is invoked, (in async rendering, it'd be when the component resolves, i suppose)\r\n 1. in development only and if `.renderTypes` exists on the component\r\n 1. evaluate the equivalent of [`elementType`](https://www.npmjs.com/package/airbnb-prop-types)`(...Component.renderTypes)({ children: renderedValue }, 'children', ...)`,\r\n 1. just like propTypes, log the error if one is returned\r\n\r\n(cc @spicyj)"},{"labels":["enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nFeature \r\n\r\n**What is the current behavior?**\r\nInitial state is null.\r\n\r\n**What is the expected behavior?**\r\nInitial state is undefined. We can manually set the state to undefined in the class, but it would make sense to be out of the box as it would allow destructuring without errors.\r\n\r\n**Version:**\r\nReact 15.6.1\r\nReact-Dom 15.6.1\r\n\r\nSorry if this has been suggested before. "},{"labels":[null,"enhancement"],"text":"I think a `React.Children.find` method would be really useful in situations where you need to iterate over your children and find just one that satisfies a particular condition. I'm running into this situation more and more often in my React code. A few examples:\r\n\r\n- In [React Router](https://reacttraining.com/react-router), the `<Switch>` component [iterates over its children](https://github.com/ReactTraining/react-router/blob/c46e51bfd61343611ddbc173207952e980b81aec/packages/react-router/modules/Switch.js#L38-L49) to figure out which `<Route>` matches the URL.\r\n- In [a `<Select>` component we use in our training workshops](https://github.com/ReactTraining/react-subjects/blob/44614bc3c6c8ca1de813e0bd1e14f86a74a5c0fb/subjects/Select/solution.js#L24-L37), we need to iterate over the `<Option>`s to figure out which label we should show in the select box.\r\n\r\nI wonder if there would be any interest from others in seeing something like this."},{"labels":[null,"enhancement"],"text":"**React v15.5.4**\r\n\r\nUnexpected behaviour of `React.Children.forEach` – silently filters functions.\r\n\r\n**Current behavior:**\r\n\r\n```jsx\r\nconst element = (\r\n  <div>\r\n    {() => {}}\r\n    {() => {}}\r\n  </div>\r\n);\r\nconsole.log(React.Children.toArray(element.props.children))\r\n// Output: []\r\n```\r\n\r\n**Expected behavior:**\r\n\r\nChildren.forEach should throw *Invariant* error then *function* type child is met.\r\n\r\nor\r\n\r\nChildren.forEach shouldn't filter *function* type children.\r\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n**What is the current behavior?**\r\n```\r\nclass TestWrongPropTypes extends Component {\r\n    static propTypes() {\r\n        return {\r\n            children: PropTypes.string,\r\n            missing: PropTypes.string.isRequired\r\n        };\r\n    }\r\n\r\n    static defaultProps() {\r\n        return { children: 'Default props via static function' };\r\n    }\r\n\r\n    render() {\r\n        return <p>{this.props.children}</p>;\r\n    }\r\n}\r\n```\r\n\r\nIn this example React will silently skip `propTypes` checking and default props setting for `TestWrongPropTypes` component.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template: https://jsfiddle.net/84v837e9/).**\r\nhttps://jsbin.com/jidupehebu/edit?js,console\r\nhttps://jsfiddle.net/84v837e9/30/\r\n\r\n**What is the expected behavior?**\r\nI know that in order to work, propTypes definition should be `static get propTypes = {...}` or `TestWrongPropTypes.propTypes = {...}`. But I'd like to have warning like \"propTypes/defaultProps is function but should be either property or getter\" to prevent such errors.\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\nDiscovered in React 15.X, but probably the same behavior will be also in earlier versions."},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a *feature* or report a *bug*?**\r\nfeature\r\n\r\n**What is the current behavior?**\r\nWhen a PureComponent renders an impure one as its child, no warning in console or devtool\r\n\r\n**What is the expected behavior?**\r\nIt could be better if we get a warning message for such cases\r\n\r\nThis may be related to https://github.com/facebook/react/pull/9240 since React now disallow PureComponent to have a custom `shouldComponentUpdate` implement, so a \"pure\" component with customized and more efficient `shouldComponentUpdate` method must inherit from `Component` base class and add a `isPureReactComponent` property themselves in order to prevent the warning message appear\r\n\r\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\r\n15.5.4\r\n"},{"labels":[null,null,"enhancement"],"text":"### Problem\r\n\r\nThe `ReactTestRenderer` now supports a new API, [`toTree`](https://github.com/facebook/react/blob/master/src/renderers/testing/ReactTestRendererFiber.js#L350-L355), which returns an easily traversed tree representing the internal state of the instance and its rendered nodes.\r\n\r\nThe existing solution for this in `TestUtils` is `findAllInRenderedTree` which traverses the root and lets you provide a test function it will call to reduce a tree based on a predicate. The predicate function is passed the public instance for the node.\r\n\r\nThe issue with that is that it makes the predicate function polymorphic and requires every consuming utility to check if it's being passed a component instance or a DOM node. \r\n\r\n\r\n### Solution\r\n\r\nI propose that we implement a new API similar to `findAllInRendererdTree` that calls the predicate function with the result of calling `toTree` on the internal instance instead of the public instance. This would mean:\r\n\r\n* the predicate function will always be called with the same data structure (a tree node)\r\n* third-party traversal utilities can be shared between `ReactTestRenderer` and `ReactTestUtils`, since they would operate on the same tree structure\r\n* You could actually assert on functional components, which currently have no instance and just call the predicate with `null`\r\n\r\nThis new API could just be a pure traversal utility, leaving it up to the consumer to accumulate results.\r\n\r\n```js\r\nimport { renderIntoDocument, traverseTree } from 'react-dom/test-utils';\r\nvar root = renderIntoDocument(<App />);\r\nvar results = [];\r\ntraverseTree(root, node => {\r\n  if (somePredicate(node) { results.push(node) }\r\n})\r\n```\r\n \r\n## Implementation\r\n\r\nWith a brief review, it looks like we could just export the `toTree` function that is currently inlined in `ReactTestRenderer` and provide a way to change:\r\n\r\n```js\r\n var publicInst = node.stateNode;\r\n      if (test(publicInst)) {\r\n        ret.push(publicInst);\r\n      }\r\n```\r\n\r\nto:\r\n```js\r\n var treeNode = toTree(node);\r\n      if (test(treeNode)) {\r\n        ret.push(treeNode);\r\n      }\r\n```\r\n\r\ncc @gaearon @bvaughn @lelandrichardson "},{"labels":[null,"enhancement"],"text":"I haven’t fully thought through this yet, so hoping for some feedback on whether it is viable or breaks too many assumptions.\r\n\r\nThe goal is to create an escape hatch that would support rendering to conditional comments, alternative method for web components, and other unknown and probably bad ideas.\r\n\r\nSomething along the lines of:\r\n\r\n```jsx\r\nconst DangerousComment = ({children}) => ({\r\n  dangerouslySetInnerHTML: {__html: `<!-- ${children} -->` }\r\n});\r\n\r\nReactDOMServer.renderToString(\r\n  <head>\r\n    <DangerousComment>\r\n      {\"[if lte IE 9]><script src='/public/media.match.js'></script><![endif]\"}\r\n    </DangerousComment>\r\n  </head>\r\n); // <head><!--[if lte IE 9]><script src='/public/media.match.js'></script><![endif]--></head>\r\n```\r\n\r\n```jsx\r\nconst WebComponent = ({children}) => ({\r\n  dangerouslySetInnerHTML: {__html: `<!-- ${children} -->` }\r\n});\r\nReactDOM.render(() => (\r\n  <WebComponent>`\r\n    <app-toolbar arbitary-prop=\"sure-y-not\">\r\n      <div main-title>Web Components!</div>\r\n    </app-toolbar>\r\n  `</WebComponent>\r\n), document.body.firstChild);\r\n```\r\n\r\nThe first example is the one I’m more interested at this point in time. The benefit here is this could work on both the DOM and server renderer without userland hacks like https://nemisj.com/conditional-ie-comments-in-react-js/ or `componentDidMount` ref replacement (client only, I believe?).\r\n\r\nA couple initial problems I see with this are (may or may not be solvable/avoidable with slight tweaks):\r\n\r\n* returning an arbitrary object `render` which isn’t supported\r\n* how will unmounting this work?\r\n\r\nAlternative proposal:\r\n\r\nIntroduce a new DOM-renderer primitive `<comment />` or `<dangerousComment />` (to follow a similar approach to `dangerouslySetInnerHTML` clearly indicating the caveats that come with rendering comments). This alternative solution only solves the conditional comment issue above."},{"labels":[null,null,"enhancement"],"text":"React has made recent developer experience improvements to lifecycle error handling and logging. Errors thrown during render can be recovered from using ~~`unstable_handleError`~~ `componentDidCatch`. Errors thrown during lifecycle methods are also automatically logged to the console with the component stack location to make them easier to identify (see #8785).\r\n\r\nThe team has discussed similar improvements for warnings- such as using a \"yellow box\" approach to make warnings stand out more in developer mode (see PRs #7360 and #8861). There has been some pushback though to the idea of React modifying the DOM for warning purposes (see issue #8784). I'm not sure how that will play out yet- but in the meanwhile, could we improve at least some of these use cases by making better use of the devtools?\r\n\r\nFor example, what if React exposed a new API that allowed associating a warning with one or more components in the devtools panel? (eg a method that- when called- recorded the current component stack and notified devtools if present) React could use this for things like missing or non-unique keys. 3rd party libraries may also benefit from this (eg react-virtualized could use this to warn about missing or incomplete positioning styles for cells).\r\n\r\nHere's a rough outline of some of the features:\r\n* Components with warnings could be highlighted in some emphasized way (eg yellow background) in devtools to make them easier to spot.\r\n* A new toolbar option could be added to \"Show All Warnings\" (eg filter the tree view to show only components with warnings).\r\n* Warning message could be shown inline in the settings panel for the selected component.\r\n\r\nHere's a rough mockup: \r\n![screen shot 2017-03-15 at 3 47 31 pm](https://cloud.githubusercontent.com/assets/29597/23974108/bc3dabd6-0996-11e7-8d2a-e058c4cafe41.png)\r\n\r\nLimitations:\r\n* Not everyone uses devtools so this would not help a lot of people.\r\n* This would not address issues like using the development mode of React for production sites.\r\n\r\nThoughts? Ideas? Suggestions?"},{"labels":[null,null,"enhancement"],"text":"This is sort of a feature request, mostly because I haven't been able to make the current react tooling do what I need it to do.\r\n\r\nI have a massively huge article up on https://pomax.github.io/bezierinfo that consists of a single page of React-managed content, of which the bulk is \"passive\" HTML content. Paragraphs, headings, that kind of stuff. However, there are also active components with JS interaction bindings, and so I was trying to figure out a way to turn this article into a \"react-managed by the client\" into a \"thin ui managed by the client, react-built offline\" solution. \r\n\r\nI had a look at ReactDOMServer.renderToStaticMarkup, but while this generates all the HTML nicely, it also loses any and all JS bindings that are necessary to keep the UI working. As this is an ~800kb article not counting static assets (there's some 1.6MB of images on top of that), the notion of first loading the plain markup content and then loading the react bundle on top of that, to hook into the preloaded markup would be a terrible experience for people in the slightly-less-wealthy parts of the world.\r\n\r\nIs there some way to, or would there be a sense in developing a way to render React content to HTML \"as much as possible\" while preserving React's management of interactive UI components? Essentially, a solution in between `renderToString` and `renderToStaticMarkup`, to prevent as much data duplication between the pregenerated HTML and the react application itself? It seems that the heavy payload (in bytes, but certainly in client-side processing as well) incurred by using a fully react-managed bundle could be relieved significantly if \"content that is guaranteed passive, regular HTML\" could be serialized out as HTML with React hooking back into that code only for elements that require active management.\r\n\r\n(I have no idea how much work that would be, but I'm pretty sure it would help bring down the average page size down again, which on a global scale would save quite a lot of time and money, while allowing content to be loaded by people for whom parts of the internet are currently inaccessible due to load time and byte cost)"},{"labels":[null,"enhancement"],"text":"This issue is intended to be a discussion for how to distribute the ReactFiberReconciler.js file and dependencies for custom renderers.\r\n\r\nCurrently first-class renderers within the React codebase/Facebook ecosystem do not have any concerns for this because of Haste / access to the React.js build + publish tooling within this codebase.\r\n\r\n3rd party renderers are currently adding `react-dom` to their dependency list and requiring `react-dom/lib/ReactFiberReconciler.js` to build and expose their custom renderer.\r\n\r\nIdeally, `ReactFiberReconciler.js` would be distributed with the `react` package or as a standalone `react-fiber-reconciler` package. Whether this is at `react/reconciler.js` or `react/lib/reconciler.js` idk. I think at the root is better to continue the discouragement of looking in `react/lib/*` for anything.\r\n\r\nI understand flat bundles are coming, too. I don’t know if that should block this or if this could be a flat bundle, or any other alternative.\r\n\r\nIs this something the team is ready to commit to and support if we came to a decision on approach and I put together a PR?\r\n\r\n Related issues:\r\n\r\n* #6795 Create Separate Copies of Each Renderer\r\n* #5472 Include flow type definitions (flow type distribution proposal at https://github.com/facebook/react/issues/5472#issuecomment-282394248)\r\n\r\n+ @sebmarkbage @spicyj "},{"labels":[null,null,"enhancement"],"text":"This feature request came out of a brief discussion on twitter with @gaearon: https://twitter.com/dan_abramov/status/820356665899945984\r\n\r\n`__REACT_DEVTOOLS_GLOBAL_HOOK__.inject` exposes access to `getClosestInstanceFromNode`, `getNodeFromInstance`, `ReactMount` and `ReactReconciler`. This is great, and we use it to collect component level performance metrics for our customers in production, however, there are more things we'd love to have access to for the purpose of helping our users pinpoint performance issues in their applications.\r\n\r\nThis \"issue\" includes some initial observations, but I hope we can keep an open dialogue about this - in particular considering Fiber will probably change the landscape with regards to what the most common performance problems are and we'd instrument according to that.\r\n\r\nI understand the urge to keep the API surface area as small as possible in order to create minimal commitment to APIs to allow for internals to move fast. Exposing additional internals with the explicit warning that you are not committed to their API is fine for us, as a tool vendor.\r\n\r\nWe've looked at using `batchedUpdates` to highlight the batched nature of the work performed by React. E.g. is the work in your application getting batched properly. If we only have access to the component updating methods on `ReactReconciler` (`mountComponent`, `receiveComponent`, `unmountComponent` etc) we can't really know when a batch of work starts and when it ends. `batchedUpdates` is available in ReactDOM with the `unstable_` prefix, but exposing it in the `inject` hook would be very useful: https://github.com/facebook/react/blob/master/src/renderers/dom/ReactDOM.js#L38\r\n\r\nWe've also (experimentally) hooked into `EventPluginUtils.executeDispatchesInOrder` in order to capture events and measure the work resulting from these, but i suspect there is a better place to do this (`ReactEventListener.dispatchEvent`?). In any case, having access to the event system would be very useful. Again, using the \"unstable_\" prefix to indicate non-committal would be fine for us.\r\n\r\nI've not had much time to look into what we'd need access to for Fiber instrumentation, but so far it looks like a hook into `beginWork` would be very useful: https://github.com/facebook/react/blob/199db638c4d0fbc6e4d99534be0060deea518a32/src/renderers/shared/fiber/ReactFiberBeginWork.js#L640"},{"labels":[null,null,"enhancement"],"text":"I would like to add React event bubbles to the markup tree of Firefox Developer Tools. To do this I need a way to get a list of nodes and their attached event listeners.\r\n\r\nIf somebody can provide a way for me to do this it will be added within a day.\r\n\r\nIs this possible at the moment and, if not, what can be done to make this possible?"},{"labels":[null,"enhancement"],"text":"Version 15.4.1\r\n\r\nAs starting Chrome 55, there is a new event `auxclick` to handle middle click, and `click` doesn't trigger by middle click anymore\r\nhttps://developers.google.com/web/updates/2016/10/auxclick"},{"labels":[null,"enhancement"],"text":"To use a Web Component in React, you must directly attach an event listener to the React ref for that WC. We could change the implementation so that when React detects a custom element (tag names with dashes, like `my-component`), it will bypass the synthetic event system (and the whitelist) and just attach the event listener on the element itself.\n\nWhy bypass the synthetic event system? Because _anyway_ we already need to bypass it manually when using a Web Component. I'm not so familiar with the React codebase, but this naive approach seems to work. Whoever uses Web Components in React can be responsible for whatever downsides that would cause, maybe in performance, I don't know. They are already having those (supposed) downsides, this issue is just about the convenience of WC usage inside React.\n\nI was about to send a PR for this, but thought of opening an issue. I looked through the issues and didn't see any existing one related to the handling of WC events.\n\n**What is the current behavior?**\n\nA WC custom event (e.g. `flipend`) must be handled by attaching the event listener directly to the element in componentDidMount using a ref.\n\nhttp://jsbin.com/yutocopasu/1/edit?js,output\n\nReact v15.1.0\n\n``` js\nclass HelloMessage extends React.Component {\n  handleHelloClick() {\n    this.refs['foo'].toggle();\n  }\n\n  handleFlipend(ev) {\n    console.log('Handle flip end');\n  }\n\n  componentDidMount() {\n    this.refs['foo'].addEventListener('flipend', ev =>\n      this.handleFlipend(ev);\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div onClick={ev => this.handleHelloClick()}>\n          Hello {this.props.name}, click me!\n        </div>\n        <brick-flipbox class=\"demo\" ref=\"foo\">\n          <div>front</div>\n          <div>back</div>\n        </brick-flipbox>\n      </div>\n    );\n  }\n}\n```\n\n**What is the expected behavior?**\n\nA WC custom event can be handled with `onMyEvent={ev => this.handleMyEvent(ev)}` on the ReactElement corresponding to the WC.\n\n``` js\nclass HelloMessage extends React.Component {\n  handleHelloClick() {\n    this.refs['foo'].toggle();\n  }\n\n  handleFlipend(ev) {\n    console.log('Handle flip end');\n  }\n\n  render() {\n    return (\n      <div>\n        <div onClick={ev => this.handleHelloClick()}>\n          Hello {this.props.name}, click me!\n        </div>\n        <brick-flipbox onFlipend={ev => this.handleFlipend(ev)} class=\"demo\" ref=\"foo\">\n          <div>front</div>\n          <div>back</div>\n        </brick-flipbox>\n      </div>\n    );\n  }\n}\n```\n\nPS: this snippet above still has the `ref`, but for unrelated reasons. Ideally we wouldn't need refs for handling events of WCs.\n"},{"labels":[null,"enhancement"],"text":"_Just going to put it out there for feedback..._\n## Motivation\n\nSubscription management comes with a cost and that eats into the wins of async rendering since it needs to be managed synchronously. Not just managing the direct subscriptions themselves but managing the dynamic dependency graph so that it can be invalidated.\n\nMeanwhile, most of what subscriptions are used for is data that will never update. At least in our apps. It is a pure loss.\n\nThe use case is when you're connecting to third party systems that aren't as easily connected to the top level data tree.\n## Proposal\n\n``` js\nthis.forceDeepUpdate();\n```\n\nSame use case as `forceUpdate`, if you are reading from global mutable state for some reason, you can use this to by-pass `shouldComponentUpdate` in an entire subtree. Basically rerender everything. When combined with Fiber this can be a low-priority update so it's not so bad for things that change a lot of things.\n\nA good example would be changing the locale. Regardless if you read a global mutable locale (like AirBnB does) or a context locale (like Yahoo) does, this lets you change it when you need to. Without needing to manage subscriptions for all those cases when you don't need it.\n\n``` js\nthis.forceDeepUpdateWithScope(scope);\n```\n\n``` js\nclass Foo extends React.Component {\n  shouldComponentUpdateForScope(scope) {\n    return scope.store === UserStore && scope.id === this.props.userID;\n  }\n  render() {\n    ...\n  }\n}\n```\n\n`forceDeepUpdateWithScope` would traverse the subtree and only start rendering if `shouldComponentUpdateForScope` returns `true` for the arbitrary `scope` argument. This allows for a bit more of a targeted update with some convenience overhead.\n\nAdditionally, React would cache the pair of `scope` and `components` that responded. For some number of scopes back. If a new component gets mounted with a `shouldComponentUpdateForScope` we might check it against the cache to see if we need to add it to the cache.\n\nEffectively this creates **lazy subscriptions**.\n\nThe use case is something like typing into an input field that then updates some global store which immediately displays in a completely different place on the page. The first character might be a bit slower but still with responsive levels and the subsequent characters are fast to update.\n## Caveat\n\nThe major downside of this proposal is that it relies on mutation. As we know, React doesn't really like mutation for many more reasons than just `shouldComponentUpdate`.\n\nThe effect in Fiber for example, is that any component that gets a higher priority update will start using the new value. Components that rely on mutable state effectively become up-prioritized which is not good. 1) It can temporarily show inconsistent data. 2) The point of making this kind of update lower priority is because it is likely to be large. Larger updates will stall the page if they take the same priority as higher priority updates. Thereby defeating the benefits of Fiber anyway.\n\nI'd like to try to come up with a variant of this API that doesn't rely on mutation.\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a _feature_ or report a _bug_?**\n\n_Feature_\n\n**What is the current behavior?**\n\nCurrently, whether a prop is expected to change or not, it is passed through props. There is no way for us as developers to mark a prop as fixed (should never change over the lifecycle of a component).\n\n**What is the expected behavior?**\n\nThese would _not_ be static properties, i.e. they can change from instance to instance. But they are created at initial render and never change (`===`) from the original. Ideally, though I'm not sure on implementation, they would also always be `deepEqual` to the original (perhaps something like `Object.freeze(Object.assign({}, originalObject))`.\n\nAdvantages to allowing props to be explicitly marked as fixed:\n1. shouldComponentUpdate would be better if a lot if certain props automatically don't / can't change\n2. Allow for errors / warnings when a prop marked as fixed is changed after the initial render.\n3. Possible compiler / render optimizations knowing that particular props will never change over the course of multiple renders. In particular, if a component only has fixed props (including children), we know the render output is fixed, and we can just inline that output into the parent render output.\n\nOne possible API would allow a separate fixedProps category.\n\n`React.createElement(MyComponent, { name: 'Hello' }, children, { message: 'Always this one string' })` (maintain signature)\n\nFor JSX, one (very mediocre) idea would be something like:\n`<MyComponent name=\"Hello\" $fixed.message=\"Always this one string\" />`\n\nAnother would be a separate prop called $fixed or something similar.\n\n`React.createElement(MyComponent, { name: 'Hello', $fixed: { message: 'Always this one string' } }, children)`\n`<MyComponent name=\"Hello\" $fixed={{ message: 'Always this one string' }} />`\n\nIt would be critical that `props` and `fixedProps` would be merged when the component is actually created. `this.props` would always contain all props, functional components still get one arg, and thus nobody has to rewrite render for any component.\n"},{"labels":[null,null,"enhancement"],"text":"**Do you want to request a _feature_ or report a _bug_?**\nFeature\n\n**What is the current behavior?**\n\n``` jsx\n// MyComponent.js\nimport React from \"react\";\nimport ThirdPartyComponent from 'third-party-component';\n\nfunction MyInternalComponent() {\n  return <div>test</div>;\n}\n\nexport default function MyComponent() {\n  return <div>\n    <MyInternalComponent></MyInternalComponent>\n    <ThirdPartyComponent someProp={true}></ThirdPartyComponent>\n  </div>;\n}\n\n// test.js\nimport ReactTestRenderer from \"react-test-renderer\";\nimport React from \"react\";\nimport MyComponent from \"./MyComponent.js\";\n\nconst renderer = ReactTestRenderer.create(<MyComponent/>);\n\nconsole.log(renderer.toJSON());\n```\n\nThis renders whole tree of DOM which is actually expected behaviour. The problem is, that I dont want render `ThirdPartyComponent`, only `MyInternalComponent`.  Shallow renderer isnt answer because shallow would not render `MyInternalComponent` at all. Which is problem because it's hard to divide component into smaller, internal chunks.\n\nI have done some work in order to achieve this in #5513. It was fully working patch. It was done as part of ShallowRenderer but now we have TestRenderer. Besides this patch is pretty old so resolving conflicts would be very hard.\n\n**What is the expected behavior?**\n\nI would love to provide \"blacklist\" of components which I don't want to render:\n\n``` js\nimport ThirdPartyComponent from 'third-party-component';\n//...\n\nconst renderer = ReactTestRenderer.create(\n    <MyComponent/>, \n    {\n        dontRender: [ThirdPartyComponent]\n    }\n);\n```\n\nThis would return jsx:\n\n``` js\n<div>\n    <div>test</div>\n    <ThirdPartyComponent someProp={true}></ThirdPartyComponent>\n</div>\n```\n\nSo we can test props returned for `ThirdPartyComponent` and internal logic.\n\nIt's combine of full and shallow renderer.\n\nI have some ideas of implementation but i dont want waste my time writing code which won't be marged into master anyway. \n\nThis possibly would allow to resolve https://github.com/airbnb/enzyme/issues/250.\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a _feature_ or report a _bug_?**\nI want to report a bug\n\n**What is the current behavior?**\n`render()` doesn't receive props with Symbol keys (for example, `{[Symbol()]: 'lol'}`). I guess it is because of `hasOwnProperty` in [ReactElement.createElement](https://github.com/facebook/react/blob/a56e105081e27877a2ecbfdc8d591e3b151b2af1/src/isomorphic/classic/element/ReactElement.js#L223)\n\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via jsfiddle or similar.**\nhttps://jsfiddle.net/sh2xbm3x/1/\n\n**What is the expected behavior?**\nSymbol-keyed `props` passed to `render()` \n\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\nEvery single one, as far as I know\n"},{"labels":[null,null,"enhancement"],"text":"React's shouldComponentUpdate based performance improvements work great for improving the performance of medium-weight components with large numbers of instances. They even work well with event handlers, as you can ignore event handler changes and instead pass a locally bound method that'll access `this.props.on*` on demand. However this all fails apart you start passing react elements to pure components.\n\n``` js\n'use strict';\nimport React, {Component, PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport shallowEqual from 'recompose/shallowEqual';\n// shallowEqualExcluding: Fictional function that works like shallowEqual, but ignores changes to a list of props passed as the third argument\n\nclass Button extends Component {\n    static propTypes = {\n        icon: PropTypes.node.isRequired,\n        onClick: PropTypes.func\n    };\n\n    onClick = (e) => {\n        this.props.onClick(e);\n    };\n\n    shouldComponentUpdate(nextProps) {\n        // @note Doesn't actually work\n        return shallowEqualExcluding(this.props, nextProps, ['onClick']);\n    }\n\n    render() {\n        const {icon} = this.props;\n\n        return (\n            <button onClick={this.onClick}>\n                {icon}\n                {/*React.cloneElement(icon, {ref: (icon) => this.iconRef = icon})*/}\n            </button>\n        );\n    }\n}\n\nclass Icon extends Component {\n    static propTypes = {\n        name: PropTypes.string.isRequired,\n        color: PropTypes.string\n    };\n\n    shouldComponentUpdate(nextProps) {\n        return shallowEqual(this.props, nextProps);\n    }\n\n    render() {\n        const {name, color} = this.props;\n        return getSvgIcon(name, color);\n    }\n}\n\nconst nilClick = () => {};\nReactDOM.render(<Button onClick={() => alert('Clicked!')} icon={<Icon name='done'} />, document.querySelector('#container'));\nReactDOM.render(<Button onClick={nilClick} icon={<Icon name='done'} />, document.querySelector('#container')); // 2nd invovation\nReactDOM.render(<Button onClick={nilClick} icon={<Icon name='cancel'} />, document.querySelector('#container')); // 3rd invovation\n```\n\nGiven this sample; A `<Button />` component that expects an icon to be passed as an `icon` prop and a simple `<Icon />`. Both are pure components and Button is also coded to not re-render when`onClick` is changed. Pretend that Button actually has a heavy `render()` but its props and state don't change frequently.\n\nOn the second invocation, Icon should not require any prop change or render and Button should have its `onClick` prop changed but not require a render.\nOn the third invocation, Icon should require a render while Button itself does not need to render except for the change to Icon.\n\nHowever in practice Button will always re-render, including during the second invocation when nothing changes.\n\nThis is because `<Icon />` will always result in a new instance and will never be the same.\n\nNormally you could work around this within the component itself, without telling users they have to store `<Icon />` in a variable until they think they need to change its props; for functions you could pass a function that will use `this.props.*` itself and for objects you can do a deep comparison if you know the structure of the object. But for react elements, even though `shouldComponentUpdate` allows React to know if the current component has a render dependency on a sub-component, you do not have access to this information so Button cannot tell if Icon requires a render.\n\nIn practice this can turn out to be a problem when you're writing some libraries rather than an application. Notably [Material UI](http://www.material-ui.com/) suffers from this problem in production. `EnhancedSwitch`'s `render()` is not light; `EnhancedSwitch` is used by `RadioButton` and `Checkbox`; both use a `checkedIcon` and `uncheckedIcon` React element prop; you can reasonably have 100 checkboxes on one page; even if they were pure, they cannot identify whether an icon requires an update; as a result, a render of the component containing the checkboxes to check a single checkbox will result in the `render()` of all 100 `EnhancedSwitch` instances.\n\nI can think of a few ideas on what type of API could be added to React to solve this issue.\n## shouldComponentUpdate helper\n\nThe most obvious API would be a top-level React function that given the instance context, old ReactElement, and new ReactElement would return the result of a Component's `shouldComponentUpdate`. Then heavy parent components can use that to implement a `shouldComponentUpdate` that is aware of render dependencies in its children.\n(As a bonus, theoretically you could temporarily remember this while you're walking the current tree; then instead of calling `shouldComponentUpdate` multiple times for every (potentially nested) component the result is simply that `shouldComponentUpdate` calls are raised up to the highest level where a component is render-dependent on them)\n\n`React.shouldComponentUpdate(this, this.props.icon, nextProps.icon)`\n\nHowever I expect the problem we have with this is that `shouldComponentUpdate` is also responsible for state dependent updates and `this` is supposed to be a rendered instance, not a ReactElement instance. While you know `context` from passing the current instance, you do not have a reference to the state from either of the props.\n## ref based shouldComponentUpdate helper\n\nThe second most obvious API would be a `shouldComponentUpdate` helper that instead uses a ref.\n\n`React.shouldComponentUpdate(this.iconRef, nextProps.icon)`\n\nThe downside to this is that to get a ref for a component you didn't create, you inevitably have to use `React.cloneElement`.\n## render passthrough\n\nThe next idea I had was a render passthrough. A way during the render process for a component to say \"I do not need a render()/update, but these children of mine may\" which would tell React to skip render() and then run `shouldComponentUpdate` on the instances deeper in the tree.\n\nHowever those components only know if they need updates if you pass them the new props; so a passthrough won't work. We'd instead need a way to tell react that it should not run `render()` but do pass on an update to a specific component instance\n\n`this.renderRef(this.iconRef, nextProps.icon);`\n\nThe advantage of this over using `shouldComponentUpdate` is that instead of only allowing medium components wrapping light components to only `render()` when a child requires it; we also allow heavy components to never `render()` unless they themselves require it, while still allowing them to permit their light children to update.\n# partial renders\n\nThat `shouldComponentUpdate` based `renderRef` only applying updates to a component child feels somewhat awkward and forced though. So a more robust idea might be a partial render lifecycle that optionally runs when `shouldComponentUpdate => false` and can call for the render of a sub-tree that belongs to the current component.\n\n``` js\nclass HeavyComponent extends Component {\n    shouldComponentUpdate(nextProps) {\n        // Ignore icon and children\n        return nextProps.text !== this.props.text;\n    }\n\n    render() {\n        const {text, icon, children} = this.props;\n\n        text = doSomethingAbsurdlyCpuIntensiveAndHardToFactorOutOfThisComponent(text);\n\n        return (\n            <div>\n                <h2>\n                    {React.cloneElement(icon, {ref: (icon) => this.iconRef = icon})}\n                    {text}\n                </h2>\n                <Wrapper ref='subtree'>\n                    {children}\n                </Wrapper>\n        );\n    }\n\n    componentSkippedRender(nextProps/*, nextState*/) {\n        this.subRender(this.iconRef, React.cloneElement(icon, {ref: (icon) => this.iconRef = icon}));\n\n        this.subRender(\n            this.refs.subtree,\n            <Wrapper ref='subtree'>\n                {children}\n            </Wrapper>\n        );\n    }\n}\n```\n\nThough `this.subRender` probably has potential for conflicts, so I expect the most react-line way to name that would be something like `React.renderSubtreeIntoComponent(parentComponent, nextElement, component)` which would be invoked using `React.renderSubtreeIntoComponent(this, /* subtree */, this.refs.subtree);`.\n\nThe `<Wrapper>` I used would be a really light component that probably would just render its children. It's there because `React.renderSubtreeIntoComponent` should probably not accept dom refs; this should be part of React lifecycle/walker, not part of client side browser only react-dom like `ReactDOM.unstable_renderSubtreeIntoContainer`.\n"},{"labels":["enhancement"],"text":"At the moment, when the server-rendered markup doesn't match the client-rendered markup, a big red error is shown, but it can be difficult/impossible to locate the element where this occurred.\n\nWould something that logged the offending element to the console be considered as a pull request?\n\n![react-diff](https://cloud.githubusercontent.com/assets/4443482/16935229/07cc7b20-4da1-11e6-9e30-f5f584d33182.gif)\n\nhttps://github.com/facebook/react/compare/master...davidgilbertson:log-checksum-failed-element\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a _feature_ or report a _bug_?**\nFeature\n**What is the current behavior?**\nCustom component's properties are always set as attribute.\n**What is the expected behavior?**\nMaybe React should watch at the static `observedAttributes` property  for custom elements (https://w3c.github.io/webcomponents/spec/custom/) and then decide to set an attribute or an instance property. Otherwise, objects and array could be always passed as properties, in order to avoid `<custom-element prop=\"[object Object]\"></custom-element>`.\n"},{"labels":["enhancement"],"text":"This is the error message in question: \n\n```\nLabelButton(...): A valid React element (or null) must be returned. \nYou may have returned undefined, an array or some other invalid object.\n```\n\nNot very helpful. Is it technically possible to _show_ what was returned?\n"},{"labels":["enhancement"],"text":"ES6 style of creating components in React is clearly violating the [Uniform access principle](https://en.wikipedia.org/wiki/Uniform_access_principle). It's a general source of confusion (and bugs) to be able to set state in two different ways:\n- You MUST do `this.state = {}` if you're in the constructor\n- You MUST do `this.setState()` everywhere else.\n\nI believe it'd be much better to have just 1 way to set state in general, and it should be universal. If we're already accessing state through `this.state`, and setting state in the constructor with `this.state`, why not do it everywhere else? The behavior of `this.setState` could be easily replicated with [ES6 Proxies](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set).\n"},{"labels":[null,"enhancement"],"text":"**Do you want to request a _feature_ or report a _bug_?**\nBug - maybe intended behaviour.\n\n**What is the current behavior?**\n\n_Background_\nI have an app that needs to be embedded by other apps (other customers). The idea being \"our\" react app has its javascript loaded in an iframe, but the \"main\" window hosts dom elements from the customers and our react app. That bit works fine. As time goes on \"our\" react UI is no longer needed, and then react root is removed, and the iframe destroyed. These apps are often long lived so there will be times when the react app needs to appear again, and the iframe is recreated and everything reloaded. This can and will happen many times.\n\n_Goal_\nWe would like to NOT keep the iframe around when its not actually needed, but rather re-create just in time when it is needed. This app is used by customers and they would like to embed our \"react\" app, without interference with their \"app\" and all its javascript, which is why we are doing the iframe thing.\n\n_Problem_\nIt is evident by watching the chrome dev tools \"timeline\" memory graph that memory always increases each time a new iframe is created and the react UI is init'd. Unmounting and destroying the iframe, never causes the memory to drop to \"near\" original before load value. Repeating this process multiple times slowly show an increase memory.\n\nThis also causes a more immediate problem, in that react is throwing exceptions on every event (click, type etc) because the window of the iframe is now null.\n\n_Proof: First symptom - Event exceptions (only happens in my app)_\nThese exceptions only happen in my (cant share) app, i cant repo them, but parts of this apply to all react apps. Please read thru - it will all make sense when you get to the end and if you examine my poc.\n\nDestroying the Iframe, leaves React and its event dispatching system in memory. I have a  mixture of x-tag, webcomponents which are used to \"create\" the iframe and load the react app. After the custom element is used (lets call it <EMBED-REACT>), the console starts showing exceptions all within react code. This is a side effect of the react dispatchEvent still being active and trying to do stuff.\n\n``` javascript\nUncaught TypeError: Cannot read property 'nodeName' of null\nshouldUseChangeEvent @ VM1068_embeddedApp.js:14296\nextractEvents @ VM1068_embeddedApp.js:14536\nextractEvents @ VM1068_embeddedApp.js:13000\nhandleTopLevel @ VM1068_embeddedApp.js:19816\nhandleTopLevelImpl @ VM1068_embeddedApp.js:23870\nperform @ VM1068_embeddedApp.js:15510\nbatchedUpdates @ VM1068_embeddedApp.js:23787\nbatchedUpdates @ VM1068_embeddedApp.js:14673\ndispatchEvent @ VM1068_embeddedApp.js:23946\n```\n\nI know about `ReactEventListener.dispatchEvent`(snip below) where i can disable react( i havent actually tried) to avoid the exceptions, but that would leave the memory leak.\n\nhttps://github.com/facebook/react/blob/master/src/renderers/dom/client/ReactEventListener.js#158\n\n``` javascript\n dispatchEvent: function(topLevelType, nativeEvent) {\n    if (!ReactEventListener._enabled) {\n      return;\n    }\n```\n\nIts rather easy to prove that react remains in memory, simply goto the compiled app, find the `React dispatchEvent` and insert a console.log and watch as it continues to \"print\" stuff after unmounting the last component, even though there are no listeners. In my case the exception is caused because all `extractEvents` eventually default to \"window\" as the \"target\".\n\nThere are multiple copies of the same basic idea in various react functions, where it tries to get a target that it assumes will never be null. If one doesnt load react in an iframe, then window is always defined.\n\n``` javascript\nvar targetNode = targetInst ?\n      ReactDOMComponentTree.getNodeFromInstance(targetInst) : window;\n```\n\nLater the `shouldUseChangeEvent` tries to read the nodeName of the now \"undefined\" window, because its iframe has been destroyed, but that now results in an exception (null pointer etc).\n\nhttps://github.com/facebook/react/blob/045f1a791c6e17253e9d927ffca70ae5d00b4fe5/src/renderers/dom/client/eventPlugins/ChangeEventPlugin.js#L72 ...\n\n``` javascript\nfunction shouldUseChangeEvent(elem) {\n  var nodeName = elem.nodeName && elem.nodeName.toLowerCase();\n  return nodeName === 'select' || nodeName === 'input' && elem.type === 'file';\n}\n```\n\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a minimal demo of the problem via https://jsfiddle.net or similar (template: https://jsfiddle.net/reactjs/69z2wepo/).**\n\n**What is the expected behavior?**\nThere are probably two possible solutions, that work in tandem.\n\n1) Firstly React should provide an API that will remove all its global event listeners. Naturally it could complain if there are any active components that remain mounted. This API may be internal/private (not public), if #2 was implemented. It might be called something like `React.shutdownAll` Because everything is gone, the next React render would setup all its globals again.\n\n2) React should dispose of all its global event handlers when the last or \"root\" component is unmounted. This would call the _new api_ mentioned in 1. \n\nEither option solves my problem, where i wish to either let react shutdown gracefully. With this in mind i could.\n- unmount iframe powered react ui component.\n- call React.disposeGlobals (mentioned above). If unmounting auto calls an internal `React.shutdownAll` then this step is skipped.\n- destroy iframe.\n\n_Proof #2_\nGoto your compiled out, locate the `dispatchEvent` and add a console.log, notice even after the last / root container is unmounted stuff will continue to be printed because the event listeners are still active.\n\nI did a very quick scan of the abstraction around adding listeners, and i couldnt see the remove function being stored and then called to cleanup.\n\n_Proof #3_\nLook at my last section below where i have a proof of concept form of the popular todomvc react example.\n\n**Which versions of React, and which browser / OS are affected by this issue? Did this work in previous versions of React?**\nReact 15.0.2\nReact-Dom 15.0.2\nReact-redux 4.4.5 (might be useful to know)\n\n**Reproducable use case**\n\nSorry i tried but decided that using the facebook jsfiddle wasnt really a smart thing for the following reasons.\n- the compile the \"jsx\" content means loading babel etc to compile (babel, jsfiddle etc too many moving parts)\n- its \"hard\" to get the \"root component\" that is inserted into the \"output\" box and \n- its even just too \"hard\" to put the jsx compiled output into somewhere for the iframe src= to \"load\".\n\nI have forked the popular todomvc app and added a few minor edits to recreate, reload, render+unmount x100, destroy everything about the app, and try again in a loop separated by a sleep.\n- https://todomvc.com (todomvc main site)\n- https://github.com/tastejs/todomvc (todomvc github)\n- https://github.com/mP1/todomvc/pull/2 (my fork - with comments and snapshots of chrome dev tools timeline memory graph)\n\nHopefully we can trust the todomvc guys are doing the right thing, no dumb memory leaks. If you examine it should be obvious the only thing im adding is support for my horrible create app, run app, render+unmount many times, render, unmount, sleep a bit and then loop again until counter exhausted.\n\nSorry if this is boring but as a convenience i will list the basic instructions to \"run\" the react version of my branch on your local machines...\n1. clone https://github.com/tastejs/todomvc.git\n2. in the root, run \"gulp\", to compile everything.\n3. run something like \"python -m SimpleHTTPServer\"\n   4A. navigate to http://localhost:8000/examples/react/index.html \n   4B. navigate to http://localhost:8000/examples/react/index3.html\n   // /examples/react corresponds to the dist/examples/react directory that gulp built into.\n\nMy poc supports 3 concepts.\n- re-run todomvc over and over again in \"same\" window.\n- create iframe, load todomvc js in the iframe but render to outer window, unmount, destroy iframe, try 20x\n- create custom element, webcontainer creates iframe and load todomvc js in the iframe but render to outer window, unmount, destroy custom element, try 20x\n\nIf you look at my p/r against todomvc you will see many helpful pictures with memory leak graphs from chrome dev tools for each of the 3 described scenarios and some commentary.\n"},{"labels":[null,"enhancement"],"text":"During mouse move event, 'e.buttons' returns 'undefined' in Safari.  Behaving correctly in Chrome.  While pressing the left mouse button and moving the mouse expect 'e.buttons' to return 1.  'e.nativeEvent.which' returns the correct result on Safari.\n\nSample Code:\n\n``` javascript\nimport React from 'react';\n\nexport default class Canvas extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  mouseDown(e) {\n    console.log(\"mouse down\", e.buttons, e.nativeEvent.which);\n  }\n\n  mouseMove(e) {\n    console.log(\"mouse move\", e.buttons, e.nativeEvent.which);\n  }\n\n  mouseUp(e) {\n    console.log(\"mouse up\", e.buttons, e.nativeEvent.which);\n  }\n\n  render() {\n    var canvasStyle = {\n      backgroundColor: 'rgba(0, 0, 255, 0.5)',\n      position: 'absolute',\n      top: '0px',\n      left: '0px',\n      width: '100%',\n      height: '100%'\n    }\n\n    return (\n      <div>\n        <canvas id=\"canvas\" style={canvasStyle}\n          onMouseDown={this.mouseDown.bind(this)}\n          onMouseMove={this.mouseMove.bind(this)}\n          onMouseUp={this.mouseUp.bind(this)}>\n        </canvas>\n      </div>\n    );\n  }\n}\n```\n\n**Versions**\nReact: 15.1.0\nSafari: 9.1.1 (11601.6.17)\n\n**OS**\nOS X El Capitan Version 10.11.5\n\n**Computer**\nModel Name: MacBook Air\nModel Identifier:   MacBookAir6,2\nProcessor Name: Intel Core i7\nProcessor Speed:    1.7 GHz\nNumber of Processors:   1\nTotal Number of Cores:  2\nL2 Cache (per Core):    256 KB\nL3 Cache:   4 MB\nMemory: 8 GB\n"},{"labels":["enhancement"],"text":"@kittens has expressed concern that people will forget to set the NODE_ENV when building their React application, which will result in babel producing bloated builds, due to our new dev-mode transforms.  The `__source` and `__self` should never be set in production, and having them set on every element would introduce substantial bloat that you wouldn't want in a production environment.  We probably want to be able to warn when this happens.\n\nIn this case, I think we might want to expose `React.mode = __DEV__` or something, such that the transform could add runtime checks to verify that React is in dev mode, and warn if not.  I know we're thinking about switching to real build flags for the various features, and maybe we want to expose all those individual flags.\n\nAnyway, opening the issue so we have a place to discuss and track.\n"},{"labels":["enhancement"],"text":"Sebastian wants to warn when `owner !== __self`, because this is the hard case to find when codemodding from string refs to callback refs.\n"},{"labels":["enhancement"],"text":"I think we should create a test suite that throws errors in different lifecycle methods, and make sure we have relatively sensible invariants as early as possible, preferably with component names.\n#6990 is an example of this, but we’ll keep regressing until we actually test for something like this explicitly.\n\ncc @jingc @yungsters @facebook/react-core \n"},{"labels":[null,"enhancement"],"text":"**Note: This is my personal proposal.**\n**Please don’t announce it anywhere as “React dropping refs!\"** 😄 \n\nHigher order components solve many problems of mixins, however they come with their own problems. The most painful one in my experience is that they hide the ref of the wrapped component, so they can’t be treated as transparent wrappers. This is well described in #4213.\n\nAs we prepare for de-emphasizing `createClass` and mixins I think it’s important that we **treat higher order components as first class pattern in React, and provide full support for it without clashes with existing features**. This means we need to fix refs to work well with higher order components.\n\nIn the community, I see that people embrace stateless functional components even though they don’t have public instances and don’t support refs pointed at them. I think that this is a good indication that refs are moving from being a commonly needed feature to an escape hatch, and so it can be further de-emphasized by becoming opt-in.\n### What Doesn’t Change\n\n`<div ref={...} />` works like before and provides node in a callback.\n`<StatelessFunctionalComponent ref={...} />` works like before and provides `null` in a callback.\n### Classes Opt Into Exposing a Ref\n\nIn the spirit of https://github.com/facebook/react/issues/4213#issuecomment-115019321, I propose that **`this.ref` becomes an opt-in API on every class component.** If you want your components to be “reffable\" (that is, to expose their public instances as refs), you need to manually call it in your constructor:\n\n``` js\nclass MyComponent extends Component {\n  constructor(props) {\n    super(props)\n    this.ref(this) // I'm exposing my public instance!\n  }\n\n  ...\n}\n\n// Will print MyComponent instance\n<MyComponent ref={instance => console.log(instance)} />\n```\n### By Default, Don’t Expose Refs\n\nIf you don’t call `this.ref(this)` during the constructor, React will automatically call it with `null`:\n\n``` js\nclass MyComponent extends Component {\n  ...\n}\n\n// Will print null\n<MyComponent ref={instance => console.log(instance)} />\n```\n\nThis means that by default, class components will act just like functional components. There is no access to the instance unless the class opts in.\n### Automatic Cleanup\n\nIf the class opts in, it only needs to call `this.ref` in the constructor. React will take care of automatically calling it with `null` when the component unmounts.\n### New! Forwarding a Ref to Another Component\n\n**This is the new feature here.**\nSince we opt into refs, we can cleanly support ref forwarding for higher order components:\n\n``` js\nfunction wrap(WrappedComponent) {\n  return class extends Component {\n    ...\n\n    render() {\n      return <WrappedComponent ref={this.ref} />\n    }\n  }\n}\n```\n\nBy passing `ref={this.ref}`, we let `WrappedComponent` supply its own instance, if available. This way the fact that it’s wrapped with a higher order component becomes unobservable.\n\nThis also works fine if you conditionally switch between different components or delay rendering:\n\n``` js\nfunction wrap(WrappedComponent) {\n  return class extends Component {\n    ...\n\n    render() {\n      return this.state.isReady ? <Spinner /> : <WrappedComponent ref={this.ref} />\n    }\n  }\n}\n```\n\nLet’s say `isReady` is `false` initially. React would take care of calling `this.ref(null)` after the constructor ran (since it knows the constructor never called `this.ref(this)`). So initially the parent receives `null`, as expected.\n\nWhen `WrappedComponent` mounts, it will call `this.ref(this)` with its instance, which make it available to the parent. When `WrappedComponent` unmounts, React will call `this.ref(null)` for its instance, cleaning it up again.\n\nThe same works if we alternate between `<WrappedComponent ref={this.ref} />` and `<SomeOtherComponent ref={this.ref} />`.\n### Upsides\n#### Higher Order Components are Unobservable\n\nThis removes a common pain point in that wrapping a component with a HOC changes its public API.\n#### Refs are Further Discouraged\n\nBy making them opt-in, we better signal that you shouldn’t use them for data flow. The component can also be certain that changing or removing an imperative method is not a breaking change because by default it doesn’t expose the ref. If it exposes the ref, this is done intentionally.\n#### Providing Explicit Imperative APIs\n\nThe component may also choose to provide a subset of methods as its public API:\n\n``` js\nclass MyComponent extends Component {\n  constructor(props) {\n    super(props)\n    // I'm exposing just some stuff!\n    this.ref({\n      focus: this.focus.bind(this)\n    })\n  }\n\n  focus() { ... }\n  privateMethodIDontWantAnybodyToCall() { ... }\n}\n```\n\nThis lets the component choose _which_ methods it wants to expose imperatively, and which are still considered implementation details.\n### Downsides\n#### Migration Cost\n\nThis would be an easy enough codemod for most components (just add `this.ref(this)` to any class component). But it’s still a cost considering some of those components are on npm and out of your control. Arguably most third party components don’t provide imperative methods anyway, but this will cause some trouble.\n#### Potential for Misuse\n\nI can imagine people doing `this.ref(this)` and then `<WrappedComponent ref={this.ref} />` in the `render` method. This could get confusing but I don’t see any easy way to prevent or warn about this.\n#### Too Much Freedom\n\nTechnically you’d be able to pass `this.ref(42)`, `this.ref(findDOMNode(this))` or other weird things. Maybe we could limit possible values to React public instances and `null`. On the other hand, the ability to only provide a subset of methods as described in “Providing Explicit Imperative APIs\" seems useful.\n### Other Considerations\n#### `this.props.ref`?\n\nWe could have provided `ref` inside `this.props` as `this.props.ref`. I would argue that we don’t want to do this for two reasons:\n- We want React to still “manage\" it partially by calling `this.ref(null)` when component unmounts. Otherwise it’s too easy to introduce memory leaks. Having magic behavior for one of the props would be unexpected.\n- We don’t want `{...this.props}` to transfer the ref over to the child as that would be unexpected in most cases.\n\n---\n\nWhat do you think?\n\ncc @facebook/react-core \n"},{"labels":[null,"enhancement"],"text":"There's no shortage of places in React where a dev will write something like\n\n```\nonClick={() => this.setBooksSubjects()}\n```\n\nor alternatively \n\n```\nonClick={this.setBooksSubjects.bind(this)}\n```\n\nIt's not ideal to re-create these functions on each render, so the alternative would be some form of auto-binding in the class's constructor, all of which re-create these functions once per instance, and require boilerplate. \n\nI'd love to see the React team add some way of opting in to having a handler `call`ed with the current component set as this.  By \"current component\" I mean the component whose `render` created the element.  I don't know what it should be called, but, for example, if it were called \"ownClick\" it would look like this\n\n```\n   <button ownClick={this.foo}>Click me</button>\n```\n\nAnd so when that button is clicked, `foo` would be called, with the object that owns the `render` method which rendered the button set as `this`.\n"},{"labels":["enhancement"],"text":"I've tested the new Perf tools on one of the screens in one app I'm working on and it works great :)\n\nOne thing I wanted also on the old one Perf tools was to be able to check whether the Perf tools are started or stopped, so basically exposing `ReactDebugTool`'s `isProfiling` variable. My use for that is that I have a keyboard shortcut (in development) bound to start/stop the Perf tools and currently I'm forced to maintain such a variable myself to know whether to start or stop (which gets out of sync if I start/stop the perf tools without the keyboard shortcut).\n\nIf you don't think it's worthwhile to expose `isProfiling` feel free to close this issue.\n"},{"labels":[null,null,"enhancement"],"text":"If set an inline style attribute for a component, such as `backgroundColor: 'yellow'`, and then update the state with a bad value to make the inline style like this `backgroundColor: 'non-exist-color'`. This currently takes no effect on the component, and the backgroundColor will remain yellow. (live example: https://jsfiddle.net/d6me6fca/ )\n\nI suppose this is not the correct behavior, the old value should be override by new value, even the value is non-standard, so it can fallback to use the parent style just like plain HTML. If leave the previous style as is, the behavior of component will lose connection with component state, the style will become chaotic and unpredictable.\n"},{"labels":[null,"enhancement"],"text":"currently it seems synthetic events don't have those properties on mousemove\n"},{"labels":[null,"enhancement"],"text":"Not a _ton_ of browser support for this right now, but it appears to be on the horizon for Webkit. \nhttps://bugs.webkit.org/show_bug.cgi?id=98934\n\nhttp://caniuse.com/#search=datalist\n\nRight now, I'm not getting any DOM events fired from it in Chrome. Wonder if SyntheticEvent could prollyfill. \nhttps://facebook.github.io/react/docs/events.html#form-events\n"},{"labels":[null,null,"enhancement"],"text":"As discussed in #6015, we plan to add a new build configuration that does _not_ have the `__DEV__` overhead but that comes with the new `ReactPerf` enabled.\n\nThis means that developer warnings, etc, will need to be gated by `__DEV__`, but the component tree (#6549) and some other events (e.g. #6612) will need to be gated by `__PROFILE__`.\n\nI’m curious how this could be implemented. Right now our system is simple:\n### Current System\n#### Variables\n- `__DEV__ = (process.env.NODE_ENV !== 'production')`\n#### Development Build (any `NODE_ENV` except `'production'`)\n- `__DEV__` is `true`\n#### Production Build (`NODE_ENV` is `'production'`)\n- `__DEV__` is `false`\n\nAs you can see, if `process.env.NODE_ENV` is omitted, we assume `__DEV__` mode. This is a sensible assumption, and not the one we want to change, as most projects today don’t specify anything as `NODE_ENV` in development, and we don’t want them to suddenly lose all developer warnings.\n\nTherefore, I propose the following new system:\n### Proposed System\n#### Variables\n- `__DEV__ = (process.env.NODE_ENV !== 'profile' && process.env.NODE_ENV !== 'production')`\n- `__PROFILE__ = (process.env.NODE_ENV === 'profile'`)\n#### Development Build (any `NODE_ENV` except `'profile'` or `'production'`)\n- `__DEV__` is `true`\n- `__PROFILE__` is `true`\n#### Profile Build (`NODE_ENV` is `'profile'`)\n- `__DEV__` is `false`\n- `__PROFILE__` is `true`\n#### Production Build (`NODE_ENV` is `'production'`)\n- `__DEV__` is `false`\n- `__PROFILE__` is `false`\n\nThis would let us have three separate build configurations. We can use the same pattern in other `fbjs` projects as well, if desired. I would say it’s unlikely we’d ever want to add a separate fourth configuration so this should cover all our needs.\n\nAny thoughts why this would be a bad idea? Should I implement this in `fbjs`?\n\ncc @facebook/react-core \n"},{"labels":[null,null,"enhancement"],"text":"As per my chat [here](https://twitter.com/nickdima/status/723904527083147264) with @gaearon I'm filing an issue to discuss this further.\n\nI would like to avoid a specific element that I rendered on the server from beeing further updated by react once it reaches the client.\nOne specific use case is rendering ad server tags that are kind of a pain in the ars, using things like `document.write`, etc. I render them using `dangerouslySetInnerHTML` but sometimes when React is doing the reconciliation client side they get re-render so they stop executing. Now I managed to track down some of these cases by fixing render differences between server and client which would trigger DOM patching but it still seems to happen.\nAny advice?\n"},{"labels":["enhancement"],"text":"This has come up a couple times lately as being an issue (#6479, #6581, #6511), I think perhaps because we added the minification warning and people are ending up seeing they aren't getting prod code when they expected it. But there's also the argument that you want React to be production and still use NODE_ENV for other purposes.\n\nThere would be a few things to figure out to make sure envify works, and deciding what we do for other projects which currently also use the NODE_ENV pattern (eg, Relay, fbjs, third-party code, etc).\n\nThis might not be a good idea at all though and definitely isn't happening immediately, but wanted to start the discussion.\n"},{"labels":[null,null,"enhancement"],"text":"As per the discussion today...\n\nSometimes you are developing on a platform that doesn't have devtools (safari, etc).  The problem is that you are looking at a whole pile of markup, and can't tell which components rendered it.  Without devtools, the output markup is really hard to navigate.  It would be cool if we had comment nodes (or a `data-reactcomponent` attribute) that helps users navigate the output.\n\nThese nodes would be rendered only in dev mode or with some flag turned on or something.\n"},{"labels":[null,"enhancement"],"text":"At the moment, it is quite cumbersome to work with promises in React. Either you write a lot of code to update the state inside the `then()` callbacks or you use a library like [react-promise](https://www.npmjs.com/package/react-promise) which only works for children (not properties) because it is based on components.\n\nAnother option is to traverse the whole virtual dom and replace promises before they are passed to React. (I have read once a blog post about this but cannot find it any longer.) This is obviously not ideal for the rendering performance.\n\nSince promises are now a standard, I think there should be simpler way to use them directly in the view. One option would be to introduce an AsyncValue type with a Promise implementation. The AsyncValue type would then be supported for children as well as properties.\n\nPromises could then simply be used like this:\n\n``` javascript\n<div>{promise(this.state.myPromise)}</div>\n```\n\nOpposed to supporting promises everywhere (directly without the promise function), this should not have unexpected side effects. Moreover, other types of asynchronous values (for example Observables) could be added later easily just by creating another AsyncType implementation.\n\nAngular 2 takes a similar route with the [async pipe](https://angular.io/docs/ts/latest/guide/pipes.html#!#the-impure-asyncpipe-). There you can simply write \n\n``` javascript\n{{ myPromise | async }}\n```\n\nin attributes as well as normal content.\n\nThis feature would also be very convinient for libraries like Flux because it allows to fetch properties directly inside the view and avoids the reptition which you have with Relay:\n\n``` javascript\n<div>{promise(this.state.model.get('property'))}</div>\n```\n\nWhat do you think about this proposal?\nHas this been discussed before? I couldn't find a thread which covers this particular topic.\n"},{"labels":[null,"enhancement"],"text":"I've been using the \"string\" hack to override CSS values in React components.\n\nFor example, if you want to have `display` with different values, you do\n\n```\nstyleObj.display = '-webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;display: flex';\n```\n\nI have an npm module for poly-filling my styles in my React components.\nhttps://www.npmjs.com/package/poly-style\n\nAll of that worked perfectly in v0.14. No warnings no nothing.\nUpdated to v15.0 today, and everything is breaking.\na) Normally there are deprecation warnings. I didn't notice any warnings on that change.\nb) in the changelog I cannot see anything related to that, to understand what changed.\n\nAm I missing something?\n"},{"labels":[null,null,null,"enhancement"],"text":"https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n\nIt would be good to have everything be passive by default and only opt-in to active when needed. E.g. you could listen to text input events but only preventDefault or used controlled behavior when you have active listeners.\n\nSimilarly, we could unify this with React Native's threading model. E.g. one thing we could do there is synchronously block the UI thread when there are active listeners such as handling keystrokes.\n\ncc @vjeux @ide\n"},{"labels":[null,"enhancement"],"text":"It would be great if it was possible to run some code after the component actually unmounted. This is useful where you consider the following:\n\n```\ncomponent Parent {\n    has service Service\n    has child Child\n\n    componentWillUnmount: {\n         destroys Service\n    }\n\n    render: {\n         Service gets passed to Child as prop\n    }\n}\n\ncomponent Child {\n    componentWillMount: {\n         starts listening to Service\n    }\n\n    componentWillUnmount: {\n         stops listening to Service\n    }\n}\n\n```\n\nThe above will throw exception during Child componentWillUnmount since Parent gets unmounted first so Service is already destroyed.\n\nIf there existed componentDidUnmount the Service can be destroyed after the children are unmounted, i.e.\n\n```\ncomponent Parent {\n    has service Service\n    has child Child\n\n    componentDidUnmount: {\n         destroys Service\n    }\n\n    render: {\n         Service gets passed to Child as prop\n    }\n}\n\ncomponent Child {\n    componentWillMount: {\n         starts listening to Service\n    }\n\n    componentWillUnmount: {\n         stops listening to Service\n    }\n}\n\n```\n"},{"labels":[null,"enhancement"],"text":"CSS variables is now supported in Chromium, which we use for rendering. They enable us to write cleaner, more flexible code. Sadly, I cannot seem to use them in React without resorting to various tricks. Ideally, I would like to be able to use them like `<div style={{\"--color\": \"hotpink\"}} />`, which would make the variable available inside the scope of the div.\n\nI am able to add them using the following syntax `<div style={{[\"--color\"]: \"hotpink\"}} />`, but then they aren't updated if I try assigning a new value—which ruins much of the point of using a variable.\n\nI am able to add and remove them using ReactDOM and `ReactDOM.findDOMNode(this).style.setProperty(\"--color\", \"hotpink\")`, but that gets it out of sync with the DOM updates, in addition to not being pretty.\n\nIf there are any questions on the usefulness of CSS variables I'll be more than happy to explain.\n"},{"labels":[null,null,"enhancement"],"text":"Like mouse enter/leave, these are almost always what you want, not the `onFocus` and `onBlur` events we currently expose. I run into this semi-frequently when actually doing product work. We should add them.\n"},{"labels":[null,null,"enhancement"],"text":"The use case is for example, translation components rendering string content.\n\nThe HTML spec has some unfortunate attributes that behave kind of like content. It seems like they should be able to accept React elements. If I were to design a similar React component I would allow it to accept React elements.\n\nSince we normalize usage we could in theory have it built-in to React that certain attributes like `placeholder`, `aria-label`, etc. could accept React components that render into strings.\n\nThat would probably have to go in after we figure out a way to render strings at the root of a React composite component.\n"},{"labels":[null,"enhancement"],"text":"It would be nice to be able to do the equivalent of `<div>{document.createElement('div')}</div>`. It seems entirely doable now with our new fancy renderer I think? Obviously it wouldn't be supported for SSR though so you would have to provide your own fallback if necessary.\n"},{"labels":[null,"enhancement"],"text":"I think many people agree that the `dangerouslySetInnerHTML={{ __html: ... }}` api is gross even though there is great reasoning behind it.\n\nI have a few issues with it beyond it's verbosity that I think could be added as static method on the react class.\n#### My Issues with `dangerouslySetInnerHTML`:\n\n1) Verbose and not always dangerous.\n2) Can't mix safe and unsafe html.\n3) Can't mix html with react elements.\n4) Have to manually concat html strings.\n\n---\n\nA better solution would be to provide a way to mark html as \"safe\".\n\n``` js\nvar React = require(\"react\");\n\n// Use #markSafe method to bypass reacts automatic html escaping.\nvar myReactEl = <div>{ React.markSafe(\"<br/>\") }</div>;\n```\n\nThis is still explicitly telling react that we trust the html but solves all of the problems above.\n\n``` js\n// Mixing safe and unsafe html.\n(\n    <div>\n        { React.markSafe(\"<br/>\") }\n        { \"<br/>\" }\n    </div>\n);\n\n// Mixing html with react elements.\n(\n    <div>\n        { React.markSafe(\"<br/>\") }\n        <span>Hello!</span>\n    </div>\n);\n\n// Multiple innerHTML sets.\n(\n    <div>\n        { React.markSafe(\"<br/>\") }\n        { React.markSafe(\"<hr/>\") }\n    </div>\n);\n```\n\nI think this api would be much friendlier than the current html api and probably wouldn't even require a major version bump.\n\nThoughts?\n"},{"labels":[null,null,"enhancement"],"text":"After staring at the confusing mess that is the synthetic event system today and talking with @sebmarkbage, we're no longer confident that we need the pooling that the system currently uses. GCs have gotten pretty good so we may be experiencing diminishing returns at this point, or maybe losing out on some benefits. We do have to consider that we still support some older browsers who's GCs don't have the benefit of the last several years worth of innovations so it might be premature, but it's probably worth investigating.\n"},{"labels":[null,"enhancement"],"text":"``` js\nconst Foo = ({ onAction }) => <div onClick={onAction} />;\nFoo.propTypes = {\n  onAction: PropTypes.function\n};\n\nconst Bar = () => <Foo onaction={() => console.log('action')} />; // This should warn\n```\n\nWe currently don't warn for properties that don't exist in the `propTypes` set. I.e. we don't catch typos. This is mostly a legacy artifact and there are many components out there that don't define their full set of props. E.g. when `...` spread is used. Few components also define the `children` prop even though they use it. Warning for all of these might be too much work initially.\n\nHowever, we can start small. We can find missing properties that have corresponding properties with a different case and suggest that the developer use that instead. This is essentially always a bug.\n\nWhile it is technically possible to have the same property name with two or more different case, it is considered bad practice to allow both. It causes overhead to test for both in the diffing/rendering. It causes style-guide issues where people have to pick which style to use. It also makes it worth for tooling where search/replace can easily miss less commonly used variants. That's why React only allows a single case, and ideally so should custom components.\n"},{"labels":[null,null,null,"enhancement"],"text":"Unmounting can take significant and unbounded time when we traverse the tree and call the life-cycles. This is the smallest problem of incremental reconciliation (out of: mount at arbitrary location > update a boundary > mount a boundary > unmount).\n\nThe theory is that we can remove the node from the tree first and then call the life-cycles later on during idle time. This means that the refs won't have access to nodes that are in the document anymore so reading any such information would no longer work.\n\nThis problem space might also be related to animations. Exit animations want a component/node to exist in the tree for as long as it needs to finish its animation offscreen, asynchronously get deleted from the tree and eventually get cleaned up by calling the unmount life-cycles.\n"},{"labels":["enhancement"],"text":"React should provide a way for us to register a last-chance exception handler for errors thrown in React event handlers. We have last-chance exception handlers registered for our other event-handling frameworks and this has proved extremely useful for making us aware of unexpected error conditions.\n"},{"labels":["enhancement"],"text":"we have tests that insure that prerendering = client rendering.\n\nRight now its a real cludge - we override console.warn, and watch to see if any checksum warnings are output.\n\nInstead how about adding data-checksum_invalid to the outer element?  \n"},{"labels":["enhancement"],"text":"Is it possible to use React inline styles with ReactCSSTransitionGroup? If so, how?\n\nI have tried, and this doesn't seem to work (React v. 0.14.6):\n\n```\nvar tstyle = {\n  'enter': {\n    visibility: 'hidden',\n    transform: 'translate3d(100%,0,0)'\n  },\n  'leave': {\n    visibility: 'visible',\n    transform: 'translate3d(0,0,0)'\n  },\n  'enterActive': {\n    visibility: 'visible',\n    transform: 'translate3d(0,0,0)',\n    transition: 'all 0.4s'\n  },\n  'leaveActive': {\n    visibility: 'hidden',\n    transform: 'translate3d(100%,0,0)',\n    transition: 'all 0.4s'\n  }\n}\n```\n\nIn render():\n\n```\n    <ReactCSSTransitionGroup\n      style={tstyle}\n      transitionName={ {\n        enter: 'enter',\n        enterActive: 'enterActive',\n        leave: 'leave',\n        leaveActive: 'leaveActive',\n        appear: 'appear',\n        appearActive: 'appearActive'\n      } }\n      transitionEnterTimeout={400}\n      transitionLeaveTimeout={400}>\n      {this.props.notifications.map((notification, index) => {\n        return <Notification\n                key={index}\n                type={notification.type}\n                message={notification.message}\n                timeout={10000}\n                remove={this.props.actions.removeNotification} />\n      })}\n    </ReactCSSTransitionGroup>\n```\n"},{"labels":[null,"enhancement"],"text":"Howdy ya'll,\n\n**tl dr: please provide a way to coordinate pseudo-random identifiers across the client and server**\n\nThis issue has been discussed a bit before (#1137, #4000) but I continually run into this issue, trying to build libraries that provide accessible components _by default_. The react component model generally speaking offers a big opportunity to raise the often low bar for accessibility in the library and widget world, see experiments like @ryanflorence's react-a11y. \n\nFor better or for worse the aria, and a11y API's in the browser are heavily based on using ID's to link components together. `aria-labelledby`, `aria-describedby`, `aria-owns`,`aria-activedescendent`, and so on all need's ID's. In a different world we would just generate ids where needed and move on, however server-side rendering makes that complicated, because any generated ID is going to cause a mismatch between client/server.\n\nWe've tried a few different approaches to address some of this, one is making id's required props on components that need them. That gets kinda ugly in components that need a few id's but moreso it annoys users. Its unfortunate because if we could generate deterministic id's we could just provide more accessible components by default.\n\nThe frustrating part is that the component generally has all the information it needs to just set the various aria info necessary to make the component usable with a screen reader, but are stymied by not having the user provide a bunch of globally unique ids'\n\nSo far only really reasonable approaches I've seen are @syranide's solution of a root ID store, and using `_rootID`. The latter obviously has problems. The former doesn't scale well for library authors. Everyones' root App component is already wrapped in a Router, Provider, etc, having every library use their own root level ID provider is probably not super feasible and annoying to users.\n\nIt seems like the best way to do this would be if React (or a React addon) could just provide a consistent first class way to get a unique identifier for a component, even if it is just a base64 of the node's _rootID.\n\nthanks for all the hard work everyone!\n"},{"labels":[null,null,"enhancement"],"text":"The `onSelect` event does not fire while the user is dragging the mouse, only after they release. It would be nice to have an event that fired immediately whenever the selection changed, including while dragging the mouse. This is useful, for example, when syncing selections between multiple collaborators, ala google docs.\n\nThe native [selectionchange](https://developer.mozilla.org/en-US/docs/Web/Events/selectionchange) event is supported cross browser, way back in IE, Chrome, and Safari, and recently in Firefox 43. Is this something React could polyfill and expose to components?\n"},{"labels":["enhancement"],"text":"React components could use some way to dynamically add a handler to be called on unmount. Either some event handler like way (`this.addUnmountHandler`) or some other way to register a 'destructor'/destroy method for an object that a component is holding on to.\n\n`componentWillUnmount` exists but it does not scale well.\n- Every time you hold on to something you have to maintain two sections of code, with the cleanup code being separate from the rest of the code.\n- If you try to cleanup your code using helpers adding the cleanup code could be done in the very same function. But `componentWillUnmount` doesn't allow that.\n- Sometimes you end up adding a `this._fooSomethingProp` to a component you wouldn't normally need, just so that you can hold on to the destructor for use in `componentWillUnmount` because you can't add the cleanup code in the same closure you set it up in.\n\n---\n\nHere's one sample use case of mine for unmount handlers.\n\nReact is discouraging the use of mixins so I've been trying to move towards alternative patterns in new code. Some helpers only make sense on a component itself and wont work as a special component or a higher-order component.\n\nFor some of these needs I've come up with a pattern that involves passing the component to a helper function that will mutate the component and provide some sort of service which is linked to the component.\n\nTwo examples from my codebase:\n\n`ctxApi` provides a component with a version of my internal api which is 'scoped' to the component so that if the component is unmounted all of the api requests' HTTP requests are aborted.\n\n`setPending` adds a key to a pending state set and returns a `pending.cleanup` that will unset it, which is intended to be passed to a `.finally` handler. This pattern provides my buttons, etc... with pending text and spinners while waiting for HTTP requests.\n\n``` js\nresendConfirmation(email) {\n    var pending = setPending(this, `${email}:resendConfirmation`);\n\n    ctxApi(this)\n        .then((api) => api.post('/self/resendConfirmationEmail', {email}))\n        .then(() => alertifyjs.notify(\"Confirmation message sent\"))\n        .fin(pending.cleanup)\n        .catch(ignoreAbort)\n        .catch(notifyOnError)\n        .done();\n}\n```\n\nThe problem is that these helpers often need cleanup on unmount. `ctxApi` needs to abort requests on unmount. And `setPending` needs to break references so `setState` isn't called and it doesn't prevent gc. And while I can require that a call to a cleanup function be placed into `componentWillUnmount`. That is unnecessary boilerplate and easy to forget.\n\nIt would be much preferable for these helpers to be able to register an unmount handler on the component instance so they can implicitly clean themselves up.\n"},{"labels":[null,"enhancement"],"text":"As per comments from @samwgoldman in the following issue, the flow built-in react type definitions are lagging behind and the recommendation is that the definitions be included and maintained in the react repo itself: \n\nhttps://github.com/facebook/flow/issues/1081\n\nThe flow maintainers are doing an excellent job of implementing new JS syntax/features. It would be great if they did not also need to maintain this file:\n\nhttps://github.com/facebook/flow/blob/master/lib/react.js\n\nOne could, of course, also relegate this definition to yet another repo.\n"},{"labels":[null,"enhancement"],"text":"You have a warning in React if you call setState() from within a render method, with the check `ReactCurrentOwner.current == null`. I would like to add this check to other methods of my project because they also trigger rerender or are too expensive.\nThe issue I have is that ReactCurrentOwner is not exposed by React, so how can I achieve that? The current solution I have in mind is to check from the stack trace but that's a lot more expensive than your check so I would prefer if there was something equivalent to your code but from outside React.\n"},{"labels":[null,"enhancement"],"text":"I'm aware of the [Iterable support for children](https://jsfiddle.net/aneo4nhk/), but is there any timetable for supporting [KeyedIterable](https://facebook.github.io/immutable-js/docs/#/KeyedIterable) from Immutable.js, specifically for [automatically providing keys to children](https://github.com/facebook/react/blob/ac5e5d789f022f0d13107e54653f13a8ede0330b/src/shared/utils/traverseAllChildren.js#L154-L159)?\n\nSample use case:\n\n``` js\nvar myItems = Immutable.Map({ // extends KeyedIterable\n  one: 111,\n  two: 222\n});\nvar renderedItems = (\n  <ul>{myItems.map(item => (\n    <li>{item}</li>\n  ))}</ul>\n);\n```\n\nThat is, the first item would end up the equivalent of `<li key=\"one\">111</li>`.\n\nIf such support isn't on the roadmap, can I somehow avoid having to use `React.cloneElement()` (which will have performance implications) if I write a helper function that does this?\n"},{"labels":[null,"enhancement"],"text":"See this https://github.com/babel/babel/issues/2517 and the associated discussion around the PR https://github.com/babel/babel/pull/2518, which I don't expect to be merged due to loader issues.\n\nTo recap: \n\nThe `inlineElements` optimization requires brittle knowledge of internal React values, namely, `$$typeof`. This breaks on older browsers unless the developer globally polyfills `Symbol`, because `Symbol` will be polyfilled automatically by Babel in the user's code, but will not be polyfilled in the React library. This causes `ReactElement.isValidElement` to fail as `Symbol.for('react.element') !== 0xeac7`.\n\nWorse, this bug only occurs in older browsers that don't implement Symbol, meaning that many devs won't catch it right away as it will work fine in FF, Chrome, and (latest) Safari.\n\nThis is a hard issue to fix without globally polyfilling Symbol or giving up on the use of `Symbol` for `$$typeof`. Babel could automatically this as part of enabling the optimisation, but @loganfsmyth had a better idea - how about a `React.elementFromObject()` API?\n\nThis function would be nothing more than:\n\n``` js\nReact.elementFromObject = function(obj) {\n  invariant(obj && typeof obj === 'object', \"Supply an object to React.elementFromObject.\");\n  obj.$$typeof = REACT_ELEMENT_TYPE;\n  return obj;\n}\n```\n\nThis ensures that the `REACT_ELEMENT_TYPE` we are using is equal to the one used in `ReactElement.isValidElement`. It shouldn't be necessary to do any validation in `elementFromObject` because it will be caught by `isValidElement` later on.\n\nThoughts?\n"},{"labels":[null,null,"enhancement"],"text":"Also, it should be possible to specify a component that sets the children attribute and the components child nodes independently.\n\nexample:\n\n```\n<my-web-component children=\"2\">\n    <div>myChild</div>\n    <div>myOtherChild</div>\n</my-web-component>\n```\n\nThis is related to (a superset of) https://github.com/facebook/react/issues/5088.  This might be another motivation to reconsider #4694, which I've wanted for a while.\n"},{"labels":[null,null,"enhancement"],"text":"Proposal: New life-cycle that fires after `componentDidMount` and after the event-loop has returned but before any other reconciliation has started.\n\nEffectively, this give you a `componentDidMount` that doesn't block the visual output. It could be a good place to set up timers, subscriptions etc.\n"},{"labels":[null,"enhancement"],"text":"I originally left a comment in #4936, but I felt this might be better as a separate issue.\n\n> I completely agree with the rationale behind no backing instances and no refs for stateless components. I want to use pure stateless components as much as possible.\n> \n> However, I'm running into instances where testing stateless components gets tricky. For the most part, using the shallow renderer to render a stateless component has been fine. I can then make assertions on expected props and children. To reduce the duplication, I abstract out the shallow renderer process to a helper function.\n> \n> When, I want to test events, though, I have to take a different route. If my component takes an `onClick` prop, then I wrap it in a class component, so I can access the DOM node to simulate my click event. Again, this isn't a huge deal because I can abstract out the wrap/render process into a helper function.\n> \n> I bring all this up because I feel that it would be nice to have better facilities in `TestUtils` for stateless components. I don't think the answer is allowing `ReactDOM.findDOMNode` to work on stateless components because that opens up it to abuse in normal application code. Are you open to allowing extra functions in `TestUtils` to simplify the process of testing stateless components? Or am I creating a code smell in my testing?\n> \n> I'd be happy to create a PR for `TestUtils` if you think some more helper functions for stateless components would be beneficial.\n"},{"labels":[null,"enhancement"],"text":"Currently I am implementing some `Dropdown` component and I have something like this.\n\n``` jsx\nreturn (\n  <div className={classnames(classes)} tabIndex=\"-1\">\n    {Children.map(children, this.render_child)}\n  </div>\n)\n\n...\n\n@autobind\nrender_child(element, index) {\n  return cloneElement(element, {\n    key: element.key || index,\n    selected: this.props.selected,\n    onClick: this.click_handler\n  })\n}\n```\n\nThe business requirement put me in this situation. I created the list of item of the `Dropdown` component.\n\n``` jsx\n// this is using map from some array so I will return an array.\nrender_menu_item(key) {\n  if(!key) { //whatever checking\n    return\n  }\n\n  return (\n    <MenuItem value={key}>{text}</MenuItem>\n  )\n}\n```\n\nNow, because I use `element.key` in some case `element` could be `null` so give me an error. I propose to remove the `null` or `undefined` from the `Children.map` because then I will be filtering all the time the `null` values whenever I have this situation. \n\nI understand I can `forEach` but I think is not the best implementation, in the end you change the `map` function alright so\n"},{"labels":["enhancement"],"text":"well, react is very good, i like it,but i have some question, and it's time to fixed.\n1.why support style object\n\n``` javascript\nstyle={color: 'white',backgroundImage: 'url(' + imgUrl + ')'} \n```\n\nbut not support className, i think className should support string,array,object,there has a classname repertory.i just want to write code like this:\n\n``` javascript\n<div className={['button','icon-red']}></div>\n<div className={{opened:true,cloth:'red'}}></div>\n<div className={'button',{opened:true,cloth:'red'}}></div>\n//not\nvar className = react.addons.className;\nvar someVar = className({  //that is puzzled i think\nopened:true,\ncloth:'red'\n});\n<div className={someVar}>  \n```\n\nor will it be support in the feture?\n"},{"labels":[null,"enhancement"],"text":"We have a few use cases that we support which shouldn't rely on `document` or other DOM specific globals to be available.\n- Shallow Rendering\n- Worker Renderers (e.g. react-native like environments)\n- Server Rendering (setState etc shouldn't look for document)\n\nUnfortunately we often screw this up. Which leads to work arounds:\n- https://github.com/gaearon/library-boilerplate/pull/6\n- https://github.com/facebook/react-native/blob/master/Libraries/JavaScriptAppEngine/polyfills/document.js#L28\n- https://github.com/facebook/react/issues/3620\n\nPart of the problem is that jest comes with JSDOM always on. We need to have a test environment that allow us to execute in a DOM-less environment.\n\nWe also need to add separate unit tests for these three test cases that execute in a DOM-less environment.\n\nWe could potentially add a lint rule against using globals in files in the `shared` folder.\n\nWe should also get rid of all uses of `canUseDOM` since it varies by render tree, not environment.\n"},{"labels":["enhancement"],"text":"Short:\n\n`propTypes` should accept `React.PropTypes.shape` object as valid declaration of `propTypes`.\n\n``` js\nimport React from 'react';\n\nexport default class extends React.Component {\n    static propTypes = React.PropTypes.shape({});\n\n    // ...\n```\n\nMore:\n\nI have a file called `shapes.js` that defines all shapes used in the project, e.g.\n\n``` js\nimport {\n    PropTypes\n} from 'react';\n\nexport let screeningShapeDefinition = {\n    id: PropTypes.number.isRequired,\n    timestamp: PropTypes.number.isRequired,\n    url: PropTypes.string.isRequired,\n    position: PropTypes.number.isRequired\n};\n\nexport let screeningListShapeDefinition = {\n    size: PropTypes.number.isRequired,\n    screenings: PropTypes.arrayOf(PropTypes.shape(screeningShapeDefinition)).isRequired\n};\n```\n\n, which I use in modules as such:\n\n``` js\nimport React from 'react';\nimport moment from 'moment';\n\nimport {\n    screeningShapeDefinition\n} from './../../shapes';\n\nexport default class extends React.Component {\n    static propTypes = screeningShapeDefinition;\n\n    // ...\n```\n\nThere is a slight leaking:\n- I have to cast my shape definition object to `React.PropTypes.shape` when defining relations in the shapes definition file.\n\nIf `propTypes` (component definition property) supported `React.PropTypes.shape` as a valid input, I could avoid the leaking:\n\n``` js\nimport React from 'react';\nimport moment from 'moment';\n\nimport {\n    screeningShape\n} from './../../shapes';\n\nexport default class extends React.Component {\n    static propTypes = screeningShape;\n\n    // ...\n```\n\n``` js\nimport {\n    PropTypes\n} from 'react';\n\nexport let screeningShape = PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    timestamp: PropTypes.number.isRequired,\n    url: PropTypes.string.isRequired,\n    position: PropTypes.number.isRequired\n});\n\nexport let screeningListShape = PropTypes.shape({\n    size: PropTypes.number.isRequired,\n    screenings: PropTypes.arrayOf(screeningShape).isRequired\n});\n```\n"},{"labels":[null,null,"enhancement"],"text":"Although `node.style.WebkitTransform` (PascalCase) does work in Safari, the actual property is `node.style.webkitTransform` (camelCase) which React doesn't support properly. Can an alias be added to handle this case, since it doesn't seem obvious?\n\nIn fact, Safari's inspector autocomplete doesn't even work for `node.style.WebkitTransform` - seems like it's a hack that it works.\n"},{"labels":[null,null,null,"enhancement"],"text":"**Problem:** I have DOM Elements outside of main DOM Document, where I want to render my React components. When done, some of the original elements will be mounted into main DOM Document. I need to delay `componentDidMount` and schedule it after components are inside main DOM Document.\n\n**Reason:** Mainly because I have some logic inside `componentDidMount` that works with offsets of Element (e.g. controls lazy loading of images). When invoked in seperate DOM, component have wrong idea about where it is on screen.\n\nIs it possible with current version of React (or 0.14) to achieve behaviour, where componentDidMount transaction is invoked later, after I give a signal to root Component? Or will future refactoring allow this use case?\n"},{"labels":[null,null,"enhancement"],"text":"I'd like to configure my testsuite to fail if there are any react warnings triggered.\n\nI'm currently using a variant on this SO answer http://stackoverflow.com/questions/29651950/karma-and-react-have-warnings-to-cause-errors\n\n``` js\nconsole.warn = (function(warn) {\n  return function(msg) {\n\n    // Detect react warnings & error\n    if (/^Warning: /.test(msg)) {\n      throw new Error(\"React \" + msg);\n    }\n\n    return warn.apply(this, arguments);\n  };\n})(console.warn);\n```\n\nThis basically works, but has a problem because there's some global-state memoisation in the code which triggers warning to try not to trigger too often:\nhttps://github.com/facebook/react/blob/500d4c3f8779bce7c7dde129eb2fec9e901cf5ae/src/isomorphic/classic/element/ReactElementValidator.js#L46\n\nCould we provide a way to clear this state, or even better a supported API for opt-in erroring on warnings?\n"},{"labels":[null,null,null,"enhancement"],"text":"Consider the following scenario (or [run it](https://github.com/d4goxn/iso-form-issue-repro)), in a simple isomorphic app that consists of a single-input form.\n1. A form is rendered on the server with existing data and sent to the browser, along with dehydrated state\n2. The user edits the form\n3. The browser loads the app, slowly, which rehydrates its state and bootstraps over the form\n4. The user hits a save button\n\nAt this point, React has found no reason to rerender the form or throw a warning, even though the values of the form elements have been updated by the user before the app was listening to them. As a result, app state is out of sync with form input values. The user has just re-saved their old data (app state), but sees their new data (form values). If they leave, they lose their changes even though it appears that they just successfully saved.\n\nI have decided to solve the problem by putting a ref on every form input, and copying their values into app state on `componentDidMount`. I can probably make the solution a little more DRY than that sounds at first.\n\nI'm thinking that a better solution might be to have React include input values in the checksums. Is there a technical reason why this is not how isomorphic rendering already works?\n"},{"labels":[null,null,"enhancement"],"text":"For 0.14 we'd like a feature that allows us to forward refs or define what the public instance of a component should be. That way we can make higher order components that are completely transparent.\n"},{"labels":[null,null,"enhancement"],"text":"Because React has repurposed `onChange` to behave like `onInput` there is no way to get actual `change` event behaviour without binding a non-delegated native event in lifecycle events.\n\n`change` event behaviour is sometimes important to have. `input`-like behaviour does make sense for what React uses `onChange` for (live updating of state associated with `value=\"\"` and anything derived from it). But other use cases, like triggering an ajax post once a user has finished with an input, require the standard behaviour of `change` for text inputs where it is only fired after a user is finished with the input.\n\nThese use cases are reasonable to support within React. If `onChange` is going to be changed to behave in a non-standard way. Then we should add another custom non-standard event name that lets React elements bind to behaviour that is closer to how `change` behaves (with React's event delegation handling).\n\nEvent name ideas:\n- onChangeCommit(ted)\n- onCommit(ted)Change\n- onValueCommit(ted)\n- onCommitValue\n- onCommit?\n\nThe idea of using \"commit\" in the name comes from the HTML spec.\n\n> The change event fires when the value is committed, _[...]_\n\n~ Section [4.10.5.5 Common event behaviours](https://html.spec.whatwg.org/multipage/forms.html#event-input-input)\n"},{"labels":[null,null,"enhancement"],"text":"When writing a component that contains a set of large subtrees that stay relatively the same, but are simply moved around such that React's virtual DOM diffing can't detect the movement, React will end up recreating huge trees it should simply be moving.\n\nFor example, pretend `blockA` and `blockB` are very large structures. They may be made of several levels of children and components. For example one could be the entire page contents and the other the sidebar, while this `render()` is the page root.\n\n``` jsx\nrender() {\n    var blockA = <div>AAA</div>,\n        blockB = <div>BBB</div>;\n\n    if ( this.props.layoutA ) {\n        return <div>\n            <div className=\"something\">{blockB}</div>\n            <div className=\"something\">{blockA}</div>\n        </div>;\n    } else {\n        return <div>\n            {blockA}\n            {blockB}\n        </div>;\n    }\n}\n```\n\nBecause the blocks aren't at the same level React cannot see the relation between these blocks and `key` cannot be used to give React any hints. As a result, when `layoutA` is changed, instead of the two blocks being moved to their new location the entire page is essentially completely unrendered and then re-rendered from scratch.\n\nI understand why this is the case. It would be far to expensive for React to be able to detect movement of nodes like this.\n\nBut I do believe we need a pattern to hint to React that this component has large blocks that may be moved around at different levels.\n\nNote that there may be a component in between the rendering component root and the block. So parent semantics scoped to the nearest component won't work. This'll need owner scoping.\n\nI understand that React is trying to eliminate the need for React.createElement to be used and owner scoping within special attributes interferes with that. So instead of a component scoped `key=\"\"` variant I think a method/object style interface kind of like `React.addons.createFragment` might work.\n"},{"labels":[null,"enhancement"],"text":"I have React DevTools downloaded and enabled as a Chrome extension, version 0.13.1. I am using the `react` npm package, version 0.12.2, in a Chrome extension that is browserified. \r\n\r\nEvery time I open my console, the console log: \"Download the React DevTools for a better development experience: http://fb.me/react-devtools\" is there. \r\n\r\nWhat can I do to remove this? \r\n\r\n### Update from maintainers: see solution in https://github.com/facebook/react/issues/3877#issuecomment-341857218."},{"labels":[null,"enhancement"],"text":"On the client, it's nice that development warnings are only triggered on the initial render. But, when rendering from the server with `renderToString` it's annoying to only have the warnings triggered the first render and then ignored on subsequent page loads. \n\nWhat if render methods accepted an additional options argument?\n\n``` js\nReact.render(<span>hi</span>, window.app, {alwaysWarn: false})\n\nReact.renderToString(React.createElement(El, data), {alwaysWarn: true})\n```\n\nCrazy ideas: This might be useful for other options too? Perhaps: `appendToBody` (auto-appends the second arg), or `ignoreDOMCalls` (automatically catches/ignores errors to for `window` and `document` APIs)?\n"},{"labels":["enhancement"],"text":"For 300ms click delay problem, I need attach four events to a element (onClick onTouchStart onTouchMove onTouchEnd) .It makes a bit tedious that there are so many elements to be clickable.\n\nI can create a element, maybe named `<Tap />`, and receive property ontap and attache four events to the element to implement tap event. But I think it is bad for semantic, tap is a action.\n\nSo, the question is how I can extend HTML tag like div, a, em to support tap event, do you have any other ideas for this problem?\n\nThanks.\n"},{"labels":[null,null,"enhancement"],"text":"Hi,\n\nHere is my program ([jsfiddle](http://jsfiddle.net/w9dphLfc/2/)):\n\n``` jsx\nvar Input = React.createClass({\n    render: function() {\n        return (\n            <input \n                {...this.props}\n            />\n        );\n    }\n});\n\nvar TestUtils = React.addons.TestUtils;\nvar inputInstance = \n        TestUtils.renderIntoDocument(\n            <Input\n                value='abc'\n            />\n        );\n\nvar inputDOMNode = React.findDOMNode(inputInstance);\n\ninputDOMNode.focus();\n\n// Place cursor at the end.\ninputDOMNode.setSelectionRange(3, 3);\n\n// Should log 3 twice.\nconsole.log(inputDOMNode.selectionStart);\nconsole.log(inputDOMNode.selectionEnd);\n```\n\n**Problem**: `0` is logged twice in Chrome and Firefox.\n**What I expected**: `3` is logged twice. We see this in Safari.\n\nThe interesting part is if we use `React.render(..., document.body)` instead of `TestUtils.renderIntoDocument` the program works as expected. \n\nI am using:\n- Chrome 42.0.2311.135\n- Firefox 37.0.2\n- Safari  8.0.5 (10600.5.17)\n"},{"labels":["enhancement"],"text":"I find myself for needing a before and after notification of any synthetic event e.g. onClick/onChange to any react component.\n\nThis helps to implement a Flux-like framework with more strict constraints on how the store change events propagate through the system. Ideally I need access to all the entry points into the application, being all a-sync server events, timer events, and all browser events.  For the latter, I would like a hook into the React event system.\n\nIs such a thing possible and/or feasible to implement?\n"},{"labels":[null,"enhancement"],"text":"In my opinion,\n- `render` should return a component instance\n- calling `render` second time should unmount the previously mounted component if type or key is different\n\nDoes this make sense?\n"},{"labels":[null,"enhancement"],"text":"I'm doing some unit-testing on a module, to be used in an isomorphic app process. So, I write-up `server-side.js` and `client-side.js` for Mocha to consume.  Individually, they each run pretty good - so far.  However, after starting to use TestUtils in `client-side`, `server-side` starts failing on account of:\n\n```\nUncaught ReferenceError: document is not defined\n at getActiveElement (~p/node_modules/react/lib/getActiveElement.js:23:12)\n at ReactReconcileTransaction.ReactInputSelection.getSelectionInformation (~p/node_modules/react/lib/ReactInputSelection.js:40:23)\n at ReactReconcileTransaction.Mixin.initializeAll (~p/node_modules/react/lib/Transaction.js:168:30)\n at ReactReconcileTransaction.Mixin.perform (~p/node_modules/react/lib/Transaction.js:133:12)\n at ReactUpdatesFlushTransaction.Mixin.perform (~p/node_modules/react/lib/Transaction.js:134:20)\n at ReactUpdatesFlushTransaction.assign.perform (~p/node_modules/react/lib/ReactUpdates.js:95:38)\n at Object.flushBatchedUpdates (~p/node_modules/react/lib/ReactUpdates.js:175:19)\n at Object.wrapper [as flushBatchedUpdates] (~p/node_modules/react/lib/ReactPerf.js:70:21)\n at ReactDefaultBatchingStrategyTransaction.Mixin.closeAll (~p/node_modules/react/lib/Transaction.js:207:25)\n at ReactDefaultBatchingStrategyTransaction.Mixin.perform (~p/node_modules/react/lib/Transaction.js:148:16)\n at Object.ReactDefaultBatchingStrategy.batchedUpdates (~p/node_modules/react/lib/ReactDefaultBatchingStrategy.js:66:19)\n at Object.enqueueUpdate (~p/node_modules/react/lib/ReactUpdates.js:215:22)\n at enqueueUpdate (~p/node_modules/react/lib/ReactUpdateQueue.js:30:18)\n at Object.ReactUpdateQueue.enqueueSetState (~p/node_modules/react/lib/ReactUpdateQueue.js:208:5)\n at ReactComponent.setState (~p/node_modules/react/lib/ReactComponent.js:69:20)\n at cb (~p/node_modules/reflux/src/connect.js:17:85)\n at EventEmitter.eventHandler (~p/node_modules/reflux/src/PublisherMethods.js:40:22)\n at EventEmitter.emit (~p/node_modules/reflux/node_modules/eventemitter3/index.js:72:35)\n at Store.module.exports.trigger (~p/node_modules/reflux/src/PublisherMethods.js:110:26)\n at Store.Reflux.createStore.onLoadFailed (~p/test/fixtures/WikiApp.js:40:10)\n at Store.Reflux.createStore.onLoadCompleted (~p/test/fixtures/WikiApp.js:35:12)\n at EventEmitter.eventHandler (~p/node_modules/reflux/src/PublisherMethods.js:40:22)\n at EventEmitter.emit (~p/node_modules/reflux/node_modules/eventemitter3/index.js:72:35)\n at Function.module.exports.trigger (~p/node_modules/reflux/src/PublisherMethods.js:110:26)\n at null._onTimeout (~p/node_modules/reflux/src/PublisherMethods.js:120:24)\n at Timer.listOnTimeout (timers.js:110:15)\n```\n\nApparently, this line has kicked React into client-mode.\n\n``` js\nvar node = TestUtils.renderIntoDocument(element);\n```\n\nThat's not too bad, but I need way to kick React out of client-mode, so I can add it to my teardown method (aka `after`).\n"},{"labels":[null,"enhancement"],"text":"I expected there to be an issue for this already, but couldn't find it. Apologies if this a dupe.\n\nOccasionally it is useful to put a few elements in an array within render, when conditionally building different bits of the view.\nReact will issue a warning whenever an array is used that doesn't have keys - even if the author knows that this array is literal, and therefore doesn't require keys.\n\n``` js\nvar label = \"Label\";\nif (this.props.important) {\n  label = [\"Label\", <Tag text=\"important\" />];\n}\nreturn <div>\n  <h3>{label}</h3>\n  <p>{this.props.body}</p>\n</div>\n```\n\nIn this example, React will warn about lack of keys, even though they're not needed.\n\nOne option would be to extend `React.addons.createFragment` to accept an array, and use the indexes as keys.\n\n``` jsx\nlabel = React.addons.createFragment([\"Label\", <Tag text=\"important\" />]);\n```\n"},{"labels":[null,"enhancement"],"text":"In order to make selectors more durable within selenium tests, I will generally add in `data-qa` attributes to any element that needs to be selected.  Developers are free to change classes and IDs as needed but know not to touch or move when refactoring `data-qa` attributes.  It would be nice to allow my unit tests to use the same `data-qa` attribute to select elements as my integration/selenium tests use.  The issue is that currently there is no way to do that with the ReactTestUtils.\n\nI have a test helper object that contains a bunch of things to help with testing my react code.  Two of the methods are as follows:\n\n``` javascript\nscryRenderedDOMComponentsWithProp: function scryRenderedDOMComponentsWithProp(root, propName, propValue) {\n    return reactTestUtils.findAllInRenderedTree(root, function(inst) {\n        var instancePropValue = inst.props[propName];\n\n        return (\n            reactTestUtils.isDOMComponent(inst)\n            && instancePropValue\n            && (' ' + instancePropValue + ' ').indexOf(' ' + propValue + ' ') !== -1\n        );\n    });\n},\n\nfindRenderedDOMComponentWithProp: function findRenderedDOMComponentWithProp(root, propName, propValue) {\n    var all = this.scryRenderedDOMComponentsWithProp(root, propName, propValue);\n\n    if (all.length !== 1) {\n      throw new Error('Did not find exactly one match (found: ' + all.length + ') for prop  ' + propName + ' : ' + propValue);\n    }\n\n    return all[0];\n}\n```\n\nThis seems like a useful feature to me and was wondering if there is enough interest into this type of functionality to create a PR to add it directly into the ReactTestUtils?\n"},{"labels":[null,"enhancement"],"text":"If we claim to support IE8, and users are testing their code **locally** in IE8, they might get thrown into compatibility mode by default.  This will cause their webapp to blow up, and they will be confused because IE8 is a supported browser.  For background, check out this thread: https://github.com/facebook/react/issues/3301\n\nUsers can get out of compatibility mode by adding this tag:\n`<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />` \n\nSince the current failure is cryptic, and it's easy to detect when IE8 is in compatibility mode (http://stackoverflow.com/questions/1208837/how-can-i-detect-if-ie8-is-running-in-compatibility-view), we should probably add a warning to give a hint to the user that even though they're using IE8, they're actually in compatibility mode (effectively IE7) and should add the meta tag or use one of the other various workarounds.\n"},{"labels":[null,"enhancement"],"text":"Seems like this is a common use case for `replaceState` which we would like to deprecate. #3236 \n\nNot quite sure how this would work with Records and mixins since they're fixed type.\n\ncc @leebyron \n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nWhen trying to unmount my whole app, I got some error.\n\n> Uncaught TypeError: Cannot read property 'firstChild' of undefined \n> ReactMount.js:606ReactMount.findComponentRoot \n> ReactMount.js:606ReactMount.findReactNodeByID ReactMount.js:552getNode \n> ReactMount.js:128executeDispatch EventPluginUtils.js:109SimpleEventPlugin.executeDispatch \n> SimpleEventPlugin.js:305forEachEventDispatch EventPluginUtils.js:95executeDispatchesInOrder \n> EventPluginUtils.js:119executeDispatchesAndRelease EventPluginHub.js:46forEachAccumulated \n> forEachAccumulated.js:25EventPluginHub.processEventQueue \n> EventPluginHub.js:251runEventQueueInBatch \n> ReactEventEmitterMixin.js:18ReactEventEmitterMixin.handleTopLevel \n> ReactEventEmitterMixin.js:44handleTopLevelImpl ReactEventListener.js:80Mixin.perform \n> Transaction.js:134ReactDefaultBatchingStrategy.batchedUpdates \n> ReactDefaultBatchingStrategy.js:66batchedUpdates \n> ReactUpdates.js:109ReactEventListener.dispatchEvent ReactEventListener.js:175\n\nI think it's not a big deal.\n\nAccording to what I see with the debugger, it seems to be because a `SyntheticMouseEvent` is trying to get dispatched. And I guess the target has just been unmounted...\n\nNote that my use case looks like this:\n\n``` javascript\nvar Hello = React.createClass({\n    render: function() {\n        return <div onClick={unmount}>Hello {this.props.name}</div>;\n    }\n});\n```\n\nWhen using an `unmount` synchronous implementation, I get this error.\nWhen adding a setTimeout 0 in the unmount code, I got no error. \n\nI could not reproduce this in a jsfiddle, but I guess it's probably because I don't really know how batching work in React.\n"},{"labels":["enhancement"],"text":"Hi!\n\n@spicyj said I should open an issue here. Disclaimer: I'm trying to do sort of sketchy things, and I know this isn't supported, but I think it would be nice.\n\nI'm writing a library that I want to support react output optionally. To do this, right now I'm trying to inline all my ReactElements, such as\n\n``` javascript\n    return {\n        type: 'hr',\n        key: state.key,\n        _isReactElement: true\n    };\n```\n\ninstead of\n\n``` javascript\n    React.createElement('hr', {\n        key: state.key\n    })\n```\n\nThis is almost completely functional, except for the `_store` validation in react dev mode. This is because right now these literals don't have a `_store` key with `.validated` or `.originalProps`, which are assumed by the validators in React **DEV**. I can work around this, but to do so without duplicating props will have to write a wrapper function to create the element, which is a little unideal and slower (and adds unnecessary keys in non-dev mode).\n\nWould it be reasonable to short circuit some of these checks so that they only happen if _store is actually present on the ReactElement? If so, I'd be happy to submit a pull request (no rush for react 0.13 though).\n\nCurious as to your thoughts. Thanks!\nAria\n"},{"labels":[null,"enhancement"],"text":"Currently React relies on a global `window` (and `document` and `navigator`).\nThis works in a browser and it works in other environments if one sets a global `window`.\nHowever, relying on globals prevents multiple independent React engines from running together.\n\nTesting, for example, benefits strongly from isolated environments. It would be nice if one could run separate tests with `jsdom` without manually cleaning up the `window` every time.\nAnother use case is for programatic behaviour inspection. It's interesting to load multiple windows with `jsdom` and compare the behavior of one's library with different calls. If React is involved, however, this is impossible.\n\nAvoiding relying on globals can be added in a backwards-compatible fashion. If there is a global `window` and `document`, keep the existing behavior. If there isn't, instead of exposing an API, expose a factory taking a `window` and returning an API. For example, see how [jQuery did it](https://github.com/jquery/jquery/blob/master/src/intro.js#L25).\n\nA decision to avoid globals means refactoring existing code base to pass `window` explicitly everywhere, and maintaining that attitude in the future. What is your opinion on such a feature?\n"},{"labels":[null,"enhancement"],"text":"In React Native, these two styles are automatically composed:\n\n```\n<Text style={[styles.ratingValue, getStyleFromScore(criticsScore)]}>\n```\n\nCurrently, trying a similar technique in React DOM produces this:\n\n```\n<span style=\"0:[object Object];1:[object Object];\">\n```\n\nFollowing the principles of \"Learn Once, Write Everywhere\", the style prop should behave similarly across implementations.\n"},{"labels":[null,"enhancement"],"text":"We currently don't because we handle this specially during runtime, but for server-rendered content it would be good to make this actually work.\n\ncc @syranide \n"},{"labels":[null,null,"enhancement"],"text":"High performance Map implementations are starting to appear in modern web browsers. By supporting the Map interface users can now instead supply props as an Immutable.js or ClojureScript Map instance. This change would not even require providing an equality hook for the first pass as users can memoize props themselves.\n\nFor users embracing immutable data this is a huge change, it means that styles can be defined in code, overridden and shared efficiently. React DOM elements with memoized immutable props can be skipped over, etc.\n"},{"labels":[null,"enhancement"],"text":"`audio.muted` and `video.muted` can be affected by user interaction when `controls` is enabled. So it makes sense that `muted` should be controlled and an uncontrolled `defaultMuted` should be introduced.\n\n`ReactDOMAudio` and `ReactDOMVideo` needs to be introduced for this.\n\n@zpao Sounds good? Could be a good first bug...\n"},{"labels":["enhancement"],"text":"My use case: wrapping all **non-empty** children into divs.\n\n``` js\n  render() {\n    return (\n      <div style={rootStyle} onWheel={this.handleWheel}>\n        {Children.map(this.props.children, this.wrapChild)}\n      </div>\n    );\n  },\n\n  wrapChild(child, index) {\n    if (!child) { // I know this is probably wrong kind of comparison; don't care\n      return (\n        <div style={this.getChildStyle(index)}>\n          {child}\n        </div>\n      );\n    }\n  },\n```\n\nThis is all nice but I also need to know **how many valid children I have wrapped**.\n`Children.count` will return the number of children including the “empty\" children. I want to strip them out.\n\nCan we have `Children.filter`?\n"},{"labels":[null,"enhancement"],"text":"I'm currently implementing drag-and-drop in a React application where different kinds of data is dragged and dropped. This means I want to check for certain types on the event.dataTransfer object to see if drop should be enabled or not. Basically it looks like this:\n\n``` javascript\nonDragOver: function (event) {\n    if (event.dataTransfer.types.indexOf('application/x-custom-type') > -1) {\n        event.preventDefault();\n    }\n}\n```\n\nThis works fine in Chrome, but less so in Firefox. It turns out that in Firefox the type of DataTransfer.types is DOMStringList, which does not have an `indexOf` method. According to the latest drafts of the HTML5 specification ([W3C](http://www.w3.org/html/wg/drafts/html/master/editing.html#the-datatransfer-interface), [WHATWG](https://html.spec.whatwg.org/multipage/interaction.html#dom-datatransfer-types)), returning an array like Webkit does is correct. Obviously, the fix is easy on my side (check which one of `indexOf` and `contains` is available and use that one), but I thought it might be useful to fix this in React instead, since it is at least related to the event system.\n\nI could probably take a stab at this, but I wanted to gauge the interest. Perhaps the DataTransfer object is deemed to be out of scope for the synthetic event handler.\n"},{"labels":[null,"enhancement"],"text":"I wanted to propose changing `shouldComponentUpdate` from a `DEFINE_ONCE` to a spec that might be termed `DEFINE_MANY_ALL`. \n\nThe rationale here is that sometimes you may know that it's more efficient to skip the `shouldComponentUpdate` for some reason in a component, or that a mixin may be able to define whether it should be able to skip updating based on it's own knowledge of props/state/context, but that might not hold true when combined with other components of an app.\n\nSo my thought is `shouldComponentUpdate` should be changed to a `DEFINE_MANY`, where `ALL` of the return values must return false for the update to skip. If any return true, it will have the same behavior as the default and update.\n"},{"labels":[null,"enhancement"],"text":"_setState()_ currently accepts an optional second argument for callback and returns _undefined_.\n\nThis results in a callback hell for a very stateful component. Having it return a promise would make it much more managable.\n\nIt is somewhat of a convention in JS world to have API symmetric - if a method accepts a callback, it returns a promise. if it returns a promise, it can accept a callback.\n\nIn my case, I have an editable table. If user presses enter, he is moved to the next row (call setState). If the user is on a last row, I'd like to create a new row (call setState) and focus on this new row (call setState). Currently the only way is to achieve this is to have a nested callback hell.\n"},{"labels":["enhancement"],"text":"tl/dr: Add an empty bare object called 'x' as a new member of the React object so that 3rd party React tools have a global extension point.\n\nI have a couple of internal tools I use with React that I would like to open source.  Both tools use a singleton object that is referenced and/or modified by components.\n\nI know I could create the object in the root component and pass it down as a prop but the child components may modify the object and that violates the idea of props being read-only.  It also means that if another person open sources a component which uses either of my tools that the user of the component must create that root object in their app and then wire it up down the component tree.\n\nTo keep things clean I would love to have a 3rd party extension space hanging off the React object that I could attach my tool's \"globals\" to so that all the components would have access to it given that they all share the same React global.  My suggestion is just to name it \"x\" and make it a bare object.  The documentation would encourage users to then add their own namespace to the object.\n\nHere are is very simple example that adds a 3rd party global event bus to a blogging app using EventEmitter which could be used both on the server and on the client via Browserify.\n\nIn app.js (the root component):\n\n```\nrequire('react-x-event');\n\nReact.x.event.bus.on('createPost', ...)\n```\n\nIn react-x-event.js\n\n```\nvar events = require('events');\nReact.x.event = {\n  bus: new events.EventEmitter(),\n  handle: function (e, event, data) {\n    e.preventDefault();\n    React.x.event.bus.emit(event, data)\n  }\n}\n```\n\nIn new-post.js (a component view shown at some point by a sub-component of app.js)\n\n```\ncreatePost: function(e) {\n  React.x.event.handle(e, 'createPost', ...)\n}\n\nrender: function () {\n  return <form>\n    ...\n   <button onClick={this.createPost}>Create</button>\n  </form>;\n}\n```\n\nWithout getting lost in the weeds arguing if a global event bus is a good idea for React you can see in this example that I didn't need to wire up the component tree with the bus to allow the sub-component to send a message.  \n\nThere is nothing from stopping me or anyone else from just globally patching the React object to add the x member but I think it would be better to have it \"blessed\" and added to the React code so that there are no conflicts in the future over that member name.  I also think having a common name like 'x' will allow 3rd party module names to announce how they work, eg require('react-x-event').\n"},{"labels":["enhancement"],"text":"Since components start with null state, it would make sense that you could reset back to a null state.  Right now the best you can do is reset back to an empty object.\n\nhttp://jsfiddle.net/wqpzmg7b/1/\n\nIt's a minor issue but I think it deserves documenting if not changed.\n"},{"labels":["enhancement"],"text":"It's very convenient to have props in a nested structure. However...\n\nLet's assume I have some default props:\n\n```\ngetDefaultProps: function() {\n    return {\n        aaa: true,\n        bbb: true,\n        ccc: {\n            first: false,\n            second: false,\n            third: false\n        }\n    };\n}\n```\n\nNow, if I initialize the component giving it these props:\n\n```\n{\n    ccc: {\n        first: true\n    }\n}\n```\n\n...the component won't get ccc.second or ccc.third at all. The preferred result would of course be:\n\n```\n{\n    aaa: true,\n    bbb: true,\n    ccc: {\n        first: true,\n        second: false,\n        third: false\n    }\n}\n```\n\nOr perhaps make the behaviour selectable by adding a PropTypes option, like:\n\n```\n.isRequired.useDefault\n```\n"},{"labels":[null,null,null,"enhancement"],"text":"It would be great to be able to have a custom checksum validator that can ignore certain branches of the DOM-tree when attempting to reuse markup.\n\nThe use case is for rendering static components. For static components that only need to be rendered once, we can just do the rendering on the server, and not have to render again on the client. Currently we have to pass down both the react markup AND the props used to generate the static markup. However, it is a waste to send those props down, if this component doesn't need to be rendered client-side.\n\nOne of the major performance concerns for using React is that apps not only have to send down markup but props as well, usually duplicating the data sent down to the client. \n\nBeing able to specify certain components as not needing a client side re-render, thus skipping check-sum, would save k-weight of the initial page load.\n"},{"labels":["enhancement"],"text":"There was a common pattern to unmount a component by its instance:\n\n`React.unmountComponentAtNode(component.getDOMNode().parentNode);`\n\nNow components can return `null` from `render()`, and in that case getDOMNode() also returns `null`, and the code above doesn't always work. React internally always knows to which node the component is mounted, so please make this information accessible or add a component method like `unmount()`.\n\nMy project is in process of transition from Backbone views to React and we have a helper function `universalUnmount()` which gets Backbone.View instance of mounted component and removes it from DOM. So there is no way for now to make it work with any React component.\n"},{"labels":["enhancement"],"text":"Similar to #2296.\n\nI would love to tell a REACT component : \"I don't care in what order you render the elements, just minimize the DOM operations and maintain the elements by key\"\n\nIn effect: whenever a re-render happens React removes the elements that are no longer there. And new elements are appended to the end. The order is never accounted for.\n\nWhile ES6 Sets may not be available in many browsers, I would love a similar feature implemented with Objects now.\n\nExplanation:\n\nRight now, when passing an array of children with keys as property, their order is preserved. This is usually the correct behavior.\n\nHowever, I have projects where I'm using the trick from famo.us to render elements using `transform: translate` values instead. In this case, all elements have `position; absolute; top: 0; left: 0;` anyway and their actual order on the DOM does not matter.\n\nThe major benefit is that with this trick, it eliminates almost all DOM operations (except updating styles) and any page reflow or paints for great performance.\n\nThe problem is that with React maintaining the order of the children, React, reorders the DOM elements anyway.\n\nThere are ways where I have to keep track of every render and manually reorder the data to prevent re-renders, but there has got to be a better way.\n"},{"labels":["enhancement"],"text":"Hi, \n\nThe Flux architecture seems to recommend having React elements bind to change event listeners to Stores, and call `forceUpdate()` when changes occur. I do this, and generally find that deferring forceUpdate calls is more useful, as it prevents multiple calls to forceUpdate on the same tick (I think). \n\nThe idea comes from [react-mixin-manager](https://github.com/jhudson8/react-mixin-manager#deferupdate), which provides one implementation. \n\nPersonally, I have seen a performance boost (I think) from using the following simple mixin: \n\n``` coffee\nmodule.exports =\n  deferUpdate: ->\n    setTimeout =>\n      @forceUpdate()\n    , 0\n```\n\nI'm not sure if this is a good idea generally, or if it should be incorporated into React core, but I thought I'd throw it out there. \n(meta: are issues like this encouraged or frowned upon here? I know it's a large project with a lot of \"real\" issues the core devs need to be paying attention to.)\n"},{"labels":[null,"enhancement"],"text":"I've just stumbled across some code written which touches this.state directly and then forces an update.  The danger in this pattern is that _appears_ to work, it still leaves the code vulnerable to other callers of setState doing the right thing, being queued up, and then overwriting the hand-touched state, if I'm understanding the red box on http://facebook.github.io/react/docs/component-api.html correctly.\n\nAny chance if, in (at least) the dev version, this.state could be guarded with a JS setter that would print a warning?\n"},{"labels":["enhancement"],"text":"I'm using flux and I need the 'react/lib/copyProperties'. This is easy with browserify `var copyProperties = require('react/lib/copyProperties');` but with require.js is not possible because it uses the bower version which doesn't contain the copyProperties fn (https://github.com/facebook/react/blob/aae31ae24c67216894ae42b8481a599206d18690/src/browser/ui/React.js). Would be nice to have them like this `React.lib.copyProperties()`\n\nMaybe include all the lib components.\n\nIs this possible?\nThanks\n"},{"labels":["enhancement"],"text":"We have a fairly advanced class system that is integrated with react. With 0.10 we managed to make it work using stock build, with 0.11 and its refactoring of descriptors it is no longer possible. I know that in 0.12, React will have `createFactory()` as part of its public API, so is there a chance we can have it in 0.11.x? Perhaps hidden in `__internals`? It's important for us to have an unwrapped version of it, just a reference to `ReactDescriptor. createFactory()` method.\n"},{"labels":["enhancement"],"text":"It would be cool to be able to get warnings for typoed or otherwise extraneous props passed to a component, similar to how `React.DOM` warns if you pass `class` when you meant `className`.\n\nWith `PropTypes.shape` you could probably even ensure deep validity of the passed data. This would not only be useful for finding bugs, but also for optimizing hot components by making sure the shapes are aligned.\n\nObviously this would need some sort of opt-in, like propTypes.\n"},{"labels":["enhancement"],"text":"If I need a component that doesn't have a DOM representation, I can use render function that returns `<noscript>`. However recently I had to have a component without DOM representation, but that also has children, that I want to be mounted (so that their lifecycle methods trigger correctly). Unfortunately `<noscript>` is not nestable, thus I had to return `<span>`, which is not an ideal solution.\n\nIs there a way to do such thing without using `<span>` or `<div>`? I know there are plans to replace `<noscript>` solution with some 'null component'. Are there plans for 'null component' that can mount its children?\n"},{"labels":["enhancement"],"text":"One really positive feature of React is the ability to do proper logic for layout, e.g. you can do grids that scale both ways, take into account screen size **and** content size and so on. However, the reusability of such solutions is not often quite optimal.\n\nThere are solutions such as [GSS](http://gridstylesheets.org/) that allow you to define things like this in a reusable manner, they're usually supported only in the most recent browsers (which would be easier to solve for React-based solutions, since virtual DOM doesn't depend on the browser) and also hooking them up to possible changes in the tree is tedious and hard to get right without sacrificing performance.\n\nAllowing user-code to pre-process the virtual DOM tree before the diffing would open the doors for a whole new world of styling engines to born into, where reading from the virtual DOM tree is fast, as well as making changes to it. The implications vary from styling languages being able to define custom values such as `aspect-ratio` to apply a CSS aspect ratio hack, or inject extra DOM elements to make things centered based on the `className` of the element, while keeping the user-code intent-oriented and clear, abstracting away the common pains of CSS.\n\nI realize that this is not a simple change of adding a hook somewhere, but instead means exposing a vast amount of API surface that's currently considered implementation details. This is also even more problematic in cases where `shouldComponentUpdate` is involved. However, I think this would have the potential to revolutionize how we deal with styling web pages, so I'd say it's worth thinking through at least.\n"},{"labels":["enhancement"],"text":"It would be awesome if JSX parser errors wouldn't just end up in the terminal, but if it would actually output (valid) code that would throw the error on load on the client instead, it would make it virtually transparent that JSX is being used.\n\nA simple solution would be to simply (only) output the error message as-is with file+line baked in. I imagine that with some source map trickery we could even make it look as if the browser threw the error, with correct source and location.\n"},{"labels":[null,"enhancement"],"text":"Kind of related to #1978 (concerns polyfills)\n\nIt seems to me that we should really treat server-rendering as distinct from client-rendering, they have different requirements and priorities.\n1. Server-rendering should be able to generate optimal markup for SEO, markup must also be fully cross-browser compatible and small markup is preferable.\n2. Client-rendering sees SEO as largely irrelevant, full cross-browser compatibility is also irrelevant and rendering performance is of greater importance.\n\nSo I propose that we treat server-rendering as uniquely distinct from client-rendering, e.g. as a separate flag`React.serverSide = true` (which would default to true if document is not available). It's even imaginable that we could extend this with e.g. `React.targetClient = 'SEO' / 'legacyClient' / 'everGreenClient'`, which would optionally allow the markup to be tailored for a specific purpose.\n\nSo when reusing server-rendered markup client-side:\n1. The client should do an initial server-rendering pass being passed the exact same props (and time) as during the server-side rendering, but instances are actually allocated on the client.\n2. Immediately afterwards a client-rendering pass is done with any props (and current time) you like, instances/markup is efficiently reused and should not add significant costs as little DOM manipulation should be involved.\n\nI'm not really affected by this, but for those that do use server-rendering; this seems like the _correct_ way of approaching it (as opposed to just rendering everything exactly the same). However, I'm working on `img`\\- and `picture`-element polyfills, but without this they cannot be made to generate sensible server-side markup.\n\n**PS. I realize this can be done today using a global + mixin**, but without a standardized solution, it's unlikely that third-party (and polyfill) components could ever participate in this. But that doesn't mean that it needs to be shipped with React even (none of this requires core support I believe), as long as it's standardized.\n"},{"labels":[null,null,"enhancement"],"text":"We currently don't support `!important` as it has to be set using `style.setProperty(name, value, priority)`. This should be trivially easy to implement if it's something want to support, although I'm not sure about the performance implications (**EDIT:** #1886), although I can't imagine it would be measurable as we would be doing the string test ourselves and those are cheap.\n\nhttp://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleDeclaration\n\n~~OK... apparently IE8 doesn't support this _at all_, it might still be worth implementing, for the future and for those who don't care about IE8.~~ ~~After further experimentation, apparently it is! `style.setAttribute(name, value)` (priority is part of the value).~~ But apparently that was wrong as well, the only way to set it seems to be with `cssText`, an acceptable work-around may be to just use `cssText` when we detect an `!important` style, which should be seldom enough that performance is a non-issue.\n\nAn important consideration is that we _already_ support this for the initial render, but subsequent updates will _fail_ as `!important` isn't recognized for properties.\n"},{"labels":["enhancement"],"text":"There should be a way do do `<input type=\"checkbox\" indeterminate={true} />` or similar – right now the attribute is ignored. Need to figure out how this interacts with `checked` though.\n"},{"labels":[null,null,"enhancement"],"text":"There are currently a couple of problems with focus management in React.\n## current problems\n- `this.getDOMElement().focus()`\n\ndoes not guarantee the node is on a document/visible. visibility can be hard to detect due to other components firing render().\n- `this.refs.x.getDOMElement().focus()`\n\ndoes not guarantee that x has finished any pending renders. if `x` renders, focus is lost.\n- `componentDidUpdate`\n\nthis fires on the child nodes before parents so in the case of:\n\n```\n<ul style=\"display:none\">\n  <li><button>can't focus</button></li>\n</ul>\n```\n\nif we want to show the `<ul/>` and focus the button.\n\nthe component of the `<button/>` focusing during componentDidUpdate has no affect because the `<ul/>` is still hidden.\n## discussion\n\nif looks like some of the PRs to react are using raf or timeouts to achieve fixes to the problems listed. This can cause race conditions, and can be fixed with a lifeCycle addition, or just a hidden lifeCycle purely for focus management.\n\nThe issue comes down to not having a lifecycle able to fire a function after _all_ rendering is done, not just an individual component.\n\nI would suggest we add a simple API of component.blur()/component.focus() that queues the requests and fires them after all rendering is done. The fix is fairly simple, but I wonder how people feel about this.\n"},{"labels":["enhancement"],"text":"Sort of a stray thought, but what if className could pass an object to the `classSet` addon?\n\n``` javascript\nrender() {\n    return (\n        <div className={{ message: true, 'is-active': this.state.isActive }}>\n            { this.props.message }\n        </div>\n    )\n}\n```\n"},{"labels":["enhancement"],"text":"When using components with missing/invalid prop, then a warning is logged.\nSame when a child key was not provided.\n\nI would like an error to be thrown instead.\n\nThis has already been discussed on some issues like: https://github.com/facebook/react/issues/1587\n\nBy the way, I totally support this related issue, to ensure proper Proptype documentation of all components, but would require an error instead of a warning :)\n\nThe more we fail in dev, the better. It would be nice to be able to use React in a very strict way, by using some configuration attribute or something...\n\nOne other thing I would probably add is to enforce all components have a name.\nSee https://github.com/facebook/react/issues/1751\n"},{"labels":[null,null,null,"enhancement"],"text":"It would seriously ease the process of building something isomorphic if componentWillMount could return a promise and that react would delay rendering until that promise is resolved. I have seen attempt of doing something like that in react-router and rrouter, however giving this responsibility to each component instead of a router module would make more sense for me.\n"},{"labels":["enhancement"],"text":"I'm trying to implement a scrollable list of items that are tappable on mobile devices. It looks like there are two plugins that address the 'how to tap' problem - https://github.com/facebook/react/blob/master/src/browser/eventPlugins/MobileSafariClickEventPlugin.js & https://github.com/facebook/react/blob/master/src/browser/eventPlugins/TapEventPlugin.js .\n\nI'm confused about Plugins: they [aren't mentioned in the docs](http://facebook.github.io/react/docs/getting-started.html), and it's unclear if they're things that you can build in runtime, with `require('react')` or which [require recompilation with Grunt](https://github.com/facebook/react/issues/436). Is the plugin system itself in flux? I'd love to help out on [getting these merged](https://github.com/facebook/react/pull/1170) so that developing mobile apps is more straightforward.\n"},{"labels":[null,"enhancement"],"text":"This comes from my discussion with several people around animation, but I feel like it's important enough to warrant its own issue.\n\nWe already insist that `render` should be a pure function of `this.props` and `this.state`. How about taking this further and pass those in CompositeComponent? This way we can write:\n\n``` html\nrender: function(props, state) {\n  return <div>{props.something}</div>;\n}\n```\n\nWhile most of the time we'll still call `render(this.props, this.state)` internally, with this we will be able to do `render(somePrevProps, someTestState)` from React or even from the user. Being able to \"test the water\" would be very valuable in the future. For example:\n\n``` js\ncomponentWillReceiveProps: function(nextProps) {\n  var result1 = this.render(this.props, this.state);\n  var result2 = this.render(nextProps, this.state);\n  // Collection of changed stuff. Good for preparing mounting/unmounting animations or such logic.\n  React.reconciler.getDiff(result1, result2);\n  this.setState({...});\n}\n```\n\nI've heard this can also solve some problems with pendingState? Not too familiar with the issue.\n@jordwalke @sebmarkbage @petehunt \n"},{"labels":[null,null,"enhancement"],"text":"I'm experimenting with building a new text editor component for Atom, and I've noticed that about ~1.4 ms per keystroke are being spent in restore selection functionality. What if I could add a property to my input like `.unsafeSkipSelectionRestoration` or something along those lines to prevent the DOM access this code requires?\n\nBelow is a flame graph showing where the access happens. It's a bit confusing due to the stack depth limit in Chromium's profiler, but I've highlighted the operations in question.\n\n![screenshot_2014-04-03_14_55_17](https://cloud.githubusercontent.com/assets/1789/2609142/b8cd10e2-bb72-11e3-8330-a69fefc1795c.png)\n"},{"labels":["enhancement"],"text":"Not a huge deal, but a bit silly since this markup won't be mounted.\n"},{"labels":[null,null,null,"enhancement"],"text":"The DOM already exposes `data-*` as `dataset` but it's doing transformation from hyphenated to camelCase. [From MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset):\n\n```\n<div id=\"user\" data-id=\"1234567890\" data-user=\"johndoe\" data-date-of-birth>John Doe\n</div>\n\nvar el = document.querySelector('#user');\n\n// el.id == 'user'\n// el.dataset.id === '1234567890'\n// el.dataset.user === 'johndoe'\n// el.dataset.dateOfBirth === ''\n\nel.dataset.dateOfBirth = '1960-10-03'; // set the DOB.\n\n// 'someDataAttr' in el.dataset === false\n\nel.dataset.someDataAttr = 'mydata';\n// 'someDataAttr' in el.dataset === true\n```\n\nWe should just start supporting `dataSet` (because camelCase). This will allow a couple things:\n- easier reasoning about data attributes (`Object.keys(this.props.dataSet)`)\n- easier merging (`<div dataSet={merge(this.props.dataSet, {extra: 'value', override: 'value'})} />`)\n- easier (potentially faster?) updates (just modify `node.dataset`)\n\nWe'll want to do the reverse of what the DOM is doing. eg `<div dataSet={{dateOfBirth: 'val', foo: 'bar'}} />` becomes `<div data-date-of-birth=\"val\" data-foo=\"bar\"></div>`.\n\nTo the best of my knowledge, `aria-*` doesn't have a corresponding API, but we should make it work the same way. I think `ariaSet` makes sense.\n"},{"labels":["enhancement"],"text":"It would be really cool to allow view to be custom elements. http://coding.smashingmagazine.com/2014/03/04/introduction-to-custom-elements\n"},{"labels":[null,"enhancement"],"text":"What do you think of a \"mixed in\" callback for mixins which is called at the moment of applying a mixin to a component with component's spec as an argument?\n\n```\nvar SomeTrickeryMixin = {\n  mixin: function(spec) {\n    // redefine .render() or do some other dangerous things\n  },\n\n  ...\n};\n```\n\nBesides overriding `.render()` such callbacks can be used when you want to implement a \"custom policy\" for some methods (wrap method, call-before, call-after, ...).\n\nAs a downside that would make things a little less straightforward from a (mixin) user perspective.\n"},{"labels":["enhancement"],"text":"Shadow roots have nodeType == DOCUMENT_FRAGMENT_NODE. When trying to render into one, react throws an error:\n\n```\nException caught during observer callback:\n  Error: Invariant Violation: _registerComponent(...):\n    Target container is not a DOM element.\n```\n\nThere is an explicit check to only allow rendering into ELEMENT_NODE_TYPE and DOC_NODE_TYPE. Is there any particular reason why document fragments are excluded there?\n"},{"labels":[null,null,null,"enhancement"],"text":"What is your approach to IE10 touch events?\n\nHammer.js checks `window.navigator.pointerEnabled || window.navigator.msPointerEnabled` and then switches `touchstart`, `touchmove`, `touchend touchcancel` to `pointerdown MSPointerDown`, `pointermove MSPointerMove`, `pointerup pointercancel MSPointerUp MSPointerCancel`.\n"},{"labels":[null,null,null,"enhancement"],"text":"#284 reminded me that one thing I've sometimes wanted is to install a handler on window for `keypress` (for keyboard shortcuts) or `scroll`. Right now I can just do `window.addEventListener` in `componentDidMount` but since React is listening already, it would be nice if there were some way for me to intercept those events. (In addition, receiving normalized synthetic events is generally more useful.)\n"},{"labels":["enhancement"],"text":"examples/js/renderers/SVGRenderer.js does not implement getSize(), whereas all of WebGLRenderer, CSS2DRenderer, and CSS3DRenderer implement getSize(). Given that it implements setSize(), it would be nice to have the getSize counterpart."},{"labels":["enhancement",null],"text":"[Khronos glTF working group approved KHR_xmp](https://github.com/KhronosGroup/glTF/pull/1553)\r\n\r\nThis allows metadata to be added to glTF."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAdding a displacementMap to a MeshPhongMaterial without flatShading will offset the vertices correctly but will not correctly change the normals. The result is an object that has the right shape, but the wrong lighting.\r\n\r\n[Fiddle demonstrating the problem](https://jsfiddle.net/mhebes/9soeLcxj/55/) (be sure to minimize that getimage() base64 method, I couldn't get images to work on fiddle).\r\n\r\n##### Three.js version\r\n\r\nr117\r\n\r\n##### Browser\r\n\r\nChrome and Edge at least\r\n\r\n##### OS\r\n\r\nWindows at least\r\n"},{"labels":["enhancement"],"text":"Would be nice to have a way for compressed 3D Textures and TextureArray for custom shaders.\r\n\r\nRequest is done after:\r\nhttps://discourse.threejs.org/t/is-it-possible-to-have-a-texture-array-of-compressed-textures/16213\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nPMREM seems to miss support for refraction mapping even though the mapping option `CubeUVRefractionMapping` exists.\r\n\r\nComparison between enabled refraction of Equirectangular vs PMREM:\r\n\r\n![firefox_2020-06-10_12-26-46](https://user-images.githubusercontent.com/4518980/84258921-02a2a600-ab18-11ea-9dd9-fa5745289849.jpg)\r\nEquirectangular with `EquirectangularRefractionMapping`\r\n\r\n![firefox_2020-06-10_12-27-00](https://user-images.githubusercontent.com/4518980/84258966-1221ef00-ab18-11ea-94ba-d054d6d553de.jpg)\r\nPMREM with `CubeUVRefractionMapping`\r\n\r\nI extended the envmaps example to show the problem:\r\n* [demo](https://deml.io/three/examples/webgl_materials_envmaps.html) (dev branch)\r\n* [file](https://github.com/JohannesDeml/three.js/blob/test/pmrem-refraction/examples/webgl_materials_envmaps.html)\r\n\r\n##### Three.js version\r\n\r\n- [ x ] Dev\r\n- [ x ] r117\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nFrom https://github.com/mrdoob/three.js/pull/19517#issuecomment-641704503\r\n\r\nMaterial in MMD should be able to apply environment map (Matcap) while it is based on cartoon material. But `MeshToonMaterial` no longer supports environment map.\r\n\r\nSo to support MMD material more precisely, we should implement MMD specific material `MMDToonMaterial`. Probably `MMDLoader` is a good place to implement.\r\n\r\nMaybe extending `MeshToonMaterial` (or `MeshPhongMaterial`) or using `ShaderMaterial` is a good way to implement. If node based material system lands, it would be a good use case.\r\n\r\nFor MMD users who want to apply environment map to MMD model, please use r111 until we resolve.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r112~r117\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nWhen cloning an equirectangular CubeTexture the result is a black texture. \r\nThe same operation does work with a CubeTextureLoader loaded texture (with 6 images).\r\n\r\n![grafik](https://user-images.githubusercontent.com/4518980/84148048-afb8e800-aa5e-11ea-9f32-e9c07968c1c6.png)\r\nNo map after clone()\r\n\r\n\r\n* [jsfiddle clone](https://jsfiddle.net/JohannesDeml/46z8w0bg) (latest release branch)\r\n* [jsfiddle clone](https://jsfiddle.net/JohannesDeml/yq15zdcn) (dev branch)\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r117\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n## Resolved\r\n\r\nWhen using refraction for an equirectangular texture with `EquirectangularRefractionMapping`, using it as a background does not work, an the mapping has wrong seams. For CubeTextureLoader with `CubeRefractionMapping` both of that works (see [cubemap refraction](https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_cubemap_refraction.html)).\r\n\r\n![grafik](https://user-images.githubusercontent.com/4518980/84149220-65386b00-aa60-11ea-800b-75d5c9f002cd.png)\r\nwrong background rendering & seam \r\n\r\n* [jsfiddle refraction](https://jsfiddle.net/JohannesDeml/fo4ny2dv/5/) (dev branch)"},{"labels":["enhancement"],"text":"`applyMatrix3` method of `BufferAttribute` presumes that `itemSize` equals 3. This can be seen in the [BufferAttribute source code on line  202](https://github.com/mrdoob/three.js/blob/master/src/core/BufferAttribute.js#L202).\r\nI'm a newbie of three.js and maybe I miss something, but I think that's not always true.\r\nFor example, UVs in `ShapeBufferGeometry` have only 2 dimensions.\r\n\r\nThis led to some `NaN` in the `BufferAttribute`'s array after applying `applyMatrix3`. Maybe it's possible to do a check `itemSize` inside the function to handle this case. For instance, we can use something similar to `Vector2`'s `applyMatrix3` if `itemSize === 2`.\r\n\r\n[Here's a sandbox](https://codesandbox.io/s/agitated-cannon-lr7u9?file=/src/index.js) that shows the problem and a simple function based on `Vector2`.\r\n\r\n\r\nThree.js version: r117\r\nBrowser: All of them"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\n`r117` added support for `InterleavedBufferAttribute.clone()` and `InterleavedBufferAttribute.toJSON()` by deinterleaving data. This solved various of runtime errors however other problems still exist like mentioned here: https://github.com/mrdoob/three.js/pull/19485#discussion_r431669421.\r\n\r\nHence, it would be nice if `BufferGeometry.clone()` and `BufferGeometry.toJSON()` could detect interleaved data and ensure to retain their structure. Of course this mean `BufferGeometryLoader` needs the ability to restore interleaved attributes.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r117\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"I see that there's been some work done in the past in #15360 and @greggman has put together a nice article on the topic [here](https://threejsfundamentals.org/threejs/lessons/threejs-post-processing-3dlut.html). It's not entirely clear to me why the previous PR was closed but I wanted to bring this up as a nice addition to three.js. The utility has been better explained in the two links above but 3DLUTs are great for controlling the look and feel of a scene.\r\n\r\n3DLUTs are supported in a variety of 3d engines and video editing software include [Unity](https://docs.unity3d.com/Packages/com.unity.postprocessing@2.1/manual/Color-Grading.html), [Unreal Engine](https://docs.unrealengine.com/en-US/Engine/Rendering/PostProcessEffects/UsingLUTs/index.html), and [Babylonjs](https://doc.babylonjs.com/api/classes/babylon.colorgradingtexture). There are also a couple existing file formats for them including [.cube](https://wwwimages2.adobe.com/content/dam/acom/en/products/speedgrade/cc/pdfs/cube-lut-specification-1.0.pdf) and [.3dl](http://community.foundry.com/discuss/topic/103636/format-spec-for-3dl?mode=Post&postID=895258) (though 3dl looks relatively undocumented).\r\n\r\nThese formats are available online and can also be [created in tools like Photoshop](https://helpx.adobe.com/photoshop/using/export-color-lookup-tables.html) and would enable more artistic control over the look of the final scene.\r\n\r\nI figure that just like gamma correction there could be a postprocessing effect and WebGLRenderer support that adds the LUT application to the end of the built in shaders:\r\n\r\n```js\r\nconst lut = new LUTLoader().load( '../path/to/lut.3dl' );\r\nrenderer.colorLUT3D = lut;\r\n```"},{"labels":[null,"enhancement"],"text":"Is it possible to add Gamepad support for controllers.\r\nIt is well documented and I guess quite useful to get interaction for all buttons, touch pad, thumbstick on controllers.\r\nhttps://immersive-web.github.io/webxr-gamepads-module/\r\n\r\nPS: It looks like I don't have permission to add label Enhancement"},{"labels":["enhancement"],"text":"Building on https://github.com/mrdoob/three.js/pull/17114, I'm proposing to add a `.transparencyMap` property to MeshPhysicalMaterial, as a texture alternative to `.transparency`. The two parameters combined would allow thin-surface optical transparency workflows.\r\n\r\nRelated:\r\n- [`KHR_materials_transmission`](https://github.com/KhronosGroup/glTF/pull/1698)\r\n- [Enterprise PBR improvements](https://github.com/mrdoob/three.js/issues/16977)\r\n- [Autodesk Standard Surface • Transparency](https://autodesk.github.io/standard-surface/#closures/transparency) "},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nhttps://github.com/mrdoob/three.js/blob/f76e149e681cdf33a16623248376c04a1038dae7/src/renderers/webxr/WebXRManager.js#L31-L43##### Three.js version\r\n\r\nThis code caps the webxr implementation at two views.\r\n\r\nHowever, the webxr spec [allows for any number of views!](https://immersive-web.github.io/webxr/#views)\r\n\r\nCAVE displays will have a high number of views. Within head-mounted displays, \"first person observer\" views for AR capture exist (e.g. on the Hololens 2), as well as \"bionic displays\" on the Varjo VR-2.\r\n\r\nThe camera object should perhaps preallocate two cameras but append additonal cameras as more views are discovered.\r\n\r\n(I came across this issue after implementing the \"first person observer\" view for Hololens 2 in Servo and had to patch threejs to be able to run demos)\r\n\r\n- [x] Dev\r\n- [ ] r116\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Currently Three is setting the `xrCompatible` context creation arg to `true` for every WebGLRenderer instance, regardless of whether or not the application will have any VR/AR content. This flag is to ensure that the context is created on the graphics adapter that will be powering the XR device (ie: in a multi-GPU system it's often the one that the headset is physically plugged into.)\r\n\r\nOn many devices, like mobile phones, standalone headsets, and the majority of PCs it will effectively be a no-op because there's only one GPU. On devices like high performance laptops, however, it's possible that setting this flag will cause the entire system to switch over to rendering on a battery hungry discreet GPU rather than a more power efficient integrated GPU. This is probably fine for most XR-oriented experiences and a great many other non-XR WebGL apps, since they're naturally going to want the higher performance, but it's also likely something that developers will want to opt into or out of, similar to how `powerPreference` is currently handled.\r\n\r\n(Coincidentally, using `xrCompatible: true` may override any `powerPreference` that the developer set.)\r\n\r\nMy suggestion would be to have a flag passed into the renderer creation, which then flips the `renderer.xr.enabled = true;` flag for you. If `renderer.xr.enabled` is set to true after a context is created without `xrCompatible` being set it could call `context.makeXRCompatible()` internally, but developers should be aware that this may cause a context loss/restore in the dual GPU case. (That's probably worth a console warning at least.)"},{"labels":["enhancement",null],"text":"I wrote a complete description of the problem in this thread: https://discourse.threejs.org/t/error-in-pdb-loader/14648 "},{"labels":["enhancement"],"text":"We can decide if we want to honor existing groups when merging.\r\n\r\nIf not, then this issue can be closed.\r\n\r\nIf we do chose to honor groups, it would be nice if the groups were optimized -- especially if the geometries share materials.\r\n\r\n- [ x ] r115\r\n"},{"labels":["enhancement"],"text":"I'd like to be able to apply a random rotation to an object. There are a couple of ways I initially thought to do this: random euler angles, random (normalized) rotation matrix values, and random (normalized) quaternion values.\r\n\r\nThe problem is, none of these random rotation methods sample uniformly from SO(3), the set of all 3D rotations. From the (admittedly, limited) research I've done, it appears that there are two methods that do sample uniformly from SO(3):\r\n\r\n1. Generate a random point along the surface of a unit sphere, convert the point to a vector, and combine the vector with a random rotation 0 < u < 2*PI to form an axis-angle rotation representation. For generating a random point on the surface of a unit sphere, see the following: https://mathworld.wolfram.com/SpherePointPicking.html\r\n\r\n2. Generate a random quaternion. The method described in the link below samples uniformly from SO(3): http://planning.cs.uiuc.edu/node198.html\r\n\r\nMethod 2 seems easy enough, and I plan to use it in my application.\r\n\r\nReading through some of the discussion in https://github.com/mrdoob/three.js/issues/18996, it seems like this may be a compelling enough use case to either:\r\n\r\n1. Add a random method to the quaternion class that implements the logic described in method 2 above, or\r\n\r\n2. Add this logic to ```examples/jsm/math/Sampling.js``` or ```examples/jsm/math/Random.js```, as discussed in https://github.com/mrdoob/three.js/issues/18996#issuecomment-606243878\r\n\r\nWhat do you all think? I'd understand if you think it's too application-specific, but I figured I'd raise the idea anyway. I'd be happy to write a PR for either solution if you'd like.\r\n\r\nAll the best,\r\nCameron"},{"labels":["enhancement"],"text":"Hey, \r\nI've seen this in a handful of other libraries and always wondered why it wasn't included. If you don't use random vectors, then what are you doing with you life? I use it so often I add it in almost all my projects, it looks like this;\r\n```\r\nTHREE.Vector3.prototype.randomUnitVector = function(){\r\n    this.x = Math.random() * 2 - 1;\r\n    this.y = Math.random() * 2 - 1;\r\n    this.z = Math.random() * 2 - 1;\r\n    this.normalize();\r\n    return this;\r\n}\r\n```\r\nYou would call it like this;\r\n`let v = new THREE.Vector3().randomUnitVector();`\r\n\r\nThe name is quite long, maybe in relations to other vector functions names like .randomize() (like normalize) or just .random() would be more logical? \r\nYou could also give it an argument to set the length, but I find it more logical to call .setLength() afterwards because it wouldn't be a unit vector anymore and it's easier to read.\r\nI'm curious of what you think of it.\r\n\r\nKind regards, Ethan.\r\n\r\n"},{"labels":["enhancement"],"text":"Request add Frustum function named containsSphere.code like this \r\n\r\n```js\r\nfunction (sphere) {\r\n\r\n        var planes = this.planes;\r\n\r\n        for (var i = 0; i < 6; i++) {\r\n\r\n            if (planes[i].distanceToPoint(sphere.center) < sphere.radius) {\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n```\r\nIt will be useful to judge whether or not to see a whole object."},{"labels":["enhancement"],"text":"## Description of the problem\r\n\r\nThere is an abundance of textures that can be repeated without showing seams. However, if they are applied to anything but the simplest of shapes (squares in a perfect grid), seams will re-emerge. One important feature of seamless textures is that the specific UVs are irrelevant. What matters is that the UVs are consistent between multiple shapes.\r\n\r\nIn the image, a \"seamless\" texture has been applied to a grid of hexagons (one of the 3 possible regular polygons that can form a grid). Circled are the intersecting hexagon vertices and arrows point to the edge. Seams have been reintroduced due to the fact that the texture was designed to be seamless over a square, not a hexagon. Some textures, especially ones with higher contrast, appear much worse with these seams.\r\n![Screenshot from 2020-03-29 13-59-20](https://user-images.githubusercontent.com/20015102/77860767-c7a1ff00-71c5-11ea-8446-cbce8b138a01.png)\r\n\r\nUsing debug texture to highlight that, while specific UVs work for grids of squares, they don't for grids of hexagons (or triangles for that matter):\r\n![Screenshot from 2020-03-29 14-12-02](https://user-images.githubusercontent.com/20015102/77861033-772ba100-71c7-11ea-90f2-221016813ec4.png)\r\n\r\n## Describe the bug or feature request in detail\r\n\r\nOne way to achieve this consistency is the use a global coordinate system to drive the UVs, such as scene/world coordinates. There is a slight complication that the axis that translates world to uv coordinates is relevant to the process. Therefore, I propose that the axis be configurable. The lack of such an axis would indicate that the geometry's specific, local UVs should be used.\r\n\r\nPotential API: `material.uvsAxis = quaternion | plane | vector (normal to plane)`\r\n\r\nAlternate API: `material.uvsAxis = THREE.XZ | THREE.XY | THREE.YZ` (only support 3 axes)\r\n\r\nAlternate API: `geometry.uvsAxis = (see above); material.useUvsAxis = true` (allow each geometry to have its own UV axis.\r\n\r\nBoth would solve my problem, with the first being highly flexible. **To be clear, the implementation would project the world coordinate onto the axis to determine the resulting UV coordinate.**\r\n\r\nNot a solution: User having to manually set the UVs of each vertex of each mesh at all times. This approach doesn't support InstancedMesh, where each instance has the same UVs. It is also needlessly difficult.\r\n\r\n## Three.js version\r\n\r\nAs long as I can remember\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n"},{"labels":["enhancement"],"text":"I see there is a 3MF loader but no 3MF exporter. Would certainly be useful for 3D printing purposes to be able to export a mesh or group of meshes to 3MF"},{"labels":["enhancement"],"text":"## Description of the problem\r\n\r\nIf I have the following object hierarchy:\r\n```\r\nScene (layer = default)\r\n - Camera (layer = 0,1)\r\n - Other camera (layer = default)\r\n - Group (layer = default)\r\n  - Group (layer = default)\r\n  - Group (layer = 1)            <-- this object doesn't match \"Other camera\"\r\n   - Object3D (layer = default)  <-- but its children will still be rendered\r\n    - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n...more objects...\r\n   - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n\r\n(default layer, as defined by Three.js = 0)\r\n```\r\nI would expect \"Other camera\" to render any of the Object3Ds in the non-matching Group. However, unless I specifically set each of them to layer 1, they are still rendered. I would like to be able to mark the layer 1 Group to a endpoint in the layer calculation:\r\n```\r\ndefault = 0\r\n\r\nScene (layer = default)\r\n - Camera (layer = 0,1)\r\n - Other camera (layer = default)\r\n - Group (layer = default)\r\n  - Group (layer = 1, layers.endpoint = true) <-- additional property of Layers called \"endpoint\"\r\n   - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n   - Object3D (layer = default)\r\n...more objects...\r\n   - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n    - Object3D (layer = default)\r\n```\r\nAs I understand it, this could be easily implemented in the recursive rendering function:\r\n```\r\nfunction renderObject(object, ..., ignoreLayers) {\r\n  if (!object.visible) return;\r\n  \r\n  // Since ignoreLayers means that one of this object's parents\r\n  // was both shown and a layer endpoint, it is safe to assume\r\n  // this object should be shown too\r\n  if (ignoreLayers || object.layers.test(camera.layers)) {\r\n    ...do the actual rendering...\r\n\r\n    for (const child of object.children) {\r\n      renderObject(child, ..., ignoreLayers || object.layers.endpoint)\r\n    }\r\n  }\r\n}\r\n```\r\nThis solution is very flexible. If the user doesn't set `Layers.endpoint`, child objects of a non-matching parent will still be rendered. However, this solution allows for layers to be managed at an arbitrarily high level. This is great for object oriented purposes, since before the change, the following hierarchy would be problematic\r\n\r\n```javascript\r\n// Tools.js\r\nimport Hammer from './Hammer.js';\r\nimport Shovel from './Shovel.js'\r\n\r\nclass Tools extends THREE.Group {\r\n  constructor() {\r\n    super();\r\n    this.layers.set(1);\r\n\r\n    // This would be rendered by a camera set to layer 0 only :(\r\n    this.hammer = new Hammer();\r\n    this.shovel = new Shovel();\r\n  }\r\n}\r\n\r\n// Hammer.js\r\nclass Hammer extends THREE.Mesh {\r\n  constructor() {\r\n    // Load complex GLTF model with many individual objects for each part and each material\r\n    super(geo, mat)\r\n    this.add(other part of mesh) // Each of these would have to have its layers set separately\r\n    this.add(other part of mesh)\r\n    this.add(other part of mesh)\r\n  }\r\n}\r\n\r\n// Shovel.js\r\nclass Shovel extends THREE.Mesh {\r\n  constructor() {\r\n    // Load complex GLTF model with many individual objects for each part and each material\r\n    super(geo, mat)\r\n    this.add(other part of mesh) // Each of these would have to have its layers set separately\r\n    this.add(other part of mesh)\r\n    this.add(other part of mesh)\r\n  }\r\n}\r\n```\r\nIt is not reasonable to expect the user to traverse through each child object of the Hammer, Shovel, and all other child classes, setting each `Layers` to a specific value when it could be done at a high level:\r\n```javascript\r\n// Tools.js\r\nimport Hammer from './Hammer.js';\r\nimport Shovel from './Shovel.js'\r\n\r\nclass Tools THREE.Group {\r\n  constructor() {\r\n    super();\r\n    this.layers.set(_LAYER);\r\n    this.layers.endpoint = true;\r\n\r\n    // This would **not** be rendered by a camera set to layer 0 only :)\r\n    this.hammer = new Hammer();\r\n    this.shovel = new Shovel();\r\n  }\r\n\r\n  static get layer() {\r\n    return _LAYER; // Cameras can use this.layer.enable(tools.layer) to show all tools\r\n  }\r\n}\r\n\r\nconst _LAYER = 1;\r\n\r\n// Hammer.js and Shovel.js don't need to know what layer was assigned in Tools.js. It would be hard for them to know even if they wanted to, because importing Tools.js would create a circular reference.\r\n```\r\nTo explain for clarity, the `Renderer` would see the `endpoint` set to `true` and then use the `ToolBelt`'s layers object for all of its children\r\n\r\n## Other solution\r\n\r\nMake `Layers` behave like `object.visible` does. If a parent's layers don't match, don't render its children. This is simple but less flexible.\r\n\r\n## Other other solution\r\n\r\n`THREE.Object3D.layers` works differently than `THREE.Group.layers`. Children of a `THREE.Group` would not be rendered if the group's layer didn't match whereas children of a `THREE.Object3D` (or `THREE.Mesh`, etc.) would have their own layers tested.\r\n\r\n## Note\r\n\r\nI'm not 100% sure if the word `Layers.endpoint` is the best property name. Here are some other ideas:\r\n- `Layers.isEndpoint` (Boolean)\r\n- `Layers.final` (Boolean)\r\n- `Layers.override` (Boolean)\r\n- `Layers.mode` (Constant enum)\r\n- `Layers.grouped` (Boolean)\r\n- `Object3D.renderChildrenIfInvisible` (Boolean, default true)\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r114\r\n- [ ] ...\r\n\r\nAll versions since `Layers` added, all browsers, all OSes.\r\n"},{"labels":["enhancement"],"text":"Hey!\r\n\r\nI wanted to open a discussion about the current Loader system. Right now, most of the loaders use the `FileLoader` class, containing convenient setters such as `setRequestHeader()`. The current issue is that loader such as [VTKLoader](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/VTKLoader.js), [PLYLoader](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/PLYLoader.js) don't expose the `FileLoader`. It's indeed possible for a user to make custom requests, and is actually quite easy for those two loaders.\r\n\r\nHowever when using more complex loaders, such as the [GLTFLoader](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/GLTFLoader.js), it becomes harder because the format can depends on external resources. The same issue arises with [OBJLoader2](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/OBJLoader2.js).\r\n\r\nI am not sure yet about what would be the best way to handle that, but it would be a nice idea to try to standardize a common way of achieving that. What do you think?"},{"labels":["enhancement"],"text":"PLYExporter needs to support little endian.\r\n\r\nI had to change code for that.\r\n\r\nPLYExporter.d.ts\r\n```ts\r\nimport { Object3D } from 'three';\r\n\r\nexport interface PLYExporterOptions {\r\n\tbinary?: boolean;\r\n\tlittleEndian?: boolean;\r\n\texcludeAttributes?: string[];\r\n}\r\n\r\nexport class PLYExporter {\r\n\r\n\tconstructor();\r\n\r\n\tparse( object: Object3D, onDone: ( res: string ) => void, options: PLYExporterOptions ): string | null;\r\n\r\n}\r\n```\r\n\r\nPLYExporter.js\r\n\r\n```js\r\n/**\r\n * @author Garrett Johnson / http://gkjohnson.github.io/\r\n * https://github.com/gkjohnson/ply-exporter-js\r\n *\r\n * Usage:\r\n *  var exporter = new PLYExporter();\r\n *\r\n *  // second argument is a list of options\r\n *  exporter.parse(mesh, data => console.log(data), { binary: true, excludeAttributes: [ 'color' ] });\r\n *\r\n * Format Definition:\r\n * http://paulbourke.net/dataformats/ply/\r\n */\r\n\r\nimport {\r\n\tBufferGeometry,\r\n\tMatrix3,\r\n\tVector3\r\n} from \"three\";\r\n\r\nvar PLYExporter = function () {};\r\n\r\nPLYExporter.prototype = {\r\n\r\n\tconstructor: PLYExporter,\r\n\r\n\tparse: function ( object, onDone, options ) {\r\n\r\n\t\tif ( onDone && typeof onDone === 'object' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.PLYExporter: The options parameter is now the third argument to the \"parse\" function. See the documentation for the new API.' );\r\n\t\t\toptions = onDone;\r\n\t\t\tonDone = undefined;\r\n\r\n\t\t}\r\n\r\n\t\t// Iterate over the valid meshes in the object\r\n\t\tfunction traverseMeshes( cb ) {\r\n\r\n\t\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\t\tif ( child.isMesh === true ) {\r\n\r\n\t\t\t\t\tvar mesh = child;\r\n\t\t\t\t\tvar geometry = mesh.geometry;\r\n\r\n\t\t\t\t\tif ( geometry.isGeometry === true ) {\r\n\r\n\t\t\t\t\t\tgeometry = geomToBufferGeom.get( geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( geometry.isBufferGeometry === true ) {\r\n\r\n\t\t\t\t\t\tif ( geometry.getAttribute( 'position' ) !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tcb( mesh, geometry );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\t// Default options\r\n\t\tvar defaultOptions = {\r\n\t\t\tbinary: false,\r\n\t\t\texcludeAttributes: [] // normal, uv, color, index\r\n\t\t};\r\n\r\n\t\toptions = Object.assign( defaultOptions, options );\r\n\r\n\t\tvar excludeAttributes = options.excludeAttributes;\r\n\t\tvar geomToBufferGeom = new WeakMap();\r\n\t\tvar includeNormals = false;\r\n\t\tvar includeColors = false;\r\n\t\tvar includeUVs = false;\r\n\r\n\t\t// count the vertices, check which properties are used,\r\n\t\t// and cache the BufferGeometry\r\n\t\tvar vertexCount = 0;\r\n\t\tvar faceCount = 0;\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.isMesh === true ) {\r\n\r\n\t\t\t\tvar mesh = child;\r\n\t\t\t\tvar geometry = mesh.geometry;\r\n\r\n\t\t\t\tif ( geometry.isGeometry === true ) {\r\n\r\n\t\t\t\t\tvar bufferGeometry = geomToBufferGeom.get( geometry ) || new BufferGeometry().setFromObject( mesh );\r\n\t\t\t\t\tgeomToBufferGeom.set( geometry, bufferGeometry );\r\n\t\t\t\t\tgeometry = bufferGeometry;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( geometry.isBufferGeometry === true ) {\r\n\r\n\t\t\t\t\tvar vertices = geometry.getAttribute( 'position' );\r\n\t\t\t\t\tvar normals = geometry.getAttribute( 'normal' );\r\n\t\t\t\t\tvar uvs = geometry.getAttribute( 'uv' );\r\n\t\t\t\t\tvar colors = geometry.getAttribute( 'color' );\r\n\t\t\t\t\tvar indices = geometry.getIndex();\r\n\r\n\t\t\t\t\tif ( vertices === undefined ) {\r\n\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertexCount += vertices.count;\r\n\t\t\t\t\tfaceCount += indices ? indices.count / 3 : vertices.count / 3;\r\n\r\n\t\t\t\t\tif ( normals !== undefined ) includeNormals = true;\r\n\r\n\t\t\t\t\tif ( uvs !== undefined ) includeUVs = true;\r\n\r\n\t\t\t\t\tif ( colors !== undefined ) includeColors = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tvar includeIndices = excludeAttributes.indexOf( 'index' ) === - 1;\r\n\t\tincludeNormals = includeNormals && excludeAttributes.indexOf( 'normal' ) === - 1;\r\n\t\tincludeColors = includeColors && excludeAttributes.indexOf( 'color' ) === - 1;\r\n\t\tincludeUVs = includeUVs && excludeAttributes.indexOf( 'uv' ) === - 1;\r\n\r\n\r\n\t\tif ( includeIndices && faceCount !== Math.floor( faceCount ) ) {\r\n\r\n\t\t\t// point cloud meshes will not have an index array and may not have a\r\n\t\t\t// number of vertices that is divisble by 3 (and therefore representable\r\n\t\t\t// as triangles)\r\n\t\t\tconsole.error(\r\n\r\n\t\t\t\t'PLYExporter: Failed to generate a valid PLY file with triangle indices because the ' +\r\n\t\t\t\t'number of indices is not divisible by 3.'\r\n\r\n\t\t\t);\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar indexByteCount = 4;\r\n\r\n\t\tvar header =\r\n\t\t\t'ply\\n' +\r\n\t\t\t`format ${ options.binary ? (options.littleEndian?'binary_little_endian':'binary_big_endian') : 'ascii' } 1.0\\n` +\r\n\t\t\t`element vertex ${vertexCount}\\n` +\r\n\r\n\t\t\t// position\r\n\t\t\t'property float x\\n' +\r\n\t\t\t'property float y\\n' +\r\n\t\t\t'property float z\\n';\r\n\r\n\t\tif ( includeNormals === true ) {\r\n\r\n\t\t\t// normal\r\n\t\t\theader +=\r\n\t\t\t\t'property float nx\\n' +\r\n\t\t\t\t'property float ny\\n' +\r\n\t\t\t\t'property float nz\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includeUVs === true ) {\r\n\r\n\t\t\t// uvs\r\n\t\t\theader +=\r\n\t\t\t\t'property float s\\n' +\r\n\t\t\t\t'property float t\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includeColors === true ) {\r\n\r\n\t\t\t// colors\r\n\t\t\theader +=\r\n\t\t\t\t'property uchar red\\n' +\r\n\t\t\t\t'property uchar green\\n' +\r\n\t\t\t\t'property uchar blue\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includeIndices === true ) {\r\n\r\n\t\t\t// faces\r\n\t\t\theader +=\r\n\t\t\t\t`element face ${faceCount}\\n` +\r\n\t\t\t\t`property list uchar int vertex_index\\n`;\r\n\r\n\t\t}\r\n\r\n\t\theader += 'end_header\\n';\r\n\r\n\r\n\t\t// Generate attribute data\r\n\t\tvar vertex = new Vector3();\r\n\t\tvar normalMatrixWorld = new Matrix3();\r\n\t\tvar result = null;\r\n\r\n\t\tif ( options.binary === true ) {\r\n\r\n\t\t\t// Binary File Generation\r\n\t\t\tvar headerBin = new TextEncoder().encode( header );\r\n\r\n\t\t\t// 3 position values at 4 bytes\r\n\t\t\t// 3 normal values at 4 bytes\r\n\t\t\t// 3 color channels with 1 byte\r\n\t\t\t// 2 uv values at 4 bytes\r\n\t\t\tvar vertexListLength = vertexCount * ( 4 * 3 + ( includeNormals ? 4 * 3 : 0 ) + ( includeColors ? 3 : 0 ) + ( includeUVs ? 4 * 2 : 0 ) );\r\n\r\n\t\t\t// 1 byte shape desciptor\r\n\t\t\t// 3 vertex indices at ${indexByteCount} bytes\r\n\t\t\tvar faceListLength = includeIndices ? faceCount * ( indexByteCount * 3 + 1 ) : 0;\r\n\t\t\tvar output = new DataView( new ArrayBuffer( headerBin.length + vertexListLength + faceListLength ) );\r\n\t\t\tnew Uint8Array( output.buffer ).set( headerBin, 0 );\r\n\r\n\r\n\t\t\tvar vOffset = headerBin.length;\r\n\t\t\tvar fOffset = headerBin.length + vertexListLength;\r\n\t\t\tvar writtenVertices = 0;\r\n\t\t\ttraverseMeshes( function ( mesh, geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.getAttribute( 'position' );\r\n\t\t\t\tvar normals = geometry.getAttribute( 'normal' );\r\n\t\t\t\tvar uvs = geometry.getAttribute( 'uv' );\r\n\t\t\t\tvar colors = geometry.getAttribute( 'color' );\r\n\t\t\t\tvar indices = geometry.getIndex();\r\n\r\n\t\t\t\tnormalMatrixWorld.getNormalMatrix( mesh.matrixWorld );\r\n\r\n\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvertex.x = vertices.getX( i );\r\n\t\t\t\t\tvertex.y = vertices.getY( i );\r\n\t\t\t\t\tvertex.z = vertices.getZ( i );\r\n\r\n\t\t\t\t\tvertex.applyMatrix4( mesh.matrixWorld );\r\n\r\n\r\n\t\t\t\t\t// Position information\r\n\t\t\t\t\toutput.setFloat32( vOffset, vertex.x, options.littleEndian );\r\n\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\toutput.setFloat32( vOffset, vertex.y, options.littleEndian );\r\n\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\toutput.setFloat32( vOffset, vertex.z, options.littleEndian );\r\n\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t// Normal information\r\n\t\t\t\t\tif ( includeNormals === true ) {\r\n\r\n\t\t\t\t\t\tif ( normals != null ) {\r\n\r\n\t\t\t\t\t\t\tvertex.x = normals.getX( i );\r\n\t\t\t\t\t\t\tvertex.y = normals.getY( i );\r\n\t\t\t\t\t\t\tvertex.z = normals.getZ( i );\r\n\r\n\t\t\t\t\t\t\tvertex.applyMatrix3( normalMatrixWorld ).normalize();\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, vertex.x, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, vertex.y, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, vertex.z, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, 0, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, 0, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, 0, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// UV information\r\n\t\t\t\t\tif ( includeUVs === true ) {\r\n\r\n\t\t\t\t\t\tif ( uvs != null ) {\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, uvs.getX( i ), options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, uvs.getY( i ), options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t} else if ( includeUVs !== false ) {\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, 0, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setFloat32( vOffset, 0, options.littleEndian );\r\n\t\t\t\t\t\t\tvOffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Color information\r\n\t\t\t\t\tif ( includeColors === true ) {\r\n\r\n\t\t\t\t\t\tif ( colors != null ) {\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, Math.floor( colors.getX( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, Math.floor( colors.getY( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, Math.floor( colors.getZ( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, 255 );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, 255 );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( vOffset, 255 );\r\n\t\t\t\t\t\t\tvOffset += 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( includeIndices === true ) {\r\n\r\n\t\t\t\t\t// Create the face list\r\n\r\n\t\t\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( fOffset, 3 );\r\n\t\t\t\t\t\t\tfOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, indices.getX( i + 0 ) + writtenVertices, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, indices.getX( i + 1 ) + writtenVertices, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, indices.getX( i + 2 ) + writtenVertices, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\toutput.setUint8( fOffset, 3 );\r\n\t\t\t\t\t\t\tfOffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, writtenVertices + i, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, writtenVertices + i + 1, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t\toutput.setUint32( fOffset, writtenVertices + i + 2, options.littleEndian );\r\n\t\t\t\t\t\t\tfOffset += indexByteCount;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Save the amount of verts we've already written so we can offset\r\n\t\t\t\t// the face index on the next mesh\r\n\t\t\t\twrittenVertices += vertices.count;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tresult = output.buffer;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Ascii File Generation\r\n\t\t\t// count the number of vertices\r\n\t\t\tvar writtenVertices = 0;\r\n\t\t\tvar vertexList = '';\r\n\t\t\tvar faceList = '';\r\n\r\n\t\t\ttraverseMeshes( function ( mesh, geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.getAttribute( 'position' );\r\n\t\t\t\tvar normals = geometry.getAttribute( 'normal' );\r\n\t\t\t\tvar uvs = geometry.getAttribute( 'uv' );\r\n\t\t\t\tvar colors = geometry.getAttribute( 'color' );\r\n\t\t\t\tvar indices = geometry.getIndex();\r\n\r\n\t\t\t\tnormalMatrixWorld.getNormalMatrix( mesh.matrixWorld );\r\n\r\n\t\t\t\t// form each line\r\n\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvertex.x = vertices.getX( i );\r\n\t\t\t\t\tvertex.y = vertices.getY( i );\r\n\t\t\t\t\tvertex.z = vertices.getZ( i );\r\n\r\n\t\t\t\t\tvertex.applyMatrix4( mesh.matrixWorld );\r\n\r\n\r\n\t\t\t\t\t// Position information\r\n\t\t\t\t\tvar line =\r\n\t\t\t\t\t\tvertex.x + ' ' +\r\n\t\t\t\t\t\tvertex.y + ' ' +\r\n\t\t\t\t\t\tvertex.z;\r\n\r\n\t\t\t\t\t// Normal information\r\n\t\t\t\t\tif ( includeNormals === true ) {\r\n\r\n\t\t\t\t\t\tif ( normals != null ) {\r\n\r\n\t\t\t\t\t\t\tvertex.x = normals.getX( i );\r\n\t\t\t\t\t\t\tvertex.y = normals.getY( i );\r\n\t\t\t\t\t\t\tvertex.z = normals.getZ( i );\r\n\r\n\t\t\t\t\t\t\tvertex.applyMatrix3( normalMatrixWorld ).normalize();\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tvertex.x + ' ' +\r\n\t\t\t\t\t\t\t\tvertex.y + ' ' +\r\n\t\t\t\t\t\t\t\tvertex.z;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tline += ' 0 0 0';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// UV information\r\n\t\t\t\t\tif ( includeUVs === true ) {\r\n\r\n\t\t\t\t\t\tif ( uvs != null ) {\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tuvs.getX( i ) + ' ' +\r\n\t\t\t\t\t\t\t\tuvs.getY( i );\r\n\r\n\t\t\t\t\t\t} else if ( includeUVs !== false ) {\r\n\r\n\t\t\t\t\t\t\tline += ' 0 0';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Color information\r\n\t\t\t\t\tif ( includeColors === true ) {\r\n\r\n\t\t\t\t\t\tif ( colors != null ) {\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tMath.floor( colors.getX( i ) * 255 ) + ' ' +\r\n\t\t\t\t\t\t\t\tMath.floor( colors.getY( i ) * 255 ) + ' ' +\r\n\t\t\t\t\t\t\t\tMath.floor( colors.getZ( i ) * 255 );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tline += ' 255 255 255';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertexList += line + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create the face list\r\n\t\t\t\tif ( includeIndices === true ) {\r\n\r\n\t\t\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tfaceList += `3 ${ indices.getX( i + 0 ) + writtenVertices }`;\r\n\t\t\t\t\t\t\tfaceList += ` ${ indices.getX( i + 1 ) + writtenVertices }`;\r\n\t\t\t\t\t\t\tfaceList += ` ${ indices.getX( i + 2 ) + writtenVertices }\\n`;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tfaceList += `3 ${ writtenVertices + i } ${ writtenVertices + i + 1 } ${ writtenVertices + i + 2 }\\n`;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfaceCount += indices ? indices.count / 3 : vertices.count / 3;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\twrittenVertices += vertices.count;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tresult = `${ header }${vertexList}${ includeIndices ? `${faceList}\\n` : '\\n' }`;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof onDone === 'function' ) requestAnimationFrame( () => onDone( result ) );\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { PLYExporter };\r\n\r\n```\r\n\r\nPlease check and include to the upcoming release.\r\nThanks."},{"labels":["enhancement"],"text":"At the moment even when `Texture.generateMipmaps` is set to true mipmaps are not generated if [minFilter is set to NearestFilter or LinearFilter](https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLTextures.js#L125). However when using the [shader_texture_lod](https://developer.mozilla.org/en-US/docs/Web/API/EXT_shader_texture_lod) extension to enable the `texture2DLodEXT` function in shaders (available by default in WebGL2) it doesn't work as expected because mipmaps aren't available even if you've explicitly set `generateMipmaps = true`."},{"labels":["enhancement"],"text":"**Request**\r\n\r\nAllow raycast function to prevent traversal of children so the parent object can handle custom raycasting for the child objects.\r\n\r\n**Use Case**\r\n\r\nI'm currently writing a [3D Tiles renderer library for three.js](https://github.com/NASA-AMMOS/3DTilesRendererJS/) and I would like to take advantage of the bounding volume hierarchy for raycasting. For context the 3D Tiles format specifies a hierarchy of geometry that is swapped out as the camera gets closer. Each level of the tree has a bounding box that encapsulates all the child tiles. The bounding hierarchy should be able to be used to improve raycast performance by culling parts of the potentially deep tree more quickly. In the library all visible tiles viewable by the camera are added as children of a parent group called TilingGroup.\r\n\r\nI would like to perform the hierarchy check in `TilingGroup.raycast` and only call `intersectObjects` on the geometry within the appropriate bounds. However the way Raycaster works right now [all children are always traversed](https://github.com/mrdoob/three.js/blob/master/src/core/Raycaster.js#L49-L65), which means there's no opportunity to check the the bounding tree before performing raycasts.\r\n\r\nOne approach would be to allow `raycast` to return a boolean which would prevent the Raycaster from traversing the Groups children, but that might not play nice with the new Layers functionality. Another option would be to move some of the raycast traversal logic into `Object3D.raycast` so it can be overridden.\r\n\r\nMaybe there are some other suggestions? I've looked a few different options but so far I've come up empty.\r\n\r\nThanks!"},{"labels":["enhancement"],"text":"I'd like to suggest to enable vertexColors on MeshMatcapMaterial.\r\n\r\nCurrently, it doesn't reference vertex colors so I had to do it like this.\r\n\r\n```\r\n    this.defaultMaterials[ViewTypes.Heatmap] = new THREE.MeshMatcapMaterial({ vertexColors: THREE.VertexColors, color: 0xffffff, matcap: matcapTexture })\r\n    \r\n    this.defaultMaterials[ViewTypes.Heatmap].onBeforeCompile = shader => {\r\n      shader.vertexShader = shader.vertexShader\r\n        .replace(/#include <uv_pars_vertex>[ \\t\\n]*#include <displacementmap_pars_vertex>/, `\r\n          #include <uv_pars_vertex>\r\n          #include <color_pars_vertex>\r\n          #include <displacementmap_pars_vertex>`)\r\n        .replace(/#include <uv_vertex>[ \\t\\n]*#include <beginnormal_vertex>/, `\r\n          #include <uv_vertex>\r\n          #include <color_vertex>\r\n          #include <beginnormal_vertex>`)\r\n\r\n      shader.fragmentShader = shader.fragmentShader\r\n        .replace(/#include <common>[ \\t\\n]*#include <uv_pars_fragment>/, `\r\n          #include <common>\r\n          #include <color_pars_fragment>\r\n          #include <uv_pars_fragment>`)\r\n        .replace(/#include <map_fragment>[ \\t\\n]*#include <alphamap_fragment>/, `\r\n          #include <map_fragment>\r\n          #include <color_fragment>\r\n          #include <alphamap_fragment>`)\r\n    }\r\n```\r\n\r\nThis kind of material is useful to show heat-map of model which have 3d-like view and can be seen any direction regardless of lights.\r\n\r\nRegards."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\n`WebGLRenderer.copyTextureToTexture()` does not support compressed textures\r\n\r\nWhen using regular PNGs, I can use `WebGLRenderer.copyTextureToTexture()` to add a green tile to the face of a rotating cube:\r\nhttps://frankolivier.github.io/bugs/copyTextureToTexture-and-compressed-textures/png/\r\n\r\nWhen using (Basis) compressed textures, it does not work:\r\nhttps://frankolivier.github.io/bugs/copyTextureToTexture-and-compressed-textures/basis-broken\r\n(Observe: no green tile)\r\n\r\nThe fix is to add \r\n\r\n```js\r\nif ( srcTexture.isCompressedTexture ) {\r\n    _gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[0].width, srcTexture.mipmaps[0].height, glFormat, srcTexture.mipmaps[0].data );\r\n}\r\n```\r\n\r\n...to `.copyTextureToTexture()`\r\n\r\nSee a fixed example in https://frankolivier.github.io/bugs/copyTextureToTexture-and-compressed-textures/basis-fixed/\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r114\r\n- [ ] ...\r\n\r\n##### Browser\r\n- [x] All of them\r\n\r\n##### OS\r\n- [x] All of them\r\n\r\n##### Hardware Requirements\r\nAny"},{"labels":["enhancement",null],"text":"GCode for 3D printing has many options and settings. one of them is to define if the 'E' parameter is in absolute coordinates or in relative coordinates. it is set by using the [M82](https://marlinfw.org/docs/gcode/M082.html) or [M83](https://marlinfw.org/docs/gcode/M083.html) command.\r\n\r\nNow by default the only mode is absolute.\r\nhttps://github.com/mrdoob/three.js/blob/2df85012e54ef3924f7f91608b87bdf40d9ccf3d/examples/js/loaders/GCodeLoader.js#L127\r\nthis is the line that may need to change.\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r114\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Feature request\r\n\r\nOrbitControls were originally created to rotate a camera around a point in a scene:\r\n<img width=\"400\" alt=\"Screen Shot 2020-01-28 at 3 32 16 PM\" src=\"https://user-images.githubusercontent.com/1710493/73314867-6cfb1f80-41e3-11ea-9e44-597ca914f2ba.png\">\r\nhttps://threejs.org/examples/#misc_controls_orbit\r\n\r\nTransformControls were originally created for rotating individual objects within a scene:\r\n<img width=\"400\" alt=\"Screen Shot 2020-01-28 at 3 32 26 PM\" src=\"https://user-images.githubusercontent.com/1710493/73314876-74222d80-41e3-11ea-93e0-fa89beb1b987.png\">\r\nhttps://threejs.org/examples/#misc_controls_transform\r\n\r\nHowever in most examples and in web apps, we seem to be using OrbitControls to rotate objects? e.g.\r\nhttps://threejs.org/examples/#webgl_materials_normalmap_object_space\r\nhttps://threejs.org/examples/#webgl_clipping_intersection\r\nhttps://threejs.org/examples/#webgl_clipping_stencil\r\nhttps://threejs.org/examples/#webgl_decals\r\netc...\r\n\r\nThis usage creates confusion when you actually do want to rotate an object (and control the camera separately). In my case I needed the user to spin a globe, while the camera pans to a certain viewing angle.\r\n\r\nNeither OrbitControls or TransformControls fully support the actual needed functionality needed for object spinning:\r\n- OrbitControls locks your camera.lookAt to controls.target, and is spinning the camera not the object, which also spins the scenes.\r\n- TransformControls correctly spins the object, but doesn't support damping / free spinning / hiding the gizmo gui.\r\n\r\nSo with that in mind, could we add an example for ObjectControls?\r\n\r\nThe controls implementation of Autodesk Forge viewer is probably a good benchmark:\r\nhttps://forge-rcdb.autodesk.io/configurator?id=5904729b0007f5ead5b1196d\r\n\r\nSome ideal features:\r\n- Selecting an object\r\n- Rotate object\r\n- Lock axis\r\n- Free spin in any direction\r\n- Damping to slowly spin to a stop\r\n\r\nHere is my attempt at a potential solution by using TransformControls as a reference:\r\n\r\nindex.html\r\n```\r\ncontrol = new ObjectControls(camera, renderer.domElement);\r\ncontrol.enableDamping = true;\r\ncontrol.freeMode = true;\r\ncontrol.setMode('rotate');\r\ncontrol.showX = false;\r\ncontrol.showY = false;\r\ncontrol.showZ = false;\r\n```\r\n\r\nObjectControls.js line 69\r\n```\r\n// Set to true to enable damping (inertia)\r\n// If damping is enabled, you must call controls.update() in your animation loop\r\ndefineProperty( \"enableDamping\", false );\r\ndefineProperty( \"dampingFactor\", 0.05 );\r\ndefineProperty( \"freeMode\", false );\r\ndefineProperty( \"rotateSpeed\", 1.0 );\r\n```\r\n\r\nline 128:\r\n```\r\nvar rotateStart = new Vector2();\r\nvar rotateEnd = new Vector2();\r\nvar rotateDelta = new Vector2();\r\n```\r\n\r\nline 255:\r\n```\r\nthis.pointerHover = function ( pointer ) {\r\n  if ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n  if (this.freeMode === true) {\r\n    this.axis = 'XYZE';\r\n    return;\r\n  }\r\n  ray.setFromCamera( pointer, this.camera );\r\n  var intersect = ray.intersectObjects( _gizmo.picker[ this.mode ].children, true )[ 0 ] || false;\r\n  if ( intersect ) {\r\n    this.axis = intersect.object.name;\r\n  } else {\r\n    this.axis = null;\r\n  }\r\n};\r\n```\r\n\r\nline 523:\r\n`var ROTATION_SPEED = 2 / worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );`\r\n\r\nline 724:\r\n```\r\nthis.update = function () {\r\n  if (this.dragging === false && scope.enableDamping && (Math.abs(rotateDelta.x) > 0.01 || Math.abs(rotateDelta.y) > 0.01)) {\r\n    quaternionStart.copy( this.object.quaternion );\r\n    offset = new Vector3(\r\n      rotateDelta.x * 5,\r\n      - rotateDelta.y * 5,\r\n      0\r\n    );\r\n    rotateDelta.x *= 1 - scope.dampingFactor;\r\n    rotateDelta.y *= 1 - scope.dampingFactor;\r\n    var ROTATION_SPEED = .1 / worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\r\n    rotationAxis.copy( offset ).cross( eye ).normalize();\r\n    rotationAngle = offset.dot( _tempVector.copy( rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\r\n    rotationAxis.applyQuaternion( parentQuaternionInv );\r\n    this.object.quaternion.copy( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) );\r\n    this.object.quaternion.multiply( quaternionStart ).normalize();\r\n  }\r\n};\r\n```\r\n\r\nline 644:\r\n```\r\nfunction onPointerDown( event ) {\r\n  if ( ! scope.enabled ) return;\r\n  rotateStart.set( event.clientX, event.clientY );\r\n  document.addEventListener( \"mousemove\", onPointerMove, false );\r\n  scope.pointerHover( getPointer( event ) );\r\n  scope.pointerDown( getPointer( event ) );\r\n}\r\nfunction onPointerMove( event ) {\r\n  if ( ! scope.enabled ) return;\r\n  rotateEnd.set( event.clientX, event.clientY );\r\n  rotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n  scope.pointerMove( getPointer( event ) );\r\n  rotateStart.copy( rotateEnd );\r\n}\r\n```\r\n\r\nline 1178:\r\n```\r\nif (this.freeMode === true) {\r\n  this.gizmo[ \"translate\" ].visible = false;\r\n  this.gizmo[ \"rotate\" ].visible = false;\r\n  this.gizmo[ \"scale\" ].visible = false;\r\n\r\n  this.helper[ \"translate\" ].visible = false;\r\n  this.helper[ \"rotate\" ].visible = false;\r\n  this.helper[ \"scale\" ].visible = false;\r\n} else {\r\n  this.gizmo[ \"translate\" ].visible = this.mode === \"translate\";\r\n  this.gizmo[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n  this.gizmo[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n  this.helper[ \"translate\" ].visible = this.mode === \"translate\";\r\n  this.helper[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n  this.helper[ \"scale\" ].visible = this.mode === \"scale\";\r\n}\r\n```\r\n\r\nLive example:\r\n* [jsfiddle](https://jsfiddle.net/kmturley/2p1v6bcw/20/)\r\n* [Somone else's example](http://projects.defmech.com/ThreeJSObjectRotationWithQuaternion/)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r112\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nNone"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI have been using GLTFLoader with DracoLoader to load my GLTF model and it simply doesn't without hacks. \r\n\r\nThere are errors that I have dealt with:\r\n\r\n- Refused to execute script from 'blob:http://localhost/70c5a9eb-f362-41b3-a00a-fdbdfd5159c8' because its MIME type ('') is not executable.\r\nFix is next: `this.workerSourceURL = URL.createObjectURL( new Blob( [ body ], { type: 'text/javascript' } ) );`\r\n\r\n - ReferenceError: document is not defined\r\n    at ImageLoader.load (http://localhost/ed0f7af9865be3c65a71.worker.js:42943:15)\r\n    at TextureLoader.load (http://localhost/ed0f7af9865be3c65a71.worker.js:43068:10)\r\n    at http://localhost/ed0f7af9865be3c65a71.worker.js:59389:12\r\n    at new Promise (<anonymous>)\r\nFix is next: `this.textureLoader = typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope ? new ImageBitmapLoader( this.options.manager ) : new TextureLoader( this.options.manager );`\r\n\r\n- Uncaught (in promise) Error: context.requestAnimationFrame is not a function\r\n    at Wheel.worker.ts:69\r\n    at _onError (GLTFLoader.js:118)\r\nFix is next: `animation.setContext( window || self );`\r\n\r\nPartially related to https://github.com/mrdoob/three.js/issues/15556\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r113\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [] All of them\r\n- [x] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [x] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\nAny device that supports https://caniuse.com/#feat=offscreencanvas\r\nI am testing on my Pixel 4XL"},{"labels":["enhancement"],"text":"##### Description of the problem:\r\n\r\nThree.js supports [a number of ASTC formats](https://github.com/mrdoob/three.js/blob/dev/src/constants.js#L118), but not [the complete set](https://www.khronos.org/registry/OpenGL/extensions/KHR/KHR_texture_compression_astc_hdr.txt) (ctrl+f \"0x93D7\"). The omission of the \\*\\_SRGB8\\_ALPHA8\\_\\* formats means that Three.js won't load properly-encoded sRGB ASTCs. This is because ASTC can encode RGB data as either linear or sRGB, but it can only encode the alpha channel as linear. When using sRGB encoding, the RGB and the Alpha channels are distinct and a different format, and thus enum, is used.\r\n\r\nI've put together a somewhat crude [example](https://jsfiddle.net/hrpj50Le/).\r\n\r\nIf line 50 calls getBase64ImgL(), it loads the KTX file containing the linearly-encoded ASTC. If your device doesn't support ASTC, you'll get the following, expected warnings: \r\n![2020-02-27](https://user-images.githubusercontent.com/52218417/75489153-b9bb4d00-597f-11ea-9744-28b0740de148.png)\r\nI also print out the texture object, and we can see that the texture's internal format is 37815, the enum for an RGBA 8x8 ASTC. (If your device does support the format, it should show up as the texture on the plane)\r\n\r\nIf line 50 instead calls getBase64ImgS() to load the sRGB texture, the error is different:\r\n![2020-02-27 (1)](https://user-images.githubusercontent.com/52218417/75489304-00a94280-5980-11ea-8333-a796662e1462.png)\r\nThe texture's format is 37847, which is the enum for an SRGB8_ALPHA8 8x8 ASTC but isn't defined as such by Three. Because Three.js doesn't even realize it's looking at an ASTC texture, there is also no warning about device compatibility (and it will still fail even if your device supports ASTC)\r\n\r\nIf #12939 is good indication, implementing these formats may be as easy as adding the appropriate enums to constants.js and WebGLUtils.js, but I don't have easy means to tinker with it myself.\r\n\r\nI'm including the ASTC (actually, KTX) files I'm using, generated with PVRtexTool as a GUI for ASTCEnc.exe: [ASTCTestSet.zip](https://github.com/mrdoob/three.js/files/4264299/ASTCTestSet.zip)\r\n\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r113\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [x] Android (especially)\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\nASTCs ought to work on Oculus Quest and most Android phones, but JSFiddle doesn't so if you want to see for yourself, it'll take some work."},{"labels":["enhancement"],"text":"When unrolling a loop that has a block statement in it the shader breaks because it considers the first `}` encountered to be closing the for loop. For example this works:\r\n\r\n```js\r\n#pragma unroll_loop\r\nfor ( int i = 0; i < 6; i ++ ) {\r\n\r\n    if ( i < NUM_DIR_LIGHT_SHADOWS ) directLight.color *= getShadow( /* ... */ );\r\n\r\n}\r\n```\r\n\r\nBut this breaks:\r\n\r\n```js\r\n#pragma unroll_loop\r\nfor ( int i = 0; i < 6; i ++ ) {\r\n\r\n    if ( i < NUM_DIR_LIGHT_SHADOWS ) {\r\n\r\n        directLight.color *= getShadow( /* ... */ );\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe problematic regex is here:\r\n\r\nhttps://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLProgram.js#L224"},{"labels":["enhancement"],"text":"MeshPhysicalMaterial currently offers:\r\n\r\n- clearcoat\r\n- clearcoatRoughness\r\n- clearcoatNormalMap\r\n\r\nThe [glTF extension `KHR_materials_clearcoat`](https://github.com/KhronosGroup/glTF/pull/1756) will also require texture versions of the first two, which I'd propose adding to (only) MeshPhysicalMaterial:\r\n\r\n- clearcoatMap\r\n- clearcoatRoughnessMap\r\n\r\n"},{"labels":["enhancement",null],"text":"When using InstancedMesh for repeating objects and then exporting it through ColladaExporter, only the base mesh appears in exported model, no instances."},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\n`OutlinePass` does not appear to properly support `InstancedMesh`. I've created an example here that uses the same setup of `OutlinePass` in the example in the docs. The sphere is a regular `Mesh` and the squares are the instances of `InstancedMesh`.\r\nhttps://jsfiddle.net/anthonysimone/dL8s2qmv/\r\n\r\nIt seems like there's a couple things going on here.\r\n\r\n1. If you hover over the regular mesh first (sphere), then one of the instanced mesh instances, the base position of the `InstancedMesh` is outlined any time you’re hovering over any of the instances. In the above example all of the instances have been moved from the default position to demonstrate this clearly.\r\n2. If you first hover over any of the box instances, the entire collection of instances (though not the base position) of the `InstancedMesh` are outlined, but then hovering over a regular mesh (the sphere) causes an error.\r\n\r\nI dug into `OutlinePass` a bit and it seems like it might just not be taking into account handling instanced meshes separately from regular meshes. I'm still pretty new to Three.js, so I don't have a potential fix to suggest at this point.\r\n\r\n##### Three.js version\r\n\r\n- [x] r113\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS"},{"labels":["enhancement"],"text":"##### Feature request\r\n\r\nOrbitControls allows us to quickly implement a rotating camera around a scene. But many people actually use it for rotating an object. There are use cases where you don't always want your camera viewport to look directly at the controls rotation target.\r\n\r\nConsider the SketchFab object viewer for example:\r\nhttps://sketchfab.com/3d-models/the-whole-world-712c2de7426f4eb59aa101d21cd72492\r\n\r\nWhen you rotate an object with the camera zoomed out, all functions well:\r\n<img width=\"595\" alt=\"Screen Shot 2020-01-24 at 2 43 25 PM\" src=\"https://user-images.githubusercontent.com/1710493/73110011-bda80b00-3eb9-11ea-8326-b8f6e5bcc5a3.png\">\r\n\r\nYou can zoom and pan to focus the camera on the poles using Shift-Mouse-drag:\r\n<img width=\"1063\" alt=\"Screen Shot 2020-01-24 at 2 44 06 PM\" src=\"https://user-images.githubusercontent.com/1710493/73110101-095ab480-3eba-11ea-940b-16397df026ab.png\">\r\n\r\nBut now when you continue to rotate around the globe, you suddenly start seeing inside the object and strange angles (because the rotation target is not the center of the globe anymore):\r\n<img width=\"1064\" alt=\"Screen Shot 2020-01-24 at 2 59 03 PM\" src=\"https://user-images.githubusercontent.com/1710493/73110123-18d9fd80-3eba-11ea-8b44-dc300252d079.png\">\r\n\r\n**1) Allow camera.lookAt to be offset from controls.target**\r\nNow I understand it's intended functionality for OrbitControls to keep the camera looking at the target as it's primarily for orbiting a scene not an object, but wondering if it's possible to support more customization of the controls target vs camera lookAt functionality? currently when using OrbitControls the camera.lookAt function is effectively disabled.\r\n\r\n**2) Create ObjectControls for exploring/panning individual objects**\r\nOr if you would consider a new ObjectControls template which rotates the object smoothly instead of the camera? allowing for movement of the camera independently from the object rotation? since many people are using OrbitControls to imitate rotating an object rather than a scene anyway? There is an example someone has created here:\r\nhttp://benchung.com/smooth-mouse-rotation-three-js/\r\n\r\nYour default jsfiddle actually shows this problem very well (Try panning using Shift-Mouse-drag):\r\nhttps://jsfiddle.net/hyok6tvj/\r\n\r\nOther people have asked for a solution to this use case here:\r\nhttps://stackoverflow.com/questions/34526500/threejs-orbitcontrol-with-different-rotate-center-and-lookat-point\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r112\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nNone"},{"labels":["enhancement"],"text":"I'm in need of a post process pass that does the same thing as renderer.outputEncoding = THREE.sRGBEncoding.\r\n\r\nTo be used like so:\r\n```\r\ncomposer.addPass(renderPass);\r\ncomposer.addPass(outlinePass);\r\ncomposer.addPass(new THREE.sRGBPass())\r\n```\r\n\r\nSee https://discourse.threejs.org/t/srgb-encoding-as-a-postprocess-pass/12278/4"},{"labels":["enhancement"],"text":"this code:\r\n```\r\n\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\tvC = indices[ i + 2 ] * 3; \r\n```\r\nand corresponding un-indexed code:\r\n```\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n```\r\nfails to take into account the property stride.\r\n\r\n\r\nrepro steps look a bit like this:\r\n```\r\n\tconst meshData = (...)\r\n\tvar geometry = new BufferGeometry();\r\n\r\n\tvar arrayBufferFloat = new Float32Array(meshData.vertices);\r\n\tvar arrayBufferByte = new Uint8Array(arrayBufferFloat.buffer); // alias this buffer, but with U8\r\n\r\n\tconst buffer32 = new InterleavedBuffer(arrayBufferFloat, meshData.vertexStride);\r\n\tconst buffer8 = new InterleavedBuffer(arrayBufferByte, meshData.vertexStride * 4);\r\n\tgeometry.setAttribute(\r\n\t\t'position',\r\n\t\tnew InterleavedBufferAttribute(buffer32, 3, 0));\r\n\r\n\tgeometry.setAttribute(\r\n\t\t'color',\r\n\t\tnew InterleavedBufferAttribute(buffer8, 4, meshData.colorOffset * 4, true));\r\n\r\n\tgeometry.setIndex(new BufferAttribute(new Uint32Array(meshData.faces), 1));\r\n\r\n\tgeometry.computeVertexNormals();\r\n```\r\n\r\nThe \"https://threejs.org/examples/#webgl_buffergeometry_points_interleaved\" example would reproduce this if it was modified to draw triangles instead of particles."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI don't know if I'm doing things wrong but I try to set a uniform in my code as an uint but threejs throw an error:\r\n\r\n```\r\nTypeError: u.setValue is not a function\r\nupload http://localhost:5510/v6/lib/three.module.js:17421\r\n    setProgram http://localhost:5510/v6/lib/three.module.js:25213\r\n    renderBufferDirect http://localhost:5510/v6/lib/three.module.js:23935\r\n    renderObject http://localhost:5510/v6/lib/three.module.js:24687\r\n    renderObjects http://localhost:5510/v6/lib/three.module.js:24657\r\n    render http://localhost:5510/v6/lib/three.module.js:24436\r\n```\r\n\r\nI'm using my own rawShader:\r\n\r\n```webgl\r\n#version 300 es\r\n\r\nprecision highp float;\r\n\r\nuniform uint projectionSize;\r\n// classic glsl code\r\n```\r\n\r\nI just changed `int` into `uint` and the error appeared.\r\n\r\n\r\n##### Three.js version\r\n- [x] r112\r\n\r\n##### Browser\r\n\r\n- [x] Chrome\r\n- [x] Firefox\r\n\r\n##### OS\r\n\r\n- [x] Windows\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n- [x] WebGL2\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\ncurrently objects are defined\r\n\r\n```jsx\r\nobject.set(a, b, c)\r\n```\r\n\r\nbut, for some reason, the lerp function goes ... \r\n\r\n```jsx\r\nobject.lerp(new ObjectConstructor(a, b, c), alpha)\r\n```\r\n\r\nall that i have seen, vectors, colors, etc. the constructor is unnecessary, creates memory overhead (in a loop, class construction every frame), makes it harder to operate (dummy objects to save memory), **and conflicts with the set method**.\r\n\r\nif this api would be consistent it would open crazy possibilities in the react world. it could behave like apples swiftUI basically, which would be a game changer:\r\n\r\n```jsx\r\nfunction AnimatedPingPong() {\r\n  // define state\r\n  const [x, set] = useState(true)\r\n  // flip state every second\r\n  useEffect(() => void setInterval(() => set(x => !x), 1000), [])\r\n  // write out state as x swinging between -1 and 1\r\n  return (\r\n    <mesh position={[x ? -1 : 1, 0, 0]} position-lerp={0.1}>\r\n      <sphereBufferGeometry attach=\"geometry\" />\r\n    </mesh>\r\n}\r\n```\r\n\r\nautomated animation would not be possible today, because due to the api the reconciler must know how the constructor is shaped, which it can't. it doesn't what what a color is or that the argument needs to be shaped { x: 1, y: 2, z: 3 }.\r\n\r\n##### Suggestion\r\n\r\njust allow both:\r\n\r\n```jsx\r\nvector.set(1, 2, 3)\r\nvector.lerp(1, 2, 3, 0.1)\r\nvector.lerp(new Vector(1, 2, 3), 0.1)\r\n\r\ncolor.set(\"red\")\r\nvector.lerp(\"red\", 0.1)\r\nvector.lerp(new Color(\"red\"), 0.1)\r\n```\r\n\r\n- very easy to implement\r\n- can be made typesafe in TS\r\n- it's backwards compatible\r\n- saves memory\r\n- makes threejs easier\r\n- enables swiftUI-like behaviour in the declarative world.\r\n\r\nor:\r\n\r\n```jsx\r\nvector.set(1, 2, 3)\r\nvector.lerp(1, 2, 3, 0.1)\r\nvector.lerpVector(new Vector(1, 2, 3), 0.1)\r\n\r\ncolor.set(\"red\")\r\nvector.lerp(\"red\", 0.1)\r\nvector.lerpColor(new Color(\"red\"), 0.1)\r\n```\r\n\r\ncould at least be made backward compatible for a couple of months by testing against props.\r\n\r\n"},{"labels":["enhancement"],"text":"It is possible to add a scene to another scene. However, setting an `overrideMaterial` on a nested scene has no effect. Only the `overrideMaterial` of the root scene is honored (and changes the material of children of nested scenes also as expected).\r\n\r\nI expected (and am suggesting now) that it is possible to set an `overrideMaterial` on any scene, and that it overrides the `overrideMaterial` of parent scenes. Though that may be debatable. But the documentation in this regard could be improved in either case.\r\n\r\nMy use case: I have several Sub-Scenes loaded from different GLTF files in my root scene, and want to highlight specific ones under certain conditions with a special material.\r\n\r\n[Live Demo](https://jsfiddle.net/qr4ovwpu/1/)\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Geometry bounding box gives a somewhat misleading result when used in an InstancedMesh. \r\n\r\n```js\r\n    var count = 10000;\r\n\r\n    var mesh = new THREE.InstancedMesh( geometry, material, count );\r\n\r\n    var dummy = new THREE.Object3D();\r\n\r\n    for ( var i = 0; i < count; i ++ ) {\r\n\r\n    \tdummy.position.set(\r\n\t\tMath.random() * 20 - 10,\r\n\t\tMath.random() * 20 - 10,\r\n\t\tMath.random() * 20 - 10\r\n\t);\r\n\r\n\tdummy.updateMatrix();\r\n\r\n\tmesh.setMatrixAt( i, dummy.matrix );\r\n\r\n    }\r\n```\r\n\r\nUsing new Box3().setFromObject(mesh) only gives you the Box3 for the single geometry, and not for the whole instance."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nGLSL usampler2d/usampler3d cannot be used for textures using integer internalFormat.\r\n\r\nhttps://github.com/mrdoob/three.js/blob/5f74ae5dc3e2e073e06afcf4a6a2b74a762f9d69/src/renderers/webgl/WebGLUniforms.js#L470-L495\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r112\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":[null,"enhancement"],"text":"![image](https://user-images.githubusercontent.com/35467304/71453066-66345380-27c4-11ea-9494-9e19f1c1f96f.png)\r\n\r\nThe parameterized model created by blender, the bounding box calculated by the box after the import is the largest, and does not surround the actual model size\r\n[Breaker_NM1630S.glb.zip](https://github.com/mrdoob/three.js/files/4001716/Breaker_NM1630S.glb.zip)\r\n"},{"labels":["enhancement",null],"text":"Following up on a conversation in https://github.com/mrdoob/three.js/pull/18123, this is a proposal for a utility class for managing tasks distributed to Web Workers. Currently BasisTextureLoader, DRACOLoader, and OBJLoader2 implement redundant logic for that purpose. \r\n\r\nA full-featured library for this purpose could easily get pretty complex. I'm hoping that we can write something fairly lightweight for internal use by threejs examples. A more robust version could probably be a standalone library, or part of [ECSY](https://github.com/MozillaReality/ecsy), but that's beyond the scope I personally want to attempt.\r\n\r\n**Proposed API:**\r\n\r\n```typescript\r\ninterface TaskManager {\r\n\r\n  /** Returns true if support for the given task type is available. */\r\n  supportsType( type: string ): boolean;\r\n\r\n  /** Registers functionality for a new task type. */\r\n  registerType( type: string, init: Function, execute: Function ): TaskManager;\r\n\r\n  /** Provides initialization configuration and dependencies for all tasks of given type. */\r\n  initType( type: string, config: object, transfer: Transferrable[] ): TaskManager;\r\n\r\n  /** Queues a new task of the given type. Task will not execute until initialization completes. */\r\n  addTask( type: string, cost: number, config: object, transfer: Transferrable[] ): Promise<any>;\r\n\r\n  /** Destroys all workers and associated resources. */\r\n  dispose(): TaskManager;\r\n\r\n}\r\n```\r\n\r\nUse in DRACOLoader:\r\n\r\n```typescript\r\nconst DRACO_DECODE = 'draco/decode';\r\n\r\nclass DRACOLoader {\r\n\r\n  constructor ( loadingManager: LoadingManager, taskManager: TaskManager ) {\r\n\r\n    this.loadingManager = loadingManager || DefaultLoadingManager;\r\n    this.taskManager = taskManager || DefaultTaskManager;\r\n\r\n    if ( ! this.taskManager.supportsType( DRACO_DECODE ) ) {\r\n\r\n      this.taskManager\r\n        .registerType( DRACO_DECODE, taskInit, taskExecute )\r\n        .initType( DRACO_DECODE, decoderConfig, decoderTransfers );\r\n\r\n    }\r\n\r\n  }\r\n\r\n  load ( url, onLoad, onProgress, onError ) {\r\n\r\n    const data = await fetch( url ).then( r => r.arrayBuffer() );\r\n    const cost = data.byteLength;\r\n    const config = { data, ... };\r\n\r\n    this.taskManager\r\n      .addTask( DRACO_DECODE, cost, config, [ data ] )\r\n      .then( onLoad ).catch( onError );\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\nThese two functions are passed to the TaskManager, and their function bodies are copied into the Web Worker (without surrounding context).\r\n\r\n```typescript\r\n// Sets up state before a worker begins taking Draco tasks.\r\nfunction taskInit ( config: object ): Promise<void> {\r\n\r\n  // do async setup\r\n\r\n  return Promise.resolve();\r\n\r\n}\r\n\r\n// Executes on a worker for each Draco task.\r\nfunction taskExecute ( taskConfig: object ): Promise<any> {\r\n\r\n  // do expensive processing\r\n\r\n  return Promise.resolve( result );\r\n\r\n} \r\n```\r\n\r\nThe *TaskManager* class then takes on the responsibilities of:\r\n\r\n- Creating a configurable number of Web Workers.\r\n- Installing the dependencies (i.e. function bodies + transfers) for each supported task type.\r\n- Distributing tasks evenly across workers.\r\n- Disposing of workers if necessary.\r\n"},{"labels":[null,"enhancement"],"text":"##### Description of the problem\r\n\r\nThree.js doesn't currently have a typescript section to the docs (that i could see, certainly).\r\n\r\nDescribe the bug or feature request in detail:\r\n\r\nWe should look to add an MVP doc for typescript to the docs which can list common issues and some more detail about how it works.\r\n\r\nAt the moment the typescript documentation is spread across the web on SO and in closed issues here in this repo\r\n\r\n##### Three.js version\r\n r111 ^\r\n\r\n\r\n##### Browser\r\n- [x] All of them\r\n\r\n##### OS\r\n- [x] All of them\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"cc. @sunag \r\n\r\nI would be really interested in a `PointsNodeMaterial`, for using in a `THREE.Points` object. Which would have a `size` node attribute the same way `THREE.PointsMaterial` has one.\r\n\r\nI could come up with a PR myself, could it somewhat inherit from the `SpriteNodeMaterial` in order to factorize some code?"},{"labels":["enhancement"],"text":"It appears only maps, envMaps and emissiveMaps use the the decoding functions when passed a texture that doesn't use linear encoding: \r\nhttps://github.com/mrdoob/three.js/blob/c7d88958041ff4af90bfd72fa3867716215fa1f6/src/renderers/webgl/WebGLProgram.js#L633-L638\r\n\r\nWe would like to use RGBD textures for lightmaps. Is there a reason for not applying the decoding to lightMaps (or all types of maps, for that matter) ?"},{"labels":["enhancement"],"text":"Vector3 has these methods:\r\n```js\r\nVector3.applyMatrix3( matrix3 );\r\nVector3.applyNormalMatrix( matrix3 );\r\nVector3.applyMatrix4( matrix4 );\r\nVector3.transformDirection( matrix4 );\r\n```\r\n\r\nWe need to be able to apply the same transforms to each element of a `BufferAttribute`.\r\n\r\nI propose we add the following methods:\r\n```js\r\nBufferAtribute.applyMatrix3( matrix3 );       // to replace Matrix3.applyToBufferAttribute()\r\nBufferAtribute.applyNormalMatrix( matrix3 );  // new\r\nBufferAtribute.applyMatrix4( matrix4 );       // to replace Matrix4.applyToBufferAttribute()\r\nBufferAtribute.transformDirection( matrix4 ); // new\r\n```\r\n\r\nRelated:\r\n#17997\r\n#18001 bug\r\n#18005 bug\r\n\r\nSuggestions for alternate APIs welcome.\r\n\r\n"},{"labels":["enhancement"],"text":"ThreeJS is widely used across a range of web based tools for 3D Printing, CNC, etc. and utilizes the STLLoader / GCodeLoader and STLExporter for a variety of operations.\r\n\r\nHowever, GCode is the necessary file type that 3D Printers actually read, where an exporter would drastically enhance the potential capabilities of these tools. Ultimately allowing for 3D model conversions from a number of other file types, although most commonly from an STL import -> GCODE export.\r\n\r\nFor a more detailed explanation of G-Code commands...\r\nhttp://marlinfw.org/docs/gcode/G000-G001.html\r\nhttps://reprap.org/wiki/G-code\r\n\r\nAs a whole, the primary command is \"G1\" which is simply used to move between coordinates. I have attached a sample G-Code file of a cube for reference.\r\n[cube.zip](https://github.com/mrdoob/three.js/files/3878415/cube.zip)\r\n"},{"labels":["enhancement",null],"text":"It would be helpful to import custom shader code through GLTF files.\r\n\r\nThe draft specification for KHR_techniques_webgl is available here:\r\n\r\nhttps://github.com/KhronosGroup/glTF/blob/c1c12bd100e88ff468ccef1cb88cfbec56a69af2/extensions/2.0/Khronos/KHR_techniques_webgl/README.md\r\n\r\nIt is currently used by [Cesium](https://github.com/AnalyticalGraphicsInc/cesium/blob/d26ccfea38dcf4623cf5da3faca141913c64cfe1/Source/Scene/processModelMaterialsCommon.js) and [Hilo3d (Alibaba's webgl engine)](https://github.com/hiloteam/Hilo3d/blob/master/src/loader/GLTFExtensions.js)"},{"labels":["enhancement",null],"text":"Previously one could call `THREE.DRACOLoader.getDecoderModule()` to preload the DRACO libraries, but there is no respective public instance method on the current DRACOLoader module. However, the private method `_initDecoder` seems to accomplish preloading. Would it be possible to make this method public or make a public wrapper for it?\r\n\r\nhttps://github.com/mrdoob/three.js/blob/219e3c1bc24163e2c31ab6f5cf4bb66f81b689bc/examples/jsm/loaders/DRACOLoader.js#L230"},{"labels":["enhancement"],"text":"I mean, since it is defined in the Material any way? Right now I have to add `uniform float opacity;` in the shader and then `opacity: { get value() { return mesh.material.opacity } }` in the material.uniforms myself"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nWhen the `OVR_multiview2` extension support landed (#16316), it was limited to running only in VR contexts (#17596). This was done, as I understand it, to prevent unexpected console warnings for all `ArrayCamera`s, and was probably prudent as a risk mitigator anyway.\r\n\r\nThis is a request to open that up slightly, by giving `ArrayCamera` a way to explicitly opt in to multiview rendering outside of the `vr.enabled` scenario. This could be as simple as a `multiviewEnabled` or similarly named boolean property on `ArrayCamera`, which could then be checked alongside `vr.enabled` in the appropriate spots in WebGLRenderer:\r\n\r\n`if ( ( vr.enabled || camera.multiviewEnabled ) && multiview.isAvailable() ) {...}`\r\n\r\nThis approach should have no impact on code that doesn't opt in.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r110\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nN/A"},{"labels":["enhancement",null],"text":"(from discussion with @zeux)\r\n\r\nA glTF file contains min/max bounds on mesh vertices. We should use those to set `.boundingBox` and `.boundingSphere`, so that `computeBoundingBox()` and `computeBoundingSphere()` can be optimized out."},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\n`Object3D.onAfterRender` and `Object3d.onBeforeRender` is correctly called upon by [WebGLRenderer](https://github.com/mrdoob/three.js/blob/dev/src/renderers/WebGLRenderer.js#L1159) but *not* by [SVGRenderer](https://github.com/mrdoob/three.js/blob/dev/examples/jsm/renderers/SVGRenderer.js).\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r110\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Hello,\r\n\r\nThe Clear coat shader is a great addition to three.js and big thanks whoever worked on it.\r\nWhile exploring SketchFab settings, I have noticed that they have thickness and tint added as well, which ads more to the visual impact overall.\r\n\r\nIt would be a great help if these features could be implemented in three.js.\r\n\r\nThank you very much\r\n\r\n"},{"labels":["enhancement"],"text":"##### Feature request\r\n\r\nIt would be nice to add a parameter to `Vector3.round()` and `Vector3.roundToZero()`, to ask for a number of decimal like `Number.toFixed()` in JS. If undefined, it would assume that an integer is needed, so it would not break anything.\r\n\r\n##### Use case\r\n\r\nI had to do my own function to do that, because the objects in my scene are user-transformed, then the transforms are exported as JSON. There is a big tolerance, so in order to reduce file size, I round the vector3 values. But rounding to integer is too much, that's why I did my own function.\r\nI guess that it would also be useful in things like voxel-painter or Minecraft-likes.\r\n\r\nI thought it might not be a big deal to add it to three.js, and it's useful, hence my feature request. If you think it's useless code, please close the issue.\r\n"},{"labels":["enhancement"],"text":"As suggested in https://github.com/mrdoob/three.js/pull/14895#issuecomment-421139939."},{"labels":["enhancement",null],"text":"i load 3mf file \r\n```js\r\nvar loader2 = new ThreeMFLoader();\r\n                console.log(loader2);\r\n                loader2.load('./Pile.3mf', function (object) {\r\n                    console.log(object.traverse);\r\n                    object.quaternion.setFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));\r\n                    //object.position.x = 0;\r\n                    //object.position.y = -250;\r\n                    //object.position.z = 0;\r\n                    scene.add(object);\r\n                    render();\r\n\r\n                });\r\n```\r\ndon't show 3md color and image"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n[edited issue]\r\nI did some tests with loading an SVG drawing in three.js and I found something odd about the scaling/units. \r\n\r\nI export a drawing from my CAD (units: meter) and apply a scaling (say 1:500). My CAD app uses the pt unit to set the size of the SVG geometry. When loaded by the three.js SVGLoader, the SVG units are applied in three.js (1 SVG unit (in my case pt) = 1 three.js unit). I assume my scene to be in meter, so in that case, I know which factor to use for scaling in three.js ((1/export scale) * 0.352778))\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r109\r\n- [ ] ...\r\n(probably also in older versions)\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nFrom #10491 \r\n\r\nCurrently PointsMaterial doesn't support lighting. It may be interesting if we do.\r\n\r\nSuggested how to implement here https://github.com/mrdoob/three.js/issues/10491#issuecomment-329491923\r\n\r\n> particle lighting may be computed just by distance from light source (according to intensity, decay, distance parameters of the light sources), it makes sense.\r\n\r\n[How it'll look like](https://twitter.com/superhoge/status/946723196148916225)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r109\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement",null],"text":"The deprecated `decodeDracoFile` method should be removed and replaced with a `parse` method similar to other loaders. Currently `decodeDracoFile` does not propagate errors, and should do so. So probably a signature like:\r\n\r\n```js\r\ndracoLoader.parse( arrayBuffer, /* options, maybe? */, onLoad, onError );\r\n```"},{"labels":["enhancement"],"text":"##### Description of the problem\r\nplease export material property toneMapped on `Material.d.ts`\r\n\r\n##### Three.js version\r\n- [x ] r108\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n- [x] Any"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\n``WebGLRenderer`` is missing two main functions to grant developers control over how the internal buffers are cleared every frame: ``setClearDepth(depth: number)`` and ``setClearStencil(stencil: number)``. This functionality can be accessed through the ``WebGLState``, but this is rather confusing for various reasons:\r\n\r\n* ``WebGLRenderer`` has already ownership of the clearing operations with function like ``clear(color: boolean, depth: boolean, stencil: boolean) : null`` and properties like ``autoClearDepth`` and ``autoClearStencil``, but cannot control the value it clears depth/stencil to.\r\n* Similar functions ``setClearAlpha(alpha: number)`` and ``setClearColor(color: Color, alpha: number)`` already exists to expose the color buffer clear state, which makes us wonder why the depth and stencil buffer are treated differently.\r\n\r\nGetters for these values should also be implemented and, ideally, these values should be configurable on construction, avoiding this [hardcoded clear statement](https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLState.js#L395) on initialization and better matching every application needs:\r\n\r\n``` javascript\r\n// init\r\ncolorBuffer.setClear( 0, 0, 0, 1 );\r\ndepthBuffer.setClear( 1 );\r\nstencilBuffer.setClear( 0 );\r\n```"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAfter the recent changes that offer control over the stencil buffer state through the material interface in #15611 , one major aspect of the stencil state setup was overlooked: the stencil write mask.\r\n\r\nThis can be set directly through the stencil buffer like: \r\n``` javascript\r\nrenderer.state.buffers.stencil.setMask(MASK);\r\n```\r\n\r\nBut, as we can see [here](https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/WebGLState.js#L684), it's not exposed nor used through the material's stencil parameters:\r\n``` javascript\r\nvar stencilWrite = material.stencilWrite;\r\nstencilBuffer.setTest( stencilWrite );\r\nif ( stencilWrite ) {\r\n\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilMask );\r\n\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\r\n}\r\n```\r\n\r\nMaterial's ``material.stencilMask`` should be split in ``material.stencilWriteMask`` (which would be use in conjunction with ``renderer.state.buffers.stencil.setMask()``) and ``material.stencilFuncMask`` to properly expose all the stencil state functionality through the material layer.\r\n\r\nSome nice links on the topic:\r\n* [stencilMask](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/stencilMask)\r\n* [stencilFunc](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/stencilFunc)\r\n\r\n##### Three.js version\r\n\r\n- [X] Dev\r\n- [X] r108\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n      Issues of loading TGA were solved, but it was a BUG to load DDS!\r\n \r\n- [x ] Dev\r\n- [ ] r108\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":[null,"enhancement"],"text":"##### Description of the problem\r\n\r\nRegarding Controls documents, currently Three.js has only `OrbitControls` document. I think it's helpful to users if we have all the Controls documents.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r108\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":[null,"enhancement"],"text":"On https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene I read:\r\n\r\n>Before you can use three.js, you need somewhere to display it. Save the following HTML to a file on your computer, along with a copy of three.js in the js/ directory, and open it in your browser.\r\n\r\nIt would be very nice if you could jsfiddle or codepen for the examples.\r\n\r\nSame here: https://threejs.org/docs/index.html#manual/en/introduction/How-to-run-things-locally"},{"labels":["enhancement"],"text":"Hi all,\r\n\r\nApologies if I'm missing anything as I'm new to Three, but from my research it looks like that the following feature is not currently supported, so I would like to request you to consider adding it in the future releases if possible.\r\n\r\nI want to be able to assign different material settings per object, for the same material. For example, use the same material, on multiple objects with different lightmaps. Similar to the Material Property Block in Unity3d https://docs.unity3d.com/ScriptReference/MaterialPropertyBlock.html.\r\n\r\nThanks,\r\nNick\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nUsing Water.js (from the ocean shader example), there is a problem when entering WebVR mode (tested with Firefox + Oculus Rift and also with the Chrome + WebVR emulation). The mirror shader doesn´t rotate in sync with the rest of the scene, and it´s strechted. Also, if you rotate the camera enough, the sphere on one side will be completely covered by the ocean shader, while the other sphere will be completely visible (like there was a unique ocean shared between boths cameras, I can´t explain better).\r\n\r\n It looks like the whole reflection shader only reflects the original camera, but not the VR ones (notice the reflection in the middle, is the sphere you would see with VR disabled).\r\n\r\n![Captura](https://user-images.githubusercontent.com/6510193/62423275-4f7b4c00-b6bf-11e9-9aee-25cbb4ba54d4.gif)\r\n\r\nThe problem seems to be in the **_scope.onBeforeRender()_** function in Water.js (commenting this code fixes the ocean size/position/rotation, but obviously there is no mirror shader on it (only a dark plane without any reflections).\r\n\r\n\r\n* [jsfiddle] (https://jsfiddle.net/spacorum/61oqycz7/)\r\n* [jsfiddle] (https://fiddle.jshell.net/spacorum/61oqycz7/show/)  \r\nfullscreen direct link to allow WebVR emulation controls on Chrome\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [X] r107\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [x] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nGraphics card: NVIDIA GeForce GTX 1070\r\nVR Device: Oculus Rift on Firefox (it can be replicated using Chrome + WebVR emulation)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nCurrently only two uv layers are supported by UVNode(). Using an index other than 0 (uv) or 1 (uv2) will prevent the fragment shader from compiling and will throw an error in the console (undefined value returned by NodeBuilder).\r\n\r\nThis limitation is acceptable for the standard material system but it would really make sense if the node system could handle any number of layers.\r\n\r\n/ping @sunag \r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r107\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n"},{"labels":["enhancement"],"text":"Hey I'm trying to use a `WebGLRenderTargetCube` as input for the `LightProbeGenerator.fromCubeTexture()`.\r\nBut it only accepts `CubeTexture` not `WebGLRenderTargetCube`.\r\n\r\nThe reason I have a `WebGLRenderTargetCube` is because I'm using `CubeCamera` to create a snapshot of my scene and want to use that as my environment light info for the LightProbe.\r\n\r\nI'm not sure what the visual representation of the `WebGLRenderTargetCube` is, as a `CubeTexture` has an array of 6 images pointing to each axis negatively and positively. So I don't know how to convert it myself.\r\n\r\nWould it be possible to generate a `CubeTexture` from `WebGLRenderTargetCube` or let the  `CubeCamera` output a `CubeTexture` directly?\r\n\r\n[(Asked here as well, as suggested.)](https://discourse.threejs.org/t/lightprobegenerator-from-webglrendertargetcube/8786/2)"},{"labels":[null,"enhancement"],"text":"Hello\r\nI dont want to repeat myself so I'll just copy from my original [Three.js Forum Post](https://discourse.threejs.org/t/post-processing-documentation/8787)\r\n\r\nAre there any plans to add `Postprocessing/EffectComposer` pages to the documentation? When I was just starting out, it held me back from using it's potentially wonderful features, and I suspect some other beginners had that problem as well.\r\nI understand that post processing is not a core feature of `Three.js`, but neither are model loaders, and yet they have a very sweet dedicated page, as well as an example page for each (most popular) loader. [Animation system](https://threejs.org/docs/index.html#manual/en/introduction/Animation-system) might be another example.\r\n\r\nI've always found it a little bizarre, that not a single reference to `EffectComposer` can be found in the docs. I think even a single page about it, with say `FilmPass` or `DotScreenPass` could potentially be very helpful.\r\nRight now it sort of feels like post processing is the black sheep of the family who doesn't get invited for christmas. \r\n\r\n\r\nI really like the idea of `EffectComposer` and `How to use post-processing` propositions by @Mugen87 (given in the forum post linked at the beginning)"},{"labels":["enhancement",null],"text":"## brep format support\r\n\r\nHi, is there someone dealing with [brep](https://en.wikipedia.org/wiki/Boundary_representation) using three.js?\r\n\r\nI have some brep files and I wanna if I can use three.js to render them in my browser.\r\n\r\nThank you for your reply."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nTo give context to a series of PRs are we are making to Three.JS I wanted to explain.  We are adopting Enterprise PBR (PBR Next) as it is also the new material model that glTF is standardizing on.  Enterprise PBR is a unification of advanced PBR parameters beyond just roughness and metalness.\r\n\r\nIt is specified here:\r\nhttps://dassaultsystemes-technology.github.io/EnterprisePBRShadingModel/spec.md.html\r\n\r\nThe main additions to the Three.JS PBR model to adopt correctly Enterprise PBR are:\r\n\r\n- [x] clear coat normal (see: https://github.com/mrdoob/three.js/issues/12867)\r\n- [x] anisotropy that works under IBL (via bend normals) (see: https://github.com/mrdoob/three.js/issues/9250)\r\n- [x] transparency (see: https://github.com/mrdoob/three.js/issues/15941)\r\n- [x] sheen (see: https://github.com/mrdoob/three.js/pull/16971)\r\n- [ ] reflectivityColor, which is the combined representation of IOR for F0, plus specular intensity and specular color (it means changing reflectivity from scalar to color: https://github.com/mrdoob/three.js/blob/dev/src/materials/MeshPhysicalMaterial.js#L21)\r\n- [ ] subsurface model (attenuation color, attenuation distance, subsurface color - probably some type of improvement over: https://github.com/mrdoob/three.js/pull/13511 )\r\n\r\nWe are aiming to add these to the Node graph material system as I personally believe that is the future of material definitions (https://github.com/mrdoob/three.js/issues/16440).  I think it is relatively easy to back-port them to PhysicalMaterial as well.\r\n\r\nThis will be useful for an advanced glTF loader in Three.JS.\r\n\r\nI believe it is also the direction other projects are going, including Google's Filament.  We are aiming to have our Three.JS contributes compatible with Filament directly when possible.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nRight now, it seems `threejs` is not testing the actual shaders code in any automated way and just relies on testing the examples and hoping that works out.\r\n\r\nWith the growing number of examples, that is quickly becoming too much.\r\n\r\nIs there a plan to solidify this part of the testing pipeline, such as is done by https://github.com/GoogleWebComponents/model-viewer (who use `threejs`) or https://github.com/Kitware/vtk-js-datasets/tree/master/data/vtkjs ?\r\n\r\nThanks for the great library!"},{"labels":["enhancement"],"text":"For my application, I need some fine-grained control over render order for a number of reasons. Thankfully the layers system offers an easy and convenient way to render specific objects in a specific order.\r\n\r\n```js\r\ncamera.layers.set(1);\r\nrenderer.render(scene, camera);\r\n\r\n// Render some objects with depthRead/depthWrite set differently maybe\r\ncamera.layers.set(2);\r\nrenderer.render(scene, camera);\r\n\r\n// Perhaps apply some postprocessing effect\r\ncamera.layers.set(3);\r\nrenderer.render(scene, camera);\r\n\r\n// Render UI after postprocessing\r\ncamera.layers.set(4);\r\nrenderer.render(scene, camera);\r\n```\r\n\r\nThe above pattern works fine, is flexible, and (I think) is perfectly performant. However, I have found that I need more granular control over shadow map rendering. In the above example, I have an object on layer 1 that needs to display the shadow of an object on layer 3.\r\n\r\nTo fix the issue, I'd need to render *only* the shadow map with both layers 1-3 active before layer 1 is rendered 'for real'. However, it doesn't appear that there is any way to actually do this.\r\n\r\nthe function `renderer.shadowMap.render()` is exposed but calling it directly results in errors as the render state isn't set up correctly."},{"labels":["enhancement"],"text":"Currently, serializing a scene with a WebGLRenderTarget/Cube via `toJSON()` results in a texture object without a base64 URL, since the texture's `image` property is empty. We should generate a data URL for the target's current buffer for the target's texture.\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\nI have a problem with the SelectionBox.js library published in threejs github project and orthographic camera.\r\n\r\nWhen you try to use this library with an orthographic camera it doesn't work.\r\n\r\nThe selected object don't match with the selected area.\r\n\r\nHere the ticket I opened some day ago:\r\nhttps://discourse.threejs.org/t/selectionbox-js-and-orthographic-camera/6984/4\r\n\r\nAnd here the fiddle to demonstrate the issue:\r\nhttps://jsfiddle.net/3smfokg7/\r\n\r\nBest regards\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r105\r\n- [] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement",null],"text":"Initial support for .basis textures added in https://github.com/mrdoob/three.js/pull/16522. This issue tracks remaining cleanup and planned enhancements. I'm not working on these yet, and will update this issue when I begin, so PRs are welcome in the meantime:\r\n\r\n- [x] Clean up remaining TODOs in the code\r\n- [x] Apply eslint fixes\r\n- [x] Add documentation\r\n- [x] Add example\r\n- [x] Add `setMaxWorkers()` method\r\n- [x] Support mipmaps\r\n- [ ] Fix mipmap support in iOS\r\n- [ ] Recompile Basis transcoder with bootstrapping suggested by @austinEng\r\n- [ ] Return texture synchronously from `load()` (without alpha?)\r\n- [ ] Support alpha\r\n- [ ] Support user-configurable transcode output format\r\n- [x] Add ES module\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI'm working with a set of models that use vertex color alpha. Now that threejs uses buffer geometry almost exclusively, adding in vertex color alpha is pretty simple, and it would be nice to see these changes upstream. The changes mostly involve declaring color as a vec4 instead of vec3.\r\n\r\n```                \r\n'#ifdef USE_COLOR',\r\n'   attribute vec4 color;',\r\n'#endif',\r\n```\r\n\r\n```\r\nvar color_fragment = `\r\n#ifdef USE_COLOR\r\n    diffuseColor.rgb *= vColor.xyz;\r\n    diffuseColor.a *= vColor.a;\r\n#endif \r\n`;\r\n\r\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec4 vColor;\\n#endif\\n\";\r\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec4 vColor;\\n#endif\";\r\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyzw = color.xyzw;\\n#endif\";\r\n```\r\n\r\n##### Example Without Vertex Color Alpha\r\n![Imgur](https://i.imgur.com/lc5vvKx.png)\r\n\r\n##### Example With Vertex Color Alpha\r\n![Imgur](https://i.imgur.com/Rlu2WIp.jpg)\r\n\r\n##### Three.js version\r\n\r\n- [ x ] Dev\r\n- [ ] r104\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Original Model :\r\n[http://rigmodels.com/del/PFT7TOLW1O68QOYQM5AT957UC_1.jpg](http://rigmodels.com/del/PFT7TOLW1O68QOYQM5AT957UC_1.jpg)\r\n\r\nAfter using SimplifyModifier :\r\n[http://rigmodels.com/del/PFT7TOLW1O68QOYQM5AT957UC_2.jpg](http://rigmodels.com/del/PFT7TOLW1O68QOYQM5AT957UC_2.jpg)\r\n\r\nSimplification function is working good, but sounds im loosing Texture UVs.\r\n\r\nCode:\r\n```\r\nobjLoader = new THREE.OBJLoader();\r\n\tobjLoader.load('3dmodels/bear.obj', function (object) {\r\n\tobject.traverse(function (child) {\r\n\t\tif (child instanceof THREE.Mesh) {\r\n\t\tchild.material.side = THREE.DoubleSide;\r\n\t\tMeshGeometry = new THREE.Geometry().fromBufferGeometry( child.geometry );\r\n\t\tMeshGeometry.computeFaceNormals();\r\n\t\tMeshGeometry.mergeVertices();\r\n\t\tMeshGeometry.computeVertexNormals();\r\n\r\n\tvar modifier = new THREE.SimplifyModifier();\r\n        var simplified = modifier.modify(MeshGeometry, MeshGeometry.vertices.length * 0.85 | 0);\r\n        simplified.computeFaceNormals();\r\n        simplified.computeVertexNormals();\r\n\r\n\t\tmaterial1 = child.material.clone();\r\n\t\tmesh = new THREE.Mesh(simplified, material1);\r\n\t\tscene.add(mesh);\r\n\t\t}\r\n    });\r\n```\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r104\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"I've noticed setTexture2D has been removed in recent versions of ThreeJS. In my experience this has been a really important function in production applications to give the developer more control about when this texture is first uploaded to the GPU. For example, uploading textures during a preloader rather than waiting until first render (which leads to a huge 'jank' in common WebGL apps). Currently, the functionality still seems to exist in the WebGLTextures interface, but not exposed to the user. The only option is to render a scene with the texture visible (such as on a full screen quad in a plain scene with ortho camera), and then immediately afterwards clear the screen in order to ensure there is no 'flash' of content displayed to the user.\r\n\r\nIs there any particular reason this functionality has been removed?\r\n\r\nThanks!"},{"labels":["enhancement",null],"text":"Currently it can:\r\n```js\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\n```\r\nBut can't\r\n```js\r\nimport { CSS2DRenderer, CSS2DObject } from 'three/examples/js/renderers/CSS2DRenderer';\r\n```\r\n\r\nCan you export `/renderer` to `/jsm/`?"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI've experienced that `readRenderTargetPixels` is not working with `WebGLRenderTargetCube`, e.g.\r\n\r\n```js\r\nrenderer.setRenderTarget(RT, i);\r\nrenderer.readRenderTargetPixels(RT, 0, 0, RT.width, RT.height, pixelBuffer);\r\n```\r\n\r\nI guess the `setRenderTarget` call isn't having an effect. There is a getter in `readRenderTargetPixels` that returns an array of six `WebGLFramebuffer`.\r\n\r\n```js\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n```\r\n\r\nWhat i'm trying to achieve is for a given cube envmap to extract the cube levels of detail coming from `PMREMGenerator` given in the HDR envmap examples. Are there any workarounds for this?\r\n\r\n##### Three.js version\r\n\r\n- [ ] r102"},{"labels":["enhancement"],"text":"In my app, I would like to rotate the CubeTexture that defines the scene background and the environment map reflections by 180° along the vertical y-axis.\r\nMy rotation is defined by the VRML and X3D specifications about the background fields.\r\n\r\nI tried to modify several parameters like the `mapping`, `flipY` and `rotation` Texture fields. However I didn't found any good way to do so.\r\n\r\n- Is there some obvious way to do so that I missed?\r\n- Any chance to see this coming in `three.js`?\r\n- If I would like to implement it, what parameters would you like to see (for example `Texture.flipX` and `CubeTexture.flipZ`)? Would you be interested in this feature?\r\n"},{"labels":["enhancement"],"text":"Some reference code: https://glitch.com/edit/#!/occlusion-roughness-metalness\r\n\r\nRetrieving old discussion from : https://github.com/mrdoob/three.js/issues/14940\r\n\r\n> Merging metal/rough/AO textures on the same texture on different channels is something we had in our plan for features to support in the GLTFExporter since the beginning. Actually I had it on my backlog but I have not had time yet to take a look at it :)\r\nSo I agree with @donmccurdy on the proposal as something we should support soon:\r\n\r\n>> - If metal/rough textures are different and have different sizes, use one, skip the other, and log a warning.\r\n>-  If metal/rough textures are different and have the same size: combine them\r\n>> - If only one of metal/rough is present, export that.\r\n>> - If AO has the same size as the (combined) metal/rough, merge its red channel into that image.\r\n\r\n>And I'll add to the wishlist two things:\r\n>- An option as `convertSizeWhenCombineTextures` so it will try to combine them by reescaling the ones with different size.\r\n>- Comparing images to detect duplicates. This could be added on the exporting process itself or as a postprocess action including it on GLTFEXporter.Utils"},{"labels":["enhancement"],"text":"This new [KHR_parallel_shader_compile extension](https://www.khronos.org/registry/OpenGL/extensions/KHR/KHR_parallel_shader_compile.txt) will bring shader compilation off to the main thread and even if the total compiling time could remain the same it won't be blocking the main thread which is a huge benefit.\r\n\r\nIt will require some modifications on the way three.js is handling the compilation and linking of shaders and move it from sync to async. Some ideas have been proposed on the [Khronos mailing list](https://www.khronos.org/webgl/public-mailing-list/public_webgl/1904/msg00000.php) and the [Khronos repo PR](https://github.com/KhronosGroup/WebGL/pull/2855)\r\n\r\nJust opening the issue so we could discuss ideas on how to address this change.\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":""},{"labels":[null,"enhancement"],"text":"##### Description of the problem\r\n\r\nThere are several features of `THREE` that aren't accessible from the Editor. When I say accessible, I mean combination of:\r\n* properties are not visible for editing\r\n* objects not being able to be created\r\n* objects not being able to be imported or exported. \r\n\r\nIdeally, the Editor should be capable of creating and editing most objects and features that the API contains. This issue is really more to keep track of what the Editor can and can't do currently. I'm listing features that I think the Editor would be capable of handling.\r\n\r\n#### Cameras\r\n- [x] `PerspectiveCamera`\r\n- [x] `OrthographicCamera` (#16008, #16244)\r\n- [ ] `ArrayCamera`\r\n- [ ] ~~`CubeCamera`~~\r\n- [ ] ~~`StereoCamera`~~\r\n#### Core\r\n- [x] `BufferAttribute`\r\n- [x] `BufferGeometry`\r\n- [ ] `Layers`\r\n- [x] `InstancedBufferAttribute`\r\n- [x] `InstancedBufferGeometry`\r\n- [ ] `InstancedInterleavedBuffer` * (#16050)\r\n- [ ] `InterleavedBufferAttribute` * (#16050)\r\n#### Geometry\r\n- [x] `BoxGeometry`\r\n- [x] `CircleGeometry`\r\n- [x] `ConeGeometry`\r\n- [x] `CylinderGeometry`\r\n- [x] `DodecahedronGeometry`\r\n- [ ] `EdgesGeometry` *\r\n- [ ] `ExtrudeGeometry`\r\n- [x] `IcosahedronGeometry`\r\n- [x] `LatheGeometry`\r\n- [x] `OctahedronGeometry` (#16242)\r\n- [ ] `ParametricGeometry` *\r\n- [x] `PlaneGeometry`\r\n- [x] `RingGeometry` (#16243)\r\n- [ ] `ShapeGeometry`\r\n- [x] `SphereGeometry`\r\n- [x] `TetrahedronGeometry` (#16241)\r\n- [ ] `TextGeometry` **\r\n- [x] `TorusGeometry`\r\n- [x] `TorusKnotGemetry`\r\n- [x] `TubeGeometry`\r\n- [ ] `WireframeGeometry` **\r\n#### Lights\r\n- [x] `AmbientLight`\r\n- [x] `DirectionalLight`\r\n- [x] `HemisphereLight`\r\n- [x] `PointLight`\r\n- [ ] `RectAreaLight` (#16251)\r\n- [x] `SpotLight`\r\n- [ ] `LightProbe`\r\n#### Materials\r\n- [x] `LineBasicMaterial`\r\n- [x] `LineDashedMaterial`\r\n- [x] `MeshBasicMaterial`\r\n- [x] `MeshDepthMaterial`\r\n- [x] `MeshLambertMaterial`\r\n- [x] `MeshMatcapMaterial`\r\n- [x] `MeshNormalMaterial`\r\n- [x] `MeshPhongMaterial`\r\n- [x] `MeshPhysicalMaterial`\r\n- [x] `MeshStandardMaterial`\r\n- [x] `MeshToonMaterial`\r\n- [ ] `PointsMaterial` (#16529)\r\n- [x] `RawShaderMaterial`\r\n- [x] `ShaderMaterial`\r\n- [x] `ShadowMaterial`\r\n- [x] `SpriteMaterial`\r\n#### Objects\r\n- [x] `Group`\r\n- [ ] `LOD`\r\n- [ ] `Line`\r\n- [ ] `LineLoop`\r\n- [ ] `LineSegments`\r\n- [x] `Mesh`\r\n- [ ] `InstancedMesh`\r\n- [ ] `Points` (#16529)\r\n- [ ] `SkinnedMesh` * (#8422, #15413) \r\n- [x] `Sprite`\r\n#### Textures\r\n- [ ] `Texture` (properties not editable #13882, #15695)\r\n- [ ] `CubeTexture` (#13880)\r\n- [ ] `VideoTexture`\r\n#### Misc\r\n- [ ] Animations (Can't be import/exported with scene #11642, playback speed cannot  be changed)\r\n- [ ] Audio\r\n\r\n\\* = Serializable, but not deserializable\r\n** = Serializable, but not as the original geometry (i.e. `TextGeometry` is serialized as `ExtrudeGeometry`, `WireframeGeometry` is serialized as `BufferGeometry`)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r103\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nNow that we have a LightProbe class (https://github.com/mrdoob/three.js/pull/16191), the Spherical harmonic class (https://github.com/mrdoob/three.js/pull/16187) merged as well as some shader support(https://github.com/mrdoob/three.js/pull/16152), we should explore adding a Tetrahedral tesselation method for interpolating between light probes to the renderer so that it can set the 4 SH + weights per object.\r\n\r\nThe best reference is this presentation from Unity itself:\r\n\r\nhttps://gdcvault.com/play/1015312/Light-Probe-Interpolation-Using-Tetrahedral\r\n\r\n(Referenced from here: https://docs.unity3d.com/Manual/LightProbes-TechnicalInformation.html)\r\n\r\nIt seems that given a set of light probes you just do a 3D delaunay tetrahedralization and use 3D barycentric coordinates for interpolation and you cache which tetrahedral each object is in to speed up lookups.  Pretty simple, just need a standard delaunay algorithm implemented along with a searchable tetrahedral data structure.\r\n\r\n/ping @WestLangley @donmccurdy @richardmonette "},{"labels":[null,"enhancement"],"text":"##### Description of the problem\r\n\r\nWhen loading a scene, the background of the editor is not set to the background of the scene. This causes an issue when exporting because the scene's background will be overwritten to the Editor's default gray.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r103\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nIf I write attribute mat2/3/4 in shader and upload data like this\r\n\r\n```\r\n// glsl\r\nattribute mat4 matrix;\r\n\r\n// js\r\ngeometry.addAttribute( 'matrix', new THREE.BufferAttribute( data, 16 ) );\r\n```\r\n\r\nIt fails because the second argument of `gl.vertexAttribPointer()` (= `attribute.itemSize`) takes only 1, 2, 3, or 4.\r\n\r\n```\r\nGL ERROR :GL_INVALID_VALUE : glVertexAttribPointer: size GL_INVALID_VALUE\r\n```\r\n\r\nI needed to break it up to columns to use them on Three.js.\r\n\r\n```\r\n// glsl\r\nattribute vec4 column0;\r\nattribute vec4 column1;\r\nattribute vec4 column2;\r\nattribute vec4 column3;\r\n\r\nvoid main() {\r\n    mat4 matrix = mat4( column0, column1, column2, column3 );\r\n}\r\n\r\n// js\r\ngeometry.addAttribute( 'column0', new THREE.BufferAttribute( data0, 4 ) );\r\ngeometry.addAttribute( 'column1', new THREE.BufferAttribute( data1, 4 ) );\r\ngeometry.addAttribute( 'column2', new THREE.BufferAttribute( data2, 4 ) );\r\ngeometry.addAttribute( 'column3', new THREE.BufferAttribute( data3, 4 ) );\r\n```\r\n\r\nSo we can't practically use `mat2/3/4` attribute in shader on Three.js because renderer doesn't handle them correctly. But I think allowing them may be useful.\r\n\r\nTo handle them we need to update `WebGLRenderer` to call `enableAttribute` and `vertexAttribPointer` multiple times for `mat2/3/4`.\r\n\r\nhttps://stackoverflow.com/questions/38853096/webgl-how-to-bind-values-to-a-mat4-attribute\r\n\r\n```\r\n// glsl\r\nattribute mat4 matrix;\r\n\r\n// js\r\ngeometry.addAttribute( 'matrix', new THREE.BufferAttribute( data, 16 ) );\r\n\r\n// js in renderer\r\nstate.enableAttribute( programAttribute.location );\r\nstate.enableAttribute( programAttribute.location + 1 );\r\nstate.enableAttribute( programAttribute.location + 2 );\r\nstate.enableAttribute( programAttribute.location + 3 );\r\n_gl.vertexAttribPointer( programAttribute.location, 4, type, normalized, 64, 0 );\r\n_gl.vertexAttribPointer( programAttribute.location + 1, 4, type, normalized, 64, 16 );\r\n_gl.vertexAttribPointer( programAttribute.location + 2, 4, type, normalized, 64, 32 );\r\n_gl.vertexAttribPointer( programAttribute.location + 3, 4, type, normalized, 64, 48 );\r\n```\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r103\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"CSG is a very important feature… other 3D frameworks have support for CSG built-in ( Babylon.js ), the only CSG I can find is the 7 years outdated plugin ( https://github.com/chandlerprall/ThreeCSG  )\r\n\r\nI propose that this plug-in gets updated for bufferGeometry and added to the three.js code base as an official plug-in for CSG support.\r\n\r\nI am willing to contribute funds to see this happen."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nRight now in `UniformUtils.cloneUniforms` when a uniform is a THREE object, it properly clones it, and when it is an array of primitives, it properly slices it, but if the uniform is an array of THREE objects (say an array of Vector3), it does not clone the individual objects.\r\n\r\nThere needs to be another check within the `} else if ( Array.isArray( property ) ) {` condition that checks if the items in the array are THREE objects are just primitives. Since they all must be the same type because of GLSL restrictions, I suppose that only the first element needs to be checked.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r103\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Currently has this:\r\n```javascript\r\n\t\t\tfor ( var i = 0; i < options.animations.length; ++ i ) {\r\n\r\n\t\t\t\tprocessAnimation( options.animations[ i ], input[ 0 ] );\r\n\r\n\t\t\t}\r\n```\r\nThis should be based on input[j]"},{"labels":["enhancement",null],"text":"This is a feature request. Would be great the ability to add an outline to a transparent PNG sprite."},{"labels":[null,"enhancement"],"text":"Most modelling programs have quick settings for the default camera, such as:\r\n\r\n* jump to specific views such as top, left, bottom, right, \r\n* reset the view\r\n* switch between perspective and orthographic projection\r\n* fit camera to scene (in clara.io this is called \"frame scene\")\r\n* fit camera to selection\r\n* create new perspective camera from current view and add it to the scene\r\n\r\nIt would be useful to add these to the editor as well. Most of these options can go in the same menu that was added in #15998.\r\nSee Clara.io for an example of how these can be set up. \r\n\r\n"},{"labels":[null,"enhancement"],"text":"It would be useful for the editor to have an FPS counter - probably the best place for this would be in the lower left of the viewport along above the object, vertices, triangles count. \r\n\r\nAlternatively, stats.js could be added, perhaps in the viewport top left. That would have the advantage of showing memory data as well. In that case it should probably be disabled by default since it's a bit more visually distracting. \r\n\r\n@Temdog007 what do you think? "},{"labels":[null,"enhancement"],"text":"Hello,\r\n\r\nIt would be useful to have an option to look at the scene through PerspectiveCamera in Three.js Editor.\r\n\r\nHere's Blender way to do it:\r\n\r\n![Camera](https://user-images.githubusercontent.com/20855725/54351738-f0fef400-4671-11e9-8289-664fed5de695.gif)\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r102\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Describe the bug or feature request in detail.\r\n\r\nThreeJS field of view option on the camera only adjusts vertical field of view, allow the horizontal field of view to be adjusted as well or create a new camera that has an adjustable horizontal field of view.\r\n\r\n##### Three.js version\r\n- [x] r102\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAs an example, Babylon has this feature built in, called [pivot points](https://doc.babylonjs.com/how_to/pivots). CSS has it in the form of the [`transform-origin` property](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin).\r\n\r\nThese features enable rotation about a pivot point with a one-liner.\r\n\r\nHere's an implementation idea: https://jsfiddle.net/mmalex/hd8ex0ok/ (thanks @nmalex).\r\n\r\nI believe ideally this would be implemented inside `Matrix4`, and the `Matrix4.compose( position, quaternion, scale )` signature would be changed to `Matrix4.compose( position, quaternion, scale[, origin] )`, with the `origin` parameter being optional for backwards compatibility.\r\n\r\nAn `origin` property would be added to `Object3D`, so that we can for example write `object.origin.set(1,2,3)`.\r\n\r\n`updateMatrixWorld` would then call `this.matrix.compose( this.position, this.quaternion, this.scale, this.origin )`.\r\n\r\nJust bike shedding, but `pivot` could also be another name in place of `origin`, but I like `origin` better because \"pivot\" doesn't seem to align with \"scale\" (I'm thinking that `scale` would also happen about the `origin`).\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r102\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nN/A\r\n"},{"labels":["enhancement"],"text":"When rendering a transparent object in THREE the specular highlight fades along with the diffuse surface of the material. I'd expect it retain the same brightness considering specular is supposed to be more of a mirror like reflection. Here's a picture of a sphere with the Standard material in THREE:\r\n\r\n![image](https://user-images.githubusercontent.com/734200/54081450-06fb6600-42ba-11e9-9f9d-826012f1a861.png)\r\n\r\n*metalness: 0, roughness: 0.3, opacity: 0.15*\r\n\r\nAnd here's what a similar sphere looks like in Unity, which is more what I'd expect:\r\n\r\n![image](https://user-images.githubusercontent.com/734200/54081475-43c75d00-42ba-11e9-9d1f-2cac293ef0c7.png)\r\n\r\n*metallic: 0, smoothness: 0.8, opacity: 11 / 255*\r\n\r\nAs an aside I'm a bit surprised by the difference in darkness of the transparent objects between THREE and Unity. The THREE material has an opacity of 0.15 while the Unity material has an opacity of 0.043 (11 / 255) and yet they look the same. Switching Unity's color space from Linear to Gamma makes the results look more similar with the same with the same opacity. Is this a limitation of blending in the current WebGL APIs?\r\n\r\nThanks!"},{"labels":["enhancement",null],"text":"PBR materials are exported to FBX from Maya using a proprietary extension ( `Maya|xxxx`). \r\n\r\nA couple of these were added in #15844 which was a good start but doesn't take into account the fact that the `Maya|` prefix in FBX denotes that it's a PBR material, which should be used to create a `MeshStandardMaterial`. \r\n\r\nAccording to this issue: https://github.com/assimp/assimp/issues/1504, this is a complete list of the materials that can be exported from Maya to FBX:\r\n\r\n``` js\r\nMaterial: 2967359479536, \"Material::StingrayPBS2\", \"\" {\r\n\t\tVersion: 102\r\n\t\tShadingModel: \"unknown\"\r\n\t\tMultiLayer: 0\r\n\t\tProperties70:  {\r\n\t\t\tP: \"Maya\", \"Compound\", \"\", \"\"\r\n\t\t\tP: \"Maya|TypeId\", \"int\", \"Integer\", \"\",1166017\r\n\t\t\tP: \"Maya|TEX_global_diffuse_cube\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|TEX_global_specular_cube\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|TEX_brdf_lut\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|use_normal_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|uv_offset\", \"Vector2D\", \"Vector2\", \"\",0,0\r\n\t\t\tP: \"Maya|uv_scale\", \"Vector2D\", \"Vector2\", \"\",1,1\r\n\t\t\tP: \"Maya|TEX_normal_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|use_color_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|TEX_color_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|base_color\", \"Vector3D\", \"Vector\", \"\",1,0,0\r\n\t\t\tP: \"Maya|use_metallic_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|TEX_metallic_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|metallic\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|use_roughness_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|TEX_roughness_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|roughness\", \"float\", \"\", \"\",0.33\r\n\t\t\tP: \"Maya|use_emissive_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|TEX_emissive_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|emissive\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Maya|emissive_intensity\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|use_ao_map\", \"float\", \"\", \"\",0\r\n\t\t\tP: \"Maya|TEX_ao_map\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t}\r\n\t}\r\n\tMaterial: 2967565876448, \"Material::phong2\", \"\" {\r\n\t\tVersion: 102\r\n\t\tShadingModel: \"phong\"\r\n\t\tMultiLayer: 0\r\n\t\tProperties70:  {\r\n\t\t\tP: \"AmbientColor\", \"Color\", \"\", \"A\",0,0,0\r\n\t\t\tP: \"DiffuseColor\", \"Color\", \"\", \"A\",1,0,0\r\n\t\t\tP: \"DiffuseFactor\", \"Number\", \"\", \"A\",0.800000011920929\r\n\t\t\tP: \"TransparencyFactor\", \"Number\", \"\", \"A\",1\r\n\t\t\tP: \"SpecularColor\", \"Color\", \"\", \"A\",0.5,0.5,0.5\r\n\t\t\tP: \"ReflectionFactor\", \"Number\", \"\", \"A\",0.5\r\n\t\t\tP: \"Emissive\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Ambient\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Diffuse\", \"Vector3D\", \"Vector\", \"\",0.800000011920929,0,0\r\n\t\t\tP: \"Specular\", \"Vector3D\", \"Vector\", \"\",0.5,0.5,0.5\r\n\t\t\tP: \"Shininess\", \"double\", \"Number\", \"\",20\r\n\t\t\tP: \"Opacity\", \"double\", \"Number\", \"\",1\r\n\t\t\tP: \"Reflectivity\", \"double\", \"Number\", \"\",0\r\n\t\t}\r\n\t}\r\n\tMaterial: 2967588203904, \"Material::lambert2\", \"\" {\r\n\t\tVersion: 102\r\n\t\tShadingModel: \"lambert\"\r\n\t\tMultiLayer: 0\r\n\t\tProperties70:  {\r\n\t\t\tP: \"AmbientColor\", \"Color\", \"\", \"A\",0,0,0\r\n\t\t\tP: \"DiffuseColor\", \"Color\", \"\", \"A\",1,0,0\r\n\t\t\tP: \"DiffuseFactor\", \"Number\", \"\", \"A\",0.800000011920929\r\n\t\t\tP: \"TransparencyFactor\", \"Number\", \"\", \"A\",1\r\n\t\t\tP: \"Emissive\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Ambient\", \"Vector3D\", \"Vector\", \"\",0,0,0\r\n\t\t\tP: \"Diffuse\", \"Vector3D\", \"Vector\", \"\",0.800000011920929,0,0\r\n\t\t\tP: \"Opacity\", \"double\", \"Number\", \"\",1\r\n\t\t}\r\n\t}\r\n```\r\n\r\nNote: As far as I can see all PBR materials that are supported by the Maya FBX exporter use this extension, which is at least the Stingray and Arnold shaders.\r\n\r\nI've come across a couple of mentions that other apps besides Maya may have also adopted the `maya|` extension for PBR materials, but I haven't verified this. However, 3D Max uses it's own proprietary extension, which should be trivial to add once we've set up Maya's extension. . \r\n\r\nAdding support for this will require some refactoring of the material system in the `FBXLoader`, but should be fairly straightforward. \r\n\r\nIf nobody else takes this on, I'll get round to it... someday In the meantime I'm putting the information up here so that if somebody else needs this they it will be as easy as possible for them to implement. "},{"labels":["enhancement",null],"text":"Is there a reason the GLTFLoader skips custom geometry attributes?\r\n\r\nhttps://github.com/mrdoob/three.js/blob/327c9dde64fcaae88dc4a5d48c4397886ca7ada9/examples/js/loaders/GLTFLoader.js#L2444\r\n\r\n"},{"labels":[null,"enhancement"],"text":"##### Description of the problem\r\n\r\nI drag'n'drop a 3.2 mb FBX (created in 3ds max 2016), plus some 30 jpg textures with 256-2048 resolution. **Every single time** when I make a change in the scene, the editor freezes for several(tens of) seconds. The heavier the scene, the longer the freeze. \r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [x] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"It's pretty hard to visualise the effect of a `PositionalAudio` node, especially when it comes to adjusting the cone set by [PositionalAudio.setDirectionalCone()](https://threejs.org/docs/#api/en/audio/PositionalAudio.setDirectionalCone). \r\n\r\nA `PositionalAudioHelper` would be very useful in this case. What do people think of adding this?"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\nWhen I try to open a WRL file, I can only see Object3D objects with Meshes objects inside. All other types (LineSegments, Shapes and Points) are missing.\r\n\r\nI have tried with multiple versions of VMRLLoader.js included the last ones (r100 and r101)\r\n\r\nBest regards\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r101\r\n- [x] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\nIf you serialize a Box3Helper object it drops the reference to `box`, which means that parsing it always returns the default Box3Helper. In the snippet below, it should appear as if there is only one box, but instead two boxes of different sizes show up.\r\n\r\nRelevant snippet:\r\n```javascript\r\n    var box = new THREE.Box3(\r\n      new THREE.Vector3( -5, -5, -5 ),\r\n      new THREE.Vector3( 5, 5, 5 ),\r\n    );\r\n\r\n    var helper = new THREE.Box3Helper( box, 0xffff00 );\r\n    scene.add(helper);\r\n\r\n    var string = JSON.stringify(helper);\r\n    var loader = new THREE.ObjectLoader();\r\n    var parsed = loader.parse(JSON.parse(string));\r\n    scene.add(parsed);\r\n```\r\nhttps://codepen.io/anon/pen/rPzLPO\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r101\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [ ] Windows\r\n- [x] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"via @ondys –\r\n\r\n***\r\n\r\nA simple cube mode with normal map that simulates flat shading:\r\n[normal_map_flat-20190201T224012Z-001.zip](https://github.com/mrdoob/three.js/files/2823602/normal_map_flat-20190201T224012Z-001.zip)\r\n\r\nThe cube has smooth geometry normals (no normal seams on cube edges) + a normal map that simulates flat shading.\r\n\r\n| threejs flat | babylonjs flat |\r\n|----|----|\r\n| ![three_js](https://user-images.githubusercontent.com/1848368/52153615-93699780-262f-11e9-8559-8fbc74765557.png) | ![babylon_js](https://user-images.githubusercontent.com/1848368/52153625-9cf2ff80-262f-11e9-89c5-b27ae6a780f1.png) |\r\n\r\nBabylon.js rendering seems to work correctly but three.js produces a weird looking result (cesium viewer also seem to work correctly)\r\n\r\nFor comparison, if normal map is set to a constant value (128, 128, 255), the resulting geometry is smooth for both three.js and babylon.js:\r\n\r\n| threejs smooth | babylonjs smooth |\r\n|---|---|\r\n| ![three_js_smooth](https://user-images.githubusercontent.com/1848368/52153654-b4ca8380-262f-11e9-85d2-97265bb75ad6.png) | ![babylon_js_smooth](https://user-images.githubusercontent.com/1848368/52153644-ab411b80-262f-11e9-95ec-2cbd4942afad.png) |\r\n\r\nCube with constant normal map is here:\r\n[normal_map_smooth-20190201T224029Z-001.zip](https://github.com/mrdoob/three.js/files/2823609/normal_map_smooth-20190201T224029Z-001.zip)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Consider this to be a feature request, I guess? Both #3010 and #6551 were closed as help, and [all](https://stackoverflow.com/questions/14638135/firstpersoncontrols-start-by-looking-at-an-object) [of](https://stackoverflow.com/questions/13474434/three-js-first-person-controle-makes-objects-disappears-from-scene) [relevant](https://stackoverflow.com/questions/24819945/three-js-loaded-model-is-disappearing-while-switch-to-firstperson-control-from-o/25045425#25045425) [SO](https://stackoverflow.com/questions/20905101/three-js-firstperson-control-start-orientation/20906487#20906487) [questions](https://stackoverflow.com/questions/14638135/firstpersoncontrols-start-by-looking-at-an-object/14638753#14638753) are either unanswered, or the answer is \"set lat and lon\".\r\n\r\nSo why dont you set lat and lon to the values corresponding to object.rotation rather than to 0 in FirstPersonControls constructor?"},{"labels":["enhancement",null],"text":"I have realized that there is no DirectionalLight example, and I can't find an issue explaining why that is, if there is a reason for it or maybe because no one took care of it yet.\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\nCurrently using the FBX Loader to load face rigs lock up the UI for upwards to 20 seconds while parsing the fbx tree. The model I'm loading is about 50 mb, and passing a onProgress callback only reports progress during the initial loading in of the buffer by the Three File Loader. After that, the FBX Loader takes over, parsing the FBX tree and can block the UI. \r\n\r\nI attempted to alleviate this by offloading the FBX Loading to a Web Worker after seeing the OBJ loader supports web workers but unfortunately found that at the time of parsing textures, the Three Image Loader uses the DOM API `createElementNS` to load the images. Web Workers don't have access to this function and as a result error out when parsing the textures. \r\n\r\nWill the FBX Loader support webworkers via the Worker Director similar to how OBJLoader2 does, as shown in the [Web Worker LoaderDirector Parallels Demo](https://threejs.org/examples/webgl_loader_obj2_run_director.html)? Or is there a better way to approach the loading of FBX files via the FBX Loader without expirencing the UI lock up?\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r100\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n- [x] Electron/Chromium\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nCPU: Intel i7-4720HQ @ 2.60GHz\r\nGPU: NVIDIA Quadro K2200M\r\n\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\nThese fallback logic should be skipped in webgl2:\r\n````javascript\r\n\r\n// webgl2 skip this\r\n_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n// isPowerOfTwo should be (isPowerOfTwo || webgl2)\r\nfunction textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\r\n\treturn texture.generateMipmaps && isPowerOfTwo &&\r\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n}\r\n````\r\n\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r100\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n"},{"labels":["enhancement"],"text":"Via https://stackoverflow.com/questions/53942232/three-js-gltf-exporter-resets-the-u-v-to-default-1-1-after-exporting."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nMost webvr experiences are one experience per site, but when you have a site with multiple webvr experiences you can have the case where you have on ThreeJS renderer (i.e. the WebVR renderer) and you just want to use different scenes with it (a new scene for a new webvr experiences).  This works but it ends up leaking memory because although you can dispose of the objects in the scene graph, the WebGLRenderer saves state for each scene/camera pair.  And it looks like calling dispose on WebGLRenderer makes the renderer invalid afterwards.\r\n\r\nYou could have one canvas already for WebVR, and then have a new WebGLRenderer for each WebVR experience and just use the same canvas/gl context for each, but there's a memory hit for this as well and you could have bugs where multiple renderers are trying to draw to the same context (i.e. the one who is actually presenting and then one that wasn't shut down correctly).  Using a singleton for the WebVR renderer is nice as it makes it a bit easier to see who is actually renderering.\r\n\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r99\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Why GLTFExporter can't support light? Will it be  supported at later version?\r\n"},{"labels":["enhancement"],"text":"Hello, I'm using GLTFLoader to import the .gltf models, then use gltf exporter to export them. \r\n\r\nHowever some materials are only able to be displayed, but unable to be exported.  It seems like three.js has a couple of built-in materials+ shader materials. gltf loader seems to create shader materials as far as three.js built-in materials do not cover what' s in gltf file. now gltf exporter does not support exportinng shader materials. and from here we have a problem.\r\n\r\nCan anyone help with this? Thanks.\r\n"},{"labels":["enhancement"],"text":"I assume we want to support this..."},{"labels":["enhancement"],"text":"I would like to ask whether kdtree can add insert and remove methods. Thank you very much"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nThree supports es6 modules, including a rollup, three.module.js. It does not provide a minified version, however.\r\n\r\nThis is a feature request to include three.module.min.js in the distribution.\r\n\r\nThe lack of three.module.min.js may be a result of the popular minifiers initially not being able to minify es6. This is no longer the case, see: butternut/squash https://github.com/Rich-Harris/butternut. Also uglify-es is a version of uglify-js that can minify es6+.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r97\r\n- [x] all versions\r\n\r\nSee the unpkg dashboard: https://unpkg.com/three@0.97.0/build/\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nHi,\r\n\r\nSo I recently discovered a potential bug:\r\nI use an orthographic camera with CSS3DRenderer, and I implemented a simple pan functionality. When I adjust the position of the camera (either with `camera.position.setX(camera.position.x + delta.x)`, or `camera.translateX(delta.x)`, or similar), it works perfectly, as it should. But when I try to change the frustum planes of the camera (eg.: `camera.left += delta.x`), it doesn't have any visual effect.\r\n\r\nSo in my opinion, in terms of visual differences, these 4 lines:\r\n```\r\ncamera.left += delta.x;\r\ncamera.right += delta.x;\r\ncamera.top += delta.y;\r\ncamera.bottom += delta.y;\r\n```\r\n\r\nShould give similar results to the effect of these 2 lines:\r\n```\r\ncamera.translateX(delta.x);\r\ncamera.translateY(delta.y);\r\n```\r\n\r\nAnd with WebGLRenderer, they do. But with CSS3DRenderer, they don't. In fact, they don't seem to do anything. I also played around with the frustum plane values in the resize function, but it didn't have an effect there, either. So I think CSS3DRenderer doesn't take the frustum planes into account, only the initial ones..?\r\n\r\nI know it's probably not the best practice to change the frustum planes in this case (and I should change the position instead), but I believe it should work this way too, as it does with WebGLRenderer.\r\n\r\nI've made a simple demo to represent the problem. Check from line ~80 in `index.html` in the zip, or line ~60 in the JS section here: https://codepen.io/soadzoor/pen/vVbzyE\r\n\r\nThank you!\r\n[CSS3DRenderer.zip](https://github.com/mrdoob/three.js/files/2520398/CSS3DRenderer.zip)\r\n\r\n##### Three.js version\r\n- [x] r97\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement",null],"text":"The glTF specification allows default morph target weights to be defined at the mesh level (`mesh.weights`) or at the node level (`node.weights`). I just noticed that we only implement the former. In the latter case, a mesh could be reused across the scene with different weights for each instance.\r\n\r\nExample:\r\n\r\n[glTF-NODE_WEIGHTS.zip](https://github.com/mrdoob/three.js/files/2520027/glTF-NODE_WEIGHTS.zip)\r\n"},{"labels":["enhancement"],"text":"It would be great to be able to rotate an array camera as you would a regular camera, i.e. either accessing it's .rotation property or passing the camera into an orbit controls script. While this isn't particularly valuable for VR applications, any other type of application that leverages the optimization possible through ArrayCamera has to do a lot of workarounds to make rotation function properly.\r\n"},{"labels":["enhancement"],"text":"At the moment not aivailable, it would be nice to have indexed geometry with draw range support in GLTF exporter. \r\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/exporters/GLTFExporter.js line 564 : \r\n`// @TODO Indexed buffer geometry with drawRange not supported yet`\r\n\r\n"},{"labels":["enhancement"],"text":"ArrayCamera only extends and only supports Perspective Cameras."},{"labels":["enhancement"],"text":"This would be a useful feature to have by default, besides terrains, when sculpting shapes or using primitives to construct a scene. It currently requires to generate a geometry with proper UV coordinates.\r\n\r\nI'd suggest local and global mapping, since organic textures work fine for mixed axes and will then seamlessly mix with intersecting objects.\r\n\r\nI've implemented it with a mapping property on the material which is by default `THREE.UVMapping`, in `setProgram` i set a `modelScale` uniform for local mapping.\r\n\r\nhttps://mevedia.com/img/triplanar.mp4\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n\r\nIf an svg has `fill=\"none\"` SVGLoader skips the group/paths. \r\n\r\nFor example, loading following SVG file results in no paths being returned by the loader, where a simple line should appear.\r\n\r\n```svg\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\"  width=\"27987\" height=\"16561\" xMin=\"0\" yMin=\"0\">\r\n<g fill=\"none\"  stroke=\"red\" stroke-width=\"10\" transform=\"matrix(0.9180685877799988,0,0,0.9180685877799988,1146.04833984375,16504.53515625)\" xMin=\"0\" yMin=\"0\" >\r\n        <path d=\"M 10159,-11001 L 10103,-15001 L 5103,-13986 L 14144,-13986\"/>\r\n    </g>\r\n</svg>\r\n```\r\n\r\nThis is due to `isVisible(style)`\r\n\r\n```js\r\n function isVisible( style ) {\r\n\r\n        return style.fill !== 'none' && style.fill !== 'transparent';\r\n}\r\n```\r\n\r\nIdeally, should isVisible be checking for an actual visibility related property? eg `display=\"none\"`?\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement"],"text":"When will ar be supported on webapp? I saw some WebAR demos from git,but there is not an instance here,Are you expanding it and when will implement?"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI'm not sure if this is a bug or a new feature to be added. When I try to click on a line2segment, I never get an intersection. I have been successful with getting intersections with line segments.\r\n\r\n I have attached a fiddle that demonstrates the problem:\r\n\r\nhttps://jsfiddle.net/aitheorem/gr7e6why/66/\r\n\r\n\r\n##### Three.js version\r\n r97\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n\r\n##### OS\r\n I don't know if this a problem only windows. I have not tested the other operating systems.\r\n- [x] Windows\r\n"},{"labels":["enhancement"],"text":"Object3D.onBeforeRender not triggered when depthmaterial for shadows are rendered.\r\n\r\nrenderBufferDirect method does not trigger the onBeforeRender function\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r96\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"The COLLADA 1.5 specification allows using both `<joint>` and <instance_joint> elements inside kinematics_model\\technique_common. The <instance_joint> elements can refer to `<joint>` elements defined elsewhere in the document, usually in <library_joints>.\r\n\r\nThe COLLADA loader seems to assume that `<joint>` elements are used, resulting in this error if <instance_joint> are used (three.js editor example version r96):\r\n\r\n```\r\nTypeError: joint is undefined ColladaLoader.js:2928:8 \r\nconnect/< https://threejs.org/examples/js/loaders/ColladaLoader.js:2928:8\r\ntraverse https://threejs.org/build/three.js:8574:4\r\ntraverse https://threejs.org/build/three.js:8580:5\r\ntraverse https://threejs.org/build/three.js:8580:5\r\nconnect https://threejs.org/examples/js/loaders/ColladaLoader.js:2920:5\r\nsetupKinematics https://threejs.org/examples/js/loaders/ColladaLoader.js:2909:6\r\nparse https://threejs.org/examples/js/loaders/ColladaLoader.js:3867:3\r\nLoader/this.loadFile/< https://threejs.org/editor/js/Loader.js:179:20\r\n```\r\n\r\n**Example COLLADA file using <instance_joint>:**\r\n[https://github.com/Metalfusion/public-files/blob/master/Cobra_s350.dae](https://github.com/Metalfusion/public-files/blob/master/Cobra_s350.dae)\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r96"},{"labels":["enhancement",null],"text":"When importing this vrml file: [test.wrl.zip](https://github.com/mrdoob/three.js/files/2339702/test.wrl.zip), I expect to get this:\r\n\r\n<img width=\"221\" alt=\"screen shot 2018-08-31 at 12 24 28\" src=\"https://user-images.githubusercontent.com/8037927/44907618-de961c00-ad18-11e8-8133-e6ecb80902a2.png\">\r\n\r\nBut instead I get this:\r\n\r\n<img width=\"251\" alt=\"screen shot 2018-08-31 at 12 24 42\" src=\"https://user-images.githubusercontent.com/8037927/44907622-e229a300-ad18-11e8-85bd-39620bb73da0.png\">\r\n\r\nWhen inspecting the VRML file, I can see that there is an attribute called `creaseAngle`, which I suspect is the normal definition angle.\r\n\r\nHowever, in the source code for the `VRMLLoader`, I can find no such attribute check.\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nIt seems to me that `CubeCamera` should support `layers` just like all the other camera types and the abstract base class. [As it is now](https://github.com/mrdoob/three.js/blob/34dc2478c684066257e4e39351731a93c6107ef5/src/cameras/CubeCamera.js#L22-L50), six child cameras are created, and the layers are not copied over.\r\n\r\nThere is currently a workaround, which is to traverse through the children and set layers, but it's a bit cumbersome and inconsistent.\r\n\r\nThanks.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r95\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"following things seem to be removed from sprites:\r\n* affectedByDistance #278\r\n* scaleByViewport #279\r\n\r\nmeanwhile, sizeAttenuation exists for points. can we have it for sprites, too? seems like rather typical use case"},{"labels":["enhancement"],"text":"Should be straight-forward."},{"labels":["enhancement"],"text":"Support for Geometry is not required.\r\n\r\n/ping - @yomboprime "},{"labels":["enhancement"],"text":"Geometry support is not required.\r\n\r\n/ping @collinhover - any interest?"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nHere is my code:\r\n\r\n```\r\n  var objLoader = new THREE.OBJLoader2()             \r\n   try{\r\n    objLoader.loadMtl(mtlurl, null, onLoadMtl)\r\n  }\r\n  catch(e){\r\n    console.log('mtl load error:', e)\r\n  }\r\n```\r\nas there is some network error . so I got this below in my console:\r\nthree.min.js:619 GET https://xxxx.xxx.xxx/mtl/xxxx net::ERR_CERT_COMMON_NAME_INVALID\r\n\r\nBut I didn’t catch any error in my own code neither did the onMtlLoader function called.\r\n\r\nInstead , I try @Mugen87's suggestion [here](https://discourse.threejs.org/t/can-not-catch-objloader2-error/3496) . OBJLoader works perfect for catching network error.\r\nSo I think is it necessary to add an onError callback for OBJLoader2.loadMtl ?\r\n\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r95\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Is there demand for this?"},{"labels":["enhancement"],"text":"I think that would be a valuable addition."},{"labels":["enhancement"],"text":"When setting the override material for a scene the maps and other settings on the original material are not used -- this applies to animations, mesh instances, and other uniforms and defines, as well. This jsfiddle shows that the normal map is not applied when rendering the scene with a `MeshNormalMaterial` applied:\r\n\r\nhttp://jsfiddle.net/wbhrd58c/\r\n\r\n![image](https://user-images.githubusercontent.com/734200/43370791-4d63d1de-933a-11e8-80d2-7d1073bc2715.png)\r\n\r\nThis makes it a difficult to render things like normal and depth buffers for screen effects. To when an overrideMaterial is used the defines and uniforms of the original should be used (if they exist on the override material). This would let an override material us the color, displacementMap, normalMap, textures, skinning settings, etc available.\r\n\r\nThis mechanic could be used make post processing passes more robust and correct, afford a depth prepass with correct vertex transformations, a deferred renderer that uses the original material properties without having to manually copy everything, and shadows that support displacement maps out of the box.\r\n\r\nThis is closer to how Unity's [Shader Replacement](https://docs.unity3d.com/Manual/SL-ShaderReplacement.html) works to afford this functionality:\r\n\r\n> the camera renders the scene as it normally would. the objects still use their materials, but the actual shader that ends up being used is changed\r\n\r\nIn Unity if the objects material doesn't define a specific uniform then the default shader uniform value is used. To allow for backwards compatibility this could be included as an opt-in feature:\r\n\r\n```js\r\nScene.setOverrideMaterial( material : Material, overrideUniforms : Boolean );\r\n```"},{"labels":["enhancement",null],"text":"I mean, I understand SVGLoader is work in progress, but can you really get anywhere without this? my svg looks exploded :)\r\n\r\nexample:\r\n```xml\r\n<g transform=\"translate(226 226)\">\r\n      <polygon fill=\"#F4F7FF\" points=\"...\r\n```\r\n\r\nin SVGLoader there is only this:\r\n```javascript\r\ncase 'g':\r\n\tstyle = parseStyle( node, style );\r\n\tbreak;\r\n```\r\n\r\nwhile funcs like `parseTransformNode` are clearly there already"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nIt would be very helpful if I could get the `session`, and the `XRInputDevice`, specially the \"handedness\", and \"pointerOrigin\" properties. The only way I find to do this now, is by changing my three.js file, which obviously not a nice solution.\r\n\r\nI think the best way would be something like this:\r\n`var session = renderer.vr.getSession();`, then\r\n`var inputDevice = session.getInputSources();`\r\n\r\nOr is there already a way to get this, and I couldn't find it..?\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r94\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nDear Ladies and Gentlemen,\r\n\r\nWe struggle with three js, DAZ3D and Mixamo, to release a new web browser game, it looks like the current blocker is in mixamo exporter or three js fbx importer (more likely).\r\n\r\nAs all mixamo's objects works with three js FBX loader we've decided to firstly export a FBX model to Mixamo from Daz Studio and then from Mixamo to Three JS to make process clear and to preserve formats compatibility.\r\n\r\nHowever. In Mixamo, our FBX model works perfectly, but when we export it to Three JS from Mixamo, it looks very bad, however animation is recognized and some kind of animation is ongoing, but head, legs etc. are not in the proper place.\r\n\r\nIf you like \"The Thing\" from John Carpenter, then you will know what I mean ;)\r\n\r\nPlease see attachments for details \r\nhttps://drive.google.com/open?id=1fBJX4v7T_lQ54f8wlGPTqr-3EZjs8Q9z\r\n\r\nAttachment contains 2 models (one imported to mixamo, one exported from mixamo) and videos showing how well model behave in mixamo and how bad it looks in three js.. :(\r\n\r\nThank you !\r\n\r\n##### Three.js version\r\n\r\nLatest greatest!\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- exclude internet explorer as it's not compatible with the fbx loader..\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nnone..\r\n\r\nBest Regards,\r\nKarol\r\n\r\nSoftware Architect\r\nwww.artificialworldsltd.com"},{"labels":["enhancement"],"text":"Hello,\r\n\r\nI manage to make it works, you can find an example here: \r\nhttps://codepen.io/bilouwan/project/full/XpgGOp/ \r\n\r\nAs it is quite complex to implements, no really the code but more the maths and it is quite a common stuff when playing with the camera I am wondering about making a PR.\r\n\r\nWhat do you think about it? Could it be useful? Better to add it under examples or inside the core like Math or Camera method may be...  "},{"labels":["enhancement",null],"text":"The ColladaLoader fails to load this model.\r\nhttps://raw.githubusercontent.com/0ad/0ad/master/binaries/data/mods/public/art/meshes/skeletal/elephant_african_baby.dae\r\n\r\nResults in these warnings (in Firefox), the mesh is not visible:\r\nUnsupported primitive type:  polygons ColladaLoader.js:1980:7\r\nUndefined sampler. Access image directly (see #12530). ColladaLoader.js:1493:6\r\nInvalid opaque type \"null\" of transparent tag. ColladaLoader.js:1619:8 \r\n\r\nHere is the fiddle.\r\nhttps://jsfiddle.net/k4qt0om8/\r\n\r\nI can provide more Collada files that reproduce this issue if requested +1"},{"labels":["enhancement",null],"text":"The ColladaLoader fails to load this model.\r\nhttps://raw.githubusercontent.com/0ad/0ad/master/binaries/data/mods/public/art/meshes/skeletal/elephant_african_bush.dae\r\n\r\nResults in this error (in Firefox):\r\ntoo much recursion ColladaLoader.js:3377:8\r\n\r\nHere is the fiddle.\r\nhttps://jsfiddle.net/L923p7ke/\r\n\r\nI can provide more Collada files that reproduce this issue if requested :+1: "},{"labels":["enhancement",null,null],"text":"I'm working on implementing transform feedback support on top of the [WebGLRenderer to WebGL2 proposal](https://github.com/mrdoob/three.js/pull/13717).\r\n\r\nI would like to get some feedback from the community about the following two approaches:\r\n\r\n1) We'll have something like `THREE.TransformFeedback` and we will call it with a `BufferGeometry` and a `Program`:\r\n```javascript\r\nvar geometry = new THREE.BufferGeometry();\r\nvar program = // A program with out varyings\r\nvar tf = new THREE.TransformFeedback(geometry, program);\r\n\r\n...\r\nrenderLoop() {\r\n    tf.tick(); \r\n    scene.render();\r\n}\r\n\r\nTHREE.TransformFeedback.prototype.tick = function () {\r\n    bindBuffersAndAttribs();\r\n    gl.enable(gl.RASTERIZER_DISCARD);\r\n    bindTransformFeedback(this.transformFeedback);\r\n    drawCall(currentGeometry, transformFeedbackProgram);\r\n    gl.disable(gl.RASTERIZER_DISCARD);\r\n    unbindBuffersAndAttribs();\r\n}\r\n```\r\nThe constructor will create a copy of the buffergeometry that will then be used on `tick` to pingpong between these two geometries.\r\nAs you can spot, we're calling `RASTERIZER_DISCARD` as we don't want to draw anything, we just want to do the computation stored on the program and save the values back to a buffer that will be used later to paint the geometry.\r\nAn example of this approach is the [WebGL2Particles](https://github.com/toji/webgl2-particles-2) demo by @toji \r\nThe key point here is that we're performing [first the computation](https://github.com/toji/webgl2-particles-2/blob/gh-pages/index.html#L621-L626) using a [specific shader](https://github.com/toji/webgl2-particles-2/blob/gh-pages/js/SimulationShader.js) and we use these computed attributes to [render the geometry](https://github.com/toji/webgl2-particles-2/blob/gh-pages/index.html#L641) using a https://github.com/toji/webgl2-particles-2/blob/gh-pages/index.html#L55-L74 unrelated to the transformfeedback. \r\n\r\n2) The second approach will be to integrate it on the pipeline. So we could have a material definition like:\r\n```javascript\r\nvar materialWithTF = new THREE.ShaderMaterial( {\r\n  uniforms: {...},\r\n  vertexShader: document.getElementById( 'vs' ).textContent,\r\n  fragmentShader: document.getElementById( 'fs' ).textContent\r\n  transformFeedbackVaryings: ['outPosition', 'outVelocity']\r\n});\r\n```\r\nOr we could use injection points for standard materials (Sorry I don't remember the current state on this @mrdoob @pailhead, but you get the point):\r\n```javascript\r\nvar materialWithTF = new THREE.StandardMaterial( {\r\n  transformFeedbackVaryings: ['outPosition', 'outVelocity'],\r\n  preVertex: 'out vec3 outPosition; out vec3 outVelocity;',\r\n  vertexMain: 'outPosition = position + velocity * delta; outVelocity *= acceleration;',\r\n});\r\n```\r\nSo the renderer and the related modules should take the transformFeedback attributes into account and generate the buffers, doing the pingpong (this could be defined on the material too), binding the tf and the attributes.\r\nWith this second approach we don't separate the computation from the actual rendering as we just do it in one pass.\r\nAn example of this implementation can be found here on the [WebGL2Samples](https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/transform_feedback_separated_2.html#L270-L287) Where with just one [drawcall you compute and render at the same time](https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/transform_feedback_separated_2.html#L270-L287) using just [one program](https://github.com/WebGLSamples/WebGL2Samples/blob/master/samples/transform_feedback_separated_2.html#L21-L84)\r\n\r\n\r\n---\r\n\r\n- I'm not sure if there's a huge overhead between option (1) or (2). Although until we won't have multiview support on three.js, (1) will do just one call to compute the new attributes while on (2) we will call twice one per each eye, as the usual drawcalls.\r\n- I'd like to know if people would like to have the option (1) without rendering anything after, so just to do some gpgpu, or if it's a good idea to have both for two specific use cases.\r\n\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI create two mesh with same renderOrder. \r\n\r\n```js\r\nvar circleGeometry = new THREE.CircleBufferGeometry(radius, segements);                                                                                                                                                                 \r\nvar ringGeometry = new THREE.RingBufferGeometry(radius, radius + ringWidth, segements);                                                                                                                                                                 \r\nvar cellGeometry = null;\r\n  \r\n//...\r\n\r\nvar circleMaterial = new THREE.MeshBasicMaterial({                                                                                                                                                                                                                                                                        \r\n  map: texture,                                                                                                                                                                                                                                                                                                         \r\n  // wireframe: true                                                                                                                                                                                                                                                                                                    \r\n});                                                                                                                                                                                                                                                                                                                       \r\nvar ringMaterial = new THREE.MeshBasicMaterial({                                                                                                                                                                                                                                                                          \r\n  color: 0x000000,                                                                                                                                                                                                                                                                                                      \r\n  vertexColors: THREE.VertexColors,                                                                                                                                                                                                                                                                                     \r\n  // wireframe: true                                                                                                                                                                                                                                                                                                    \r\n});\r\n                                                                                                                                                                                                                                                                                               \r\ncellGeometry = THREE.BufferGeometryUtils.mergeBufferGeometries([circleGeometry, ringGeometry], true);                                                                                                                                                                                                                     \r\nvar mesh1 = new THREE.Mesh(cellGeometry, [circleMaterial, ringMaterial]);                                                                                                                                                                                                                                                 \r\nscene.add(mesh1);                                                                                                                                                                                                                                                                                                         \r\nmesh1.renderOrder = radius;                                                                                                                                                                                                                                                                                               \r\nvar mesh2 = new THREE.Mesh(cellGeometry, [circleMaterial, ringMaterial]);                                                                                                                                                                                                                                                 \r\nmesh2.position.x += 2;                                                                                                                                                                                                                                                                                                    \r\nmesh2.renderOrder = radius;    \r\n                                                                                                                                                                                                                                                                             \r\nscene.add(mesh2);  \r\n```\r\n\r\nThe result was not correct, see screenshot!\r\n![1530709073076](https://user-images.githubusercontent.com/1814495/42278306-f63daf40-7fcc-11e8-9063-b8cecd26014d.jpg)\r\n￼\r\n\r\n##### Three.js version\r\n\r\n\r\n- [ ] r94\r\n\r\n\r\n##### Browser\r\n\r\n- [x] Chrome\r\n\r\n\r\n##### OS\r\n\r\n\r\n- [ ] macOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"All my scene objects is created with a **wireframe**. When I export objects from the scene it works ok with the code bellow:\r\n\r\n``` javascript\r\nvar objList = $this.getSceneObjects()\r\nfor (var i in objList) {\r\n  $this.savefile.scene.objects.push(objList[i].toJSON())\r\n}\r\n```\r\n\r\nThen I put all objects together, store some more needed information and save in a whatever file. So my program will **open** this file, it's not an importation at all, it's an opening to keep editing objects... But when I try to do it, I get a lot of errors. That's my opening code:\r\n\r\n``` javascript\r\nvar fileJson = JSON.parse(fs.readFileSync(file))\r\nvar document = new App.Document(file)\r\n        \r\n// Load Scene saved objects\r\nvar loader = new THREE.ObjectLoader();\r\nfor (var obj in fileJson.scene.objects) {\r\n  var item = fileJson.scene.objects[obj]\r\n  document.getScene().add(loader.parse(item))\r\n}\r\n```\r\n\r\nNote in the image attached that none of the objects could be rendered with that **wireframe** I said before... =/\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r93\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n- [x] Chromium\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n![captura de tela de 2018-06-14 20-54-25](https://user-images.githubusercontent.com/2068045/41498127-0391f4c0-713c-11e8-8c5e-6438859a8476.png)\r\n\r\n"},{"labels":["enhancement",null],"text":"It would be great to get Three.js support for the Universal Scene Description (USD) file format and the upcoming USDZ format announced at WWDC today. \r\n\r\nUSDZ specification document: https://graphics.pixar.com/usd/files/USDZFileFormatSpecification.pdf (I assume that more details will come out in the coming months for this format)"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nIt would be very useful for realism to support shadows on RectAreaLights.\r\n\r\nI am unsure of the best technique to use here as I have not researched it yet beyond some quick Google searches.  I am not yet sure what is the accepted best practice in the industry?\r\n\r\nTwo simple techniques I can think of:\r\n- one could place a PointLightShadowMap at the center of a rect area light and it would sort of work.\r\n- less accurate, one could place a SpotLightShadowMap with a fairly high FOV (upwards of 120 deg, but less than 180 deg as that would cause it to fail) at the center of the rect area light and point it in the light direction. \r\n\r\n(I believe with the spot light shadow map you may be able to get better results for large area lights if you moved the shadow map behind the area light surface so that the front near clip plane in the shadow map frustum was roughly the side of the area light as it passed through the area light plane.  I believe I read this in some paper once, but I can remember the source of it.)"},{"labels":[null,"enhancement"],"text":"The results are not sorted in close-to-far order. I can't seem to find anything in [the code ](https://github.com/mrdoob/three.js/blob/master/src/objects/Mesh.js) trying to sort the result.\r\nAm I missing something?"},{"labels":["enhancement"],"text":"##### Description of the feature\r\n\r\nObject space is the local 3D space of the object. Up is always up and left is always left. It is a uniform space that you understand really well because that is what the world is really like. Tangent space, on the other hand, is best thought of as surface space. In tangent space, up is always away from the surface (in other words, along the normal).\r\n\r\nApparently, Three.js only supports tangent space for normal space textures, so it will be very fun to supports object space too.\r\n\r\n"},{"labels":["enhancement"],"text":"Improved alpha testing in mipmapped texture hierarchies via alpha distributions, rather than averaging.\r\n\r\nhttp://www.cemyuksel.com/research/alphadistribution/\r\nhttp://www.cemyuksel.com/research/alphadistribution/alpha_distribution.pdf"},{"labels":["enhancement"],"text":"Now that [we have adopted WeakMaps](https://github.com/mrdoob/three.js/blob/2e689604d521b36e3b7c9e5f46698a697e54b70a/src/renderers/webgl/WebGLAttributes.js#L7) seems like a good time to try again adding lists of objects in memory.\r\n\r\nWe tried some years ago but [WeakMap](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap) was not available in browsers and by using simple Arrays we were going to create memory leaks for use cases where the user relies in the JS garbage collector."},{"labels":["enhancement"],"text":"This ties into the previous meta task that describes the progressive global illumination workflow.  Basically once you can calculate global illumination, you likely want to bake it into the meshes for reuse.  This would also be useful for ambient occlusion and shadow baking as well.\r\n\r\nThere are two aspects to a baking workflow.\r\n\r\nUV Unwrapping via Mesh Color Textures\r\nhttps://github.com/mrdoob/three.js/issues/14053\r\n\r\nRender to Unwrapped Texture\r\nhttps://github.com/mrdoob/three.js/issues/14054"},{"labels":["enhancement"],"text":"It is possible to modify the main ThreeJS shaders so that we can enable rendering a final color to an unwrapped texture target.  This involves using the world position for lighting, but the desired UV coordinate when writing the final results.\r\n\r\nThis should be implemented in a fairly flexible fashion to Three.JS.\r\n\r\n(There may be an additional pass required after the main render pass to do extrapolation around each rendered component.)"},{"labels":["enhancement"],"text":"In order to enable a baking workflow in Three.JS we need to first get an automatic unwrap method into Three.JS.  There are a number of options for unwrap but one of the best currently is Mesh Colors:\r\n\r\nhttp://www.cemyuksel.com/research/meshcolors/mesh_color_textures-high.pdf\r\n\r\nThere are also unwrap approaches in Blender as well which we can study."},{"labels":["enhancement"],"text":"Basically we can do refractions through arbitrary objects via a form of depth peeling.  This should allow for diamonds, glass containers, etc.\r\n\r\nBasics: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.104.9755&rep=rep1&type=pdf \r\n\r\nAdds total internal reflection: http://cwyman.org/papers/gi07_refrWithTIR.pdf http://cwyman.org/supplement/refractionWTIR/RefractionsWithTIRTalk.pdf\r\n\r\n"},{"labels":["enhancement"],"text":"There has recently been a bunch of work towards progressive photo-realistic global illumination in WebGL.  The best example I've seen of this is https://cl3ver.com renderer.  There is some overlap between this and the high end rendering that Octane and other photorealistic GPU renderers do. I think it is time to add this to Three.JS.\r\n\r\nThis is a meta-task that describes what needs to be done (this is in the spirit of the PBR meta task from 2015: https://github.com/mrdoob/three.js/issues/5847)\r\n\r\nThe main components of this approach would be:\r\n\r\nTemporal Reprojection Anti-Aliasing\r\nhttps://github.com/mrdoob/three.js/issues/14050\r\n\r\nProgressive Global Illumination via Instant Radiosity/Virtual Point Lights\r\nhttps://github.com/mrdoob/three.js/issues/14047\r\n\r\nProgressive Soft Shadows via Light Source Sampling\r\nhttps://github.com/mrdoob/three.js/issues/14048\r\n\r\nScreen-space Reflections\r\nhttps://github.com/mrdoob/three.js/issues/8248"},{"labels":["enhancement"],"text":"This is the method used by DICE's latest work as well as UE4.\r\n\r\nThere are two methods of doing this.\r\n\r\nThe first and simpler approach is to just use the delta camera transform to figure out the velocity vectors from the world positions.\r\n\r\nThe more advanced method is to render a velocity field for each object that also incorporates the camera transform, this allows capturing the object velocity of moving objects and the sub-object velocities of deforming objects (such as morphs and skins.)  I would slowly build up to the more complex version of this.\r\n\r\nThe main implementation that people use is this one: https://github.com/playdeadgames/temporal"},{"labels":["enhancement"],"text":"Basically we can do refractions through arbitrary objects via a form of depth peeling.  This should allow for diamonds, glass containers, etc.\r\n\r\nBasics:\r\nhttp://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.104.9755&rep=rep1&type=pdf \r\n\r\nAdds total internal reflection (for things like gems):\r\nhttp://cwyman.org/papers/gi07_refrWithTIR.pdf http://cwyman.org/supplement/refractionWTIR/RefractionsWithTIRTalk.pdf"},{"labels":["enhancement"],"text":"The idea here is that we use the fastest shadow algorithm possible, and then accumulate it across frames.  To get accurate accumulated soft shadows, we should jitter the light origin within the volume of the light.  For a lights of any type we jitter in their volume in a Poisson-like fashion.  This will create physically correct penumbra if you accumulate over time.\r\n\r\nWe can either accumulate in the main frame buffer or we could accumulate in a shadow buffer.\r\n\r\nSketchfab is currently jittering their light sources in order to get soft shadows when the scene is static.  We have also recently implemented a basic light jitter approach in Clara.io and it gives good result.  We should take it to the next level and integrate it with core Three.JS."},{"labels":["enhancement"],"text":"The idea here is to basically use the forward renderer as a ray-trace engine and over a series of frames, usually less than a second, you get a very close to GI solution.\r\n\r\nThe algorithm is quite simple.  You just keep rendering the scene from the standard view while varying the placement of virtual point lights, the placement of which mimics how light roughly bounces through the scene.  For each light thus you need to sample rays from its source and then figure out where those hit the scene.  For each hit you then need the position, normal, light intensity and direct diffuse information, and then on the next render you use these as virtual point lights and re-render the scene, simulating a light bounce.  Likely you need to not use all VPLs in each render, so you need to store them and then sample from the possible VPLs.\r\n\r\nI think this ray casting can be done via the GPU fairly easily, although we will have to read-back textures to then create the virtual point lights.\r\n\r\nMore details: http://www.cs.utah.edu/~schmelze/radiosity/proj/proj.html\r\n\r\nReference: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.40.2213&rep=rep1&type=pdf "},{"labels":["enhancement"],"text":"Hello!\r\n\r\nUsing the WebGL Inspector tool on Chrome I realized that WebGL uniform functions are called even though the uniforms are not changed:\r\n![ekran resmi 2018-05-06 11 12 49](https://user-images.githubusercontent.com/15003836/39671320-72d027aa-511e-11e8-99fd-909e83270a00.png)\r\n\r\nI remember watching a guy from Sony talking about how they integrated the WebGL into the PS4 and how eliminating these redundant calls helped them improving the performance. Since WebGL is simply a state machine, calls that make no change in the current state should be ignored. As this can be simply achieved with an IF condition before the WebGL call another idea would be to add dynamic or shouldUpdate flag to the uniforms.\r\n\r\nAny opinions, ideas or comments on that?\r\n"},{"labels":["enhancement",null],"text":"The example collada loader doesn't appear to support TGA files, I made a fork and with the following changes the loader now supports TGA. Is this something that could be merged?\r\n\r\nhttps://github.com/mrdoob/three.js/compare/dev...vlakken:dev\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r92\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS"},{"labels":["enhancement"],"text":"The [WebXR API](https://immersive-web.github.io/webxr/) is the successor to [WebVR API (v1.1)](https://immersive-web.github.io/webvr/). There is a new Chrome Origin Trial, [WebXR](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/available-trials.md#current-experimental-features).\r\n\r\nYou can test WebXR on Chrome M67+ (with the WebXR and Gamepad Extensions flags enabled from `chrome://flags`). Tentative timeline for Chrome: September 2018. Other browser vendors: TBD.\r\n\r\nRelevant links:\r\n\r\n- [Chrome Beta M67: Announcing WebXR Origin Trial]( https://blog.chromium.org/2018/04/chrome-67-beta-webxr-origin-trial.html)\r\n- [Intent to Experiment (Chromium mailing list)](https://groups.google.com/a/chromium.org/forum/m/#!topic/blink-dev/7TWtMJffZno/discussion)\r\n- https://github.com/immersive-web/webxr-samples#readme\r\n- https://github.com/immersive-web/webxr-polyfill#readme\r\n- https://github.com/immersive-web/webxr-reference#readme (WIP documentation which will eventually live on [MDN](https://developers.mozilla.org/)) \r\n- immersive-web/webvr-polyfill#318"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nSeems like the water shader does not support `logarithmicDepthBuffer`. Not sure what to do there :/.\r\n\r\n##### Three.js version\r\n\r\n- [x] r92\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Hello Everyone,\r\n\r\nHope you all would find this feature request interesting.\r\n\r\nAt this point, threejs editor supports the texture implementation but there is no easier way to set various texture properties like anisotropy, filters, repeat, offset etc. \r\n\r\nI would propose a texture panel to have all the texture properties for each selected object and its texture type.\r\n\r\nThis will ease up the process of scene and asset creation. Without this feature, the material and texture assignment panels look somewhat incomplete.\r\n\r\nI'm sure that this feature will be highly valuable for so many different people and will make the editor more powerful than ever.\r\n\r\nLet me know if this feature makes any sense. Will be glad to have a positive response."},{"labels":[null,"enhancement"],"text":"This is a feature request.\r\n\r\nFor a long time, threejs editor has been lacking the support of `CubeTexture`. \r\nNot just for importing but exporting as well. \r\n\r\nI'm assuming that many people would love this feature.\r\n\r\nMost of the time, we have to go through threejs editor in order to create a scene with proper textures and materials and use it as an asset for the app development. But the lack of CubeTexture makes the app development slightly tricky. \r\n\r\nI'm aware that it's not a straightforward feature and may require a CubeTexture UI Panel, changes in .toJson and .fromJson in the editor and also the changes in the ObjectLoader and some more local storage related adjustments. \r\n\r\nHowever, I believe if this feature gets added, the editor will become more powerful then ever.\r\n\r\nLet me if this request qualifies to be a feature request in upcoming revision?"},{"labels":["enhancement"],"text":"You need a function similar to renderer.render, but with the ability to render it in depth.\r\nWhy is not standard use appropriate?\r\n```\r\nscene.overrideMaterial = overrideMaterial;\r\nrenderer.render (scene, camera, ...);\r\nscene.overrideMaterial = null;\r\n```\r\ndue to the fact that using this method for Skin mesh will be drawn a static position, i.e. without animation.\r\n\r\nWhy is not suitable use:\r\n`renderer.render (scene, camera, ...);`\r\nbecause of the fact that some objects have their own CustomDepthMaterial. And also due to the fact that too heavy shader can be, but in the depths it is not needed.\r\n\r\nHow did I do this? used something between **renderer.render and WebGLShadowMap.renderObject**, because in WebGLShadowMap.renderObject is implemented exactly as it should be done in WebGLRenderer.\r\nI just do not want to make my edits to it after every update of the engine, so I ask you to do this, I think it will be useful to many, now it is not enough."},{"labels":["enhancement"],"text":"This is a feature request.\r\n\r\n1. When importing skewed objects in the Editor, their matrix gets orthogonalized and the skew disappears. It would be nice to be at least able to visualize skewed objects in the editor.\r\n2. There also are no tools to manually skew objects in the editor. It would be nice to be able to manually edit the skew in the editor\r\n\r\nLooking forward to this, thank you !"},{"labels":["enhancement"],"text":"Please take a look at 2 gif below compared rotation behavior of Three.js vs 3ds Max at perpendicular view to the gizmo:\r\n\r\nThree.js weird behavior: ( [video](https://www.youtube.com/watch?v=dkw7IdblsMY) )\r\n![3js](https://user-images.githubusercontent.com/6309393/38475721-21adc7ec-3bd4-11e8-9604-19ca0ed95ca3.gif)\r\n\r\n\r\n3ds Max good behavior: ( [video](https://www.youtube.com/watch?v=NOlicuB6jNU) )\r\n![max](https://user-images.githubusercontent.com/6309393/38475729-2c106eec-3bd4-11e8-8ecd-6b368b6b28cb.gif)\r\n"},{"labels":["enhancement"],"text":"Hi,\r\n\r\nIn my current project I have to implement some complex 2D objects (multilayered GUI) and those will be anchored in 3D space.\r\n\r\nI have noticed lots of artifacts on those planar 2D objects caused by z-index sorting of 2D layers in the same GUI object. There are few ways to solve it:\r\n - disable sorting and use global `THREE.Object3D.renderOrder` to sort items - this is not the best option as I would need to keep track of `THREE.Object3D.renderOrder` globally and update it on many objects if only one item gets inserted in the middle.\r\n - render to off-screen texture first - could work but my GUI is quite dynamic and I gain no perf when doing so and it requires me to update render targets on window / GUI resize.\r\n - apply some small Z epsilon value to separate layers so depth buffer works fine - tried that but this doesn't work 100%. I don't want to limit myself on how far/close to the object the camera can be.\r\n - Create multiple scenes and do few separate render passes - won't work for my project as it would make my project non-extensible or at least it would make it very hard.\r\n\r\nNone of the above are good enough nor easy to implement. IMO the cleanest solution to the problem (which I implemented and tested) was to modify the way WebGLRendererList sorts items by **adding possibility to group render items** into some kind of layers and then play with rather \"local\" than \"global\" `THREE.Object3D.renderOrder` property.\r\n\r\nThe easiest implementation of this feature would look like this:\r\n\r\n> Object3D.js\r\n\r\n``` \r\nclass Object3D {\r\n  // Group render items by this value\r\n  renderOrderGroup: number;\r\n}\r\n```\r\n> RenderItem.js\r\n\r\n``` \r\nclass Object3D {\r\n  // Group render items by this value\r\n  renderOrderGroup: number;\r\n}\r\n```\r\n\r\n> WebGLRendererLists.js\r\n\r\n``` \r\n// Render item would look something like this\r\nrenderItem = {\r\n   id: object.id,\r\n   object: object,\r\n   geometry: geometry,\r\n   material: material,\r\n   program: material.program,\r\n   renderOrder: object.renderOrder,\r\n   renderOrderGroup: object.renderOrderGroup,\r\n   z: z,\r\n   group: group\r\n};\r\n\r\n// Sorting extended by this\r\nfunction painterSortStable(a: RenderItem, b: RenderItem) {\r\n    if (a.renderOrderGroup !== b.renderOrderGroup) {\r\n        return (a.renderOrderGroup || Number.MIN_SAFE_INTEGER) - (b.renderOrderGroup || Number.MIN_SAFE_INTEGER);\r\n    } \r\n    // ... followed by rest of the sorting comparisons\r\n}\r\n``` \r\nBeing able to group items with layers is a nice and clean way to solve the limitation of ThreeJS (big one in my project at least) when working with GUI/2D objects embedded in 3D space.\r\n\r\nAnother way (even more extensible IMO) would be to add support for customizing sorting logics so app can do whatever crazy stuff they want (i.e. via data stored in `THREE.Object3D.userData` property).\r\nOne would simply pass custom sorter into the `THREE.WebGLRendererLists` or even pass entirely new implementation to the `THREE.WebGLRenderer.renderLists` property.\r\n\r\nI could make a PR with either of the proposed changes if anyone thinks it is a good idea. Otherwise I will stick with my little hack where I override the prototype of the WebGLRendererLists - ugly but works for me now. :)\r\n\r\nThanks,\r\nLukasz"},{"labels":["enhancement",null],"text":"Please expand the ColladaLoader to support polylist of more than 4 vertices.\r\n\r\nHere is a section of the DAE that the loader can't parse correctly.\r\n\r\n`<polylist count=\"18\" material=\"Material2\">\r\n                    <input offset=\"0\" semantic=\"VERTEX\" source=\"#ID23\"/>\r\n                    <input offset=\"1\" semantic=\"TEXCOORD\" source=\"#ID24\"/>\r\n                    <vcount>5 5 8 8 4 4 4 4 5 5 5 5 5 5 4 4 4 4</vcount>\r\n                    <p>0 0 1 1 2 2 3 3 4 4 5 4 6 3 7 2 8 1 9 0 10 5 11 6 12 7 13 8 14 9 15 10 16 11 17 12 18 12 19 11 20 10 21 9 22 8 23 7 24 6 25 5 26 13 27 14 28 15 29 16 30 16 31 15 32 14 33 13 34 17 35 18 36 19 37 20 38 20 39 19 40 18 41 17 42 21 43 22 44 23 45 24 46 25 47 25 48 24 49 23 50 22 51 21 52 26 53 27 54 28 55 29 56 30 57 30 58 29 59 28 60 27 61 26 62 31 63 32 64 33 65 34 66 35 67 35 68 34 69 33 70 32 71 31 72 36 73 37 74 38 75 39 76 39 77 38 78 37 79 36 80 40 81 41 82 42 83 43 84 43 85 42 86 41 87 40</p>\r\n                </polylist>`\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r91\r\n- [ ] ...\r\n"},{"labels":["enhancement",null],"text":"We’ve been [discussing for a while](https://github.com/mrdoob/three.js/issues/9965) how to address the WebGL2Renderer implementation. But it seems we just keep delaying it because of other priorities and also due to the complexity, that surely will require a decent amount of time and effort to get it done completely.\r\n\r\nTo help unblocking this issue I have included this feature on my team’s roadmap ([mixed reality team at mozilla](https://twitter.com/mozillareality)) to help improving the WebGL & WebXR ecosystem. So you should expect some mozillians working on it not just as their hobby :)\r\n\r\nI’ve been discussing with @mrdoob to create a [Github Project just for WebGL2Renderer](https://github.com/mrdoob/three.js/projects/3) so we could keep track of the things being developed for the WebGL2Renderer and make it easy to spot where your help could speed up the release of new features.\r\n\r\nIn the short term @takahirox has been working on [VAO](https://github.com/mrdoob/three.js/issues/8705) and [UBO](https://github.com/mrdoob/three.js/issues/13700) implementation, identifying the changes that must be done on the current renderer to accommodate them. So we would like to kick off the discussion with these two features."},{"labels":["enhancement",null],"text":"When working on the webgl2 renderer, there're two features we could use to improve the performance as usually we're CPU-bound. One if [Vertex Array Objects (VAO)](https://github.com/mrdoob/three.js/issues/8705) and the other one is Uniform Buffer Objects. While VAO could be used on WebGL1 too via extensions, UBO can't, so we could just implement it on the webgl2 renderer.\r\nAs it will require lot of changes, it could be nice to benchmark first how good it will perform and specially try to identify which level of granularity when choosing the blocks are we aiming for, as it will have impact on the code's complexity and performance."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nThe raycaster provides UV coordinates of the hit point, but not UV2 (second layer, i.e. `faceVertexUvs[1]`) coordinates.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r91\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nSpriteMaterials are not clipped (see screenshot below). Although [SpriteMaterial constructor docs](https://threejs.org/docs/#api/materials/SpriteMaterial) specifically state that all inherited [Material properties](https://threejs.org/docs/#api/materials/Material.clippingPlanes) can be set.\r\n\r\n\r\n```\r\nvar textureLoader = new THREE.TextureLoader();\r\ntextureLoader.crossOrigin = \"Anonymous\";\r\ntextureLoader.load(\"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png\", function(texture) {\r\n\r\n\tvar mat = new THREE.SpriteMaterial({\r\n\t\tmap: texture,\r\n\t\tclippingPlanes: [{clipPlane}]\r\n\t});\r\n\r\n\tvar sprite = new THREE.Sprite(mat);\r\n\r\n\tsprite.position.set(-1, -1, 2);\r\n\tscene.add(sprite);\r\n});\r\n```\r\n\r\n<img width=\"719\" alt=\"screen shot 2018-03-08 at 22 55 12\" src=\"https://user-images.githubusercontent.com/5583186/37178949-4f1eb2fe-2324-11e8-92e4-2eb710959b4a.png\">\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r90\r\n- [x] r89\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome (only one tested so far)\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [ ] Windows\r\n- [x] macOS (only one tested so far)\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements\r\n\r\nMB Pro 13 2017\r\n\r\n\r\n\r\n**_PS: Thanks for the awesome work_**\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nIn the FAQ section of the documentation, there is this question:\r\n\r\n> Which Import Format/Exporter is best supported?\r\n\r\nThis question intrigued me, since there are so many available importers, so I tried to search for an answer to this question. After browsing a bit I saw that there were a couple of them available:\r\n\r\n- https://github.com/mrdoob/three.js/issues/580\r\n- https://stackoverflow.com/questions/11243689/preferred-3d-model-format-of-three-js\r\n\r\nBut these are a bit outdated, dating as far as 7 years ago. So I would like to know the answer to this question, and if possible, have this section of the documentation filled.\r\n\r\nI think having this question filled, would also be valuable for a lot of developers using this library.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r90\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement",null],"text":"Currently, [SVGLoader](https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/SVGLoader.js) only returns the nodes.\r\n\r\nI hink it'll be a great improvement if the loader could convert svg nodes to `THREE.Shape` which could then be used by `THREE.ShapeGeometry` or `THREE.ExtrudeGeometry`. With that in place, adding `svg` support to the [editor](https://threejs.org/editor/) would make a few designers happy.\r\n\r\nWe happen to have some basic code already in [webgl_geometry_extrude_shapes2](https://rawgit.com/mrdoob/three.js/dev/examples/webgl_geometry_extrude_shapes2.html):\r\n\r\nhttps://github.com/mrdoob/three.js/blob/dev/examples/webgl_geometry_extrude_shapes2.html#L49-L389\r\n\r\nAlso, for reference, @jonobr1 has been tackling this same issue for `two.js` for a while now:\r\n\r\nhttps://github.com/jonobr1/two.js/blob/dev/src/two.js#L798-L1475\r\n\r\n"},{"labels":["enhancement"],"text":"It would be helpful to have Octree.search return the index of the face or vertex in the result set.\r\n\r\nThe current results do not have a reference to their original position in the faces or vertices array.\r\n\r\nMaybe this is already implemented and I cant figure out where.  work i have done #13459 "},{"labels":["enhancement"],"text":"I would like a more robust `Material.onBeforeCompile` system to work with the current state of the default materials.\r\n\r\n1. It's not actually documented, but from the example it's not obvious that there is a very specific way in which the callback needs to be written. Any conditional logic inside the callback may or may not be executed depending on the order in which the materials have been added to the scene or encountered by the first render call. \r\nSee:\r\nhttps://github.com/mrdoob/three.js/issues/13192\r\nhttps://codepen.io/anon/pen/KQPBjd\r\nThe workaround for this seems extremely hacky, and one has to think of functions/callbacks in a specific way, if that makes sense. Literally the raw code you write in the callback matters. **I would like to not think of this function as data, but the stuff inside it as data.**  If you are writing some kind of a utility that somehow configures `onBeforeCompile` in different ways, rather than writing:\r\n```\r\nfunction myOnBeforeCompile(shader){\r\n  if(someUniform){\r\n    //replace some chunk\r\n  }\r\n\r\n  if(someArbitraryProperty){\r\n    //replace some chunk\r\n  }\r\n \r\n  if(someCondition){\r\n     //replace multiple chunks\r\n  }\r\n\r\n}\r\n```\r\n```\r\nsomeMaterial.onBeforeCompile = someUniform ? onBeforeCompileForCombinationFOO : someOtherOnBeforeCompile\r\n//or maybe something like this, but it feels weird, \r\n//whatever this Manager would do would probably look gnarly\r\nsomeOtherMaterial.onBeforeCompile = OnBeforeCompileManager.getOnBeforeCompile( someUniform, someProperty)\r\n```\r\n\r\n2. It's kinda verbose, and really wants me to understand that shader is a string. I would like it to be more like data. Instead of these chained \"do stuff to string\" calls, **i would like to have a configurable object where i can say `{ chunkName: chunkString}`**. If replace() is the only thing i will ever want to call in this callback, on `fragmentShader` or `vertexShader` it would be nice if it's hidden away:\r\n```\r\nsomeMaterial.onBeforeCompile = shader = >{\r\n   shader.fragmentShader = shader.fragmentShader.replace('#include <foo>', myFoo)\r\n   shader.fragmentShader = shader.fragmentShader.replace('#include <bar>', myFoo)\r\n   shader.fragmentShader = shader.fragmentShader.replace('#include <baz>', myFoo)\r\n   // don't like calling shader.fragmentShader = shader.fragmentShader \r\n   // don't like looking for #include <> if I know that it's a chunk and it's name is foo,bar,baz\r\n   // don't like calling string.replace()\r\n```\r\n```\r\n//chunks as data\r\nsomeMaterial.replacableChunksOrWhatever.foo = fooGLSL  \r\nsomeMaterial.replacableChunksOrWhatever.bar = barGLSL  \r\nsomeMaterial.replacableChunksOrWhatever.baz = bazGLSL  \r\n```\r\n\r\n3. It's not obvious where uniforms, functions, attributes and varyings should be injected. Prepending the shader in the callback should work, but causes a warning for example with `#extension` directives (there's more stuff that happens above the pre-compile shader). Again i'd like to see it more as data.\r\n```\r\nsomeMaterial.onBeforeCompile = shader =>{\r\n  shader.fragmentShader = myPrependedAndFormattedUniformsVaryings +  shader.fragmentShader \r\n  //...\r\n}\r\n//i'd rather see it as data and not concern myself over the semantics of how it gets injected\r\nsomeMaterial.customGLSL.vertexUniforms.foo = {type: 'v4', value: new THREE.Vector4()} \r\n```\r\n\r\nI've tried to implement these changes in:\r\nhttps://github.com/mrdoob/three.js/pull/13198\r\n\r\nThoughts @Mugen87 ?\r\n\r\nPer discussion with @mrdoob all of this would go away in favor of all the materials being rewritten with the node material. Until that happens, i would like to see a way to interact with the default materials thats more robust. \r\n\r\nI think this is called configuration over convention. I would configure these materials with custom stuff upon construction, and then not care about the string manipulation, and particular moments in time like compile time. \r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r90\r\n- [ ] ...\r\n\r\n"},{"labels":["enhancement"],"text":"Currently, it's inconvenient and error-prone to change the transparency of an entire object, where the object is subtree (not just a single Mesh, but a hierarchy of objects and meshes). There isn't a simple way to, for example, fade out an entire car where the car consists of sub-objects like wheels, doors, windshields, etc.\r\n\r\nCurrently, we traverse the sub tree and manually set opacities on each mesh of the sub tree. F.e., like the following answers:\r\n\r\n- https://github.com/mrdoob/three.js/issues/3650\r\n- https://stackoverflow.com/questions/15214543/three-js-change-the-opacity-of-an-entire-branch\r\n- https://stackoverflow.com/questions/31797871/three-js-alpha-on-entire-object\r\n\r\n### The problem with the current approaches:\r\n\r\n- prevents encapsulation: couples parent effect (opacity) to child state (child opacities).\r\n    - This is undesirable because it means, if we are dealing with an object who's subtree is generated and managed by third-party code or the code from some other team (f.e. in a big project), then modifying child state can conflict with the external code that may be modifying the same state, which can cause bugs)\r\n  - In CSS applications (mainly 2D apps because opacity on 3D DOM is straight weird), opacity is relative to the parent, which prevents interference with child state. The children and manipulators of the children don't have to be aware of parent opacity. It makes it easy to, for example, fade out an entire drop down menu without having to loop on all the sub-menu items.\r\n- The process is complicated and error prone, which doesn't lend to an easy-to-use scene graph, which I think is Three's goal to have, and that in general is very useful for any scene graph to have.\r\n\r\n### Solution:\r\n\r\nThere are two possible solutions, and both should be optional so that it is backwards-compatible:\r\n\r\n1. Simple multiplicative opacity that can be set on an Object3D (and any objects that inherit from it) so that opacities are multiplied down the tree just like with transform matrices.\r\n    - I am aware that this means that parts of a whole object that are inside each other will become visible, just like in this [SO post](https://stackoverflow.com/questions/31797871/three-js-alpha-on-entire-object). This is okay, and can be fine in many cases.\r\n2. Still-simple-to-use but more-complicated-implementation opacity that involves rendering an object that has been specified to have a group opacity to a render target to be composed back into the scene, just like in the second screenshot of that [same SO post](https://stackoverflow.com/questions/31797871/three-js-alpha-on-entire-object).\r\n    - This obviously costs more resources and is slower\r\n    - It can lead to better visual effects.\r\n\r\nPersonally, it'd be great to have both types of opacity, and for both of them to be as simple as specifying `opacity` or `groupOpacity` on an Object3D, and for the engine to take care of the rest. So that this is all very easy for the end user.\r\n\r\nBoth options should be completely opt-in, so that they don't affect current programs that may already be doing these sorts of things in their own way.\r\n\r\nAPI might look like this:\r\n\r\n```js\r\nconst someObjectThatHasChildren = new Object3D\r\n\r\n// ... add a subtree to someObjectThatHasChildren, including Meshes ...\r\n```\r\n\r\nThen either\r\n\r\n```js\r\nsomeObjectThatHasChildren.opacity = 0.3\r\n```\r\n\r\nor\r\n\r\n```js\r\nsomeObjectThatHasChildren.groupedOpacity = 0.3\r\n```\r\n\r\nIt would be possible for both opacities to be applied. For example, if we did\r\n\r\n```js\r\nsomeObjectThatHasChildren.opacity = 0.3\r\nsomeObjectThatHasChildren.groupedOpacity = 0.3\r\n```\r\n\r\nThen, first the group opacity would cause the whole subtree to be rendered to a new target, then while rendering to the new target the non-group opacity would come into play. So, on the separate render target, objects would be rendered with opacity relative to a parent of opacity 0.3, then once the object is composed back into the main scene, it would be rendered at a further 0.3 opacity of that result (in total, 0.3 * 0.3.\r\n\r\nIf we do it that way, then handling the non-group oacity is completely decoupled from the grouped opacity, and their maintaining them both is not coupled and modifying one feature does not affect the other feature."},{"labels":["enhancement"],"text":"After facebook [announced glTF support on their timeline](https://developers.facebook.com/blog/post/2018/02/20/3d-posts-facebook/) I've been trying to use the `GLTFExporter` to generate some binary glTF (`glb`) to test this new feature.\r\n\r\nBut I've found some problems so far:\r\n\r\n- [x] GLB Chunks must be 4-byte aligned https://github.com/mrdoob/three.js/pull/13395\r\n- [x] Validation: Fix znear and zfar: https://github.com/mrdoob/three.js/pull/13396\r\n- [x] Vertex Color: Facebook supports just RGBA but not RGB. As shown on the [validation message](https://developers.facebook.com/tools/3d/validation): \r\n`[msg] => Vertex COLOR_0 attributes of type RGB are (temporarily) notsupported. They must be RGBA.`. Although `COLOR_0` could be `vec3` or `vec4` and we could include an optional parameter to force the conversion of the `color` attribute from 3 to 4 components, I don't think we should do that hack as our current implementation is following the spec and I don't see any other use case for that conversion than just hijack the facebook validator while they're working on fixing it. **<-- Update: This should be done in the following weeks, so we don't need to workaround it**\r\n- [x] Non indexed meshes are not supported: `[msg] => Mesh primitives without indices are (temporary) unsupported.\r\n- [ ] Export other primitive modes (Currently just TRIANGLE supported)\r\n\r\nMore info: https://developers.facebook.com/docs/sharing/3d-posts/glb-tutorials"},{"labels":["enhancement",null],"text":"I would like to ask for advice because of I have one use case where I need to load VTK file which is a BINARY DATASET STRUCTURED POINTS, which represents a segmented image.\r\n```\r\n# vtk DataFile Version 3.0\r\nVTK File Generated by Insight Segmentation and Registration Toolkit (ITK)\r\nBINARY\r\nDATASET STRUCTURED_POINTS\r\nDIMENSIONS 1040 1040 1\r\nSPACING 2.6455026988983699e-01 2.6455026988983699e-01 1.0000000000000000e+00\r\nORIGIN 0.0000000000000000e+00 0.0000000000000000e+00 0.0000000000000000e+00\r\nPOINT_DATA 1081600\r\nSCALARS scalars unsigned_short 1\r\nLOOKUP_TABLE default\r\n\r\nBinary data\r\n```\r\nThank you for your help."},{"labels":["enhancement"],"text":"As reported in https://github.com/mrdoob/three.js/pull/12763#issuecomment-364320372, we're currently updating the video texture at 60 (or 90 in VR) fps.\r\n\r\nIdeally we'll only update the texture on the GPU in sync with the video framerate (usually 25-30). Unfortunately the web platform does not provide any API for figuring out the framerate of a video so something like `videoTexture.frameRate = 25` is needed.\r\n\r\nIt seemed easy enough so I tried to implement this (#13304) but I hit some browser bugs and I had to revert (#13305).\r\n\r\nIt'll be good to investigate this a bit more and report bugs to browsers if needed."},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nI'd like to add to the Directional Light and Spot light the ability to set/get the light direction in an explicit fashion.  Preferrably light.direction = ... or var direction = light.direction.  Right now both the DirectionalLight and SpotLight are really hard to figure out where they are pointing, it isn't one line of code but a bunch.  I would like to a generic accessor that hides this complexity.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAfter the replacement of `ColladaLoader` with `ColladaLoader2` (now named just `ColladaLoader`), it looks like the imported information has changed a little bit.\r\n\r\nheres a (condensed) snippet of my dae.\r\n```\r\n<library_nodes>\r\n  <node id=\"ID3\" name=\"Element_entry-door-handle\">\r\n    <node id=\"ID47\" name=\"instance_3\">\r\n      </matrix>\r\n      <instance_node url=\"#ID48\" />\r\n    </node>\r\n  </node>\r\n  <node id=\"ID48\" name=\"Anchor\">\r\n    </instance_geometry>\r\n  </node>\r\n</library_nodes>\r\n```\r\n\r\nthe behavior that i used to see was that the imported dae object would look like this:\r\n```\r\nscene.children[0] = [\r\n  {\r\n    name: 'Element_entry-door-handle',\r\n    children: [\r\n      {\r\n        name: 'Anchor'\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nnow it is looking like this:\r\n```\r\nscene.children[0] = [\r\n  {\r\n    name: 'instance_0',\r\n    children: [\r\n      {\r\n        name: 'instance_3'\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nis this the expected output? on one hand i see at as incorrect because of how `ColladaLoader` used to work, but on the other hand i see it as correct because it matches how the dae is represented.\r\n\r\ni am able to achieve what i need by doing a search through `library.nodes` and marrying the 'instance' up with its original definition and getting _that_ name.\r\n\r\nwould you accept a PR if i ensure that instance nodes are coming through with their definitions name rather than `'instance_0'`, `'instance_1'` etc?\r\n\r\ni'll work on putting together a jsfiddle and updating this issue once complete.\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r90\r\n- [x] r88\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nCurrently CylinderGeometries and by extension ConeGeometries are defined in terms of their heights and radii. Would it be possible to add a feature to define the initial position for the midpoint of the geometry and a direction vector to supply and orientation?\r\n\r\nThe new signature could be:\r\n\r\n```\r\nCylinderGeometry(radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength, midpoint, orientation)\r\nradiusTop — Radius of the cylinder at the top. Default is 1.\r\nradiusBottom — Radius of the cylinder at the bottom. Default is 1.\r\nheight — Height of the cylinder. Default is 1.\r\nradialSegments — Number of segmented faces around the circumference of the cylinder. Default is 8\r\nheightSegments — Number of rows of faces along the height of the cylinder. Default is 1.\r\nopenEnded — A Boolean indicating whether the ends of the cylinder are open or capped. Default is false, meaning capped.\r\nthetaStart — Start angle for first segment, default = 0 (three o'clock position).\r\nthetaLength — The central angle, often called theta, of the circular sector. The default is 2*Pi, which makes for a complete cylinder. \r\nmidpoint — The midpoint of the line connecting the top and bottom of the cylinder.\r\norientation — The normalized vector supplying the orientation of one end of the cylinder to point.\r\n```\r\n\r\nThanks!\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r90\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAs the title imposes the sao pass have an issue, when you use an orthographic camera (instead of a perspective one). Similar to [#13274](https://github.com/mrdoob/three.js/issues/13274) the depth computation is not working properly. Also the proposed solution from @Mugen87 to fix the issue for  [#13274](https://github.com/mrdoob/three.js/issues/13274) is not sufficient enough to solve the problem here.\r\n\r\nImage showing the scene rendered with output option: Beauty+SAO:\r\n![Beauty+SAO](https://i.imgur.com/0nbn0AP.png)\r\n\r\nImage showing the scene rendered with output option: Depth:\r\n![Depth](https://i.imgur.com/SNrBEyJ.png)\r\n\r\nI also created a fiddle demonstrating the problem:\r\n- https://jsfiddle.net/vgs6r3pj/\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r89\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nMobile touch is not working for the following example:\r\n\r\nhttps://threejs.org/examples/webgl_panorama_equirectangular.html\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r89\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nAs the title imposes the outline pass have an issue, when you use an orthographic camera (instead of a perspective one). The behavior of the decision, whether the edge is visible or hidden is different (and actually not correct). An outline segment is \"marked\" as hidden if something is drawn in front or behind the segment. Only if there is nothing else than the background the outline segment is \"marked\" as visible.\r\n\r\nHere is an image showing the issue:\r\n\r\n![Outline Pass Orthographic Camera Issue](https://i.imgur.com/T7mdhjm.png)\r\n\r\nAnd I also included a jsfiddle:\r\n\r\n* [jsfiddle](https://jsfiddle.net/jjtvd4c1/)\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r89\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Hello!\r\nTo get the Hessian representation of a Plane geometry, I go through these stages:\r\n1) Sample a random point on the surface (around 10 lines of code)\r\n2) Get the world normals of the mesh (around 4 lines of code)\r\n3) Calculate the normal.x, normal.y, normal.z and the constant p for the Plane constructor (around 10 lines of code)\r\n\r\nSo it takes around 24 lines of code to get the Plane object from a Plane mesh. I believe it would be really useful to have a one-liner (Plane.fromPlaneGeometry() or something like that) since the Plane class can be really handy when estimating collisions etc.\r\n\r\nThanks!"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nConsider to apply FocalLength from fbx file for Pespective camera. It's makes scene looks pixel perfect as in 3ds max.\r\n\r\n```javascript\r\nvar FocalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\r\n\r\nswitch ( type ) {\r\n\r\n   case 0: // Perspective\r\n      model = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\r\n      if ( FocalLength !== null )  model.setLens( FocalLength );\r\n      break;\r\n```\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r89\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nThe `WebGLRenderer` has an internal `loop` function as part of the `animate` function, looking at the code it will loop indefinitely and there is no hook for disposal either:\r\n\r\n\tfunction loop( time ) {\r\n\t\tif ( onAnimationFrame !== null ) onAnimationFrame( time );\r\n\r\n\t\tvar device = vr.getDevice();\r\n\r\n\t\tif ( device && device.isPresenting ) {\r\n\t\t\tdevice.requestAnimationFrame( loop );\r\n\t\t} else {\r\n\t\t\twindow.requestAnimationFrame( loop );\r\n\t\t}\r\n\t}\r\n\r\n(Looked into this after my `animate` callback was still being executed after calling `renderer.dispose()`, which seems like it should not be the case.)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r88\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS"},{"labels":["enhancement"],"text":"I didn't see these two options in Three, unless I missed it.\r\n\r\nBased on https://github.com/mrdoob/three.js/issues/5554, it'd be cool to start getting more ways to tweak shadow.\r\n\r\nWe need a **bias that adapts to slope**, and a **normal bias** to be up to standard it seems. \r\n\r\nThose would help me get rid of ACNE in this demo: https://codepen.io/anon/pen/dJKxxp\r\n\r\nNo matter what I set for the `bias` on line `8`, I can't seem to find a way to remove the ACNE. It is more noticeable if you go full screen on desktop, and move the light to one side then look at the opposite side.\r\n\r\n\r\nAs #5554 says,\r\n\r\n> currently if you have a large plane you want to receive shadows - you are out of luck pretty much.\r\n\r\nSeems like that's the case here because of the light making steep angles with the backgound surface."},{"labels":["enhancement"],"text":"**Problem**\r\n- We use shader code from the `THREE.MeshPhongMaterial` in a `THREE.ShaderMaterial`\r\n- The results are the same, except on Macbooks with radeon cards, where shadows are missing\r\n- This is caused by loops in the shadow shader chunks\r\n- If we force the [unrollLoops in WebGlProgram][WebGlProgram] to execute for our ShaderMaterial, we get correct results\r\n- See [Original Issue][Original Issue 3d.io] on 3d.io for further information\r\n\r\n**Design Questions**\r\n\r\n- Why does the condition in [line 509][WebGlProgram] exclude shader materials?\r\n- Why does it not exclude raw shader materials?\r\n\r\nRight now, the .isShaderMaterial, .isRawShaderMaterial etc. are arbitrary flags that do many different things in the WebGlProgram and in other places, and the original intent is not comprehensible.\r\n\r\n**What's next?**\r\nWe would like to solve this edge caseand make a PR so that we can avoid the dirty workaround we are currently using, but we also think being able to unrollLoops for ShaderMaterial can be essential for the usability thereof.\r\n\r\nHow should we go about this? We would first like to understand what is the reason for the status quo.\r\n\r\nOne idea was to implement an optional flag in the material prototype definition to replace the condition \r\n(eg. Material.prototype.unrollLoops)\r\n\r\nUsually I would not suggest to add a flag for something like this, but we need a way to toggle the unroll in the _WebGlProgram_ from the material definition or enable it for all ShaderMaterials.\r\n\r\nCurious to hear other great ideas!\r\n\r\n[Original Issue 3d.io]: https://github.com/archilogic-com/3dio-js/issues/38#issuecomment-356644954\r\n[WebGlProgram]: https://github.com/mrdoob/three.js/blob/949690710f25127869a60a3762b638feb0c60c0c/src/renderers/webgl/WebGLProgram.js#L509"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nUUID generation in Math.js produces strings stored as concatenated strings in Firefox and Chrome.\r\n\r\nOn Chrome 40bytes are used for each component of the final string,  creating heap overhead.  In my application with thousands of objects this adds up.\r\n\r\nFor example, Heap size using Chrome\r\n\r\nr89 as is: 95MB\r\nr89 with uuid flattened with String().toUpper(): 66MB.\r\n\r\nI see similar results using Firefox.\r\n\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x ] r89\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [x ] Chrome\r\n- [x] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Currently the flares are rendered in a special pass, the code being in the WebGLFlareRenderer. It checks if the lensflares are visible by rendering a depth mask.\r\n\r\nHowever the depth mask shader does not handle the case of the logarithmic depth buffer, causing the flares to be hidden by objects behind them. \r\n\r\nI've started crafting solutions but didn't find something conclusive yet, opening this issue in case someone sees how to go for it."},{"labels":["enhancement"],"text":"While working with the client files exported from JNetCAD, I had this error:\r\n![screen shot 2018-01-03 at 20 00 27](https://user-images.githubusercontent.com/242577/34535042-fabbd0e2-f0c0-11e7-9119-bea8660eceb0.png)\r\n\r\nwhich was caused by following group:\r\n![screen shot 2018-01-03 at 19 59 38](https://user-images.githubusercontent.com/242577/34535067-0e7bb6b0-f0c1-11e7-9e86-6aa7e154ad72.png)\r\n\r\nI think 3js could easily create THREE.Points for these, but if not, at least create dummy Object3D and do not throw errors?\r\n  "},{"labels":["enhancement"],"text":"Could you add a feature to the editor, to download map files ?\r\nFor example, this mesh, has 3 maps (Map,Rough Map, and Env Map):\r\nhttps://threejs.org/editor/#file=https://mrdoob.neocities.org/021/app.json\r\nhowever , if I click on the texture icon it asks me to upload a file, but what I want is to download it.\r\nIs this possible to implement?\r\nIn the mean time, where exactly the URL is stored in the app.json,  so I could download it and use in my own mesh?\r\n"},{"labels":[null,"enhancement"],"text":"It seems nothing shows up when I filter on 'triangulateShape' on https://threejs.org/docs/\r\nIs that intended behavior? Can you reproduce?"},{"labels":["enhancement",null],"text":"##### Description of the problem\r\n[Here](http://hedges.org/thehedges/Ver21.wrl) is one such example of a text node with a \"size\" field containing only one number.\r\n##### Three.js version\r\n\r\n- [x] r89\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS"},{"labels":["enhancement"],"text":"##### Description of the problem\r\nIt is sometimes desirable (for performance/quality tradeoff)  to prepare VR frames at a resolution other than the recommended one.  This can be achieved for Vive (with limited detail on the control) using the supersampling slider in the SteamVR settings.  It would be convenient to be able to do so under program control\r\n\r\nThis can be achieved with a setting such as `renderer.vr.pixelRatio` (default 1), and code lines in `onVRDisplayPresentChange()`\r\n```\r\nvar ratio = renderer.vr.pixelRatio;\r\nvar renderWidth = eyeParameters.renderWidth * ratio;\r\nvar renderHeight = eyeParameters.renderHeight * ratio;\r\n```\r\n\r\nIt would only apply at the time of entering VR.  To emphasize this, an alternative API would be a wrapper  `renderer.vr.requestPresent(pixelRatio = 1)`.\r\n\r\n##### Three.js version\r\n\r\n- [x] any\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n- [x] All of them\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"##### Description of the feature change \r\n\r\nI find it frustrating that the editor asks to confirm every time I delete an object. It's easy enough to undo a mistaken deletion, so a hard confirmation seems unnecessary. If project maintainers agree, I'd be happy to send out a PR for the changed behavior.\r\n"},{"labels":[null,"enhancement"],"text":"##### Description of the feature \r\n\r\nIn Chrome dev tools, you can select a CSS value like `10px` and hit the up key on your keyboard to change it to `11px`, or shift + up to change it to `20px`. Likewise for down. This is a common pattern in design tools like Figma and Sketch as well. I would love something like this in the numeric inputs in the three.js editor! If others think this would be useful, I'd be happy to implement it and send out a PR.\r\n\r\nHere's a gif of what it looks like in Chrome dev tools (in the gif I hit up five times and up + shift five times):\r\n\r\n![updown](https://user-images.githubusercontent.com/945937/34175000-c06bc2b6-e4af-11e7-8b4b-d8d6ff56eb53.gif)\r\n\r\nThis feature would be most useful to me for the position/rotation and scale inputs in the editor:\r\n\r\n<img width=\"279\" alt=\"screen shot 2017-12-19 at 11 31 31 am\" src=\"https://user-images.githubusercontent.com/945937/34175152-466f422a-e4b0-11e7-8f7c-bc3edcb58934.png\">\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nIt would be awesome if you could add a `renderOrder` property to a `Mesh` in a `scene.json`, and when loaded in the editor (r88) it would set the render order for the Mesh object. It would be even more awesome to have a way to set the `renderOrder` in the OBJECT tab in the SCENE tab in the editor! \r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r88\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nCurrently, Sprite's pivot at the center of the texture. It could allow itself to pivot at anywhere of the texture. \r\nI suggest that it can be used in this way:\r\n```javascript\r\nsprite.pivot = new Vector2(0.5, 0.5) // 50%, 50% pivot at center\r\nsprite.pivot = new Vector2(0.5, 1) // 50%, 100% pivot at center bottom\r\nsprite.pivot = new Vector2(1, 1) // 100%, 100% pivot at right down corner\r\n```\r\nI have found the corresonding StackOverflow question but the first answer seems to be a little difficult. Maybe the last answer will be helpful for implementing this enhancement. \r\nThat answer changes the vertices array. \r\nthe StackOverflow question link: https://stackoverflow.com/questions/24757325/three-js-change-the-pivot-point-of-a-sprite\r\n\r\n##### Three.js version\r\n\r\n- [x] r86\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"I have built a VR application similar to [WebVR-Vive-Dragging](https://threejs.org/examples/#webvr_vive_dragging) that allows to interact with numerous 3d objects using VR controllers. This means that a user can grab an object with a VR controller and can move or scale it. \r\n\r\n**Problem**: When there are complex 3d objects in the scene, i.e. `THREE.Mesh` objects having geometries with a very large number of vertices, then the raycasting during the collision detection gets very slow. Hence, the problem is the complexity of the geometry of one object.\r\n\r\nThere are tree data structures for fast spatial search, such as [Octree](https://en.wikipedia.org/wiki/Octree) or [R-Tree](https://en.wikipedia.org/wiki/R-tree). I have found [threeocttree](https://github.com/collinhover/threeoctree) that allows to split up a geometry into smaller chunks but it seems that it is a bit out of date (Three.js r60).\r\n\r\nAs far as I see, in `THREE.Mesh` object's `raycast` method there are already some performance optimizations (checking bounding box and sphere first before doing actual raycast). Maybe it would make sense to have another such check stage using spatial search trees?! What do you think?\r\n\r\nKind regards"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nAfter commit b3cf1c73c279d7d9788d4a9735d17dcb7893b50c the outlinePass renders transparent backgrounds in black.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r88\r\n\r\n##### Browser\r\n\r\n- [x] Chrome latest\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows 10\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem \r\n\r\nToday, the Three.js engine does not allow the use of arbitrary UV coordinate sets for textures. Instead, they're hardcoded to channel 0 for all textures, except for lightMap which uses channel 1. As a result, the `texCoord` property of glTF textureInfo objects are ignored. Thus, the glTF loader is not compliant to the spec.\r\n\r\nOnce the engine supports UV channels better, this issue is a reminder to update the loader too.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r87\r\n- [ ] ...\r\n\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem \r\nHi,\r\n\r\nI've some problems with the texture mapping to `dae` object, after examining `ColladaLoader` I've found that in the old version \r\n```\r\n\tcase 'offsetV':\r\n\tcase 'repeatU':\r\n\tcase 'repeatV':\r\n\r\n\t\tthis.texOpts[ child.nodeName ] = parseFloat( child.textContent );\r\n\r\n\t\tbreak;\r\n```\r\nwhile in the new one\r\n\r\n```\r\n\t\tcase 'repeatV':\r\n\t\tcase 'offsetU':\r\n\t\tcase 'offsetV':\r\n\r\n\t\t\tdata.technique[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\tbreak;\r\n\r\n```\r\n\r\nSo after editing the new `ColldaLoader` like this the mapping worked like expected\r\n```\r\n\t\tcase 'repeatV':\r\n\r\n\t\t\tdata.technique[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\tbreak;\r\n```\r\n\r\n[Old ColladaLoader screenshot](https://imgur.com/a/4Wk4v)\r\n\r\n[New ColladaLoader screenshot](https://imgur.com/a/1TBPD)\r\n\r\n[mesh file](https://bitbucket.org/osrf/gazebo_models/raw/2736659d92e2c1afe4098fb1c68cb2feb3a55484/house_2/meshes/house_2.dae)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r87\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nHi, I have a project in Blender which I downloaded from a tutorial (.blend [Here](https://www.blenderguru.com/tutorials/create-a-spaceship-part-2-of-2?rq=spaceship) ). It contains a few Emissive materials, one of which is meant for lights, the other for highlights (think led strip). Using the exporter and loader, these materials are not showing as emissive of any sort. I have gone through the json manually and set some of the \"colorEmissive\" values which has given a more pleasing result, but is still not what I would like.\r\nHopefully I'm not missing something here..\r\n\r\n1) I believe there is a slight issue with the exporter script that's has been written\r\n2) Would it be possible to have some way of automatically creating a light source for emissive materials so they behave more similarly to those on Blender? Perhaps even another Material type?\r\n\r\nExtract from JSON \r\nAdapted:\r\n`{\r\n        \"depthTest\":true,\r\n        \"blending\":1,\r\n        \"vertexColors\":false,\r\n        \"transparent\":false,\r\n        \"colorSpecular\":[0.5,0.5,0.5],\r\n        \"colorEmissive\":[0,18,124],\r\n        \"DbgIndex\":1,\r\n        \"wireframe\":false,\r\n        \"opacity\":1,\r\n        \"shading\":\"phong\",\r\n        \"specularCoef\":50,\r\n        \"visible\":true,\r\n        \"colorDiffuse\":[0.0264838,0,0.38812],\r\n        \"doubleSided\":true,\r\n        \"DbgColor\":15597568,\r\n        \"DbgName\":\"RedLines\",\r\n        \"depthWrite\":true\r\n    }`\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r87\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\nTake care :)"},{"labels":["enhancement"],"text":"##### Feature: Support Alpha To Coverage\r\n\r\nIt would be nice to support a flag for [Alpha to Coverage](https://medium.com/@bgolus/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f). This feature has existed in WebGL contexts for a while, however, it seems hardly used in practice.\r\n\r\nIt can be used to create really crisp alpha cutouts with MSAA-enabled contexts. \r\n\r\nWhen enabled, you no longer need to specify alphaTest or perform a `discard` in the fragment shader, you simply output the frag alpha and the GL context will handle cutouts. You can read more about it [here](https://medium.com/@bgolus/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f), including some tricks to make things even smoother.\r\n\r\n```js\r\n// enable alpha to coverage with current ThreeJS renderer\r\nconst gl = renderer.getContext();\r\ngl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);\r\n```\r\n\r\nThis feature assumes MSAA is enabled and supported (i.e. may not work in external monitors).\r\n\r\nHere is an example wireframe shader using alpha to coverage:\r\nhttps://mattdesl.github.io/webgl-wireframes/app/\r\n![screenshot 64](https://user-images.githubusercontent.com/1383811/31785155-4396df8a-b4d2-11e7-895e-3056fcd2e8a1.png)\r\n\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nI found that the object picking using rayCaster doesn't consider the visibility of objects. For example, objects that are occluded could still be picked.\r\n\r\nIt should be awesome if the picking can only pick the objects which are visible from the users, that is more intuitive.\r\n\r\nThanks.\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [X ] r87\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Sometimes people use 2d and 3d renderers on the same context. \r\n\r\nThis is the demo of usage pixi + threejs: \r\nUsing renderTarget: https://jsfiddle.net/c34p532r/24/\r\nWithout renderTarget: https://jsfiddle.net/xyL1sv02/\r\n\r\nThe problem is that simple `renderer.state.reset()` doesnt do the job, as seen here: https://jsfiddle.net/gle6/c34p532r/23/\r\n\r\nNeed an extra operation with FrameBuffer:\r\n\r\n```js\r\nrenderer.setRenderTarget(null);\r\n\r\n//or from the renderer\r\n\r\n_currentRenderTarget = null;\r\n```\r\n\r\nThe question is: shall we add \"reset\" method to renderer itself that does both things? I can make a PR for it.\r\n"},{"labels":["enhancement"],"text":"Today, I follow the [https://threejs.org/examples/?q=mul#webgl_multiple_renderers](url) example.\r\n\r\nAnd I found that when you use multiple renderer to render the same scene and change the texture ( I change the .map property) of the model, only the first renderer will response to the change.\r\n\r\nI fix it by set the \".needsUpdate\" to true after the first renderer's render(), then the second renderer can response the material's change.\r\n\r\nIt seems like that each renderer has its own cache, and when the first renderer complete render, it set the needsUpdate property to false so that the second renderer can't know the material's change.\r\n\r\nI consider that a renderer manager will be the essential solution to this problem. In addition, use multiple viewport and multiple canvas instead, like in other examples,  is not powerful enough. Multiple renderer is more useful and convenient in some case so hope can solve it : )\r\n\r\nThanks for reading ~ I will set the \".needsUpdate\" property to true by myself in current case."},{"labels":["enhancement"],"text":"This is a feature-request for a ShaderMaterial with Shadow Support in Three.js, which would make it more user-friendly to add custom shaders with support for rendering shadows.\r\n\r\nI have found the following code to create a ShaderMaterial that only renders shadow, however it only works with Three.js r71: https://gist.github.com/ayamflow/93aba91065c2b9750f4f\r\n\r\nAn example for Three.js with a custom ShaderMaterial with shadowmap support would also be useful."},{"labels":["enhancement"],"text":"I would like to use this issue to keep track of the GLTF2 exporter features. I've copied the initial list of features discussed on the PR https://github.com/mrdoob/three.js/pull/11917 and I'll keep updating the list as we progress in the implementation.\r\n\r\n# Features / TO-DO\r\n- [x] Export options\r\n  - [x] `trs` to export TRS instead of matrix\r\n  - [x] `input`:\r\n    - [x] Single scene\r\n    - [x] Array of scenes\r\n    - [x] Single object\r\n    - [x] Array of objects\r\n  - [x] `truncateDrawRange`: force exporting just the attribute values defined by `drawRange`:\r\n  - [x] Non-index buffer geometry\r\n  - [x] Indexed buffer geometry\r\n- [x] Include `userData` in `extras`?\r\n- [x] **Scenes**\r\n    - [x] Support for multiple scenes\r\n- [x] **Nodes**\r\n  - [x] Meshes\r\n    - [x] Primitive mode:\r\n      - [x] TRIANGLES\r\n      - [x] TRIANGLE_STRIP\r\n      - [x] TRIANGLE_SPAN\r\n      - [x] POINTS\r\n      - [x] LINES\r\n      - [x] LINE_STRIP\r\n      - [x] LINE_LOOP\r\n    - [x] Geometry types:\r\n      - [x] BufferGeometry\r\n      - [x] Geometry\r\n    - [x] Primitive attributes:\r\n      - [x] POSITION\r\n      - [x] NORMAL\r\n      - [x] TEXCOORD_0\r\n      - [x] TEXCOORD_1\r\n      - [x] COLOR_0\r\n      - [x] JOINTS_0\r\n      - [x] WEIGHTS_0\r\n      - [x] ~~TANGENT~~\r\n    - [x] Multi-material meshes as primitives\r\n  - [x] Lights\r\n  - [x] Camera\r\n  - [x] Skin\r\n- [ ] **Materials**:\r\n  - [x] ~~Ignore if default material is being used~~\r\n  - [x] Export as lines if `material.wireframe === true`\r\n  - [x] `pbrMetallicRoughness` for `MeshStandardMaterial`\r\n    - [x] Attributes:\r\n      - [x] `baseColorFactor`\r\n      - [x] `metallicFactor`\r\n      - [x] `roughnessFactor`\r\n      - [x] `baseColorTexture`: It's supported (`material.map`) but the `texCoord` is always set to 0.\r\n    - [x] `doubleSided`\r\n    - [x] KHR_material_unlit\r\n- [x] **Samplers**\r\n- [ ] **Images**\r\n  - [x] `uri` using `map.image.src`\r\n  - [x] `uri` base64\r\n  - [x] `bufferView`\r\n  - [x] Deal with `flipY` images\r\n  - [ ] Merge channels into one texture\r\n- [ ] **Accessors**\r\n  - [ ] Use the same `bufferView` for the same componentType instead of creating a new one for each attribute (WIP @takahirox)\r\n  - [x] ~~Support `sparse`?~~\r\n  - [ ] **Attributes**: \r\n    - [x] `bufferView`\r\n    - [ ] `byteOffset`: Currently it's using 0 always as I'm creating a new bufferView for each accessor.\r\n    - [x] `componentType`\r\n    - [x] `count`\r\n    - [x] `max`\r\n    - [x] `min`\r\n    - [x] `type`:\r\n        - [x] `SCALAR`\r\n        - [x] `VEC2`\r\n        - [x] `VEC3`\r\n        - [x] `VEC4`\r\n\r\n- [ ] **BufferViews**: Currently I'm creating a new `bufferView` for each `Accessor`, this should be fixed to use just one for these attributes that share the same `componentType`\r\n  - [x] Attributes:\r\n    - [x] `buffer`\r\n    - [x] `byteOffset`\r\n    - [x] `byteLength`\r\n    - [x] `byteStride`\r\n    - [x] `target`\r\n- [x] **Buffers**: Currently I'm saving everything to a single buffer so it will be just one entry in the buffers array.\r\n  - [x] byteLength\r\n  - [x] uri \r\n- [x] **Animations**\r\n- [ ] **misc**:\r\n  - [ ] Validate output (https://github.com/KhronosGroup/glTF-Validator)\r\n  - [ ] Include `stats` option to log the number of items exported and maybe some timing?\r\n- [x] GLB\r\n\r\n# Example \r\nCurrent demo:\r\n![image](https://user-images.githubusercontent.com/782511/29309101-971a6a08-81a8-11e7-9ea6-4cf11410ecc2.png)\r\n\r\nExported gltf loaded on @donmccurdy 's gltf viewer\r\n![image](https://user-images.githubusercontent.com/782511/29309113-a2a587c2-81a8-11e7-88ca-28206f22abbb.png)\r\n\r\nGLTF: https://gist.github.com/fernandojsg/0e86638d81839708bcbb78ab67142640"},{"labels":["enhancement"],"text":"Here is a simple light file - just a point light centred at (0,0,0) exported from 3DS Max.\r\n\r\nWhen loading the file with the FBXLoader, it creates an Object3D instead of a light. I've tried exporting every light type from 3ds max, and various versions of both binary and ascii format, all with the same result. \r\n\r\n[just_a_light.zip](https://github.com/mrdoob/three.js/files/1224102/just_a_light.zip)\r\n"},{"labels":["enhancement"],"text":"CombinedCamera in combination with StereoCamera will not work since CombinedCamera does not have the focus property, as expected [here](https://github.com/mrdoob/three.js/blob/f83fe541f6aac09e9a94943884f7d698dd55ba32/src/cameras/StereoCamera.js#L45)\r\nIt will lead to the projectionMatrix having a NaN, causing nothing to render."},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nhttps://threejs.org/docs/#api/loaders/TextureLoader shows how to use the texture loader. However, it's way more elaborate than needed. Also, there's no mention that the load() function returns the texture, by default, e.g.\r\n\r\n  var decalDiffuse = textureLoader.load( 'textures/decal/decal-diffuse.png' );\r\n\r\nI would change the documentation myself and submit a PR, but I'm a newbie when it comes to the loader. However, the current documentation makes it look way more complex than need be.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r86\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Hello!\r\nThis is a feature request. I want to be able to optionally feed my VBO to three.js `BufferAttribute`. I walked through some (three.js) code and couldn't find any way to do so (from outside).\r\n\r\nIn previous versions of three.js I was able to hack into `renderer.properties` to replace VBO with my custom one. However, after an upgrade to r86 three's VBO are stored in [WebGLAttributes](https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLAttributes.js) module which is not exposed. Since now the storage is hidden from the outside, I can no longer hack into it from my external codes. Therefore I want to legalize such behavior, to prevent further struggles and hacks.\r\n\r\nAn example of what I might do with it is following:\r\n\r\n```\r\n\tconst geo = new THREE.BufferGeometry();\r\n\tgeo.setDrawRange( 0, REAL_SIZE );\r\n\t// ...\r\n\tconst ba = new THREE.BufferAttribute(_dummyArray, 3);\r\n\tba.count = REAL_SIZE * 3;\r\n\tgeo.setDrawRange( 0, REAL_SIZE );\r\n\r\n\t// HERE! set buffer-creator callback\r\n\tba.onCreateCallback = function () {\r\n\t\t// I create it just for example, actually it can come from other lib\r\n\t\tconst vertices = [];\r\n\t\tfor ( i = 0; i < REAL_SIZE; i ++ ) {\r\n\t\t\tvertices.push( Math.random() * 2000 - 1000 );\r\n\t\t\tvertices.push( Math.random() * 2000 - 1000 );\r\n\t\t\tvertices.push( Math.random() * 2000 - 1000 );\r\n\t\t}\r\n\t\tconst vbo = gl.createBuffer();\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\r\n\t\t// Return back to three.js\r\n\t\treturn vbo;\r\n\t};\r\n\r\n\tgeo.addAttribute('position', ba);\r\n\t// ...\r\n\tparticles = new THREE.Points( geo, materials[0] );\r\n\tscene.add( particles );\r\n```\r\n\r\nMore of it you can see [here](https://github.com/raub/node-3d-ready/blob/master/examples/_points-buffer.js).\r\n\r\nTo summarize: sometimes you end up with preallocated GL buffer and a lack of an ability to use it in three.js `BufferGeometry`, where it would fit perflectly.\r\n\r\nIf it sounds reasonable, then I can also show an example of a patch, that makes the above code work:\r\n\r\n```\r\n\t\tvar buffer;\r\n\r\n\t\tif (attribute.onCreateCallback) {\r\n\r\n\t\t\tbuffer = attribute.onCreateCallback();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tbuffer = gl.createBuffer();\r\n\r\n\t\t\tgl.bindBuffer( bufferType, buffer );\r\n\t\t\tgl.bufferData( bufferType, array, usage );\r\n\r\n\t\t}\r\n\r\n\t\tattribute.onUploadCallback();\r\n```\r\n\r\nJust add the condition to see if there is user-defined buffer-creator callback. In WebGLAttributes.js, that's all I need.\r\n\r\nIf you want me to give more specific reasons for what I do with my buffers, I'll be glad to answer. I can then create a PR with the above changes, if it makes sense.\r\n\r\n##### Three.js version\r\n\r\n- [x] r86+\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [x] Even more than that\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\nThanks for your time! 😃"},{"labels":["enhancement"],"text":"Currently Orbit Controls handles touch as:\r\n\r\n- one finger: orbit\r\n- two fingers: zoom\r\n- three fingers: pan\r\n\r\nIt's a fantastic helper library, but I think panning is terribly hard to discover. I only discovered it by looking through the library, and don't think I would have discovered it just by playing around with a scene on a touchscreen device. \r\n\r\nAs a user, I would expect to be able to pan using two fingers moving unidirectionally. I would expect to be able to zoom using two fingers, in a pinching and zoom gesture. I would suggest instead:\r\n\r\n- one finger: orbit\r\n- two fingers (pinch/spread): zoom\r\n- two fingers (unidirectional): pan \r\n\r\nI haven't implemented this yet, but I'm thinking to in the next couple of weeks. I couldn't find a related issue or discussion of this so I'm opening a ticket and see if anyone has pre-existing ideas or concerns around this? I could contribute a PR in the future if it's a desirable change."},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nRight now when one has a shadow casting light there is a far plane and a near plane and shadows start and end abruptly at these planes.  I think it would be much nicer if we faded in the shadow and faded out the shadow when one approaches the clip plane.s  This way limited frustum shadows can be used in larger regions without nasty clip artifacts.  Fading out shadows often looks very natural.\r\n\r\nI noticed this when playing the game Kingdoms and Castles ( http://store.steampowered.com/app/569480/Kingdoms_and_Castles/ ).  See how the shadow fades out at the top.  It allows this game to have high quality shadows in the regions right in front of the camera, but they fade out as you scroll the clouds away from the center.  This is very effective and also not jarring.  Should be relatively easy to implement:\r\n\r\n![image](https://user-images.githubusercontent.com/588541/28588499-c4b104e2-7148-11e7-8f7d-bbd18106c4ec.png)\r\n\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r85\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"I've noticed that GLTF2Loader is undergoing fairly rapid iteration. Is there work in progress on supporting the new interpolation modes, most interestingly CUBICSPLINE? Of all the improvements from GLTF1 to GLTF2, getting away from densely sampled animation transforms (and the resulting enormous model files) is perhaps the most exciting.\r\n\r\nIf nobody else is working on this, we may end up taking a pass on it. \r\n"},{"labels":["enhancement"],"text":"ColladaLoader.js [uses MultiMaterial](https://github.com/mrdoob/three.js/blob/5c2ebc708d61245c0fff40c19aee7d1dcd93e817/examples/js/loaders/ColladaLoader.js#L1180), which generates a deprecation warning every time I use it. Should be an easy fix, I would be willing to submit a PR after the issue is validated. "},{"labels":["enhancement"],"text":"I faced with the memory leaks issue during disposing **WebGLRenderer** and figured out that reason of memory leaks is `vrdisplaypresentchange` event handler which is added in **WebVRManager**. I guess that we need `dispose` method to remove `vrdisplaypresentchange` event listener in **WebVRManager** and call `this.vr.dispose()` in `dispose` method of **WebGLRenderer**:\r\n\r\n\r\n```javascript\r\n// src/renderers/webvr/WebVRManager.js\r\nthis.dispose = function() {\r\n\r\n\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\r\n};\r\n```\r\n\r\n```javascript\r\n// src/renderers/WebGLRenderer.js\r\nthis.dispose = function () {\r\n\r\n\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\trenderLists.dispose();\r\n\tvr.dispose();\r\n};\r\n```\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r86\r\n\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n"},{"labels":["enhancement"],"text":"Please, consider adding support for perspective cameras with infinite projection matrix (when `zfar` isn't defined).\r\n\r\nSome background:\r\nhttps://github.com/KhronosGroup/glTF/issues/722\r\n\r\nglTF reference;\r\nhttps://github.com/KhronosGroup/glTF/tree/master/specification/2.0#infinite-perspective-projection\r\n\r\nCC @donmccurdy "},{"labels":["enhancement"],"text":"![screen shot 2017-07-11 at 10 11 42 pm 2](https://user-images.githubusercontent.com/1848368/28103098-d601a8de-6688-11e7-9e5d-8ae8e7e58696.png)\r\n\r\nWe should try to request images in parallel with buffers, to improve loading time considerably.\r\n\r\n/cc @takahirox \r\n"},{"labels":["enhancement"],"text":"I am very glad to know that three.js replaced python obj converter with node.js script. The new converter only has few lines so it is very easy to understand and easy to extend to other 20+ converters such as fbx to json format for 3d models.  \r\nBut, python obj converter also has the other function: convert obj to binary json format. It is useful to condense and encrypt the json file. Can we get the obj converter to binary format with node.js script? \r\nThanks!\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nNo mention in documentation for TextBufferGeometry (not TextGeometry).\r\n\r\n##### Three.js version\r\n- [x] r86\r\n"},{"labels":["enhancement"],"text":"The titile says everything, this behaviour is expected, and works on almost any other website. The fact that it doesn't in three.js documentation hurts usabilty. Changing that would be appreciated :)\r\n"},{"labels":["enhancement"],"text":"I need to show some text in **Persian/Arabic language**. I loaded a font including characters and I used `TextGeometry` to create a text on the scene:\r\n\r\n```javascript\r\nvar loader = new THREE.FontLoader();\r\nloader.load('B Zar_Regular.js', function (font) {\r\n    var textGeo = new THREE.TextGeometry('سلام!', {\r\n        font: font,\r\n        size: 1,\r\n        height: 0.05,\r\n        curveSegments: 12,\r\n    });\r\n    var material = new THREE.MeshNormalMaterial();\r\n    var textMesh = new THREE.Mesh(textGeo, material);\r\n    textMesh.position.x = 15;\r\n    scene.add(textMesh);\r\n});\r\n```\r\nI was expecting to see `سلام!` but the output was:\r\n![three rtl](https://user-images.githubusercontent.com/5295554/27819530-f8caf048-60af-11e7-849f-1856ad27be65.png)\r\nletters are separated and order of characters is reversed mistakenly. After all it seems threejs do not support rtl languages. Am I right or I missed something? Is there any workaround as a quick solution? Thanks."},{"labels":["enhancement"],"text":"Ideally there would also be some kind of support for previewing animations on imported models in the editor. Even just a quick and simple way for our artists to test that an animation looks ok when loaded in would suffice. It could either default to play through all the animations, or give you a dropdown toggle in the inspector in the case where multiple clips may be embedded in a single file. Of course I can do a test project for this, or enforce gltf and point our artists [here](https://gltf-viewer.donmccurdy.com/), but it would be much nicer to be able to have built-in support for this in the scene."},{"labels":[null,"enhancement"],"text":"Currently when I import my models into the editor, on export I'm not getting any of the animations included (I've tested with fbx, gltf, and collada). It would be great if when a scene is exported, the animation clips that were on imported models are included. Cheers!\r\n\r\nEDIT: splitting this into two separate issues (one for supporting animations on export, and another for previewing animations in the editor).\r\n\r\n"},{"labels":["enhancement",null],"text":"##### Description of the problem \r\n\r\nHey everyone,\r\n\r\nFirst off I know this will sound like weird request for an asset loader.\r\nI am using the awesome free and open source map editor called [Trenchbroom](https://github.com/kduske/TrenchBroom) to make levels for a project of mine.\r\n\r\nI would like to be able to load these maps as well as user defined parts of these maps into three.JS with their textures properly mapped and the level geometry fully intact.\r\n\r\nThank you for your time,\r\n\r\nHeadClot"},{"labels":["enhancement"],"text":"##### Description of the problem:\r\nHello!\r\n\r\nI just wrote a billboard shader to make my own BufferGeometry particle system, for simulating vegetation. It all worked fine, until i enabled customDepthMaterials, enabling my geometry to cast shadows from textures.\r\n\r\nThe issue is:\r\n\r\nWhile THREE.DirectionalLight works just fine, by casting the silhouette of the texture to the ground, THREE.PointLight won't react to depth packing the same way, casting just solid square shadows.\r\n\r\n##### Live code:\r\nHere is my [fiddle](https://jsfiddle.net/Aluvyer/kbey3f9L/11/) depicting the problem.\r\n\r\n##### Screenshot:\r\n<img src='https://i.imgur.com/cteMsEy.png' />\r\n\r\nI've tried reproducing my problem, using the [cloth example](https://threejs.org/examples/webgl_animation_cloth.html), by swapping the directional light by a point light, but the results were the same, a dark square being cast on the floor (instead of the half transparent, labyrinth like, cloth texture).\r\n\r\nShouldn't every light source be able to cast shadows from customDepthMaterials? If not, i guess it could be taken as a suggestion, or am i missing something?\r\n\r\nIt's my first time posting on a forum, please excuse me for any mistakes.\r\nA big Thank You in advance!\r\n\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r85\r\n- [x] r80\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\nCSS3D is not compatible with CombinedCamera and Orthographic Camera.\r\nThere is a workaround which is use CSS3D with PerspectiveCamera in PerspectiveMode and with CombinedCamera in OrthographicMode.\r\nWith PerspectiveCamera, everything works perfectly. However with CombinedCamera, the CSS3D transformation is not synchronized with 3D Objects transformation: therefore I have to transform it manually for preset positions (Top, Bottom, Right, Left, etc.) and users could not pivot the scene.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r85\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [x] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"Over the years, a common feature request has been to be able to modify the built-in materials. Today I realised that it could be implemented in a similar way to `Object3D`'s `onBeforeRender()`.\r\n\r\nhttps://github.com/mrdoob/three.js/commit/e55898c27a843f69a47e602761c60d9bbe91ee35\r\n\r\n`WebGLPrograms` adds `onBeforeCompile.toString()` to the program hash so this shouldn't affect other built-in materials used in the scene.\r\n\r\nHere's an example of the feature in action:\r\n\r\nhttp://rawgit.com/mrdoob/three.js/dev/examples/webgl_materials_modified.html\r\n\r\n```js\r\nmaterial.onBeforeCompile = function ( shader ) {\r\n\r\n\t// console.log( shader )\r\n\r\n\tshader.uniforms.time = { value: 0 };\r\n\r\n\tshader.vertexShader = 'uniform float time;\\n' + shader.vertexShader;\r\n\tshader.vertexShader = shader.vertexShader.replace(\r\n\t\t'#include <begin_vertex>',\r\n\t\t'vec3 transformed = vec3( position.x + sin( time + position.y ) / 2.0, position.y, position.z );'\r\n\t);\r\n\r\n\tmaterialShader = shader;\r\n\r\n};\r\n```\r\n\r\nNot only we can mess with the shader code, but we can add custom uniforms.\r\n\r\n```js\r\nif ( materialShader ) {\r\n\r\n\tmaterialShader.uniforms.time.value = performance.now() / 1000;\r\n\r\n}\r\n```\r\n\r\nIs it too hacky?\r\n\r\n/cc @WestLangley @bhouston @tschw "},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nThe `checkIntersection` function inside `Mesh.checkIntersection` method only checks the material.side, ignoring the fact that the material can be an array.\r\n\r\nThis prevents the Raycaster from intersecting back faces when `material.side == DoubleSide` using a different material for each face\r\n\r\nHaving \r\n```\r\nmesh.material = [material1, material2, ...]\r\nmesh.material.side = THREE.DoubleSide;\r\n```\r\nsolves the issue but is not ideal.\r\n\r\n##### Three.js version\r\n\r\n- [x] r85\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\ncorrect loader:\r\n![image](https://user-images.githubusercontent.com/5865414/26924363-167b0e08-4c78-11e7-8d2f-bebdf6eff421.png)\r\n\r\nthree.js is wrong\r\n![image](https://user-images.githubusercontent.com/5865414/26924196-53ff173e-4c77-11e7-9735-774390fd31d3.png)\r\n\r\n\r\n##### Three.js version\r\n\r\n- [X] Dev\r\n- [X] r85\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"This request keeps coming back. It's not standard, but I'm thinking that with the current design of `OBJLoader` implementing vertex colors support shouldn't affect performance much.\r\n\r\nhttps://stackoverflow.com/questions/44241008/load-obj-file-with-original-colors-without-mtl#\r\n\r\n@jonnenauha what do you think?"},{"labels":["enhancement"],"text":"Just saw [this tweet](https://twitter.com/Domenico_brz/status/867470065066799104) today and thought to myself, why doesnt 3js have something like this ootb? I must say, I have poor idea how do 3js shadows work, but I can imagine this is not too hard to do. For example: http://jsfiddle.net/hfj7gm6t/3878/ :D Can we have something like this, please?"},{"labels":["enhancement"],"text":"It would be great if more examples of `three.js` would use [stats.js](https://github.com/mrdoob/stats.js/), a JavaScript performance monitor. Right now, the usage is not continuous. But information about fps or frametime are always valuable feedback.\r\n\r\nThe linked examples shows how `stats.js` should be integrated. Although it's not much code to add per file, it might need some time to work through all relevant examples.\r\n\r\nhttps://threejs.org/examples/webgl_geometry_colors.html"},{"labels":["enhancement"],"text":"Starting from ~20K faces, SVGRenderer slows down quickly.\r\nMain problem - it creates as many SVG primitives (svg:line, svg:rect, svg:path) as faces in the model.\r\nMost browsers have a problem to render SVG if number of primitives more than 20K.\r\n\r\nOne can optimize this. First of all, always use svg:path. And second, when consequent paths has same style (like similar fill color), just concatenate them. For many complex geometries this highly increase performance of SVGRenderer.\r\n\r\nAnother related issue - use of SVGRenderer with Node.js and [jsdom](https://github.com/tmpvar/jsdom). jsdom has similar limitation with number of created SVG primitives. But I want to use SVGRenderer to create plain SVG files (like [this one](https://github.com/linev/jsroot-test/blob/master/TGeo/alice.svg)). For such application I do not need DOM at all and can directly create SVG string. \r\n\r\nOne can enhance SVGRenderer so, that it optionally creates plain string with SVG instead of SVG elements. This also can improve performance a lot (factor 20 for given geometry). \r\n\r\nI can provide pull requests implementing both features.\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nSomeone would you please clean up `XLoader` code?\r\nI think it's a bit too messed up to work among contributors.\r\n\r\n/cc @adrs2002 \r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r85\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] macOS\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] iOS\r\n"},{"labels":[null,"enhancement"],"text":"It would be very useful if somebody would create an additional documentation page that explains the different caching mechanism of `three.js`:\r\n\r\n- It should be highlighted that a caching system is an important part of a 3D library in order to reduce the overhead implied by recreating or resetting something already done. The goal is to minimize the communication between `three.js` and the WebGL API, because those API calls can be expensive.\r\n- Provide an overview what kind of entities are cached in `three.js` (e.g. Materials, Geometries, Textures...).\r\n- Explain, what the `.dispose()` methods do and why they are important.\r\n\r\nIn the past, i've seen many questions about caching and code where `.dispose()` is not used correctly. An additional documentation page will provide a better understanding of this important topic.\r\n\r\nThe page could be integrated in the `Next Steps` section."},{"labels":["enhancement"],"text":"I wish there was an easy way to prevent users from moving an object about a particular axis. For example, it would be nice to say \r\n\r\n```\r\nvar controls =  new THREE.TransformControls(camera, domElement);\r\ncontrols.disableAxis('x');\r\n```\r\n\r\nThen the transformControls would have draggable arrows pointing in the Y and Z directions, but not the X direction. Thanks for your consideration!"},{"labels":["enhancement"],"text":"As discussed in #11332\r\n\r\n1. `renderer.gammaInput` needs to be deprecated. We now support `texture.encoding` instead.\r\n\r\n2. renderer.gammaOutput needs to be deprecated and replaced with `renderer.outputEncoding` when rendering to the screen. We already support `renderTarget.texture.encoding` when rendering to a render target.\r\n\r\n3. WebGLPrograms.getProgramCode()  needs to be updated to respond to changes in `renderer.outputEncoding`.  Setting `material.needsUpdate = true` will then force the change.\r\n\r\n4. Legacy warnings need to be added, and the examples need to be updated to accommodate this change.\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\nIt would be great to have the option to render in grayscale. It could be implemented as a new tonemapping type and set in renderer.tonemapping.\r\n\r\n"},{"labels":["enhancement",null],"text":"Hello Ricardo\r\n\r\nIf ThreeJS can load classic DirectX models, it would be great, and im glad to donate for this, as i need for my project.\r\n\r\nI find Jey created xfileloader, it works great for non-animated models, but animation of my models does not load correctly, i hope you guys work on DirectX animated models format, i find DirectX is classic and primary for a lot of developers.\r\n\r\nHere is example of DirectX model, hopefully it could be loaded on ThreeJS someday as i hope.\r\nhttps://www.dropbox.com/s/osnnk3kqfu3f61t/paul%20original.zip?dl=0\r\n\r\nThanks for your time,\r\ngood luck!"},{"labels":["enhancement"],"text":"Feature request: Add Support for HDR scene background.\r\n\r\nNow it looks like this:\r\nhttps://cdn-standard2.discourse.org/uploads/threejs/optimized/1X/6b8870d54a85cbc913c4c31099efd01c32d05760_1_690x356.jpg\r\n\r\nThree.js version\r\n- [x] r84\r\n\r\nBrowser\r\n- [x] All of them\r\n\r\nOS\r\n- [x] All of them"},{"labels":[null,"enhancement"],"text":"Hi,\r\n \r\n  the documentation about WebGLRenderer states that:\r\n\r\n.gammaInput  If set, then it expects that all textures and colors are premultiplied gamma. Default is false.\r\n\r\n.gammaOutput If set, then it expects that all textures and colors need to be outputted in premultiplied gamma. Default is false.\r\n\r\nMy understanding by examining the code is instead that:\r\n- if gammaInput is true, textures in material are considered sRGB (e.g. diffuseTexture), so the fetched value is linearised before using it in calculations; however, colours (e.g. diffuse color) that are passed to the shader are considered as in linear space.\r\n- if gammaInput is false, instead, textures and colors are considered as linear\r\n- if gammaOutput is true, the final color computed by material shaders is gamma-encoded, otherwise not.\r\n\r\nIf my understanding is correct, I think the documentation is misleading.\r\nIn any case, using the MeshStandardMaterial, we should always use gammaOutput=true, right? Otherwise the display will show a wrong color - or are there any other gamma operations outside the shaders?\r\n\r\nThanks!\r\n\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nThe current FXAA shader in the examples/js/shaders/FXAAShader.js is not the most advanced FXAA shader.  \r\nThe most advances FXAA shader is a lot larger and has a lot of options.  The quality is also substantially better.\r\n\r\nI believe the authoritative code is here:\r\n\r\nhttps://gist.github.com/abiro/46935ab35b25b5d03fe9131bd1ed85ab\r\n\r\nIt is originally sourced from the NVIDIA SDK I believe.\r\n\r\nWe should aim to upgrade at some point.\r\n\r\nMy understanding is that Sketchfab is using FXAA 3.11, but Three.JS isn't thus Sketchfab gets better quality fast AA on low end devices.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nI have a lot of effects on my ThreeJS scenes.  Right now with the way ThreeJS's effects are designed, they each allocate their own render targets, even their intermediate/temporary render targets.  This leads to somewhere around 50 render targets allocated for my specific use case.  But really only a couple are ever used at the same time, the rest are just setting there wasting memory and causing out of memory errors are various devices, especially high resolution (QHD/4K) + low memory mobile devices.\r\n\r\nI am thinking that if we create a memory pool ( https://en.wikipedia.org/wiki/Memory_pool ) for RenderTargets we could decrease the maximum amount of memory required for complex EffectComposer pipelines without sacrificing speed or quality.\r\n\r\nThe design would be something like:\r\n\r\nRenderTargetPool:\r\n  allocate( width, height, options ) -> renderTarget;\r\n  free( renderTarget )\r\n  nextFrame() - increase current frame.\r\n  disposeOld( oldness ) - to dispose all targets not recently used (could be all)\r\n  disposeAll() -- to be called once done or in the case of a resize (see below.)\r\n\r\nThis memory pool would track which render targets are currently in use (which haven't been returned) and allocate new ones if needed.  But it would try to recycle as much as possible.  I'd keep it simple and track the current frame and allow explicit disposal of those render targets that haven't been used in a recent frame (specified by the user - but I think a value of 10 is pretty reasonable for most use cases) or all current render targets (if ending the rendering.)\r\n\r\nThis will automatically minimally allocate render targets.\r\n\r\nI guess the only issue is how to handle resizes.  Right now ThreeJS will resize render targets when the render region changes shape.  I wonder if we adopt the RenderTargetPool we could just dispose all in that case and recreate render targets of the new size -- I think that is how it works underneath anyhow.\r\n\r\nOnly intermediate render targets can be used via the pool.  Those that persist such those that back up textures attached to objects need to have explicitly controlled lifetimes.\r\n\r\nThoughts welcome.... this is just an idea on how to solve our issue while making Three.JS easier and more efficient.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r84\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n\r\n##### OS\r\n\r\n- [x] All of them"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nI'm trying to export a simple mesh with a morph target based animation. When i choose `Geometry` as geometry type, everything works fine. But when i choose `BufferGeometry` (see screenshot), the mesh is exported without morph targets. \r\n\r\n![image](https://cloud.githubusercontent.com/assets/12612165/23577824/701633d4-00c9-11e7-89fa-eac04f7c2ae4.png)\r\n\r\nBlender 2.76b, Ubuntu, 16.04. I've provided the project file as an attachment.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r84\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [ ] All of them\r\n- [ ] Windows\r\n- [x] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n##### Attachments\r\n[cube.blend.zip](https://github.com/mrdoob/three.js/files/818524/cube.blend.zip)"},{"labels":["enhancement"],"text":"For WebVR we now use [VREffect](https://github.com/mrdoob/three.js/blob/dev/examples/js/effects/VREffect.js) for stereo render. A [camera is passed as a parameter](https://github.com/mrdoob/three.js/blob/dev/examples/js/effects/VREffect.js) that gets duplicated and then the scene is rendered twice, once per eye. There's redundant work that we could avoid. We have superficially discussed in the past the idea of introducing an `ArrayCamera` that receives a list of cameras and then the render work is organized in a more efficient way than we do now with `VREffect`. Before getting into the implementation weeds I would like to better understand the problem and see the solutions people have in mind. @mrdoob Can you quickly sketch out the API you had in mind and what optimizations we would do inside to kick off the conversation?"},{"labels":["enhancement"],"text":"* glTF 1.1 will be 2.0: https://github.com/KhronosGroup/glTF/issues/817\r\n* glTF 2.0 draft: https://github.com/KhronosGroup/glTF/pull/826\r\n* Sample models: https://github.com/cx20/gltf-test/tree/2.0\r\n\r\nCore changes:\r\n\r\n* [x] Create GLTF2Loader.\r\n* [x] Add PBR materials.\r\n  * [x] Metallic-Roughness.\r\n  * [x] Specular-Glossiness.\r\n* [x] Add morph targets.\r\n* [x] Add image.bufferView so that textures/geometry/keyframes can be stored in one binary blob if desired.\r\n* [x] Replace top-level glTF object properties that are currently accessed by property name, e.g., the accessors object, with arrays that are accessed by index.\r\n* [x] Nodes allow only 1 `node.mesh`, not `node.meshes` array.\r\n\r\nExtension changes:\r\n\r\n* [x] KHR_binary_glTF extension is moved into core spec.\r\n* [x] KHR_common_materials extension no longer includes lights.\r\n* [x] KHR_lights extension.\r\n* [ ] KHR_technique_webgl for GLSL. GLSL is no longer part of core spec.\r\n\r\nI'm probably missing some things, there is a more exhaustive list: [Spec changes from 1.0 to 2.0](https://github.com/KhronosGroup/glTF/issues/605). This will settle over the coming weeks.\r\n\r\n/cc @pjcozzi @takahirox"},{"labels":[null,"enhancement"],"text":"##### Description of the problem \r\n\r\nCould we get Three.js Editor example with shaders/textures?\r\n\r\nAll current examples shipped with Editor are missing custom shaders and texture loading. It seems to cause problems for people since they cannot figure out how the workflow should go with shaders/texture.\r\n\r\nIt could be just one example where there are two planes. Both planes are using Shaders and one is just using basic texture (uv via vert to frag and sampler in frag) and other one is some basic shader effect (e.g. living noise).\r\n\r\nOne problem description can be found from Stack Overflow\r\nhttp://stackoverflow.com/questions/40974090/three-js-specify-a-shader-in-json-file-and-load-a-texture\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [ ] r84\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"##### Description of the problem \r\n\r\nBy structured uniform, I mean a uniform of the form:\r\n\r\n    struct parameters {\r\n        float scale, height, width, offset, baseline;\r\n    };\r\n    uniform parameters transition_model;\r\n\r\nCurrently, the [uniform documentation](https://threejs.org/docs/?q=unifor#Reference/Core/Uniform) only states that\r\n\r\n> Uniform structures and arrays are also supported.\r\n\r\nbut doesn't go into further detail on how to set such uniforms using three.js. I had to figure out the proper syntax by stepping through the source code. For future reference, the syntax is:\r\n\r\n    material.uniforms = {\r\n        transition_model: { value: {\r\n            scale: pScale,\r\n            height: pHeight,\r\n            width: pWidth,\r\n            offset: pOffset,\r\n            baseline: pBaseline\r\n        }\r\n    }\r\n\r\n[This old issue thread](https://github.com/mrdoob/three.js/issues/2720) is the only reference I could find on structured uniforms in three.js. Moreover, said issue doesn't conclude on a single syntax (nor is the correct syntax even mentioned).\r\n\r\nIt would be nice to have this topic covered in the official documentation. Just like there already is a nice example of regular (non-structured) uniform usage.\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r84\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\nColladaLoader.js is not using the DefaultLoadingManager. In fact, as far as I can tell it doesn't have any LoadingManager functionality at all, it uses its own loading manager it seems. It does however trigger the DefaultLoadingManagers onLoad function, but not synced with other loaders.\r\n\r\nPlease make ColladaLoader use the DefaultLoadingManager. ColladaLoader2 seems to be capable of doing that already, but, at least in my program, it displays the entire scene incorrectly, so I have to choose between a ColladaLoader that doesn't do the job and one that doesn't use the DefaultLoadingManager.\r\n\r\nThe problem with not being able to use the DefaultLoadingManager with ColladaLoader is that at the moment I have to use a fairly hacky workaround of creating bool variables for each loader I'm using, so that the DefaultLoadingManagers onLoad function does not trigger multiple times. Not sure why ColladaLoader triggers the DefaultLoadingManager's onLoad function at all, but it does, and in my program that leads to the entire scene being created twice, once with errors, which is why my workaround with bools was needed.\r\n\r\n##### Three.js version\r\n\r\n- [x] r84\r\n\r\n##### Browser\r\n\r\n- [ ] All of them\r\n- [x] Chrome\r\n- [x] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\n*Material.lightMap is supposed to represent incoming light onto a material which then interacts with the surface to give a resulting intensity.  RIght now lightMap does not support encodings, such as RGBM*/RGBE/etc, thus it is limited to LDR, rather than HDR.  In reality, the incoming light is more accurately represented by HDR images.  To rectify this, we should allow for lightMap to have an encoding  (lightMapEncoding) similar to map (mapEncoding) and emissiveMap (emissiveMapEncoding).\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r82\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"(*** This section is for bug reports and feature requests only. This is NOT a help site. Do not ask help questions here. If you need help, please use stackoverflow. ***)\r\n\r\n##### Description of the problem \r\nFeature request - support for reading in basic EXR files\r\n\r\nAny update on supporting EXR file format in the official three.js? \r\nexr/hdr loader #6274 touched on this but drifted off the rgbe, etc.\r\n\r\nIt would certainly be worthwhile since EXR is more than simply another HDR format. Floating point data, multiple channels, etc.\r\n\r\nFile size very dependent on content and better to be thinking ahead than trying to chase it later.\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\nBased on THREE.WebGLMultiRenderTarget (apparently not part of R84 but I found it in dev81) I implemented a render pass that creates a result texture as well as some kind of depth map. The idea is to then use those 2 results in some subsequent postprocessing pass. see my current test example here: https://www.wothke.ch/multitest/\r\n\r\nI suspect that some patches are needed in THREE.EffectComposer to make sure those WebGLMultiRenderTarget attachments actually get propagated. Before I added a respective quickfix in my local version I got a nasty flicker due to the fact that the expected attachment was only available in the originally input WebGLMultiRenderTarget - but not in the clone created within EffectComposer. \r\n\r\nI don't know if the WebGLMultiRenderTarget feature is something you intend to release in the future. If that's the case, then you might want to have a look at EffectComposer..\r\n\r\n##### Three.js version\r\n\r\n- [x ] 81dev\r\n- [ ] r82\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\nrequires 'WEBGL_draw_buffers' extension\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"\r\nHi, this is my first post so first I want to thank mrdoob and all the contributors for this fantastic library.\r\n\r\n##### Description of the problem \r\n\r\nI need to send specific headers with my TextureLoader request (XMLHttpRequest.setRequestHeader()) but I do not see any way to do that (I'm currently using r80). \r\n\r\n##### Three.js version\r\n\r\n- [ ] r80\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":[null,"enhancement"],"text":"Hi all,\r\n\r\nDid you consider automatically testing examples somehow? In most cases, taking a \"screenshot\" of an example and comparing it to a reference image should be enough to know if an example is working.\r\n\r\nThere are many good libraries to compare images out there.\r\nSelenium should help in this matter too.\r\n\r\nDid you already attempted to do so or if there is any interest in it?"},{"labels":["enhancement"],"text":"##### Description of the problem \r\nThe shadow of a partially transparent object should be brighter than that of a completely opaque object, but they're same dark in threejs.\r\n![tmp](https://cloud.githubusercontent.com/assets/18611035/22057097/2a296cc2-dd9e-11e6-907c-62ecd6fc47b5.png)\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [X] r83\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [X] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [X] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\ngraphics card is GTX 1080.\r\n"},{"labels":["enhancement"],"text":"Long story short, I am basically forced to use the ColladaLoader to load my animated models into three.\r\n\r\nThe issue I'm having is that a model loaded with ColladaLoader use about ten times as much memory as a model loaded with ColladaLoader2, and so I would very much like to go with ColladaLoader2, but it lacks animation support.\r\n\r\nSo basically I am going with the old ColladaLoader for now, but I would be immensely grateful if someone could add animation support to the new one. I tried adding it myself, but in the end it proved too complicated for my brain to handle."},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\n.onBeforeRender doesn't work for THREE.Sprite. It works fine with THREE.Mesh, but nothing happens for sprites.\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r83\r\n- [x] r82\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"When editing a script on some occasions a popup appears listing valid options, e.g. I type \"this.on\" and the popup appears with completions such as onError, onLoad, ... etc.\r\n\r\nHowever the popup disappaears in less than 1 second so there is no time to read or select options.\r\n\r\n\r\nThree.js version: R83 \r\n\r\n- [ ] Dev\r\n- [ ] r82\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [  ] All of them\r\n- [ x ] Opera\r\n- [ x ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [] All of them\r\n- [ 7 ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n Hardware Requirements (graphics card, VR Device, ...)\r\n- using laptop keyboard to edit script.\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"##### Description of the problem \r\n\r\nThis is more a possible enhancement than a problem. Currently, the profile of beveled edges in ExtrudeGeometries or TextGeometries is fixed as elliptical (after a fix #9372), or as straight by setting bevelSegments to 1. It would be nice (though rarely essential) to be able to customize the degree and sense of curvature of the bevel profile, by an additional parameter. The default setting of this parameter would ensure full backward compatibility.\r\n\r\n##### Possible solution\r\n\r\nIt turns out it is possible to generalize the current method of calculating the profile of a bevel to accommodate such a bevelRoundness or bevelShape parameter. This only requires a few lines of code for some math.\r\nHere is the result applied to the TextGeometry doc page:\r\n\r\ncustom:\r\n![image](https://cloud.githubusercontent.com/assets/6171115/21727709/9c021174-d410-11e6-8aa2-6cc09bb2cd12.png)\r\n\r\ndefault = current:\r\n![image](https://cloud.githubusercontent.com/assets/6171115/21727676/65baafa4-d410-11e6-9d18-55d659a5adc1.png)\r\n\r\nscalloped custom:\r\n![image](https://cloud.githubusercontent.com/assets/6171115/21727770/de557124-d410-11e6-9f00-0ad0be2f27f7.png)\r\n\r\nlive: https://rawgit.com/andreasplesch/three.js/fb6b3fddfb76a55f309688ee75226599927a9432/docs/index.html#Reference/Geometries/TextGeometry\r\n\r\n (enable bevel and play with bevelShape)\r\n\r\nfor a fuller explanation see #10503 \r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [x] r82\r\n- [x] Bevel: https://github.com/andreasplesch/three.js/blob/bevel/src/geometries/ExtrudeGeometry.js#L474\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [x] Chrome\r\n- [x] Firefox\r\n- [x] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [x] Windows\r\n- [x] Linux\r\n- [x] Android\r\n- [x] IOS\r\n\r\n##### related\r\n\r\n#10503, #10160, #9372, #323\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"I'm thinking about adding curve support to the blender exporter. I think it can be useful for creating camera paths etc. in blender, which can then be used from script. I think the best starting point would be the Blender `Bezier`, as it should map perfectly to threejs' [CubicBezierCurve3](https://threejs.org/docs/index.html?q=bezier#Reference/Extras.Curves/CubicBezierCurve3).\r\n\r\nHowever, I have noticed that in the [JSON Object Scene format 4](https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4) there is not yet any description for the format for curves.\r\n\r\nWhat JSON format do you think the data should follow? \r\nWill this feature have any chance of getting merged?"},{"labels":["enhancement"],"text":"Is there any plan to support Nvidia MDL (http://www.nvidia.com/object/material-definition-language.html) within three.js in the near future?\r\n\r\nThis would be great to share a common material definition language for all different kind of output formats."},{"labels":["enhancement"],"text":"(*** This section is for bug reports and feature requests only. This is NOT a help site. Do not ask help questions here. If you need help, please use stackoverflow. ***)\r\n\r\n##### Description of the problem\r\n\r\nAccording to the [COLLADA](https://www.khronos.org/files/collada_spec_1_4.pdf) and [glTF](https://github.com/KhronosGroup/glTF/tree/master/extensions/Khronos/KHR_materials_common#constant) specs, \"constant\" materials, i.e. MeshBasicMaterials, should use the \"emission\" field to describe the color/texture of the material. Instead, the respective Three.js loaders use the \"diffuse\" field to determine the `color`/`map` properties of the material. I request that these loaders be changed over to use the emission field, but for compatibility, continue to use diffuse as a fallback if emission is undefined.\r\n\r\n##### Three.js version\r\n\r\n- [x] Dev\r\n- [ ] r82\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement"],"text":"I have 80m+ vertices and corresponding color attribute (which is dynamic) in my buffer geometry. Sometimes i have to update two different portions of the color buffer. Since the buffer size is huge, i have to update the buffer by parts (`gl.bufferSubData`).\r\n\r\nBut, currently there is no way to update two different parts of a buffer in a single frame. I can update one part using `updateRange` but not multiple parts. I have to update the full buffer (`gl.bufferData`) for that.\r\n\r\nSo, what i am proposing, is it possible to provide a function to update the buffer immediately when i need to update it? How about making public function/functions in `BufferAttribute` to do that?\r\n\r\n##### Three.js version\r\n\r\n- [ ] Dev\r\n- [x] r82\r\n- [ ] ...\r\n\r\n##### Browser\r\n\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n\r\n##### OS\r\n\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\n\r\n"},{"labels":["enhancement",null],"text":"This week [Chrome announced their intent to ship WebGL 2.0](https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/VAEv-MUFGC8) so I guess it's about time to start adding support!\n\nThere are already some PRs that add support to `WebGLRenderer` for some of the new features but, somehow, it didn't feel it was good idea to make `WebGLRenderer` support both `webgl` and `webgl2`.\n\nSay hello to `WebGL2Renderer`!  https://github.com/mrdoob/three.js/commit/2ff9d410753b72a5e43b211dc3be26f0f0ab8a0e \n\nA new renderer not only will save us from tons of conditionals but also will give us the chance of cleaning things up; starting with only supporting `BufferGeometry` \n\nSorry for all the people which PRs didn't got merged because of my indecision!\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nI think that the ability to add and edit text to a scene would be a great addition to the three.js editor, so I started an implementation based on this example: https://threejs.org/docs/scenes/geometry-browser.html#TextGeometry\nNow I am trying to figure out what the best practice would be to save TextGeometry and its parameters to a JSON file and then load it later on with the ObjectLoader. If I understand the current code correctly, TextGeometry only generates a generic Geometry object, but does not store the actual text and parameters (font, size, curvesegments, ...). Does anyone have thoughts on extending the TextGeometry object so that it stores these parameters, can be serialized to a JSON object and then loaded and edited again later on? Maybe that would also require storing the JSON font file in the exported JSON object?\n\nAny input is welcome, as I don't want to reinvent the wheel and hopefully contribute this feature to the editor later on.\n##### Three.js version\n- [x] r81\n##### Browser\n- [x] All of them\n##### OS\n- [x] All of them\n"},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"##### Description of the problem\n\nI use a tool called OarConv which produces collada files with multiple `<polylist>` elements in one `<mesh>` refering to the same material. This works in colladaloader but in colladaloader2 there seems to be a design flaw that the return value of buildGeometry() is a group which is a map indexed by the material name and which contains just one THREE.Mesh (or similar) object per material name, so when the function runs it overwrites the preceeding <polylist>'s representation with the succeding one.\n\nI am not totally convinced that this Collada is within the specification but it seems logical that you can have multiple <polylist>s with the same material and these colladas load in blender and 3ds max and unity.\n\nAs this is an architectural level issue I don't see a possibility for me to fix it, there is no easy patch that can be done. I was thinking about uniquifying the material name and duplicating the definition but that was too much of a hack for me to bear...\n\n[oar_house.txt](https://github.com/mrdoob/three.js/files/535814/oar_house.txt)\n\nAttached .txt file is actually a dae file.\n##### Three.js version\n- [x ] Dev (also tried r74 but the code looks the same)\n- [ ] r81\n- [ ] ...\n##### Browser\n- [x] All of them (obviously)\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nWhen using the translate functionality (for the TransformControl.js) and are viewing the translate planes (xy, xz and/or yz) planes to move your object along those planes, if the object was rotated to face the back of these planes, they are not visible or usable.\n##### Three.js version\n- [ ] Dev\n- [x ] r81\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\n![qq 20161014151051](https://cloud.githubusercontent.com/assets/12722992/19379629/826cd7e4-9225-11e6-89bb-606f27ceb235.png)\n\nFBXLoader only supports FBX text format?\n##### Three.js version\n- [ ] Dev\n- [x] r81\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"I was looking into a faster way to render fbos into rendertarget using the renderBufferDirect threejs method.\r\nGot it working \r\n\r\n```js\r\nthis.renderer.setRenderTarget( prop.output );\r\nthis.renderer.objects.update( prop.mesh );\r\nthis.renderer.renderBufferDirect( this.camera, null, prop.mesh.geometry, prop.mesh.material, prop.mesh, null );\r\n```\r\n\r\nBut it needs this object :\r\nhttps://github.com/mrdoob/three.js/blob/dev/src/renderers/WebGLRenderer.js#L286\r\n\r\nto be exposed as a property of the renderer in order to update buffer attributes.\r\n\r\nIt could help to render objects and fbos immediately without using the whole render function.\r\nAnd also help to speed up post-processing effects method !\r\n\r\nIs it worth exposing it ?\r\n##### Three.js version\r\n- [x] Dev\r\n- [x] r81\r\n- [ ] ...\r\n##### Browser\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n##### OS\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"In the example [materials / envmaps / hdr](http://threejs.org/examples/webgl_materials_envmaps_hdr.html), a cubemap is textured using six `.hdr` files, using [`HDRCubeTextureLoader`](http://threejs.org/examples/js/loaders/HDRCubeTextureLoader.js). How about texturing a cubemap from a single `.hdr` file?\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nIES lights are a standard for specifying the illumination intensity in a specific direction from a light.  It allows one to use IES profiles to specify real-world light bulbs in a scene and get perfect results.  It is used all the time for architectural rendering.  We should try to get this into THreeJS at some point.  I understand the way that you do this is to create a spherical map of intensities for each light type (e.g. IES profile) and then sample from it.\n\nhttp://www.cgarena.com/freestuff/tutorials/max/ieslights/\n\nI believe this requires then one cubemap per IES profile light.  It isn't that slow so it is suitable for real-time on all devices.\n##### Three.js version\n- [x] Dev\n- [x] r80\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"The main source code has recently been ported to ES2015 modules (see #9310); however, some parts are still relying on global namespace pollution and have thus become unusable.\r\n\r\nSpecifically the things in `/examples/js/` haven't been transformed to support modules yet; this makes them currently unusable from within environments such as webpack or SystemJS.\r\n\r\n\r\nEdit, 11-20-2016: They *can* be used, but it requires a lot of setup: [SystemJS](https://github.com/systemjs/systemjs/issues/666), [webpack](https://github.com/webpack/imports-loader). If you need assistance with these: Sorry, but this is the wrong thread to announce it! 😄\r\n"},{"labels":["enhancement"],"text":"Transparency is not preserved when exporting from blender using THREE.js exporter.\nShould be trivial to translate to \"opacity\": 0.8.\n"},{"labels":["enhancement"],"text":"I have a scene with 2 objects in Blender. Both objects have keyframe animations set. When using the exporter, the resulting JSON has both animations written to the same json object, resulting in ALL  animations being applied to a single mesh, like so:\n\n```\n\"animations\":[{\n        \"name\":\"default\",\n        \"tracks\":[{\n            \"name\":\"Cube.position\",\n            \"type\":\"vector3\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[0,0,-5.84]\n            },{\n                \"time\":180,\n                \"value\":[0,0,7.68181]\n            },{\n                \"time\":360,\n                \"value\":[0,0,-5.84371]\n            }]\n        },{\n            \"name\":\"Cube.scale\",\n            \"type\":\"vector3\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[1,1,1]\n            },{\n                \"time\":180,\n                \"value\":[1,1,1]\n            },{\n                \"time\":360,\n                \"value\":[1,1,1]\n            }]\n        },{\n            \"name\":\"Cube.quaternion\",\n            \"type\":\"quaternion\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n            },{\n                \"time\":180,\n                \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n            },{\n                \"time\":360,\n                \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n            }]\n        },{ // INCORRECT ! <<<<<<<<<<<<<<<<\n            \"name\":\"Cylinder.position\",\n            \"type\":\"vector3\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[-7.47864,0,8.39099]\n            },{\n                \"time\":360,\n                \"value\":[-7.47864,0,8.39099]\n            }]\n        },{\n            \"name\":\"Cylinder.scale\",\n            \"type\":\"vector3\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[1,1,3.76616]\n            },{\n                \"time\":360,\n                \"value\":[1,1,3.76616]\n            }]\n        },{\n            \"name\":\"Cylinder.quaternion\",\n            \"type\":\"quaternion\",\n            \"keys\":[{\n                \"time\":1,\n                \"value\":[0,1,0,0]\n            },{\n                \"time\":360,\n                \"value\":[-0,-0.171324,-0,0.985215]\n            }]\n        }],\n        \"fps\":24\n    }]\n```\n\n**It should be:**\n\n```\n\"animations\":[{\n    \"name\":\"default\",\n    \"tracks\":[{\n        \"name\":\"Cube.position\",\n        \"type\":\"vector3\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[0,0,-5.84]\n        },{\n            \"time\":180,\n            \"value\":[0,0,7.68181]\n        },{\n            \"time\":360,\n            \"value\":[0,0,-5.84371]\n        }]\n    },{\n        \"name\":\"Cube.scale\",\n        \"type\":\"vector3\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[1,1,1]\n        },{\n            \"time\":180,\n            \"value\":[1,1,1]\n        },{\n            \"time\":360,\n            \"value\":[1,1,1]\n        }]\n    },{\n        \"name\":\"Cube.quaternion\",\n        \"type\":\"quaternion\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n        },{\n            \"time\":180,\n            \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n        },{\n            \"time\":360,\n            \"value\":[-0.061628,-0.704416,-0.704416,0.061628]\n        }]\n    }],\n    \"fps\":24\n},\n    {\n        \"name\": \"Cylinder\",\n        \"tracks\": [\n            {\n        \"name\":\"Cylinder.position\",\n        \"type\":\"vector3\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[-7.47864,0,8.39099]\n        },{\n            \"time\":360,\n            \"value\":[-7.47864,0,8.39099]\n        }]\n    },{\n        \"name\":\"Cylinder.scale\",\n        \"type\":\"vector3\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[1,1,3.76616]\n        },{\n            \"time\":360,\n            \"value\":[1,1,3.76616]\n        }]\n    },{\n        \"name\":\"Cylinder.quaternion\",\n        \"type\":\"quaternion\",\n        \"keys\":[{\n            \"time\":1,\n            \"value\":[0,1,0,0]\n        },{\n            \"time\":360,\n            \"value\":[-0,-0.171324,-0,0.985215]\n        }]\n    }\n        ]\n    }]\n```\n\nwhich then correctly displays in THREE.js\n"},{"labels":["enhancement"],"text":"[plunker](https://plnkr.co/edit/UT9rs0Q6TO0gBxwdxLVK?p=preview)\n\nWhen setting the `map` to repeat the `alphaMap` is also affected.\n\nI'm expecting each face of the cube to have a giant whole in the middle with the edges of the taco time texture showing near the edges of the cube in a 3x4 pattern.\n\nI'm getting the 3x4 pattern of the taco time texture but the `alphaMap`, although it does not repeat it does scale down to the size of the other map. It also produces some nasty streaks.\n\nIf you comment out line 35 `material.map.repeat.set(3,4);` you can see what I'm expecting from the `alphaMap`.\n##### Three.js version\n- [x] Dev\n- [x] r79\n- [x] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"Add an example showcasing features of https://github.com/mrdoob/three.js/pull/9368\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nThe loader updates now loads images using the `XHRLoader`, loads a `blob` calls `createObjectURL` and gets the image that way. Which is great as we can load different texture types.\n\nHowever it is currently not possible to tell the texture loader to load the image `withCredentials=true` - and curry that to the `XHRLoader`. \n\nI just ended up monkey patching `THREE.XHRLoader` to fix this: \n\n```\n      this._textureLoader = new THREE.TextureLoader(); // Texture loaded\n      this._textureLoader.crossOrigin = 'use-credentials';\n      var oldLoad = THREE.XHRLoader.prototype.load;\n      var newLoad = function() {\n        this.withCredentials = true;\n        oldLoad.apply(this, arguments);\n      };\n      THREE.XHRLoader.prototype.load = newLoad;\n      this._loadedTexture = this._textureLoader.load(image, ()=>this._onTextureLoaded());\n```\n\nEdit: I could also have done this:\n\n`THREE.XHRLoader.prototype.withCredentials = true;`\n\nSince the image is being loaded as a blob - it might be nicer to be able to do something like this: \n\n`this._textureLoader.withCredentials = true; // and pass that to the XHRLoader`\n\nEdit: `setWithCredentials` is on the JSON loader - might be nice to have on the `TextureLoader` as that is working with the `XHRLoader`\n##### Three.js version\n- [ ] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"Currently/To the best of my knowledge the only shininess setting for phong material is shininess (mtl Ns) but mtl supports a shininess map (map_Ns). I'm sure it's a pretty big deal but I'd be eternally grateful if this feature was added.\n##### Three.js version\n- [x] Dev\n- [x] r79\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nI'm not sure if this a bug for sure as I am very green to ThreeJS. I understand that large textures are not supported in android based hardware/OS version. The latest generation supports 4096x4096. When enabling shadow.map.height /width > 4096, the shadow does not render and I get a ton of these errors below. I can easily figure out a better width/height via grabbing the max texture size supported, but I'm not sure if this should be handled differently in ThreeJS itself to more gracefully bomb. Perhaps it should remove the shadow and just issue a console warning when the shadow texture is too large or even downsize automatically.\n\n[.CommandBufferContext.Offscreen-MainThread-0xe936f420]GL ERROR :GL_INVALID_FRAMEBUFFER_OPERATION : glClear: framebuffer incomplete\nKrmoGB:1\n\n[.CommandBufferContext.Offscreen-MainThread-0xe936f420]GL ERROR :GL_INVALID_FRAMEBUFFER_OPERATION : glDrawArrays: framebuffer incomplete\n\n[.CommandBufferContext.Offscreen-MainThread-0xe936f420]RENDER WARNING: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering.\n\nA pen to demonstrate : http://codepen.io/jtreher/pen/EyXOVR (line 59 and 60 , view in Android Chrome vs. desktop Chrome )\n\nI have the pen using the dev version, but I also tried with r78. I did check revisions in the https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLShadowMap.js as well.\n##### Three.js version\n- [x ] dev\n- [ x] r78\n##### Browser\n- [x] All of them\n- [ ] Chrome\n##### OS\n- [ ] Android\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem (three.js r78)\n\nI can set `visible = false` for the material on objects (meshes/lines), so that these objects are hidden, but they will still work for raycasting. I wanted to do the same for sprites, but the `visible` property for `THREE.SpriteMaterial` does not work as expected; when setting it to false the sprite is still visible.\n\n[Here is a fiddle to demonstrate this](https://jsfiddle.net/wilt/8psb5y92/)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nRight now MSAA and TAA use fixed MSAA patterns specified here:\n\nhttps://github.com/mrdoob/three.js/blob/0d81c76a920bebe5e894a03a006ad136d6793fb5/examples/js/postprocessing/ManualMSAARenderPass.js#L138\n\nA more flexible approach would be to use Halton 2,3 sample generation, so you can have much more than 32 samples and they have better variance over time.  I've coded up an example here:\n\nhttps://jsfiddle.net/o6a9ha5z/18/\n\nMy example above produces the exact same image included in the Wikipedia article on Halton sampling: https://en.wikipedia.org/wiki/Halton_sequence\n##### Three.js version\n- [x] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nWe are converting our collada models to gltf .glb files but there does not seem to be a support for them in the current r78 version.\nCurrently the GLTFLoader only supports embedded uris. Can this feature be added?\n##### Three.js version\n- [ ] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nWe should probably implement in the core of ThreeJS anisotropic reflections and anisotropy rotation.  I've implemented this in Clara.io but only for direct lights, not the PMREM filtered IBL indirect lights.\n\nIt would be cool to have anisotropy that works with IBL PMREM results -- although I understand that this may require pre-calculated anisotropic PMREM which we currently do not have, or PMREM filtering is only isotropic.\n\nMy implementation produces results that looks like this:\n\n![cooking pot ggx anisotropic metallic](https://cloud.githubusercontent.com/assets/588541/16437735/4a64d804-3d77-11e6-8f02-ebe2cb0ff7e0.png)\n\nhttps://clara.io/view/a8b929e6-c703-47ff-a85d-44bc44e5a132\n##### Three.js version\n- [x] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nWe should implement some type of standard sub-surface scattering algorithm.  I hacked somethig into Clara.io that does this but it is just a hack that doesn't have a true physical basis:\n\n![happy buddha webgl sub-surface scattering](https://cloud.githubusercontent.com/assets/588541/16437672/d870cd20-3d76-11e6-8aae-b7e35c14ee9c.png)\n\nhttps://clara.io/view/5c7d28c0-91d7-4432-a131-3e6fd657a042\n\nMy technique is a customization of this technique here, but it fairly unphysical or requires a lot of precomputation:\n\nhttps://colinbarrebrisebois.com/2011/03/07/gdc-2011-approximating-translucency-for-a-fast-cheap-and-convincing-subsurface-scattering-look/\n##### Three.js version\n- [x] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nRight now the specular reflection of a blinnphong does not diminish the light getting to the underlying diffuse color.  Technically the specular reflection of the blinnphong material, if it full, should act like a metal, it should be fully reflectively and then there should be no light getting to the underlying diffuse layer.\n\nThere are three standard methods of doing energy conservation: Monochromatic, RGB and none.  Right now we have implemented the None case.\n##### Three.js version\n- [x] Dev\n- [x] r78\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":[null,"enhancement"],"text":"##### Description of the problem\n\nCurrently, MeshStandardMaterial does not refer to any background material nor contain any description of how it's shading functions differently from the other Material models.  `Standard` is not descriptive at all.  My understanding is that it is trying to move move in the direction of Physically Based Rendering, but it's not totally clear what the nuances of that shift might be.  \n\nI'm happy to help update the docs, as I am working to integrate the Rect light work with the Standard Material, but either some background info, or pointers to good background materials would be helpful for me to do that.  \n##### Three.js version\n- [X] Dev\n"},{"labels":["enhancement"],"text":"A line in a OBJ file is described as a bunch of vertices. Lines then need to be be followed up by face declarations, otherwise they will be dropped here: https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js#L626\n\nHowever, the code that parses lines starting with \"f\"  (https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js#L484)  does not have any branch to match lines with the pattern \"f single_vertex\" and throws an error.\n\n```\nError: Unexpected face line: 'f 1'\nTHREE.OBJLoader.prototype.parse()\n OBJLoader.js:533\nTHREE.OBJLoader.prototype.load/<()\n OBJLoader.js:50\n.load/<()\n```\n\nHere is a minimal example\nobj file:\n\n```\nmtllib /melkor/d1/guenther/projects/threejs/obj/test3.mtl\n\nv 10 10 10\nv 20 20 20\nv 0 0 0 \nv 0 -51.2692 269.668\n\ng grp1\nusemtl mtl1\nl 1 2 3 4 \nf 1\nf 2\nf 3\nf 4\n```\n\nmtl file (but the problem is not related to any specific material)\n\n```\nnewmtl mtl1\nKa 1 .5 1\nKd 1 .5 1\nKs 1 .5 1\nNs 1\nTr 0.4 illum 3\n```\n\nPossibly related to #8443 \nCC: @jonnenauha @birgersp\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nallocation size overflow when publishing a scene frome editor with over 1,5 million polygons, 1,1million still works fine\n\nallocation size overflow\nMenubar.File/<()\n Menubar.File.js:221\nbound ()\n self-hosted:752\n Menubar.File.js:221:12\n##### Three.js version\n- [ ] Dev\n- [x] r77\n- [ ] ...\n##### Browser\n- [ ] All of them\n- [ ] Chrome\n- [x] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"Hi,\n\nFirst, thanks for this wonderful lib!\n\nI just tried to use an interleaved buffer of the form.\n... [3 float][4 uint8] ...\n... [ x,y,z ] [r,b,g,_] ...\nTo display a raw pointcloud.\nBut I noticed some problem with the handling of InterleavedBufferAttribute in WebGLRenderers.\n\n(1) The InterleavedBufferAttribute has no 'normalized' member: it is difficult to use non float array for - for instance - color attribute. \n\n(2) As the InterleavedBufferAttribute doesn't provide access to an 'array' member. (Which is a member of InterleavedBuffer though), the type of the array is always detected as gl_float in the function SetupVertexAttribute in WebGLRenderer. It breaks things, if it the BufferArray was defined with another type.\n\nI tried with the r78 version. And didn't see changes related to this problem in the dev branch.\n\nWith small hacks fixing these two things on my local setup, I can use my interleaved buffer correctly without any copy in JS side. =)\nCould you fix these things? I can provide a minimal patch. But I am not sure if it can break things, as I just started to look into the library.\n\nDavid\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nNVIDIA's iRay/Mental Ray has the capability to automatically round corners that are sharp.  This is very useful for making hard corners more realistic as very few corners in real-life are ultra sharp.\n\nBasically it can convert the left to the right:\n\n![mental-ray-rounded-corners-example](https://cloud.githubusercontent.com/assets/588541/16027924/5ac0d62e-31a8-11e6-9a7e-d16e875d5680.jpg)\n\nI know that it is possible to do this with bevels, but I wonder if there is a real-time way to do this?\n\nMore details: http://www.geonak.com/wp-content/uploads/2007/06/mia_roundcorners_Maya.pdf?2d12ba\n##### Three.js version\n- [x] Dev\n- [x] r77\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement",null],"text":"##### Description of the problem\n\nThe CubeTextureLoader has a load method with the following signature:\n\n``` javascript\n.load(urls, onLoad, onProgress, onError)\n```\n\nAs with other loaders, anyone would expect that the `onProgress` callback will be called while the loading progresses. However, any callback passed in as `onProgress` will never be called. [This line in the source file](https://github.com/mrdoob/three.js/blob/cf584a60bdfd24c42eaa81d484533364742bda44/src/loaders/CubeTextureLoader.js#L41) is rather telling.\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nOriginally submitted to StackOverflow here: http://stackoverflow.com/questions/37733259/logarithmic-depth-buffer-orthographic-camera\r\n\r\nThe issue occurs when combining the logarithmic depth buffer option with an orthographic camera.\r\n\r\nWhen using the standard linear depth buffer, both perspective and orthographic cameras work as expected.\r\n\r\nWhen using a logarithmic depth buffer, only the perspective camera works as expected. Using an orthographic camera results in geometry bleeding through.\r\n\r\nA jsfiddle highlighting the problem (also linked in the StackOverflow post) can be found here: http://jsfiddle.net/TheJim01/05up96m0/\r\n##### Three.js version\r\n- [x] r85\r\n- [x] r84\r\n- [x] r83\r\n- [x] r82\r\n- [x] r81\r\n- [x] r80\r\n- [x] r79\r\n- [x] r78\r\n- [x] r77\r\n- [x] Tested back as far as r71\r\n##### Browser\r\n- [x] Chrome\r\n- [ ] Chrome (Android) **<-- WORKS**\r\n- [x] Firefox\r\n- [ ] IE11 (IE does not support the EXT_frag_depth extension)\r\n##### OS\r\n- [x] Windows 7 (only one tested)\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n\r\nI've seen the issue on two desktops with NVidia Quadro K600 (4GB), and a laptop with Quadro NVS 160M (2GB), \r\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nRendering instanced geometry with textures requires writing custom shaders. Additionally getting lighting to work is even more difficult. Eventually instanced geometry materials should be part of Three.js so using this type of meshes would be as natural as using regular meshes. Unfortunately my beginner's knowledge of GLSL will not allow to develop that.\n##### Three.js version\n- [x] Dev\n- [x] r77\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"I have been using the blender exporter to export skinned mesh with animation data. It is the only exporter I found that actually works, so good job on that. However, the problem becomes more apparent as the complexity (in terms of number of bones and number of animations) of the model grows -> the three js exporter takes too long to export (10min +) and the JSON file outputed is too big (not that big of issue atm).\n\nUpon inspection, I think I found the problem: the exporter writes all keyframe data (rot, scl, pos) for each bone for every frame step, even tho they are not keyframes. As you can imagine there is a lot of waste since motion that could have been described by a few keyframes is now described in many more frames. Many of which are simply useless. For example, for many bones, 2 keyframes, one at start and one at end is suffice to describe the motion but the three js exporter will export many intermediary frames that just takes up space. Not to mention many bones in animation simply do not have keyframes at all but three exporter is happy to write the same data over and over again.\n\nI have considered to handle this client side as a preparation setup to remove the non-keyframes but it is not trivial because then I need to determine for each frame whether or not that particular frame will affect the animation. It would be much simpler on the blender side as information on whether or not a particular frame is a keyframe is accessible. (I think)\n\nNow, I must admit I do not use three js for displaying so this format may be required for three to display the animation correctly. If this is the case I guess I will just have to come up with some method to remove the non-vital frame data. The difference should be considerable: I estimate a reduction of 75-90% in animation data size from sampling the ratio between keyframes and non keyframes in blender.\n"},{"labels":["enhancement"],"text":"Just to let you know, these to give File Not Found\n\n>  // from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\n>  // from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nI have an issue when I export a JSON file from Maya using the JSONExporter. I have been trying to export a character with morph targets, but can see no option for this on export and no field for 'Morph Targets' in the JSON file after export.\n\nI have searched all over for an answer to this and posted a question to StackOverflow, still with no solution (http://stackoverflow.com/questions/36773360/how-do-i-export-a-json-file-with-morph-targets-from-maya) leading me to believe that this is an issue.\n\nAnother issue with the JSON export from Maya is that when I import my character into my Three.js scene and move a bone, there seems to be a duplicate mesh underneath that doesn't move. This does not occur when I export from Blender. I'm not sure if this issue is related to the one I am posting about.\n##### Three.js version\n- [ ] Dev\n- [x] r76\n- [ ] ...\n##### Browser\n- [ ] All of them\n- [x] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [ ] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [x] IOS\n"},{"labels":["enhancement"],"text":"In the current implementation when new `o/g` is encountered the parser forgets what the current `usemtl` declaration was and sets an empty material name to the parser state. If I understand the spec correctly, it should use the declared material for any objects until it is changed.\n\nThis will produce objects that are missing the material name if the obj file does not explicitly say `usemtl` after each `o/g` line. Most exporters seem to do this always but I've encountered files that do not.\n\nFairly trivial fix. Making an issue so I remember to fix this, if someone does not beat me to it.\n\n```\nusemtl material_name\n\nPolygonal and free-form geometry statement.\n\nSpecifies the material name for the element following it. Once a\nmaterial is assigned, it cannot be turned off; it can only be\nchanged.\n\nmaterial_name is the name of the material. If a material name is\nnot specified, a white material is used.\n```\n\nhttp://www.martinreddy.net/gfx/3d/OBJ.spec\n"},{"labels":["enhancement",null],"text":"What is the current position of THREE.renderer concerning the usage of VAO's?\n\n[OES_vertex_array_object](https://www.khronos.org/registry/webgl/extensions/OES_vertex_array_object) extension is supported on majority of devices and is going to be in core of WebGL 2.0 (According to [WebGL Stats](http://webglstats.com) and [WebGL 2.0 Spec](https://www.khronos.org/registry/webgl/specs/latest/2.0/#3.6)).\n\nI've found [#5849 issue](https://github.com/mrdoob/three.js/pull/5849) on that topic, but it seems to have no continuation. \n\nCould it be something like mentioned in that issue emulation level? (renderer acts like VAO is always available and interacting with it through THREE.VertexArrayObjectSomething which handles cases). Or should it be done by a separate renderer somehow? Or if the case is THREE doesn't need it, why it is so?\n\nThanks in advance.\n"},{"labels":["enhancement"],"text":"##### Preface\n\nFollowing up on #8417.\n\nThis issue's purpose is to keep track of a problem that was identified during an attempt to refactor the `WebGLRenderer` in order to move away from treating render targets like special textures.\n##### The goal\n\nWebGLRenderTargets should not be used like Textures. Their `texture` property should be used instead.\n\n``` js\nmaterial.map = renderTarget.texture; // not material.map = renderTarget;\n```\n##### The first attempt\n\nWebGLRenderer: e255f01f \nWebGLPrograms: ae22bc1f\nWebGLRenderTargetCube: dcfcd4dd\n##### Description of the problem\n\nBy dropping the special treatment for WebGLRenderTargets, this [flipEnvMap check](https://github.com/mrdoob/three.js/commit/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0L2019) and these cube render target checks: [1](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0L2518) | [2](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0L2564) become problematic.  \n\nWhen texture properties of materials are always `Texture` instances, it's no longer possible to rely on `instanceof WebGLRenderTargetCube`. The only way to know whether the texture at hand belongs to a `WebGLRenderTargetCube` is an [ugly flag](https://github.com/mrdoob/three.js/commit/dcfcd4dd0ce6d172edbf0c80db171a14916b7872#diff-5d5b0d48c8d18c359a7d79a655ff731eR12). Furthermore, the `WebGLRenderTargetCube` has a `Texture` instance because it extends `WebGLRenderTarget`. `CubeTexture` is therefore not involved in these checks, so `instanceof THREE.CubeTexture` is not an option.  \n\nShader texture uniforms are another problem, because they are updated every frame.\n\nProviding the user with [warnings](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0R2519) after checking for `instanceof THREE.WebGLRenderTarget` shouldn't be done every frame, but I couldn't find a better place for this.\n\nAny suggestions would be much appreciated. Don't hesitate to make your own PR if you find a solid solution to the problem. \n##### Three.js version\n- [x] Dev\n- [ ] r75\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\n`new THREE.TeapotBufferGeometry().toJSON()` returns something like this:\n\n```\n{\n\"metadata\":{\"version\":4.4,\"type\":\"BufferGeometry\",\"generator\":\"BufferGeometry.toJSON\"},\n\"uuid\":\"4B6D5F88-5A26-4A7C-B16F-C6399B17BEF6\",\n\"type\":\"TeapotBufferGeometry\"\n}\n```\n\n`data` property is missing. Bug?\n##### Three.js version\n- [ ] Dev\n- [x] r75\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nVideoTexture doesn't seem to handle teardown correctly. \nAfter dispose the requestAnimationFrame loop continues to spin forever.\nI.e cancelAnimationFrame should be called in (a listener to) Texture's dispose method.\nMight also have an option to stop the input <video> on dispose, here YMMV though (deep vs shallow teardown).\n\nRegards\n/Fredrik Blomqvist\n##### Three.js version\n- [ ] Dev\n- [x] r75\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n"},{"labels":["enhancement"],"text":"It would appear that the raycast function for Points/Line evaluates all vertices in the geometry, even when only a subset is visible (i.e. backed by BufferGeometry with a drawRange set) - resulting in erroneous hits against non-visible geometry.\n\nSolution would be to clamp the raycast position iterators to the drawRange if there's one specified.\n\nWould you like me to do a PR?\n##### Three.js version\n- [ ] Dev\n- [x] r75\n- [ ] ...\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nThe class `THREE.CanvasTexture` exists as of r73, but is completely absent from the documentation. Please add at least a stub prototype function definition in there.\n##### Three.js version\n- [x] r73\n##### Browser\n- [x] All of them\n- [ ] Chrome\n- [ ] Firefox\n- [ ] Internet Explorer\n##### OS\n- [x] All of them\n- [ ] Windows\n- [ ] Linux\n- [ ] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n"},{"labels":["enhancement"],"text":"##### Description of the problem\n\nThe SkyShader does not render at all on my Samsung Galaxy S6. You can see this with the sky example. I am unfortunately not able to see the console, because USB debugging just doesn't work with this device.\n\nIt's _possible_ that it might be related to this warning on the sky shader, which I see in the console in Firefox on Windows.\n\n```\nTHREE.WebGLProgram: gl.getProgramInfoLog() C:\\fakepath(110,89-162): warning X3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\nC:\\fakepath(111,88-161): warning X3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\nC:\\fakepath(78,68-182): warning X3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\nC:\\fakepath(118,34-232): warning X3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\nC:\\fakepath(137,34-116): warning X3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\n```\n##### Three.js version\n- [x] Dev\n- [x] r75\n- [x] r74\n##### Browser\n- [ ] All of them\n- [x] Chrome\n- [x] Firefox\n- [ ] Internet Explorer\n##### OS\n- [ ] All of them\n- [ ] Windows\n- [ ] Linux\n- [x] Android\n- [ ] IOS\n##### Hardware Requirements (graphics card, VR Device, ...)\n- Android\n- Samsung Galaxy S6\n- Chrome and Firefox\n"},{"labels":["enhancement"],"text":"##### Description of the problem\r\n\r\nFrom Frostbite 3 paper on page 9:\r\n\r\n\"Burley [Bur12] has presented another diffuse model built on real world surface observations, see Equation 5. While this model is empirical, it allows us to reproduce the main features of the MERL\r\ndatabase’s materials. For this reason and because of its simplicity, we have chosen to use this model\r\nin Frostbite. This diffuse term takes into account the roughness of the material and creates some\r\nretro-reflection at grazing angles.\"\r\n\r\nhttps://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\r\nFor improved accuracy, we should likely replace the simple Lambertian diffuse model with Burley 2012 in our Standard material.\r\n##### Three.js version\r\n- [x] Dev\r\n- [ ] r74\r\n- [ ] ...\r\n##### Browser\r\n- [x] All of them\r\n- [ ] Chrome\r\n- [ ] Firefox\r\n- [ ] Internet Explorer\r\n##### OS\r\n- [x] All of them\r\n- [ ] Windows\r\n- [ ] Linux\r\n- [ ] Android\r\n- [ ] IOS\r\n##### Hardware Requirements (graphics card, VR Device, ...)\r\n"},{"labels":["enhancement"],"text":"Manipulation of Object3D's _children_ array is currenty achieved using the _add_ and _remove_ methods. They are basically set methods, in that the indices of the children are not relevant. I believe the indices currently serve no important purpose for traversal or anything else using standard methods. But _children_ is documented as an array, and it is possible to access children by indices.\n\nWhat lacks is the possibility to cleanly assign values by index. That is what this issue and my pull request are all about. I do not request an introduction of a lot of high level stuff, only a safe means of assigning children by index. For various reasons, assignment cannot be made exactly analogous to _children[index]=newChild_.\n\nI suggest making replaceAt(index, newChild) return the replaced child (aka oldChild), and making a (set-oriented) method replace(oldChild, newChild) that looks up oldChild, then calls replaceAt(indexOf(oldChild), newChild) (return value up for debate). Implementing replace in-place instead of as remove+add saves a splice, and if the application developer knows the index of the element to replace, then using that information with replaceAt will save a search too.\n\nIn addition to the (at least theoretical) performance advantages, using array indices is a natural, low-level way to replace unknown objects in known positions, e.g. replacing the current hat with a given one. As discussed below, this can be solved in other ways, such as having the same _name_ \"hat\" for all the hats, and looking up the current hat by searching for an object with the name \"hat\" (one search), removing it (another search and a splice), then adding the new hat (phew!). It can also be solved by creating a hat container object with only one child, avoiding the excessive searching operations, but building a less compact object hierarchy that (AFAICT) requires more computations and memory accesses later.\n\nSee my suggested implementation in PR #8414 . Some notes:\n- The implementation is largely based on code from _add_ and _remove_.\n- It is assumed that _children_ and _oldChild_ (if provided) have no errors, and the new methods are designed to not introduce any new errors, and to give warnings whenever there are indications of user errors.\n- Index shifting is avoided by disallowing movement within _children_. (Reordering _children_ is, as far as I know, entirely safe for the user to do directly on the array, but is not something the user of _replaceAt_ typically wants to happen, and the user of replace typically does not care, because _replace_ is not index-oriented (even though it internally uses _replaceAt_).)\n- If _newChild_ has a parent already, it will be \"stolen\" from the old parent, and a warning will be printed, because this is likely to be unintended.\n- _index_=_children.length_ is currently not allowed, because it is not a proper replacement. Use _add_ instead.\n\nI can understand if you don't want to close doors for the future evolution of _children_ into another type of object. If, however, you plan to keep it as an array, having some simple array methods, namely replaceAt, will IMO be very useful. There has been some dicussion around other, somewhat higher-order, index-oriented methods, more or less analogous to _splice_ with various inputs. IMO replaceAt should be added regardless of what happens to the other candidates. Because it is **low-level, efficient, conservative and useful**.\n\nAnyhow, I really think it should be mentioned in the docs that the children array is only for hackers... I spent a lot of hours scratching my head because nothing happened whenever I changed positions and rotations etc.\n"},{"labels":["enhancement"],"text":"They still work (in both r74 and r75dev), but the console is bloated with error messages like this one:\n\nError: WebGL: CopyTexImage2D: This operation requires zeroing texture data. This is slow. three.min.js:744:407 \n"},{"labels":["enhancement"],"text":"https://github.com/blog/2111-issue-and-pull-request-templates\n\nI don't think we need a `PULL_REQUEST_TEMPLATE` yet, but a `ISSUE_TEMPLATE` should be able to help with the issue of people asking questions or looking for help here.\n\nAnyone would like to give it a go? I guess `CONTRIBUTING` could also benefit of some clean up.\n"},{"labels":["enhancement"],"text":"I'm not sure if \"element option\" is the correct term for this, but what I mean is a line in an .obj file as for instance:\n\n`l 1164 1469`\n\nThis text specifies that the mesh contains a line between vertex 1164 and 1469.\nOBJLoader throws \"Unexpected line: l 1164 1469\" on such occasion.\n\nFrom what my teams modeler tells me, the \"l\" element option is a pretty common thing to use. If that's the case, perhaps the OBJLoader should recognize it?\n\n[Here](https://www.opengl.org/discussion_boards/showthread.php/171130-Storing-Lines-in-Obj-File) is and example of someone using the line element option.\n"},{"labels":["enhancement",null],"text":"Not really sure whether a bug or not?\n\nI'm loading a vrml with vrmlloader that also has textures in the same ~~file~~ folder, but vrmlloader shows me just a blackscreen? No textures loaded. Any Idea? I'm new in this so excuse me for this question if the way of thinking is wrong...\n\nhttp://stackoverflow.com/questions/35768609/loading-textures-on-vrml-loader-with-three-js\n"},{"labels":["enhancement"],"text":"Hi,\nI create a mesh with bufferGeometry and MultiMaterial of MeshBasicMaterial array, then i use addGroup to see some triangle sets of my Mesh.\n\nWhen i set wireframe = false, i can see my mesh like this\n\n![sans titre1](https://cloud.githubusercontent.com/assets/3224540/13457372/24823a76-e068-11e5-8f9a-57ce2204dfd8.png)\n\nbut if i set wireframe = true, it does not work\n\n![sans titre](https://cloud.githubusercontent.com/assets/3224540/13457379/31555e4a-e068-11e5-90fa-0e58dc80c9ce.png)\n"},{"labels":["enhancement"],"text":"I'm not sure what the full history here is with typeface.js (which seems to be a dead project?), but there is some suspicious manipulation going on when a font is loaded:  on [this line](https://github.com/mrdoob/three.js/blob/master/src/loaders/FontLoader.js#L20):\n\n``` js\nonLoad( new THREE.Font( JSON.parse( text.substring( 65, text.length - 2 ) ) ) );\n```\n\nIt was introduced in this change: https://github.com/mrdoob/three.js/commit/fffe45c78a040ef3a5e12d8391c591bfaaa6bae1#diff-7aee17098254e4ee4f70bf5c94fe11e4\n\nThis was introduced for me because a build script is injecting `\"use strict\"` at the top of my JS files. While this is easy to fix in the build script, there's no reason why this change should crash the font loader.\n\nThe ideal solution here would be to have font files actually be JSON. I'm unsure about the history of typeface.js so it seems that some (all?) (legacy?) font files are js scripts when they should be JSON to load like other assets.\n"},{"labels":["enhancement"],"text":"@mrdoob I saw that three.js does not have yet a NRRD loader.\nI am willing to create one but I face an issue : \nThere is no geometry in NRRD, it is just a volume of values (basically it is just an typed array).\nSo here is my question : What should the loader returns ?\nI see that the existing loaders return a geometry object but the only geometry I can think of is a set a plans and this would only involves the NRRD data in the texture.\n\nHere is an XTK demo that uses NRRD files (turn on volume rendering)\nhttp://lessons.goxtk.com/10/\nIt is close to the demo you wrote a few years ago : \nhttps://dl.dropboxusercontent.com/u/7508542/three.js/body/index.html\nexcept that, instead of loading a set of images, all the slices are in a single file.\n\nAm I missing an existing class in three.js that would allow that ? How should we tackle this issue ?\nThanks\n"},{"labels":["enhancement"],"text":"One thing that I find missing from ThreeJS that would be amazing to have would be screen space reflections.\n\nHere are some references for the ambitious coder:\n\nhttps://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/ScreenSpaceReflection/index.html\n\nhttp://www.gamasutra.com/blogs/BartlomiejWronski/20140129/209609/The_future_of_screenspace_reflections.php\n\nhttp://www.frostbite.com/2015/08/stochastic-screen-space-reflections/\n\nExample code from the talented Morgan McGuire:\n\n![2014-08-08_018_effects_r120_g3d_r5100__one](https://cloud.githubusercontent.com/assets/588541/13398142/023f89ee-decb-11e5-9667-f627c38d6070.jpg)\n\nhttp://casual-effects.blogspot.ca/2014/08/screen-space-ray-tracing.html\n\nExample open source code for Unity 5:\n![gallary](https://cloud.githubusercontent.com/assets/588541/13398139/0037cb52-decb-11e5-9bbc-677e2fbb5012.jpg)\n\nhttp://www.kode80.com/blog/2015/03/11/screen-space-reflections-in-unity-5/\nhttps://github.com/kode80/kode80SSR\n"},{"labels":["enhancement"],"text":"A few people have commented about the fact that OBJMTLLoader has been removed (#8085, #8105) since it's recent removal.  I was wondering if there is more information on why this was removed given that OBJLoader + MTLLoader is missing a bunch of functionality that OBJMTLLoader provided.\n1. OBJMTLLoader uses the `mtllib` tag to associate a specific OBJ file with an arbitrary MTL file.  With OBJ+MTL I need to manually map my OBJ files to MTL files which may not have a 1 to 1 name mapping if I have an MTL file that I'm sharing with multiple OBJ files (in my case I have a few MTL files, and many different object files each use a small number of MTL files).\n2. OBJ+MTL does not properly parse OBJ files with multiple materials on a single mesh.  For example, I have created a model of a pot and I use a different material for the inside of the pot than I do for the outside.  This OBJ file defines two objects.  The first object uses a single material and loads properly.  The second object uses two different materials for different parts and only loads one material when rendering.  Here is the trimmed OBJ file:\n\n```\n# Blender v2.76 (sub 0) OBJ File: 'pot.blend'\n# www.blender.org\nmtllib pot4.mtl\no Pedastel \nv -35.000000 -38.500000 35.000000\n...\nvn 0.000000 0.632100 -0.774900\nusemtl Pedastel\ns off\nf 27/1/1 29/2/1 31/3/1 25/4/1\n...\n\no PotMesh_Mesh\nv -0.000016 0.000000 0.000000\n...\nvn -0.000300 1.000000 -0.002400\nusemtl PotOutside\ns 1\nf 84/25/12 148/26/13 3295/27/14 83/28/15\n...\nusemtl PotInside\nf 3182/1250/1164 3289/1251/1164 145/1252/1164 81/1253/1164\n...\n```\n\n**Actual Behavior:**\nOBJLoader reads the usemtl statement and sets the material name of the current object, creating the mesh and assigning the actual material after the entire file has been parsed resulting in a single object using whatever material the last usemtl statement referred to.\n\n**Expected Behavior:**\nOBJMTLLoader creates a mesh using whatever the current face data is saves it using the current material and then starts a second mesh using the newly identified material.\n\nNote: This OBJ was generated by a relatively recent version of Blender, so my assumption is that the format is valid and this is a reasonable thing to have in an OBJ file.\n"},{"labels":["enhancement"],"text":"One thing that we are missing is importance sampling in our GGX StandardMaterial shader.  I have found that this can lead to sparkles with bright lights when the specular highlights are sharp -- I have gotten around this by using MSAA but using MSAA for this is sort of overkill and very slow.\n\nThe way that UE4 deals with this is to use importance sampling to do multiple weighted samples and combine them such that the sparkles are greatly reduced without the need for a costly full screen supersampling approach:\n\nDetails:\nhttp://blog.tobias-franke.eu/2014/03/30/notes_on_importance_sampling.html\n\nSample code (haven't verified its correctness) with explanation:\nhttp://brabl.com/ibl/\n"},{"labels":["enhancement"],"text":"Hello,\n\nIn the following scenes rendered using the MeshStandardMaterial and a white ambientLight, you can see\n- an object using an aoMap without any envMap (so no dynamic reflexion): \n  ![2016 02 11 couch_envmap_off](https://i.imgur.com/EK2SXRO.jpg)\n- an object using an aoMap with an envMap (so with dynamic reflexion):\n  ![2016 02 11 couch_envmap_on](https://i.imgur.com/xyvp96S.jpg)\n\nThe problem is that in the second case (which is the one I'm trying to achieve), the light from the envMap (or reflexions) is not occluded by the aoMap. This leaves the rendering with bright regions that should be dark (for example, behind the cushion on the right side, there's light between the cushion and the back of the seat. According to the aoMap, it should be completely dark - as it is when I turn of the envMap like in the first case).\n\nI saw a few discussions on the topic, specifically in https://github.com/mrdoob/three.js/issues/7377, but I was wondering if\n- I understood right, and what I'm seeing is currently expected for three.js?\n- this behavior is going to be improved/fixed in the future?\n\nThanks in advance for your help,\n\n  Silvain Toromanoff\n"},{"labels":["enhancement"],"text":"Why `Scene.clone()` is always recursive? Is this correct? I think next code\n\n``` js\nTHREE.Scene.prototype.copy = function ( source ) {\n\n    THREE.Object3D.prototype.copy.call( this, source ); \n```\n\nmust be\n\n``` js\nTHREE.Scene.prototype.copy = function ( source, recursive ) {\n\n    THREE.Object3D.prototype.copy.call( this, source, recursive ); \n```\n\nCan I do a PR?\n"},{"labels":["enhancement"],"text":"https://github.com/mrdoob/three.js/blob/dev/src/core/Geometry.js#L656\n\nMerging geometries (geometry.merge(geometry2)) doesn't merge the line color vertices (geometry2.colors).\n"},{"labels":["enhancement"],"text":"Hi,\n\nLately, I have been skinning models with LocRotScale in blender and noticed that all is good except with scaling. In other word, when I try to export an animation that uses location, rotation and scaling frames, only the location and the rotation works. The scaling is not working. I have experienced the issue with at least 3 different models.\n\n![issue_scaling_blender_threejs](https://cloud.githubusercontent.com/assets/3125827/12840034/a57a3d7e-cbdf-11e5-8047-270129b6856b.jpg)\nin Blender it works fine\n\n![blender_skinning_scaling_issue_threejs](https://cloud.githubusercontent.com/assets/3125827/12840036/acc0c710-cbdf-11e5-8500-3ae4fb6869f4.jpg)\nin three.js the scaling is missing\n\nI have attached a simple blender file + json export  that might be useful for debugging that issue.\nNote: I am using three.js r73 and blender 2.76b\n[issue.zip](https://github.com/mrdoob/three.js/files/118741/issue.zip)\n\nThank you,\nverteAzur\n"},{"labels":["enhancement"],"text":"I'm writing an editor with three.js. It means that I need to save a scene and be able to restore it with all features. I fact, I would prefer the standard three.js save/restore process to do the job.\nMy current problem is to map a user's picture on a standard geometry in a flat style (like putting a sticker). To do that, I may have to modify UV. My problem is that three.js doesn't have anything to save/restore UVs on a standard geometry?\nI don't want to go for a Geometry or a BufferGeometry because I need to be able to change the geometrical properties of the object and need to stay with the actual standard geometry save/restore process.\nSo I need to modify the toJSON method of Geometry.js and the matching parseGeometries method of ObjectLoader.js.\nBefore I do my own thing, is there something currently in progress to address this problem?\nIn a previous pull request (https://github.com/mrdoob/three.js/pull/7991), mrdoob spoke of a UVMapper class. I couldn't find anything in the code that looks like a UVMapper class. Does someone know what it is?\n"},{"labels":["enhancement"],"text":"When a file is loaded with `XHRLoader.load` the callback `onLoad` is also called when the file was not found. \nTo the `onLoad` function is passed the html formatted error message for the not found file (depending of the webserver configuration) and not the expected data, and not know that the load process if failed. \nI suggest to pass to the `onLoad` function also the event or call `onError` if the status code is not 200.\nThe same change on XHRLoader must be appied to all loader that use XHRLoader inside the code.\n"},{"labels":["enhancement",null],"text":"When Orthographic cameras are exported using toJSON, the camera's zoom parameter is exported.\n\nIf/when THREE.ObjectLoader() is used to pull in this JSON object, zoom is not applied to the new Camera.\n\nI'm not sure exactly how this should work or I'd just do a pull request.\n\nI was thinking of just attaching it to the newly created object after the call to THREE.OrthographicCamera() on line 484 or ObjectLoader.js...\n"},{"labels":["enhancement"],"text":"Using ImageUtils you can load cube URLs cross origin and display a skybox.\n\nTHREE.ImageUtils.crossOrigin = 'anonymous';\n\nBut using the following does not seem to work in master or in dev:\n\nTHREE.CubeTextureLoader.crossOrigin = 'anonymous';\n\nThe following script loads both types of textures. If ImageUtils is loaded last then the textures load and the skybox works. Vice versa. it's a fail and the skybox is black.\n\nhttps://github.com/mrdoob/three.js/files/102633/skybox-cross-origin-r1.html\n\n(I tried building a jsFiddle but the fiddle had issues.)\n"},{"labels":["enhancement"],"text":"I have exported an object I made on the scene with javascript (as a shapegeometry) using the `toJSON()`function. Now I try to reload the object on the scene with an `objectLoader`, but it fails because the objectloader doesn't support geometry type `ShapeGeometry`.\n\nExcept if I'm missing something, that means that I can't reload exported models in the scene?\n"},{"labels":["enhancement"],"text":"There is none at all.\n"},{"labels":["enhancement"],"text":"I was loading an .obj with ~70k vertices, and it was taking ~20s to load the model. The slowness was being caused by `mergeVertices` call here:\n\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJMTLLoader.js#L101\n\nI commented it out just to see what would happen, and it took about ~1s to load the model and there was no visible change. Any ideas?\n"},{"labels":["enhancement"],"text":"The current THREE.Sprite implementation has a number of issues.\n- Sprites can't have their texture translated, that is you can't change UVs, so you can't use them for explosions or other effects\n- You can't translate the image of a sprite, that is, the center of the texture is aligned with the origin of the object and you can't move it horizontally or vertically\n- Sprites can't be rotated independently, as rotation is set in their material. If you want to rotate sprites independently you must assign each one a different material, even if they share the same texture. I see no reason the rotation attribute couldn't and shouldn't be stored on the Sprite structure instead of the SpriteMaterial structure.\n- The BufferGeometry in the sprite is make-believe and actually ignored, which is not only inefficient as it is also confusing as it implies you can rotate, translate and animate the sprite by changing it, but you can't\n\nThe last one is actually quite interesting.\nSee https://github.com/mrdoob/three.js/blob/master/src/objects/Sprite.js#L12\nand https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/plugins/SpritePlugin.js#L24\nI even tested this by commenting out the BufferGeometry creation in THREE.Sprite, and sprites continued working.\n\nMeanwhile I imagine the workaround is to use a Mesh with a PlaneGeometry and a .lookAt(camera.position) in every loop in place of Sprites if one needs the features mentioned above.\n\nFixing this issue I imagine is not terribly difficult.\n\nHere is my suggested plan:\n- Move rotation from SpriteMaterial to Sprite (and take rotation from Sprite instead of SpriteMaterial in SpritePlugin)\n- Either add an UV array and a translation array to Sprite, and use that in SpritePlugin, or actually use the BufferGeometry already in Sprite\n- Depending on the above, remove the BufferGeometry from Sprite\n"},{"labels":["enhancement"],"text":"After providing a basic stencil buffer API in `WebGLState`(see #7816), i tried to implement an automatic management of the stencil test (see #7836). The `WebGLRenderer` should change the WebGL state by two additional material properties `stencilWrite` and `stencilTest`. The benefit of this is a more consistent management of the internal WebGL state.\n\nUnfortunately, the masking mechanism of three.js's post processing was incompatible with this approach, because the library, or more specifically the `MaskPass`, manages directly the stencil test via native WebGL API. I tried to fix this (see #7866), but i wasn't able to develop a satisfying solution.\n\nI've opened primarily this issue as a reminder. But we can also discuss here all suggestions to this topic.\n"},{"labels":["enhancement"],"text":"This is a question / issue I raised on stack overflow which I think could be a feature: http://stackoverflow.com/questions/34724279/grouping-three-sprite-to-share-the-same-transform-point \n\nLooking at the Three API, I cannot see anything obvious that would help solve this. Hopefully this is something that would also help others: Being able to group sprites to share the same centre of rotation / transform. Maybe this could use the THREE.Group object to group the sprites ? \n\nThank you for all the lovely work on Three.JS so far. \n"},{"labels":["enhancement"],"text":"The documentation for BufferGeometry lists .morphTargets as a property of a BufferGeometry, but i do not see that this actually exists.  Instead, (I think) there is an attribute for morphTargets.\n\nI think the documentation should not mention a non-existent property.\n"},{"labels":["enhancement"],"text":"Currently decals (DecalGeometry.js) do not work with animated meshes.\n\nI am peering into the code to see how difficult it would be to implement this.  It appears maybe animations are done at the shader level, so I'm getting increasingly discouraged the more I'm trying to analyze this.\n\nI'm sure many would appreciate this enhancement!\n\nThanks\n"},{"labels":["enhancement"],"text":"Hi there,\n\nI tried to load a VTK file with [VTKLoader](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/VTKLoader.js). As it turns out, my file is _binary_ encoded VTK, and the loader expects _ascii_. It accepts my file without error and spits out an empty geometry.\n\nUnfortunately I cannot publicly share this file. But I can tell you that your example file starts with:\n\n```\n# vtk DataFile Version 3.0\nvtk output\nASCII\n```\n\nand my file starts with:\n\n```\n# vtk DataFile Version 3.0\nVTK File Generated by Insight Segmentation and Registration Toolkit (ITK)\nBINARY\n```\n\nSo it shouldn't be too difficult to at least check and throw an error. If you could implement a binary loader, though, even better!\n"},{"labels":["enhancement"],"text":"I have attached a .dae model that loads and renders correctly with the latest (73) collada loader, but which seems to have its textures garbled in the collada2 loader, and also loader from the dev tree on dec31.\nAlso, the JSON file created from the .dae file at clara.io today (jan 3) (also attached) renders incorrectly with the 73 json loader in a similar way, which might be some kind of clue?\n\nI think this is important because the 73 collada loader scambles objects that are loaded with matching mesh names; this is fixed in the later loaders, but then they don't render this file correctly, so at this time there is no single version of collada loader that works 100% correctly. (I might note that with my searches about the collada issue I have see, it just may be that these issues may go back to day one)\n\n[thewell.zip](https://github.com/mrdoob/three.js/files/77040/thewell.zip)\n"},{"labels":["enhancement"],"text":"Hi,\n\nI am using **TrackballControls.js** in my project and I am using **bower**. \nI want to change the `PAN` and `ROTATE` values so I can use left click for panning, etc in my project. For that I have to change the `STATE` inside the **TrackballControls.js** which means I lose my changes if I use bower to upgrade the components, etc. \ni.e., I have to change:\n\n```\nvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n```\n\nto\n\n```\nvar STATE = { NONE: -1, ROTATE: 2, ZOOM: 1, PAN: 0, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n```\n\nIs there anyway to pass the `STATE` variable to `TrackballControl`s instead of changing it inside the code so I can use bower? \n\nThanks\n"},{"labels":["enhancement"],"text":"Have been experimenting with bones + blender + three recently, and have run into some issues with the exporter.\n### Positions\n\nAll bones seem to be exported with world coordinates. However, the loader wants them to be relative their parents... Basic examples where the armature + first bones are in origo, and then just one child seem to work just fine, but with more complex skeletons it breaks.\n\nI did a quick fix for this locally, basically changing code like a madman around \nhttps://github.com/mrdoob/three.js/blob/r73/utils/exporters/blender/addons/io_three/exporter/api/mesh.py#L1077\n\nI got it to work so that the coordinates were relative their parents, but that quickly got me to the second problem:\n### Rotations\n\nAll bones are exported with hard coded rotation (0,0,0,1)... This makes it a mess to rotate bones along their own axis, which is basically what you want to do.\n\nSomehow the rotations and position of the bones need to be converted between global space and parent-relative space.\nhttps://github.com/mrdoob/three.js/blob/r73/utils/exporters/blender/addons/io_three/exporter/api/mesh.py#L1086\n\nI'm not sure how to provide better input on this matter, and I don't feel I know enough black magic to be able to solve it on my own.\n\nHappy to provide blend-files if necessary!\n"},{"labels":[null,"enhancement"],"text":"In my application, I would like to restrict the movement and rotation to XZ plane. I don't think TransformControls allows for that as of now. I can add the logic if someone can guide me on the easiest way to add that logic.\n"},{"labels":["enhancement"],"text":"Could someone point me to the docs to `AnimationMixer` `AnimationClip`, `AnimationAction`, `AnimationLoader`, `AnimationUtils` etc?\n\nI think they are missing.\n\nP.S. I tried googling as well. The only resource I can find about AnimationMixer is from the examples.\n"},{"labels":["enhancement"],"text":"I have a doublesided object that needs to be \"clicked on\" on the back side (which being rendered), and all of the materials in my objects are of MultiMaterial type. Raycaster only works with single material objects.\n\nP.S.\nI've changed line 18817\n<code>var material = object.material;</code>\nto\n<code>if (object.material.materials!==undefined){\n var material = object.material.materials[0]\n}else{\n var material = object.material\n};</code>\nto patch it up temporarly (all of my multimaterial objects have only one material.. courtesy of max export script)\n"},{"labels":["enhancement"],"text":"The onlyShadow property has now been removed from THREE.SpotLight. How can I use the THREE.SpotLight to only cast shadows in the latest builds? (Basically to produce the same effect)\n"},{"labels":["enhancement"],"text":"The docs for BufferAttribute's constructor say \"The array can either be a regular Array or a Typed Array\". However, if I try using a regular Array, I get \"Error: WebGL: drawArrays: bound vertex attribute buffers do not have sufficient size for given first and count\" (in Firefox; Chrome gives a different but similar error.)\n\nThis is happening in r73 and in dev. All you have to do to see it is replace Float32Array with Array in the webgl_buffergeometry_points.html example. (Here's a fiddle of the change: http://jsfiddle.net/385pnphs/ note lines 28+29.)\n\nThis is relatively easy to work around once you know about it by just doing Float32Array.from(regularArray) right before constructing the BufferAttribute, of course; so even if it isn't a priority for fixing, the docs should at least be updated not to suggest that a normal array would work, to save people my headache in the future. ;)\n"},{"labels":["enhancement"],"text":"https://github.com/mrdoob/three.js/blob/r73/examples/webgl_shadowmap.html#L136\n\nchange to\n\n``` js\nrenderer = new THREE.WebGLRenderer( { antialias: true, logarithmicDepthBuffer: true } );\n```\n\nWith that change, there are no longer any shadows.\n\nTested with r73 and dev as of today on Chrome Version 47.0.2526.80 (64-bit) and Firefox 43.0, both on Mac.\n\njsfiddle: http://jsfiddle.net/xrd3gcpy/\n"},{"labels":["enhancement"],"text":"I'm storing my objects in a database and the html link of the texture (url in base64) is too long: it's so long, that I'm having trouble with my databse... For me it would be easier to have my texture's html link.\n\nHow could I achieve this ?\n\n```\n{\n    \"metadata\": {\n        [...]\n    },\n    \"geometries\": [\n        {\n            [...]\n        }],\n    \"materials\": [\n        {\n            [...]\n        }],\n    \"textures\": [\n        {\n            [...]\n        }],\n    \"images\": [\n        {\n            \"uuid\": \"4ED9CE3E-7C8A-4EB7-8CF8-D90B3527DF5F\",\n            \"url\": \"data:image/png;base64,iVBORw0KGgoATyuRZGZVREd0FAERRRBAEBEFwAYEyKqP/Rfozx+5fDYjvpeT/akv+n/J+/7eMjX9Ke8uojP4JVAYAyuj/Ld3Por7fPQ9i8d7vvr8LKNzLg/dn1u1hvQf3q/v92vRX0X/ [...]\"\n        }],\n    \"object\": {\n        [...]\n    }\n}\n```\n\nto\n\n```\n{\n    \"metadata\": {\n        [...]\n    },\n    \"geometries\": [\n        {\n            [...]\n        }],\n    \"materials\": [\n        {\n            [...]\n        }],\n    \"textures\": [\n        {\n            [...]\n        }],\n    \"images\": [\n        {\n            \"uuid\": \"4ED9CE3E-7C8A-4EB7-8CF8-D90B3527DF5F\",\n            \"url\": \"http://www.domain.com/picture/path.png\"\n        }],\n    \"object\": {\n        [...]\n    }\n}\n```\n\nIf I edit my link before saving my objects in my database it's ok. But when I'm calling them with the ObjectLoader, it returns me a base64 url again.\n"},{"labels":["enhancement"],"text":"Go here and check menu on the lefthand side of your screen:\nhttp://threejs.org/docs/#Reference\n\nCurrent ordering of the Textures section:\nCubeTextures\nCompressedTextures\nDataTexture\nTexture\n\nCompressedTexture should come before CubeTexture for alphabetizing.\n"},{"labels":["enhancement"],"text":"The examples:\n- examples/webgl_materials_blending.html \n- examples/webgl_materials_blending_custom.html \n\nUse THREE.AdditiveAlphaBlending which doesn't seem to exist anymore.\n"},{"labels":["enhancement"],"text":"If I take\n\nhttp://threejs.org/examples/#webgl_morphtargets_horse\n\nand disable the mixer, but add a line\n\nmesh.morphTargetInfluences[ 1 ] = Math.cos( 0.005*Date.now()  );\n\nthen I only see the positive half-cycle of morphing (where Math.cos > 0).  However, if I edit horse.js, and have only 8 morphtargets, then I do see the whole cycle of morphing.\n\nIf I change [this line](https://github.com/mrdoob/three.js/blob/dev/src/renderers/WebGLRenderer.js#L742)\n\n``` javascript\nactiveInfluences.sort( numericalSort );\n```\n\nto\n\n``` javascript\nactiveInfluences.sort( function(a,b) { return Math.abs( b[0] ) - Math.abs( a[0] ) } );\n```\n\nthen it works for me.  In other words, sort the influences according to the absolute values.\n\nI wish I could do a proper pull request and perhaps define a function `numericalAbsoluteSort`, but my drive is so full that I cannot even clone threejs.\n"},{"labels":[null,"enhancement"],"text":"In the Blender Export 4.4 there is an issue with the vertices of morph targets. They are parsed as triplets of arrays: `[[x,y,z],[x,y,z],...]` but should be one singel array `[x,y,z,x,y,z]`. \n\nI'm not good enough with python to make the change, but I think it's `extend([vertex.co.x, vertex.co.y, vertex.co.z])` that should be `extend((vertex.co.x, vertex.co.y, vertex.co.z))` on line 409 in mesh.py.\n\nI't worked for me when changing in the exported json object directly.\n"},{"labels":["enhancement"],"text":"I was using CSS3DStereoRenderer to match VRControl's camera control for VR with WebGL. It doesn't seem to match when you rotate the camera axis like the WebGL (StereoEffect.js class) does.\n\nIt would be nice if someone could implement this rotation so they can be in sync.\n"},{"labels":["enhancement"],"text":"Those parameters are missing in json parse:\n-roughness\n-metalness\n-envMapIntensity\n-roughnessMap\n-metalnessMap\n-shading type handling for MeshStandardMaterial\n\nprobably envMap also can be included in some way.\n"},{"labels":["enhancement"],"text":"resulting in problems when creating multimaterial meshes from primitives\ne.g. a geometry with faces having materialindices of 1-Nfaces\n\n also affected are all geometries that extend Polyhedron:\n- DodecahedronGeometry\n- IcosahedronGeometry\n- OctahedronGeometry\n- TetrahedronGeometry\n\nPolyhedronGeometry.js:41\n\n``` javascript\n faces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\n```\n\n^ face index (j) as material offset.. that is rather suspicious =)\n"},{"labels":["enhancement"],"text":"The spotlight has a perspective camera-based shadow map that is setup here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/lights/SpotLight.js#L22\n\nRight now the camera for the LightShadow is not updated in response to the spot light properly from what I can tell.\n- When the SpotLight.angle changes, we should adjust the FOV of the perspective camera appropriately.  This is the most obvious issue.\n- When the SpotLight.distance of the camera changes to a non-zero value, we could adjust the far clipping plane of the perspective camera to match.  (PointLight also has this issue.)  I am not sure if this is as necessary as the SpotLight.angle misalignment with the PerspectiveCamera FOV.\n\nIt would be cool to automatically adjust the near clipping plane of the perspective camera as well, but I do not know what would be a good value -- lightRadius or some fraction of the distance?\n"},{"labels":["enhancement"],"text":"Within the switch case in the ObjectLoader.parseObject function is a case for the \"LineSegements\" missing. By now a serialized LineSegments gets deserialized into a Object3D. [see here](https://github.com/mrdoob/three.js/blob/dev/src/loaders/ObjectLoader.js#L539)\n"},{"labels":["enhancement"],"text":"I have the collada pump example working fine. I'm now trying to export an animated dice with 1 texture but in the threejs I only see the shape of the dice with no texture. The animation works fine.\n\nAlso the lighting on the dice looks wrong.\n\nI can load the collada file in other program with no problems.\n\nI'm using this version of threejs: https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.js\n\nanyone?\n\nADDED: I have create an example with a cube and one texture. In this example you can see that the texture is not on the cube: http://sigmaphp.dk/threejscollada.zip\n"},{"labels":["enhancement"],"text":"Many post effects request specific special passes, normal and depth mostly, to create their effect.  Specifically:\n\nDOF: depth\nSSAO: depth, normal\nSAO: depth, normal\nMB: motion, depth?\n\nWhile it is possible to set up the creation of a normal and depth pass and then coordinate passing that result into another effect, it quickly becomes hard to manage if you can turn on or off the various effects, you may unnecessarily be computing a depth pass when you do not need it.\n\nOne alternative solution would be for each pass to state explicitly what passes it requires, so a DOF pass would state it needs a depth buffer.  And a SAO pass would state that it needs a depth and a normal buffer.\n\nIt would then be the renderer's responsibility to create the buffers that the enabled post effects require.  This would simplify creating post effects and it would make it more efficient to use post effects.\n\nFocusing on a request model and encapsulating in the renderer how these buffers are generated would allow us to change how these buffers are generated.  So that on Desktop we could use the WebGL DrawBuffers extension to create them in a single pass, while on mobile we can do multiple passes.\n\nThis also integrates well into AA systems where the normal or the depth buffer needs to be preprocessed with the same AA system that the beauty pass used for consistent sake -- this is the case with algorithms such as TAA.\n\n(I would love to implement this but I've got other commitments for the next month.  I am also not sure of the right design, even though I think the above is a good outline of a general direction to go in.)\n\n/ping @benaadams @erichlof  @MasterJames\n"},{"labels":["enhancement"],"text":"For a CurvePath, there is no way, when calling createPointsGeometry, to have an open path. Adding a flag to this call would resolve that.\n\nRevision 73.\n"},{"labels":["enhancement",null],"text":"This issue is for tracking the conversion of sizes used in the examples (as discussed in #7609) and for me to ask questions about it :)\n\nThe work is going on here https://github.com/GGAlanSmithee/three.js/tree/examples-unit-adjustment. You can see how it's going in `track.txt` in the root.\n\nI am trying to get the sizes of the geometries in the examples as close to reality as possible where 1 three.js unit = 1 meter (without breaking anything). In cases where the example does not map to reality (for example displays an arbitary cube), I try to get as close to 1 three.js unit as possible for consistency and to get users looking at the examples used to use three.js with those kind of scales.\n\nI am a bit unsure about the cases where a model is loaded. Some of them are somewhat large (canvas_lights_pointlights for example) and not close to reality, should I scale them down then to try to get it as close to reality as possible or leave size as is when loaded?\n\nI am only changing size / scale atm. I do not know if there needs to be further changes done to textures or renderer to take advantage of the new shader model? if so please tell me what (maybe should be another PR though). I would also appreciate if someone would give a quick look at the examples I've converted so far just to see that I'm not doing something crazy.\n"},{"labels":["enhancement"],"text":"would it be ok for the The Maya exporter (threeJsFileTranslator.py) to pass the reflectivity of a phong material?  There is a pymel function for it (getReflectivity) and I've tested that it works. \n\n```\nif isinstance(mat, nodetypes.Phong):\n        result[\"reflectivity\"] = mat.getReflectivity()\n        result[\"colorSpecular\"] = mat.getSpecularColor().rgb\n        result[\"specularCoef\"] = mat.getCosPower()\n        if self.options[\"specularMaps\"]:\n            self._exportSpecularMap(result, mat)\n```\n\nThe current Loader.createMaterial() doesn't look for reflectivity, but it also easily could. https://github.com/mrdoob/three.js/issues/7632\n"},{"labels":["enhancement"],"text":"The Loader currently ignores any values listed for \"reflectivity\" in materials that would be loaded (from a JSON file for instance). With the most current build, the presence of a reflectivity value results in an error. I'm not sure if this is intentional or not as the current exporters don't seem to pass that info either. \n\nHowever, I know that it is possible to pass that value via python from Maya (pyMel has a getReflectivity() function built in). I don't use Blender, so I don't know if it's possible that way, but it doesn't seem too outrageous. \n"},{"labels":["enhancement"],"text":"Hi everyone!\n\ni'm trying to export a simple 3D-model from Blender. I discovered that it is currently not possible to export a mesh with a `MeshBasicMaterial` applied. A brief look to the python source code shows, that you can only force a `MeshLambertMaterial` instead of `MeshPhongMaterial` by setting the specular intensity in Blender to zero. But unfortunately, there is no way to force a `MeshBasicMaterial`.\n\nthree.js R73, io_three 1.5.0,  Blender 2.74\n"},{"labels":["enhancement"],"text":"Our spot and point lights were not physically-based.  The main issue is our falloff calculation.  This issue attempts to provide a firm physically-based foundation for changing our lights.\n\nOur spot and point lights currently are specified in terms of [radiant intensity](https://en.wikipedia.org/wiki/Radiant_intensity), I.  Which is a measure of Power / Solid Angle (Candela).  We can also think of light strengths in terms of power, Phi, directly.  Determining the power of a point or spot light (making a simplification that Frostbite does, see note 1) is simple, just integrate across the solid angle sphere: Power(I) = 4 \\* PI \\* I.\n\nTo do shading calculations, we require the irradiance at a specific point in space, usually a surface.  To calculate irradiance from a spherically emitting light (e.g. spot or point), we just need to figure out the amount of power received per area, .e.g irradiance.  This can be calculated by taking the power of the light and dividing by the spherical area at the distance desired: SphereArea( R ) = 4 \\* PI \\* R^2.\n\n```\n= Power(I) / SphereArea( R )\n= 4*PI*I / 4*PI*R^2\n= I / R^2\n```\n\nThis gives us the quadratic falloff for point and spherical lights, E = I / distance^2, where E is the irradiance at the surface, I is the light radiant intensity and distance is the distance from the light to the surface.\n\n(One change to the above falloff equation would be to allow one to specify the falloff decay.  Thus instead of a fixed \"2\" one could vary it to be linear, constant or cubic or whatever.  The resulting equation would be `= I / R^decay`.)\n\nBoth UE4 and Frostbite 3 suggest a further modification to the falloff to enable one to limit the range of a light's effectiveness for optimization purposes.  They both suggest multiplying the falloff above with this:\n\n`distanceLimit = saturate( 1 - ( distance / maxDistance )^4 )^2`\n\nThis equation, which is extensive discussed in the linked to references provides the best mix of limiting the range nicely, while not affecting the light in regions not close to the distance limit.\n\nThe resulting falloff equation, excluding the I, intensity variable, becomes this:\n\n`falloff(distance, maxDistance, decay) = saturate( 1 - ( distance / maxDistance )^4 )^2 / (distance^decay)`\n\nFrostbite makes an assumption that lights can not be smaller than epsilon (in their case 1cm, 0.01m) when calculating falloff to avoid divide by zero issues when calculating light intensities very close to a light.  This modifies the falloff to be:\n\n`falloff(distance, maxDistance, decay) = saturate( 1 - ( distance / maxDistance )^4 )^2 / ( max( distance, epsilon )^decay)`\n\nI would like to make a PR that makes this change to our falloff, and also adds the ability to set light power on both point and spot via a `power` getter and setter.\n\nThe only question is how to handle backwards compatibility given that our current light falloff is non-physical?\n\n/ping @WestLangley @mrdoob @tschw @gero3 \n\nSources:\n\nFrostbite 3: http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\nUE4: http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n\nNotes:\n1. Frostbite assumes that a spot light does not focus its light power but rather it just lets some of the light power escape.  This means that changing the spot angle on a spot light does not change its intensity.\n"},{"labels":["enhancement"],"text":"`SplineCurve3` is replaced by `CatmullRomCurve3`\nSo, `ClosedCurve3` should be replaced by `ClosedCatmullRomCurve3` no?\n"},{"labels":["enhancement"],"text":"Hi. \n\nI started developing of a THREE.NodeMaterial to reconcile the differences materials between 3D authoring software. In SEA3D Studio has options to create layers in Albedo with mask and various blend modes, Rim shader and others without need custom shader code. I would like to bring this to Three.JS with node shader.\n\nI think that MeshPhongMaterial, MeshPhysicalMaterial and others can easily be based on NodeMaterial through of a interface for backward compatibility or proxy only. \n\n**UPDATED**\nhttp://sunag.github.io/sea3d/Labs/Three.JS-NodeMaterial/webgl_materials_nodes.html\nhttp://sunag.github.io/sea3d/Labs/Three.JS-NodeMaterial/webgl_postprocessing_nodes.html\n\nSyntax example for uses UV1 or UV2 for texture: \n\n```\nvar usesUv2 = true;\nvar isLightmap = false;\n\nvar t = new THREE.NodeTexture( texture, new THREE.NodeUV( usesUv2 ) );\n\nvar nodemat = new THREE.NodePhongMaterial();\nif (isLightmap) nodemat.light = t;\nelse nodemat.color = t;\nnodemat.build(); // build shader\n```\n\nI am making an editor too, currently this would be the interface. Color is albedo and transform is the vertex position.\n![editor](https://cloud.githubusercontent.com/assets/502810/10898358/c6e88a52-81b0-11e5-9842-f3d0a684bbd4.jpg)\n\nI am also taking care that it can be used in a deferred shading. Now I will create reflection and refraction inputs.\n\nWill be sharing the news to the PR, suggestions, tests and enhancement are welcome :+1: \n"},{"labels":["enhancement"],"text":"Hey there - I ran the OBJ converter on a model and it's coming out full transparent (opacity 0.0) when the MTL file defines Ka as 1.0 1.0 1.0\n\nThe MTL\n\n```\nnewmtl Textured\nKa 1.000 1.000 1.000\nKd 1.000 1.000 1.000\nKs 0.000 0.000 0.000\nd 1.0\nillum 2\nmap_Ka texture.jpg\nmap_Kd texture.jpg\n```\n\nThe JSON. Also note the obsolete `colorAmbient` and `mapAmbient` properties\n\n```\n{\n\n    \"metadata\" :\n    {\n        \"formatVersion\" : 3.1,\n        \"sourceFile\"    : \"model.obj\",\n        \"generatedBy\"   : \"OBJConverter\",\n        \"vertices\"      : 7818,\n        \"faces\"         : 5196,\n        \"normals\"       : 7818,\n        \"colors\"        : 0,\n        \"uvs\"           : 15588,\n        \"materials\"     : 1\n    },\n\n    \"scale\" : 1.000000,\n\n    \"materials\": [  {\n    \"DbgColor\" : 15658734,\n    \"DbgIndex\" : 0,\n    \"DbgName\" : \"Textured\",\n    \"colorAmbient\" : [1.0, 1.0, 1.0],\n    \"colorDiffuse\" : [1.0, 1.0, 1.0],\n    \"colorSpecular\" : [0.0, 0.0, 0.0],\n    \"illumination\" : 2,\n    \"mapAmbient\" : \"texture.jpg\",\n    \"mapDiffuse\" : \"texture.jpg\",\n    \"opacity\" : 0.0,\n    \"transparent\" : true\n    }],\n```\n"},{"labels":["enhancement",null],"text":"So about a 6 months ago I proposed extending the OBJ/MTL format to include PBR parameters here -- it was partially encouraged by @meshula (Nick Porcino) who is part of the Apple 3D tools team:\n\nhttp://exocortex.com/blog/extending_wavefront_mtl_to_support_pbr\n\nI proposed this as a new quasi-standard to the guys at Allegorithmic who create Substance Painter, which is arguably the best material creation tool around.  One of their core devs just tweeted in support of it:\n\nhttps://twitter.com/JBouny/status/660392712177348608\n\nIt would be great if I could add this to ThreeJS's MTL loader to encourage further adoption of this extension.  This way ThreeJS can import PBR defined materials from any source that supports the MTL extension, rather than just those that support the specialized ThreeJS ObjectLoader format. \n"},{"labels":["enhancement"],"text":"I wish to detect when an object has been clicked. I am generating a page from the three.js editor. It is a brilliant environment.\n\nFollowing the advice from this post (https://mandemeskel.wordpress.com/2013/08/19/mouse-events-raycasting-with-three-js/)  I ended up with the following code. I have placed a comment where I am having a problem. \n\n```\nfunction mousedown( event ) {\n    var scene = this.parent;\n    var projector = new THREE.Projector();\n    var mouse_vector = new THREE.Vector3(),\n    mouse = { x: 0, y: 0, z: 1 },\n    ray = new THREE.Raycaster( new THREE.Vector3(0,0,0), new THREE.Vector3(0,0,0) ),\n    intersects = []; \n    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n    mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n    mouse_vector.set( mouse.x, mouse.y, mouse.z );\n\n    // How do I get the camera?\n    projector.unprojectVector( mouse_vector, camera );\n\n    var direction = mouse_vector.sub( camera.position ).normalize();\n\n    ray.set( camera.position, direction );\n\n    var object =  scene.getObjectByProperty( 'uuid', this.uuid, true );\n\n    intersects = ray.intersectObject( object );\n\n    if( intersects.length ) {\n            alert( \"hit\" );\n            event.preventDefault();  \n    }\n }\n```\n\nI have temporarily fixed the problem by modifying app.js in the published page. By moving the camera variable to be global I got around it, but it is obviously a fudge. Is there any way to access the camera generated by the editor without modifying app.js?\n\n```\nvar camera;\nvar APP = {\nPlayer: function () {\n```\n\n....\n"},{"labels":["enhancement"],"text":"Versions:\n**Three.js:** Updated from r71 to r73\n**Three.js blender exporter:** Updated from 1.4.0 to 1.5.0\n**Blender:** 2.76\n\nSince I updated the Blender exporter and three.js, i decided to reexport my models. I now get the following **error** after loading the models:\n\n``` javascript\nLoader.createMaterial: Unsupported colorAmbient [0.64, 0.64, 0.64]\nTHREE.Loader.createMaterial @ three.js:14584\nTHREE.Loader.initMaterials @ three.js:14377\nTHREE.JSONLoader.parse @ JSONLoader.js:538\n(anonymous function) @ JSONLoader.js:72\n(anonymous function) @ three.js:14683\n```\n\ncolorAmbient was present in my models before, and I never got this error in r71. I did a quick search in the r73 three.js code, but I didn't find a reference to it anywhere. The case statement where this error is generated from doesn't check for colorAmbient. As a test, I removed colorAmbient from the JSON files, and I didn't get the above error anymore.\n\nShould colorAmbient be handled in three.js, or should it not be generated and put into the JSON files at all from the blender exporter?\n"},{"labels":["enhancement"],"text":"Hello, i recently upgraded from R71 to R73 and am pretty happy with the evolution of Three.Audio\n\nI am currently developing some sort of game, and i need different type of sound capabilities\n A) ambient sound (no position, just some background)\n B) \"event\" sound, like footstep, punch... (once again, no position needed)\n C) positional sound (like a torch on a wall, a monster, a fountain...)\n\nThree.audio is not really useful for A and B, which is ok (but you loose some of the ease of use that provide Three.audio)\nC is clearly the intended use of Three.audio, with the use of the panner to position the sound seamlessly with position update from Three.\n\nbut i could see some enhancement (some easy, some more complex) added.\n1)  first and foremost, the ability to directly create a Three.Audio with a pre-loaded buffer, thus avoiding a request if the sound is already loaded. Particularly useful if a sound is used at a lot of different positions (like 'medieval' torch burning in my case for example).\n2) if you want to go further, and more powerful/generic, we could provide directly a way to connect an audio source/node to three.Audio (instead of a buffer or file), which would open all (or almost) the possibilities of the webAudio api while still benefiting from Three.Audio functionality\n3) maybe a way to add/remove filter in Three.Audio, instead of just setting one (which is already a big plus), but it would maybe become too complicated/cumbersome...\n\nwhat do other peoples think of this ? any idea ?\nif it is interesting and possible to have that in Three, i could try and do an implementation candidate for a pull request instead of just having my own code (case in point, if it is something needed and acceptable for Three).\n"},{"labels":["enhancement"],"text":"Hi,\nI want to use the wireframe property for a Material within a MultiMaterial to switch between the Mesh and Wireframe mode. With an old version of Three.js this worked fine (actually I dont know which version it was, I used the three.min.js file only, but I downloaded it arround March 2015). But I recently updated to a more recent version (0.72) and now not all vertices are shown anymore and some vertices are connected, which does not build any face.\nHere is a screenshot of the Mesh:\n![colored_mesh](https://cloud.githubusercontent.com/assets/1218265/10753305/7035f02a-7c90-11e5-8b70-08484fb24fd4.png)\n\nHere is a screenshot of the \"old\" working version:\n![old_revision](https://cloud.githubusercontent.com/assets/1218265/10753307/76a3829c-7c90-11e5-99c1-0921f7719e4f.png)\n\nAt least a screenshot of the current version, which does not work anymore:\n![current_revision](https://cloud.githubusercontent.com/assets/1218265/10753306/7685aa74-7c90-11e5-966a-4dafd5bd53b1.png)\n\nAs you can see, the upper part of the Wireframe is missing, as well as a small rectangular part on the right side.\n\nI used the following code to show the wireframe for all Materials for the MuliMaterial. The `object` Object is simply the Object which was added to the scene.\n\n``` javascript\nvar mtls = object.children[0].material.materials;\nfor (var i = 0; i < mtls.length; i++) {\n  var mtl = mtls[i];\n  mtl.wireframe = true;\n  mtl.vertexColors =  THREE.FaceColors;\n  mtl.wireframeLinewidth = 1;\n  mtl.map_orig = mtl.map;\n  mtl.normalMap = null;\n  mtl.bumpMap = null;\n  mtl.map = null;\n  mtl.needsUpdate = true;\n  mtl.color = new THREE.Color (0x123456); \n  console.log (mtl); \n}\n```\n\nNote: I really want to use the simple wireframe property and no Wireframe-Helper workarround. Hope anyone has an Idea. \n\nThanks in advance!\n"},{"labels":["enhancement"],"text":"There is also no obvious place make this happen in your own code, short of\nmodifying ObjectLoader.\n\nCurrently the code uses ImageLoader which doesn't handle compressed textures.\nA possible approach could be a new autodetecting image loader that could use\nImageLoader or DDSLoader (or PVR or ...) depending on type of image data encountered,\nand a corresponding change in parseTextures\nwhere it calls into the new loader for the Texture or CompressedTexture instance.\n"},{"labels":["enhancement"],"text":"This is just a suggestion. The size specified for a PointsMaterial should be multiplied by the devicePixelRatio. If not, the points appear to be half the size on retina displays. \n"},{"labels":["enhancement"],"text":"SSAO/SAO can be viewed as an equivalent to AOmaps and can be used to dim the indirect diffuse.  In order for this to work, we need to compute the SSAO pass before the beauty render and then pass in the SSAO map to each material so the material shaders can access it and dim their \"indirect diffuse\" contributions.\n\nThis should greatly increase realism without the need to precompute aoMaps on a per mesh basis -- which is just a lot of prep work.\n"},{"labels":["enhancement"],"text":"This was discussed here:\n\n> What we should do is have all shadow maps calculated first and their indices stored with the light structs that are passed to the renderer. Then as one is calculating each light contribution you check its shadow map to see if it is occluded, and that determines if you accumulate the lighting result or not. This is significantly more accurate and realistic than the darkening post-accumulation effect we currently do.\n\nhttps://github.com/mrdoob/three.js/issues/7377#issuecomment-149380501\n"},{"labels":["enhancement"],"text":"Thanks to @WestLangley's Physical material, we now need a proper prefiltered mipmapped radiance environment map generator to generate both the prefiltered specular cube maps as well as the prefiltered irradiance/diffuse cube maps.\n\nWe can use this tool to create them off line, but it is very inconvenient also this tool is slow:\n\nhttps://seblagarde.wordpress.com/2012/06/10/amd-cubemapgen-for-physically-based-rendering/\n\nIt would best if we could generate them using the GPU so that generate was fast.  If generation becomes less than 50ms on most hardware, we can use this live rather than downloading the PMREMs.  Having it run real-time would be incredibly useful for doing live LightProbes (that would be awesome!)\n\nRequirements:\n- Float32 input textures in a cube map pattern (which cube map pattern doesn't matter, because we can likely convert to any format from any format.)\n- Ability to generate guassian or cosine power filtered specular cube maps.\n- Ability to specify the set of filter sizes desired.  Sometimes people want a full mipmap full, other times they just want 4 levels.\n- Ability to create an irradiance map (for DiffuseLightProbes)\n- Output should also be in a cubemap float32 format (we can convert to any format afterwards.)\n- We'll want to have some utility methods to map one cubemap type to another - such as latlong to samplerCube, to 2D packed cubemap (i.e. cubeToUV), and eventually to the tetrahedral format.  This will be useful for both the input and output conversion. \n\nI highly recommend that we make the texture format RGBM encoding/decoding to be optional, because sometimes you want this and other times you do not.\n\nMy recommendation is that we use a samplerCube internally to this function to keep it simple.\n\nBTW PlayCanvas has one of these here:\n\nhttps://github.com/playcanvas/engine/blob/master/src/graphics/programlib/chunks/prefilterCubemap.frag\n\nDoes anyone want to try their hand at this?\n"},{"labels":["enhancement"],"text":"So here are the thigns that I noticed that can be improved on MeshPhysicalMaterial:\n- **(UPDATE: addressed in PR #7419)** The \"reflectivity\" parameter should control the created specularColor within the range of 0 to 0.08 or so (I'd prefer we use the upper bound of 0.18 that UE4 uses.)  If we did this we would not need to use it separately than specularColor in the SpecularLightProbe.  Remember that specularColor is F0, frontal reflectivity.\n- **(UPDATE: addressed in PR #7417)** Metalness = 1 should result in the tinting of the fresnel environment reflection to the base color -- the grazing angles should be the baseColor rather than white.  Right now we are not taking into awareness of Metalness in the BRDF_Specular_GGX_Environment.  This means that metals are reflected white on grazing angles, which is not physically correct. \n- Add the ability to be energy conserving.  The standard approach is to scale down the diffuseColor by ( 1 - average( specularColor ) ), where specularColor is after frenel modification.\n- **(UPDATE: addressed in PR #7421)** Need to add support for \"irradiance\", e.g. DiffuseLightProbe.\n- **(UPDATE: addressed in PR #7420)** When roughness is 0, the surface is not rough enough.  There is most likely a scaling bug in the code somewhere.\n- Create a SpecularLightProbe and DiffuseLightProbe structure that includes position -- this will allow for multiple to be situated in a level.\n- **(UPDATE: addressed in PR #7414)** We probably need to use a different approach than this for the querying of the different LOD levels of the cube map as it doesn't work on a lot of devices:\n\n```\nfloat bias = pow( roughness, 0.5 ) * 7.0; // from bhouston - there are other models for this calculation (roughness; not roughnesFactor)\nvec4 envMapColor = textureCubeLodEXT( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), bias );\n```\n\nI understand the best way is to encode into the alpha channel the LOD level and then use that to bias up or down as necessary.  It requires two queries but it should work on all devices that use cube maps.\n- We are relying upon seamless cubemaps, but actually that is against the WebGL 1.0 spec.  We should probably figure out a way to filter the cubemaps.  I know @WestLangley was looking into this.  could be a solution for the irradiance cubeMaps as well.  I created a bug for the PMREM generator here: https://github.com/mrdoob/three.js/issues/7402\n"},{"labels":["enhancement"],"text":"Hi,\n\nI noticed something when trying to remove everything from a threejs scene. I'd like to know if it's a bug, or an expected behaviour.\n\nConsider the following examples (that I quickly scribbled):\n\nhttp://jsfiddle.net/tmbkw2wy/3/\nhttp://jsfiddle.net/tmbkw2wy/4/\n\nThe first example releases resources as it's expected, while the second has the threejs' structures remain in heap memory even after they're disposed of. One can check this by taking heap snapshots (with chrome's dev tools for instance) after adding and removing the \"tubes\" once.\n\nIs this behaviour valid? Do I always have to render 1 more time after removing meshes from a scene, and disposing of their geometries+materials?\n\nCheers\n"},{"labels":["enhancement"],"text":"I found this article which explains how to solve the pixelating artefacts in derivative maps. In all honesty, it goes a bit over my head and I'm not sure if it can be implemented in glsl but I'm sharing here in case someone wants to give it a go.\n\nhttp://www.rorydriscoll.com/2012/01/11/derivative-maps/\n\nCurrent code:\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\n"},{"labels":["enhancement"],"text":"Lets say i have shader material, and some property that makes the same shader appear as either plastic, metal, or wood...\n\n``` javascript\n\n//magic parameter \nvar _staticUniform = {\n  type:'f',\n  value: 1\n};\n\nvar myPlasticRecipe = new THREE.ShaderMaterial({\n  uniforms:{\n    uniqueColor:{type:'c', value: new THREE.Color()},\n    staticMaterialProperty: _staticUniform\n  },\n  vertexShader: someVShader,\n  fragmentShader: someFShader\n}\n\nvar redPlasticMaterial = myPlasticRecipe.clone();\nredPlasticMaterial.uniforms.uniqueColor.value.setRGB(1,0,0);\n\nvar bluePlasticMaterial = myPlasticRecipe.clone();\nbluePlasticMaterial.uniforms.uniqueColor.value.setRGB(0,0,1);\n```\n\nI'd like to change the magic parameter and affect all the materials without manually keeping track of everything, but since material.clone() calls uniformsUtils.clone() and does a deep copy the reference to the static uniform is lost. \n\nNot sure if this would be useful to anyone else, but having uniformsUtil look up a (optional) type and then decide wether to copy or make a reference could be helpful. Sometimes textures can be shared etc. Any thoughts?\n"},{"labels":["enhancement"],"text":"Hello und a big ThankYouAll for three.js :)\n\nI'm trying to achieve beautiful shadowed render graphics und i have followed the recent changes in shadowmapping ( https://github.com/mrdoob/three.js/issues/7321 and https://github.com/mrdoob/three.js/issues/6420 ). Anyway, using the current master build, i still get shininess through shadow and shadow acne artifacts. This seems to be an issue with multiple lights (of type Spot / Directional)\n\nI've forked a jsfiddle from mrdoob with a spotlight and a directional light. Have a look at http://jsfiddle.net/wgwoqncy/4/\n\nSpotlights shining through shadows:\n\n![issue_shininess_throug_shadow](https://cloud.githubusercontent.com/assets/14586717/10541328/687088ec-7410-11e5-96a0-19b311aeda7d.jpg)\n\nShadow Acne with two SpotLights:\n\n![issue_shadow_acne_spotlights](https://cloud.githubusercontent.com/assets/14586717/10541345/960805c8-7410-11e5-85b7-8a926e892949.jpg)\n\nShadow Acne with a SpotLight and a DirectionalLight:\n\n![issue_shadow_acne_spot_and_dir](https://cloud.githubusercontent.com/assets/14586717/10541353/a6e631da-7410-11e5-9a66-531a080204f6.jpg)\n\nGreetings,\nThomas\n"},{"labels":["enhancement"],"text":"Can we have some function getObjectsByName which gives all the children having that name.\n"},{"labels":["enhancement"],"text":"Shader Graph by @unconed is pretty awesome.  It is a true GLSL shader graph with auto-inspect capabilities.\n\nHere is some example code:\n\nGLSL snippets:\n\n```\n<script type=\"application/x-glsl\" id=\"vertex\">\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  vColor = color;\n}\n</script>\n\n<script type=\"application/x-glsl\" id=\"getColor\">\nvarying vec3 vColor;\nvec3 getColor() {\n  return vColor * vColor * 2.0;\n}\n</script>\n\n<script type=\"application/x-glsl\" id=\"setColor\">\nvoid setColor(vec3 color) {\n  gl_FragColor = vec4(color, 1.0);\n}\n</script>\n```\n\nGraph creation and compilation to fragment and vertex shaders:\n\n```\n  // Fetch snippets above\n  var fetch = function (key) {\n    element = document.getElementById(key);\n    return element.textContent || element.innerText;\n  }\n\n  // Load ShaderGraph with given fetch function\n  // (can also pass in dictionary of snippets, or pass literal code to .pipe() below)\n  shadergraph = ShaderGraph(fetch, { autoInspect: true });\n\n  // Prepare new material (vertex + fragment shader)\n  material = shadergraph.material()\n\n  // Build vertex shader graph\n  material.vertex\n    .pipe('vertex')\n\n  // Build fragment shader graph\n  material.fragment\n    .pipe('getColor')\n    .pipe('setColor')\n\n  // Generate visualization of graph\n  visualize = shadergraph.visualize(material);\n\n  // Link both shaders and combine into a three.js style material\n  program = material.link()\n\n  // Show in document body\n  pre = document.querySelectorAll('pre');\n  pre[0].innerText = program.vertexShader;\n  pre[1].innerText = program.fragmentShader;\n```\n\nThis to me is the best way to create procedural inputs to materials right in GLSL -- instead of colors and textures, one could create these types of graphs.  I'd like to see it become part of ThreeJS, not core, because it is a huge block, but officially supported as the shader graph library.\n\nI'll try to make a concrete example of ShaderGraph2 usage for ThreeJS in the next week or so.\n"},{"labels":["enhancement"],"text":"Not really big deal, I guess. However, importing 30-something MB STL / exporting geometry fails with\n![screen shot 2015-10-13 at 12 31 57](https://cloud.githubusercontent.com/assets/242577/10453133/418b2fce-71aa-11e5-98dc-3835c1393b55.png)\n~~If I comment out~~\n~~`output = output.replace( /[\\n\\t]+([\\d\\.e\\-\\[\\]]+)/g, '$1' );`~~\nit works, I mean I get 200-something MB JSON ) Maybe it could be good idea to try-catch this line, and proceed with un-replaced string, if it fails?\n"},{"labels":["enhancement"],"text":"The skinning parameters for the material is not recognise at the creation of the material:\r\n\r\n```js\r\nnew THREE.MeshNormalMaterial({skinning:true}) //error\r\n```\r\n\r\nAnd if sneaky added after, then the shader can't compile : skinned is missing..\r\n\r\n```js\r\nnew THREE.MeshNormalMaterial({})\r\nmaterial.skinning = true\r\n//error when the shader is compile\r\n```\r\n\r\nIf the skinning option is not add, then the material show the normal but the skeleton is not apply.\r\n"},{"labels":["enhancement"],"text":"@MasterJames points out this issue in #7319:\n\n![screen shot 2015-10-09 at 11 56 05](https://cloud.githubusercontent.com/assets/97088/10398782/e3407508-6e7c-11e5-95d3-59bdd6d1b4ab.png)\nhttp://jsfiddle.net/xsgebh0b/5/\n\nOf course, this is a matter of setting `shadowDarkness` to `1` (instead of `0.5`).\n\n![screen shot 2015-10-09 at 11 56 45](https://cloud.githubusercontent.com/assets/97088/10398787/e71e849e-6e7c-11e5-9013-c0c3bd0ee743.png)\n\nWhich makes me think that we probably should remove `shadowDarkness` and simplify things. However, I notice that the shadow is 100% black even if the scene has an `AmbientLight` of `0x404040` and makes me think that the shadow step is in the wrong step.\n"},{"labels":["enhancement"],"text":"Hi everyone.\n\nNow the `Specular map` only controls the intensity of the specular highlights, it's will be great if we have `Specular color map` (http://wiki.polycount.com/wiki/Specular_color_map), one more step toward to the realistic material.\n\n> Specular Color Map\n> \n> A texture that controls the intensity/color of the specular highlights from real-time lights.\n> \n> Usually a specular map simply controls the brightness of the highlights, at a per-pixel level. If the shader supports RGB the specular map can be used to colorize specular highlights, useful for surfaces that have more complex reflective properties like metals, beetle shells, etc.\n"},{"labels":["enhancement"],"text":"I am discovering that with R72 you may include **_many**_ more vertices in a mesh than in previous releases and still maintain reasonable performance. (Yay!)\n\nWhile updating some of my older demos, I have come across a behavior I did not expect.\n\nSee this fiddle:\n\nhttp://jsfiddle.net/theo/gfhyvou3/\n\nIt seems that, in r72, when there are over 65,536 vertices in a sphere that a hole is created in the underside of the sphere and the extra vertices position themselves up that hole. This behavior does not seem to occur in previous releases.\n\nIs this an issue with the move to BufferGeometry? If so, should the 65,536 limit be documented? Or is this something that could be fixed?\n\nIn any case, thanks for this release that took its time just to be faster.\n"},{"labels":["enhancement"],"text":"hey guys, I am experiencing a weird behavior when I try to load a JSON file exported from Blender with multiple geometries.\n\nI use the following snippet to load the file\n\n``` Javascript\nvar loader = new THREE.JSONLoader();\nloader.load('xxx/example.js',  function ( geometry, materials ) {\n                            var material = new THREE.MeshFaceMaterial( materials );\n                            var object = new THREE.Mesh( geometry, material );\n                            scene.add( object );\n                        }\n                );\n```\n\nFor some reason the loader is trying to load a single geometry and therefore no vertices/normals/faces are found:\n\n```\nUncaught TypeError: Cannot read property 'length' of undefined - three.js:13232\n```\n\nAnyone got an idea how to solve this? Thx.\n\nThat's a part of the JSON resouce I use:\n\n``` JSON\n\"geometries\": [{\n        \"data\": {\n            \"bones\": [],\n            \"normals\": [0.692862,0.70983,-0.126621,0.610218,0.785577,-0.102115,0.610218,0.785577,0.102115,0.692862,0.70983,0.126621,0.700339,0.701346,-0.132633,0.700339,0.701346,0.132603,0.777093,0.618854,-0.114383,0.777093,0.618854,0.114353,0.251442,0.965819,-0.062746,0.251442,0.965819,0.062746,0.540269,0.683218,0.491195,0.616932,0.618488,0.486648,0.639943,0.58153,0.502243,0.694784,0.485855,0.530229,0.97354,0.213965,0.08005,0.97351,0.214026,-0.08002,0.694754,0.485885,-0.530259,0.639943,0.58153,-0.502243,0.616932,0.618488,-0.486648,0.540269,0.683218,-0.491195,0.395886,0.813654,-0.425642,0.254097,0.470504,-0.844997,0.025575,0.700522,-0.713126,0.275216,0.93112,-0.239265,-0.166021,0.902646,-0.397015,-0.217536,0.970794,-0.100955,-0.217505,0.970794,0.100925,0.275216,0.93112,0.239265,-0.16599,0.902646,0.397015,0.395856,0.813685,0.425642,0.025575,0.700522,0.713126,0.254097,0.470504,0.844997,0.373302,0.354534,0.857265,0.410535,0.289804,0.864528,0.488937,0.147313,0.859767,0.812952,0.337046,0.474807,0.666128,-0.089084,0.740471,0.932035,0.224799,0.284097,0.854244,-0.281899,0.436781,0.936155,-0.330943,0.118412,0.936186,-0.330943,-0.118412,0.932035,0.22486,-0.284066,0.854244,-0.281869,-0.43675,0.812952,0.337077,-0.474807,0.666128,-0.089022,-0.740471,0.488876,0.147374,-0.859798,0.410535,0.289804,-0.864528,0.373302,0.354534,-0.857265,-0.016755,0.226295,-0.973907,-0.264138,0.508438,-0.819575,-0.475723,0.751518,-0.457015,-0.542283,0.831996,-0.116947,-0.542283,0.831996,0.116947,-0.475692,0.751518,0.457015,-0.264138,0.508408,0.819575,-0.016755,0.226295,0.973907,0.11124,0.080477,0.990509,0.160497,0.01355,0.986938,0.26191,-0.124241,0.95703,0.459456,-0.368603,0.808069,0.652791,-0.589099,0.476211,0.731803,-0.668905,0.130406,0.731803,-0.668905,-0.130436,0.652791,-0.589099,-0.476211,0.459456,-0.368572,-0.808069,0.261879,-0.12421,-0.95706,0.160497,0.01355,-0.986938,0.11124,0.080447,-0.990509,-0.205817,0.034211,-0.977966,-0.450697,0.329234,-0.829707,-0.663747,0.58507,-0.465957,-0.734275,0.668203,-0.119541,-0.734306,0.668172,0.119541,-0.663747,0.58504,0.465957,-0.450697,0.329234,0.829707,-0.205878,0.034242,0.977966,-0.080325,-0.116611,0.989898,-0.022736,-0.174657,0.984344,0.094363,-0.293405,0.951292,0.298502,-0.522416,0.7987,0.479965,-0.741966,0.468062,0.54326,-0.829737,0.127812,0.54329,-0.829737,-0.127842,0.479965,-0.741966,-0.468062,0.298502,-0.522446,-0.7987,0.094363,-0.293405,-0.951292,-0.022767,-0.174627,-0.984344,-0.080294,-0.116611,-0.989898,-0.453749,-0.247749,-0.855953,-0.672597,0.02176,-0.739677,-0.870174,0.25605,-0.420942,-0.939604,0.324595,-0.108249,-0.939634,0.324595,0.108219,-0.870174,0.25602,0.420972,-0.672567,0.02176,0.739677,-0.45378,-0.247719,0.855953,-0.345927,-0.384991,0.855617,-0.287637,-0.427015,0.857234,-0.163854,-0.512375,0.842952,0.034425,-0.70043,0.712882,0.188971,-0.890652,0.413465,0.223457,-0.968352,0.111057,0.223457,-0.968352,-0.111057,0.188971,-0.890652,-0.413495,0.034455,-0.7004,-0.712882,-0.163823,-0.512375,-0.842982,-0.287637,-0.427015,-0.857265,-0.345927,-0.38496,-0.855617,-0.667623,-0.551805,-0.499741,-0.80575,-0.391034,-0.444777,-0.932859,-0.252663,-0.256661,-0.972228,-0.223457,-0.069155,-0.972228,-0.223457,0.069155,-0.93289,-0.252632,0.25663,-0.80575,-0.391003,0.444777,-0.667623,-0.551775,0.499771,-0.600726,-0.635212,0.485397,-0.565477,-0.658589,0.496445,-0.478957,-0.710624,0.515305,-0.346965,-0.821741,0.45201,-0.250679,-0.931303,0.264199,-0.243416,-0.967193,0.07242,-0.243416,-0.967193,-0.07242,-0.250679,-0.931303,-0.264229,-0.346934,-0.821711,-0.452071,-0.478957,-0.710624,-0.515336,-0.565477,-0.658589,-0.496414,-0.600726,-0.635212,-0.485366,-0.77102,-0.628468,-0.102542,-0.77102,-0.628468,0.102542,-0.688528,-0.714072,0.126438,-0.679952,-0.721305,0.131748,-0.600726,-0.791406,0.112857,-0.600757,-0.791406,-0.112857,-0.679952,-0.721305,-0.131718,-0.688498,-0.714103,-0.126438,0.761864,0.288369,0.579974,0.289682,-0.765282,0.574786,0.289682,-0.765282,-0.574786,0.761864,0.288369,-0.579974,-0.500015,0.656056,-0.565264,-0.500015,0.656056,0.565264,0.640126,0.4897,0.591937,0.640126,0.4897,-0.591937,-0.393841,-0.617115,0.681173,0.364757,0.571551,0.735008,-0.532792,-0.503739,0.679952,0.491592,0.464736,0.736412,-0.644429,-0.352123,0.678701,0.592273,0.323618,0.737846,-0.715415,-0.169378,0.677816,0.655629,0.155217,0.738914,-0.717856,-0.031587,0.695456,0.694571,0.0318,0.71868,0.364757,0.571551,-0.735008,0.491562,0.464736,-0.736412,0.592273,0.323618,-0.737846,0.655629,0.155217,-0.738914,0.694571,0.0318,-0.71868,-0.393841,-0.617115,-0.681173,-0.532792,-0.503739,-0.679952,-0.644429,-0.352123,-0.678701,-0.715415,-0.169378,-0.677816,-0.717826,-0.031587,-0.695456],\n            \"colors\": [],\n            \"uvs\": [],\n            \"name\": \"Untitled.099Geometry\",\n            \"vertices\": [-73.1453,-9.01174,45.837,-73.1453,-9.01174,50.4823,-72.0285,-10.095,50.5088,-72.0285,-10.095,45.8106,-70.9117,-11.1783,50.4108,-70.9117,-11.1783,45.9086,-69.7948,-12.2616,50.1885,-69.7948,-12.2616,46.1309,-73.1922,-8.98525,45.84,-73.1922,-8.98525,50.4794,-73.1558,-9.02057,50.5364,-72.0389,-10.1039,50.5634,-70.9221,-11.1871,50.4631,-69.8053,-12.2704,50.2356,-69.7689,-12.3057,50.1791,-69.7689,-12.3057,46.1402,-69.8053,-12.2704,46.0837,-70.9221,-11.1871,45.8562,-72.0389,-10.1039,45.756,-73.1558,-9.02057,45.783,-73.1843,-9.0447,45.7434,-73.2159,-9.0141,45.7586,-73.174,-9.00291,45.7917,-73.239,-8.99171,45.7948,-73.1873,-8.98998,45.8126,-73.2474,-8.98351,45.8422,-73.2474,-8.98351,50.4771,-73.239,-8.99171,50.5246,-73.1873,-8.98998,50.5068,-73.2159,-9.0141,50.5607,-73.174,-9.00291,50.5276,-73.1843,-9.0447,50.5759,-72.0675,-10.128,50.6034,-70.9507,-11.2113,50.5015,-69.8339,-12.2945,50.2702,-69.8023,-12.3251,50.2509,-69.7871,-12.2881,50.2246,-69.7793,-12.3475,50.215,-69.7738,-12.301,50.2039,-69.7708,-12.3557,50.1722,-69.7708,-12.3557,46.1472,-69.7793,-12.3475,46.1044,-69.7738,-12.301,46.1155,-69.8023,-12.3251,46.0685,-69.7871,-12.2881,46.0948,-69.8339,-12.2945,46.0492,-70.9507,-11.2113,45.8179,-72.0675,-10.128,45.716,-73.2234,-9.07764,45.729,-73.2598,-9.04232,45.7465,-73.2865,-9.01646,45.7883,-73.2962,-9.00699,45.843,-73.2962,-9.00699,50.4763,-73.2865,-9.01646,50.531,-73.2598,-9.04232,50.5728,-73.2234,-9.07764,50.5904,-72.1066,-10.1609,50.618,-70.9897,-11.2442,50.5155,-69.8729,-12.3275,50.2828,-69.8365,-12.3628,50.2605,-69.8098,-12.3887,50.219,-69.8001,-12.3981,50.1696,-69.8001,-12.3981,46.1497,-69.8098,-12.3887,46.1004,-69.8365,-12.3628,46.0589,-69.8729,-12.3275,46.0365,-70.9897,-11.2442,45.8039,-72.1066,-10.1609,45.7013,-73.4577,-9.27534,45.729,-73.4941,-9.24001,45.7465,-73.5207,-9.21416,45.7883,-73.5305,-9.20469,45.843,-73.5305,-9.20469,50.4763,-73.5207,-9.21416,50.531,-73.4941,-9.24001,50.5728,-73.4577,-9.27534,50.5904,-72.3408,-10.3586,50.618,-71.224,-11.4419,50.5155,-70.1072,-12.5252,50.2828,-70.0708,-12.5605,50.2605,-70.0441,-12.5864,50.219,-70.0343,-12.5958,50.1696,-70.0343,-12.5958,46.1497,-70.0441,-12.5864,46.1004,-70.0708,-12.5605,46.0589,-70.1072,-12.5252,46.0365,-71.224,-11.4419,45.8039,-72.3408,-10.3586,45.7013,-73.4967,-9.30829,45.7434,-73.5282,-9.2777,45.7586,-73.5513,-9.2553,45.7948,-73.5598,-9.2471,45.8422,-73.5598,-9.2471,50.4771,-73.5513,-9.2553,50.5246,-73.5282,-9.2777,50.5607,-73.4967,-9.30829,50.5759,-72.3799,-10.3916,50.6034,-71.263,-11.4748,50.5015,-70.1462,-12.5581,50.2702,-70.1147,-12.5887,50.2509,-70.0916,-12.6111,50.215,-70.0831,-12.6193,50.1722,-70.0831,-12.6193,46.1472,-70.0916,-12.6111,46.1044,-70.1147,-12.5887,46.0685,-70.1462,-12.5581,46.0492,-71.263,-11.4748,45.8179,-72.3799,-10.3916,45.716,-73.5253,-9.33241,45.783,-73.5435,-9.31475,45.7917,-73.5568,-9.30182,45.8126,-73.5617,-9.29708,45.84,-73.5617,-9.29708,50.4794,-73.5568,-9.30182,50.5068,-73.5435,-9.31475,50.5276,-73.5253,-9.33241,50.5364,-72.4085,-10.4157,50.5634,-71.2916,-11.499,50.4631,-70.1748,-12.5822,50.2356,-70.1566,-12.5999,50.2246,-70.1433,-12.6128,50.2039,-70.1384,-12.6176,50.1791,-70.1384,-12.6176,46.1402,-70.1433,-12.6128,46.1155,-70.1566,-12.5999,46.0948,-70.1748,-12.5822,46.0837,-71.2916,-11.499,45.8562,-72.4085,-10.4157,45.756,-73.5357,-9.34124,45.837,-73.5357,-9.34124,50.4823,-72.4189,-10.4245,50.5088,-71.3021,-11.5078,50.4108,-70.1853,-12.5911,50.1885,-70.1853,-12.5911,46.1309,-71.3021,-11.5078,45.9086,-72.4189,-10.4245,45.8106,-72.5969,-11.4479,48.9058,-72.5969,-11.4479,47.8727,-72.1405,-10.3646,47.8727,-72.1405,-10.3646,48.9058,-79.0123,11.1316,48.9058,-77.7828,10.8049,48.9058,-77.7828,10.8049,47.8727,-79.0123,11.1316,47.8727,-74.0848,-9.4295,48.9058,-74.822,-10.3778,48.9058,-75.7149,-8.09013,48.9058,-76.6874,-8.84508,48.9058,-76.9305,-6.42894,48.9058,-78.0784,-6.94408,48.9058,-77.6567,-4.54815,48.9058,-78.9095,-4.79178,48.9058,-77.8488,-2.5635,48.9058,-79.1294,-2.52063,48.9058,-74.0848,-9.4295,47.8727,-75.7149,-8.09013,47.8727,-76.9305,-6.42894,47.8727,-77.6567,-4.54815,47.8727,-77.8488,-2.5635,47.8727,-74.822,-10.3778,47.8727,-76.6874,-8.84508,47.8727,-78.0784,-6.94408,47.8727,-78.9095,-4.79178,47.8727,-79.1294,-2.52063,47.8727],\n            \"metadata\": {\n                \"bones\": 0,\n                \"normals\": 164,\n                \"colors\": 0,\n                \"uvs\": 0,\n                \"vertices\": 164,\n                \"materials\": 1,\n                \"generator\": \"io_three\",\n                \"faces\": 172,\n                \"version\": 3\n            },\n            \"faces\": [35,3,0,1,2,0,0,1,2,3,35,5,3,2,4,0,4,0,3,5,35,7,5,4,6,0,6,4,5,7,35,1,0,8,9,0,2,1,8,9,35,2,1,10,11,0,3,2,10,11,35,4,2,11,12,0,5,3,11,12,35,6,4,12,13,0,7,5,12,13,35,7,6,14,15,0,6,7,14,15,35,5,7,16,17,0,4,6,16,17,35,3,5,17,18,0,0,4,17,18,35,0,3,18,19,0,1,0,18,19,35,22,19,20,21,0,20,19,21,22,35,24,22,21,23,0,23,20,22,24,35,8,24,23,25,0,8,23,24,25,35,9,8,25,26,0,9,8,25,26,35,28,9,26,27,0,27,9,26,28,35,30,28,27,29,0,29,27,28,30,35,10,30,29,31,0,10,29,30,31,35,11,10,31,32,0,11,10,31,32,35,12,11,32,33,0,12,11,32,33,35,13,12,33,34,0,13,12,33,34,35,36,13,34,35,0,35,13,34,36,35,38,36,35,37,0,37,35,36,38,35,14,38,37,39,0,14,37,38,39,35,15,14,39,40,0,15,14,39,40,35,42,15,40,41,0,41,15,40,42,35,44,42,41,43,0,43,41,42,44,35,16,44,43,45,0,16,43,44,45,35,17,16,45,46,0,17,16,45,46,35,18,17,46,47,0,18,17,46,47,35,19,18,47,20,0,19,18,47,21,35,21,20,48,49,0,22,21,48,49,35,23,21,49,50,0,24,22,49,50,35,25,23,50,51,0,25,24,50,51,35,26,25,51,52,0,26,25,51,52,35,27,26,52,53,0,28,26,52,53,35,29,27,53,54,0,30,28,53,54,35,31,29,54,55,0,31,30,54,55,35,32,31,55,56,0,32,31,55,56,35,33,32,56,57,0,33,32,56,57,35,34,33,57,58,0,34,33,57,58,35,35,34,58,59,0,36,34,58,59,35,37,35,59,60,0,38,36,59,60,35,39,37,60,61,0,39,38,60,61,35,40,39,61,62,0,40,39,61,62,35,41,40,62,63,0,42,40,62,63,35,43,41,63,64,0,44,42,63,64,35,45,43,64,65,0,45,44,64,65,35,46,45,65,66,0,46,45,65,66,35,47,46,66,67,0,47,46,66,67,35,20,47,67,48,0,21,47,67,48,35,49,48,68,69,0,49,48,68,69,35,50,49,69,70,0,50,49,69,70,35,51,50,70,71,0,51,50,70,71,35,52,51,71,72,0,52,51,71,72,35,53,52,72,73,0,53,52,72,73,35,54,53,73,74,0,54,53,73,74,35,55,54,74,75,0,55,54,74,75,35,56,55,75,76,0,56,55,75,76,35,57,56,76,77,0,57,56,76,77,35,58,57,77,78,0,58,57,77,78,35,59,58,78,79,0,59,58,78,79,35,60,59,79,80,0,60,59,79,80,35,61,60,80,81,0,61,60,80,81,35,62,61,81,82,0,62,61,81,82,35,63,62,82,83,0,63,62,82,83,35,64,63,83,84,0,64,63,83,84,35,65,64,84,85,0,65,64,84,85,35,66,65,85,86,0,66,65,85,86,35,67,66,86,87,0,67,66,86,87,35,48,67,87,68,0,48,67,87,68,35,69,68,88,89,0,69,68,88,89,35,70,69,89,90,0,70,69,89,90,35,71,70,90,91,0,71,70,90,91,35,72,71,91,92,0,72,71,91,92,35,73,72,92,93,0,73,72,92,93,35,74,73,93,94,0,74,73,93,94,35,75,74,94,95,0,75,74,94,95,35,76,75,95,96,0,76,75,95,96,35,77,76,96,97,0,77,76,96,97,35,78,77,97,98,0,78,77,97,98,35,79,78,98,99,0,79,78,98,99,35,80,79,99,100,0,80,79,99,100,35,81,80,100,101,0,81,80,100,101,35,82,81,101,102,0,82,81,101,102,35,83,82,102,103,0,83,82,102,103,35,84,83,103,104,0,84,83,103,104,35,85,84,104,105,0,85,84,104,105,35,86,85,105,106,0,86,85,105,106,35,87,86,106,107,0,87,86,106,107,35,68,87,107,88,0,68,87,107,88,35,89,88,108,109,0,89,88,108,109,35,90,89,109,110,0,90,89,109,110,35,91,90,110,111,0,91,90,110,111,35,92,91,111,112,0,92,91,111,112,35,93,92,112,113,0,93,92,112,113,35,94,93,113,114,0,94,93,113,114,35,95,94,114,115,0,95,94,114,115,35,96,95,115,116,0,96,95,115,116,35,97,96,116,117,0,97,96,116,117,35,98,97,117,118,0,98,97,117,118,35,99,98,118,119,0,99,98,118,119,35,100,99,119,120,0,100,99,119,120,35,101,100,120,121,0,101,100,120,121,35,102,101,121,122,0,102,101,121,122,35,103,102,122,123,0,103,102,122,123,35,104,103,123,124,0,104,103,123,124,35,105,104,124,125,0,105,104,124,125,35,106,105,125,126,0,106,105,125,126,35,107,106,126,127,0,107,106,126,127,35,88,107,127,108,0,88,107,127,108,35,112,111,128,129,0,112,111,128,129,35,116,115,129,130,0,116,115,129,130,35,117,116,130,131,0,117,116,130,131,35,118,117,131,132,0,118,117,131,132,35,122,121,132,133,0,122,121,132,133,35,126,125,133,134,0,126,125,133,134,35,127,126,134,135,0,127,126,134,135,35,108,127,135,128,0,108,127,135,128,35,134,133,132,131,0,134,133,132,131,35,135,134,131,130,0,135,134,131,130,35,128,135,130,129,0,128,135,130,129,35,139,136,137,138,0,136,137,138,139,35,143,140,141,142,0,140,141,142,143,35,145,136,139,144,0,144,137,136,145,35,147,145,144,146,0,146,144,145,147,35,149,147,146,148,0,148,146,147,149,35,151,149,148,150,0,150,148,149,151,35,153,151,150,152,0,152,150,151,153,35,140,153,152,141,0,141,152,153,142,35,144,139,138,154,0,145,136,139,154,35,146,144,154,155,0,147,145,154,155,35,148,146,155,156,0,149,147,155,156,35,150,148,156,157,0,151,149,156,157,35,152,150,157,158,0,153,151,157,158,35,141,152,158,142,0,142,153,158,143,35,154,138,137,159,0,154,139,138,159,35,155,154,159,160,0,155,154,159,160,35,156,155,160,161,0,156,155,160,161,35,157,156,161,162,0,157,156,161,162,35,158,157,162,163,0,158,157,162,163,35,142,158,163,143,0,143,158,163,140,35,159,137,136,145,0,159,138,137,144,35,160,159,145,147,0,160,159,144,146,35,161,160,147,149,0,161,160,146,148,35,162,161,149,151,0,162,161,148,150,35,163,162,151,153,0,163,162,150,152,35,143,163,153,140,0,140,163,152,141,34,0,19,22,0,1,19,20,34,0,22,24,0,1,20,23,34,0,24,8,0,1,23,8,34,1,9,28,0,2,9,27,34,1,28,30,0,2,27,29,34,1,30,10,0,2,29,10,34,6,13,36,0,7,13,35,34,6,36,38,0,7,35,37,34,6,38,14,0,7,37,14,34,7,15,42,0,6,15,41,34,7,42,44,0,6,41,43,34,7,44,16,0,6,43,16,34,108,128,109,0,108,128,109,34,109,128,110,0,109,128,110,34,110,128,111,0,110,128,111,34,112,129,113,0,112,129,113,34,113,129,114,0,113,129,114,34,114,129,115,0,114,129,115,34,118,132,119,0,118,132,119,34,119,132,120,0,119,132,120,34,120,132,121,0,120,132,121,34,122,133,123,0,122,133,123,34,123,133,124,0,123,133,124,34,124,133,125,0,124,133,125]\n        },\n        \"type\": \"Geometry\",\n        \"uuid\": \"72F37ECD-6C01-3FEF-98A8-C614492455B8\",\n        \"materials\": [{\n            \"transparent\": false,\n            \"depthTest\": true,\n            \"colorSpecular\": [0.78,0.78,0.78],\n            \"specularCoef\": 72,\n            \"colorEmissive\": [0,0,0],\n            \"colorDiffuse\": [0,0,0],\n            \"visible\": true,\n            \"shading\": \"phong\",\n            \"DbgIndex\": 0,\n            \"colorAmbient\": [0,0,0],\n            \"blending\": \"NormalBlending\",\n            \"wireframe\": false,\n            \"DbgName\": \"black\",\n            \"depthWrite\": true,\n            \"DbgColor\": 15658734,\n            \"vertexColors\": false,\n            \"opacity\": 1\n        }]\n    },{\n        \"data\": {\n            \"bones\": [],\n            \"normals\": [0.747551,-0.556444,-0.362621,0.873623,0.195959,-0.445326,0.983398,-0.08179,-0.16184,0.734947,-0.596881,-0.321787,0.839473,0.350108,-0.41554,0.867855,0.460219,-0.186987,0.890622,0.225776,-0.394696,0.865932,0.374554,-0.3314,0.802393,-0.502213,-0.322306,0.951231,0.063997,-0.301675,0.910367,0.138127,-0.389996,0.920164,0.183538,-0.345775,0.957823,0.136967,-0.252541,0.878475,0.178411,-0.44319,0.877499,0.186682,-0.441664,0.893765,0.150945,-0.422346,0.875698,0.175573,-0.449721,0.922391,0.105411,-0.371563,0.792261,0.496689,-0.35435,0.531724,0.813105,-0.236885,0.563616,0.805506,-0.182806,0.825312,0.526444,-0.204047,0.258553,0.958464,-0.120334,0.281655,0.949736,-0.13654,0.516404,0.841578,-0.158177,0.224403,0.971679,-0.073672,0.81634,0.512528,-0.266152,0.909696,0.310862,-0.275307,0.920896,0.300516,-0.248238,0.886135,0.340251,-0.314585,0.884457,0.313669,-0.345408,0.853694,0.481307,-0.198737,0.902005,0.148991,-0.405164,0.877499,0.336375,-0.341807,0.872311,0.212745,-0.440199,0.525437,0.091128,-0.845912,0.509781,0.06415,-0.857875,0.089633,-0.207068,-0.974181,0.100681,-0.193213,-0.975951,0.502426,0.028077,-0.864132,0.078219,-0.23011,-0.97,0.802362,0.325571,-0.500168,0.809809,0.292917,-0.508286,0.80343,0.350383,-0.481338,0.828822,0.50441,-0.241981,0.492721,0.864345,-0.100497,0.473922,0.859584,0.190924,0.833216,0.523362,-0.17835,0.077517,0.996551,0.029267,0.073794,0.930815,0.357891,0.51558,0.824335,-0.23365,0.083193,0.99472,-0.059603,0.82226,0.453444,-0.343852,0.868923,0.481521,-0.114292,0.547258,0.690085,0.473556,0.63213,0.547014,0.548753,0.925535,0.373882,-0.059908,0.065279,0.660756,0.747734,0.055879,0.467269,0.882321,0.926084,-0.375378,0.037935,0.936216,-0.323557,0.137028,0.354015,-0.718802,0.598315,0.418073,-0.635212,0.649373,0.867122,-0.497635,-0.019959,0.305704,-0.897488,0.317881,0.500534,-0.0094,-0.865658,0.499863,0.000732,-0.866085,0.816584,0.266152,-0.512131,0.820124,0.250832,-0.514237,0.07123,-0.247566,-0.966216,0.070254,-0.251106,-0.965392,0.980926,0.084567,-0.174841,0.785028,-0.614063,-0.081393,0.125065,-0.989746,0.068941,0.741691,-0.661336,-0.111759,0.062014,-0.998047,0.007324,0.981231,0.110263,-0.158177,0.977966,0.193274,-0.078646,0.706534,0.385784,0.593219,0.754723,0.328623,0.567766,0.048616,0.372723,0.926633,0.049989,0.33903,0.939421,0.654653,0.443312,0.612262,0.049165,0.42143,0.905515,0.971221,0.236457,-0.028291,0.052034,-0.221351,-0.973785,0.055666,-0.226325,-0.972442,0.049898,-0.227882,-0.972381,0.044527,-0.22541,-0.973235,0.058687,-0.240638,-0.96881,0.055391,-0.239601,-0.969268,0.063753,0.61034,-0.789544,0.026154,0.628956,-0.776971,0.052095,0.996216,-0.069185,0.07886,0.993286,-0.084292,0.022309,0.648762,-0.760613,0.047792,0.996582,-0.067049,0.01236,-0.186346,-0.982391,-0.001251,-0.156652,-0.98764,0.060793,-0.183966,-0.981017,0.059542,0.9288,0.365673,0.055422,0.997742,0.037233,0.052461,0.998321,0.024079,0.056185,0.951659,0.30192,0.057558,0.997131,-0.048677,0.053987,0.997284,-0.049471,0.063845,0.46971,0.88049,0.064974,0.658376,0.74984,0.063753,0.70278,0.708518,0.065371,0.473464,0.878353,0.03534,-0.266457,-0.963164,0.070254,-0.972198,-0.223304,0.052919,-0.887387,-0.457961,0.023469,-0.270699,-0.962371,0.055025,-0.65154,0.756584,0.033357,-0.651295,0.758049,0.151463,-0.957183,-0.246651,0.115299,-0.24012,-0.963866,0.073794,-0.736869,0.671957,0.044984,-0.732414,0.679342,0.084597,-0.926115,0.367565,0.052187,-0.918882,0.391034,0.059999,-0.255959,-0.964812,0.059633,-0.253334,-0.965514,0.057863,-0.253121,-0.965667,0.058504,-0.256874,-0.96466,0.052339,-0.995086,0.083712,0.042024,-0.994873,0.09183,0.034394,-0.999329,0.01236,0.030824,-0.99942,0.013031,0.046785,0.372265,0.926939,0.046693,0.338755,0.939695,0.046541,0.37669,0.925138,0.046236,0.33845,0.939817,0.05005,0.421308,0.905515,0.050661,0.422926,0.904721,0.813288,0.371166,-0.448012,0.521897,0.792261,-0.316019,0.084323,0.993194,-0.080142,0.517624,0.788324,-0.332499,0.806482,0.351634,-0.475265,0.052187,0.996551,-0.064394,0.056581,0.996246,-0.065127,0.117435,-0.238533,-0.963988,0.551622,-0.065401,-0.831507,0.566668,-0.07416,-0.820582,0.843104,0.116977,-0.524827,0.863643,0.094821,-0.495071,0.525956,-0.058168,-0.848476,0.830042,0.135929,-0.540819,0.106998,-0.236244,-0.965758,0.023286,-0.269295,-0.962737,0.035554,-0.264565,-0.963683,0.036409,-0.260292,-0.964812,0.023957,-0.26484,-0.963988,0.062929,-0.538682,0.840144,0.066683,-0.56737,0.820734,0.09595,-0.570299,0.81579,0.854244,0.345073,-0.388775,0.853725,0.331187,-0.401746,0.885525,0.428449,-0.17951,0.885006,0.432081,-0.173284,0.531449,0.839808,-0.110569,0.205206,0.977813,-0.041505,0.584796,0.782159,-0.214942,0.201941,0.978607,-0.039003,0.495102,0.004334,-0.868801,0.482223,-0.020722,-0.87579,0.066073,-0.19306,-0.978942,0.06534,-0.189276,-0.979736,0.505478,-0.051332,-0.861293,0.074648,-0.231178,-0.970031,0.824702,0.193335,-0.531419,0.82931,0.165044,-0.53383,0.829157,0.209357,-0.518265,0.651631,0.475539,0.590899,0.052675,0.443525,0.894681,0.960875,0.275369,-0.029359,0.056032,-0.192969,-0.979583,0.054415,-0.196966,-0.978881,0.052767,-0.191565,-0.980041,0.055055,-0.19837,-0.978545,0.05118,-0.239814,-0.969451,0.048311,-0.240272,-0.969481,0.05768,0.444411,0.893948,0.059145,0.445906,0.893094,0.857112,0.301767,-0.417432,0.867428,0.328166,-0.373974,0.869228,0.203955,-0.450331,0.868221,0.200751,-0.453688,0.919279,0.328288,-0.217048,0.69805,0.66097,-0.275246,0.78048,0.604968,-0.157506,0.952879,0.244301,-0.179693,0.963103,0.20719,-0.171728,0.784265,0.596942,-0.169012,0.926511,0.248573,-0.282388,0.975127,0.165563,-0.14716,0.972594,0.180822,-0.146092,0.883785,0.013123,-0.467635,0.884396,0.043916,-0.464614,0.964568,0.222633,-0.141514,0.931455,0.325694,-0.162145,0.868282,0.139744,-0.475936,0.859645,0.209296,-0.466018,0.882748,0.426191,-0.197638,0.867122,0.441939,-0.229652,0.902402,0.095798,-0.420087,0.935667,-0.131169,-0.327525,0.877224,0.39967,-0.265938,0.867885,0.341441,-0.360729,0.909665,-0.211005,-0.357677,0.858852,-0.270943,-0.434645,0.851497,0.246834,-0.4626,0.853542,0.224433,-0.470168,0.886715,-0.261788,-0.380963,0.836085,0.342936,-0.428175,0.803827,0.348857,-0.481735,0.833918,0.398236,-0.382031,0.949736,0.222846,-0.219794,0.840785,0.5309,0.105686,0.881954,0.467422,0.060091,0.854213,0.314493,-0.413984,0.84582,0.339946,-0.411084,0.871609,0.485977,0.063906,0.859096,0.299295,-0.415113,0.888974,0.453719,0.0618,0.020814,0.999695,-0.0112,0.276833,0.952879,-0.123844,0.390728,0.906705,-0.158605,0.014924,0.995453,0.093844,0.756554,0.542314,-0.365368,0.835292,0.386822,-0.390637,0.372112,0.923399,-0.094058,0.021821,0.999664,-0.012391,0.019654,0.999756,-0.007355,0.359874,0.929594,-0.07944,0.308573,0.946776,-0.091403,0.015259,0.998688,-0.048524,0.014069,0.514573,-0.857295,0.540544,0.542802,-0.64275,0.390973,-0.292489,-0.872677,0.003021,-0.407361,-0.913236,0.002503,-0.431654,-0.902005,0.399548,-0.292489,-0.86877,0.411145,-0.250618,-0.8764,0.002289,-0.449385,-0.893307,0.000122,-0.638264,-0.769799,0.438673,-0.36729,-0.820124,0.439863,-0.7481,-0.496811,-0.003876,-0.922697,-0.385449,-0.006226,-0.998535,-0.053194,0.408216,-0.894345,-0.182867,0.39256,-0.90817,-0.145116,-0.006867,-0.999603,0.026185,-0.00412,-0.998688,0.050783,0.361736,-0.91998,-0.150792,0.386517,-0.921232,-0.043367,0.008271,-0.978576,0.205603,0.006012,-0.459426,0.88818,0.622028,-0.312265,0.718009,0.370861,0.434095,0.820978,-0.003357,0.24781,0.96878,-0.003357,0.280221,0.959899,0.404004,0.442793,0.800409,0.398328,0.442701,0.803308,-0.00351,0.268532,0.963256,0.407331,0.437513,0.80163,-0.003693,0.281533,0.959532,0.002747,0.738029,0.674734,0.524277,0.789087,0.320017,0.886227,0.412519,-0.210608,0.836207,0.371502,-0.403333,0.856197,0.510453,0.079501,-0.003479,0.254128,0.967162,0.385601,0.437239,0.812433,0.839473,0.36198,-0.405194,0.873196,0.453932,-0.177313,0.858882,0.35551,-0.368633,0.539537,0.110569,-0.834651,0.528001,0.118809,-0.840877,0.10062,-0.18836,-0.976928,0.043764,-0.219275,-0.97467,0.033692,-0.221107,-0.974639,0.110599,0.992523,-0.051332,0.147191,0.988769,0.025239,0.097385,0.994629,-0.034364,0.090548,0.995666,-0.020173,0.103946,0.993042,-0.054933,0.318827,0.50914,-0.799432,0.548296,-0.071413,-0.833216,0.488907,-0.235878,-0.839808,0.449995,-0.241279,-0.859798,0.841334,0.073672,-0.535417,0.427595,-0.396161,-0.812494,0.388318,-0.757836,-0.524277,0.852412,-0.315653,-0.416791,0.835566,-0.472335,-0.280496,0.22779,-0.963622,-0.139653,0.180914,-0.982391,-0.046297,0.179296,-0.982727,-0.045656,0.359355,-0.928953,0.088748,0.697409,-0.262551,0.666799,0.550462,0.503128,0.666189,0.551225,0.496261,0.670705,0.555834,0.490249,0.671316,0.565386,0.497452,0.657888,0.558214,0.558794,0.613269,0.388012,0.768792,0.508286,0.878597,0.146428,-0.454543,0.864742,0.167547,-0.473373,0.904263,0.111698,-0.412061,0.863186,0.270974,-0.425916,0.828272,0.223579,-0.513718,0.860225,0.246803,-0.44612,0.507584,-0.007416,-0.861538,0.06946,-0.232948,-0.97,0.059175,-0.237739,-0.969512,0.057955,-0.242256,-0.968474,0.833216,0.148961,-0.532487,0.863704,0.178289,-0.471358,0.8699,0.186041,-0.45671,0.865261,0.187628,-0.464858,0.513871,-0.056093,-0.856014,0.090945,-0.238227,-0.966918,0.034242,-0.258919,-0.96527,0.043153,-0.255165,-0.965911,0.903043,0.316294,-0.290506,0.918393,0.25309,-0.304025,0.332926,0.560076,-0.758568,0.590472,-0.78573,-0.18421,0.81109,-0.529191,0.249092,0.9729,-0.23075,-0.013825,0.692679,-0.428816,0.579882,0.860012,0.244301,-0.44792,0.85818,0.256081,-0.444838,0.858577,0.231574,-0.45732,0.861019,0.226722,-0.455184,0.881588,0.382305,-0.276742,0.882473,0.364727,-0.296915,0.885189,0.355937,-0.299478,0.862972,0.219367,-0.455061,0.870846,0.188055,-0.454085],\n            \"colors\": [],\n            \"uvs\": [[0.230202,0.981921,0.232403,0.947888,0.030918,0.97569,0.234608,0.913857,0.433891,0.920088,0.438301,0.85202,0.429489,0.988152,0.292877,0.244919,0.291534,0.257736,0.461388,0.444153,0.290199,0.270569,0.121695,0.07132,0.119024,0.09697,0.124367,0.04567,0.267746,0.496521,0.268936,0.491943,0.076483,0.50927,0.270126,0.487381,0.461395,0.474609,0.463783,0.465469,0.459015,0.483749,0.678009,0.729645,0.699173,0.660904,0.445801,0.736221,0.720337,0.592163,0.95256,0.585587,0.994888,0.448105,0.910233,0.723061,0.010503,0.940069,0.014859,0.890535,0.010153,0.939952,0.019216,0.841003,0.019566,0.841118,0.02828,0.74205,0.010853,0.940186,0.640503,1.00556,0.640457,1.00564,0.849091,1.00399,0.640427,1.00572,0.431847,1.00728,0.43177,1.00744,0.431931,1.00712,0.891525,0.866283,0.891495,0.866367,0.933975,0.728569,0.891479,0.866447,0.84903,1.00416,0.848984,1.00432,0.292831,0.244965,0.292793,0.24501,0.461304,0.44426,0.46122,0.444351,0.053644,0.504608,0.047273,0.564034,0.053748,0.504601,0.040902,0.623459,0.040798,0.623466,0.028058,0.742317,0.05354,0.504608,0.745178,0.432007,0.745255,0.431839,0.745331,0.431656,1.02914,0.41951,1.0293,0.419144,1.02899,0.419861,1.02377,0.436798,1.0238,0.436798,1.01859,0.453735,1.01865,0.453735,1.01856,0.453735,0.009976,0.938625,0.014452,0.889217,0.0098,0.937298,0.018929,0.839809,0.019105,0.841137,0.005785,0.9941,0.00564,0.994213,0.006321,0.994117,0.005495,0.994325,0.004959,0.994308,0.00467,0.994533,0.005249,0.994083,0.849213,1.0046,0.744904,1.00538,0.849457,1.00488,0.64061,1.00616,0.640366,1.00588,0.93425,0.728935,0.913025,0.797806,0.934631,0.729027,0.8918,0.866676,0.891418,0.866585,0.933868,0.728844,0.103714,0.022751,0.10375,0.022354,0.103594,0.02243,0.103785,0.021957,0.103907,0.022278,0.103977,0.021484,0.103836,0.023071,0.103857,0.021149,0.193169,0.126877,0.103739,0.020813,0.282478,0.23259,0.282593,0.232925,0.053146,0.504631,0.046778,0.564041,0.040409,0.623451,0.040015,0.623474,0.027278,0.742287,0.052753,0.504654,0.461388,0.444031,0.603394,0.437729,0.461555,0.44371,0.745422,0.431427,0.745255,0.431747,1.02387,0.436783,1.02399,0.436783,1.02908,0.41983,1.02411,0.436768,1.01889,0.45372,1.01917,0.453705,0.219036,1.00043,0.219078,1.00053,0.219124,1.00062,0.006232,0.993927,0.006143,0.993737,0.220009,1.00139,0.22002,1.00122,0.008295,0.99465,0.220032,1.00105,0.431747,1.00779,0.431725,1.00813,0.101337,0.047058,0.101536,0.047821,0.101734,0.048584,0.099236,0.072556,0.099632,0.074081,0.098841,0.07103,0.10198,0.037766,0.101599,0.042252,0.101217,0.046738,0.099604,0.062057,0.100368,0.053085,1.02975,0.419174,1.0296,0.419281,1.02963,0.419632,1.02945,0.419388,1.0296,0.41893,1.02991,0.418716,0.261414,0.555855,0.255074,0.615204,0.063814,0.62796,0.051146,0.746651,0.726944,0.465927,0.727371,0.464554,0.727798,0.463181,0.995728,0.445358,0.996582,0.442612,0.056603,0.47702,0.057128,0.472122,0.056533,0.4767,0.057652,0.467239,0.057723,0.467545,0.058772,0.457764,0.056675,0.477325,0.997452,0.522446,0.976303,0.591156,0.976257,0.591156,0.056218,0.475983,0.056721,0.471298,0.055903,0.475266,0.057223,0.466614,0.057538,0.467331,0.058543,0.457947,0.976257,0.591293,0.97644,0.591339,0.976639,0.591385,0.272827,0.460968,0.272148,0.45578,0.081543,0.457001,0.271461,0.450577,0.462753,0.454544,0.464119,0.464935,0.730515,0.453522,0.738525,0.447968,0.746552,0.442398,1.01294,0.430984,0.996918,0.442093,0.996063,0.444839,1.00189,0.446381,1.00772,0.447922,1.00687,0.450668,0.995224,0.447586,0.952896,0.58506,0.95874,0.586571,0.9646,0.588081,0.922272,0.725555,0.910568,0.722534,0.870132,0.85371,0.874985,0.85849,0.879822,0.863266,0.839401,0.994439,0.829712,0.984883,0.629761,0.986255,0.63028,0.991129,0.630814,0.996003,0.43087,0.997375,0.429817,0.987626,0.230534,0.981395,0.224255,0.986038,0.217979,0.990682,0.018697,0.984451,0.031252,0.975164,0.019478,0.975611,0.020258,0.966772,0.032813,0.957485,0.034374,0.939806,0.064148,0.627434,0.05838,0.626404,0.051479,0.746124,0.052613,0.625366,0.065281,0.506676,0.076817,0.508743,0.271935,0.47171,0.271973,0.471634,0.079922,0.478195,0.272018,0.471573,0.464035,0.465073,0.463951,0.46521,0.730347,0.453781,0.730392,0.45372,0.730423,0.453659,0.996826,0.44223,0.99675,0.442352,0.995895,0.445099,0.995941,0.445038,0.995987,0.444977,0.995132,0.447723,0.995056,0.447845,0.952728,0.58532,0.952759,0.585258,0.952805,0.58519,0.910477,0.722664,0.9104,0.722794,0.869965,0.85397,0.87001,0.853905,0.870056,0.85384,0.82962,0.985014,0.829544,0.985145,0.629593,0.986517,0.629639,0.986451,0.629669,0.986386,0.429733,0.987758,0.429657,0.987889,0.23037,0.981658,0.230412,0.981593,0.230453,0.981527,0.031168,0.975296,0.031085,0.975427,0.032848,0.955449,0.032789,0.956533,0.032729,0.957617,0.034493,0.937638,0.034614,0.935471,0.06398,0.627701,0.064022,0.627632,0.051312,0.746391,0.064064,0.627571,0.076733,0.508873,0.076651,0.509003,0.078285,0.493607,0.078327,0.493546,0.078369,0.493469,0.080006,0.478073,0.08009,0.477936,0.022614,0.939996,0.02689,0.891577,0.031166,0.843155,0.042927,0.842968,0.042963,0.840931,0.043004,0.840866,0.043046,0.840797,0.051395,0.746262,0.236374,0.893877,0.238247,0.864929,0.034447,0.935734,0.240124,0.835979,0.442047,0.794121,0.009277,0.953602,0.008051,0.967134,0.007701,0.967018,0.008694,0.952934,0.007411,0.967243,0.007235,0.965916,0.271767,0.47197,0.271805,0.471909,0.079754,0.478455,0.271851,0.471832,0.463867,0.465347,0.730179,0.454041,0.730225,0.453979,0.730255,0.453918,0.996658,0.44249,0.995773,0.445297,0.995819,0.445236,0.994965,0.447983,0.952591,0.585518,0.952637,0.585449,0.910309,0.722931,0.869797,0.854237,0.869843,0.854172,0.869888,0.854103,0.829453,0.985277,0.829376,0.985408,0.629425,0.98678,0.629471,0.986714,0.629517,0.986649,0.429573,0.988021,0.230244,0.981855,0.230286,0.98179,0.031001,0.975559,0.032681,0.955712,0.032723,0.955647,0.032765,0.955581,0.03453,0.935602,0.042796,0.841194,0.042837,0.841129,0.042879,0.841064,0.051229,0.746521,0.063856,0.627899,0.063898,0.627831,0.076567,0.50914,0.078117,0.493866,0.078159,0.493805,0.078201,0.493744,0.079838,0.478333,0.116875,0.065628,0.112055,0.059921,0.114725,0.034271,0.105085,0.022873,0.078453,0.493347,0.072599,0.493195,0.066746,0.493042,0.068382,0.477631,0.055856,0.483994,0.055107,0.490967,0.055037,0.490662,0.05543,0.483337,0.054643,0.490677,0.054328,0.48996,0.079201,0.26593,0.084894,0.265732,0.090588,0.265549,0.070156,0.457382,0.089161,0.169296,0.079086,0.266022,0.078691,0.264496,0.079065,0.255508,0.07926,0.255508,0.079454,0.255524,0.058153,0.457932,0.057763,0.457916,0.633835,0.918715,0.56572,0.94186,0.005904,0.993979,0.005696,0.99391,0.10446,0.02298,0.1043,0.022476,0.10453,0.022186,0.111143,0.030014,0.114172,0.033585,1.02902,0.419846,1.02911,0.419617,1.02917,0.419495,0.080816,0.467468,0.208584,0.466629,0.272102,0.471436,0.065178,0.471008,0.069429,0.46785,0.674255,0.78754,0.725967,0.853497,0.598099,0.770435,0.073467,0.464233,0.266769,0.271362,0.205029,0.333237,0.248032,0.45137,0.41452,0.44574,0.100283,0.276993]],\n            \"name\": \"Untitled.211Geometry\",\n            \"vertices\": [-0.956496,5.25432,-1.95083,-4.13631,5.77851,-7.997,-4.17931,6.64832,-7.6303,-1.78449,6.77999,-2.82712,2.22383,-5.42838,-5.09532,2.72202,-2.79995,-3.05239,3.63368,-2.22632,-0.417911,2.58067,-6.39208,-4.72584,2.92715,-1.32162,-0.337243,0.652571,-1.329,-5.41964,-0.617662,-0.523971,-6.23743,1.85307,-0.542922,-0.590295,3.61614,-0.54352,7.2663,-0.002504,3.06014,-1.76369,2.09231,3.55107,5.2982,-1.89958,3.01048,-8.30504,-1.95514,3.00242,-8.3483,-3.61408,5.91823,-9.12521,-3.55521,5.92194,-9.07709,-0.760313,7.27341,-2.80782,1.52927,6.92356,4.21799,1.58053,6.88234,4.1794,-0.702416,7.23006,-2.80421,3.76618,3.56036,6.98096,3.80675,3.53995,6.92709,3.66738,-2.52701,-0.070242,2.48863,-6.93419,-5.03387,-0.057659,-0.592249,-7.24768,-0.112558,-0.602322,-7.28981,5.09583,-1.71491,8.14052,5.18892,-1.62206,8.53103,5.00594,-0.491272,8.9208,5.28507,-1.59994,9.3791,5.04452,-0.498951,8.86114,-2.1151,2.99743,-8.35674,-3.76449,5.89112,-9.12682,-4.37912,6.9375,-9.38987,-3.96495,7.08367,-8.58567,-3.81011,7.07452,-8.60104,-4.21801,6.93623,-9.38563,-0.927799,7.28325,-2.80605,1.35598,6.93178,4.22452,3.59077,3.56408,6.9922,2.3704,-6.7163,-4.8399,2.19717,-7.33845,-5.44321,2.34941,-7.30283,-5.44768,3.49722,-2.54015,-0.068235,-0.272406,-0.604904,-7.29904,4.92015,-1.72094,8.15101,4.82805,-0.491125,8.93028,5.10743,-1.60244,9.38877,-3.88165,6.97162,-8.84695,2.02689,-6.13167,-5.73138,2.39494,-7.2559,-5.41425,1.9901,-6.21718,-5.75671,1.8789,-6.38885,-5.71382,-2.58288,3.07049,-7.28358,4.29341,-1.30354,6.63368,0.64961,-2.27549,-6.80858,0.670116,-2.50752,-6.79391,0.302051,-1.50226,-7.03451,0.353029,-1.4861,-6.99697,0.519039,-2.53896,-6.79436,0.147217,-1.5175,-7.04018,1.15605,-2.21076,-5.8124,3.28352,-1.43657,-0.811852,4.98373,-1.37495,7.63911,5.0023,-0.542338,8.51538,3.7873,3.43695,6.60465,1.62743,6.66372,3.94156,-0.607183,7.00066,-2.79318,-3.49653,6.75273,-8.27873,-3.43007,5.90575,-8.82593,-1.80703,3.06397,-8.07119,0.036403,-0.536499,-7.01464,0.639155,-1.47442,-6.43431,0.701819,-1.38163,-5.98228,3.23865,-1.36168,-0.320551,4.81352,-1.33665,7.56963,4.739,-0.546312,8.45478,3.51093,3.42319,6.54784,1.36337,6.6308,3.8988,-0.857728,6.96596,-2.79429,-3.72341,6.71946,-8.23727,-3.64951,5.86723,-8.7768,-2.0421,3.06973,-8.03323,-0.181427,-0.523973,-6.97846,0.227828,6.47309,3.21223,-3.26697,6.27143,-5.84591,2.93496,-4.2753,-3.21963,1.13624,-1.21304,-3.80463,2.07596,1.20113,3.05264,-2.85686,4.67434,-8.79898,0.497164,7.34359,0.981255,2.7309,5.53809,5.95874,3.03841,-4.54198,-3.03691,-0.903349,1.03528,-7.77444,4.49058,-1.77546,4.32288,5.25581,-1.33634,9.28617,-2.95348,4.66352,-8.80418,-4.34804,7.04687,-9.40415,0.389765,7.3511,0.981251,2.62182,5.54354,5.9632,2.30554,-7.39614,-5.42444,2.92089,-4.63534,-3.09142,-1.00421,1.03597,-7.78151,4.38256,-1.78112,4.32854,5.14342,-1.33705,9.29219,-2.38133,7.16357,-6.20259,-2.48115,7.17155,-6.19735,2.30158,-7.03179,-5.51907,2.21932,-7.10805,-5.50759,5.22997,-1.69302,9.4157,-0.516848,1.14238,-4.48908,3.47877,-1.21846,3.95506,0.419302,-1.73077,-6.98883,4.56164,1.34441,8.0586,0.32205,-1.73818,-6.99369,4.45072,1.34628,8.06449,2.8133,-1.76307,-2.41614,4.44045,-1.56869,4.16174,5.22317,-1.28738,9.01793,4.56373,1.28789,7.83981,2.75991,5.42829,5.76175,0.563814,7.18418,0.898066,-2.26425,7.01569,-6.09991,-3.86925,6.55474,-9.11548,-0.823519,1.07462,-7.6182,1.96599,-1.40012,-3.73786,4.30877,-1.36197,3.99981,5.106,-1.23656,8.74879,4.48212,1.23432,7.61902,2.70593,5.32276,5.5617,0.548349,7.02928,0.81161,-2.22613,6.87257,-5.99936,-3.81206,6.47441,-8.93217,-0.820089,1.11683,-7.46516,0.341234,-1.22572,-6.77129,-2.77011,4.6981,-8.63734,-2.75267,4.70582,-8.47579,-2.28326,4.49034,-5.39956,-3.99721,6.61927,-9.30124,-4.09541,6.61059,-9.30842,1.79184,-1.39634,-3.74102,4.12654,-1.35818,3.99642,4.64116,-1.23278,8.74529,3.73891,1.23816,7.61549,1.96447,5.32672,5.55811,-0.184393,7.03329,0.808095,-2.94174,6.87657,-6.00258,-4.50878,6.46049,-8.93062,-3.441,4.69184,-8.47424,-1.50209,1.12067,-7.4682,-0.080629,-1.22193,-6.77432,2.3403,-6.85193,-5.4094,0.330801,-1.25448,-6.92783,0.245573,-1.28369,-7.0867,0.148394,-1.29147,-7.09145,1.41629,-4.23083,-6.15098,1.3535,-4.32786,-6.28455,1.27327,-4.40189,-6.27179,-0.881875,6.41613,-0.303422,-4.25226,7.04091,-9.40627,2.40399,-7.38833,-5.41871,2.43223,-7.27662,-5.3433,5.33736,-1.68913,9.40855,1.58301,-1.59076,-4.70043,0.451982,-1.63806,-6.89369,0.545493,5.27839,2.86323,0.488568,4.04785,0.618943,0.56713,-1.79965,-6.76035,2.09822,-3.38762,-4.51502,-4.51666,6.41422,-8.1602,-2.86047,5.52259,-5.65518,-1.73146,6.21208,-2.91717,-3.34624,6.72628,-5.96422,3.1879,-2.4436,-1.97611,2.6616,-3.96438,-3.66274,2.50294,-6.1231,-4.80972,3.02499,-4.43097,-3.05468,0.045629,-1.21876,-6.03266,1.57476,-1.34956,-3.75772,2.50826,-1.21089,-0.379104,0.448343,-0.533476,-4.00676,0.931817,1.16696,-1.11333,2.85983,-0.544647,3.70962,2.98764,1.22987,6.4739,1.24595,3.05369,2.01284,-2.88602,4.67158,-8.80187,-1.92497,3.00229,-8.34555,-2.83016,4.68032,-8.75698,-3.58546,5.92285,-9.12184,1.56191,6.92062,4.21801,0.464809,7.34672,0.980499,-0.728768,7.27018,-2.80709,0.519331,7.30248,0.961213,3.79915,3.55851,6.98006,2.69814,5.5406,5.95922,2.74364,5.50949,5.91012,2.58653,-6.56657,-4.75032,2.99658,-4.60966,-3.07845,3.70179,-2.50942,-0.060161,-0.878352,1.04464,-7.73455,-0.933604,1.03594,-7.77704,-0.082877,-0.601706,-7.28753,4.45827,-1.77784,4.32475,5.12803,-1.71155,8.13739,4.48336,-1.7228,4.28214,5.31848,-1.59923,9.37697,5.22154,-1.33654,9.2881,5.03999,-0.491467,8.91907,5.25382,-1.32408,9.21869,-3.04007,4.65279,-8.8062,-2.02516,3.00045,-8.35222,-3.67997,5.90646,-9.12653,-3.87767,7.07882,-8.59449,-4.43703,7.05102,-9.40008,-4.28853,6.93701,-9.38818,-4.2796,7.0433,-9.40672,0.293375,7.35611,0.982756,-0.833616,7.27799,-2.80726,1.45343,6.92744,4.22059,2.52371,5.5467,5.96892,3.68942,3.56222,6.98564,2.2157,-7.40087,-5.42524,2.46093,-6.71154,-4.83964,2.37508,-7.39182,-5.42261,2.28244,-7.31852,-5.44677,2.82827,-4.64001,-3.0901,3.59244,-2.53578,-0.071455,-1.095,1.03571,-7.78692,-0.182433,-0.603478,-7.29396,4.28515,-1.78486,4.3333,5.01911,-1.71799,8.14534,5.20733,-1.60108,9.38339,5.04338,-1.33771,9.29737,4.92798,-0.491174,8.92494,-2.41115,7.16695,-6.20154,-3.782,7.0713,-8.60304,-2.34719,7.12522,-6.17666,-2.57123,7.17676,-6.19159,2.37978,-7.29565,-5.44333,2.31664,-6.98157,-5.48905,2.01197,-6.18109,-5.76109,2.27564,-7.05612,-5.51879,1.94125,-6.29307,-5.73868,2.14782,-7.17379,-5.49092,5.30665,-1.69098,9.41105,5.1303,-1.69516,9.42141,-1.51037,3.06638,-5.02791,-1.56362,1.12706,-6.72418,3.90896,-1.32231,3.98523,4.15425,-1.22825,7.54686,0.390447,-1.73347,-6.99054,0.698496,-2.50134,-6.79272,0.432013,-1.70674,-6.96455,0.330225,-1.4977,-7.03333,4.52813,1.34539,8.05995,4.56794,1.32977,8.00402,0.233881,-1.74389,-6.99757,0.60401,-2.52133,-6.79433,0.234483,-1.50927,-7.03702,4.35137,1.34714,8.07061,2.23668,-2.24839,-3.76671,3.61794,-1.6353,0.054179,2.16154,-1.66752,-3.62812,5.05186,-1.48036,7.83888,4.37716,-1.41459,4.04114,5.03394,-0.520913,8.68841,5.17139,-1.25022,8.81695,3.80742,3.48798,6.76622,4.5386,1.24675,7.67509,1.61433,6.77247,4.06087,2.75543,5.34815,5.61261,-0.644689,7.11479,-2.79831,0.587768,7.06701,0.834103,-3.57804,6.84347,-8.40591,-2.20105,6.90735,-6.0237,-3.95986,6.60308,-9.25204,-3.48442,5.91709,-8.95163,-3.79633,6.50245,-8.97954,-1.84393,3.0374,-8.1878,-0.001173,-0.564569,-7.1308,-0.787786,1.10532,-7.50266,0.793437,-1.38352,-5.98075,1.90415,-1.44872,-3.97771,3.31805,-1.36357,-0.318909,1.88856,-1.39823,-3.73944,4.9131,-1.33855,7.57136,4.22774,-1.36007,3.99811,4.94362,-0.548213,8.45654,4.95369,-1.23467,8.74704,3.73254,3.42124,6.54961,4.26025,1.23624,7.61726,1.58397,6.6288,3.90059,2.48455,5.32474,5.55991,-0.641495,6.96396,-2.79259,0.329611,7.03129,0.809852,-3.51363,6.72082,-8.23659,-2.43965,6.87457,-6.00098,-3.44916,5.88539,-8.78045,-4.01627,6.46297,-8.93024,-1.83788,3.07115,-8.03257,0.00489,-0.525875,-6.97694,-1.02375,1.11875,-7.46668,0.3716,-1.23385,-6.80966,0.202794,-1.22382,-6.7728,-2.72738,4.71186,-8.51772,-2.9544,4.69435,-8.47387,-3.46608,4.64245,-7.70633,-0.696912,4.27799,-2.35683,-4.18763,6.93487,-9.38133,-4.02712,6.61716,-9.30579,-4.18289,6.60178,-9.31007,0.559757,-1.37974,-5.98382,3.13948,-1.35979,-0.322194,4.65859,-1.33476,7.56789,4.26952,-0.544411,8.45303,2.99025,3.42514,6.54606,0.845078,6.6328,3.897,1.275,5.31563,4.88349,-1.36599,6.96796,-2.79598,-0.689582,6.88,0.529337,-4.21992,6.72034,-8.23853,-4.13894,5.8625,-8.7766,-2.52528,3.07056,-8.03446,-0.608265,-0.522071,-6.97997,2.05489,-6.01579,-5.64716,2.41769,-7.13897,-5.3405,0.271303,-1.27521,-7.04658,0.40449,-1.45801,-6.88892,0.216855,-1.2868,-7.08828,0.06006,-1.29691,-7.0954,1.61386,-3.97668,-5.67603,0.796409,-2.49335,-6.62175,1.37351,-4.29844,-6.25033,1.32913,-4.35154,-6.28219,1.20168,-4.46559,-6.25738,-0.289642,5.98998,1.16149,2.41397,-7.36241,-5.39787,0.83269,-1.70367,-6.19874,0.509765,-1.7171,-6.82659,0.63479,4.51846,1.8657],\n            \"metadata\": {\n                \"bones\": 0,\n                \"normals\": 343,\n                \"colors\": 0,\n                \"uvs\": 1,\n                \"vertices\": 343,\n                \"materials\": 1,\n                \"generator\": \"io_three\",\n                \"faces\": 325,\n                \"version\": 3\n            },\n            \"faces\": [43,175,88,172,2,0,0,1,2,2,0,1,2,3,43,172,88,173,1,0,2,1,3,2,2,1,4,5,43,174,0,173,88,0,4,5,3,1,6,7,4,1,43,174,88,175,3,0,4,1,0,6,6,1,0,8,43,179,89,176,6,0,7,8,9,9,9,10,11,12,43,176,89,177,5,0,9,8,10,9,11,10,13,14,43,177,89,178,4,0,10,8,11,12,13,10,15,16,43,178,89,179,7,0,11,8,7,13,15,10,9,17,43,183,90,180,10,0,14,15,16,16,18,19,20,21,43,180,90,181,9,0,16,15,17,16,20,19,22,23,43,181,90,182,8,0,17,15,18,19,22,19,24,25,43,182,90,183,11,0,18,15,14,20,24,19,18,26,43,187,91,184,13,0,21,22,23,23,27,28,29,30,43,184,91,185,11,0,23,22,24,23,29,28,31,26,43,185,91,186,12,0,24,22,25,26,31,28,32,33,43,186,91,187,14,0,25,22,21,27,32,28,27,34,43,191,92,188,17,0,28,29,30,30,35,36,37,38,43,188,92,189,16,0,30,29,31,30,37,36,39,40,43,189,92,190,15,0,31,29,32,33,39,36,41,42,43,190,92,191,18,0,32,29,28,34,41,36,35,43,43,195,93,192,21,0,35,36,37,37,44,45,46,47,43,192,93,193,20,0,37,36,38,37,46,45,48,49,43,193,93,194,19,0,38,36,39,40,48,45,50,51,43,194,93,195,22,0,39,36,35,41,50,45,44,52,43,198,94,196,24,0,42,43,44,44,53,54,55,56,43,196,94,197,23,0,44,43,45,44,55,54,57,58,43,197,94,192,20,0,45,43,46,47,57,54,46,49,43,192,94,198,21,0,46,43,42,37,46,54,53,47,43,179,95,199,7,0,7,48,13,13,9,59,60,17,43,199,95,200,26,0,13,48,49,13,60,59,61,62,43,200,95,201,25,0,49,48,50,51,61,59,63,64,43,201,95,179,6,0,50,48,7,9,63,59,9,12,43,204,96,202,27,0,52,53,54,54,65,66,67,68,43,202,96,189,15,0,54,53,55,54,67,66,39,42,43,189,96,203,16,0,55,53,56,57,39,66,69,40,43,203,96,204,28,0,56,53,52,58,69,66,65,70,43,207,97,201,6,0,59,60,9,9,71,72,63,12,43,201,97,205,25,0,9,60,61,9,63,72,73,64,43,205,97,206,29,0,61,60,62,63,73,72,74,75,43,206,97,207,30,0,62,60,59,64,74,72,71,76,43,211,98,208,30,0,65,65,64,64,77,78,79,76,43,208,98,209,32,0,64,65,66,64,79,78,80,81,43,209,98,210,31,0,66,65,67,68,80,78,82,83,43,210,98,211,33,0,67,65,65,69,82,78,77,84,43,214,99,212,35,0,70,71,72,72,85,86,87,88,43,212,99,213,34,0,72,71,73,72,87,86,89,90,43,213,99,188,16,0,73,71,74,57,89,86,37,40,43,188,99,214,17,0,74,71,70,30,37,86,85,38,43,218,100,215,38,0,75,76,77,77,91,92,93,94,43,215,100,216,37,0,77,76,78,77,93,92,95,96,43,216,100,217,36,0,78,76,79,80,95,92,97,98,43,217,100,218,39,0,79,76,75,81,97,92,91,99,43,221,101,219,41,0,82,83,84,84,100,101,102,103,43,219,101,220,40,0,84,83,85,84,102,101,104,105,43,220,101,193,19,0,85,83,86,40,104,101,48,51,43,193,101,221,20,0,86,83,82,47,48,101,100,49,43,223,102,222,42,0,87,88,89,89,106,107,108,109,43,222,102,221,41,0,89,88,90,89,108,107,100,103,43,221,102,197,20,0,90,88,91,47,100,107,57,49,43,197,102,223,23,0,91,88,87,92,57,107,106,58,43,227,103,224,44,0,93,94,95,95,110,111,112,113,43,224,103,225,43,0,95,94,96,95,112,111,114,115,43,225,103,226,26,0,96,94,97,98,114,111,116,62,43,226,103,227,45,0,97,94,93,99,116,111,110,117,43,225,104,228,43,0,100,101,102,102,114,118,119,115,43,228,104,229,46,0,102,101,103,102,119,118,120,121,43,229,104,200,25,0,103,101,104,51,120,118,61,64,43,200,104,225,26,0,104,101,100,98,61,118,114,62,43,231,105,203,28,0,105,106,58,58,122,123,69,70,43,203,105,213,16,0,58,106,107,58,69,123,89,40,43,213,105,230,34,0,107,106,108,109,89,123,124,90,43,230,105,231,47,0,108,106,105,110,124,123,122,125,43,229,106,232,46,0,111,112,113,113,120,126,127,121,43,232,106,233,48,0,113,112,114,113,127,126,128,129,43,233,106,205,29,0,114,112,115,63,128,126,73,75,43,205,106,229,25,0,115,112,111,51,73,126,120,64,43,209,107,234,32,0,116,117,118,118,80,130,131,81,43,234,107,235,50,0,118,117,119,118,131,130,132,133,43,235,107,236,49,0,119,117,120,121,132,130,134,135,43,236,107,209,31,0,120,117,116,68,134,130,80,83,43,239,108,194,22,0,122,123,41,41,136,137,50,52,43,194,108,237,19,0,41,123,124,41,50,137,138,51,43,237,108,238,38,0,124,123,125,77,138,137,139,94,43,238,108,239,51,0,125,123,122,126,139,137,136,140,43,240,109,215,37,0,127,128,129,129,141,142,93,96,43,215,109,237,38,0,129,128,130,129,93,142,138,94,43,237,109,220,19,0,130,128,131,40,138,142,104,51,43,220,109,240,40,0,131,128,127,132,104,142,141,105,43,244,110,241,45,0,133,134,99,99,143,144,145,117,43,241,110,242,53,0,99,134,135,99,145,144,146,147,43,242,110,243,52,0,135,134,136,137,146,144,148,149,43,243,110,244,54,0,136,134,133,138,148,144,143,150,43,246,111,227,44,0,139,140,95,95,151,152,110,113,43,227,111,244,45,0,95,140,141,95,110,152,143,117,43,244,111,245,54,0,141,140,142,138,143,152,153,150,43,245,111,246,55,0,142,140,139,143,153,152,151,154,43,248,112,234,50,0,144,145,146,146,155,156,131,133,43,234,112,247,32,0,146,145,147,146,131,156,157,81,43,247,112,233,29,0,147,145,148,63,157,156,128,75,43,233,112,248,48,0,148,145,144,149,128,156,155,129,43,183,113,184,11,0,14,150,20,20,18,158,29,26,43,184,113,249,13,0,20,150,151,20,29,158,159,30,43,249,113,250,56,0,151,150,152,153,159,158,160,161,43,250,113,183,10,0,152,150,14,16,160,158,18,21,43,185,114,182,11,0,154,155,20,20,31,162,24,26,43,182,114,251,8,0,20,155,156,20,24,162,163,25,43,251,114,252,57,0,156,155,157,158,163,162,164,165,43,252,114,185,12,0,157,155,154,26,164,162,31,33,43,256,115,253,60,0,159,160,161,161,166,167,168,169,43,253,115,254,59,0,161,160,162,161,168,167,170,171,43,254,115,255,58,0,162,160,163,164,170,167,172,173,43,255,115,256,61,0,163,160,159,165,172,167,166,174,43,210,116,257,31,0,67,166,68,68,82,175,176,83,43,257,116,196,23,0,68,166,167,68,176,175,55,58,43,196,116,258,24,0,167,166,168,44,55,175,177,56,43,258,116,210,33,0,168,166,67,69,177,175,82,84,43,261,117,259,63,0,169,170,171,171,178,179,180,181,43,259,117,260,62,0,171,170,172,171,180,179,182,183,43,260,117,253,59,0,172,170,173,174,182,179,168,171,43,253,117,261,60,0,173,170,169,161,168,179,178,169,43,257,118,236,31,0,175,176,68,68,176,184,134,83,43,236,118,262,49,0,68,176,177,68,134,184,185,135,43,262,118,223,42,0,177,176,87,89,185,184,106,109,43,223,118,257,23,0,87,176,175,92,106,184,176,58,43,265,119,263,64,0,178,179,180,180,186,187,188,189,43,263,119,176,5,0,180,179,181,180,188,187,11,14,43,176,119,264,6,0,181,179,182,9,11,187,190,12,43,264,119,265,65,0,182,179,178,183,190,187,186,191,43,267,120,264,65,0,184,185,183,183,192,193,190,191,43,264,120,207,6,0,183,185,186,183,190,193,71,12,43,207,120,266,30,0,186,185,187,64,71,193,194,76,43,266,120,267,66,0,187,185,184,188,194,193,192,195,43,269,121,266,66,0,189,190,188,188,196,197,194,195,43,266,121,211,30,0,188,190,191,188,194,197,77,76,43,211,121,268,33,0,191,190,192,69,77,197,198,84,43,268,121,269,67,0,192,190,189,193,198,197,196,199,43,271,122,268,67,0,194,195,193,193,200,201,198,199,43,268,122,258,33,0,193,195,196,193,198,201,177,84,43,258,122,270,24,0,196,195,197,44,177,201,202,56,43,270,122,271,68,0,197,195,194,198,202,201,200,203,43,273,123,270,68,0,199,200,198,198,204,205,202,203,43,270,123,198,24,0,198,200,201,198,202,205,53,56,43,198,123,272,21,0,201,200,202,37,53,205,206,47,43,272,123,273,69,0,202,200,199,203,206,205,204,207,43,275,124,272,69,0,204,205,203,203,208,209,206,207,43,272,124,195,21,0,203,205,206,203,206,209,44,47,43,195,124,274,22,0,206,205,207,41,44,209,210,52,43,274,124,275,70,0,207,205,204,208,210,209,208,211,43,277,125,274,70,0,209,210,208,208,212,213,210,211,43,274,125,239,22,0,208,210,211,208,210,213,136,52,43,239,125,276,51,0,211,210,212,126,136,213,214,140,43,276,125,277,71,0,212,210,209,213,214,213,212,215,43,276,126,278,51,0,212,214,126,126,214,216,217,140,43,278,126,279,18,0,126,214,215,126,217,216,218,43,43,279,126,280,72,0,215,214,216,217,218,216,219,220,43,280,126,276,71,0,216,214,212,213,219,216,214,215,43,283,127,281,73,0,218,219,220,220,221,222,223,224,43,281,127,202,15,0,220,219,221,220,223,222,67,42,43,202,127,282,27,0,221,219,222,54,67,222,225,68,43,282,127,283,74,0,222,219,218,223,225,222,221,226,43,287,128,284,76,0,224,225,226,226,227,228,229,230,43,284,128,285,75,0,226,225,227,226,229,228,231,232,43,285,128,286,65,0,227,225,228,183,231,228,233,191,43,286,128,287,77,0,228,225,224,229,233,228,227,234,43,289,129,286,77,0,230,231,229,229,235,236,233,234,43,286,129,267,65,0,229,231,232,229,233,236,192,191,43,267,129,288,66,0,232,231,233,188,192,236,237,195,43,288,129,289,78,0,233,231,230,234,237,236,235,238,43,291,130,288,78,0,235,236,234,234,239,240,237,238,43,288,130,269,66,0,234,236,237,234,237,240,196,195,43,269,130,290,67,0,237,236,238,193,196,240,241,199,43,290,130,291,79,0,238,236,235,239,241,240,239,242,43,293,131,290,79,0,240,241,239,239,243,244,241,242,43,290,131,271,67,0,239,241,242,239,241,244,200,199,43,271,131,292,68,0,242,241,243,198,200,244,245,203,43,292,131,293,80,0,243,241,240,244,245,244,243,246,43,295,132,292,80,0,245,246,244,244,247,248,245,246,43,292,132,273,68,0,244,246,247,244,245,248,204,203,43,273,132,294,69,0,247,246,248,203,204,248,249,207,43,294,132,295,81,0,248,246,245,249,249,248,247,250,43,297,133,294,81,0,250,251,249,249,251,252,249,250,43,294,133,275,69,0,249,251,252,249,249,252,208,207,43,275,133,296,70,0,252,251,253,208,208,252,253,211,43,296,133,297,82,0,253,251,250,254,253,252,251,254,43,299,134,296,82,0,255,256,254,254,255,256,253,254,43,296,134,277,70,0,254,256,257,254,253,256,212,211,43,277,134,298,71,0,257,256,258,213,212,256,257,215,43,298,134,299,83,0,258,256,255,259,257,256,255,258,43,301,135,298,83,0,260,261,259,259,259,260,257,258,43,298,135,280,71,0,259,261,262,259,257,260,219,215,43,280,135,300,72,0,262,261,263,217,219,260,261,220,43,300,135,301,84,0,263,261,260,264,261,260,259,262,43,304,136,302,85,0,265,266,267,267,263,264,265,266,43,302,136,283,73,0,267,266,268,267,265,264,221,224,43,283,136,303,74,0,268,266,269,223,221,264,267,226,43,303,136,304,86,0,269,266,265,270,267,264,263,268,43,306,137,303,86,0,271,272,270,270,269,270,267,268,43,303,137,305,74,0,270,272,273,270,267,270,271,226,43,305,137,284,75,0,273,272,274,275,271,270,229,232,43,284,137,306,76,0,274,272,271,226,229,270,269,230,43,279,138,190,18,0,276,277,34,34,218,272,41,43,43,190,138,281,15,0,34,277,278,34,41,272,223,42,43,281,138,307,73,0,278,277,279,220,223,272,273,224,43,307,138,279,72,0,279,277,276,217,273,272,218,220,43,308,139,300,84,0,280,281,264,264,274,275,261,262,43,300,139,307,72,0,264,281,282,264,261,275,273,220,43,307,139,302,73,0,282,281,283,220,273,275,265,224,43,302,139,308,85,0,283,281,280,267,265,275,274,266,43,173,140,309,1,0,284,285,286,286,4,276,277,5,43,309,140,249,56,0,286,285,287,286,277,276,159,161,43,249,140,310,13,0,287,285,288,23,159,276,278,30,43,173,0,310,140,0,284,5,288,285,4,7,278,276,43,191,141,278,18,0,28,289,34,34,35,279,217,43,43,278,141,311,51,0,34,289,290,34,217,279,280,140,43,311,141,312,39,0,290,289,291,81,280,279,281,99,43,312,141,191,17,0,291,289,28,30,281,279,35,38,43,214,142,312,17,0,70,292,30,30,85,282,281,38,43,312,142,217,39,0,30,292,293,30,281,282,97,99,43,217,142,313,36,0,293,292,294,80,97,282,283,98,43,313,142,214,35,0,294,292,70,72,283,282,85,88,43,181,143,314,9,0,295,296,297,297,22,284,285,23,43,314,143,287,76,0,297,296,298,297,285,284,227,230,43,287,143,315,77,0,298,296,299,229,227,284,286,234,43,315,143,181,8,0,299,296,295,19,286,284,22,25,43,251,144,315,8,0,300,301,19,19,163,287,286,25,43,315,144,289,77,0,19,301,302,19,286,287,235,234,43,289,144,316,78,0,302,301,303,234,235,287,288,238,43,316,144,251,57,0,303,301,300,158,288,287,163,165,43,252,145,316,57,0,157,304,158,158,164,289,288,165,43,316,145,291,78,0,158,304,305,158,288,289,239,238,43,291,145,317,79,0,305,304,306,239,239,289,290,242,43,317,145,252,12,0,306,304,157,26,290,289,164,33,43,186,146,317,12,0,25,307,26,26,32,291,290,33,43,317,146,293,79,0,26,307,308,26,290,291,243,242,43,293,146,318,80,0,308,307,309,244,243,291,292,246,43,318,146,186,14,0,309,307,25,27,292,291,32,34,43,320,147,318,14,0,310,311,27,27,293,294,292,34,43,318,147,295,80,0,27,311,312,27,292,294,247,246,43,295,147,319,81,0,312,311,313,249,247,294,295,250,43,319,147,320,87,0,313,311,310,314,295,294,293,296,43,322,148,319,87,0,315,316,314,314,297,298,295,296,43,319,148,297,81,0,314,316,317,314,295,298,251,250,43,297,148,321,82,0,317,316,318,254,251,298,299,254,43,321,148,322,3,0,318,316,315,6,299,298,297,8,43,175,149,321,3,0,0,319,6,6,0,300,299,8,43,321,149,299,82,0,6,319,320,6,299,300,255,254,43,299,149,323,83,0,320,319,321,259,255,300,301,258,43,323,149,175,2,0,321,319,0,2,301,300,0,3,43,172,150,323,2,0,322,323,2,2,2,302,301,3,43,323,150,301,83,0,2,323,324,2,301,302,259,258,43,301,150,324,84,0,324,323,325,264,259,302,303,262,43,324,150,172,1,0,325,323,322,286,303,302,2,5,43,309,151,324,1,0,326,327,286,286,277,304,303,5,43,324,151,308,84,0,286,327,328,286,303,304,274,262,43,308,151,325,85,0,328,327,329,267,274,304,305,266,43,325,151,309,56,0,329,327,326,153,305,304,277,161,43,250,152,325,56,0,152,330,153,153,160,306,305,161,43,325,152,304,85,0,153,330,331,153,305,306,263,266,43,304,152,326,86,0,331,330,332,270,263,306,307,268,43,326,152,250,10,0,332,330,152,16,307,306,160,21,43,180,153,326,10,0,333,334,16,16,20,308,307,21,43,326,153,306,86,0,16,334,335,16,307,308,269,268,43,306,153,314,76,0,335,334,336,226,269,308,285,230,43,314,153,180,9,0,336,334,333,297,285,308,20,23,43,178,154,327,4,0,11,337,12,12,15,309,310,16,43,327,154,242,52,0,12,337,338,12,310,309,146,149,43,242,154,328,53,0,338,337,339,340,146,309,311,147,43,328,154,178,7,0,339,337,11,13,311,309,15,17,43,305,155,282,74,0,341,342,223,223,271,312,225,226,43,282,155,329,27,0,223,342,343,223,225,312,313,68,43,329,155,330,61,0,343,342,344,165,313,312,314,174,43,330,155,305,75,0,344,342,341,275,314,312,271,232,43,256,156,329,61,0,159,345,165,165,166,315,313,174,43,329,156,204,27,0,165,345,346,165,313,315,65,68,43,204,156,331,28,0,346,345,347,58,65,315,316,70,43,331,156,256,60,0,347,345,159,161,316,315,166,169,43,261,157,331,60,0,169,348,161,161,178,317,316,169,43,331,157,231,28,0,161,348,349,161,316,317,122,70,43,231,157,332,47,0,349,348,350,110,122,317,318,125,43,332,157,261,63,0,350,348,169,171,318,317,178,181,43,335,158,327,52,0,351,352,137,137,319,320,310,149,43,327,158,333,4,0,137,352,353,137,310,320,321,16,43,333,158,334,64,0,353,352,354,180,321,320,322,189,43,334,158,335,58,0,354,352,351,164,322,320,319,173,43,243,159,335,52,0,136,355,137,137,148,323,319,149,43,335,159,254,58,0,137,355,356,137,319,323,170,173,43,254,159,336,59,0,356,355,357,174,170,323,324,171,43,336,159,243,54,0,357,355,136,138,324,323,148,150,43,337,160,245,55,0,358,359,143,143,325,326,153,154,43,245,160,336,54,0,143,359,360,143,153,326,324,150,43,336,160,260,59,0,360,359,361,174,324,326,182,171,43,260,160,337,62,0,361,359,358,362,182,326,325,183,43,338,161,322,87,0,363,364,315,314,327,328,297,296,43,322,161,174,3,0,315,364,4,6,297,328,6,8,43,338,0,174,161,0,363,5,4,364,327,7,6,328,43,238,162,218,38,0,125,365,75,77,139,329,91,94,43,218,162,311,39,0,75,365,366,81,91,329,280,99,43,311,162,238,51,0,366,365,125,126,280,329,139,140,43,241,163,226,45,0,367,368,97,99,145,330,116,117,43,226,163,339,26,0,97,368,369,98,116,330,331,62,43,339,163,241,53,0,369,368,367,340,331,330,145,147,43,328,164,339,53,0,339,370,369,340,311,332,331,147,43,339,164,199,26,0,369,370,371,98,331,332,60,62,43,199,164,328,7,0,371,370,339,13,60,332,311,17,43,208,165,206,30,0,372,373,62,64,79,333,74,76,43,206,165,247,29,0,62,373,374,63,74,333,157,75,43,247,165,208,32,0,374,373,372,118,157,333,79,81,43,340,166,265,64,0,375,376,178,180,334,335,186,189,43,265,166,285,65,0,178,376,377,183,186,335,231,191,43,285,166,340,75,0,377,376,375,275,231,335,334,232,43,330,167,255,61,0,344,378,163,165,314,336,172,174,43,255,167,341,58,0,163,378,379,164,172,336,337,173,43,341,167,330,75,0,379,378,344,275,337,336,314,232,43,342,168,320,14,0,380,381,310,27,338,339,293,34,43,320,168,338,87,0,310,381,363,314,293,339,327,296,43,342,0,338,168,0,380,5,363,381,338,7,327,339,43,310,0,342,169,0,288,5,380,382,278,7,338,340,43,310,169,187,13,0,288,382,21,23,278,340,27,30,43,187,169,342,14,0,21,382,380,27,27,340,338,34,43,340,170,341,75,0,375,383,379,275,334,341,337,232,43,341,170,334,58,0,379,383,354,164,337,341,322,173,43,334,170,340,64,0,354,383,375,180,322,341,334,189,43,177,171,263,5,0,384,385,386,387,13,342,188,14,43,263,171,333,64,0,386,385,388,180,188,342,321,189,43,333,171,177,4,0,388,385,384,12,321,342,13,16]\n        },\n        \"type\": \"Geometry\",\n        \"uuid\": \"D3F9C56A-2E41-3539-9E6B-E01AB080C5B7\",\n        \"materials\": [{\n            \"transparent\": false,\n            \"depthTest\": true,\n            \"colorSpecular\": [0.2,0.2,0.2],\n            \"mapLightAnisotropy\": 1,\n            \"specularCoef\": 327,\n            \"colorEmissive\": [0,0,0],\n            \"colorDiffuse\": [0.8,0.8,0.8],\n            \"visible\": true,\n            \"shading\": \"phong\",\n            \"mapLightWrap\": [\"RepeatWrapping\",\"RepeatWrapping\"],\n            \"mapLight\": \"tail_inner.jpg\",\n            \"DbgIndex\": 0,\n            \"colorAmbient\": [0.8,0.8,0.8],\n            \"blending\": \"NormalBlending\",\n            \"wireframe\": false,\n            \"DbgName\": \"tail_inner\",\n            \"depthWrite\": true,\n            \"DbgColor\": 15658734,\n            \"vertexColors\": false,\n            \"mapLightRepeat\": [1,1],\n            \"opacity\": 1\n        }]\n    }]\n```\n"},{"labels":["enhancement"],"text":"Hello everyone,\n\nI am fairly new to webGL so please bear with me.\n\nBasically, I outputted a simple collada animation via Blender to test — I load the dae file fine with the ColladaLoader, it shows up in my test, however the animation isn't playing. As far as I understand collada is the file type to use for animation, but why isn't my animation playing?\n\nThanks for an awesome build and easy to use webGL api.\n\nCheers\n"},{"labels":["enhancement"],"text":"I am interested in using Instanced Geometry to help with things like grass and trees etc.\n\nI see no documentation on this in: http://threejs.org/docs/\n\nAlso I've seen InterleavedGeometry as well. I have no idea what this is but would like to know. Again, no mention of it in the docs.\n"},{"labels":["enhancement"],"text":"This error appears when I use BufferGeometry with an index:\nWarning: THREE.BufferGeometry: .addDrawCall() is now .addGroup()\n"},{"labels":["enhancement"],"text":"AMF (Additive Manufacturing File, aka \"STL 2.0\") is an open standard for storing models and assets for manufacturing.  This format is particularly useful for 3D printing as it is the oldest and most supported format that supports multiple materials.  3D print hosts like Cura and Slic3r support AMF to limited capacity.\n\nAMF is based on a zipped XML document.  More information available here: http://amf.wikispaces.com/\n\nI would like to contribute a loader for the AMF format to three.js so that it can join other formats used in manufacturing tasks such as STL.\n\nWork has been completed on an early AMF loader here - https://github.com/tamarintech/model-viewer/blob/develop/loaders/amfloader.js\n\nThe example does not yet meet the standards for mrdoob's coding style and I would very much appreciate a review of my current implementation.  Currently, the AMFLoader function returns two Arrays: geometry[] and materials[].  There is also code that builds an Object3D with child objects.  I am not clear which way to proceed.  This is one of many reasons I would very much appreciate an early review. :)  The code is working and has been used successfully to load the \"Drill Parts\" complex example from the AMF wikispaces site's demo files.\n\n![drillparts](https://cloud.githubusercontent.com/assets/3681218/9984822/deab4b04-5fe4-11e5-9928-5b63e84ddd1a.png)\n"},{"labels":["enhancement"],"text":"@bhouston Can we get r72 added to the npm package? I'm upgrading my project to r72 as I need some of the features it adds.\n\nFor now I'm just going to change my references to the mode module, to point to a copy of r72 somewhere else in my project, and I'll switch it back once to npm package is updated :)\n"},{"labels":["enhancement"],"text":"Hey all,\n\nI'm in the process of updating my particle lib to support r72 and noticed that the [ShaderMaterial docs](http://threejs.org/docs/#Reference/Materials/ShaderMaterial) still have mention of the `attributes` parameter. From what I can gather from the r72 changelog and testing this latest release on my little library, attributes are now removed from ShaderMaterial and should be defined via `BufferGeometry` (well, `BufferAttribute`, anyway). \n\nCheers.\n"},{"labels":["enhancement"],"text":"I just read `lightMap` has been removed from `MeshLambertMaterial` in r72. I have a medium-size scene which can render with lightmaps at 60 fps on low devices thanks to r71-`MeshLambertMaterial`. Isn't the use of `MeshPhongMaterial` heavier for that ? Why remove it from that material ? I don't get the point. Anyway thanks for your huge work in r72. \n"},{"labels":["enhancement"],"text":"I am satisfied currently with just flipping the order of \n\n```\nrenderObjects( transparentObjects, camera, lights, fog, null );\nrenderObjectsImmediate( _webglObjectsImmediate, 'transparent', camera, lights, fog, null );\n```\n\nBut it would be nice to sort the immediate objects along with their three.js counterparts.\n"},{"labels":["enhancement"],"text":"The `shading` property has been removed from `MeshLambertMaterial`, it is only rendered the `SmoothShading` way. \n\nIs it the desired effect ? Phong looks heavier to get this result. \n"},{"labels":["enhancement",null],"text":"Hi,\n\nI made an antl4 v4 grammar to create an initial parsing/interpreting layer https://github.com/antlr/antlr4-javascript.\n\nThis does introduce some runtime dependency on antlr4.  Would this preclude proposing such a loader someday?\n"},{"labels":["enhancement"],"text":"The `OBJLoader` strips vertices without any face while loading. I want to load a point cloud without any faces whatsoever, but this obviously does not work. I do realize stripping make perfect sense in most cases. I think a solution where the vertices & faces are loaded naively at first, and then vertices are stripped in a separate step would be helpful. Then it would be fairly easy to make an option to the load function that disables that step.\n\nMostly unrelated, but from glancing at the code it seems that vertices are duplicated once for each triangle. Any reason for this? Or am I mistaken? \n"},{"labels":["enhancement"],"text":"This line in function renderBufferDirect in THREE.WebGLRenderer has a typo\n\n```\n            renderer.render( 0, position.data.count );\n```\n\nshould be\n\n```\n            renderer.render( 0, count );\n```\n\nCould you make the fix? \nthanks\n"},{"labels":["enhancement"],"text":"`WebGLDeferredRenderer` is currently unmaintained and broken. Unless someone steps in and manages to fix it I think I'll have to remove it...\n\nAny takers?\n"},{"labels":["enhancement"],"text":"Now that bump/normalmaps are using derivatives I wonder if we need the tangents code (`Geometry.computeTangents` and `BufferGeometry.computeTangents`) any longer.\n\nThese are the only examples that rely on it:\n\n**webgl_materials_normaldisplacementmap**\nUses NormalDisplacementShader.js, which I don't know if we should still maintain\n\n**webgl_materials_bumpmap_skin**\nI think it's not needed on this one, but it's currently broken\n\n**webgl_terrain_dynamic**\neasy to port to derivatives I think\n\nDoes anyone rely on this code? And if so, what's the use case?\n"},{"labels":[null,"enhancement"],"text":"I would appreciate, if at some time, you could add at least a rudimentary physic tab to the object properties panels.  A basic one might consist of a shape selection [box, cylinder, mesh, sphere...etc] and a numeric mass, and a velocity vector.   I don't think it needs to be tied to a particular physics library, just some generic concepts.  Basically I would like to load a scene and have some guidance on what physics shape to wrap each object in.\n"},{"labels":["enhancement"],"text":"At the moment `BufferGeometry`'s groups are sorted using the centre of the whole BufferGeometry. In the near future we could consider having a `BoundingSphere` per group so transparent sub parts of a geometry get proper sorted.\n\nFollow up from #7066.\n"},{"labels":["enhancement"],"text":"This is most likely something that is already known but I thought I'd open an issue anyway, just to make sure.\n\nMeshFaceMaterial currently aren't considered when sorting objects into 'opaque' and 'transparent' and there isn't a simple fix for this since we sort by objects and not by mesh part (i.e. a multi-part mesh with a MeshFaceMaterial might have only one transparent part). I'm sure that there are many related issues as well.\n\nI know that @mrdoob is working on a MultiMaterial solution and I hope that this is considered in the final design.\n"},{"labels":["enhancement"],"text":"I tried to create an dashed line material using `BufferGeometry`. For some reason, it looks like whenever you create an line using `LineDashedMaterial`, you will need to call this `computeLineDistances` method. Do we want to add this method inside BufferGeometry as well?\n"},{"labels":["enhancement"],"text":"Creating a simple bump map material results in a shader faliure \nTHREE.WebGLShader: gl.getShaderInfoLog() WARNING: 0:3: '\n' : extension directive must occur before any non-preprocessor tokens \n 1: precision highp float;\n2: precision highp int;\n3: #extension GL_OES_standard_derivatives : enable\n\nshould put #extentions GL_OES_standard_derivatives: enable on top to remove that problem.\nproblem is also seen in http://threejs.org/examples/#webgl_materials_bumpmap.\nThe example works fine, but for any other material/shader use it causes problems.\n"},{"labels":["enhancement"],"text":"I'm using r72dev and non indexed BufferGeometry. \nSometimes I need hide some faces and I use drawcalls for exclude part of geometry.\nAll works fine except raycast.\nAs I see in sources only indexed BufferGeometry uses drawcalls but non indexed no.\n\nIs it by design, not yet implemented or just bug?\n\nThanks.\n"},{"labels":["enhancement"],"text":"Unity & Unreal Engine use blend trees to blend between different clips in a realistic way.  Details are here:\n\nhttps://github.com/mrdoob/three.js/issues/6881#issuecomment-126839845\n\nhttps://github.com/mrdoob/three.js/issues/6881#issuecomment-126890409\n\n/ping @crobi\n"},{"labels":["enhancement"],"text":"[example of bug](http://www.chandlerprall.com/metalbug/) - materials on spheres is identical except for `metal: true` on the right\n\nLooks like [a merge on March 9th](https://github.com/mrdoob/three.js/commit/e83bf8a30d48291ad3d978ef533da632c5f9701e#diff-9d1b6b314b32f4de992810d205b5be65L431) rewrote how `MeshPhongMaterial` handled metal materials.\n"},{"labels":["enhancement"],"text":"A cool blog post from Imagination Technologies, the results are really nice:\n\nhttp://blog.imgtec.com/multimedia/implementing-fast-ray-traced-soft-shadows-in-a-game-engine\n\nWould be great to have implemented in ThreeJS.  Cascading shadow maps are just problematic.\n"},{"labels":["enhancement",null],"text":"I've encountered a problem with the STL loader when I want to load a single STL file that contains multiple solids. Below is an example in a three.js viewer and meshlab (2 cubes in a single STL file).\n\n![screen_shot_2015-07-21_at_11 23 27_720](https://cloud.githubusercontent.com/assets/1134120/8797614/dfbb593a-2f9c-11e5-87cc-396dad974246.png)\n![screen_shot_2015-07-21_at_11 23 16_720](https://cloud.githubusercontent.com/assets/1134120/8797615/dfd895ea-2f9c-11e5-90da-20b2f27b1612.png)\n"},{"labels":["enhancement"],"text":"Been looking at modernizing/formalizing the ThreeJS animation framework to be more similar to Unity/Unreal Engine 4.  There is a lot of great code in ThreeJS but there is a bit of missing top level organization of animation structures, rather there is a lot of duplication.\n\nHere are the classes I've been studying today:\n- SkinnedMesh - derived from Mesh, adds support for array of Bone and Skeleton\n\nThe AnimationHandler/Animation pair:\n- AnimationHandler - a global object for creating and advancing playing Animation\n- Animation - a hierarchy of keyframe animation tracks usually used for bones on a skinned mesh, closely linked to AnimationHandler.\n\nThe following is not compatible with the Animation/AnimationHandler framework:\n- KeyframeAnimation - AnimationHandler independent Keyframe track, only used by Collada example.\n- MorphAnimation - AnimationHandler independent MorphTarget animation, only used by *morphtargets_horse.html examples.\n\nThe following combine scheduling of animations with meshes/mesh hierarchies:\n- BlendCharacter - SkinnedMesh + Animation Scheduler (sometimes used with manually animated morph targets, such as in webgl_animation_skinning_morph.html)\n- MorphAnimMesh - single Morph Target animation (for simple repeating things.)\n- MorphBlendMesh - multiple Morph Target  animation blending (meshes that change between morph target animations.)\n- UCSCharacter - SkinnedMesh + Animation (only used in webgl_morphtargets_human.html)\n- MD2Character - A bunch of MorphAnimMeshes (used only in webgl_morphtargets_md2.html)\n- MD2Charactercomplex - A bunch of MorphBlendMeshes (used only in webgl_morphtargets_md2_control.html)\n\nI'm trying to think of a way of reducing all of these classes into a clearer structure.\n\nI think a structure similar to this might be the way forward:\n- Track - a keyframe animation that contains a name, a set of keys that are composed of times and values.  Keys can be weights, or pos/rot/scale.  The name of the track can refer to morphTargets or bones/nodes or possibly other values within a node.  (We could even abstract Track to not be keyframed, it could be equation based as well if we get the interface right.)\n- Clip - a set of tracks with a name, duration.  An animation sequence, such as blink, walk, jump, etc.  Can be a morph or a keyframe or maybe both.  Similar to [Unity's AnimationClip class](http://docs.unity3d.com/ScriptReference/AnimationClip.html)\n- Action - a clip that is being played.  Would be associated with a root node to which the Track names would be relative.  Would have a blend weight associated with it and can be queued into animation system.  Could optionally loop and have a play speed.  (Will likely require more parameters for various edge cases.)  Similar to [Unity's AnimationState class](http://docs.unity3d.com/ScriptReference/AnimationState.html)\n- Mixer - a container for a number of actions.  Would be responsible for applying the actions to the hierarchy -- it would be sort of like AnimationHandler, it could be global or there could be multiple -- I'm open on this case.  It would be responsible for blending between actions.\n- Animator - a higher level structure on top of Mixer that would contain the logic to do things like walk, run, jump, it would do that by managing what actions are queued up and how they are blended between in order to create a smooth result.  (Will have to be easy to extend to support new entity behaviors.)  Similar to [Unity's Animator class](http://docs.unity3d.com/ScriptReference/Animator.html)\n\nI would get rid of AnimationHandler, Animation (replaced by Clip/Track), KeyframeAnimation  (replaced by Track), MorphAnimation  (replaced by Track), BlendCharacter (replaced by Mixer/Clip/Track), MorphAnimMesh (replaced by Mixer/Clip/Track), MorphBlendMesh (replaced by Animator/Mixer/Clip/Track), USCCharacter, MD2Character, MD2CharacterComplex (replaced by Animator/Mixer/Clip/Track), or at least deprecate them in favor for the Track/Clip/Action/Mixer/Animator design, and this design could drive any objects in ThreeJS, including Materials, Lights and Cameras, if you so desired.\n\nBasically this is a more flexible and actually simpler design.\n\nThe above is very similar to Unity/Unreal Engine.\n"},{"labels":["enhancement"],"text":"This started here #6749.\n\nSince r72 now supports skeletal animations with `BufferGeometry` I thought i could get rid of `Geometry` which accounts for roughly 75% of the browser memory consumption in my app.\n\nThis is not as straight forward (currently) as I had hoped.\n\nThe auto conversion to `BufferGeometry` via `BufferGeometry.setFromObject` is nice, but it does leave the original `Geometry` object attached to the `Mesh` or `SkinnedMesh`. Though there now is additional consumed memory from having the `Mesh._bufferGeometry` in addition to `Mesh.Geometry`, everything works and renders just fine.\n\nWhat I am trying to do hear is eliminate the `Mesh.Geometry` entirely. So instead of letting the auto convert happen, I tried essentially this...\n\n```\nvar geo = jsonLoader.parse(mygeojson).geometry;\n\ngeo = new THREE.BufferGeometry().fromGeometry(geo);\n\nvar mesh = new THREE.SkinnedMesh(geo,skinmat);\n\n```\n\nNo luck. My guess is that `Geometry` needs to be passed to `SkinnedMesh` to properly parse the skeleton. I noticed that `BufferGeometry` does not have a `Bones` attribute, only `SkinIndices` and `SkinWeights` So this makes sense why the auto convert works. The `Geometry` with it's bones are passed to `SkinnedMesh`, properly attaching the skeleton to the mesh. The auto convert then happens, attaching the `_bufferGeometry` to the mesh and all is rendered well.\n\nIs there a way to do what I want and pass `BufferGeometry` directly to `SkinnedMesh`, or is this not implemented yet? The memory overhead reduction would be massive.\n\nPS. I considered posting this on SO, but since r72 is not released, I figured contributors would be pretty much the only people to know the answer.\n\nEDIT\n\nI also saw this in `THREE.SkinnedMesh`:\n\n```\n    // init bones\n\n    // TODO: remove bone creation as there is no reason (other than\n    // convenience) for THREE.SkinnedMesh to do this.\n```\n\nWill we still be able to attach objects to the `SkinnedMesh`? For example I currently attach weapons to the models handR bone. What would happen to `THREE.Skeleton` along with it's `useVertexTexture` property?\n"},{"labels":["enhancement"],"text":"I added this simple peace of code in BoxHelper (at the top of the update function) for Object3D that are Mesh container, so they don't have geometry property. \n\n``` javascript\nvar min, max;\nif (object.type == 'Object3D') {\n    var box = new THREE.Box3().setFromObject(object);\n    min = box.min;\n    max = box.max;\n    } else if (object.type == 'Mesh') {\n        var geometry = object.geometry;\n        if ( geometry.boundingBox === null ) {\n            geometry.computeBoundingBox();\n        }\n        min = geometry.boundingBox.min;\n        max = geometry.boundingBox.max;\n        this.matrix = object.matrixWorld;\n    }\n}\n```\n\nMaybe this can be added to the offical source ?\n"},{"labels":["enhancement"],"text":"Dear ThreeJS developers!\n\nPlease implement \"fit all\" (\"show all\") feature to the camera and/or OrbitControl and other controls.\nThis feature is very missing thing. \n\nTo provide some help, here is implementation of same feature in X3dom:\nhttps://github.com/x3dom/x3dom/blob/master/src/Viewarea.js#L1077\n\nAlso, there is \"fit object\" (e.g. show object) feature:\nhttps://github.com/x3dom/x3dom/blob/master/src/Runtime.js#L631\n\nMany thanks in advance.\n\nPlease do not refer me to other feature requests like https://github.com/mrdoob/three.js/issues/1095\n\nIf you deny to do this, please at least point me, where is it better to code it, e.g. in camera, or in OrbitControl/etc, to get them (camera and control) synchronized?\n"},{"labels":["enhancement"],"text":"I find myself calculating sums like number1 \\* vector1 + number2 \\* vector2 + .... quite often (mostly for averaging or interpolating). Far more often than I had to use addScalar method (which was never). But in order to do so I need to create temporary vector, set this vector for every addend, multiplyScalar it and then finally add it. Or, I could just inline everything and not use Vector3 methods.\n\nWould it not be nice to have something like\n\n```\n    addScaledVector: function ( v, s ) {\n\n        this.x += v.x * s;\n        this.y += v.y * s;\n        this.z += v.z * s;\n\n        return this;\n\n    },\n```\n\ninstead?\n\nVector3 already has lerp, which is fine for two vectors, but it can be 3 vectors (think vertex normals) or more.\n\nSame applies to Vector2 (uv and stuff).\n"},{"labels":["enhancement"],"text":"I'm modifying the Mesh.raycast method to return the intersectionPoint in uv coordinates if material.map and uvs are defined in the geometry (geometry.attributes.uv or geometry.faceVertexUvs[0]). I called the member of the returned object uv.\n\nIt 's working in most cases, I still have to code some of the Texture.mapping value, but I have a question.\nWhat are attributes.uv2 in BufferGeometry and other indexes than 0 of faceVertexUvs in Geometry for?\nIn my tests they are undefined.\n\nI have done my calculation on attributes.uv or faceVertexUvs[0].\nShould I do the same thing on attributes.uv2 or faceVertexUvs[n] if they are defined?\nI the answer is yes, do Texture.flipY and Texture.mapping affect the result the same way for attributes.uv2 or faceVertexUvs[n] as they do for attributes.uv or faceVertexUvs[0] ?\n\nI my case knowing where the intersection point is in the texture is mandatory for my code. My google search let me think I'm not the only one to need the information.\nShould I add that information to the \"standard\" three.js?\nAs I nether contribute to any github project, if you think the code should be added, how should I process?\n"},{"labels":["enhancement"],"text":"Bone, skeleton and Lensflare objects are not cloning properly, while cloning these objects all properties are not cloning properly.\nReason: clone function missing.\n"},{"labels":["enhancement"],"text":"When initializing a new instance of TextGeometry, it will always throw `Uncaught The font FONT_NAME with normal weight and normal style is missing.` if the string passed as `font` contains any uppercase characters. Special characters and punctuation within font names do not cause an issue, only uppercase letters.\n\nThis quirk is not mentioned in the [documentation](http://threejs.org/docs/#Reference/Extras.Geometries/TextGeometry) and had me running around for the better part of 30 minutes before I found out about it.\n"},{"labels":["enhancement"],"text":"Hi I am trying to make a model customizable at run time. My Idea was to assign names to groups in model I created in 3d max. Then somehow be able 'replace' those groups at runtime.  But when I converted my .obj file to js I found that .js file hadn't retained group names. Instead I found that groups were being represented as materials. \n"},{"labels":["enhancement"],"text":"A shadow should only multiply the light coming from its caster. Instead each shadow multiplies all lights in the scene. This is physically incorrect and impractical for creating good lighting.\n\nTo reproduce edit webgl_shadowmap_viewer.html\n1. Reduce the intensity of all existing lights to 0. (scene should be completely dark)\n2. Add another directional light (not shadow casting)\n3. Notice that two shadows are still visible in the new light source.\n"},{"labels":[null,"enhancement"],"text":"I am trying to import OBJ's MTL file in threejs editor for material and texture of the obj 3d model.\nI want to help out with this if this is not implemented.\n\nI believe it need to follow [JSON Material format](https://github.com/mrdoob/three.js/wiki/JSON-Material-format-4). Can anyone tell the the implementation plan for this?\n\n``` mtl\nnewmtl material_0\nKa 1.000000 0.000000 0.000000\nKd 1.000000 1.000000 1.000000\nKs 0.000000 0.000000 0.000000\nTr 1.000000\nillum 0\nNs 0.000000\nmap_Kd model_texture.jpg\n```\n"},{"labels":["enhancement"],"text":"There is an issue in Texture.js with the current dev version (r72dev) of the toJSON method.\n\nThe code make the assumption that this.image is an image.\nIt can be a canvas.\n\nIf it’s a canvas, the serialization can be easy with two options, do nothing or canvas.toDataURL() of the current image in the canvas.\n\nAs the serialization of the canvas (as a meaningful object) should be done by the code which introduce the canvas, I think the best option is do nothing and let the owner of the canvas (like me) do the job.\n\nI also have a question about the way the image is serialized when it's on a web server at https://github.com/mrdoob/three.js/issues/6618 8th comment.\nI don't find a way to make a direct link to it\n"},{"labels":["enhancement"],"text":"Hi @dmarcos @mrdoob ,\n\nI notice that WebVR APIs have been changed. We can refer the new APIs here, https://developer.mozilla.org/en-US/docs/Web/API/HMDVRDevice/getEyeParameters .\n\nI don't know if there is any browser that still uses the older one. I didn't try the WebVR demo on Chrome yet. And on Firefox nightly, it works well.\n\n```\nvar leftEyeParams = vrHMD.getEyeParameters(\"left\");\nvar rightEyeParams = vrHMD.getEyeParameters(\"right\");\nthis.leftEyeTranslation = leftEyeParams.eyeTranslation;//vrHMD.getEyeTranslation( \"left\" );\nthis.rightEyeTranslation = rightEyeParams.eyeTranslation;//vrHMD.getEyeTranslation( \"right\" );\nthis.leftEyeFOV = leftEyeParams.recommendedFieldOfView;//vrHMD.getRecommendedEyeFieldOfView( \"left\" );\nthis.rightEyeFOV = rightEyeParams.recommendedFieldOfView;//vrHMD.getRecommendedEyeFieldOfView( \"right\" );\n```\n\nWe also can refer the new version VREffect.js here, https://github.com/MozVR/vr-web-examples/blob/master/threejs-vr-boilerplate/js/VREffect.js\n"},{"labels":["enhancement"],"text":"Doesn't need to be done during this cycle, but I think we should move the current `MeshLambertMaterial` out of core.\n\nWhat I mean with that is that we'll still have `MeshLambertMaterial` which will pretty much be the same as `MeshPhongMaterial` but without specular. `MeshLambertMaterial` currently creates a per-vertex shader. I think we can move the \"compiled\" shader to examples under the name of `MeshGouraudMaterial` or so... That way all the material/shaders in core will be per-pixel and things will be simpler to maintain.\n\nThoughts?\n"},{"labels":["enhancement"],"text":"I noticed that sometimes this exporter creates file with wrong skin weights. I am allways using biped. \nSometimes it wiroks fine sometimes not.\nWho is the author of this script?\n\nPS: I want to write exporter for BlendCharacter with multiple animations.\n"},{"labels":["enhancement"],"text":"I was trying to export a large file to the .json format with the new exporter (r71) and the process would simply hang. The mesh had 600k faces but even when decimating it to around 200k faces nothing it would be immensely slow and take 100% CPU.\n\nI found this issue : https://github.com/mrdoob/three.js/issues/6031 which seems to be the same problem but it says it would be fixed in the latest release yet it doesn't seem to be.\n\nI tried the old exporter (r69) and it managed export the mesh to .json in <20 seconds.\n"},{"labels":["enhancement"],"text":"I recently played a lot with the current r71 Blender exporter, there are a few things I stumbled across. \n- Exporting buffer geometry dosent't compile a correct json file, it misses a \"data\" attribute. Which later in the loading process cause an error.  \n  ![screenshot](https://cloud.githubusercontent.com/assets/8083536/7549625/fc7c71b4-f63d-11e4-9b4f-1be71eaf60cb.png)\n- If you are in Blender and in edit mode while exporting, the script throws an error -> Can't apply the Triangulate modifier in edit mode. The exporter has to make sure that Blender is in Object mode, if not switch to Object mode.\n- I can not export a scene which contains animations, the scene will be exported except for the animations. It doesn't matter if it's a bone or keyframe animation. \n  Might be cool to export a scene with animation data.\n  It seems there are a lot of things which not work correctly with the scene exporter, like vertex colors or multi material objects. \n- there is a shadeless material button in the Blender material panel, would be nice if it exports that material value as well\n- export Flat and Smooth shading type as well\n\nI :heart: three JS, great work\n"},{"labels":["enhancement"],"text":"can't convert ttf file for threejs no more\nis there diffrent way?\n"},{"labels":["enhancement"],"text":"How do I make the SoftwareRenderer background transparent?   I hoped this would work, but it doesn't seem to :(\n\n```\nrenderer = new THREE.SoftwareRenderer( { alpha: true } );\nrenderer.setClearColor( 0x000000, 0 );\n```\n"},{"labels":["enhancement"],"text":"ANGLE has a long standing bug where we would allow bad shaders with #extension directives after non-preprocessor tokens. After fixing this, we noticed it would break some three.js samples, for example, http://threejs.org/examples/webgl_materials_bumpmap_skin.html. This extends to other forks of three.js like xg.\n\nI noticed in WebGLProgram.js, in the prefix_fragment section, you could place the #extension directive before the precision statements. If you fix this, and update the sample above, maybe that would fix this one particular instance.\n\nFor reference, the relevant section of the spec:\n\n\"[ESSL 1.0.17 pg 15]\nEach extension can define its allowed granularity of scope. If nothing is said, the granularity is a single\ncompilation unit, and the extension directives must occur before any non-preprocessor tokens. If\nnecessary, the linker can enforce granularities larger than a single compilation unit, in which case each\ninvolved compilation unit will have to contain the necessary extension directive.\"\n\nThe Chromium bug tracking these breaks: http://crbug.com/483252.\n\nIt would be nice if someone could take this up. Even if we can't make this change in Chrome very soon, it would be good to stop new demos and forks of the code from having the issue if we do get to the point where we can switch the validation on, to pass WebGL Conformance.\n"},{"labels":["enhancement"],"text":"https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L2574\n\nPlease add the support like in other drawing methods.\n"},{"labels":["enhancement"],"text":"My blender scene (low poly vallay with some trees): http://jppresents.net/static/blender/exportBug/untitled.zip (contains blend file)\n\nExported with the settings:\n- geometry: vertices, faces, normals\n- shading: face materials\n- scene: scene, materials, hierarchy\n\nResults in this export file: http://jppresents.net/static/blender/exportBug/scene.json\n\nEvery object now has only one material (in the export file, there is a property \"material\" on every mesh, and it's just one uuid. All materials assigned to the faces seem to get lost.\n\nThis is using Blender 2.74 with the dev exporter.\n\nFor comparison:\nhttp://jppresents.net/static/blender/exportBug/blender.png\nhttp://jppresents.net/static/blender/exportBug/three.png\n"},{"labels":["enhancement"],"text":"Example\n\n```\nvar bufferGeometry = new THREE.SphereBufferGeometry( 10, 16, 8 );\n\nvar geometry = new THREE.Geometry().fromBufferGeometry(  bufferGeometry );\n```\n"},{"labels":["enhancement"],"text":"Looks like when sortParticles was removed in r70, it broke the ability to use transparent sprites that are sorted. Was this intentional?\n\nWhen using shader material for point cloud like this:\n`new THREE.ShaderMaterial({...,\ndepthTest: true, depthWrite: false, transparent: true\n});`\n\nExample working great using r69\nhttp://jsfiddle.net/qb6960Lx/10/\n\nSame example using r70 showcasing the problem\nhttp://jsfiddle.net/qb6960Lx/13/\n\nAlso occurring with r71\nhttp://jsfiddle.net/qb6960Lx/12/\n\nMore details at this stackoverflow post: \nhttp://stackoverflow.com/questions/29869437/three-js-sprite-depths-rendering-backwards-in-r70/29870321?noredirect=1#comment47896554_29870321\n"},{"labels":["enhancement"],"text":"This is really neat and better than any SSAO technique I have read about yet:\n\nhttp://graphics.cs.williams.edu/papers/SAOHPG12/McGuire12SAO-talk.pdf\n\nSample code:\n\nhttps://gist.github.com/fisch0920/6770311\n\n/ping @erich666 as I think you were thanked in the presentation for your contributions. :)\n"},{"labels":["enhancement"],"text":"Hi,\n\nUsing:\n\nChrome: Version 41.0.2272.3 dev (64-bit) - Ubuntu\nThreejs: r71\n\nI'm doing a polymer element to load GLTF models.\nI've came across a possible bug.\n\nSome times the loader would do any error, but wouldn't call the callback function.\nAfter investigating for a bit I've notice that only after a mesh (.bin) is loaded does the loader checks if it's complete and runs our callback.\nI my case, although the XHR call for the shader (two of them) was been made before the .bin request, one of the shaders would be loaded after the .bin. \nThis just happens some times on the local machine, but still when getting the shaders (or another stream) the loader should again check if everything is completed to apply the callback.\n\nDoes this makes sense or am I doing something wrong ?\n\nThank you in advance.\nI'll be happy to send more info if requested.\n"},{"labels":["enhancement"],"text":":'(\n"},{"labels":["enhancement"],"text":"I'm reviewing the http://threejs.org/examples/#vr_video and there are two scenes to render a different part of the video corresponding to the left and right eye shot. But I thought if I will need to add some HUD elements, this option would make me hard to include 3D elements over this stereoscopic background. \n**In this case, the right way would be included in a third scene? or duplicate in both scenes?**\n\nWhat I did (with an image instead a video) is to create 2 meshes (one for each eye) and changed StereoEffect and VREffect to make visible or hide each mesh on every render before \"paint\" every part of the scene.\n**Makes sense? or will have a worse performance?**\n\n![image](https://cloud.githubusercontent.com/assets/5744112/7254440/5e595676-e843-11e4-9141-e18413a6e3d4.png)\n\nExample working > www.unboring.net/lab/image3DPano (Cardboard & Oculus)\nSource code > www.unboring.net/lab/image3DPano/image3DPano.zip\n"},{"labels":["enhancement"],"text":"Hello,\nI have implemented a 3D graph with parameters in X,Y,Z axis, would like to push it in threeJS as Graph helper repository. (Snapshots attached) \n1. Basic View (Sample with DAT.GUI controls)\n![1](https://cloud.githubusercontent.com/assets/878233/7219365/742f1a02-e6b9-11e4-9e76-3c15c9ebddd8.png)\n1. Rotate about X axis\n   ![2](https://cloud.githubusercontent.com/assets/878233/7219367/82c73a40-e6b9-11e4-8b31-338fd75d4f44.png)\n2. Rotate about Y Axis and Tool-tip\n   ![3](https://cloud.githubusercontent.com/assets/878233/7219369/92558a48-e6b9-11e4-8a3f-82e4aa2df12d.png)\n"},{"labels":["enhancement"],"text":"This might be the intend though.\n"},{"labels":["enhancement"],"text":"http://threejs.org/docs/#Reference/Core/Geometry is missing `center` method, in the github there is.\nAm I wrong?\n"},{"labels":["enhancement"],"text":"Hi\nI've experimented with three.js few days, and it seems to bee very cool.\nBut one thing bothers me, there is something not right with shadows.\nIn reality shadow doesn't exist, it is just place where light does not reach, but in three.js lights are first calculated and after that shadows are casted.\n\nSo I've tried different approach, first created new material, called it MeshPhong2Material\nIt uses exactly same code as MeshPhongMaterial, except shadows and spot lights.\n\nI disabled spot lighting code in fragment shader, and then put spot light calculations directly to the loop where shadows are casted, changed it a bit, and added several uniforms for light information.\nSo no need to _cast_ any shadows, to not put light on shadowed areas is enough, and thats it.\n\nThe result you can see on screens below. On the scene are 4 spot light, colors of those are more-less: red,green,blue and white, shadow maps are 2048 x 2048px\nAs a side effect most acne problems dissapeared , for free.\nshadowDarknes parameter is not needed anymore.\nAnother good thing, it seems to be about 30% faster on my laptop's Nvidia NVS 3100M than current shadows, with this scene at least,  22fps vs 16fps,\nthis is because light is not calculated anymore in shadowed areas.\n\nThis method fits closer to real lights, as you can see there are colored shadows, exactly like in nature with this kind of lights.\n\nWhat i've done is now just a proof of concept, code is a 'dirty hack', for experiments only. \nIt works now only with spot lights. Spot lights without shadows do not work.\nI am not sure how to to put it in three.js in the proper way, maybe add new material, new light type, or just flag in existing ones.\n\nThere is problem with current three.js structure, shadows are a plugin which like separate thing, to make it work with lighting requires to add additional uniforms with lighting information, because current shadowmap does not know to which light it bellongs.\n\nIt would be nice to see this method as an alternative to current shadows.\nWhat do you think?\n\nHere is working example: http://cypd.vot.pl/shadowexperiment/\nJust play a bit with settings, most difference is when 2 light are enabled, you can control the camera using mouse.\n\n4 lights,\noriginal shader:\n![2](https://cloud.githubusercontent.com/assets/11931060/7190143/3fc3ee32-e484-11e4-8d51-57c65e5ac606.png)\n\nmodified shader:\n![1](https://cloud.githubusercontent.com/assets/11931060/7190144/3fc4323e-e484-11e4-97dc-b6e9c35de933.png)\n\n2 lights\noriginal shader:\n![4](https://cloud.githubusercontent.com/assets/11931060/7190146/3fcb9470-e484-11e4-9b35-b8ca95db8dc2.png)\n\nmodified shader:\n![3](https://cloud.githubusercontent.com/assets/11931060/7190145/3fc9d5d6-e484-11e4-872d-f8fb47b9d94c.png)\n\nregards\nCypD\n"},{"labels":["enhancement"],"text":"I would like to see three.js have quadsphere support\nI have found a [quadsphere library](https://github.com/merpnderp/webglquadtreeplanet/) using an old version of three.js\nI have attempted to contact the author but he has not got back to me :(\n"},{"labels":["enhancement"],"text":"I've created a scene where there's an outer box that's being rendered from the inside (THREE.BackSide). Inside the main box I've placed two smaller boxes (also being rendered from the inside), some particles, and a text Sprite. All the boxes have transparency enabled.\n\nAll seems to work well enough, except the sprite not being visible through the inner boxes, and only through the outer one. Here's an example (with OrbitControls enabled): http://jsfiddle.net/rgE2j/104/\n\nAfter some digging I found this: http://stackoverflow.com/questions/19046972/three-js-cannot-view-a-sprite-through-a-mesh-with-transparency\n\nWhich had me change my example to: http://jsfiddle.net/rgE2j/106/\n\nThe latter example works. However, my question is: Is this behavior to be fixed in the future, or is the workaround the way to go?\n\nMany thanks!\n"},{"labels":["enhancement"],"text":"The functionality of the 3ds MAX Exporters is essential, especially the Animation script considering Collada does not support Skeletal Animation (as far as addressable bone positions and blending, etc.)\n\nHowever, none of the current MAX exporter scripts handle smoothing at all well. \n\nCould someone possibly look into this as I would imagine a number of users of THREE construct their models in MAX and need smoothing groups to be correctly implemented. \n\np.s. also change the 'transparency' property of material to 'opacity' :)\n"},{"labels":["enhancement"],"text":"PointCloud.sortParticles was removed between r69 and r70, but the change is not documented in the tag description or the migration guide.\n"},{"labels":["enhancement"],"text":"I have a suggestion for the modification Tranform Controls for transformation on multiple objects simultaneously. Should we expect a this in the near future?\n"},{"labels":["enhancement"],"text":"I wanted to use both keyframe animation and bone/skinnedMesh animation in one scene. But when I tryed to use THREE.AnimationHandler.update() in animate, I got an error. But by extending the resetBlendWeights-call with the following if-condition it works fine\n\n``` javascript\nif (this.animations[i] instanceof THREE.Animation) {\n    this.animations[ i ].resetBlendWeights( );\n}\n```\n\nSetup: Blender 2.72b Collada exported file; Windows 8.1 Intel HD Graphics 3000 in \"all\" browsers; Three.js 70 and 71\n"},{"labels":["enhancement"],"text":"For geometries with vec2 positions, the computeBoundingSphere will not work correctly since it always assumes vec3s.\n\nhttps://github.com/mrdoob/three.js/blob/f73593b00e3b2c927bb1a3236240cea5597166ec/src/core/BufferGeometry.js#L327-L332\n"},{"labels":["enhancement"],"text":"When exporting files from blender the result in three.js is way more specular then what you see in blender. I believe that is because the materials that get exported are MeshPhongMaterials, where the materials look more like MeshLambertMaterials. Another possiblility is that the lights in three are brighter than in blender.\n\nAttached are (in this order) an render from blender, and a render from three, I also included the blendfiles and a test html file.\n\n![Image in blender](https://cloud.githubusercontent.com/assets/660421/6782284/6cbcc914-d173-11e4-91f7-87cbc85252b5.png)\n\n![three](https://cloud.githubusercontent.com/assets/660421/6782335/af7e0b14-d173-11e4-816d-56f5b65aa10c.png)\n\nHere is the test code as well as the blender file:\nhttps://gist.github.com/windwarrior/3ba349f36d74d560de90\n"},{"labels":["enhancement"],"text":"It's unclear how the exported \"fps\" and \"length\" properties in animation data are related. from what i can tell the \"fps\" setting is completely ignored so I can't figure out if length is referring to the exported \"number of frames\", or the \"length the animation is supposed to last\" in seconds. If it is the \"number of frames\" then of course fps has a meaning, however, if it is the length in seconds, fps is redundant.\n\nIt'd be nice if the documentation explained this somewhere, since it's a bit vague, and from my tests with the packaged models, using the fps value assuming length refers to frames gives an animation that's far too fast.\n\nhaving both seems kind of redundant but the exporter is creating them for some good reason im sure\n"},{"labels":["enhancement"],"text":"Hi,\n\nin Firefox I have these annoying messages in the console 'not well-formed' if the OBJMTLLoader loads some mtl files. After some research I found out that the reason for this message the missing responseType by invoking the XHR is. Mtl files are simple text files. Right? If in the XHRLoader the responseType is not set (undefined) the error message appears.\n\nPlease change the MTLLoader, the OBJMTLLoader so that the responseType can be passed as parameter and can be honoured from the XHRLoader.\n\nThanks a lot.\n"},{"labels":["enhancement"],"text":"here's a scene.json with two objects at the same place, one should be offset but when importing into the editor these values seem to be ignored, if you export this scene after importing it those polygonOffset attributes that were present are no longer there http://pastebin.com/igFGGYXs\n\n```\n\"materials\": [\n    {\n        \"uuid\": \"2F4C3886-0DEE-4CFA-840F-D75D413BB17A\",\n        \"type\": \"MeshBasicMaterial\",\n        \"color\": 16777215,\n        \"opacity\": 0.9,\n        \"transparent\": true,\n        \"polygonOffset\": true,\n        \"polygonOffsetFactor\": -15,\n        \"polygonOffsetUnits\": 1,\n        \"depthTest\": true, \n        \"depthWrite\": false\n    },\n```\n"},{"labels":[null,"enhancement"],"text":"hey it would be great to have an option to reduce the floating point precision when exporting things from the threejs editor, I uploaded a file with two decimal places and after exporting it had 14-15 decimal places. For objects with 1m+ vertices that can add up quickly\n"},{"labels":["enhancement"],"text":"In [ths](https://github.com/mrdoob/three.js/blob/dev/src/loaders/ObjectLoader.js#L85) switch case the **PlaneBufferGeometry** is missing. This result in an error because geometry.uuid is not defined, when loading a plain buffer geometry from json.\n"},{"labels":["enhancement"],"text":"I use different export settings for different blender files. These settings are currently saved into the `/tmp` of the current blender session, i.e., they are only persisted for the current blender session.\n\nI was thinking about persisting them permanently for each blender file.\n\nPossible solutions:\n1. save a config file next to the `.blend` file\n2. save settings as custom properties added to the scene\n3. save settings in an embedded text file (usually used for py scripts)\n\nOpinions? @repsac?\n\nSorry for the exporter spam today ;-)\n"},{"labels":["enhancement"],"text":"When i deserialize a THREE.Line object it has alway the default color.\nMaybe [here](https://github.com/mrdoob/three.js/blob/dev/src/materials/Material.js#L180) is the case for LineBasicMaterial  missing?\n"},{"labels":["enhancement"],"text":"I serialized a THREE.Line object with .toJSON (mode = 1).\nWhen i deserialze it with ObjectLoader.parse the mode is 0 (default value).\nWhy is the mode not considered [here](https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js#L700) and [here](https://github.com/mrdoob/three.js/blob/master/src/loaders/ObjectLoader.js#L308)?\n"},{"labels":[null,"enhancement"],"text":"As a test case, I've animated the default Blender cube along the z-axis for 20 frames. In the Dope Sheet, it looks like this:\n\n![export-issue-1](https://cloud.githubusercontent.com/assets/1110286/6433365/0b7dac8c-c065-11e4-8481-c8dbd0210994.png)\n\nThen, I've selected the armature and the cube, and exported with the following settings:\n\n![image](https://cloud.githubusercontent.com/assets/1110286/6433375/438328aa-c065-11e4-82ea-c9450f630c16.png)\n\nIf I then try to play the animation again, red lines appear in the dope sheet, and the animation doesn't play:\n\n![image](https://cloud.githubusercontent.com/assets/1110286/6433389/c93c44f4-c065-11e4-9ede-bedf33dbfa56.png)\n\nIn the Dope Sheet, I've tried selecting Channel > Revive Disabled F-Curves, which makes the red lines go away but doesn't fix the issue.\n"},{"labels":["enhancement"],"text":"Currently, a lot of dollyOuts are triggered, that are not intended.\n\nSee patch:\n\n``` javascript\n@@ -416,15 +416,15 @@\n            dollyEnd.set( event.clientX, event.clientY );\n            dollyDelta.subVectors( dollyEnd, dollyStart );\n\n            if ( dollyDelta.y > 0 ) {\n\n                scope.dollyIn();\n\n-           } else {\n+           } else if ( dollyDelta.y < 0 ) {\n\n                scope.dollyOut();\n\n            }\n\n            dollyStart.copy( dollyEnd );\n\n@@ -608,15 +608,15 @@\n                dollyEnd.set( 0, distance );\n                dollyDelta.subVectors( dollyEnd, dollyStart );\n\n                if ( dollyDelta.y > 0 ) {\n\n                    scope.dollyOut();\n\n-               } else {\n+               } else if ( dollyDelta.y < 0 ){\n\n                    scope.dollyIn();\n\n                }\n\n                dollyStart.copy( dollyEnd );\n\n```\n"},{"labels":["enhancement"],"text":"Not sure if this has been discussed but when using SubdivisionModifier on a mesh with open edges, they are forming a jagged line, not even as I believe it should be:\n\n![Mesh](https://cloud.githubusercontent.com/assets/661820/6374147/f08b7c12-bd06-11e4-92bd-f6455714afe4.png)\n\n![Subdivided Mesh](https://cloud.githubusercontent.com/assets/661820/6374150/f8c01ffa-bd06-11e4-93bb-40073e2995ff.png)\n\nhttp://codepen.io/znak/pen/QwrPOb?editors=001\n\nIs this a bug or can it be overcome somehow? Thanks!\n\nthree.js r70 / Safari 7.1.3 / Mac OS X 10.9.5 / NVIDIA GeForce GT 120\n"},{"labels":["enhancement"],"text":"I posted an issue on stack overflow here:\n\nhttps://stackoverflow.com/questions/28682529/wrong-pivot-point-for-certain-fbx-models-imported-into-threejs\n\nAny help for getting pivots to line up between Maya FBX and ThreeJS would be appreciated.\n"},{"labels":["enhancement"],"text":"I'v created an addon for blender to bake lightmap for selected object. it also check/add two uv layers into object and unwrap them.\n[Easy Light Map](https://github.com/mese79/easy_lightmap)\nI hope this helps you.\n"},{"labels":["enhancement"],"text":"This is more of a quick fix, though I'm not sure where to delve into the exporter source just yet.\n\nIn blender, it's easy to get quaternions that are not normalized, especially when using _Push Pose_ (`Ctrl+E`). For example:\n\n![image](https://cloud.githubusercontent.com/assets/3529065/6206790/f88f748a-b55f-11e4-9344-d0c0ad38744b.png)\n\nHowever, these get exported without being normalized.\n\n``` json\n{\n  \"keys\": [{\n    \"time\": 0.283333,\n    \"pos\": [-0.104213,-0.116123,-0.0],\n    \"rot\": [-0.500419,0.0,-0.0,1.178179]\n  }]\n}\n```\n\nWhen imported, it causes `THREE.SkinnedMesh` to scale strangely, as non-normalized quaternions usually do.\n\nThis can be fixed by normalizing them in the exporter.\n"},{"labels":["enhancement"],"text":"Hi\nBased on this [merge](https://github.com/mrdoob/three.js/commit/eed8ae4e43d7f08bbfad7922a92764e82ceae729), the new ObjectLoader only loads one map(diffuseMap) rather than loading all other maps like lightMap or normalMap.\n\n```\nparseMaterials: function ( json, textures ) {\n\n        var materials = {};\n\n        if ( json !== undefined ) {\n\n            var loader = new THREE.MaterialLoader();\n\n            for ( var i = 0, l = json.length; i < l; i ++ ) {\n\n                var data = json[ i ];\n                var material = loader.parse( data );\n\n                material.uuid = data.uuid;\n\n                if ( data.name !== undefined ) material.name = data.name;\n                // *** Here should checks for other maps too. ***\n                if ( data.map ) {\n\n                    if ( !textures[data.map] ) {\n                        console.warn( 'THREE.ObjectLoader: Undefined texture', data.map );\n                    }\n\n                    material.map = textures[data.map];\n\n                }\n\n                materials[ data.uuid ] = material;\n\n            }\n\n        }\n\n        return materials;\n\n    }\n```\n"},{"labels":["enhancement"],"text":"Currently skeletal animation keys as passed to THREE.Animation constructor are like this:\n\n``` javascript\n{\n   pos: [ , , ],\n   rot: [ , , , ],\n   scl: [ , , ],\n   time: \n};\n```\n\nthe problem is that it is required that both pos, rot and scl fields be present.\nThis is problematic depending on the animation.\nSuppose we have a bone animated like this:\nFrame 1) Set rotation, set position\nFrame 2) Interpolate rotation, interpolate position\nFrame 3) Set rotation, interpolate position\nFrame 5) Interpolate rotation, interpolate position\nFrame 6) Interpolate rotation, set position\nFrame 7) Interpolate rotation, interpolate position\nFrame 8) Set rotation, interpolate position\netc. etc.\nit is impossible to pass such animation to three, because some keys will have either rotation or position set and expect the other to be interpolated from values defined in a previous key.\n\nIf a key is passed without the pos array, it will give errors of \"Cannot read property '0' of undefined\" in three.js:29612.\n\nIf a key is passed without the rot array, it will give errors of \"Cannot read property 'x' of undefined\" in three.js:728.\n\nThis has become quite annoying as I am trying to correctly implement a loader for a format that allows keyframes to have only position or only rotation set.\n"},{"labels":["enhancement"],"text":"Hi everyone,\nI have been looking for an easy way to add simple planar shadows to my Mesh objects without resorting to ShadowMaps (which run slowly even on my latest Samsung smartphone).  Since there weren't any pre-existing methods, I decided to create one!  Here's a demo: \n[ShadowMesh-Demo](http://erichlof.github.io/ShadowMesh-Demo/webgl_shadowmesh.html) <br>\nA demo showing use of ShadowMeshes for groups of objects (which are not children of the Scene, but children of a THREE.Group parent):\n[ShadowMeshGroup-Demo](http://erichlof.github.io/ShadowMesh-Demo/ShadowMeshGroup-Demo.html)  <br>\nAnd here is a more advanced demo showing the capability of multiple shadow instances tracking their parent objects,  which can be used for multiple wall planes in a small room:\n[ShadowMesh-MultipleInstancesDemo](http://erichlof.github.io/ShadowMesh-Demo/ShadowMesh-MultipleInstancesDemo.html) <br>\n\nThe proposed new ShadowMesh's constructor looks like this:\n\n``` javascript\nvar shadow = new THREE.ShadowMesh( parentMesh );\n```\n\nThere are about 20 lines of setup before you can call this method, but most of those lines should already be in any three.js app anyway - such as creating a scene, a light source, and a Mesh object.  The new method's additional setup requires creating a ShadowMesh that will act as the shadow to its parent.  Also a THREE.Plane() object and a THREE.Vector4D() object must be created to be passed into the ShadowMesh's 'update' method.  Detailed, step-by-step instructions can be found here:\nhttps://github.com/erichlof/ShadowMesh-Demo\n\nOnce these setup steps are complete, the actual usage is just 1 line of code!  For instance: <br>\n\n``` javascript\nshadow.update( groundPlane, lightPosition4D );\n```\n\nThe above line of code is called once every animation frame to continually update the shadow to match its parent.  This update method is where the magic happens: the shadowMesh 's geometry is essentially skewed and squashed down flat onto the specified plane.  It is then rotated, translated, and scaled to match its parent.  The result is a simple, fast-performing, correct planar shadow.\n\nAs with any shadowing method, there are limitations: <br>\n1. These planar shadows are confined to the plane that you specify.  They will not 'crawl' up the walls or darken other meshes, unless you create multiple instances like in the advanced demo above.  If you need ultimate robustness, three.js ShadowMaps may be your best choice.  Three.js used to also have support for volumetric stencil shadows, but they are no longer found in the codebase.\n2. Since these shadows are confined to the plane, they might run off the edge of the plane into space.  Some ways of getting around this are to have the background the same color as the shadow, or have a very large ground plane, or cover the edges with another plane as in room corners.\n3. A separate 'ShadowMesh' must be created for every Mesh that you want shadowed in the scene.  This should perform fine, but if the number of objects gets into the 1000's, again ShadowMaps are probably the way to go.\n4. If the parent Mesh has holes in it, such as the purple ring-shaped torus in the above demo, its shadowMesh will darken in the overlapping areas of outside-facing triangles and inside-facing triangles.  Not a deal-breaker, but an artifact non-the-less.\n5. Also if a planar shadow overlaps another planar shadow, the resulting shadow will darken.\n6. All shadows of this type are hard-edged shadows, with no possibility of soft-shadows.  In the real-world, shadows are rarely this sharp and defined.\n\nIf you can live with the above limitations, planar shadows can be an effective alternative to ShadowMaps.  Despite their limitations, Planar shadows perform extremely well, even on my mobile devices.  And they are mathematically correct, giving a sense of real depth to your scene.  Let me know if you think a feature like this would be useful to three.js users.\n\nThanks, :-)\n-Erich\n(edited on 2/13/15 to reflect the new naming)\n"},{"labels":["enhancement"],"text":"Hi\n\nin [three.objectloader.js](https://github.com/mrdoob/three.js/blob/dev/src/loaders/ObjectLoader.js#L35) i dont see the texture handling, is that normal ?\n\nI try to export model from blenders, and the exported .json file is marked as `metadata.type === 'object'; metadata.version === '4.3'`. This file includes fields for `.textures` and `.images`.\n\nHow to load them ?\n"},{"labels":["enhancement"],"text":"The implementation of the PointCloudMaterial (as of r69) draws the entire texture image as the particle, rather than drawing only the area marked off by modifying Texture's repeat and offset properties. Texture's properties are honored by other things, like Sprites and Meshes, but in order to get the same standard effect for a Point Cloud, I need to write my own Shader for some reason.\n\n[This jsfiddle](http://jsfiddle.net/myy7x4zd/) (not mine, retrieved from [this stack overflow answer](http://stackoverflow.com/questions/25335967/texture-atlas-offset-repeat-works-for-meshes-but-is-ignored-for-point-system-par#answer-25372202)) shows the work that needs to be done to do something that should be standard. (Though this example does have offsets as a shader attribute, which I'm not even expecting; I'm simply expecting the offset in Texture to be honored.)\n"},{"labels":["enhancement",null],"text":"Currently only loads type 'Mesh', and I have to 'upgrade' them to SkinnedMeshes post-import.\n\nThe blender exporter unfortunately also exports meshes with skinIndices & bones to 'Mesh'.\n\n(MorphAnimMesh also seems to be missing)\n"},{"labels":["enhancement"],"text":"HI there,\n\nI'm using blender 2.72b and I've created a basic scene like this,\n\n![image](https://cloud.githubusercontent.com/assets/7852409/6091758/9e831a6e-aebb-11e4-97d4-7346a3e405f0.png)\n\nIn more detail, we have this scenegraph graphically,\n\n![image](https://cloud.githubusercontent.com/assets/7852409/6091784/de98c012-aebc-11e4-80ac-29a5f1f3e74b.png)\n\nI've exported the scene with these activated options,\n\n![image](https://cloud.githubusercontent.com/assets/7852409/6091765/cb0f40a8-aebb-11e4-856e-e1db78fed56c.png)\n\nI've got an exported file with this contents,\n\n<pre><code class='haxe'>\n{\n    \"metadata\": {\n        \"type\": \"Object\",\n        \"generator\": \"io_three\",\n        \"version\": 4.3\n    },\n    \"materials\": [],\n    \"object\": {\n        \"type\": \"Scene\",\n        \"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],\n        \"uuid\": \"8508E378-D9A7-4ABF-B1C2-B980A39A6ACE\",\n        \"children\": [{\n            \"type\": \"PerspectiveCamera\",\n            \"name\": \"Camera\",\n            \"uuid\": \"1A026B2A-99AC-42DF-BF2B-598A293C2E03\",\n            \"position\": [7.481131553649902,5.343664646148682,6.507639408111572],\n            \"rotation\": [-0.6300000548362732,0.71399986743927,0.43338078260421753],\n            \"scale\": [1.0,0.9999998807907104,0.9999999403953552],\n            \"visible\": true,\n            \"far\": 100.0,\n            \"near\": 0.10000000149011612,\n            \"aspect\": 1.7777777777777777,\n            \"fov\": 35.0\n        },{\n            \"type\": \"Mesh\",\n            \"name\": \"Cube\",\n            \"uuid\": \"A74C6626-F8E7-4D3C-AFCC-0B85915A94B4\",\n            \"position\": [0.0,0.0,0.0],\n            \"rotation\": [-1.5707963705062866,0.0,0.0],\n            \"scale\": [1.0,0.9999999403953552,0.9999999403953552],\n            \"visible\": true,\n            \"castShadow\": true,\n            \"receiveShadow\": true,\n            \"geometry\": \"9E6F5BCE-D05C-4477-A13E-FD5AB36135A8\"\n        },{\n            \"type\": \"Mesh\",\n            \"name\": \"Cube.001\",\n            \"uuid\": \"748A09E4-8813-4295-AC11-37F0A4AC88F4\",\n            \"position\": [0.5430374145507812,2.4335718154907227,-4.228868007659912],\n            \"rotation\": [-1.5707963705062866,0.0,0.0],\n            \"scale\": [1.0,0.9999999403953552,0.9999999403953552],\n            \"visible\": true,\n            \"castShadow\": false,\n            \"receiveShadow\": false,\n            \"geometry\": \"18FD6709-C8F4-4C34-A56F-7EFDE00D3C99\"\n        },{\n            \"type\": \"PointLight\",\n            \"name\": \"Lamp\",\n            \"uuid\": \"9806AC59-3766-4696-A98A-A50E1B38A6ED\",\n            \"position\": [4.076245307922363,5.9038615226745605,-1.0054535865783691],\n            \"rotation\": [-1.8389947414398193,0.6021226644515991,1.931500792503357],\n            \"scale\": [0.9999998807907104,0.9999998211860657,0.9999998807907104],\n            \"visible\": true,\n            \"color\": 16777215,\n            \"intensity\": 1.0,\n            \"distance\": 29.999982833862305\n        }]\n    },\n    \"geometries\": [{\n        \"type\": \"Geometry\",\n        \"uuid\": \"18FD6709-C8F4-4C34-A56F-7EFDE00D3C99\",\n        \"data\": {\n            \"name\": \"Cube.001Geometry.3\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,-1.0,1.0,-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,1.0,1.0,1.0,1.0,-1.0,1.0]\n        }\n    },{\n        \"type\": \"Geometry\",\n        \"uuid\": \"9E6F5BCE-D05C-4477-A13E-FD5AB36135A8\",\n        \"data\": {\n            \"name\": \"CubeGeometry.7\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [1.0,0.9999999403953552,-1.0,1.0,-1.0,-1.0,-1.0000001192092896,-0.9999998211860657,-1.0,-0.9999996423721313,1.0000003576278687,-1.0,1.0000004768371582,0.999999463558197,1.0,0.9999993443489075,-1.0000005960464478,1.0,-1.0000003576278687,-0.9999996423721313,1.0,-0.9999999403953552,1.0,1.0]\n        }\n    },{\n        \"type\": \"Geometry\",\n        \"uuid\": \"18FD6709-C8F4-4C34-A56F-7EFDE00D3C99\",\n        \"data\": {\n            \"name\": \"Cube.001Geometry.3\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,-1.0,1.0,-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,1.0,1.0,1.0,1.0,-1.0,1.0]\n        }\n    },{\n        \"type\": \"Geometry\",\n        \"uuid\": \"9E6F5BCE-D05C-4477-A13E-FD5AB36135A8\",\n        \"data\": {\n            \"name\": \"CubeGeometry.7\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [1.0,0.9999999403953552,-1.0,1.0,-1.0,-1.0,-1.0000001192092896,-0.9999998211860657,-1.0,-0.9999996423721313,1.0000003576278687,-1.0,1.0000004768371582,0.999999463558197,1.0,0.9999993443489075,-1.0000005960464478,1.0,-1.0000003576278687,-0.9999996423721313,1.0,-0.9999999403953552,1.0,1.0]\n        }\n    }],\n    \"images\": [],\n    \"textures\": []\n}\n</code></pre>\n\n\nAs you can see we have a repeated geometry twice and the scene graph is not generated (all objects stays at the same level). A right json format could be the following,\n\n<code><pre class='haxe'>\n{\n    \"metadata\": {\n        \"type\": \"Object\",\n        \"generator\": \"io_three\",\n        \"version\": 4.3\n    },\n    \"materials\": [],\n    \"object\": {\n        \"type\": \"Scene\",\n        \"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],\n        \"uuid\": \"8508E378-D9A7-4ABF-B1C2-B980A39A6ACE\",\n        \"children\": [{\n            \"type\": \"PerspectiveCamera\",\n            \"name\": \"Camera\",\n            \"uuid\": \"1A026B2A-99AC-42DF-BF2B-598A293C2E03\",\n            \"position\": [7.481131553649902,5.343664646148682,6.507639408111572],\n            \"rotation\": [-0.6300000548362732,0.71399986743927,0.43338078260421753],\n            \"scale\": [1.0,0.9999998807907104,0.9999999403953552],\n            \"visible\": true,\n            \"far\": 100.0,\n            \"near\": 0.10000000149011612,\n            \"aspect\": 1.7777777777777777,\n            \"fov\": 35.0\n        },{\n            \"type\": \"Mesh\",\n            \"name\": \"Cube\",\n            \"uuid\": \"A74C6626-F8E7-4D3C-AFCC-0B85915A94B4\",\n            \"position\": [0.0,0.0,0.0],\n            \"rotation\": [-1.5707963705062866,0.0,0.0],\n            \"scale\": [1.0,0.9999999403953552,0.9999999403953552],\n            \"visible\": true,\n            \"castShadow\": true,\n            \"receiveShadow\": true,\n            \"geometry\": \"9E6F5BCE-D05C-4477-A13E-FD5AB36135A8\",\n        \"children\":[{\n            \"type\": \"Mesh\",\n            \"name\": \"Cube.001\",\n            \"uuid\": \"748A09E4-8813-4295-AC11-37F0A4AC88F4\",\n            \"position\": [0.5430374145507812,2.4335718154907227,-4.228868007659912],\n            \"rotation\": [-1.5707963705062866,0.0,0.0],\n            \"scale\": [1.0,0.9999999403953552,0.9999999403953552],\n            \"visible\": true,\n            \"castShadow\": false,\n            \"receiveShadow\": false,\n            \"geometry\": \"18FD6709-C8F4-4C34-A56F-7EFDE00D3C99\"\n            }]\n        },{\n            \"type\": \"PointLight\",\n            \"name\": \"Lamp\",\n            \"uuid\": \"9806AC59-3766-4696-A98A-A50E1B38A6ED\",\n            \"position\": [4.076245307922363,5.9038615226745605,-1.0054535865783691],\n            \"rotation\": [-1.8389947414398193,0.6021226644515991,1.931500792503357],\n            \"scale\": [0.9999998807907104,0.9999998211860657,0.9999998807907104],\n            \"visible\": true,\n            \"color\": 16777215,\n            \"intensity\": 1.0,\n            \"distance\": 29.999982833862305\n        }]\n    },\n    \"geometries\": [{\n        \"type\": \"Geometry\",\n        \"uuid\": \"18FD6709-C8F4-4C34-A56F-7EFDE00D3C99\",\n        \"data\": {\n            \"name\": \"Cube.001Geometry.3\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,-1.0,1.0,-1.0,-1.0,-1.0,-1.0,1.0,-1.0,1.0,1.0,1.0,1.0,1.0,1.0,-1.0,1.0]\n        }\n    },{\n        \"type\": \"Geometry\",\n        \"uuid\": \"9E6F5BCE-D05C-4477-A13E-FD5AB36135A8\",\n        \"data\": {\n            \"name\": \"CubeGeometry.7\",\n            \"metadata\": {\n                \"generator\": \"io_three\",\n                \"vertices\": 8,\n                \"version\": 3\n            },\n            \"vertices\": [1.0,0.9999999403953552,-1.0,1.0,-1.0,-1.0,-1.0000001192092896,-0.9999998211860657,-1.0,-0.9999996423721313,1.0000003576278687,-1.0,1.0000004768371582,0.999999463558197,1.0,0.9999993443489075,-1.0000005960464478,1.0,-1.0000003576278687,-0.9999996423721313,1.0,-0.9999999403953552,1.0,1.0]\n        }\n    }],\n    \"images\": [],\n    \"textures\": []\n}\n</pre></code>\n\nCheers,\n"},{"labels":["enhancement"],"text":"Hi there,\n\nCurrently, the generation of uuid is different on each export. This means that if you have an object with a constant reference from imported file in a Three.js you have to change the uuid on each time you update the exported file.\n\nInstead of generate an standard uuid on export,as I can see on [file basse_classes.py],(https://github.com/mrdoob/three.js/blob/master/utils/exporters/blender/addons/io_three/exporter/base_classes.py) line 70),\n\n<pre><code class='haxe'>class Main\nself[constants.UUID] = str(uuid.uuid4()).upper()\n</code></pre>\n\n\nMy proposal is generate the uuid according the name of object/geometry/etc (that ensures it have to be unique in Blender),\n\n<pre><code class='haxe'>class Main\ndef name2uuid(name):\n    return str(uuid.uuid3(uuid.NAMESPACE_DNS, name)) \n</code></pre>\n\n\nWith this, we'll have the same uuid on each export (unless you change the name, of course).\n"},{"labels":["enhancement"],"text":"The new Blender Exporter looks very promising(combined with multiple UVs in particular), however there is a serious issue with its performance. Perhaps it's related to some dependencies, but on recent i7 3,7GHz it takes well over 20-60min to export 50k vertices while single core usage doesn't drop below 100%. Old exporter could do exactly the same job in a few seconds.\nPerhaps there is something wrong with my software set, or dependencies, as recently there was really a lot of compilers, libraries and dependencies installed on this machine.\n\nThe exporter was hosted in Blender 2.73 x64 running on Windows 7 x64. It's definitely not hardware/performance related issue, but it resembles a lot opening large 3dsMAX project with tons of track-nodes. Test geometry was perfectly clean. Exported as OpenCollada 1.4.1, imported to clean blender scene and exported as JSON(vertices, normals, faces, UV1, materials, face materials, no scene, uncompressed geometry).\n\nHas anybody experienced similar issues while working on real 3d models?\n"},{"labels":["enhancement"],"text":"I'm yet to do a pull request, so I'm going to file this as an issue for now.  I was interested in exporting OBJ files with vertex colors: https://gamedev.stackexchange.com/questions/21303/how-can-i-include-vertex-color-information-in-obj-files/66270#66270\n\nSo, I modified the OBJExporter script to include this.  This requires the user to add a list of vertexColors to the parse function (since coloration is currently saved in faces for some reason):\n\n```\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.OBJExporter = function () {};\n\nTHREE.OBJExporter.prototype = {\n\nconstructor: THREE.OBJExporter,\n\nparse: function ( geometry, vertexColors ) {\n\n    var output = '';\n\n    for ( var i = 0, l = geometry.vertices.length; i < l; i ++ ) {\n\n        var vertex = geometry.vertices[ i ];\n        output += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z + ' ' + vertexColors[i].r + ' ' + vertexColors[i].g + ' ' + vertexColors[i].b + '\\n';\n\n    }\n\n    // uvs\n\n    for ( var i = 0, l = geometry.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n        var vertexUvs = geometry.faceVertexUvs[ 0 ][ i ];\n\n        for ( var j = 0; j < vertexUvs.length; j ++ ) {\n\n            var uv = vertexUvs[ j ];\n            output += 'vt ' + uv.x + ' ' + uv.y + '\\n';\n\n        }\n\n    }\n\n    // normals\n\n    for ( var i = 0, l = geometry.faces.length; i < l; i ++ ) {\n\n        var normals = geometry.faces[ i ].vertexNormals;\n\n        for ( var j = 0; j < normals.length; j ++ ) {\n\n            var normal = normals[ j ];\n            output += 'vn ' + normal.x + ' ' + normal.y + ' ' + normal.z + '\\n';\n\n        }\n\n    }\n\n    // faces\n\n    for ( var i = 0, j = 1, l = geometry.faces.length; i < l; i ++, j += 3 ) {\n\n        var face = geometry.faces[ i ];\n\n        output += 'f ';\n        output += ( face.a + 1 ) + '/' + ( j ) + '/' + ( j ) + ' ';\n        output += ( face.b + 1 ) + '/' + ( j + 1 ) + '/' + ( j + 1 ) + ' ';\n        output += ( face.c + 1 ) + '/' + ( j + 2 ) + '/' + ( j + 2 ) + '\\n';\n\n    }\n\n    return output;\n\n    }\n }\n```\n\nAny interest in updating the OBJExporter to have vertex coloration?\n"},{"labels":["enhancement"],"text":"I'm loading a model and setting a new material to it like this:\n\n``` javascript\nvar loader = new THREE.JSONLoader( true );\nloader.load( \"models/morph_grid_female.json\", function( geometry, materials ) \n{\n    var material = materials[ 0 ];\n    storedMaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, map: material.map } );\n    storedMaterial.morphTargets = true;\n\n    mesh = new THREE.Mesh( geometry, storedMaterial );\n    scene.add( mesh );\n}\n```\n\nThen changing the texture later like this:\n\n``` javascript\nstoredMaterial.map = texture;\nstoredMaterial.needsUpdate = true;\n```\n\nThis works perfectly on WebGL renderer, but does nothing on software renderer. So far I haven't found any way to change the texture on the software renderer afterwards.\n"},{"labels":["enhancement"],"text":"When i asked a DoubleSided Mesh if a ray is intersecting it, i get the point of the intersction or a NULL. But i didn't get the information if the intersection was on the frontside or the backside of the triangle. \n\nI don't know if there are many use cases for that problem, but i needed it.\n\nSo i did a quick fix for me. I know that this is not a good solution. \n(Thats why i did't put it in as a PR. )\nhttps://github.com/BenediktS/three.js/compare/mrdoob:dev...Raycaster_intersectsFrontSide\n\nMaybe there are more use cases and maybe u will find a better way. \n"},{"labels":["enhancement"],"text":"I want to learn on account of this https://github.com/mrdoob/three.js/issues/1660. Now it is possible or nothing has changed?\n\nTo use the viewPort is very inconvenient.\n"},{"labels":["enhancement"],"text":"I wrote a \"fix\" for this issue, however I'm opening this as an issue in case someone runs into this identical problem.\n\nThis is the fixed version. Click to switch between renderer.render and composer.render.\n\nhttps://dl.dropboxusercontent.com/u/705999/panoeffects/index.html\n\nA bit of background: I'm trying to use multiple cameras and viewports to assemble a panoramic render. However, when I gave it to effect composer, the render seemed to be really messed up.\n\nI discovered that I can't simply set the renderer.setViewport / scissor and call composer.render multiple times. This is because all shaderpasses will get the wrong viewport/scissor for rendering their quad.\n\nThe solve for this is to write a custom RenderPassViewports, like this:\n\n```\nvar RenderPassViewports = function ( scene, cameras, overrideMaterial, clearColor, clearAlpha ) {\n\n  this.scene = scene;\n  this.cameras = cameras;\n\n  this.overrideMaterial = overrideMaterial;\n\n  this.clearColor = clearColor;\n  this.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 1;\n\n  this.oldClearColor = new THREE.Color();\n  this.oldClearAlpha = 1;\n\n  this.enabled = true;\n  this.clear = true;\n  this.needsSwap = false;\n\n};\n\n\nRenderPassViewports.prototype = {\n\n  render: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n    this.scene.overrideMaterial = this.overrideMaterial;\n\n    if ( this.clearColor ) {\n\n      this.oldClearColor.copy( renderer.getClearColor() );\n      this.oldClearAlpha = renderer.getClearAlpha();\n\n      renderer.setClearColor( this.clearColor, this.clearAlpha );\n    }\n\n\n    //  UHHHHHHHH\n    //  I don't know why this is working but\n    //  the first render is fucked up\n    //  burn a render just so the projection matrix is ok\n    //  WHAT???\n    //  comment this out if you don't believe me\n    renderer.render( this.scene, this.cameras[ 0 ], readBuffer, false );\n\n    var first = 0;\n    var last = this.cameras.length;\n\n    for( var i=first; i<last; i++ ){\n      var camera = this.cameras[ i ];\n      var x = i * viewWidth;\n      var y = 0;\n      renderer.setViewport( x, y, viewWidth, viewHeight );\n      renderer.setScissor( x, y, viewWidth, viewHeight );\n      renderer.enableScissorTest( true );\n      renderer.render( this.scene, camera, readBuffer, true );\n    }\n\n    //  restore this otherwise shaderpass will be messed up\n    renderer.setViewport( 0, 0, views * viewWidth, viewHeight );\n    renderer.setScissor( 0, 0, views * viewWidth, viewHeight );\n    renderer.enableScissorTest( false );\n\n    if ( this.clearColor ) {\n\n      renderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\n    }\n\n    this.scene.overrideMaterial = null;\n\n  }\n\n};\n```\n\nFor whatever reason, when rendering to a rendertarget, the first render will be completely messed up, as far as its camera / viewport projection goes.\n\nThe \"fix\" to this is to burn a whatever render so that the first viewport will have the correct view.\n\nI realize that EffectComposer is not part of the main library, however I think this is a bug caused by the WebGLRenderer having invalid flags when rendering into a rendertarget. Perhaps someone smarter than me can investigate.\n"},{"labels":["enhancement"],"text":"I'm looking to implement some sound effects into a game and I've been looking into the THREE.Audio object. I've got the sound effect loading into my scene but it just plays on load. \n\nIs there any way of controlling the playback so the sound effect plays on an event of my choosing?\n"},{"labels":["enhancement"],"text":"@WestLangley  [stated](mrdoob/three.js/issues/5877#issuecomment-71119329) in #5877 that adding 'Ray.distanceSqToRay' is an issue on it's own, so here we go.\n\n> As you know, three.js has no method Ray.distanceSqToRay(). And for good reason: the distance between rays is up to interpretation. You will have to create your own method.\n\nWhat I don't see is how that could not be well-defined and up to interpretation?\n"},{"labels":["enhancement"],"text":"https://github.com/mapbox/earcut\n\n@jahting did you had a look at it?\n"},{"labels":["enhancement"],"text":"Hey,\n\nI was looking through the issues but couldn't find an answer as to why pointlights don't cast shadows. For example, #1192 was closed but there are still no shadows for point lights.\n\nWe already have an example for reflections on objects using cubemaps, omnidirectional shadow mapping is quite similar.\n"},{"labels":["enhancement"],"text":"I have only reviewed the Quaternions, but i assume that this may happen in more than this one place.\n\nThis doc claims multiple static methods.\nhttp://threejs.org/docs/#Reference/Math/Quaternion\n\nE.G.: `fromArray` claims that it is static.  As you can see from the code, it is an instance method.\nhttps://github.com/mrdoob/three.js/blob/master/src/math/Quaternion.js#L471\n\nThere are three fixes that i see.\n- Change the code to make it accurately reflect the docs\n  *\\* remove the instance methods and convert them into static methods.\n  *\\* I see this making a lot of people angry\n- Change the doc to accurately reflect the state of the code\n  *\\* This should be good. Will break no one and make new people's first use better.\n- Create static methods and keep the instance methods.\n  *\\* Flag them as deprecated with a date of removal\n  *\\* Update the doc to reflect that.  This way people know that the instance version will leave soon.\n\nThoughts?\nI think that option three is the best.  `fromArray` seems like it should be a static method.  Perhaps a second arg that could be the quaternion to operate on, else generate a new quaternion.\n"},{"labels":["enhancement"],"text":"On the page http://threejs.org/docs/#Reference/Loaders/OBJMTLLoader I saw \"Found objects are converted to Mesh with a BufferGeometry and materials are converted to MeshLambertMaterial.\" and become happy, now I can use fast BufferGeometry, but objects in this loader are not converted to BufferGeometry unfortunately. This is an loader with old Geometry..\nIf anyone can update OBJMTLLoader with a BufferGeometry please share it\n"},{"labels":["enhancement"],"text":"i'm trying the new r70 blender exporter and it is working great except that when i try to export a texture the following error is displayed and no file is exported. correct me if i'm wrong, but this seems to be a bug.\n![screen shot 2015-01-18 at 4 24 46 pm](https://cloud.githubusercontent.com/assets/10490452/5794131/9c184e58-9f2e-11e4-8427-e29eed21861a.png)\n"},{"labels":[null,"enhancement"],"text":"So, apparently many WebGL samples including three.js samples are broken on Safari and Chrome on the new iMacs with 5k displays.\n\nThe issue is the apps request a fullscreen canvas which is 5120x2880 but Chrome and Safari often return a 4096x2880 canvas. [See bug report](https://code.google.com/p/chromium/issues/detail?id=445542). So what happens is because the app asked for 5120x2880 it sets the `gl.viewport` to that but because the drawingBuffer is actually 4096x2880 it's the wrong viewport setting (and the wrong aspect ratio given the way most of the examples are not using clientWidth/clientHeight) and so the samples don't work.\n\nAs it says in the bug this is spec compliant. Basically you can ask for a canvas of any size and WebGL will do its best but the size you actually get is in `gl.drawingBufferWidth` and `gl.drawingBufferHeight`. \n\n**The question is, should three.js and the examples change to handle that?**\n\nBasically after you call `renderer.setSize` you need to check what size you actually got by checking `gl.drawingBufferWidth` and `gl.drawingBufferHeight` (could be some func like `renderer.getSize`) and then use those values in your code where appropriate. At the same time you should use `gl.canvas.clientWidth` and `gl.canvas.clientHeight` for your aspect ratio because the two won't match\n\nNOTE: If you're curious why it's this way imagine you have a machine with 3 monitors side-by-side. Take any three.js sample and resize the window until it crosses and fills all 3 monitors. Let's assume the monitors are 1920x1080. You'll now have a window that's 5760x1080. The code will ask for a canvas 5760x1080 but the driver likely has a limit of 4096. So, rather than crash the spec says the canvas will have its width set to 5760 (so it fills the area of the page it's supposed to fill) but WebGL will make drawingbuffer whatever size it can. In this case probably 4096x1080.\n\nApparently they will look into the issue and see if they can make it return the fullsize on iMac 5k more often but (a) I went into the Apple store to test. It's not a hard coded limit AFAICT. Sometimes the samples work. Other times they don't. That suggests is a memory issue. 5120*2880 is 56meg. Antialiased that's at least 112meg, it's double buffered so that's 168meg, and then there's all the compositing tiles (b) even if they fix it so it happens less often it can still happen if your system is low on memory or if you have multiple monitors so it's still worth considering.\n\nThoughts?\n"},{"labels":["enhancement"],"text":"Hi, perhaps someone had the same problem with exporting a model with 2 animations from Blender.\nI have read that:\nUPDATE 2: Currently THREE.js exports multiple actions using blender exporter, so this tutorial in not suitable for exporters for THREE.js versions r62 and higher. It should work well with versions r56 up to r61\n\nIn my model I have 2 animations: krilo1a, krilo2a.\n![komar1](https://cloud.githubusercontent.com/assets/10427535/5777619/872ad2b8-9d94-11e4-861d-7629f3c37573.jpg)\nBoth animations work separately and each one gets exported and works\n![komar2](https://cloud.githubusercontent.com/assets/10427535/5777647/de447c66-9d94-11e4-9963-96a7049dab35.jpg)\nThe export looks like this:\n\"bones\"      : [{\"parent\":-1,\"name\":\"krilo1a\",\"pos\":[0.217062,-0.429841,1.48519],\"rotq\":[0.589933,0.469901,-0.369392,0.542883],\"scl\":[1,1,1]},\n(I posted the whole line, I thing not only the krilo4a bone data is missing, there also \"]\" missing at end.)\n\nIf I export them together what happens is:\n- only the first one ( krilo1a<krilo4a,..) gets exported. If I rename the first one to ...lets say krilo5a, krilo4a gets exported.\n- Blender model animation ( krilo1a - the one that gets exported and works ) doesn't work anymore in Blender unless I UNDO 1 step ( export ). The picture after export:\n  ![komar4](https://cloud.githubusercontent.com/assets/10427535/5777684/2b6093d6-9d95-11e4-85fc-b2710d67c8f1.jpg)\n- the JSON only has one bone ( krilo1a ).\n- the JSON has 2 animations exported ...like it should, there is just one bone. \n\nWhile writing this I was thinking that I should try exporting another JSON with (krilo1a) deleated. This should give me the bone that I could add to the JSON with 2 animations. I will try that as a workaround until hopefully someone has a solution to this.\n\nThanks in advance.\n"},{"labels":["enhancement"],"text":"When exporting a multiple skeletal animations, I find myself needing to export the mesh in the rest position to avoid having three.js to take an already-skinned mesh and apply armature transforms on it again.\n\n![screen shot 2015-01-13 at 10 48 40 am](https://cloud.githubusercontent.com/assets/3529065/5723403/c42b607c-9b11-11e4-9688-0ea960c11d71.png)\n\nI created a separate animation consisting of the rest position just so I could switch to it before exporting, so I could export the rest position. I realized that there is a button in Blender that accomplishes the same task:\n\n![screen shot 2015-01-13 at 10 43 11 am](https://cloud.githubusercontent.com/assets/3529065/5723298/05033300-9b11-11e4-90fe-b35f94500fb0.png)\n\nHowever, exporting in that way creates a slightly different, non-functional JSON. Here are the two output files:\n\nhttps://www.diffchecker.com/qyxn4nxg\n\nThe file on the left is the one that works correctly. It was exported by creating a separate rest animation. The file on the right is exported by choosing \"Rest Position\", and appears to be missing animation data.\n\nIt would be nice for the rest position button to work - it would remove the need for a separate animation just for exporting. Visually in the editor, both methods have identical meshes displaying, but export differently.\n\nAlso, exporting skeletal animations changes the currently selected animation.\n"},{"labels":["enhancement"],"text":"Hey,\nI experienced an issue with the raycaster, when using multiple windows/iframes.\nIn my case `objects instanceof Array === false` in `intersectObjects` failed. \n`Object.prototype.toString.call( objects ) !== '[object Array]'` works as expected.\n\nThis effect is described here:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof\n"},{"labels":["enhancement"],"text":"for now, LoadingManager only reports when obj file is loaded, but it also should report status if texture is loaded.\n"},{"labels":["enhancement"],"text":"There are a few things which geometry.clone() doesn't copy a reference to, which it should.\n\n.bones\n.skinWeights\n.skinIndices\n.animations\n.animation\n\nare all left without references to the original, which leads to skinning being broken unless the references to those are manually copied. I think references should be passed as it's less confusing, but I don't think they should be deep copies, or this would lead to mostly wasted memory.\n"},{"labels":["enhancement"],"text":"`Ray.distanceSqToSegments` was based on some c++ code.  [That code got rewritten](http://www.geometrictools.com/GTEngine/Samples/Geometrics/DistanceSegments3/DistanceSegments3.cpp) to make it numerically robust when the lines are almost parallel.  There is a [detailed rationale whitepaper](http://www.geometrictools.com/Documentation/DistanceLine3Line3.pdf) available.\n\nI stumbled upon this because I'd love to compute the closest distance (squared) and the according points for two _infinite_ rays, not just for a ray and a segment :)  I understand this is a different albeit related issue, so I hope `Ray.distanceSqToRay(...)` might share some code with `distanceSqToSegment`.\n"},{"labels":["enhancement"],"text":"It seems that skinning does not work when using `THREE.MeshNormalMaterial` or `MeshDepthMaterial`, but it does with `THREE.MeshBasicMaterial`. Should skinning work across all these materials, or is there a reason those materials are exempt from skinning?\n"},{"labels":["enhancement"],"text":"I am trying to export and import scenes.\nI use \n\n```\n var exporter = new THREE.SceneExporter();\n var sceneJson = JSON.stringify(exporter.parse(scene));\n localStorage.setItem('scene', sceneJson);\n```\n\nto export and\n\n```\n var json = (localStorage.getItem('scene'));\n var sceneLoader = new THREE.SceneLoader(); \n sceneLoader.parse(JSON.parse(json), function (e) {\n         scene = e.scene;\n  }, '.');\n```\n\nto import.\n\nThe scene I export has SphereGeometry and ExtrudeGeometry but when I import the scene I can only see the spheres.\nI checked the exported json file using Blob and found that there are no extrudeSettings in the file, I guess maybe that is the point.\n\nHow can I import or export in this case?\n\nThanks!\n"},{"labels":["enhancement"],"text":"The `slerp` function at https://github.com/mrdoob/three.js/blob/dev/src/math/Quaternion.js#L400 has two cases where the quaternion is modified and the function returns without calling `onChangeCallback()`: \n- at https://github.com/mrdoob/three.js/blob/dev/src/math/Quaternion.js#L433\n- at https://github.com/mrdoob/three.js/blob/dev/src/math/Quaternion.js#L447\n\nThe last return of this function does call `onChangeCallback()`.\n\nI am not entirely sure if this is to be considered a bug or not. No issue reports to this effect are currently open but it feels like an inconsistency. Just pointing it out as I ran into it while reading the code.\n"},{"labels":["enhancement"],"text":"So I've been playing with the [WEBGL_lose_context extension](https://www.khronos.org/registry/webgl/extensions/WEBGL_lose_context/) today.  It appears that when THREE.js loses context, it just stops and there is no attempt to automatically recover.\n\nIn my past life doing DirectX, usually one responds to lost context event by trying to recover the context in response to a \"show\"-type event.  I would suspect that because THREE.js has a mirror of the scene in primary memory, it should be possible in most cases to recover the scene completely by reloading it from primary memory to GPU memory?\n\nShould we make an attempt to recover the lost context automatically?  Is there any theoretical or practical reasons why we shouldn't attempt to automatically recover from a lost context in WebGL?  Why hasn't this been attempted previously?\n\nI've modified two examples in [my branch here](https://github.com/bhouston/three.js/tree/loseContext) so that you can trigger the loss of context:\n\n/examples/#webgl_materials_bumpmap_skin\n/examples/#webgl_morphtargets_human\n\nPS. The reason I bring this up as that we know that on Clara.io, we are getting automatic reports of multiple context losses per day.  It isn't that frequent give the number of daily users, but it is still something we need to address.\n"},{"labels":["enhancement"],"text":"I would like to contribute physically-based microfacel reflection model in a core ThreeJS shader.  The motivation for moving towards Physically-based Shading can be found in this presentation given at SIGGRAPH 2012:\n\nhttp://blog.selfshadow.com/publications/s2012-shading-course/hill/s2012_pbs_importance.pdf\n\nThe core approach would be the adoption of the \"Generalized microfacet model\", otherwise known as a Microfacet BRDF, as the basis of the specular shading equation.  The equation consists of the following:\n- Specular Distribution term D: most now recommend GGX: http://www.cs.cornell.edu/~srm/publications/egsr07-btdf.pdf\n- Fresnel term, F: we can use the Schlick Fresnel approximation\n- Geometric visibility/Geometryshadowing term G: we can use Walter derived GGX-based visibility: http://www.cs.cornell.edu/~srm/publications/egsr07-btdf.pdf\n\nWhile I do suggest starting with the above approximations, we can evolve the shader so that these models are pluggable.\n\nAdditionally there will be a diffuse term (implemented as energy conserving, thus whatever remains from the specular BRDF) which can be one of either:\n- Lambert https://en.wikipedia.org/wiki/Lambertian_reflectance\n- Oren–Nayar https://en.wikipedia.org/wiki/Oren%E2%80%93Nayar_reflectance_model\n\nAfter the above is implemented, I would like to add both anisotropy and metallic support.  The last thing after that would be multi-sampling of the environmental reflections to support unpolished reflections.\n\nThis shader will never really match the PhongMaterial because the Phong reflectance model is significantly different than the Microfacet model, and the parameters are different.  Thus if we want backwards compatibility, I would suggest the new Physically-based shader is implemented as either MeshPhysicalMaterial or MeshMicrofacetMaterial, or something along those lines and we leave the existing MeshPhongMaterial alone.\n\nThe result of this work should be a shader system that rivals the top game engines and film renderers.\n\nI have already implemented nearly everything in a private fork of ThreeJS and it is live on https://Clara.io as the Physical Material.  The only things left to implement are multi-sampling of the environmental reflections, and Oren-Nayer reflectance model.  But before I start to do PRs to the primary ThreeJS branch I would like to prepare you guys and get approval as it will be a lot of work.\n\nMore information on Physically-based Shading can be found here:\n\nhttp://blog.selfshadow.com/publications/s2012-shading-course/\nhttp://blog.selfshadow.com/publications/s2013-shading-course/\nhttp://blog.selfshadow.com/publications/s2014-shading-course/\n"},{"labels":["enhancement"],"text":"The constructor configures these properties which are essential for zooming:\n\n```\nthis.left0 = this.object.left;\nthis.right0 = this.object.right;\nthis.top0 = this.object.top;\nthis.bottom0 = this.object.bottom;\n```\n\n`handleResize` should update these properties, but doesn't. Configuring them externally/manually after updating my OrthographicCamera bounds fixes the issue:\n\n```\n// in my resize handler, controls is an instance of THREE.OrthographicTrackballControls\ncontrols.left0 = this.controls.object.left;\ncontrols.right0 = this.controls.object.right;\ncontrols.top0 = this.controls.object.top;\ncontrols.bottom0 = this.controls.object.bottom;\n```\n\nUsing the latest here: https://github.com/mrdoob/three.js/blob/9e0012b9693aa8b0247abe6734f5693f59491ae0/examples/js/controls/OrthographicTrackballControls.js\n\nI think this is an easy fix, please take a look @patrickfuller \n\nThanks!\n"},{"labels":["enhancement"],"text":"The RingGeometry constructor can take thetaStart and thetaLength parameters to draw only a portion of the ring (arc? curve?).\n\nI needed to do something similar with a cylinder, so I added two extra parameters to the CylinderGeometry constructor (angleStart and angleEnd), and changed 3 lines:\n\n``` javascript\n    var x, y, vertices = [], uvs = [];\n    var radiansInAngle = angleEnd - angleStart;     // NEW\n\n    for ( y = 0; y <= heightSegments; y ++ ) {\n        var verticesRow = [];\n        var uvsRow = [];\n\n        var v = y / heightSegments;\n        var radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n        for ( x = 0; x <= radialSegments; x ++ ) {\n            var u = x / radialSegments;\n            var vertex = new THREE.Vector3();\n            vertex.x = radius * Math.sin( u * radiansInAngle + angleStart );    // EDITED\n            vertex.y = - v * height + heightHalf;\n            vertex.z = radius * Math.cos( u * radiansInAngle + angleStart );    // EDITED\n            this.vertices.push( vertex );\n            verticesRow.push( this.vertices.length - 1 );\n            uvsRow.push( new THREE.Vector2( u, 1 - v ) );\n        }\n\n        vertices.push( verticesRow );\n        uvs.push( uvsRow );\n    }\n```\n\nIs this something that might be added to CylinderGeometry at some point? \n"},{"labels":["enhancement"],"text":"After using SketchUp to export this model:\n\nhttps://3dwarehouse.sketchup.com/model.html?id=907f1fa5805282f8630a81e41b3b6ffd\n\n to .dae, running:\n\n```\n      var loader = new THREE.ColladaLoader();\n        loader.load('carrier.dae', function (result) {\n            scene.add(result.scene);\n       });\n```\n\nproduces the error:\n\n[Error] TypeError: null is not an object (evaluating 'this.vertices.input')\n    parse (ColladaLoader.js, line 2808)\n    parse (ColladaLoader.js, line 2733)\n    parseLib (ColladaLoader.js, line 262)\n    parse (ColladaLoader.js, line 141)\n    onreadystatechange (ColladaLoader.js, line 77)\n"},{"labels":["enhancement"],"text":"I believe that raycasting to lines returns the calculated distance in object space and the intersection point in world space. \n\nIn https://github.com/mrdoob/three.js/blob/dev/src/objects/Line.js#L51 the ray is transformed to object space. In  https://github.com/mrdoob/three.js/blob/dev/src/objects/Line.js#L102, https://github.com/mrdoob/three.js/blob/dev/src/objects/Line.js#L135 and https://github.com/mrdoob/three.js/blob/dev/src/objects/Line.js#L166  the intersection point is transformed to world space but the distance is left untouched. \n\nThis affects objects with non-rigid-transformations such as scale.\n"},{"labels":["enhancement"],"text":"I use the Texture.clone() function a lot in my code, because I need to set the UV coordinates differently on every model, and this slows down the initiation of the page considerably. If I don't clone the texture, then the scene renders instantly. So something is not optimal in the rendering pipeline.\n\nIt seems that the Texture.clone() function indeed creates a shallow clone that reuses the image, but then when data is sent to the graphics card these two textures are seen as having two separate images, sending the same image twice. Is this correct? Perhaps this is where the bottleneck is.\n\nComing from XNA and DirectX, where textures are not much more than containers for bitmap data, I wonder why Three.js also includes UV data in them, instead of specifying UV once the texture is applied to a mesh? \n"},{"labels":["enhancement"],"text":"See attached screenshot of the deferred point lights example. This is on a late 2013, 15-inch Retina MacBook Pro, with NVIDIA GeForce GT 750M 2048 MB. It looks the same in both Firefox and Chrome. Runs fine on my office machine, which does not have a retina display. Both of the other deferred renderer examples have similar results.\n![deferred_lighting_bug](https://cloud.githubusercontent.com/assets/492291/5554578/06f3f594-8c31-11e4-8deb-e5b965dfb342.png)\n"},{"labels":["enhancement"],"text":"Hi,\n\nin the meta model, i.e. the data model from which I create my ThreeJS scenes, I'm using the X3D texture mapping manipulation as defined here: http://doc.x3dom.org/author/Texturing/TextureTransform.html\n\nwhile scaling and offset seem to be there, rotation is missing. Is there any chance to get the rotation in the future?\n\nThx and BR.\n\n   Ekki\n"},{"labels":["enhancement"],"text":"OBJMTLLoader doesn't load a model containing negative indices, although OBJLoader loads the same model. \n\nIt would be great, if OBJMTLLoader would support negative indices!\n\nPreviously I asked the question on stack overflow: http://stackoverflow.com/questions/27583497/loading-obj-file-with-objmtlloader-js\n"},{"labels":["enhancement"],"text":"For some reason this is left out of the official R69 build\n\nhttps://github.com/mrdoob/three.js/blob/master/src/core/Geometry.js#L807\nhttps://github.com/mrdoob/three.js/blob/master/src/core/Geometry.js#L830-L836\n\nWhen uncommented, materialIndexes get exported and imported correctly.\n\nAny reason why this was commented out? Can this feature turn for R70?\n\nR69\n![nomaterialindex](https://cloud.githubusercontent.com/assets/1041360/5513594/63d82cae-87b2-11e4-9553-142f343281ac.png)\n\nR69 with uncommenting\n![withmaterialindex](https://cloud.githubusercontent.com/assets/1041360/5513593/59cb4d2c-87b2-11e4-8a09-dd81d1f23164.png)\n"},{"labels":["enhancement"],"text":"When loading some of the pdb models with GLmol which is using three.js and a custom pdb loader I'm getting an error and the GLmol author explained that the pdb file is not valid.\nhttps://github.com/mrdoob/three.js/blob/master/examples/models/molecules/aspirin.pdb\n\nhttps://github.com/biochem-fan/GLmol/issues/8#event-190586113\n"},{"labels":["enhancement",null],"text":"I found this when loading objects exported from Clara.io. It appears that the [Material Loader](https://github.com/mrdoob/three.js/blob/master/src/loaders/MaterialLoader.js) doesn't load the texture paths in materials, resulting in geometry loading without textures.\n"},{"labels":["enhancement"],"text":"Hi,\n\nthis link fires security issues (SecurityError: DOM Exception 18: An attempt was made to break through the security policy of the user agent.) when loading textures:\n\nhttp://www.intelligentgraphics.biz/IG.GFX/ThreeJS/SingleViewer/index.html?scene=http://46.163.67.83/Creator/Dynamic/4C68CEA7E58591B579FD-eb@ig/perma_713427.json\n\nIn this link I cloned the texture files to intelligentgraphics.biz and changed the urls in the metafiles, and now its working\n\nhttp://www.intelligentgraphics.biz/IG.GFX/ThreeJS/SingleViewer/index.html?scene=http://46.163.67.83/Creator/Dynamic/4C68CEA7E58591B579FD-eb@ig/perma_940317.json\n\nI know there were similar issues with x3dom for some time, now however it's working there. So it should be fixeable ontop WebGL inside ThreeJS I guess.\n\n   Ekki\n"},{"labels":["enhancement"],"text":"Is anyone else experiencing this too?\n\n```\nError: WebGL: clear: incomplete framebuffer three.min.js:531:21\nError: WebGL: drawElements: incomplete framebuffer\n```\n\nif so, it's quite likely that there are still some bugs in the simulation shader code...\n"},{"labels":["enhancement"],"text":"I had a go at implementing morphtarget animation for meshes that use `THREE.BufferGeometry`.\n\nIt wasn't difficult to add support to the `THREE.WebGLRenderer`. I followed the same steps that the renderer currently uses to create/set/destroy morph buffers for regular geometry.\n\nI also added the appropriate support to the `THREE.BufferGeometry` & `THREE.BufferGeometryLoader` objects.\n\n[![capture](https://cloud.githubusercontent.com/assets/1762580/5389572/c07203f6-8152-11e4-920a-53e074f47c9b.PNG)](https://satori99.github.io/three.js/examples/webgl_morphtargets_flag.html)\n\nThis is a [live example](https://satori99.github.io/three.js/examples/webgl_morphtargets_flag.html) of a flag I animated in blender and exported with morphtargets as part of each geometry data block (Object Format 4.3).\n\nMy feature branch can be found at https://github.com/satori99/three.js/tree/bg-morphtargets\n\nIs this the sort of thing you are interested in a PR for?\n"},{"labels":["enhancement"],"text":"I went to patch [Sprite.js](https://github.com/mrdoob/three.js/blob/dev/src/objects/Sprite.js#L10) for my own purposes: to make a sprite sheet version with cached geometries, but I found that I can not update the texture uvs. If I modify the default uvs:\n\n```\nvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\n```\n\nThe uv values seem to be ignored. Here's a [jsfiddle](http://jsfiddle.net/fujotgvb/1/) showing the behaviour: the uv values are all modified, but the resulting texture is the same as defaults. I tried to do `.attributes.uv.needsUpdate = true`, but doesn't update. \n\nIs this correct? These values are not exposed to the end user, so it's possible `BufferGeometry` uvs are never supposed to be changed, I just thought I'd check.\n"},{"labels":["enhancement"],"text":"Hello,\nI use ColladaLoader to load dae 3d Models. It works fine for most of models, but some models have wrong texture. I attach screenshots for this issue of one of such a model. This model is correctly rendered in other 3d editors. But ColladaLoader loads this model with texture only on one side.\n\nI could attach the original model, but suddenly there is no option for it. Just screenshoots. The model is uploaded to my web space http://www.russcity.de/private/bag_model.rar\n![1](https://cloud.githubusercontent.com/assets/9445518/5354770/98600830-7f8c-11e4-9c8d-c0a8a62f507d.png)\n![2](https://cloud.githubusercontent.com/assets/9445518/5354771/98651636-7f8c-11e4-8633-f66e7ebc142c.png)\n"},{"labels":["enhancement"],"text":"A simple test with 4 boxes :\n![sans titre-1](https://cloud.githubusercontent.com/assets/4399390/5340945/37ca9c6e-7ef2-11e4-8d4f-1c50ee1e6ea8.png)\n\nNow look at the different boxes :\n\n```\nloader.load( 'models/test.obj', 'models/test.mtl',\n    function ( object )\n    {\n        var i, o;\n        for (i = 0; i < object.children.length; i++)\n        {\n            o = object.children[i];\n            console.log(o, o.geometry.faces.length, o.geometry.vertices.length);\n        }\n        ...\n    }\n);\n```\n\nHere is what I get :\n\n```\nObject { uuid=\"6D1919C7-A5B9-46EE-B0EC-28279F8A53F8\", type=\"Mesh\", parent={...}, plus...} 0 8\nObject { uuid=\"FE14506D-DABD-4A3E-B28B-6903B1822251\", name=\"Box001\", type=\"Mesh\", plus...} 0 8\nObject { uuid=\"393B8E1D-434A-4881-9C4F-406374E2587E\", type=\"Mesh\", parent={...}, plus...} 12 16\nObject { uuid=\"FC342549-0DF0-4353-AF36-85FAFCC01BA3\", type=\"Mesh\", parent={...}, plus...} 12 24\nObject { uuid=\"8755C237-8C76-4A1D-AA8E-E72380B6CDAA\", type=\"Mesh\", parent={...}, plus...} 12 32\nObject { uuid=\"81BF6A4C-AFBD-4AE6-B1B4-A818565E8441\", type=\"Mesh\", parent={...}, plus...} 12 32\n```\n- 2 'empty' geometries (with no face, has to be filtered)\n- the name property is not affected (except 1 ?)\n- some vertices seems to be added from an object to the following\n\nI have checked the obj file and it's ok (8 vertices and 12 faces for each), and this issue did not occur with previous version.\n\n**Additional question**\nI would need to ask a general question about that (for a project that create meshes) : unused vertices doesn't affect render, but do they affect performance ? Finally are they problem ??\nThanks in advance\n\nAlso I have made a patch for this, it works fine and I can give it, but it would be better to fix the loader ?\n"},{"labels":["enhancement"],"text":"I tried to display a mesh using three.js\nhttp://www.thingiverse.com/thing:50174/#files\n![Preview of mesh](http://thingiverse-production.s3.amazonaws.com/renders/d0/2c/48/04/9d/right_hand_preview_featured.jpg)\n\nThis file can be display on netfabb and meshlab (one of them gave a incorrect STL file warning), but if I use STLLoader to load it, the geometry.faces and geometry.vertices of the loaded content are both empty.\n\nI'm pretty sure this file is in binary format as I've loaded it using a C++ mesh processing library. This file is sized 458876 bytes, but if we use the metadata at the beginning of the file to estimate the size, we get 458784 bytes. \n\nLooks like the software generating this file added something at the end, causing it to grows larger than expected.\n\nThe isBinary() function in STLLoader.js only checks if the actual file size is equal to the number calculated using the metadata, so this file is recognized as ASCII format because of the mismatch of sizes.\n\nI think there's some other way to check if STL file is in binary format?\n"},{"labels":["enhancement"],"text":"I'm working on an application with many different code paths that load textures and I've patched the WebGLRenderer to cache textures also on the GL level, so that `uploadTexture` and `onTextureDispose` use a dictionary to see if a texture has aleady been uploaded or are no longer used, which can reduce VRAM usage and does not need sweeping changes in other parts of the code.\n\nIs that a useful thing for others, too? Or is there side-effects I'm missing / is it too specific to be useful within three.js?\n"},{"labels":["enhancement"],"text":"From my experience one of the useful features of morph targets is the fact you can use negative values? any reason why it seems like morph influences are clamped to be positive?\n\ne.g. eyebrows at around 2:20 \nhttps://www.youtube.com/watch?v=AXba8B739mg\ni'm not sure if theres an implementation reason that the influences seem to do nothing with negative values, but it accepts values greater than 1 with no problem so im figuring someone threw a max test  in the shader somewhere without realizing, or the implementation does this somehow silently.\n"},{"labels":["enhancement"],"text":"Pretty self explanatory, spent a while debugging only to find out cloned geometry is completely devoid of morph targets.\n\nEDIT, looks like a reference to the morph target array of the object being cloned is sufficient too. guess it would be more reasonable to do that than make a deep copy, though i still think the clone method should do at least this since its hard to find if you're getting weird behaviour.\n"},{"labels":["enhancement"],"text":"https://github.com/mrdoob/three.js/blob/master/src/core/Clock.js#L40\n\nIf the user's render function calls both `getElapsedTime` and `getDelta` in a `requestAnimationFrame`, the code will not work properly and it will be impossible to debug why without the \"aha\" moment of looking at the source. These two functions should not conflict with each other.\n\nIt's because `getElapseTime` calls `getDelta`, so for example if your code looks like this:\n\n```\nvar elapsed = clock.getElapsedTime(),\n    delta = clock.getDelta();\n```\n\nthe delta will actually be the time between those two var statements!\n\nA workaround for now is to call `getDelta()` first, which will get the delta between getDelta and the last **getElapsedTime** call, which is not ideal.\n"},{"labels":["enhancement"],"text":"I don't know if this is intentional (I don't see why it would be) but any extra UV's specified for a geometry (geometry.faceVertexUvs[ 1 or greater ]) isn't copied when calling geometry.clone(), only the 0 indexed UV layer is cloned. I found out when lightmaps were breaking for no reason in a system i made that automatically clones geometry that requires different buffers.\n\n I clone them on my own for the time being but it really seems like it should be part of the geometry clone method in the first place.\n"},{"labels":["enhancement"],"text":"I'm running r63 and having issues with the composer doing an SSOA render pass and morph targets..\n\nBasically the SSOA is computed on the original (non-morphed) mesh. Should the composer render pass not execute the scene perfectly (with morph targets moved by the shaders as required?)\n\n![Image of SSOA enabled](http://www.cubiverse.net/web/wp-content/uploads/2014/11/RenderPass_MorphTargetVisibleToSSOA.png)\n"},{"labels":["enhancement"],"text":"I've been trying to implement point picking by rendering point indices to a texture and reading the index at the mouse courser position with gl.readPixels. Reason is because I also wanted to have https://github.com/mrdoob/three.js/issues/5617 and try using the GPU to do it. [It seems to work](http://potree.org/stuff/threejs/attributes/customExamples/point_picking.html) but there are a few hacks and I was wondering if there's a better solution to this.\n\nThe main problem is this: I want to pass the indices (Uint32) as point attributes, render them to the output and read them back. However, the only point attribute that seems to be supported is gl.FLOAT. Floats are quite a problem to read with gl.readPixels because they have to be split into 8bit rgba parts. \nInstead, I now pass each Uint32 index as 4 UNSIGNED_BYTEs which can be directly written into the rgba output. To do this, I had to setup some stuff by hand and work around three.js\n\nUsing _gl.UNSIGNED_BYTE attribute:\n\n```\nvar program = material.program.program;\nvar attributePointer = _gl.getAttribLocation(program, \"indices\");\nvar attributeSize = 4;\n_gl.bindBuffer( _gl.ARRAY_BUFFER, geometry.attributes.indices.buffer );\n_gl.enableVertexAttribArray( attributePointer );\n_gl.vertexAttribPointer( attributePointer, attributeSize, _gl.UNSIGNED_BYTE, true, 0, 0 ); \n```\n\nRendering point cloud directly\n\n```\nrenderer.renderBufferDirect(camera, [], null, material, geometry, object);\n```\n\nIn the vertex and fragment shader, the index is now encoded in the 4 elements of the indices variable which can be written to gl_FragColor as is.  \n\n```\nattribute vec4 indices;\n...\n\n...\ngl_FragColor = vIndices;\n```\n\nWill gl.UNSIGNED_BYTE be supported at some point or is there a preferred way to do something like this?\n"},{"labels":["enhancement"],"text":"this SO post reported a migration problem from r68 -> r69: http://stackoverflow.com/questions/26940930/three-js-r68-to-r69-migration-shader-texture\n\nwas due to WebGLRenderer initMaterials having been made private in https://github.com/mrdoob/three.js/commit/5987b43c59f24d354108736984415d389a23f1d6 (mrdoob authored on Jul 23)\n\ni added (tentatively) a note about that to https://github.com/mrdoob/three.js/wiki/Migration\n\nam not sure what's the policy regarding the notes (what counts as significant, what is considered internal etc) so am noting here. i think that's good to note though, changes the public api of the renderer.\n\nmore importantly: this is just one change -- there probably are others as well. would be nice if we can add at least important ones i figure. am not sure if can help with that but sure will if there's a way. haven't actually ported our stuff to 69 yet, will keep an eye on changes when do that.\n"},{"labels":["enhancement"],"text":"Hi,\n\nWould it be possible to have PointCloud.raycast() supporting PointCloud.material.sizeAttenuation = true?\n\nRight now PointCloud.raycast() assumes that all the particles are of the same size, which is not the case if sizeAttenuation is used.\n\nMany thanks.\nRicardo\n"},{"labels":["enhancement"],"text":"It seems that the VTKLoader is not working when VTK files are used that are generated in Kitware's visualization application ParaView. The bug can be easily reproduced by using any ParaView source to generate an object, saving data as legacy VTK, and replacing the file name `bunny.vtk` in the `webgl_loader_vtk.html` with the new file name.\n\nAlso, the example showing the bug with a sphere source saved as VTK in ParaView is available here: https://github.com/tmaric/three.js/tree/bugs/vtk-loader\n"},{"labels":["enhancement"],"text":"I'm new to 3D so apologies for lack of basic knowledge in areas...\n\nI'm using the ObjLoader shipped in rev 67 (I want to use a newer revision but it breaks some things).\n\nI am using https://github.com/spite/THREE.DecalGeometry to place decals on meshes loaded from an obj. I find this much easier than UV mapping with my current toolset (opensource, wings3d, blender). I think the better way might be traditionally to apply the decals with blender3d and have it generate the UV maps but I have barely touched the surface with blender and the objects I am mapping decals to are quite repetitive geometrically requiring a high level of accuracy for decal placement which is easier to do programmatically.\n\nIn getting this to work I've bumped into a few usability quirks around ObjLoader for this:\n\nCombining MTLLoader and ObjLoader did not appear to work without modification. The usemtl handling is a bit confusing in ObjLoader. That is, I don't understand the point of changing the name of the material. My guess is that someone though there should be one material per object and this was a good way to map loaded materials after the fact.\n\nI tried using ObjMtlLoader. This works well and looks good until I want to do anything with the result. I get several objects/geometries out of this with a lot of repetition between them. This was not really convenient to use for applying decals.\n\nI found the simplest approach is to modify the ObjLoader class to set the face material indexes according to the material:\n\nChange:\n        function face3( a, b, c, normals ) {\n            var face = new THREE.Face3( a, b, c, normals );\n            handleMtl(face);\n            return face;\n        }\n\nAdd:\n\n```\n    var mtl_idx = 0; // Index couinter.\n    var materials = {}; // Maps material names to indexes.\n    var mtl = null; // Current material.\n\n    function handleMtl(face) {\n        if(mtl === null)\n            face.materialIndex = 0;\n        else\n            face.materialIndex = materials[mtl];\n    }\n```\n\nChange:\n\n```\n        } else if ( /^usemtl /.test( line ) ) {\n            mtl = line.substring(7);\n\n            if(!(mtl in materials)) {\n                materials[mtl] = mtl_idx++;\n                console.log('Added material '+mtl+' at '+materials[mtl]);\n            }\n        }\n```\n\nThe material in this case is a MeshFaceMaterial loaded first using MtlLoader and passed down in a new parameter to load->parse...\n\n```\nvar loader = new THREE.MTLLoader(manager);\nvar mats, item;\n\nloader.load('item.mtl', function(object) {\n    mats = object;\n\n    var loader = new THREE.OBJLoader(manager);\n\n    loader.load('item.obj', new THREE.MeshFaceMaterial([\n        mats.create('a'),\n        mats.create('b'),\n        mats.create('c')\n    ]), function(object) {\n        item = object.children[0];\n        scene.add(item);\n```\n\nFor me this works and properly creates geometry groups rather than multiple objects with a lot of repetition between them.\n\nThis is useful for me in particular as I am applying behaviours to different faces. A notable quirk of the ObjLoader is that it ignores g (group) lines for faces. I think this is something more related to the core of three.js which groups faces purely on materials/aesthetics. An easy work around for me is to clone a material and give it a special name to make faces identifiable. Another quirk is that makeGroups is not applied until render (depends on _glExtensionElementIndexUint) although this is easily fixed externally if a slightly inelegant program flow is tolerable.\n\nMy changes work with a few quirks that are likely to be user error. As far as I can see there's no benefit for loading multiple objects instead of geometry groups.\n\nThe summary of all this:\n- There are some possible usage cases for grouping faces or preserving grouping so that we can easily identify faces to tag special functionality to.\n- I don't know exactly why MtlObjLoader uses groups of objects rather than groups of geometry.\n"},{"labels":["enhancement"],"text":"I have created a mesh with RawShaderMaterial with custom named attribute, but it does not work - the shader receives only zeros from the attribute (though the buffer is not empty). However, if I change the attribute name to, for example, \"uv2\" (or any name three.js uses internally - such as \"color\", \"uv\", \"uv2\", ...) everything is OK.\n\nI have created an example to demonstrate the issue:\nhttp://jsfiddle.net/mbsof67k/\nThe example should show two white rectangles next to each other. If you change the line 54 from \"foo\" to any internal three.js name (for example, \"uv\"), the second rectangle appears.\n\nThis issue occurs in every browser (Firefox, Chrome, IE, Safari), so it's probably issue with the library.\n"},{"labels":["enhancement"],"text":"Before the next release of `three` I want to openly discuss the features of the new Blender exporter. Originally this addon was just my side project so I added features that were only supported by an experimental loader that I was working on. Now that it is merged it does introduce options that users won't be familiar with and/or the current ObjectLoader does not support.\n## Textures (default=False)\n\nThis is kind of stating the obvious but I will mention it anyways for clarity. Tho I have the feeling that the new exporter will probably be a big push to get texture support resolved.\n## Bones and Skinning export (default=False)\n\nCurrently exporting of bones and skinning data is two separate boolean options (my [reasoning](https://github.com/mrdoob/three.js/pull/5546#issuecomment-61117212)). It does seem logical to possibly only having skinning as an option which implies that bones would be exported as well.\n## Mix Colors (default=False)\n\nIn the Wiki of the original repo the exporter came from I give a [visual example](https://github.com/repsac/threeio/wiki/Options#mix-colors) of what this does. Under the hood the option includes `colorDiffuse` in the material, otherwise it omits it. I noticed this difference while developing the exporter and it seemed like possibly a feature someone might use, but then again this may not be something that is intended and even supported in the future.\n## Embed animation (default=True)\n\nThere is nothing in the ObjectLoader that supports external animation files. However as a pipeline TD abstracting my assets from animation data is favorable. This option could be commented out until there is a better native implementation in the `three` loader. It also is possible to make an example scene to demonstrate how external skeletal animation data could be supported.\n## Embed geometry (default=True)\n\nSimilar concept to the aforementioned option. A feature of the now deprecated SceneLoader() that I did like.\n## Importer\n\nStarting to widdle away at it. Not a high priority but it would be nice to be able to take scenes exported from other 3D apps (for `three`) and directly import them, tho there should be some realistic expectations of what this will support.\n"},{"labels":["enhancement"],"text":"Hello,\n\ni have an .obj format 3D object and an environment in .hdr file format i want to use for a project\n\nHow can an hdr file be used with three.js?\n\nThanks\n"},{"labels":["enhancement",null],"text":"List of loaders that would be nice to have:\r\n## 3D\r\n- [ ] 3DMLoader\r\n  - https://www.rhino3d.com/opennurbs\r\n- [x] 3DSLoader\r\n  - http://en.wikipedia.org/wiki/.3ds\r\n  - http://dzzd.net/3DSChunkDefinitions.html\r\n  - http://k3d.ivank.net/demos/parsing3DS.html\r\n- [x] 3MFLoader\r\n- [x] AMFLoader\r\n  - http://en.wikipedia.org/wiki/Additive_Manufacturing_File_Format\r\n- [x] AssimpJSONLoader\r\n- [x] BVHLoader\r\n  - https://sites.google.com/a/cgspeed.com/cgspeed/motion-capture/cmu-bvh-conversion\r\n- [x] ColladaLoader\r\n- [ ] DXFLoader\r\n  - http://en.wikipedia.org/wiki/AutoCAD_DXF\r\n  - https://github.com/gdsestimating/dxf-parser\r\n- [x] FBXLoader\r\n  - https://banexdevblog.wordpress.com/2014/06/23/a-quick-tutorial-about-the-fbx-ascii-format/\r\n  - http://code.blender.org/2013/08/fbx-binary-file-format-specification/\r\n  - https://github.com/hamish-milne/FbxWriter\r\n  - http://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\r\n  - https://github.com/dobkeratops/openfbx\r\n- [x] GLTFLoader\r\n- [ ] IFCLoader\r\n- [ ] IGESLoader\r\n  - http://en.wikipedia.org/wiki/IGES\r\n- [x] KMZLoader\r\n  - https://3dwarehouse.sketchup.com/model.html?id=907f1fa5805282f8630a81e41b3b6ffd\r\n- [x] LWOLoader\r\n  - http://static.lightwave3d.com/sdk/2018/html/filefmts/lwo3.html\r\n  - https://github.com/marcbizal/lwo-parser\r\n- [ ] M2Loader\r\n  - https://wowdev.wiki/M2\r\n  - https://github.com/Dramacydal/M2Lib https://github.com/Koward/M2Lib\r\n- [ ] MALoader\r\n  - http://download.autodesk.com/us/maya/2009help/index.html?url=Glossary_M_ma_file_format.htm,topicNumber=d0e193637\r\n  - http://files.davidoreilly.com/downloads/EXTW_rigs.zip\r\n- [x] MD2Loader\r\n- [x] MDDLoader\r\n- [x] MMDLoader\r\n  - http://mikumikudance.wikia.com/wiki/MMD:Polygon_Model_Data\r\n- [x] MTLLoader (needs refactoring)\r\n- [x] NRRDLoader\r\n  - http://lessons.goxtk.com/10/\r\n- [x] OBJLoader\r\n- [x] PDBLoader\r\n- [x] PCDLLoader\r\n- [x] PlayCanvasLoader\r\n- [x] PLYLoader\r\n- [x] PVRLoader\r\n- [ ] STEPLoader\r\n  - https://github.com/mrdoob/three.js/issues/7125#issuecomment-308232748\r\n- [x] STLLoader\r\n- [ ] TILTLoader\r\n  - https://github.com/benfoxall/tiltbrush/blob/master/lib/Sketch.js\r\n  - https://github.com/googlevr/tilt-brush-toolkit\r\n  - https://docs.google.com/document/d/11ZsHozYn9FnWG7y3s3WAyKIACfbfwb4PbaS8cZ_xjvo/preview\r\n- [ ] URDFLoader\r\n  - #13768\r\n- [ ] USDLoader\r\n  - #14219\r\n  - https://graphics.pixar.com/usd/docs/Usdz-File-Format-Specification.html\r\n- [ ] VDBLoader\r\n  - https://www.openvdb.org/\r\n- [x] VRMLLoader\r\n- [x] VTKLoader\r\n- [ ] X3DLoader\r\n## Bitmap\r\n- [x] DDSLoader\r\n- [x] HDRLoader\r\n- [x] TGALoader\r\n- [ ] TIFFLoader\r\n## Vector\r\n- [x] SVGLoader\r\n- [x] TTFLoader\r\n"},{"labels":["enhancement"],"text":"I've been looking all day for information about restoring after a context loss, and I really found very little info. After digging around in the guts of R68 all day, this is what I came up with. It works for most common cases in my engine, but probably won't fix everything for everyone. Either way, here it is for reference.\n\n```\nsceneNode.renderer.context.canvas.addEventListener(\"webglcontextrestored\", function(event) {\n                        // Do something \n                        //chadwick :10/24/14\n                        //try to recreate all the webgl stuff when context is restored.\n                        //TODO: the terrain engine does all sorts of crazy things. Things that current probably don't work\n                        //terrain\n                        //render-to-texture\n                        //videotextures\n                        //the grass system\n                        //postprocessing\n                        //any other code that manually manages rendertargets \n\n                        //ok, good to render next frame\n                        _dView.paused = false;\n\n                        //create a new renderer and set all pointers to it\n                        renderer = _dRenderer = sceneNode.renderer = new THREE.WebGLRenderer({\n                            canvas: mycanvas,\n                            antialias: true,\n                            alpha: false,\n                            stencil: false\n                        });\n\n\n                        //here, we are going to do a lot of work to clean up the three.js datastructures\n                        //to force the  new renderer to recreate all the webgl objects\n                        _dScene.__webglObjects = {};\n\n                        //reset the renderer properties\n                        sceneNode.renderer.shadowMapType = THREE.PCFSoftShadowMap;\n                        sceneNode.renderer.shadowMapEnabled = true;\n                        sceneNode.renderer.autoClear = false;\n                        sceneNode.renderer.setClearColor({\n                            r: 1,\n                            g: 1,\n                            b: 1\n                        }, 1.0);\n\n                        //because we can encounter the same objects over and over in the scenegraph, we need to keep track of what we hit\n                        var geoProcessedList = [];\n                        var matProcessedList = [];\n                        var walk = function(node) {\n                            if (node.children)\n                                for (var i = 0; i < node.children.length; i++)\n                                    walk(node.children[i])\n\n                            //mark objects an not inited\n                            if (node.__webglInit)\n                                node.__webglInit = undefined;\n                            if (node.__webglActive)\n                                node.__webglActive = undefined;\n\n\n                            //clear buffers and caches on geometries\n                            if (node instanceof THREE.Geometry && geoProcessedList.indexOf(node) == -1) {\n                                if (node.geometryGroups)\n                                    node.geometryGroups = undefined;\n                                if (node.geometryGroupsList)\n                                    node.geometryGroupsList = undefined;\n                                node.__colorArray = undefined;\n                                node.__sortArray = undefined;\n                                node.__vertexArray = undefined;\n                                node.__webglColorBuffer = undefined;\n                                node.__webglCustomAttributesList = undefined;\n                                node.__webglInit = undefined;\n                                node.__webglParticleCount = undefined;\n                                node.__webglVertexBuffer = undefined;\n                                geoProcessedList.push(node);\n                            }\n                            //send geometry into this same function\n                            if (node.geometry) {\n                                walk(node.geometry);\n\n                            }\n\n                            //have to be careful! renderer stashes the rendertarget in the light itself\n                            //clear it\n                            if (node instanceof THREE.Light) {\n                                if (node.shadowMap) {\n                                    node.shadowMap.__webglFramebuffer = undefined;\n                                    node.shadowMap.__webglRenderbuffer = undefined;\n                                    node.shadowMap.__webglTexture = undefined;\n                                }\n\n                            }\n                            //careful! three.js uses a datatexture to send bone transforms. clear this texture\n                            if (node instanceof THREE.SkinnedMesh) {\n                                node.skeleton.boneTexture.needsUpdate = true\n                                node.skeleton.boneTexture.__webglInit = undefined;\n                                node.skeleton.boneTexture.__webglTexture = undefined;\n                            }\n\n                            //scene needs to be tricked into re-initing the objects. this does that\n                            if (!(node instanceof THREE.Geometry))\n                                _dScene.__objectsAdded.push(node);\n\n                            //big step here, deal with materials\n                            if (node.material && matProcessedList.indexOf(node.material) == -1) {\n\n                                matProcessedList.push(node.material);\n\n                                //if the material is alread inited\n                                if (node.material.__webglShader) {  \n\n                                    //find all textures in the material, and re-init\n                                    for (var i in node.material.__webglShader.uniforms) {\n                                        if (node.material.__webglShader.uniforms[i].type == 't') {\n                                            var tex = node.material.__webglShader.uniforms[i].value;\n\n                                            //don't forget cubemaps, slightly differnet under the hood\n                                            if (tex) {\n                                                if (tex.image.length) {\n                                                    tex.image.__webglTextureCube = undefined;\n                                                }\n                                                tex.__webglInit = undefined;\n                                                tex.__webglTexture = undefined;\n                                                tex.needsUpdate = true;\n                                            }\n                                        }\n\n                                    }\n                                }\n                                //reset the default datatexture provided while real textures are loading\n                                var defaulttex = _SceneManager.getDefaultTexture();\n                                defaulttex.__webglInit = undefined;\n                                defaulttex.__webglTexture = undefined;\n                                defaulttex.needsUpdate = true;\n\n                                //if the material has any custom vertex attributes (particle system use this heavily)\n                                //the webgl buffers for those attributes have to be reinited\n                                if (node.material.attributes) {\n                                    for (var i in node.material.attributes) {\n                                        node.material.attributes[i].buffer = undefined;\n                                        node.material.attributes[i].__webglInitialized = undefined;\n                                    }\n                                }\n                                //mark material for general update - should rebuild shaders and uniforms at webgl level\n                                node.material.dispose();\n                                node.material.__webglShader = null;\n                                node.material.needsUpdate = true;\n\n                            }\n\n\n                            if (node.geometry)\n                                walk(node.geometry);\n                        }\n                        //walk the scenegraph and recreate\n                        walk(_dScene);\n\n\n                    }, false);\n```\n"},{"labels":["enhancement"],"text":"I can't tell if this is a bug in SplineCurve3, a bug in TubeGeometry or something I'm doing wrong. I have a long list (242) of 3d points that I'm feeding to a SplineCurve3 and creating a TubeGeometry from. There appears to be nothing unusual about the data at the point the \"kink\" is made, and the only difference between this and previous datasets is the number of points.\n\nI'll endeavour to create in an example dataset and reproduce the issue on jsfiddle, but the data I'm using is sensitive and there's no way at all I can share it. Which is a bit of a bit of a ball-ache.\n\nSwitching to the latest build of dev branch, the issue persists.\n\n![kink](https://cloud.githubusercontent.com/assets/436859/4767283/05b415a2-5b5c-11e4-8580-93be15e8bd8a.png)\n"},{"labels":["enhancement"],"text":"The exporter script for Blender produces fewer materials in the final JSON than existed in the original model, in some cases.\n\nIn particular, the extract_materials function in export_threejs.py does not account for the possibility of multiple materials with the same name on the same mesh.  For example, if the mesh has two materials attached to it and both materials have the same name, extract_materials will only return one material.  This results in the material indices not matching up with the number of materials in the final JSON.  I'm not sure how this could be fixed without reworking the entire handling of materials in the exporter.\n"},{"labels":["enhancement"],"text":"I have a simple editor for 3D models using three.js. This is my camera:\n\n```\nnew THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.01, 10);\n```\n\nAnd this is my mesh's geometry:\n\n```\nnew THREE.BoxGeometry(0.3, 0.3, 0.3);\n```\n\nI'm using THREE.TransformControls to scale the mesh.\n\nScaling works perfectly fine when meshes have units ~ 100, but when an object is between 0 and 1, scaling is _very_ slow. With _slow_, I mean that when you drag the scale slider half the canvas size, the mesh increases or decreases only a few percentages in size. I don't have this problem with other TransformControls modes. \n\nThis is because there's a the [magic number 50](https://github.com/mrdoob/three.js/blob/1769fbfc6c994b51a54c15a5c096855fd3cb8a1a/examples/js/controls/TransformControls.js#L850) in the code that translates mouse movement to scale.\n\nCan we make this number configurable, and/or make it use a sane default based on mesh size or camera?\n\n[JSFiddle demonstrating slow scaling](http://jsfiddle.net/Lm19u6dj/1)\n"},{"labels":["enhancement"],"text":"When trying to import a custom geometry into blender, I get the following error\n\n![Blender error](http://i.imgur.com/8VQlCT5.png)\n\nI'm using the `ObjectExporter` and have also tried using this `import_threejs.py` replacement https://github.com/mrdoob/three.js/issues/5099 but no luck \n\nFYI I am creating this geometry using the following kind of method\n\n```\nvar box = new THREE.BoxGeometry(64 , 32 , 64);\n\nbox.verticesNeedUpdate = true;\nbox.vertices[0].y = 128;\nbox.vertices[1].y = 128;\n\nvar geometry = new THREE.Geometry();\ngeometry.merge(box);\n```\n\n**Edit** this very same error also occurs in Blender 2.65\n"},{"labels":["enhancement"],"text":"I'm looking to build an Object3D that can integrate into the rest of a ThreeJS scene graph, but issues its own low-level GL initialization and draw calls. The primary reason for this is so the object can be modular (published on NPM with no ties to ThreeJS) and reused on a variety of other projects. \n\nRight now the WebGLRenderer just checks `instanceof` to determine how to setup/render an object, which means that custom objects are out of the question. Is there any way around this? Like a `renderCustom` function or something I can override? \n\nI can submit a PR if there is a preferred way to add this feature. \n"},{"labels":["enhancement"],"text":"I know that this is mainly a bug of firefox 33.\nBut the question is if we make a workaround or other defaults in three.js. \n\nHere is the problem:\n\nSince the update to firefox 33 yesterday, all machines with a Q45 chipset in our company failed to create webGL context.   After some testing i found out, that the webGL context is created when i set the default value from stencil to false. \n\nSolution 1 -  different error Message if the paramters are the problem:\n\n```\n        _gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n        if ( _gl === null ) {\n\n            if ( _canvas.getContext( 'webgl') !== null ) {\n                throw 'Error creating WebGL context with your selected attributes.';                    \n            } else {            \n                throw 'Error creating WebGL context.';\n            }\n\n        } \n```\n\nSolution 2 -  no error Message. Write a warning and go on with the browser default values:\n\n```\n        _gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n        if ( _gl === null ) {\n\n            _gl = _canvas.getContext( 'webgl') || _canvas.getContext( 'experimental-webgl');\n\n            if ( _gl !== null ) {\n                console.log('Error creating WebGL context with your selected attributes. Context was created with the browser defaults.';                   \n            } else {            \n                throw 'Error creating WebGL context.';\n            }\n\n        }  \n```\n\nSolution 3 - switch default value from stencil to false. \n(I think that should only be done in a combination with one of the other two solutions)\n"},{"labels":["enhancement"],"text":"I import model with several uv layers in editor, and after export or autosave/reopen it has only one UV layer.\n\nModel has simple Geometry, not BufferGeometry.\n\nPS Does BufferGeometry have second uv layer support?\n"},{"labels":["enhancement"],"text":"Hi,\n\nMaybe I am getting this wrong, but shouldn't the loading manager first call the onLoad function and after that the onProgress function?\n\nMy Reason:\nI load a json file (containing materials and a geometry) and I set the onLoad callback. In this callback I place the stuff in my scene and in some array to later modify it.\n\nNow I wan to use the DefaultLoadingManager to start my application when everything is loaded.\nI do it this way: \nTHREE.DefaultLoadingManager.onProgress = function ( item, loaded, total ) {\n    if (loaded == total) {\n         start();\n}\n\nSince the order in which the callbacks are called is \"progress\" and after that \"loaded\" the LoadingManager starts the application before everything is setup properly and it (sometimes, depending on the load order) crashes.\n\nIf I am just using this wrong, feel free to point me in the right direction - if not, I'll be happy to switch the order of the callbacks and create a pull request.\n"},{"labels":["enhancement"],"text":"Modification of the VRML loader which allows the loader to import the animations in the vrml file.\n"},{"labels":["enhancement"],"text":"As mentioned by @mrdoob in https://github.com/mrdoob/three.js/pull/5413#issuecomment-58183196, it does not seem that there is anybody working on a blender exporter for the [JSON Object/Scene format 4](https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4). I would be willing to begin this process, though my familiarity with Python and Blender was waned in the past few years, so it would be slow. It seems that the values are mostly the same, just formatted differently.\n\nFirstly, though, I have a few questions:\n- Has anybody else in the community has begun this?\n- Would be willing to assist in testing.\n- Do any of the loaders support this format, or does that need to be created too?\n- Is there a specific set of Blender files on which to test the export, to make sure all features are covered correctly?\n"},{"labels":["enhancement"],"text":"If you are interested in helping with the documentation please direct your efforts here. This issue will manage and coordinate the various efforts. If you are interested in helping out with something specific leave a comment and I will add your name to the list.\n\nMaterials\n- [ ] Document what flags need changed when changing properties @TatumCreative\n- [ ] MeshNormalMaterial smoothing default incorrect @TatumCreative\n- [ ] MeshDepthMaterial.morphTargets not listed @TatumCreative\n\nExtras / Renderers / Plugins\n- [ ] http://threejs.org/docs/#Reference/Extras.Renderers.Plugins/DepthPassPlugin\n## General Improvements\n- [ ] Consolidate information into docs @caseygrun #5410\n- [ ] Link to pages in the http://threejs.org/examples/ within the documentation #5405 @Brenden-Morales\n- [ ] Issues with mobile layout #5482\n- [ ] Document THREE.Group()\n## Existing Issues\n- [ ] Raycaster #5365 @caseygrun \n- [ ] Euler/Quaternion #5187 @caseygrun \n- [ ] MeshFaceMaterial #4645\n- [ ] Documentation does not include inherited methods #4557\n- [ ] CSS3DRenderer #3716\n# Completed\n- [x] BoundingBoxHelper #4667\n- [x] Raycaster Backface #5613  @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/CameraHelper.html\n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/HemisphereLightHelper\n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/SpotLightHelper @TatumCreative\n- [x] extras/core/Gyroscope.html @TatumCreative\n- [x] extras/core/Shape.html @TatumCreative\n- [x] extras/objects/MorphBlendMesh.html @TatumCreative\n- [x] objects/Bone.html @TatumCreative\n- [x] materials/MeshLambertMaterial.html @TatumCreative\n- [x] materials/MeshPhongMaterial.html @TatumCreative\n- [x] materials/SpriteCanvasMaterial.html @TatumCreative\n- [x] materials/SpriteMaterial.html @TatumCreative\n- [x] Improve cross referencing @caseygrun #5405 #5477 #5415\n- [x] Build dat.GUI previews of Materials @TatumCreative #5375\n- [x] objects/LensFlare.html @TatumCreative\n- [x] objects/LOD.html @TatumCreative\n- [x] objects/MorphAnimMesh.html @TatumCreative\n- [x] objects/WebGLShader.html @TatumCreative\n\nCore\n- [x] http://threejs.org/docs/#Reference/Core/BufferAttribute @caseygrun #5406\n- [x] http://threejs.org/docs/#Reference/Core/BufferGeometry (attributes) @caseygrun #5406\n\nLoaders\n- [x] loaders/BufferGeometryLoader.html  @vincent #5485\n- [x] loaders/Cache.html  @vincent #5485\n- [x] loaders/ImageLoader.html  @vincent #5485\n- [x] loaders/JSONLoader.html  @vincent #5485\n- [x] loaders/Loader.html  @vincent #5485\n- [x] loaders/LoadingManager.html  @vincent #5485\n- [x] loaders/MaterialLoader.html  @vincent #5485\n- [x] loaders/ObjectLoader.html  @vincent #5485\n- [x] loaders/TextureLoader.html  @vincent #5485\n- [x] loaders/XHRLoader.html  @vincent #5485\n\nMaterials\n- [x] http://threejs.org/docs/#Reference/Materials/ShaderMaterial @caseygrun #5455\n- [x] http://threejs.org/docs/#Reference/Materials/RawShaderMaterial @caseygrun\n\nExtras\n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/DirectionalLightHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/EdgesHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/FaceNormalsHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/PointLightHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/VertexNormalsHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/VertexTangentsHelper @caseygrun \n- [x] http://threejs.org/docs/#Reference/Extras.Helpers/WireframeHelper @caseygrun \n- [x] extras/animation/AnimationMorphTarget.html @TatumCreative\n- [x] extras/animation/KeyFrameAnimation.html @TatumCreative\n- [x] extras/cameras/CubeCamera.html #5731  @TatumCreative\n- [x] extras/core/CurvePath.html @TatumCreative\n- [x] extras/core/Path.html @caseygrun\n- [x] extras/ImageUtils.html @TatumCreative\n\nExtras/Curves\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/ArcCurve @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/ClosedSplineCurve3 @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/CubicBezierCurve @TatumCreative #5491\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/CubicBezierCurve3 @TatumCreative #5491\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/EllipseCurve @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/LineCurve @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/LineCurve3 @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/QuadraticBezierCurve @TatumCreative #5491\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/QuadraticBezierCurve3 @TatumCreative #5491\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/SplineCurve @TatumCreative\n- [x] http://threejs.org/docs/#Reference/Extras.Curves/SplineCurve3 @TatumCreative\n\nExtras / Geometries\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/ShapeGeometry @TatumCreative #5414\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/ParametricGeometry @TatumCreative #5414\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/PolyhedronGeometry @TatumCreative #5414\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/OctahedronGeometry @TatumCreative #5414\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/DodecahedronGeometry @TatumCreative #5414\n- [x] http://threejs.org/docs/#Reference/Extras.Geometries/TubeGeometry @TatumCreative #5414\n\nRenderers\n- [x] renderers/CanvasRenderer.html #5731\n- [x] renderers/webgl/WebGLShader.html #5731\n- [x] renderers/WebGLRenderer.html #5731\n- [x] renderers/WebGLRenderTargetCube.html #5731\n"},{"labels":["enhancement"],"text":"Is there a principled separation between what goes in the [wiki](https://github.com/mrdoob/three.js/wiki) and what goes in the [API documentation](http://threejs.org/docs/)? Some of the stuff included or linked to in the wiki (e.g. https://github.com/mrdoob/three.js/wiki/Uniforms-types , https://github.com/mrdoob/three.js/issues/1188#issuecomment-3666286  / https://github.com/mrdoob/three.js/wiki/Using-Matrices-&-Object3Ds-in-THREE , https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/WebGLProgram.js#L104 , etc.) seems quite important and like it belongs in the API docs. If there's interest, I can try to scoop some of that information into pages in the docs as part of #5311.\n"},{"labels":["enhancement"],"text":"While looking into documentation for #5311, I've noticed a few persisent issues with the documentation:\n1. There's no way to cross-reference member properties or methods, even within a particular class. I often find it helpful to do this (e.g. it's helpful to point to the `addAttribute` method of BufferGeometry when describing the `attributes` property).\n2. (Slightly relatedly), the docs are filled with indirect type annotations in the form of links to other documentation pages. Sometimes these other pages are nonexistant (for instance, the ones that link to Number, String, Array, etc.), so clicking on the links does nothing (which is a bit confusing). Might it be better to explicitly show this type information by printing the type name after the link?\n3. This has been mentioned before, but the docs rarely (never?) link to the included examples, of which there are tons... seems like this is low hanging fruit.\n\nThe documentation seems to use a fairly simple set of regexes to handle cross-referencing links (for instance, links to other classes are written `[page:ClassName]`, and a regex rewrites them to `<a>` tags). \n\nThese could probably be simply extended to include a mechanism for cross-referencing within the page: the anchors could get an `id` based on the title; then we could add another regex to match something like `[member:memberName]`, or even `[member:ClassName#memberName]`; those would add links to the associated member. For instance, to link to the `computeVertexNormals` method within `BufferGeometry`, you could do `[member:computeVertexNormals]`, or `[member:BufferGeometry#computeVertexNormals]` if you're linking from another class. \n\nWe could do something similar for the examples: `[example:webgl_animation_cloth Cloth animation]` becomes `<a href=\"../examples#webgl_animation_cloth\" target=\"_blank\">Cloth animation</a>`. \n\nIs this something folks would be interested in having in the docs, or is this type of cross-referencing deliberately omitted? If interested I can open a PR.\n"},{"labels":["enhancement"],"text":"Hello,\n\ni am not sure if thats an bug or feature request, but it seems that you actually cant load Morphtargets from Buffergeometry. They do just not morph after loading.\n\nThe docs are saying it should work: http://threejs.org/docs/#Reference/Core/BufferGeometry\n\nOr is there maybe some special requirement i didnt notice?\n\nRegards\n\nStefan\n"},{"labels":["enhancement"],"text":"@bartmcleod seems like the loader is currently not handling points defined like this:\n\n```\npoint [ -100 -100 -100,-100 100 -100,-100 -100 100,-100 100 100,100 -100 100,\n            100 100 100,100 -100 -100,100 100 -100\n          ]\n```\n\nHere's the full file:\n\n```\n#VRML V2.0 utf8\n\n#Created by CINEMA 4D\n\nDEF B1 Transform {\n translation 600 0 0.333333\n children [ \n DEF _60_ Transform {\n  translation -600 0 0\n  children [ \n  ]\n}\nDEF Button Transform {\n  translation 679.734143 0 0\n  children [ \n    Shape {\n      appearance DEF MAT_Metal_010 Appearance {\n        material Material {\n          ambientIntensity 0.2\n          diffuseColor 0.815686 0 0.223529\n          specularColor 0 0 0\n          emissiveColor 0 0 0\n          shininess 0.1\n          transparency 0\n        }\n      }\n      geometry DEF FACESET_Button IndexedFaceSet {\n        ccw FALSE\n        creaseAngle 1.396263\n        coord Coordinate {\n          point [ -100 -100 -100,-100 100 -100,-100 -100 100,-100 100 100,100 -100 100,\n            100 100 100,100 -100 -100,100 100 -100\n          ]\n        }\n        texCoord TextureCoordinate {\n          point [ 0 1,1 0,\n            0 0,0 0,1 1,0 1,1 1,\n            0 0,1 0,1 0,0 1,1 1,\n            1 0,0 0,1 1,0 1,0 0,\n            1 0,0 1,1 1\n          ]\n        }\n        coordIndex [ 0,1,3,2,-1,2,3,5,4,-1,4,5,7,6,-1,\n          6,7,1,0,-1,1,7,5,3,-1,6,0,2,4,-1\n        ]\n        texCoordIndex [ 2,5,11,8,-1,7,10,14,12,-1,13,15,19,17,-1,\n          16,18,4,1,-1,3,18,14,9,-1,16,0,6,12,-1\n        ]\n      }\n    }\n  ]\n }\n]\n}\nDEF Timer TimeSensor {\nstartTime 0\nstopTime 0\ncycleInterval 14.4\nloop TRUE\n}\n```\n\nMore info: http://stackoverflow.com/questions/26137393/how-to-import-vrml-files-in-three-js\n"},{"labels":["enhancement"],"text":"We put together a simple [parallax mapping example](http://www.shapespark.com/labs/parallax-mapping/). Source code is [here](https://github.com/shapespark/parallax-mapping) (README lists original shaders' authors).\n\nPlease let me know if you would like to include it in the official Three.js examples and I can prepare a pull request. Otherwise we will keep it in this separate repository.\n"},{"labels":["enhancement"],"text":"[loadTextureCube](https://github.com/mrdoob/three.js/blob/b66f117aaebf32ceeaf679a956b8cf9d7ee75d14/src/extras/ImageUtils.js#L37) takes an `onError` argument, but then ignores it.\n\n[loadTextue](https://github.com/mrdoob/three.js/blob/b66f117aaebf32ceeaf679a956b8cf9d7ee75d14/src/extras/ImageUtils.js#L11) _does_ handle errors from `loader.load()` correctly, but `loadTextureCube` does not.\n"},{"labels":["enhancement"],"text":"When switching the renderer in any of the webGL particle examples, the point cloud is no longer visible. \n\nSince none of the canvas particle examples use a PointCloud, it's unclear whether PointCloud and PointCloudMaterial are compatible with the canvas renderer. The webgl_particles_billboards example looks like it shouldn't require any other changes besides switching the renderer.\n\nIt seems like the Point Cloud geometry is okay - in our project we can still calculate intersects with a Raycaster, the particles are just not rendered.\n"},{"labels":["enhancement"],"text":"Hi !\n\nI've been playing with OrbitControls.js to add some inertia. Thus I've been reading thru the code and the examples and I figure out that in the examples, the OrbitControls is setup with : \n\n```\ncontrols.damping = 0.2;\n```\n\nsee: https://github.com/mrdoob/three.js/blob/master/examples/misc_controls_orbit.html#L71\n\nBut reading thru master and dev, in the OrbitControls.js file, i can't see any trace of damping property.\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/controls/OrbitControls.js\n\nBut in the pull request that aded this param it did exist : https://github.com/lpsinger/three.js/blob/21b891af76ab5c7d20b114ab0450c8c2f5f9c6fa/examples/js/controls/OrbitControls.js#L254 \n\nSo, what can we do about that ? Adding the damping or not, that is the question !\n\nthanks for the great work. \n"},{"labels":["enhancement"],"text":"In the http://threejs.org/docs/#Reference/Core/Raycaster, the `lineprecison` is not documentated here. I guess it should be added.\n"},{"labels":["enhancement"],"text":"If you load http://threejs.org/examples/#misc_controls_pointerlock in Firefox, the request for full screen and pointer lock fail because, according to the log:\n\nRequest for full-screen was denied because at least one of the document's containing iframes does not have an \"allowfullscreen\" attribute.\n\nThe example works when loaded directly as http://threejs.org/examples/misc_controls_pointerlock.html\n\nIt's interesting to note that only Firefox attempts to fullscreen this example, and this is what prevents pointerlock from working.  Chrome doesn't try to fullscreen, and pointerlock works fine in both cases.\n"},{"labels":["enhancement"],"text":"I used 'http://threejs.org/editor/' to test this against the newest three.js version (I'm using r64) and you can easily and quickly reproduce this.\n\nI added a sprite to the scene and gave it a texture with an image to map to it. Now I can select that sprite even if I click next to sprite with an offset of almost the image/sprite size. This makes selecting objects that are \"behind\" the Sprite impossible (easily tested with adding a cube and moving it behind the sprite)\n"},{"labels":["enhancement",null],"text":"Since commit 9c7f2ee12c1f0f838937c5ff0be152cd4a9c0597 materials with diffuse texture in combination with bumpmap texture are all black.\n\nworked:\n\n```\nvar texture = THREE.ImageUtils.loadTexture(baseUrl + image.init_from);\ntexture.wrapS = cot.texOpts.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\ntexture.wrapT = cot.texOpts.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\ntexture.offset.x = cot.texOpts.offsetU;\ntexture.offset.y = cot.texOpts.offsetV;\ntexture.repeat.x = cot.texOpts.repeatU;\ntexture.repeat.y = cot.texOpts.repeatV;\ntexture.anisotropy = 16;\nprops[keys[prop]] = texture;\n\n// Texture with baked lighting?\nif (prop === 'emission') props['emissive'] = 0xffffff;\n```\n\ndoesn't work for me anymore:\n\n```\nvar url = baseUrl + image.init_from;\n\nvar texture;\nvar loader = THREE.Loader.Handlers.get( url );\n    console.log(loader);\nif ( loader !== null ) {\n\n    texture = loader.load( url );\n\n} else {\n\n    texture = new THREE.Texture();\n    loader = new THREE.ImageLoader();\n    loader.load( url, function ( image ) {\n\n        texture.image = image;\n        texture.needsUpdate = true;\n\n    } );\n\n}\n\ntexture.wrapS = cot.texOpts.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\ntexture.wrapT = cot.texOpts.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\ntexture.offset.x = cot.texOpts.offsetU;\ntexture.offset.y = cot.texOpts.offsetV;\ntexture.repeat.x = cot.texOpts.repeatU;\ntexture.repeat.y = cot.texOpts.repeatV;\nprops[keys[prop]] = texture;\n\n// Texture with baked lighting?\nif (prop === 'emission') props['emissive'] = 0xffffff;\n```\n"},{"labels":["enhancement"],"text":"Hello,\nthere are a few cases where gltf models do not load with the current version of the loader.\n- the model is skinned to a skeleton, but has no animation frames\n- the model is skinned with influences only to a few bones, but not the complete skeleton\n\nI did prepare a testfile with some skinned mesh that has both, no frames and its bound only to a few bones. This model was converted from opencollada using the gltf v06 converter. \n\nSuch models do load well as collada, it would be great to have this working with gltf as well.\n\nhttps://dl.dropboxusercontent.com/u/40028603/testrig.zip\n"},{"labels":["enhancement"],"text":"Hi! I show the proble on example because eng is not the best option\nthis is the loadModel function and its working.\n\n```\nthis.loadModel = function()\n    {   \n        this.loader = new THREE.JSONLoader(true);\n        this.loader.load(this.pathToFile, this.createMesh.bind(this)); \n        this.loader.onLoadComplete = this.createMeshComplete.bind(this);\n    }\n```\n\nnow i change the load method to loadAjaxJSON because i watn the callbackProgress\n\n```\nthis.loadModel = function()\n    {   \n        this.loader = new THREE.JSONLoader(true);\n        this.loader.loadAjaxJSON(this.loader, this.pathToFile, this.pathToFile, this.createMesh.bind(this), false, function( progress, result ) { console.log((progress.loaded / progress.total * 100).toFixed());}); \n        this.loader.onLoadComplete = this.createMeshComplete.bind(this);\n    }\n```\n\nand the i have a problem that  callback is not a function\n\nin the load method code we can see that this methou using loadAjaxJSON method and i have no problem with callback, what i use loadAjaxJSON manualy then is the problem\n\nand when i edit the load method: \nfrom this\n\n```\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath)\n```\n\nto this\n\n```\nTHREE.JSONLoader.prototype.load = function ( url, callback, texturePath, callbackProgress)\n```\n\na change the last line of function \nfrom this\n\n```\nthis.loadAjaxJSON( this, url, callback, texturePath );\n```\n\n to this\n\n```\nthis.loadAjaxJSON( this, url, callback, texturePath, callbackProgress);\n```\n\nthe its will be working fine\nthis is bug or I doing something wrong?? stackoverflow no helping\n"},{"labels":["enhancement"],"text":"Hi guys,\n\niOS8 is out and enable _WEBGL_compressed_texture_pvrtc_ extension. Since video memory is precious, especially on mobile, it could be nice to support PVR file as CompressedTexture input.\n\nI'd already made a 'quick and dirty' implementation in my fork, and i'm ok to work on a clean one. \nThe main question is about API. For now, ImageUtils has a method _loadCompressedTexture_ which load DDS files only. Here some possibilities:\n- add a mandatory _format_ argument [ \"dds\" | \"pvr\" ], to explicitly tell which parser to use.\n- same as above, but _format_ is optional or default to \"auto\", then guess format from file extension or file headers.\n- deprecate _loadCompressedTexture_, and add _loadDDS_ & _loadPVR_\n- ...\n\nthe current impl:\nhttps://github.com/plepers/three.js/blob/marl/src/extras/ImageUtils.js#L540\n\nI tested it with pvr compressed with texturetool (https://developer.apple.com/library/ios/documentation/3ddrawing/conceptual/opengles_programmingguide/TextureTool/TextureTool.html)\n\n++\nPierre\n"},{"labels":["enhancement"],"text":"Wanted to make a mirror modifier. \nThe syntax is simple:\n\n``` javascript\ngeometry = new THREE.BoxGeometry( 600, 600, 600, 16, 16, 16 ); \nvar Texture = new THREE.ImageUtils.loadTexture( 'textures/kote.jpg' );\nvar material = new THREE.MeshLambertMaterial( { map: Texture, side: THREE.DoubleSide } );\n\nvar Cube = new THREE.Mesh( geometry, material );\n\nvar modifier = new THREE.MirrorModifier();\nmodifier.set( \"XY\" ).modify( Cube.geometry );\nscene.add( Cube );\n```\n\nOptions:\n `halfPlane` - `XY, XZ, or XZ`\n\nExample: <a href = \"http://neftek.legko.ufanet.ru/MyWebGL/three.js/examples/webgl_modifier_mirror.html\"> here </a>. I will be glad remarks.\n"},{"labels":["enhancement",null],"text":"using r68. In case of lightmap, if two sets of uvs are defined in json, uvs = [ [primary uv set], [ secondary uv set]   ]. The engine either renders weird geometry or generates webgl errors.\n\nThe cause is found by faulty increase of face index.\n\n``` javascript\nfor ( i = 0; i < nUvLayers; i ++ ) {  //loop over uv sets\n     uvLayer = json.uvs[ i ];  //assign the json uv set data from json parser\n    geometry.faceVertexUvs[ i ][ fi ] = []; //make array for indices lookup\n        for ( j = 0; j < 3; j ++ ) { //loop over the 3 vertices (or 4 for quad case)\n            uvIndex = faces[ offset ++ ]; //get faces index.\n```\n\nin a one face case, the last line becomes on first iteration, offset =  0,1,2, on second iteration offset becomes 3,4,5, while the secondary set should still point at 0,1,2.\n\nfix:\nadd on top \"parseModel\" method:\n\n``` javascript\nvar collectedIndices = [0,0,0,0];\n```\n\nthe quad loop becomes:\n\n``` javascript\nif ( hasFaceVertexUv ) {\n\n                    for ( i = 0; i < nUvLayers; i ++ ) {\n\n                        uvLayer = json.uvs[ i ];\n\n                        geometry.faceVertexUvs[ i ][ fi ] = [];\n                        geometry.faceVertexUvs[ i ][ fi + 1 ] = []\n\n                        for ( j = 0; j < 4; j ++ ) {\n\n                            if(i == 0) collectedIndices[j] = offset++;\n\n                            uvIndex = faces[ collectedIndices[j] ];\n\n                            u = uvLayer[ uvIndex * 2 ];\n                            v = uvLayer[ uvIndex * 2 + 1 ];\n\n                            uv = new THREE.Vector2( u, v );\n\n                            if ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n                            if ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n                        }\n\n                    }\n\n                }\n```\n\nthe 3 vertices case becomes:\n\n``` javascript\nfor ( i = 0; i < nUvLayers; i ++ ) {\n\n                        uvLayer = json.uvs[ i ];\n\n                        geometry.faceVertexUvs[i][ fi ] = [];\n\n                        for ( j = 0; j < 3; j ++ ) {\n\n                            if(i == 0) collectedIndices[j] = offset++;\n\n                            uvIndex = faces[ collectedIndices[j] ];\n\n                            u = uvLayer[ uvIndex * 2 ];\n                            v = uvLayer[ uvIndex * 2 + 1 ];\n\n                            uv = new THREE.Vector2( u, v );\n                            geometry.faceVertexUvs[ i ][ fi ].push( uv );\n                        }\n\n                    }\n```\n\nNow the engine renders models using 2 sets of uv's with lightmap as expected. \n"},{"labels":["enhancement"],"text":"Hi.  I've been modifying WebGLRenderer to play nice with other code that uses the GPU.  Does anyone want it?  Is it better as a separate renderer, or should it be a different mode within WebGLRenderer?\n"},{"labels":["enhancement"],"text":"Mrdoob,I like your Three.js very much,but I got some problem recently.when I load a '.obj' and a '.mtl' by using OBJMTLLoader,I find that my browser looks like died.\nThen I read your source,I'm sure that the network is ok(because we us async ajax),but by the time of callbackinng OBJMTLLoader's load,it invok parse function,right?Ok,the problem is that my *.obj get 114175 lines,it's too much,so the browser take a long time to parse it,the resualt is:browser looks like died!\nI have thought out lots of ways,but no use.I even try to use nodejs,parse the data in servers,But the Engine don't support Float32Arry(sadly).\nso,what do you think about this problem?thanks for reply!\n"},{"labels":["enhancement"],"text":"In our game we have top look optimized geometry, so CullFaceFront shadows get  wrong\n![cullfacefront](https://cloud.githubusercontent.com/assets/1895766/4043397/97db2fc6-2d10-11e4-9acb-0c3abbe5a75a.png)\n\nWhen I set renderer.shadowMapCullFace = THREE.CullFaceBack shadow become looks fine, but most surfaces covered with strange shadow artifacts\n![cullfaceback](https://cloud.githubusercontent.com/assets/1895766/4043412/c38d3416-2d10-11e4-867f-f9e9fd9b875c.png)\n"},{"labels":["enhancement"],"text":"The ability to set vertexColors on the PointCloudMaterial is nice, and it would be great if size and opacity were handled the same.\n\nThe sizes and opacities could be stored in an array on the geometry like color is now, and the properties vertexOpacities and vertexSizes could be added to PointCloudMaterial or just Material.\n\nMy guess is this wouldn't be too hard, calculations are already being made for sizeAttenuation in the shader.\n\nThis request stems from me not wanting to write custom shaders and that PointCloudMaterial is pretty close to fully featured.\n\nThanks!\n"},{"labels":["enhancement"],"text":"This took me quite some time to figure out because the behavior is surprising in my eyes:\n\nIf I call projector.pickingRay(vector, camera) the function returns a Raycaster object (as expected), but it also modifies the input argument \"vector\" which I found quite strange.\nI think the proper solution for this issue would be not to modify the input vector (make a copy at the beginning of the algorithm and work with that). If (for whatever reason) this is not an appropriate solution, the behavior should at least be documented.\n\nI'd be willing to help with both changing the behavior and improving documentation.\n"},{"labels":["enhancement"],"text":"Hi,\n\nFYI we had to remove some feature from the core of three.js r61 to use it for [photosynth](http://photosynth.net/preview).\nI've also submitted 2 pull requests with some minor addition to three.js.\n\nThanks for sharing such a great library!\n# GPL code:\n- THREE.Ray.intersectBox()\n- http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n- http://www.scratchapixel.com/copyright/\n# Code without license:\n\n(contacting author and asking them to add proper license should be fine)\n\nTHREE.Geometry.computeVertexNormals(areaWeighted)\nhttp://www.iquilezles.org/www/articles/normals/normals.htm\n\nTHREE.ImageUtils.getNormalMap()\nhttp://www.paulbrunt.co.uk/lab/heightnormal/\n\nBTW examples and the font rendering part were not scanned for licensing issues (as not used for photosynth).\n\nThanks,\n--Henri\n"},{"labels":["enhancement"],"text":"reqest 1: I was looking for easy  layer conroll  , coudnt find any for easy uses , is this of intress to make for easyer use and cleaner system of three.js  .  eg . like under  \n\nreqest 2: allso is it possible to make modules of three.js for faster workflow , eg one script for light \"layer3\" and one for objects \"layer2\",one for ground \"layer1\", one for bg env.skybox \"layer0\"  it would be much more userfriendly this way , and for more to use your awsome script \n\nThanks \n\n![545](https://cloud.githubusercontent.com/assets/1896130/3943068/85852a0c-2586-11e4-8532-9aa2a93b6262.PNG)\n"},{"labels":[null,"enhancement"],"text":"Hello,\n\nI'm running into a display bug at large output sizes with the WebGLRenderer. Fiddle [here](http://jsfiddle.net/jhickner/862de4nj/).\n\nWhen setting the canvas size (with `renderer.setSize`) to a width or height above 4096, the output begins to distort and the camera appears to go off center. It happens with both Orthographic and Perspective cameras. You can get a feel for what's happening by just changing the width in the fiddle. Above 4096 the effect begins and becomes more and more pronounced as you go up from there.\n\nIt looks like everything renders correctly when using `CanvasRenderer`, so I think it's a problem in the WebGLRenderer. \n\nThanks!\n"},{"labels":["enhancement"],"text":"Hi there,\n\nI started using OBJLoader to load an OBJ file exported from 3DS Max.\nHowever, I got stuck as I tried to have multiple meshes within this Object3D. I analised the OBJ and the OBJLoader code, and I think there is a slight incompatibility.\n\nThe OBJ defines some vertices before a `g/o` declaration. As the Loader sees this new `g/o`, it resets its vertices and stores every vertex from then on.\n\nNow, this is a problem. What happens is something like this:\n\n```\n- OBJ FILE\n30 vertices\ng newMesh\n10 faces using previous 30 vertices\n\n15 vertices\ng otherMesh\n5 faces using previous 15 vertices\n\n\n- THREE.JS STRUCTURE\nGeometryNewMesh.faceCount = 30;\nGeometryNewMesh.vertexCount = 15;\n\nGeometryOtherMesh.faceCount = 5;\nGeometryOtherMesh.vertexCount = 0;\n```\n\nThe structures are trying to get incorrect vertex references, causing errors/exceptions/bad meshes.\n\nMaybe the parser should handle vertex declarations more reliably, because the OBJ (as far as my innocence goes) isn't wrong at all. Or does the OBJ format require any kind of ordering at all between `g/o` and `v`?\n\nIs this really a problem or am I missing something?\n\nWould it be acceptable to read the whole OBJ first, making an internal structure and then construct geometries based on that structure? \n"},{"labels":["enhancement"],"text":"See original question: http://stackoverflow.com/questions/25252499/javascript-three-js-compute-bounding-box-of-object3d-with-buffergeometry\n\nThe setFromObject method of Box3 calculates the bounding box of Object3Ds and all their descendants (as long as their descendants are Geometry objects), but cannot calculate the bounding box of Object3Ds with BufferGeometry objects. This is due to the fact that BufferGeometry objects do not contain a .vertices property, and the setFromObject method uses this property in its calculations.\n\nIt is not entirely obvious that setFromObject will not calculate the bounding box of Object3Ds with BufferGeometry objects, based solely on documentation. A short-term update might change the documentation to explicitly state this fact, while a long-term fix would be to calculate the bounding box of an Object3D regardless of its descendant geometry types.\n"},{"labels":["enhancement"],"text":"Euler.reorder: returns undefined, but is documented to return this.\nQuaternion.multiplyVector3: documentation is obsolete, it takes one argument (not two) and returns a vector (not a quaternion) and is also deprecated.\n\nSorry for lumping two bugs in one issue, but it seemed easier this way.\n"},{"labels":["enhancement"],"text":"Performance comparison demo: http://wwwtyro.github.io/tests/geometry-vs-buffer-geometry/\n\nI'll quote the explanation from the above link:\n\n\"Each triangle in the above cube is a unique geometry - either a THREE.Geometry or a THREE.BufferGeometry, depending on the checkbox at the top left. Upon profiling, I see an idle time of 50% for Geometry, and an idle time of 0% with BufferGeometry. When using BufferGeometry, most of the CPU is taken up by setupVertexAttributes (~50%).\"\n\nI've been poking around at the code to see if I could come up with a solution, but no luck yet. Do we know if this overhead is necessary? Thanks. :)\n"},{"labels":["enhancement"],"text":"I'm not sure whether this is already a planned feature or maybe even a finished one, so I'll try to explain the task first.\n\nI need to do selective lighting for different rooms. For example, I have two rooms. One light must only affect objects and inner walls of one room. The second room must not be affected by this light.\n\nCurrently, if I add a light to the scene, it affects all objects in its distance. And I get strange effect when light comes \"through the wall\" of the second room:\n\n![Example](http://i62.tinypic.com/uyij5.jpg)\n\nSo I think I need some kind of groups or channels for lighting, so that I could set the objects that are affected by one light source and objects that are affected by another.\n\nI haven't found anything like that in either lights or objects, so I thought that maybe it could be a good feature to have.\n\nAnd, btw, if it is not implemented yet, what is the recommended approach to solve such tasks using current state of three.js?\n"},{"labels":["enhancement"],"text":"This webgl extension very need for my path tracer, deferred lighting, etc. \n"},{"labels":["enhancement"],"text":"While export a model using `ObjectExporter` i can see only the material ambient,color,emissive,type and so on, there is no details about the material textures, how can i get it, or still this is not in  `ObjectExporter`,if not am requesting for this future, \n"},{"labels":["enhancement"],"text":"The documentation of Material.overdraw says it is a boolean, but it appears to be a number (as of commit 880922).\n\nIt's certainly not much of a problem due to coercions, but I think it would be better to update the API docs.\n\nEdit: It does not actually say it's a boolean, but it's strongly implied by the wording \"enable/disable\" followed the note that its default value is false (but the default is actually 0).\n"},{"labels":["enhancement"],"text":"As mentioned from StackOverflow: http://stackoverflow.com/questions/25126352/deallocating-buffergeometry\n\nThe good news is, it's not a bug. The bad news is it's a change in the system that might catch a lot of people off-guard.\n\nIt looks like the old (< r68) way of handling object deallocation is _webglObjects is refreshed with each call to render. When you remove Mesh from the scene and nullify it, the _webglObjects refreshes--sans the Mesh--on the next render. After that, GC can safely remove the Mesh form the heap.\n\nIn r69dev, there is no magical refresh of _webglObjects. Removing and nullifying a Mesh leaves a reference to the Mesh in _webglObjects. GC then isn't be able to remove the Mesh (or even the geometry/material) from the heap, resulting in my \"leak.\"\n\nThe thing I missed between r68 and r69dev is that when you remove a mesh in r69dev, you need to explicitly call **dispose** on it before nullifying it. Calling dispose triggers removeObject for the Mesh, which updates _webglObjects array. No more references lets GC happily collect the Mesh and associated data.\n\nI'm mentioning it as a concern because bringing r68 code into r69dev was mostly seamless, and this issue wouldn't have been on my radar if I weren't dealing with large amounts of geometry. Also, it's slightly odd not _needing_ to call dispose on Object3D objects that are part of the scene, though I did see the method now exists.\n"},{"labels":["enhancement"],"text":"I've been toying with this API recently.\n\n``` javascript\nvar mesh = new THREE.Mesh( geometry, material );\n\nvar instances = new THREE.Instances( mesh );\ninstances.objects.push(\n    new THREE.Object3D().setPosition( 1, 1, 1 ).setRotation( 0, 1, 0 ),\n    new THREE.Object3D().setPosition( 2, 2, 2 ),\n    new THREE.Object3D().setPosition( 3, 3, 3 ).setScale( 2, 1, 1 )\n);\nscene.add( instances );\n```\n\nBased on [ANGLE_instanced_arrays](http://blog.tojicode.com/2013/07/webgl-instancing-with.html). ([~50%](http://webglstats.com/))\n\nThoughts?\n"},{"labels":["enhancement"],"text":"This makes obtaining the normal for the picked point on the geometry difficult.\n\nAn extra field called \"indices\" is added though.\n\nThis makes working with BufferGeometry very difficult for the purposes of picking. Its also a bit of a surprise since STLLoader returns a BufferGeometry if a binary STL is loaded, but plain Geometry if ASCII stl is loaded. So obtaining the pick normal works in one case, and fails in another. \n\nIs there a workaround for this issue?\n\nver r67\n"},{"labels":["enhancement"],"text":"Tested with\nglTF v0.8\nthree.js r68\n\nLast glTF release that works with three.js master\nglTF v0.6\n1. The parser check for description.path but the new converter creates a json file with \"uri\" field instead of \"path\".\n   https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/gltf/glTF-parser.js#L113\n2. The main model file has .gltf extension instead of .json\n   https://github.com/mrdoob/three.js/blob/dev/examples/models/gltf/duck/duck.json\n3. After fixing the previous issue I'm getting an error I don't know how to fix:\n\n```\nError: invalid arguments\nreturn new Uint16Array(resource, 0, ctx.indices.count);\n```\n\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/loaders/gltf/glTFLoader.js#L143\n\nThanks\n"},{"labels":["enhancement"],"text":"Let's say I want to render something (\"specialObject\") below everything else, at all time, but with it still being affected by light, so I do the following\n\n```\n// init\nrenderer.autoClear = false;\nspecialObject.material.depthWrite = false;\nearlyScene.add(specialObject);\nearlyScene.add(camera); // important that in early- and not mainScene or it lags a frame behind\nearlyScene.add(light);\nmainScene.add(rest);\nmainScene.add(light);\n\n// render\nrenderer.clear();\nrenderer.render(earlyScene, camera);\nrenderer.render(mainScene, camera);\n```\n\nBut this doesn't work because I was reusing the same light objects, I actually have to do:\n\n```\nmainScene.add(light.clone());\n```\n\nbecause apparently I can't reuse the light objects for renderings with no clear()s in-between which at the very least seems unexpected (at least to me).\n"},{"labels":["enhancement"],"text":"This is a request to add a model viewer example.\nI think it's a very common need to display a model, pan, rotate and zoom.\n\nFeatures:\n- Load models of different formats with plugable loaders. It can help unify the loaders API if needed.\n- Auto zoom the model to a reasonable initial value. Allow zoom in/out.\n- Use TrackballControls to rotate the model.\n- Allow pan.\n\nThis example can be used as a base for many other examples.\nFor example, for showing different loaders and controls.\n\nThigiview is very nice but it uses an old version of three.js\nn0r.org/thingiview.js/examples/client_side_ajax.html\nhttps://github.com/tbuser/thingiview.js\n\nThanks\n"},{"labels":["enhancement",null],"text":"am loading a model with the OBJMTLLoder. and am using .tga materials, the model is loaded as black.\n\nthree.js doesn't support .tga materials, what are the materials is supported by the three.js., can anyone tell me??  \n"},{"labels":["enhancement"],"text":"Before, I contributed it, I thought I would ask if a feature like [this](http://codepen.io/RoryDuncan/pen/Jvfpw/?editors=001) is within the scope of three.js. Note: The example won't work if the browser you're using lacks the mp3 codec, I was keeping the example as straight-forward as possible, so I didn't bother with audio alternatives.\n\nIt is an extension of Object3D to have sphere's of sound. It's an extra feature, so I wasn't sure how bare bones three.js is intended to be. I left the object fairly ambiguous, to stay unopinionated about how someone would handle and load their audio.\n"},{"labels":["enhancement"],"text":"I would like to be able to render points using the SVGRenderer as SVG circles.\n\nI don't mind modifying SVGRenderer myself, but given that I am new to three.js I wanted to ask for some pointers first:\n- Is working with PointClouds even the right thing if I want to get SVG circles? AFAICT PointClouds are essentially particle systems which in WebGL-land are typically a texture-mapped object. I, on the other hand, do not want any texture mapping, but but simple vector primitives like circles.\n- What is the right place to start? After a first look at the code, I expect I would need to add a case to the render function of SVGRenderer that handles RenderableVertex's. Is that correct?\n"},{"labels":["enhancement"],"text":"As a browserify/three.js user I was happy to see in the release notes that [r68 includes browserify support](https://github.com/mrdoob/three.js/releases/tag/r68).\n\nIt would be great to update the [npm package](https://www.npmjs.org/package/three) so browserify users can stop having to use a shim.  I see lack of updates has been an issue in the past (#4949). It looks like building the [npm package is well documented](https://github.com/mrdoob/three.js/blob/master/utils/npm/README.md) - is there any reason why the publication on npm is so delayed? I would be happy to look into building the new version myself but I would lack the authentication to publish it.\n"},{"labels":["enhancement"],"text":"Hey guys can you add this code below to JSONLoader.js for next release?\n\nThank You!\n\n``` html\nTHREE.JSONLoader.prototype.loadJson = function(data, callback, texturePath) {\n    var worker, scope = this;\n    texturePath = texturePath ? texturePath : this.extractUrlBase(url);\n    this.onLoadStart();\n    var json = JSON.parse(data);\n    var result = this.parse(json, texturePath);\n    callback(result.geometry, result.materials);\n    this.onLoadComplete();\n};\n```\n\nIt is very helpful when loading json from zip compressions.\n\nBelow is my sample usage code.\n\n``` html\nvar loader = new THREE.JSONLoader();\nvar zip = new JSZip();\nvar filename = url.split('/').pop().slice(0, -4);\nvar callback = function(geometry, materials) {\n        var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial(materials));\n        mesh.castShadow = true;\n        mesh.receiveShadow = true;\n        mesh.overdraw = true;\n        mesh.geometry.computeFaceNormals();\n        mesh.geometry.computeVertexNormals(); // requires correct face normals\n        mesh.geometry.computeBoundingBox(); // otherwise geometry.boundingBox will be undefined\n        object.add(mesh);\n};\n\njBinary.load(\"./objects/model1.zip\", function(err, binary) {\n    zip.load(binary.read('string'));\n    var data = zip.file(filename + \".js\").asText();\n    loader.loadJson(data, callback, \"./objects/\" + url.substring(0, url.lastIndexOf(\"/\") + 1) + \"Textures/\");\n});\n```\n"},{"labels":["enhancement"],"text":"BufferGeometry.fromGeometry() has no uvs.\nThis is because of a type error. \n\"uvs\" should be \"uv\".\n\nIs:\n\n``` javascript\nif ( hasFaceVertexUv === true ) {\n\n    var uvs = new Float32Array( faces.length * 3 * 2 );\n    this.addAttribute( 'uvs', new THREE.BufferAttribute( uvs, 2 ) );\n\n}\n```\n\nShould be:\n\n``` javascript\nif ( hasFaceVertexUv === true ) {\n\n    var uvs = new Float32Array( faces.length * 3 * 2 );\n    this.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n}\n```\n"},{"labels":["enhancement"],"text":"Hey there,\n\nI started messing with this feature last night, I wanted to see if there was already something along these lines before I go further, or see if this was the best way to go about it.  Here is a real rough demo: http://charliehoey.com/threejs-demos/projector-demo.html\n\nI want to have an image/video that is projected onto a mesh dynamically.  To do it, I'm using a Projector to convert vertex coordinates to screen coordinates (ie: what part of the texture is hitting that vertex), then converting that to UV coordinates for the texture, and then applying those UV coordinates to the geometry each frame.  It seems to _kind of_ work, except that the angles seem off on one of the floor triangles, not sure what's going on there yet.  \n\nAny thoughts?  Think this is the right way to go about this sort of thing?  If I could get shadows/directional occlusion working someday too, that'd be pretty cool.  Someday maybe :)\n"},{"labels":["enhancement"],"text":"Thanks so much for adding PointCloud support for RayCasting in r.61!  Unless I am missing something, the current implementation assumes that the points are all of the same size.  Is it possible to make the raycaster aware of the gl_PointSize of each point, rather than uniformly using params.PointCloud.threshold?\n\nThanks,\nMike Cantor\n"},{"labels":["enhancement"],"text":"Recently I wanted to import a few models back to Blender. I'm having a most recent Blender 2.71 and most recent Three.JS (downloaded yesterday). But there was no luck, Blender shows the same error no matter what file I'm loading. \n\nAlso I tried to export a default Cube to Three.JS and then import it back from Three.JS to Blender. The error is the same (it cannot be easily copied).\n"},{"labels":["enhancement"],"text":"As far as I'm aware, we should be able to get the same results by just adding a `distance` property to those light types. By removing the target we'll then fix the problems that those lights have in the editor.\n\n@gero3 any interest on tackling this one?\n"},{"labels":["enhancement"],"text":"I am implementing the texture mapping function in the `SoftwareRenderer.js`, I am confused how to transform the texture coordinate of faces to the screen. I have tried your subpixel interpolation approach. The result is like this link:\n\nhttps://dl.dropboxusercontent.com/u/75721204/softwareRender/software_geometry_earth.html\n\nIt seems to have some problems on the floating-precision.\n"},{"labels":["enhancement"],"text":"am using OBJMTLLoder to load the models am having the models with the textures inside the directory so my mtl file is as below \n\nnewmtl 15___Default\n    Ns 33.0000\n    Ni 1.5000\n    d 1.0000\n    Tr 0.0000\n    Tf 1.0000 1.0000 1.0000 \n    illum 2\n    Ka 1.0000 1.0000 1.0000\n    Kd 1.0000 1.0000 1.0000\n    Ks 0.1710 0.1710 0.1710\n    Ke 0.0000 0.0000 0.0000\n    map_Ka maps\\ed897c40.bmp\n    map_Kd maps\\ed897c40.bmp\n\nhere the maps is the directory and it have the `ed897c40.bmp` textures, after  load the model with the `OBJMTLLoder` it is working fine in the chrome, in the Firefox am getting  \n\n`\"NetworkError: 404 Not Found - http://localhost/3d-viewer/documents/mrdoob-three.js-d3cb4e7/examples/files/seaknight/maps%5C5b834470.bmp\"`\n\nis it is a bug or how i deal with this ??\n"},{"labels":["enhancement"],"text":"Having trouble rendering a working 2D SVG Map in Three.js. There doesn't seem to be much support out there at the moment for this functionality. \n\nI have a shape file for U.S States, need to render the Map in 3D and display some Geo-Spatial Data. \n\nCame across few examples, but most of them seem to not work. If anyone know's of any concrete example or have worked on one and would like to give me directions, that would be greatly appreciated. \n\nThanks. \n"},{"labels":["enhancement"],"text":"To stay consistent with WebGLRenderer, CanvasRenderer can use the same method: https://github.com/mrdoob/three.js/blob/dev/src/renderers/WebGLRenderer.js#L357\n"},{"labels":["enhancement"],"text":"Hi. I've tried to ask at stack overflow how to do this myself, but got no response at all.\nhttp://stackoverflow.com/questions/24282035/is-it-possible-to-play-skin-animation-in-reverse-three-js\n\nWould i be possible to make animation playable forward and backwards? To be able to reverse it would be useful for things like making a character switch from walking forward to backward, smooth transition from door opening to closing etc. I could use two animations but that means more animation data and juggling between the two with stop/play frames etc.\n\nOverall I think this would be a useful feature for every animation to have.\n"},{"labels":["enhancement"],"text":"Hello,\n\nI am integrating a personal rendering using WebGL with ThreeJS. The two pipelines are colliding right now and found out that I need ThreeJS to re-enable vertex attrib arrays for positions, normals, texture coordinates, etc. in every frame. I have added a simple modification to ThreeJS inside the renderBuffer function inside the WebGLRenderer:\n\n```\n...\n        // vertices\n        if ( !material.morphTargets && attributes.position >= 0 ) {\n            if ( updateBuffers ) {\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, geometryGroup.__webglVertexBuffer );\n                enableAttribute( attributes.position );\n\n                // MY CODE BEGIN\n                _gl.enableVertexAttribArray(attributes.position);\n                // MY CODE END\n\n                _gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n            }\n        } else {\n...\n```\n\nAnd of course, the same applies for colors, normals, texture coords, etc.\n\nI know, it is a crappy thing to do but I do not have control over the other rendering pipeline.\n\nMy question is: \n\na) How can I instrument ThreeJS to force the attributes to be re-enabled in every frame with the least performance penalty possible?\n\nb) Is there a way in webgl/threejs to know these attributes and re-enable them manually from outside the engines code (in the application inside the render loop before calling to render)?\n\nThank you very much!\n"},{"labels":["enhancement"],"text":"Its animation api was not touched since 2012 and it's bad. Just some problems I have immediately runned into:\n1 playAnimation() takes fps, not time. so my code must either depend on the number of frames in the animation (which may be subject to change), or use MorphAnimMesh internal vars to calculate it.\n2 there is no way to play animation once and/or know when it has ended (because it does not end). to work around this, I can extend MorphAnimMesh and override updateAnimation(), but if I go that far I can as well just build my own api (my current choice).\n3 there is no way to stop it from interpolating between last and first animation frame (unless, again, you manually track the time before/after updateAnimation() and do the jump at the right moment - and I did not even attempt this)\n\nI have not checked how does three.js handle rigged models yet, I can only hope that that animation api is better and can find its way into MorphAnimMesh. Or else, you really need to come up with something good in both cases.\n"},{"labels":["enhancement"],"text":"I find the binary model format doesn't define the vertex color data in the bin file. In my opinion, I think vertex color is often be used in the modeling pipeline. Do you plan to support it in the model format version 3.1? If we want to support it, we must fix the converters and BinaryLoader, and the binary format field would be modified, the binary models must be reconverted.\n"},{"labels":["enhancement"],"text":"ExtrudeGeometry seems to have a bug in UV mapping. Previous issue was nto clearly states, thanks to @mrdoob and @WestLangley this is more to the point.\n\nWhen you extrude a shape, it's \"face\" gets mapped well, but some of the sides get erroneous stretched UVs.\n\nhttp://codepen.io/travnik/pen/oAauG?editors=001\n![2014-06-26 17_55_14-codepen - a pen by alex goldring](https://cloud.githubusercontent.com/assets/5939063/3401648/e0afdb22-fd52-11e3-874c-4c16acc88d21.png)\n\nthree.js : r67\nbrowser: Crome Version 35.0.1916.153 m\nOS: win 8.1 x64\ngraphics: nVidia GTX 660 Ti\n"},{"labels":["enhancement",null],"text":"I'm trying to load a scene a material texture using THREE.ObjectLoader() and I can't get it to work. It seems like specifying a map doesn't make any difference and it always comes out as null. Is it supported?\nThis is the basic form for my datafile\n\n``` json\n{\n   \"geometries\":[\n      {\n         \"data\":{\n            \"faces\":[...],\n            \"normals\":[...],\n            \"uvs\":[...],\n            \"vertices\":[...]\n         },\n         \"type\":\"Geometry\",\n         \"uuid\":\"33628ef2-5a1f-4f4c-8cd2-c717c512137c\"\n      }\n   ],\n   \"images\":[\n      {\n         \"url\":\"myimage.png\",\n         \"uuid\":\"13721d96-17ae-485b-bfdf-f27fcd280e97\"\n      }\n   ],\n   \"materials\":[\n      {\n         \"ambient\":16755455,\n         \"color\":16777215,\n         \"emissive\":0,\n         \"map\":\"9aee2d5f-b760-4449-adbb-0baad2d78b9a\",\n         \"name\":\"DummyMaterial\",\n         \"opacity\":1,\n         \"shininess\":1,\n         \"specular\":0,\n         \"transparent\":false,\n         \"type\":\"MeshPhongMaterial\",\n         \"uuid\":\"43806f03-5941-4765-b058-2562c7a2ca2a\",\n         \"wireframe\":false\n      }\n   ],\n   \"metadata\":{\n      \"generator\":\"MyGenerator\",\n      \"type\":\"Object\",\n      \"version\":4.3\n   },\n   \"object\":{\n      \"children\":[\n         {\n            \"children\":null,\n            \"matrix\":[...],\n            \"type\":\"Mesh\",\n            \"uuid\":\"9cf4c9b4-a3bf-40ee-8a4b-b5be861dca84\",\n            \"geometry\":\"33628ef2-5a1f-4f4c-8cd2-c717c512137c\",\n            \"material\":\"43806f03-5941-4765-b058-2562c7a2ca2a\",\n            \"name\":\"StaticMeshActor_0\"\n         }\n      ],\n      \"matrix\":[...],\n      \"type\":\"Scene\",\n      \"uuid\":\"d2e735e9-5487-4d8b-86d3-3863561b3f80\"\n   },\n   \"textures\":[\n      {\n         \"image\":\"13721d96-17ae-485b-bfdf-f27fcd280e97\",\n         \"uuid\":\"9aee2d5f-b760-4449-adbb-0baad2d78b9a\"\n      }\n   ]\n}\n```\n"},{"labels":["enhancement"],"text":"Hi all,\n\nI've been playing around with the SimulationRenderer that @zz85 made, and I noticed in the `webgl_gpgpu_birds.html` example file, there was a note that asked for generic implementations of the SimulationRenderer. I've made one, that seems to be working well.\n\nMy version is [here](https://github.com/squarefeet/THREE.SimulationRenderer), with the actual SimulationRenderer.js file being [here](https://github.com/squarefeet/THREE.SimulationRenderer/blob/master/res/js/THREE.SimulationRenderer.js)\n\nI'm still playing with the API a little, since I'm not too keen on the way the `addRenderable` method is both named (terrible name!) and used, but I think the general idea is pretty sound (IMHO).\n\nIf there's a good consensus on this, I'll go through the usual fork/pull req steps :)\n\nThanks!\n"},{"labels":["enhancement"],"text":"The SSAO shader that we have is a lot better than having nothing at all, but it is a little on the slow side and it is not the most pleasing in terms of the result. Are there any plans to improve on it? say to get Scalable Ambient Obscurance like the one implemented here:\nhttp://floored.com/luma_demo_ao.html\naccording to the paper on it (https://research.nvidia.com/sites/default/files/publications/McGuire12SAO.pdf) it's a fair bit faster than SSAO. Playing around with setting in demo you can quite clearly see that SAO gives much better quality at much lower cost, it also has parameters to adjust the quality for that performance/quality sweetspot.\n\nhere is the link to original article by floored on this:\nhttp://floored.com/blog/2013/ssao-screen-space-ambient-occlusion.html\n\noriginal paper also came with glsl 1.2 implementation for their algorithm, you can download it at:\nhttps://research.nvidia.com/publication/scalable-ambient-obscurance\n"},{"labels":["enhancement"],"text":"npm was last updated 3 months ago and [has v0.66.2](https://www.npmjs.org/package/three). Could you please publish v0.67?\n\nThank you!\n\n// cc @bhouston \n"},{"labels":["enhancement"],"text":"Hi:\n\nI'm just working on an experimental renderer for Three.js called [TinyGLRenderer](https://github.com/humu2009/TinyGLRenderer). The new renderer is based on another project [TinyGL.js](https://github.com/humu2009/tinygl.js), which implements a subset of OpenGL 1.1 compatible API in JavaScript using software rasterization. The interface follows the Three.js's renderer protocol and can be put to work just as Three'js' built-in renderers or other 3rd party ones.\n\nCurrently, it supports Mesh, Line, Material, Textures, Lights et Morph animations. I'll work on to add as many as possible. There are already a dozen of Three.js examples ported (by just replacing the renderer instance) to TinyGLRenderer and they seem to work fine, some of which can be found [here](https://github.com/humu2009/TinyGLRenderer/wiki/Examples)!\n\nBesides, I have a small question about Three.js: is there any way to determine or guess a Mesh is static?  For I want to optimize the draw call by compiling meshes which stay unchanged to OpenGL display lists. It avoids submitting each face et each vertex every time thus improves the performance drastically.\n"},{"labels":["enhancement"],"text":"At the moment the error is:  \"Uncaught TypeError: Cannot read property 'normal' of undefined\" which is not very helpful.\n"},{"labels":["enhancement"],"text":"Three.js at present includes a Shape/Text triangulation which was easy to implement but also needed several add-ons, eg. to decide between contours and holes and to remove those holes, and it had quite some issues concerning:\n- holes in polygons ( #3386: Holes in contours causes triangulation failure (partial solution: #4337); #2919: Triangulation fails for simple shape )\n- the sequence of contour and hole polygons ( #4357: toShapes: independence of shape and hole specification order, ref. #3386 )\n- the winding order of contour and hole polygons ( #4626: toShapes: Bugfix; new optional parameter: noHoles; #4590: Text Triangulation Issues )\n- and finally performance issues: ( #4594, first solution step #4623 )\n\nIt seems to work correctly by now but is quite slow if there are many vertices or holes.\n\nInstead of trying to improve the present code further, I created a new project [PnlTri.js](https://github.com/jahting/pnltri.js): **Polygon Near-Linear Triangulation in JavaScript**\n- implementation of Raimund Seidel's randomised polygon trapezoidation and triangulation,\n- does not rely on polygon winding order and holes following on their contour,\n- reasonably **fast**: A square with 25000 square holes (~100k vertices -> ~150k triangles) takes less than 3 seconds on my old Laptop (Core 2 Duo T7200, 2 GHz) with Firefox 30.0,\n- quite **small**: adds about 10k to three.min.js or about 2k to the gziped file, and it should be possible to further simplify some functions surrounding triangulation in Three.js,\n- tested with all _difficult_ data available to me in the Three.js examples and issues,\n- rather robust: in the presence of incompatible input it should produce \"wrong\" output but not crash.\n\nI also created a branch for [Three.js with PnlTri](https://github.com/jahting/three.js/tree/withPnltri), replacing the present mechanism.\nSo interested users of Three.js can test their data against it. More test data would be welcome.\n\nThe main **drawback** might be that this algorithm often produces rather long, slim triangles. I'm thinking about a post-processing step to improve on this in the future.\nThere is still some room to refactor PnlTri and reduce the code surrounding triangulation in Three.js.\nThe next major step for PnlTri will be to allow polygons with intersections which would also increase robustness further.\n\n@mrdoob: Is it small enough for integration into Three.js, or should it be left for people to combine them on their own ?\n"},{"labels":["enhancement"],"text":"Offered spherical deformation for noobs. The syntax is simple:\n\n``` javascript\nObject.Dent( origin, direction, radius, depth ) ;\n```\n\n`origin`\\- point where the applied strain\n`direction` - deformation direction ( usually the opposite of normal )\n`radius` - deformation radius \n`depth` - deformation depth, 0<depth<1\n\nMaybe there is a better name than Dent. erichlofs used a THREE.Ray.intersectSphere. \n\nSo, for example, will look like deformation of objects with the mouse:\n\n``` javascript\nif ( intersects.length > 0 ) \n    {\n        var face = intersects[ 0 ].face;\n        var direction = new THREE.Vector3(); direction.copy( face.normal );\n               // direction.multiplyScalar( -1 ); \n        var obj = intersects[ 0 ].object; \n        obj.Dent( intersects[ 0 ].point, direction, 80, 0.5 ) ;\n    }\n```\n\nExample: <a href = \"http://neftek.legko.ufanet.ru/MyWebGL/three.js/examples/DentModifier.html\"> here </a>\n\nCode:\n\n``` javascript\nTHREE.Mesh.prototype.Dent = function ( origin, direction, radius, depth ) \n    {\n        var M = new THREE.Matrix4().getInverse( this.matrixWorld );\n        var origin = origin.applyMatrix4( M ) ;\n\n        var normal = new THREE.Vector3(); normal.copy( direction );\n        normal.multiplyScalar( -radius*( 1-depth ) ); \n\n        var centerSphere = new THREE.Vector3(); centerSphere.addVectors( origin, normal );  \n        var Sphere = new THREE.Sphere( centerSphere, radius );\n\n    for (var i=0; i< this.geometry.vertices.length; i++)\n        {       \n            if ( centerSphere.distanceTo( this.geometry.vertices[i] ) < radius )\n                {\n                    var Ray = new THREE.Ray( this.geometry.vertices[i], direction );\n                    var punct = Ray.intersectSphere( Sphere );          \n                    this.geometry.vertices[i] = punct;\n                }           \n        }\n\n    this.geometry.computeFaceNormals();\n    this.geometry.computeVertexNormals();\n    this.geometry.verticesNeedUpdate = true;\n    this.geometry.normalsNeedUpdate = true; \n    }\n```\n"},{"labels":["enhancement"],"text":"We have had a lot of users complain that ThreeJS exports from http://Clara.io are incorrect or do not capture what they have designed in our editor.  We've investigated these complains and it isn't because of bugs in either ThreeJS or Clara.io, rather the ThreeJS format does not save/load all parameters that are actually possible with ThreeJS's in-memory scene graph.\n\nWe would like to contribute a patch to add additional optional parameters to the ThreeJS format so that there is better fidelity between what is designed in http://Clara.io (and the ThreeJS Editor as well) and what is seen when loading ThreeJS scenes exported from these tools.  This would be related to the Camera and Light parameters primarily.\n"},{"labels":["enhancement"],"text":"Right now there is a parameter in the shaders that lets you render backfaces.  It does so by setting CCW and it inverts the normals:\n\nFlipSided changes CCW:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L5285\n\nFlipSided also changes normal:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/WebGLProgram.js#L140\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderChunk.js#L1355\n\nBut sometimes one has a negative scale in the transform matrix -- in DCC programs like 3DS Max, Maya, Softimage, etc, it means flip the object.  The way to do this is to have CCW set (as opposed to CW) but keep the normals the way they are (because they are already flipped by the matrix transform.)  To achieve this efficiently with ThreeJS it is necessary to be able to set CCW/CW independently of flipping the normals.\n\nRight now there is no flag that allows for CCW but without inverting the normals.  Can we add some option that enables this?\n\nEven if we had another option called FLIP_NORMAL/flipNormals that would just invert normals from whatever they are set via flipSided/FLIP_SIDED.  In our case we could set both flipSided and flipNormals to achieve our desired result.  This would be backwards compatible.\n\nWe can make the PR if this is acceptable.\n"},{"labels":["enhancement"],"text":"I'm just curious but have you considered making CSS based sizing the default? If you did less code would have to change for various use cases\n\nFor example many samples do stuff like this\n\n```\ncamera = new THREE.PerspectiveCamera( \n    50, window.innerWidth / window.innerHeight, 1, 1000 );\n```\n\nAnd or they set \n\n```\nrenderer.setSize( window.innerWidth, window.innerHeight );\n```\n\nBut if instead you based the size of the canvas off its `clientWidth` and `clientHeight` then it would just always work. The user can make container and set it's CSS to any size. For example\n\n```\n<style>\nhtml, body {\n   width: 100%;\n   height: 100%;\n   margin: 0px;\n   padding: 0px;\n   overflow: hidden;  // make sure no scrollbar\n}\n#c {\n   width: 100%;\n   height: 100%;\n}\n</style>\n<body>\n  <canvas id=\"c\"></canvas>\n</body>\n```\n\nAnd it just works. If they change the canvas to be some specific size like\n\n```\n#c {\n  width: 400px;\n  height: 300px;\n}\n```\n\nThen it still just works.\n\nIf they put the canvas inside some other containers  (say they are making an editor and there's a side tab) it all just works.  Whereas the way three is now you always have to go muck with the code for a different use cases.\n\nYou'd have to stop mucking with `style.width` and `style.height` inside three but as it is it seems like three is fighting the web platform instead of embracing it.\n\nThoughts?\n\nTo be clear see these samples. They all use exactly the same JavaScript (in fact they're all pointing to the same JavaScript file).  Because they use CSS and `clientWidth`, `clientHeight` nothing needs to change\n\nFull size window with user created canvas\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-01.html\n\n80% size with user created canvas (size the window)\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-02.html\n\nInline for article with user created canvas\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-03.html\n\nFull size window using container div where three.js makes the canvas\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-by-container-01.html\n\n80% size with using container div where three.js makes the canvas (size the window)\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-by-container-02.html\n\nInline for article using container span where three.js makes the canvas\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-by-container-03.html\n\nNo container div, uses the body, three.js creates the canvas\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-body-only.html\n\nThis one is same as inline but uses `box-sizing: box-border;` which mean even though the container is set to 400px/300px the border is subtracted from the inside so the canvas needs to be 390/290 and again it just works because that's what `clientWidth` and `clientHeight` are.\nhttp://greggman.com/downloads/examples/three-by-css/three-by-css-by-container-04.html\n"},{"labels":["enhancement",null],"text":"Hi,\n\nCurrently loaders and controls don't have the same API which makes it harder to interchange between different types and experiment.\n\nSome of the loaders for example are missing progress events and callbacks for model and textures loading.\nhttps://github.com/KhronosGroup/glTF/issues/226\n\nIf all controls will extend the same base class, it'll be easier for example to add support for pointer events (IE11).\nI'm also missing documentation about differences between the controls and a demo comparing them side by side.\n\nCan we start discussing the API here or do you prefer a separate issue for loaders and controls?\n\nThanks\n"},{"labels":["enhancement"],"text":"Three.js is cool, but many things in WebGL and even in CSS3D loses definition with zooming. Think about the fonts on the Periodic Table demo: they all get aliased.\nThe solution to this is to get a full vector rendering pipeline. Browsers already supports this, and it's hardware accelerated too: SVG. \nPlease add an SVG renderer to three.js.\n"},{"labels":["enhancement",null],"text":"Example:\nhttp://www.rcsb.org/pdb/explore/jmol.do?structureId=1BLU&bionumber=1\n\n![1blu](https://cloud.githubusercontent.com/assets/75841/3125631/d45f535a-e78d-11e3-8622-3e4bf92dea2a.png)\n\nThanks\n"},{"labels":["enhancement"],"text":"jsmol is an open source pdb viewer\nhttp://sourceforge.net/projects/jsmol/\nDemo:\nhttp://www2.chemistry.msu.edu/faculty/reusch/virttxtjml/htmlJ/jsmol/jsmol.htm\n- When clicking on the \"labels on\" in the demo, you can see the atoms labels.\n  Is it possible to add this to three.js?\n- jmol supports proteins in addition to molecules.\n  For example, click on the \"load =1d66 (from RCSB)\"  link in the demo.\n\nThanks\nIs it possible to do it with three.js? \n"},{"labels":["enhancement"],"text":"I would like to be able to use a single material for multiple meshes and set uniforms on a per mesh basis during the render pass. I'm aware that the current recommended approach is to clone materials, however this is causing issues and unnecessary complexity in my use case of custom deferred rendering. In general, I think the existing abstraction of 1 material = 1 set of uniforms is too restrictive. \n\nAre there any plans to add this functionality? I'm willing to work on a patch but could use some help navigating the rendering code. \n"},{"labels":["enhancement"],"text":"ColladaLoader does not work with LoadingManager.\n"},{"labels":["enhancement"],"text":"For supporting equivalent `THREE.GeometryUtils.randomPointsInGeometry` for `BufferGeometry`.\n\nNot sure whether this should go into `THREE.GeometryUtils` or `THREE.BufferGeometryUtils`, @mrdoob ?\n\n``` js\nvar randomPointsInBufferGeometry = function ( geometry, n ) {\n\n\n    var i,\n        vertices = geometry.attributes.position.array,\n        totalArea = 0,\n        cumulativeAreas = [],\n        vA, vB, vC;\n\n    // precompute face areas\n    vA = new THREE.Vector3();\n    vB = new THREE.Vector3();\n    vC = new THREE.Vector3();\n\n    // geometry._areas = [];\n    var il = vertices.length / 9;\n\n    for ( i = 0; i < il; i ++ ) {\n\n        vA.set( vertices[i * 9 + 0], vertices[i * 9 + 1], vertices[i * 9 + 2] );\n        vB.set( vertices[i * 9 + 3], vertices[i * 9 + 4], vertices[i * 9 + 5] );\n        vC.set( vertices[i * 9 + 6], vertices[i * 9 + 7], vertices[i * 9 + 8] );\n\n        area = THREE.GeometryUtils.triangleArea( vA, vB, vC );\n        totalArea += area;\n\n        cumulativeAreas.push(totalArea);\n    }\n\n    // binary search cumulative areas array\n\n    function binarySearchIndices( value ) {\n\n        function binarySearch( start, end ) {\n\n            // return closest larger index\n            // if exact number is not found\n\n            if ( end < start )\n                return start;\n\n            var mid = start + Math.floor( ( end - start ) / 2 );\n\n            if ( cumulativeAreas[ mid ] > value ) {\n\n                return binarySearch( start, mid - 1 );\n\n            } else if ( cumulativeAreas[ mid ] < value ) {\n\n                return binarySearch( mid + 1, end );\n\n            } else {\n\n                return mid;\n\n            }\n\n        }\n\n        var result = binarySearch( 0, cumulativeAreas.length - 1 )\n        return result;\n\n    }\n\n    // pick random face weighted by face area\n\n    var r, index,\n        result = [];\n\n    for ( i = 0; i < n; i ++ ) {\n\n        r = THREE.Math.random16() * totalArea;\n\n        index = binarySearchIndices( r );\n\n        // result[ i ] = THREE.GeometryUtils.randomPointInFace( faces[ index ], geometry, true );\n        vA.set( vertices[index * 9 + 0], vertices[index * 9 + 1], vertices[index * 9 + 2] );\n        vB.set( vertices[index * 9 + 3], vertices[index * 9 + 4], vertices[index * 9 + 5] );\n        vC.set( vertices[index * 9 + 6], vertices[index * 9 + 7], vertices[index * 9 + 8] );\n        result[ i ] = THREE.GeometryUtils.randomPointInTriangle( vA, vB, vC );\n\n    }\n\n    return result;\n\n}\n```\n"},{"labels":["enhancement"],"text":"OBJMTLLoader does not work with loadingmanager\n"},{"labels":["enhancement"],"text":"Recently @zz85 mentioned (#4724) a technique to render transparent objects without sorting. There is a [paper](http://jcgt.org/published/0002/02/09/) and a [blog post](http://casual-effects.blogspot.de/2014/03/weighted-blended-order-independent.html) describing it. Also, it has been already implemented in webgl - in cesium ([example](http://bagnell.github.io/cesium/Apps/Sandcastle/gallery/OIT.html)).\n\nI tried to implement the technique with three.js. Here is a [demo](http://arose.github.io/demo/oit/examples/webgl_oit.html) and the [code](https://github.com/arose/three.js/tree/oit) on github.\n\nIn the demo you can switch between the order independent rendering (oit), opaque or classical transparency requiring sorted rendering. It is quite convincing - until you start to zoom. I suspect it has something to do with how I calculate the `z` value for the accumulation and revelage shader. I'll try to figure that out, but any help is much appreciated!\n"},{"labels":["enhancement"],"text":"@mrdoob how would you feel about an example page added for msgpack compressed assets? I did a larger example here http://webgl.donankleer.com/msgpack/ but I would certainly use a far smaller asset just to demonstrate the implementation. Just a thought, no worries if there isn't any interest. \n"},{"labels":["enhancement"],"text":"Hi, In src/loaders/TextureLoader.js there is a load() method with onProgress and onError callbacks. However these callbacks are never called. Seems like it should be straight forward enough to add calls to them.\n\n@mrdoob I feel like this is something I could probably tackle. I can try to submit a PR soon?\n"},{"labels":["enhancement"],"text":"I wrote a gist describing a little of mrdoob's code conventions (as some have referred to the **MDCS**) and included a **jscs** rules for code style enforcing. https://gist.github.com/zz85/e929503387cdc597b4f7\n\nNot everyone is familiar or used to MDCS so @WestLangley asked if there's a script which can \"mrdoobify\" the rest of our codebase which has not conformed to that standard.\n\nSo some objectives I hope to archive are:\n1. Have some documentation on mrdoob's code style (perhaps on the wiki pages?)\n2. Add jscs rules so contributors can use it for validating code via pre-commit hook  or editor's linting (sublime / vim) or just part of the build tools.\n3. Try some code transformation tools to make existing code more mrdoob style compliant.\n\nFor **2**, there are a couple more features in the JSCS I'm waiting to get implemented or merged before it could really enforce MDCS. In particular, https://github.com/mdevils/node-jscs/pull/371 https://github.com/mdevils/node-jscs/pull/333 possibly https://github.com/mdevils/node-jscs/issues/244 and https://github.com/mdevils/node-jscs/issues/126#issuecomment-42379798 too.\n\nAs for **3**, I could try out codepainter (https://github.com/jedmao/codepainter) and see how well it works for this.\n"},{"labels":["enhancement"],"text":"@mrdoob ,\nThis was brought up on the now-closed ray-box issue, so I moved it here per mrdoob's request:\n\nI know three.js has a ray-sphere intersect test, but could you add where it returns the point at which the ray first intersected that sphere (in world coordinates)? \n\nWhen using ray.intersects(objects) I know this already works if the object is a sphere - but it checks against all the polygons of that sphere, right? So if you had a many-faceted sphere, it wouldn't be as efficient for many spheres in the scene.  \n\nWhat I'm asking for is a more mathematically generalized version that places the intersect point along the ray, at a distance of 'sphereRadius' from the center of the sphere (no matter how many polys the sphere was created with).  This would be the equivalent of a fast ray-box routine, only ray-sphere.  That way, scene objects could be bound by either spheres or boxes and we developers could get the resulting collision point in world coordinates so we could perform the appropriate action at that exact point (like an explosion or something) on the bounding sphere.\n\nThanks!\n-Erich\n"},{"labels":["enhancement"],"text":"Any THREE.js apps with shadow mapping enabled will crash on a MacBook Air that I'm currently testing. It produces no shader error log, even though the link is unsuccessful. Then it crashes the WebGL context (leading to \"Chrome hit a snag\" and some visual artifacts on screen). \n\nTook me a while to track it down; but the issue is because of the following line in the shadowmap fragment ShaderChunk:\n`vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );`\n\nThis is potentially problematic for other GPUs as well, since not all of them will support dynamic indexing like this. [See here](http://stackoverflow.com/a/12031821)\n\nFor now I've changed the shader code to only use a single shadow map. Using `const int = 0` works as the array index. Maybe another solution is needed that involves unrolling the loop.\n\nSpecs:\nNVIDIA GeForce 320M\nOSX 10.6.8\n"},{"labels":["enhancement"],"text":"Can you create IE10/11 support in CSS3DRenderer with workaround for missing property preserve-3d?\n"},{"labels":["enhancement"],"text":"For a little project of mine I needed the editor's export functionality, yet I saw that only the scene description gets exported/imported but not any additional files (like textures).\nI needed a possibility to export/import scenes with sounds, therefore I now create a zip when the scene's exported. It contains the scene description (the json) and all the sound files. When imported I extract the zip contents and place the sound files at the respective places again.\nPlease check out the functionality here: http://lizkats.com/temp/fhnw/playfulEditor/editor Toss in a random sound to a random object, on the top you'll also find \"Play\" to actually hear the sound. And when you export you get the zip (but it's renamed to have the data format `.playful`, just rename it to `.zip` if you want to have a look at the contents.\nThe solution uses jszip (http://stuk.github.io/jszip).\n\nMy point is: Is there a reason that an export does not contain textures? Or is there none? And would my approach be a possible approach for the three.js editor?\n\nThis question becomes even more important to me since I plan to create some student projects (https://github.com/mrdoob/three.js/issues/4718) where one of them is a global illumination bakery which then sort of creates a texture for every single object. And if you can't export them... *shrug*\n\n@mrdoob the editor is mainly your baby right? So your input would be very appreciated ^^\n"},{"labels":["enhancement"],"text":"In reference to @WestLangley 's note about handling indexed and non-indexed BufferGeometry in the RayCasting code at https://github.com/mrdoob/three.js/pull/4759 . \n\nI was working on raycasting indexed BufferGeometry for a PointCloud and noticed, that the whole cloud is beeing rendered, even if only part of the cloud is indexed. It seems that the WebGL Renderer ignores the indices and uses position.array.length/3 to draw PointClouds.\nSee WebGLRenderer.renderBufferDirect(): \n\n```\nelse if ( object instanceof THREE.PointCloud ) {\n\n\n    // render particles\n\n    if ( updateBuffers ) {\n\n        setupVertexAttributes( material, programAttributes, geometryAttributes, 0 );\n\n    }\n\n    var position = geometryAttributes[ \"position\" ];\n\n    // render particles\n\n    _gl.drawArrays( _gl.POINTS, 0, position.array.length / 3 );\n\n    _this.info.render.calls ++;\n    _this.info.render.points += position.array.length / 3;\n\n}\n```\n"},{"labels":["enhancement"],"text":"When I installed the maya export plugin according to the instructions, on Maya 2014, things didn't work.\n1. I didn't need to install pymel, it was already installed/included in Maya. Following the instructions lead to several errors, so I backed it out and found that the exporter plugin worked anyway.\n2. Installing the plugin to the specified folders didn't work either. Instead, I installed them to:\n   \n   /Users/Shared/Autodesk/maya/2014 \n\n(on OS X). When I put the files in the location in the read me, the .mel script wasn't found.\n"},{"labels":["enhancement"],"text":"Experimenting with rendering vector shapes / graphics with WebGL.\n\nSome advantages:\n- provide resolution-independent scaling\n- reduce the need for higher subdivisions\n- potentially much better performances\n- potentially the ability to support bezier lines with widths > 1 (see #4056 and [here](https://twitter.com/BlurSpline/status/397346332668489728))\n\nPosting progress if I've any on this.\n\nSome references:\n- http://http.developer.nvidia.com/GPUGems3/gpugems3_ch25.html\n- http://www.mdk.org.pl/2007/10/27/curvy-blues\n\nRelated: #4429, https://github.com/openframeworks/openFrameworks/issues/1190 and probably some other places I remember discussing but don't remember where now..\n"},{"labels":["enhancement"],"text":"Was trying to play around #4429 when I realized the way `ShapeGeometry`, `ExtrudeGeometry`, `Path.js`, `Shape.js`, `CurvePath` etc are probably a little too coupled together.\n\nThe first step might be to do the extraction of a Shape representation could be done outside the Geometry classes.\n\n```\nvar points = [ shapePoints, holePoints, holePoints ];\nvar points = shapes.extractPoints();\n```\n\nThe next step is to decide whether to take triangulation out of the Geometry classes so the geometries classes only accepts faces.\n\n```\nvar faces = THREE.TriangulateUtils.pointsToFaces( bla );\n\nshapeGeometry = new ShapeGeometry(faces);\nextrudegeometry = new ExtrudeGeometry(faces, options);\n```\n\nThis makes it more modular to have an external tessellation library, and also for the shape and ExtrudeGeometry to take in more generic inputs.\n\nOf course, this feels like there's a lot of refactoring and work to be done...\n"},{"labels":["enhancement"],"text":"Right now it can be done like with `customDepthMaterial` in `examples/webgl_animation_cloth.html` but it might be nice if this get supported right in `ShadowMapPlugin`. \n\n+1 if you think this is useful.\n"},{"labels":["enhancement"],"text":"I believe SceneLoader is going to be deprecated so this may be a non-issue, but I thought I'd log it anyway.\nWhen the extra geometries box, sphere, and plane were changed to use a property \"parameters\" to hold parameters, SceneExporter.js in examples/js/exporters wasn't updated to follow this change. As such, boxes/spheres/planes in the scene get parsed with undefined parameters which breaks the export process.\nSee f8bd805b1c7939fc6caf22af721c4ba156b870e2 for the original change in question.\n"},{"labels":["enhancement"],"text":"Hey guys!\n\nIt's me again... but this time with something good!\n\nI need to come up with some ideas for projects. It doesn't matter what was long as it involves coding. Why? Well, we have students here where I work and as part of their student life they need to do projects, and I'm a lucky guy who can bring up some project ideas ^^ Soooo what is there that you've always wanted? that you'd imagine to be cool? that would be great if you could have it as a library/framework for your project? \n\n@mrdoob maybe undo-redo functionality for the editor? Or a calculate-sky-shader for a cubemap? A good foliage engine? An improved Blender-to-three.js exporter where you can run animations on seperate bones etc. without having to mess with the most base of the code, like we had to for our project? ^^ shadow cascade, the second?\n\nThe projects' time spans range from 180 to 720 hours. Ideas, please!!! :dancer: \n\n(Both simple and difficult task ideas appreciated :+1: Further, be aware that there's no success guarantee for these kind of projects, and the time frame is rather long. Sooo base functionality isn't recommended for such projects :))\n"},{"labels":["enhancement"],"text":"Someone pointed out that the current dev version's PlaneGeometry uses BufferGeometry now. I very much welcome this change. Yet currently something's missing for my use case:\nI'm using a physics engine (physi.js) where I create a heightfield by translating the vertices of the planeGeometry. For the physics calculations physi.js requires face normals. I noticed that there's no more `calculateFaceNormals()` or however it was called. (Is this a todo?)\nHow are we supposed to solve that? For details about the engine we maybe best directly contact chandler... _shrug_\n\nThanks in advance for some thoughts\n"},{"labels":["enhancement"],"text":"Hi\n\nIs there a chance to have an example of using pdb files with the webgl renderer.\nThe existing example is great but it is demonstrating two things, working with pdb files and css3 renderer, which make it harder to reuse.\n\nhttps://github.com/mrdoob/three.js/blob/master/examples/css3d_molecules.html\n\nThanks\n"},{"labels":["enhancement"],"text":"I just got started with three so I just did the introduction exercise and on [line 53](https://github.com/mrdoob/three.js/blob/master/docs/manual/introduction/Creating-a-scene.html#L53)  it says:\n\n\"There are a few different cameras in Three.js, **but we'll go more into that later**\"\n\nWhere do I go to get more \"**into that**\"? Are there more tutorial exercises?\n"},{"labels":["enhancement"],"text":"The documentation for THREE.BoundingBoxHelper contains a mistake.\n\nhttp://threejs.org/docs/#Reference/Extras.Helpers/BoundingBoxHelper\n\nThe example is actually of THREE.ArrowHelper.\n"},{"labels":["enhancement"],"text":"http://threejs.org/docs/#Reference/Math/Box3 does not mention the methods addPoint() and setFromObject() that appear in http://threejs.org/docs/#Reference/Math/Box3\n"},{"labels":["enhancement"],"text":"Currently MorphTargets are not supported in MeshDepthMaterial..\n\nNot related to #4364\n"},{"labels":["enhancement"],"text":"I'm experiencing an issue with a plane with a (transparent .webm) video texture. The video is of a cell rotating in place, and every frame is getting drawn on top of the previous one. Since the video is partially transparent, you can see the previous frames behind the current one. Any suggestions on how to make sure the last frame gets removed before drawing the next one?\n\nHere's the pertinent bit of code:\nhttps://gist.github.com/bradsimantel/10168393\n\nAnd a screenshot:\n![screenshot](http://i.imgur.com/jt2ST7A.png)\n"},{"labels":["enhancement"],"text":"It seems that the variable face in core/Geometry.js on line 253 is unused within it's 'intended' scope:\n\nhttps://github.com/mrdoob/three.js/blob/dev/src/core/Geometry.js#L253\n\nEdit: dev branch\n"},{"labels":["enhancement"],"text":"It seems that the example code in:\nhttps://github.com/mrdoob/three.js/blob/dev/docs/api/extras/geometries/PlaneGeometry.html\nuses a deprecated \"side\" property...\nvar material = new THREE.MeshBasicMaterial( {color: 0xffff00, side: THREE.DoubleSide} );\n"},{"labels":["enhancement"],"text":"In the documentation page for MeshFaceMaterial, the link '[page:Face3 faces materialindex]' just appears as text rather than as a real link.\nAlso, in the migration page, in the entry for r52 → r53, it says MeshFaceMaterials in 2 places but MeshFaceMaterial in 1 place. Shouldn't they all be MeshFaceMaterial?\n"},{"labels":["enhancement"],"text":"I'm using intellij idea buildin server anh chrome. It seams that used in threejs default configuration of XMLHttpRequest append do response something like that //#url of file that breaking json parser with message \"Unexpected token\". So if I changed line in three.js to \nvar json = JSON.parse( xhr.responseText.replace(/\\/\\/.*/,'') ); json parser works.\n"},{"labels":["enhancement"],"text":"Was there ever a discussion about adding a set difference method in Vector2, Vector3 and Vector4? Would this be a useful addition? I could create a pull request...\nIn mathematics, a backslash-like symbol is used for the set difference.\nYou can read on the method here: http://en.wikipedia.org/wiki/Complement_(set_theory)\nIt is used in some specific vector calculations. \nThe method compares the values of the vector with another vector and returns the not corresponding values in the result set (as far as i understood it :) ).\n"},{"labels":["enhancement"],"text":"I would like to have two shadow cameras, one to cast detailed short-range shadows on nearby objects and one to cast lower resolution long-range shadows at further distances over a larger area.\n\nI experimented with this setup, exposing an issue which I will try to describe:\nPicture an person standing on the ground.\nThe short-range shadow camera does a wonderful job creating a detailed shadow of the person on the ground, overriding the the long-range shadow camera's less-detailed shadowmap.\n\nNow, a building is constructed in the distance that can be picked up by the long-range camera but not the short-range one.\nUnfortunately, the short-range shadow camera's shadow map still overrides the long-range shadow camera's shadowmap, claiming the area (defined by the short-range shadowmap) around the person is in light, when the long-range shadow camera knows it is dark.\n\nCheck out the JSFiddle: http://jsfiddle.net/3Zc9h/\n\nI would expect the far-range shadow camera's shadow map to take precedence over the short-range map in this case.\n\nI tried placing the near camera at the same place as the far camera and increasing the `far` value, but that decreases the quality of the near shadowmap, causing artifacts I would like to avoid.\nDisabling the `renderer.shadowMapCascade` removes the issue, but causes doubly-dark shadows.\n\nI believe this can be fixed by modifying the shadowmap fragment shader to be accommodating of shadowmap camera near/far.\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderChunk.js#L1382-L1601\n"},{"labels":["enhancement"],"text":"It would be nice to have the ability to create custom dashed patterns, maybe by changing the `LineDashedMaterial`. I'm thinking it would take an array pattern such as `[0.5, -0.5, 0.25, -0.25]`, produces `__  _  __  _` with variable length. Positive values are dashes. Negative values are gaps. This appears to be supported natively for Canvas so it would be easy to implement for `CanvasRenderer`.\n\nThe challenge will be a good implementation in WebGL. I've got a jsFiddle (http://jsfiddle.net/VyP29/2/) here that implements it for WebGL, generating a shader for the pattern given. I'm a newbie, so this shader could probably be better. Someone on StackOverflow said the jsFiddle didn't work for them, so it may need to be rewritten for compatibility with more hardware.\n\nA last note: We could extend this further to support dots in the pattern, represented by a 0 in the array pattern. (eg. `[0.5, -0.5, 0, -0.5]`) to produce `_  .  _  .`. However, this is not natively supported by Canvas and I think it makes the shader logic much more complex.\n"},{"labels":["enhancement"],"text":"Hey peeps, I wrote an ocean shader for threejs and wanted to contribute it to the community. You can view a demo here:\n\nhttps://www.routter.co.tt/Demo/Ocean\n\nWhats the best way to do so, I am a total git newbie :3\n"},{"labels":["enhancement"],"text":"Hi. Sorry to post a question, not an acual bug, but I need to know if this thing will get some attention, or how can I help to make it happen.\n\nI'm trying to build an online dungeon game (http://mrammor.com), and it really could benefit a lot from dynamic lights (torches) and things hidden in shadows.\n\nThis is what I got so far: http://alpha.mrammor.com\n\nThe problem is, when I add multiple lights, the shadows don't seem to interact, they just stack on top of each other. It basically fills the scene with shadows that should not be visible.\nSo my question is, is this the intended behaviour? Or is there some kind of easy fix?\n\nHere's a little demo of a single block with two orbiting lights:\nhttp://eskel.cz/preview/ThreeShadowsSpot/\nI hope it demonstrates the problem well.\n\nThe effect I'm after can be seen in the fork of Altered Qualia, with deferred renderer:\nhttp://eskel.cz/preview/ThreeAlteredShadowsPoint\nhttp://eskel.cz/preview/ThreeAlteredShadowsSpot\nThe problem is, he only has it minified and it's heavily modified and outdated.\nI'm not aiming at good performance at the moment, just to achieve the aesthetic aim.\n\nAlteredq suggested I use Illiminated.js (http://greweb.me/illuminated.js/parcycle/) but that means I would have to make it isometric and loose the versatility a realism of a 3d scene.\n\nI can try to implement something or invest in the development somehow. Thanks for any suggestions.\n"},{"labels":["enhancement"],"text":"High-performance and flexible selection methods are usually common tasks for most of graphics applications. The selection methods may include a rectangle region, a circle region, a polygon region etc.\n\nHope most useful selection methods could be added in to Three.js in future.\n\nThanks.\n"},{"labels":["enhancement"],"text":"Objects with material.wireframe = true; are rendered as hollow wireframe using the WebGLRenderer but as solid objects using the CanvasRenderer. Assuming the WebGLRenderer behavior is the correct one, the patch bellow fixes the CanvasRederer:\n\n```\ndiff --git a/src/core/Projector.js b/src/core/Projector.js\nindex 24633aa..d19907c 100644\n--- a/src/core/Projector.js\n+++ b/src/core/Projector.js\n@@ -454,7 +454,9 @@ THREE.Projector = function () {\n\n                                                }\n\n-                                               var visible = renderList.checkTriangleVisibility( v1, v2, v3 );\n+                                               var visible = true;\n+                                                if (!material.wireframe)\n+                                                        visible = renderList.checkTriangleVisibility( v1, v2, v3 );\n\n                                                if ( ( visible === false && side === THREE.FrontSide ) ||\n                                                         ( visible === true && side === THREE.BackSide ) ) continue;\n\n\n```\n"},{"labels":["enhancement"],"text":"Would it be possible for Geometry to expose a way to pass the primitive count to drawArrays? This is important for dynamic geometry. \n"},{"labels":["enhancement"],"text":"I have an object (exported from Blender) which is uv mapped and has a uv texture image.\nIf I use JSONLoader() to load it , the callback function is called before the image is loaded.\nIf I immediately try to render it in the callback, it fails.\nIf I wait few seconds and render it, it works.\nThis fails\n\n```\nvar loader = new THREE.JSONLoader(true);\nloader.load('Carl.js',\n            function ( geometry, materials ) {\n                var material = new THREE.MeshFaceMaterial( materials );\n                mesh = new THREE.Mesh(geometry, material);\n                scene.add(mesh);\n                renderer.render(scene, camera);\n            }\n);\n```\n\nThis works\n\n```\nvar loader = new THREE.JSONLoader(true);\nloader.load('Carl.js',\n            function ( geometry, materials ) {\n                var material = new THREE.MeshFaceMaterial( materials );\n                mesh = new THREE.Mesh(geometry, material);\n                scene.add(mesh);\n                setTimeout(\n                    function(){\n                        renderer.render(scene, camera);\n                    },\n                    2000\n                );\n            }\n);\n```\n\nI took a quick look at the source\n\n```\nJSONLoader calls \n    Loader.initMaterials() which calls\n        Loader.createMaterial() which calls\n            load_image()\n```\n\nload_image loads image asynchronously.\nLooks like JSONLoader doesn't wait on this and calls callback function immediately.\n"},{"labels":["enhancement"],"text":"Have you guys considered making `matrixWorld` always up-to-date? \n\nIn other words, an object's `matrixWorld` could be automatically updated in response to changes to it's `position`, `rotation`, `scale`, or `parent`. This could be implemented similarly to the way Euler and Quaternion objects update each other in Object3D. It would also eliminate the need to traverse the scene with `updateMatrixWorld()` on every frame (in the renderer), or whenever a user needs to ensure that the `matrixWorld` for a particular object is up-to-date.\n"},{"labels":["enhancement"],"text":"the issue source is in \"THREE.Shape.Utils.removeHoles \" 3 loop.\n→contour >>>1405   holes>>> 2 (1000, 500)  time 1670ms\n\nWhat is a good way to solve it? help please ! thanks.\n"},{"labels":["enhancement"],"text":"three.js r66  debug version\n\nLine 20556 WebGLRenderer method setSize(): \n\n``` javascript\n    this.setSize = function ( width, height, updateStyle ) {\n\n        _canvas.width = width * this.devicePixelRatio;\n        _canvas.height = height * this.devicePixelRatio;\n\n        if ( this.devicePixelRatio !== 1 && updateStyle !== false ) {\n\n            _canvas.style.width = width + 'px';\n            _canvas.style.height = height + 'px';\n\n        }\n\n        this.setViewport( 0, 0, width, height );\n\n    };\n```\n\nI need dynamically change viewport size and assign canvas style also on device with normal pixel ratio, otherwise I get problems with content rendering and layout. Now I changed line 20561 from\n`if ( this.devicePixelRatio !== 1 && updateStyle !== false ) {`\nto\n`if ( updateStyle !== false ) {`\nand it works for me. Could you please enable this or explain me where is my mistake. \n\nThanks a lot for your great job!\n"},{"labels":["enhancement"],"text":"Hello,\n\ni am thinking of updating the MOD3 modifier library https://github.com/foo123/MOD3\n\nin order for (at least some) modifiers (eg Bend, Twist) to have GLSL versions and be used directly in webgl.\n\ni can transform the modifiers code from JavaScript to GLSL, but i am not sure of a generic way the shaders/modifiers can be used in a alibrary (starting with Three.js)\n\nFor example, turn modifier on/off , update parameters (easier) and merge with the library's webgl code.\n\nThe goal is that the above should be done in a generic way\n\n(eg maybe modifier can return a string with GLSL code and parameter/uniforms addresses and the library can merge with its own GLSL code, sth else?)\n\nAny suggestions are highly appreciated\n\nThanks\n"},{"labels":["enhancement"],"text":"Hello,\nI have a web page with 2 divs. The 1st loads text, the 2nd has a three.js view. Because the position of the position of the trackball is computed before the text in the 1st div is loaded, its coordinates are all messed up, and the trackball doesn't work (the code in r66 only works if the original position of the three.js container does not change).\n\nI fixed it by adding the following to the function getMouseProjectionOnBall() in TrackballControls.js:\n\n```\nreturn function ( pageX, pageY, projection ) {\n    var box = _this.domElement.getBoundingClientRect();\n    var offsets = {x: window.pageXOffset, y:window.pageYOffset};\n    var x = box.left + offsets.x; // Convert to document coordinates\n    var y = box.top + offsets.y;\n\n    mouseOnBall.set(\n        ( pageX - _this.screen.width * 0.5 - x ) / (_this.screen.width*.5),\n        ( _this.screen.height * 0.5 + y - pageY ) / (_this.screen.height*.5),\n        0.0\n    );\n```\n"},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"Item from [TODO](https://github.com/mrdoob/three.js/wiki/TODO)\n\n_WebGLRenderer interface for gl.readPixels. [resource](http://stackoverflow.com/questions/18167797/three-js-retrieve-data-from-webglrendertarget-water-sim)_\n\n@mrdoob any thoughts on the api for this?\n"},{"labels":["enhancement"],"text":"I'm attempting to debug a shading issue that occurs on my meshes when animated via skeletal animation. \n![screen shot 2014-03-03 at 11 40 53 am](https://f.cloud.github.com/assets/1529387/2315825/2c450c8a-a329-11e3-8aee-f8f92d034fd5.png)\n\nAs far as I can tell, the mesh is being applied correctly, as are the skins. The only thing left that I could think of that would be influencing it is the normals. The mesh appears to be shading correctly in the bind pose, though it's difficult to tell for sure. Upon applying and updating the vertex normals helper, this was the result:\n\n![screen shot 2014-03-03 at 3 53 38 pm](https://f.cloud.github.com/assets/1529387/2315844/6d5e448e-a329-11e3-8694-7dea3d1eead4.png)\n![screen shot 2014-03-03 at 3 54 09 pm](https://f.cloud.github.com/assets/1529387/2315846/70019bbe-a329-11e3-831c-ccb7917fa962.png)\n\nIs this the intended behavior? Should they be moving with the mesh during skeletal animations? If so, what could be causing them to remain static?\n\nThanks for your time.\n"},{"labels":["enhancement"],"text":"I believe that the function `projectOnVector` in the prototype of `THREE.Vector3` is faulty. Also I believe that the implementation below is flawless :)\n\n```\n            // project vector v onto 'this' destructively:\n\n            projectOnVector: function ( v  // vector to be projected onto this\n                ) {\n                var dot1, dot2;\n\n                dot1 = this.dot( v );\n                dot2 = this.dot( this );\n\n                return v.copy( this ).multiplyScalar( dot1 / dot2 );\n            }\n        });\n```\n"},{"labels":["enhancement"],"text":"ThreeJs Importer show errors\n![errors](https://f.cloud.github.com/assets/4470739/2304235/b56632bc-a20e-11e3-82fc-7a1f4d319df7.png)\nContent of exported file:\n"},{"labels":["enhancement"],"text":"I have noticed that the position attribute is always set up as a vector3 by THREE.js even if the position attribute is changed in your material for Buffer Geometry.\n\nSo with a custom material where you have added an attribute of position as a size 4 buffer geometry item the shader compiles with it as a Vector3 in its declaration.\n\nIn code for setting up geometry:\n\n```\n   geometry.addAttribute('position', Float32Array,position.length,4);\n```\n\nIn shader is declared as vec3 and can't seem to override it.\n\nObviously fairly easy to get around by passing data in a different component like a texture coordinate. But still should probably be fixed.\n"},{"labels":["enhancement"],"text":"Hi guys, due to business needs for an application I'm working on, we've had need for a Maya exporter that supports skeletal animations. The existing exporter appeared to be non-functional (would receive errors upon trying to export our meshes), and I couldn't make heads or tails of the code base, so we decided to start from scratch. The code is located [here](https://github.com/thoughtbot/maya-three-exporter). It requires pymel.\n\nThus far I'm handling vertices, faces, normals, morph animations, bones, skins, and skeletal animations. The plan is to handle specular/bump/diffuse maps and textures as well. Right now things are working beautifully for simple animations.\n\n![thing 12](https://f.cloud.github.com/assets/1529387/2303135/675ad328-a1a2-11e3-8029-836b42b1ab85.gif)\n\nHowever, as I add in more complex rigs, things begin to break down.\n# Expected\n\n![thing 11 expected](https://f.cloud.github.com/assets/1529387/2303137/773d8f06-a1a2-11e3-9aad-c1b6103c8132.gif)\n# Actual\n\n![thing 11](https://f.cloud.github.com/assets/1529387/2303139/7ce9fe12-a1a2-11e3-88e3-64a185bcb2a8.gif)\n\n(Ignore the frame rate differences, Maya is slowed down). From what I can tell, it doesn't appear to be an issue with any axis being flipped. Instead, it almost looks like the joints are rotating around their parent or root joints, rather than their origin. Here's what the model looks like in its bind pose, and with one joint changed to 0 rotation.\n\n![screen shot 2014-03-01 at 5 41 52 pm](https://f.cloud.github.com/assets/1529387/2303149/805ef3da-a1a3-11e3-98cd-56361c60c034.png)\n![screen shot 2014-03-01 at 5 42 04 pm](https://f.cloud.github.com/assets/1529387/2303150/84ff8c10-a1a3-11e3-8d4f-8f8d79cc5907.png)\n\n3d animation and game development is not an area I have a lot of expertise in, and I'm at my wits end on this problem, as from what I can tell everything is wired up properly. I would very much appreciate any insight as to what might be causing this, even if it's just an idea of where to start looking.\n\nThanks so much for your time. We plan on submitting a PR to merge the maya exporter back into three once it's complete.\n"},{"labels":["enhancement"],"text":"This issue has come up before but I'd like to categorize this in bugs rather than the enhancement category.  This is quite limiting for the scene I'm working on.  It also doesn't work with all camera Targets.\n"},{"labels":["enhancement"],"text":"Both Firefox 27.0.1/Chrome 33.0.1750.117 seem to choke to death when fed with a relatively medium-size OBJ/MTL file (32Mb). The Activity Monitor (Mac OS X - 10.9.2) showed a Firefox/Chrome process of more than a Gb and counting. Firefox did get to 2 and half Gb and many minutes later before I stopped it.\n\nFirefox was good enough though to report an error occurring in threejs/js/OBJMTLLoader.js:89 which is geometry.mergeVertices();\n\nI commented that line out and the OBJMTLLoader importer completed its job fairly quickly although I had then some problems with some normals which looked been flipped the other way.\n\nAnyone experiencing the same ?\n"},{"labels":["enhancement"],"text":"When export orientation figures changed to 90 degrees with respect to their axes. It turns out that the figure of \"lying on its side.\" Export models opened in Blender\n![editor](https://f.cloud.github.com/assets/4470739/2267393/9a4927c0-9eb5-11e3-978c-4f45762dc52e.PNG)\n![blender](https://f.cloud.github.com/assets/4470739/2267394/9e32d69c-9eb5-11e3-9924-82aac92a9562.PNG)\n"},{"labels":["enhancement"],"text":"I have a static model load use the colladaLoader.js  . But, textures   seems load always after the model load.So my model is not texturing!!!  \nI konw there is one way  that randerer the scene  by requestAnimationFrame.But it's very expensive to the CPU cost.\n Is there some solutions to solve this problem after all textures have loaded, I can stop randerer the scene???\n"},{"labels":["enhancement"],"text":"In BufferGeometry in computeBoundingSphere the second loop computing the distances of all points from the center is redundant. No point can be further away from the center than the 8 corners of the Box.\nThe same applies to setFromPoints in Sphere.js. Here the same also applies if an optional center is supplied. Only one of the 8 box corners can have the max distance.\n"},{"labels":["enhancement"],"text":"Greetings. I want to openly announce the work I have been doing on refactoring the Python export scripts. The reasons for this is that the current exporter for Blender, tho functional, does not allow for any type of reuse by another application (Maya, Houdini, etc) with its current design. Additionally it is hard to configure for a pipeline. Any small tweaks I wish to make, to satisfy standards of my pipeline, would require a branch of the entire exporter module.\n\nThe package I have been working on abstracts the application's API calls from the actual architecture of how a JSON scene file is built. It is accompanied by unit tests to assist in verifying the integrity of the code base upon new updates.\nhttps://github.com/repsac/three.js_scene_utilities\n\nI have constructed a class based hierarchy structure that will handle how the JSON scene is assembled. A user who wishes to write an exporter only needs to supply a single module containing functions of a pre-defined naming schema. This allows the user to focus solely on writing functions that return the proper data (object transformations, geometry vertices, material diffuse colours, etc). Here is an example of a dummy module with all the functions:\nhttps://github.com/repsac/three.js_scene_utilities/blob/master/lib/threejs_export/functions.py\n\nUsage example:\n\n```\nimport threejs_export\nimport custom_module  # the module defined for a certain application\nthreejs_export.export(filepath, custom_module)\n```\n\nCurrently I am working on a port of the Blender functionality. Additionally I am working on a Maya version as well but since the Maya module is being done at my job the company's policies dictate that it stays in-house. However, this is allowing me to experiment with 2 applications, of 2 different Python versions, to see how everything works out (because of this I have re-designed the entire package 3 times due to hard lessons learned). Upon completion of the Blender module I plan to add to the existing unit tests a Blender batch test that verifies my Blender test scenes export files that match the test JSON scenes.\n\nI am not working in a branch of three.js because it is not known if this will be accepted or wanted by the three.js community. Additionally since it is a substantial change from the current exporters there is possible consideration that needs to happen on the \"how and if\" a change this large would be rolled out. Lastly, I have worked in production long enough to know the resistance that can come up when such a large change to anything is proposed. Because of this I am maintaining the code in my own repo until development is in good standing and there has been a consensus on whether or not this remains outside of the three.js repository.\n\nSorry for the long read but there was quite a bit that needed to be said, thanks.\n"},{"labels":["enhancement"],"text":"Mobile browser give access to some useful data as the rotation of the device in the real world (event deviceorientation).\n\nI make a simple experiment with a new control system, MotionControls.js for three.js: https://github.com/jbouny/motioncontrols\n\nA simple demo is: http://jeremybouny.fr/motioncontrols/example/\n\nSimple usage:\ncontrol = new THREE.MotionControls( camera );\n[...]\ncontrol.update();\n\nThe problem is that it is really unstable. Each browser gives data with the same interface, but with inverting angles.\n\nI tried on Android some browser on a Galaxy S3:\n- Firefox stable: angles inversion\n- Firefox beta: works really fine, it already filter data\n- Chrome beta: works with noised data\n- Opera beta: works with noised data\n\nCurrently, it's hard to make something really cross browser with same quality. Moreover, data are noised on some browsers. I think i could add a filter as Kalman.\n\nBUT, even if there is a lot of problems. I think it is really cool to control the camera. If you have an android system with Firefox beta, you can try this demo: http://jeremybouny.fr/ocean/demo_mobile/. I am not sure about the good working on others.\n\nSo, is it too early to try to integrate an example with this system as it is not really stable (but cool?) and concern a specific usage?\n"},{"labels":["enhancement"],"text":"What was the reason for removing the numItems usage in r66? (https://github.com/mrdoob/three.js/commit/edf14d2e6aa42247972c1a323abdd0c9433de6c7)\n\nI used this to dynamically add/remove vertices (but still profit from the performance gain due to using BufferGeometry). Obviously, I don't want to create new Float32Arrays on every update.\n\nIs there an alternative way to do this?\n"},{"labels":["enhancement"],"text":"Hi, I have got object with brushed metal textures. I would like to use diffuse+specular+glossy+normal maps with three.js. Glossy map helps mi show brushing of metal. Good metal texture is mix of specular and glossy map. Is it possible to use roughness/glossy map texture in three.js?\n"},{"labels":["enhancement"],"text":"Is there a reason why I can't divide a Vector2 by another Vector2?\n"},{"labels":["enhancement"],"text":"When I apply UV maps to a mesh, then export from Blender to .js format and reimport, I get the following error message:\n\n![error](https://f.cloud.github.com/assets/6732165/2212996/1e75be1a-99ba-11e3-9ee6-6d32b2c7bc22.PNG)\n"},{"labels":["enhancement"],"text":"Are you going to add oficially physics to your great THREE.js Editor?\n\nI saw this video and it was amazing:\nhttp://www.youtube.com/watch?v=Y4ygcI6HSW4\n\nI would suggest to add an item to horizontal menu and there we could select certain physical interaction and add it to the selected object on the scene.\n"},{"labels":["enhancement"],"text":" THREE.KeyFrameAnimation depends on parts of the ColladaLoader (Transform and Key more specifically). So we either should rewrite it or it should be removed all together.  \n"},{"labels":["enhancement"],"text":"Trying to make `ParametricGeometry` _`Geometry2`-compatible_ (#4386). \n\nNot sure if its the best way to do things, but it works then all the geometries in `examples/webgl_geometries2` would be supported. Maybe its also missing the equivalent of `computeVertexNormals`...\n\nhttps://gist.github.com/zz85/9087239\n"},{"labels":["enhancement"],"text":"There is something weird going on with the blender exporter. Running on blender 2.69. Almost completely randomly some embedded meshes either disappear or are exported with wrong names. For instance, embedded mesh ending with 002 below is not even present in the geometries array. And some meshes in the geometries array that should be exported, are not present in the embeds array. \n\n``` json\n\"geometries\" :\n{\n    \"geo_Cube.003\" : {\n        \"type\" : \"embedded\",\n        \"id\"  : \"emb_Cube.003\"\n    },\n\n    \"geo_Cube.001\" : {\n        \"type\" : \"embedded\",\n        \"id\"  : \"emb_Cube.001\"\n    },\n\n    \"geo_Cube.000\" : {\n        \"type\" : \"embedded\",\n        \"id\"  : \"emb_Cube.000\"\n    },\n\n    \"geo_Cube.005\" : {\n        \"type\" : \"embedded\",\n        \"id\"  : \"emb_Cube.005\"\n    },\n\n    \"geo_Cube.004\" : {\n        \"type\" : \"embedded\",\n        \"id\"  : \"emb_Cube.004\"\n    }\n},\n\n\"embeds\" :\n{\n\"emb_Cube.002\": {   \"scale\" : 1.000000,\n\n},\n\n\"emb_Cube.001\": {   \"scale\" : 1.000000,\n\n},\n\n\"emb_Cube.000\": {   \"scale\" : 1.000000,\n\n},\n\n\"emb_Cube.005\": {   \"scale\" : 1.000000,\n...\n}\n```\n"},{"labels":["enhancement"],"text":"On android device with Firefox browser, Misc_control_orbit demo or any demo with Orbitcontrols is quite hard to zoom with two finger (zoom out is too fast and zoom in is hitch).\n\nHere the video i record compare Orbitcontrols vs Trackballcontrols on android: https://www.youtube.com/watch?v=b0oDnsvQ0lw&feature=youtu.be\n"},{"labels":["enhancement"],"text":"After `Face4`s were killed (See #3663), subdivision modifier has always been a known issue in releases and is part of the [TODO](https://github.com/mrdoob/three.js/wiki/TODO) 's _\"Replace Catmull-Rom based SubdivisionModifier with a Loop subdivision implementation\"_.\n\nOf course there's no guarantee loop subdivision is going to be a perfect replacement, but its something we should work on. I've given it a shot but didn't have the strength to finish through with the implementation. Will try resuscitating it if I can, meanwhile anyone who wants to give it a shot should do so :)\n"},{"labels":["enhancement"],"text":"Is IE9 still supported in three.js ?  right now none of the (canvas) examples work. (console shows errors in three.js code itself)\n"},{"labels":["enhancement"],"text":"Is the callback feature available with the VRML Loader? I know it works with the STL one, but I can't seem to make it work with VRML.\n\nLooking at VRMLLoader.js it seems to be missing... perhaps?\n\nDummy sample code example, trying to load a VRML file with a single part (Group):\n\n```\nvar scene = new THREE.scene();\nvar parts = new Object();\nvar vrmlloader = new THREE.VRMLLoader();\n\nfunction callbackFunction(partName) {\n    return function(loadedscene) {\n        //loaded scene has a single children, the loaded part,\n        //made out of a bunch of shapes\n        var loadedobject = loadedscene.children[0];\n\n        for (var i=0; i<loadedobject.children.length;i++){\n            parts[partName & i] = loadedobject.children[i];\n        }\n        scene.add(loadedobject);\n    };\n}           \n\nvrmlloader.load( './Parts/P5.wrl', callbackFunction('Part5'));\n```\n\nI'm guessing it should callback with a whole scene (instead of just geometry like the STL one).\n\nAm I missing something?\n"},{"labels":["enhancement"],"text":"engines such as unreal 4 and unity (in experimental state at least) are implementing voxel cone tracing based on spherical harmonics and sparse voxel tree generation using GLSL:\nhttp://perso.telecom-paristech.fr/~eisemann/publications/Crassin2011VoxelGlobalPG/VoxelGI_EG-pg2011-sub.pdf\nthe author claims that this approach is only enabled by GLSL 5, and I believe version supported by WebGL at the moment is 2, so likely some of the things would have to be done differently (using FBOs probably). There is a project here on github which claims to implement this technique in C++:\nhttps://github.com/domme/VoxelConeTracing\nthere are also quotations of GLSL code in scientific papers (either the GI ones or GigaVoxel work, i can't recall).\nThere is an interesting documentation of implementation of this approach for OpenGL:\nhttp://www.altdevblogaday.com/2013/01/31/implementing-voxel-cone-tracing/\nI'm interested to know how this would fit within threejs and if there is much of general interest in this topic. \nThe reason this approach is very appealing as a GI solution is due to the fact that it is more or less fully automatic, except for controlling granularity (smallest voxel size or total number of voxels) - there is not magic involved, designer doesn't have to place probes manually and control their size by hand.\n"},{"labels":["enhancement"],"text":"glTF shows great results on FF and Chrome but it is broken on IE11.\nI'm posting this here so other users won't run into the same problem.\nhttps://github.com/KhronosGroup/glTF/issues/222\n\nThe are two problems:\n1. ArrayBuffer on IE11 doesn't have the slice method.\n2. Mising WebGL features on IE11:\n\n```\nS3TC compressed textures not supported\nINVALID_OPERATION: clearStencil: Method not currently supported\n```\n"},{"labels":["enhancement"],"text":"Hi,\n\nI have large models > 20MB which blocks the browser when parsing and rendering them for several minutes.\nIn my case the 3D viewer is only part of the app and models are loaded in the middle of a session so showing a progressbar is not enough.\n\nWhat part is the most expensive?\n- Parsing string to JSON\n- Parsing JSON object to three.js objects\n- Rendering\n\nAre there plans to improve the browser responsiveness when loading large models?\nOr maybe I'm missing existing features?\n\nSome thoughts:\n- Break the JSON file to multiple chunks. Each file could be a separate geometry or the loader could load a large file with chunk encoding and parse and render geometries when it has enough data. (pdf.js does that).\n- Use a web worker to load and parse the data and pass it as a transferable object.\n  I'm not sure if IE11 support this feature but FF and Chrome do. (pdf.js uses this technique).\n\nProgressive loading of PDFs \n    https://github.com/mozilla/pdf.js/pull/2719 \nWorker with transferable objects\n    https://github.com/mozilla/pdf.js/pull/3904\n    http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast\n"},{"labels":["enhancement"],"text":"Seems like I'm finally starting to experiment with something that I've been thinking for a long time.\n\n**The problem**\n\nThe current `Geometry` structure is, albeit user-friendly, convoluted and unperformant. That structure was designed before WebGL even existed and it has been patched along the way.\n\n`BufferGeometry` was created as a response to this. However, `BufferGeometry` has the opposite problem, it's not user-friendly. I don't think a \"normal\" user needs to know what attributes are.\n\nEvery time I see a three.js based project running on WebGL on mobile I hope (fear) the persons behind it didn't use `Geometry`.\n\n**The solution**\n\nI spent a long while trying to think how to make `BufferGeometry` more user friendly, but I couldn't see a way of doing that without sacrificing its flexibility so eventually I decided to keep `BufferGeometry` as it is. I spent some time during the last cycle making `Projector` (`CanvasRenderer`, `SoftwareRenderer`, `SVGRenderer`, ...) support the structure instead.\n\nhttps://github.com/mrdoob/three.js/blob/dev/src/core/Projector.js#L307-L342\n\nThe intention now is to go with `Geometry2`, which eventually would replace `Geometry` and break backwards compatibility, although I wonder if people modify geometry much or not...\n\nThe idea of `Geometry2` is to have everything in flat arrays: `vertices`, `normals`, `uvs` and `colors` ready to be submitted to the GPU (on the WebGL side).\n\nhttps://github.com/mrdoob/three.js/blob/dev/src/core/Geometry2.js\n\nHowever, that's not very user-friendly... I experimented with a similar class some months ago that had some \"interfaces\" to help the user:\n\nhttps://github.com/mrdoob/three.js/blob/dev/examples/js/core/TypedGeometry.js\n\nAll that getters/setters black magic basically allows the user to modify the geometry without having to know that they're just modifying a blob of numbers. The API looked like this:\n\n``` javascript\ngeometry.face( 10 ).vertex( 1 ).x = 10;\n```\n\nHowever, this would only be for the user. Generators and loaders would fill the arrays directly. Here's how `PlaneGeometry2` looks like:\n\nhttps://github.com/mrdoob/three.js/blob/dev/src/extras/geometries/PlaneGeometry2.js\n\nAs a side not, performance-wise, I've noticed that where `PlaneGeometry` was created in ~6ms, `PlaneGeometry2` generates in ~0.3ms.\n\nOn the `Projector` side, the code is looking pretty simple so far:\n\nhttps://github.com/mrdoob/three.js/blob/dev/src/core/Projector.js#L343-L358\n\n**To index or not to index**\n\nThis is another topic that has troubled me for years and I think I want to bet to favour non-indexed geometries this time around. Part of the current over complexity in `WebGLRenderer` is the fact that WebGL limits `ELEMENT_ARRAY_BUFFER` (indices) to `Uint16Array` (without extensions). This means that, internally, `WebGLRenderer` has to split your geometry in chunks and well... I rather not explain how painful this is.\n\nSo, even if indexed geometries save on GPU bandwidth, I don't think the complexity it creates is worth it. `Geometry2` won't support indices (Let me know if I'm missing something here).\n\nHowever, `BufferGeometry` will still be in place, so if someone wants to construct their custom indexed geometry they will still have a way to do it.\n\n**Outcome**\n\nIn theory, generators and loaders will speed up ~10x. Projects will consume less memory (single `Float32Array`s vs tons of `Vector2`/`Vector3`s). And, both `Projector` and `WebGLRenderer` will get much simpler.\n"},{"labels":["enhancement"],"text":"We noticed that current version of MaterialLoader / MaterialExporter (4.2) for ThreeJS Scene format, does not support textures or CubeMaps (envMap) of materials. \n\nA simple addition to current format can be:\ncolorMap = texture_path\nenvMap =  [ path1, path2, path3 ,path4, path5, path6 ] \n\nWe, at Exocortex (http://clara.io), are receiving such requests from ThreeJS users, so they can easily export their materials to ThreeJS format . \n\nTherefore, We need help of ThreeJS community to improve current ThreeJS Scene format, to enable others like us to export materials properly. \nThanks\n"},{"labels":["enhancement"],"text":"It seems that when I set the camera's up vector to (0,0,1), OrbitControl's mouse behavior is very confusing.  The object moves in a different way than the pointer moves, etc.\n"},{"labels":["enhancement"],"text":"To reproduce:\n1. Open the editor at: http://threejs.org/editor/ (r65)\n2. Create a new scene\n3. Add a cube\n4. Set the material type as `MeshFaceMaterial`.\n5. Observe the screen goes blank, with error:\n\n> Uncaught TypeError: Cannot read property 'attributes' of undefined\n\n![image](https://f.cloud.github.com/assets/350947/2055190/a67d2fa8-8ac1-11e3-906d-f93b3bf59905.png)\n"},{"labels":[null,"enhancement"],"text":"Hi,\n\nJust found this missing functionality.\nThe exported JSON does not include that field of attribute.\n\nIs this can be fixed?\nThanks.\n"},{"labels":["enhancement"],"text":"I discover that Line with indexed geometry (from a BufferGeometry) is rendered without indices.\n\nThe function 'renderBufferDirect' use _gl.drawArrays instead of a _gl.drawElements when an 'index' attribute is present (same problem in 'renderBuffer').\n\nSince this is supported for THREE.Mesh, It look like it's just not implemented.\n\nIf it's intentional could you explain why ?\nCould you add a comment in documentation ?\n\nVivien\n"},{"labels":["enhancement"],"text":"I convert a simple sheep model use convert_obj_three.py to .json ,\nload it use THREE.JSONLoader(),\nand use THREE.ImageUtils.loadCompressedTexture(texturepath) to add the texture,\nbut not reach my results,\nhere is: \n![image](https://f.cloud.github.com/assets/6129694/1949074/30cad3ca-80dd-11e3-94ad-458e0113bb6a.png)\n![image](https://f.cloud.github.com/assets/6129694/1949075/3990ce38-80dd-11e3-8fa5-dd62c70867ba.png)\n\nhere is the code : https://github.com/pikaya/lei ,\n\nThank you very much for someone to help me!\n\nhere is the result of DDS converted to PNG :\n![image](https://f.cloud.github.com/assets/6129694/1951125/e1e79828-816e-11e3-8484-4128a9704870.png)\n"},{"labels":["enhancement"],"text":"[This StackOverflow question](http://stackoverflow.com/questions/21087861/exporting-obj-to-three-js-models-using-blender-threejs-org-editor) hints that it would be useful to have some alert message (or even disable the \"Export Geometry\" item in the menu) if no object is selected, otherwise the user might not understand why nothing is happening.\n"},{"labels":["enhancement"],"text":"Hi,\n\nI did a few tests with video rendering and I noticed that the isPowerOfTwo function returns true for value === 0.\n\nThis is a problem when using a video tag without specifying width&height:\n\n```\nfunction isPowerOfTwo ( value ) {\n    return ( value & ( value - 1 ) ) === 0;\n};\n\n<video autoplay style=\"display:none\">\n    <source src=\"textures/bunny.ogg\">\n</video>\n```\n\nThe problem is that three.js tries to create a MipMap since isPowerOfTwo returns true which in turn creates a lot of warnings in the console because the video bounds are most likely not a power of two.\n\nI really think that value===0 should not be interpreted as a power of two.\n"},{"labels":["enhancement"],"text":"When using the EffectComposer the native antialiasing gets lost, rendering a janky final image. The FXAA shader is not close from the results I had using the native antialiasing. How could it be restored?\n"},{"labels":["enhancement"],"text":"Hi, \n\nNot sure it is the right to ask for an enhancement.\n\nI have used transformControls.js (V64) and realised that the gizmo is centered on local position (0,0,0) of an element. This doesn't mean it is the real center of the mesh.\n\nI have modified the update function, may be you could add it to the next release.\n\n```\nthis.update = function () {\n\n    if ( scope.object === undefined ) return;\n\n    //sho - Add 2014/01/10 - set the gizmo at object center.\n    if (scope.object.geometry) {\n        if (!scope.object.geometry.boundingBox)\n            scope.object.geometry.computeBoundingBox();\n        worldPosition.getPositionFromMatrix(scope.object.matrixWorld);\n        worldPosition.add(scope.object.geometry.boundingBox.center());\n    } else {\n        worldPosition.getPositionFromMatrix(scope.object.matrixWorld);\n    }\n    /******/        \n\n    /*scope.object.updateMatrixWorld();\n    worldPosition.setFromMatrixPosition( scope.object.matrixWorld );\n    worldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );*/\n\n    camera.updateMatrixWorld();\n    camPosition.setFromMatrixPosition( camera.matrixWorld );\n    camRotation.setFromRotationMatrix( tempMatrix.extractRotation( camera.matrixWorld ) );\n\n    scale = worldPosition.distanceTo( camPosition ) / 6 * scope.size;\n    this.position.copy( worldPosition )\n    this.scale.set( scale, scale, scale );\n\n    eye.copy( camPosition ).sub( worldPosition ).normalize();\n\n    if ( scope.space == \"local\" )\n        this.gizmo[_mode].update( worldRotation, eye );\n\n    else if ( scope.space == \"world\" )\n        this.gizmo[_mode].update( new THREE.Euler(), eye );\n\n    this.gizmo[_mode].highlight( scope.axis );\n\n}\n```\n"},{"labels":["enhancement"],"text":"Works fine with WebGL renderer:\n1. load a json figure without animation\n2. set the mesh of figure as SkinnedMesh\n\n``` javascript\nmesh = new THREE.SkinnedMesh( geometry, new THREE.MeshPhongMaterial( { map: texture, bumpMap: normalTexture, skinning: true } ), true );\n```\n1. add the mesh to a scene\n2. render the scene\n3. load some external animations into a animation (anim)\n4. set the anim to AnimationHandler\n\n``` javascript\nTHREE.AnimationHandler.add( anim, THREE.AnimationHandler.CATMULLROM);\nanimation = new THREE.Animation( mesh, \"Test10Action\" );\nanimation.length = anim.length;\nanimation.update(0);\nanimation.play();\nanimate(); //The animation starts...\n```\n1. run the animation\n\n``` javascript\nfunction animate() \n{\n    render();\n    stats.update();\n    if(animation.currentTime < (animation.length - 0.02))\n    {\n        //requestAnimationFrame( animate );\n        animation.update(0.02);\n        setTimeout(function(){\n            animate();\n        },10);\n    }\n    else\n    {\n        //animation.stop();\n    }\n}\n```\n\nThis works like charm in WebGL renderer but not Canvas renderer... Or did I miscoded something?\nthe figure displays in Canvas renderer.. Btw but the figure doesn't moves.. just stands still like a corpse\n"},{"labels":["enhancement"],"text":"Right now getting a direction or spot light's direction is somewhat complex and only present in the renderers, rather than as a method on the SpotLight and DirectionalLight classes.\n\nSpecifically to get the true direction of a light one uses this code:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L5020\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/renderers/SVGRenderer.js#L225\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/renderers/WebGLDeferredRenderer.js#L431\n\nI would like to move the repeated code from the renderers into the base Light class.  Thus I would like to add to Light this (and use it in the renderers):\n\n``` javascript\nTHREE.Light.prototype.getWorldDirection = function() {\n\n    var targetPosition = new THREE.Vector3();\n\n    return function ( optionalTarget ) {\n\n        var direction = optionalTarget || new THREE.Vector3();\n\n        if( this.target ) {\n\n            direction.setFromMatrixPosition( this.matrixWorld );\n            targetPosition.setFromMatrixPosition( this.target.matrixWorld );\n            direction.sub( targetPosition );\n            direction.normalize();\n        }\n\n        return direction;\n\n    };\n\n}();\n```\n\nI added the check for `this.target` because in order to share the code between SpotLight and DirectionalLight it had to go on the base class, and thus it may be used by Lights that do not have a `this.target` on them.\n\nPS. I am proposing this because I would have to again duplicate this code in the new batching renderer.\n"},{"labels":["enhancement"],"text":"In the normalmap shader here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderLib.js#L572\n\nIt defines uniforms for the various standard material colors (diffuse, ambient, specular) but it does so in a way that is different from every other material because it calls them \"uDiffuseColor\", \"uAmbientColor\" and \"uSpecularColor\".  Every other material uses the standard set out here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/ShaderChunk.js#L444\n\nwith the names being \"diffuse\", \"ambient\" and \"specular.\"\n\nI think there is/was some attempt to prefix uniforms with \"u\" but it is inconsistently done.  Probably should settle on a single standard here.\n\nI'd suggest as going as far as creating a 'surface_colors' section in the ShaderLib.js for \"diffuseColor\", \"ambientColor\", \"emissiveColor\" and \"specularColor\" (I'd recommend including \"Color\" in the name to be clear what it is) as it is pretty common and making it standardized just simplifies things.\n"},{"labels":["enhancement"],"text":"This is a screen shot from my iphone.\n![img_0081](https://f.cloud.github.com/assets/1858099/1817285/f9795b64-6f8c-11e3-8673-79329397acc4.PNG)\n\nThis is a screen shot from my mac.\n![snip20131227_1](https://f.cloud.github.com/assets/1858099/1817300/dd87d66e-6f8d-11e3-98ce-c958fa6a44cc.png)\n\nThis is original texture.\n![menuitems](https://f.cloud.github.com/assets/1858099/1817311/647bb014-6f8e-11e3-8eda-8c5caa72524d.png)\n\nThis is the code to load the sprite\n\n<pre>\n  loadCells('/assets/img/wolf3d/menuitems.png',3,[\n    {name:newGame,frame:{x:70, y:52, u:0, v:384,w:384,h:32},visible:true}\n  , {name:newGame_,frame:{x:70, y:52, u:384, v:384,w:384,h:32},visible:false}\n  , {name:sound,frame:{x:70, y:20, u:0, v:352,w:384,h:32},visible:true}\n  , {name:sound_,frame:{x:70, y:20, u:384, v:352,w:384,h:32},visible:false}\n  , {name:readThis,frame:{x:70, y:-12, u:0, v:288,w:384,h:32},visible:true}\n  , {name:readThis_,frame:{x:70, y:-12, u:384, v:288,w:384,h:32},visible:false}\n  , {name:backGame,frame:{x:70, y:-44, u:0, v:256,w:384,h:32},visible:true}\n  , {name:backGame_,frame:{x:70, y:-44, u:384, v:256,w:384,h:32},visible:false}\n  ]);\n\n  function loadCells(url,z,cells){\n    THREE.ImageUtils.loadTexture( url, undefined, function(texture){\n      var width = texture.image.width;\n      var height = texture.image.height;\n      _.each(cells,function(cell){\n        cell.material  = new THREE.SpriteMaterial({\n          map: texture\n        , uvOffset:{x: cell.frame.u / width, y: cell.frame.v / height}\n        , uvScale:{x: cell.frame.w / width, y: cell.frame.h / height}\n        });\n        cell.name = new THREE.Sprite(cell.material);\n        cell.name.scale.set(cell.frame.w * Wolf.WIDTH / 640 , cell.frame.h * Wolf.HEIGHT / 400, 0 );\n        cell.name.position.set(cell.frame.x * Wolf.WIDTH / 640, cell.frame.y * Wolf.HEIGHT / 400, z);\n        if(cell.visible)Wolf.scene2d.add(cell.name);\n      });\n    });\n  }\n</pre>\n"},{"labels":["enhancement"],"text":"Hi everyone,\nIs there a way to load X3D scenes into three.js?\nBeen searching all over the web and im surprised to find nothing on this issue.\n\nThanks very much for the help.\n"},{"labels":["enhancement"],"text":"I have a large mesh, which I intend to render without smooth shading. As such, there is no point calculating vertex normals. Normally, this is ok, since I can do:\n\n```\ngeom.computeFaceNormals();\nif(smoothShading) geom.computeVertexNormals();\n```\n\nHowever, when I do `geometry.computeMorphNormals()`, it does both steps at once. Could this be sensibly split into two distinct steps?\n\nAt present, I've just hacked in an impaired version of `THREE.Geometry.prototype.computeMorphNormals` that doesn't touch vertex normals, but I'm not keen on the code duplication:\n\n``` javascript\n\n// Calculate only face normals, not morph normals, which is much faster\nTHREE.Geometry.prototype.computeMorphFaceNormals = function () {\n\n        var i, il, f, fl, face;\n\n        // save original normals\n        // - create temp variables on first access\n        //   otherwise just copy (for faster repeated calls)\n\n        for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                face = this.faces[ f ];\n\n                if ( ! face.__originalFaceNormal ) {\n\n                        face.__originalFaceNormal = face.normal.clone();\n\n                } else {\n\n                        face.__originalFaceNormal.copy( face.normal );\n\n                }\n\n        }\n\n        // use temp geometry to compute face and vertex normals for each morph\n\n        var tmpGeo = new THREE.Geometry();\n        tmpGeo.faces = this.faces;\n\n        for ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n                // create on first access\n\n                if ( ! this.morphNormals[ i ] ) {\n\n                        this.morphNormals[ i ] = {};\n                        this.morphNormals[ i ].faceNormals = [];\n\n                        var dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\n                        var faceNormal;\n\n                        for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                                face = this.faces[ f ];\n\n                                faceNormal = new THREE.Vector3();\n                                dstNormalsFace.push( faceNormal );\n\n                        }\n\n                }\n\n                var morphNormals = this.morphNormals[ i ];\n\n                // set vertices to morph target\n\n                tmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n                // compute morph normals\n\n                tmpGeo.computeFaceNormals();\n\n                // store morph normals\n\n                var faceNormal;\n\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                        face = this.faces[ f ];\n\n                        faceNormal = morphNormals.faceNormals[ f ];\n\n                        faceNormal.copy( face.normal );\n\n                }\n\n        }\n\n        // restore original normals\n\n        for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n                face = this.faces[ f ];\n\n                face.normal = face.__originalFaceNormal;\n\n        }\n\n}\n```\n"},{"labels":["enhancement"],"text":"```\n intersectsObject: function () {\n\n                var sphere = new THREE.Sphere();\n\n                return function ( object ) {\n\n                        var geometry = object.geometry;\n\n                        if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n                        sphere.copy( geometry.boundingSphere );\n                        sphere.applyMatrix4( object.matrixWorld );\n\n                        return this.intersectsSphere( sphere );\n\n                };\n\n        }(),\n```\n\nthis is current implementation, it doesn't work for nested object. I have a container that has no geometry of it's own and as a result the whole process fails because geometry is undefined. \n"},{"labels":["enhancement"],"text":"Hi,\n\nI created an example of morph animation with three js.\nSince it was not easy to achieve this result,\nI would like to share the example.\nWould it be possible to add it in the examples gallery on three js web site?\n\nThe example is here:\nhttp://leonardofl.github.io/morph_threejs/\n"},{"labels":["enhancement"],"text":"Since the official is too large for being a Bower package (slow to fetch..),\nI registered by putting lastest code into repos, here are them:\nhttps://github.com/jiyinyiyong/three.js\nhttps://github.com/jiyinyiyong/threejs-stats\n\n```\n➤➤ bower search three.js\nSearch results:\n\n    three.js-mfg git://github.com/MfgLabs/three.js-mfg\n    three.js git://github.com/jiyinyiyong/three.js.git\n➤➤ bower search threejs-stats\nSearch results:\n\n    threejs-stats git://github.com/jiyinyiyong/threejs-stats.git\n```\n\nHope it helps.\n"},{"labels":["enhancement"],"text":"If a user registers an event handler w/ a EventDispatcher instance and then tries to remove a handler for another event type, three.js will throw an error. This is demonstrated with the following example:\n\n``` javascript\nvar foo = new THREE.EventDispatcher();\nvar handler = function(){};\nfoo.addEventListener('eventA', handler);\nfoo.removeEventListener('eventB', handler);\n```\n\nResulting in:\n\n```\nTypeError: listeners[type] is undefined\nvar index = listeners[ type ].indexOf( listener );\n```\n\nTechnically this is a user error, but the following patch takes care of this case in the same manner that EventDispatcher#removeEventListener uses checks to see if this._listeners is defined, and if not simply returns:\n\n```\n--- a/three-r62.js\n+++ b/three-r62.js\n@@ -6716,7 +6716,7 @@ THREE.EventDispatcher.prototype = {\n\n        removeEventListener: function ( type, listener ) {\n\n-               if ( this._listeners === undefined ) return;\n+               if ( this._listeners === undefined || this._listeners[type] === undefined) return;\n```\n\nPutting this out there for inclusion and/or just to help others who encounter the same issue.\n"},{"labels":["enhancement",null],"text":"the colladaloader ignores multiple texture channels, like\nlightmaps in the emmisive channel.\n![emissive](https://f.cloud.github.com/assets/5881603/1683229/e32590fa-5dba-11e3-89c2-f6ee0cb7b0c9.png)\n\nthis would be a GREAT enhancement in the collada loader.\n\n/martin.\n"},{"labels":["enhancement"],"text":"Hi, I am stuck in sprite raycaster. I not sure if it's a bug issue, which I have questioned in stackoverflow: http://stackoverflow.com/questions/20390272/ray-collision-fails-with-three-sprite. To make things clear, there is a screenshot:\n![api](https://f.cloud.github.com/assets/1484914/1679635/242c1f38-5d57-11e3-98e7-eeff13ba34b9.png). The avaliable intersect area is outside of image bounding and inside of red circle.\n"},{"labels":["enhancement"],"text":"Would it be possible to batch the draw calls like explained here? http://youtu.be/rfQ8rKGTVlg?t=14m44s\n\nHe basically batches together in the same draw call many objects with the same mesh, sending to the shader the per-object information.\n\nNote that this is not equivalent to a mesh merge, as all objects maintain their independent position and properties that can be still changed at will between frames.\n\nAdvantage being that, say for drawing x boxes, one would issue far less than x draw calls (and related calls for setting uniforms, etc.). In the demo of the link, this buys quite a lot of performance...\n\nWould this make sense? Would it be possible?\n"},{"labels":["enhancement"],"text":"Just some inspiration for a subimaging approach, how I did it...\n\n``` javascript\nTHREE.Texture = function... {\n        ...\n        this._subImages = [];\n        ...\n}\n\n\n    addSubImage: function( offsetX, offsetY, image) {\n\n        this._subImages.push( {\n            _subOffsetX: offsetX,\n            _subOffsetY: offsetY,\n            image: image\n        } );\n\n        this.needsUpdate = true;\n    },\n\n\n\n\n\n//from WebGLRenderer\nthis.setTexture = function ( texture, slot ) {\n        ...\n        // the code for regular textures  with auto generated mipmaps:\n        if ( texture._subImages.length == 0 ) {\n\n        _gl.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\n\n    } else {                \n\n        for ( var i = 0, il = texture._subImages.length; i < il; i ++ ) {\n\n            _gl.texSubImage2D( _gl.TEXTURE_2D, 0, texture._subImages[ i ]._subOffsetX, texture._subImages[ i ]._subOffsetY, glFormat, glType, texture._subImages[ i ].image );\n\n        }\n\n        texture._subImages = [];\n\n    }\n        ...\n};\n```\n\n... if I find time I might code it out one day, but this would have to be done for all renderers and all cases I guess (CompressedTexture, DataTexture?, Cubestuff?, etc.)\n\nAh well the benefit... the benefit is performance and fancyness I guess. Replacing parts of a texture is cool :+1: And e.g. for spritesheets it's way faster than instantiating a new texture every time.\n\nSoooo searching for volunteer! :smile: \n"},{"labels":["enhancement"],"text":"while  the method `mat4 getBoneMatrix()` in shader part `skinning_pars_vertex` does read xyzw values for both data texture and direct bone-matrix,\n values 3 and 4 are never actually read in the `skinbase_vertex` and added in the `skinning_vertex` shader parts.\n\nsimple to fix:\n\n``` Diff\nIndex: three.js\n<+>UTF-8\n===================================================================\n--- js/three.js (revision )\n+++ js/three.js (revision )\n@@ -17679,6 +17679,8 @@\n\n            \"mat4 boneMatX = getBoneMatrix( skinIndex.x );\",\n            \"mat4 boneMatY = getBoneMatrix( skinIndex.y );\",\n+           \"mat4 boneMatZ = getBoneMatrix( skinIndex.z );\",\n+           \"mat4 boneMatW = getBoneMatrix( skinIndex.w );\",\n\n        \"#endif\"\n\n@@ -17700,6 +17702,8 @@\n\n            \"vec4 skinned  = boneMatX * skinVertex * skinWeight.x;\",\n            \"skinned      += boneMatY * skinVertex * skinWeight.y;\",\n+           \"skinned      += boneMatZ * skinVertex * skinWeight.z;\",\n+           \"skinned      += boneMatW * skinVertex * skinWeight.w;\",\n\n        \"#endif\"\n```\n\nworks nicely with bones 3 and 4 now =)\n"},{"labels":["enhancement"],"text":"Using the latest version in master ([r63](https://github.com/mrdoob/three.js/releases/tag/r63)), the `clearColor` parameter does not set the background color as expected. Per the [WebGLRenderer](http://threejs.org/docs/#Reference/Renderers/WebGLRenderer) documentation, the renderer accepts a `clearColor` parameter, using a color specified in Hex.  Furthermore, the WebGL renderer appears to override the background color, set using CSS, for the canvas element.  This also affects the dev branch (currently [r64dev](https://github.com/mrdoob/three.js/tree/dev)).  I have a feeling this probably also affects `clearAlpha` though I haven't confirmed this locally.  \n\nI put together a [quick test](http://jsfiddle.net/VsWb9/1632/) (using [r54](https://github.com/mrdoob/three.js/releases/tag/r54)).\nStarting in [r61](https://github.com/mrdoob/three.js/releases/tag/r61) and continued in [r62](https://github.com/mrdoob/three.js/releases/tag/r62), the background color defaults to _white_.\nStarting in [r63](https://github.com/mrdoob/three.js/releases/tag/r54) and continued in [r64dev](https://github.com/mrdoob/three.js/tree/dev), the background color defaults to _black_.\n\nSo, either I misunderstood how to use the `clearColor` parameter, the documentation is out of date, or something broke between [r60](https://github.com/mrdoob/three.js/releases/tag/r60) and [r61](https://github.com/mrdoob/three.js/releases/tag/r61).  :confused: (perhaps related, issue #1933)\n\nUsing Google Chrome 31.0.1650.57 under Mac OS X 10.9.0 on an AMD 6750M.\n"},{"labels":["enhancement"],"text":"Next on my Shader TODOs - reduce the need to declare uniforms for ShaderMaterial.\n\nI think this is desirable for 2 reasons, it makes shader writing easier, and allows DRY (don't repeat yourself).\n\n[TICK](https://github.com/mrdoob/three.js/issues/2162#issuecomment-6776867) does it via macros, [ShaderGraph](https://github.com/unconed/ShaderGraph.js/blob/master/src/Snippet.js#L194) does it via parsing the shader code.\n\nI'm inclined towards the approach in ShaderGraph, it also allows warning messages before getting errors compiling the shaders. Possible API\n\n```\nshaderMaterial = ShaderUtils.compile( vertexShader, fragmentShader );\n```\n\nRelated: #3768 #2162 \n"},{"labels":["enhancement"],"text":"Hi everybody,\r\nI write in order to communicate a little mistake in the editor code.\r\nIt's impossible to set the density amount of the exponential fog just using the mouse, someone should add setStep(0.00001) to this line:\r\n\r\n```js\r\nvar fogDensity = new UI.Number( 0.00025 ).setWidth( '60px' ).setRange( 0, 0.1 ).setPrecision( 5 ).onChange( updateFogParameters );\r\n```\r\n\r\nGoodbye!!\r\n\r\nPS: I also think that is not very handy to set a range like that (0 - 0.1) and be forced to use a precision of 5. Why don't set a range like (0 - 100) and use just a precision of 2 ?? \r\nDoing like this it will be necessary to change the line 25:\r\n\r\n```js\r\nvar density = fogDensity.getValue();\r\n```\r\n\r\nwith:\r\n\r\n```js\r\nvar density = fogDensity.getValue() / 1000;\r\n```\r\n\r\nand line 181:\r\n\r\n```js\r\nfogDensity.setValue( scene.fog.density );\r\n```\r\n\r\nwith\r\n\r\n```js\r\nfogDensity.setValue( scene.fog.density \\* 1000);\r\n```\r\n\r\nHope I didn't forget anything!!\r\n"},{"labels":["enhancement"],"text":"There is an issue on the line update of the DirectionalLightHelper.\n\nI fix this updating the update method in the following way:\n\n```\nTHREE.DirectionalLightHelper.prototype.update = function () {\n\n        var vector = new THREE.Vector3();\n    var vectorTarget = new THREE.Vector3();\n\n    return function () {\n\n        vector.getPositionFromMatrix( this.light.matrixWorld ).negate();\n        vectorTarget.getPositionFromMatrix( this.light.target.matrixWorld ).negate();\n\n            this.lightPlane.lookAt( vector );\n        this.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n        this.targetLine.geometry.vertices[ 1 ].copy( vector );\n        this.targetLine.geometry.vertices[ 0 ].copy( vectorTarget );\n        this.targetLine.position.copy(vectorTarget.multiplyScalar(-1));\n        this.targetLine.geometry.verticesNeedUpdate = true;\n        this.targetLine.material.color.copy( this.lightPlane.material.color );\n\n    }\n\n}();\n```\n"},{"labels":["enhancement"],"text":"I create a cube with default MeshPhongMaterial, change `Side`  to `Both`, click export and it doesn't appear the doubleside parameter in the material object.\nAlso If I reload the page, it just forget about it value and go back to the default one\n"},{"labels":["enhancement"],"text":"So I create the scene with 1 directional light, 1 mesh and 1 lambert material, all looks like this:\n![screen shot 2013-11-12 at 2 16 58 am](https://f.cloud.github.com/assets/242577/1518474/b9c6675a-4b38-11e3-84c3-d1e7d321c913.png)\nSo far so good. Now I try to export this using ObjectExporter using this code:\n\n``` javascript\n            window.open (window.URL.createObjectURL (\n                new Blob ([ JSON.stringify( new THREE.ObjectExporter().parse( scene ) ) ], { type : 'text/plain' })\n            ));\n```\n\n[Resulting file](http://pastebin.com/jzF8dcyJ) still has directional light info:\n\n``` javascript\n...,\"children\":[{\"uuid\":\"91621B3E-1112-4999-A949-50654B527963\",\"type\":\"DirectionalLight\",\"color\":16777215,\"intensity\":1,\"matrix\":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},...\n```\n\nBut in the editor it looks like this:\n![screen shot 2013-11-12 at 2 19 04 am](https://f.cloud.github.com/assets/242577/1518493/6c7a4ef2-4b39-11e3-9b2c-6b21965422cb.png)\nIf I add new light from menu, it's no longer black.\n"},{"labels":["enhancement"],"text":"![11-11-2013 3-40-22 pm](https://f.cloud.github.com/assets/5907472/1511395/f350d56e-4aac-11e3-9398-9d738488675c.jpg)\n"},{"labels":["enhancement"],"text":"Please implement these workarounds for IE11.\n\nhttp://msdn.microsoft.com/en-us/library/ie/dn358557(v=vs.85).aspx\n\nWebGL context errors in Internet Explorer 11\nF12 developer tools console reports error and informational messages from the WebGL context. The Internet Explorer 11WebGL renderer doesn't support all context methods yet. More WebGL functionality will be added to IE11 in a future update. To help you get your code to work with IE11, some workarounds are noted here.\nSee the WebGL API for Internet Explorer for more information on the APIs.\n\nError code  Message Description Workaround\nWEBGL11095  INVALID_OPERATION: clearStencil: Method not currently supported Stencil buffers aren't supported.   Using shadow maps are a better alternative for shadows.\nWEBGL11095  INVALID_OPERATION: lineWidth: Method not currently supported    Not supported.  Only 1 pixel lines are supported.\nWEBGL11094  INVALID_OPERATION: enable: Enum SAMPLE_ALPHA_TO_COVERAGE is not currently supported Not supported.  Antialiasing isn't supported yet.\nWEBGL11094  INVALID_OPERATION: enable: Enum SAMPLE_COVERAGE is not currently supported  Not supported.  Antialiasing isn't supported yet.\nWEBGL11094  INVALID_OPERATION: getParameter: Enum SAMPLES is not currently supported    Not supported.  Antialiasing isn't supported yet.\nWEBGL11094  INVALID_OPERATION: getParameter: Enum STENCIL_BITS is not currently supported   Stencil buffers aren't supported.   This enum isn't supported yet\nWEBGL11094  INVALID_OPERATION: getParameter: Enum SUBPIXEL_BITS is not currently supported  Not supported.  Antialiasing isn't supported yet.\n"},{"labels":["enhancement"],"text":"Guys  - thanks for all your great work on three.js !\n\nI'm wondering if there are plans in the works to get more speed out of the canvas renderer? ... I'm asking because I'm currently seeing only about 7fps for the cube w shadow demo on my iPad 3 \n\nIt seems it should be possible:\nhttp://www.goodboydigital.com/project/super-spice-dash-an-epic-chicken-mcbites-adventure/\n\nIt's rendering 40-50 polys per frame w alpha including sprites at a playable frame rate. The game is made with pixi.js using the canvas and an ad-hoc 3d engine.\n\nThanks \n"},{"labels":["enhancement"],"text":"Is there any chance the [JSON format](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1) could be modified to include line and vertex primitives? Say by adding \"glyphs\" and \"lines\" dictionary entries in addition to the \"vertices\" and \"faces\" ones?\n"},{"labels":["enhancement"],"text":"Loader always creates normal `THREE.RGBAFormat` textures for lightmap,\nbut `THREE.LuminanceFormat` is enough for ao lightmap (and it uses less memory).\n\nWorkaround\n\n```\nmaterial.lightMap.format = THREE.LuminanceFormat;\n```\n\nin loader callback.\n"},{"labels":["enhancement"],"text":"I've been using `THREE.EffectComposer` and Blender lately.\nIn Blender, you can give an object an Emit of (1.0,1.0,4.0) and use a shader to divide 4 from all values, yielding a blue object.\nHowever, doing the same in THREE.js results in a grey object: colors over 1.0 are being truncated to 1.0.\nI'd like a way to store and retrieve color values that are greater than 1, so that I can apply bloom to those areas without rendering twice.\n\nBlender screenshot:\n![image](https://f.cloud.github.com/assets/3529065/1451517/256b1cf2-429d-11e3-96f8-c4db55ca541d.png)\n\nTHREE.js jsFiddle: http://jsfiddle.net/TQd9P/\n"},{"labels":["enhancement"],"text":"Currently, the Blender JSON exporter will export all bones with the identity Quaternion.  Although technically correct (verts can be relative to any bone orientation), it is far less useful than if bones maintained the same orientation that they appear to have in the editor.\n\nI've run across the following 2 use cases:\n\n1) You need to know the direction of a bone for procedural animation.  See here: http://www.realitymeltdown.com/WebGL2/Tree.html .  I wanted to incorporate wind direction to dynamically change the tree animation.  This requires the ability to deduce each branches direction but this is not possible when the branch bone orientations have no relation to the branch.\n\n2) Mesh attachments to bones.  If the bones no longer line up with a body part there is no good frame of reference for offsetting attachments.  An example would be attaching a gun to a player's hand.  It would be useful if the bone axes for the hand went in the direction of the fingers and perpendicular to the palm.\n\nBlender appears to naturally store the skeleton with identity rotations but the data needed to compute the actual rotation can be calculated by using the head and tail positions for each bone in the armature data.  Then, the vert data would have to be transformed to match the new bone rotation before export.\n"},{"labels":["enhancement"],"text":"IE11 added WebGL support but it uses pointer events instead of touch events so touch doesn't work in the controls.\n\nI'm talking about mouse/touch/pen events and not the CSS pointer-events property.\nThere is no need to support the prefixed msPointer events, only the final spec.\n\nhttp://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx\nhttp://msdn.microsoft.com/en-us/library/ie/dn304886%28v=vs.85%29.aspx\n"},{"labels":["enhancement"],"text":"Hi,\n\nI am using the THREE.CSS3DRenderer to transform some CSS-styled `<div>`s with three.js. This works fine for the THREE.PerspectiveCamera. \n\nBut now I started to use the THREE.OrthographicCamera and the the outcome does not look like it should anymore. The `<div>`s are inverted and placed on wrong positions. After some debugging i found out, that the reason for this issue is that that the THREE.CSS3DRenderer uses the property 'camera.fov' to calculate the perspective of the DOM-element and the CSS-translation on z-axis of the camera element. \n\nTHREE.OrthographicCamera logically does not support this property, so the calculation ends up with the result 'NaN'. The consequence of this is that the CSS-syle is removed by the browser because its simply invalide. \n- domElement.style.perspective =  \"NaNpx\";\n- cameraElement.style.transform= \"translate3d(0,0,NaNpx)matrix3d(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,-500,1) translate3d(640px,240px, 0)\";\n\nAm I using three.js wrong in some place, or is the THREE.OrthographicCamera not intended to use within THREE.CSS3DRenderer? \n\nThanks for support\npeter \n"},{"labels":["enhancement"],"text":"dear mrdoob, I have a problem with the VRMLLoader and my vrml 2 model because don't work. I work on MacOS 10.6 with Firefox. Can you help me please because your past examples (issue \"VRMLLoader?\") I do not have solved the problem? (below the vrml 2 file):\n\n```\n#VRML V2.0 utf8\n#This document was created with DCAD optimizer v.5.0.0\n#DCAD optimizer (C) 2005-2013 - Virtual Lab Sas-DOTgroup\n#PTF 3D file name: P02_simple_scene.PTF\n#Total 3D Objects: 9 - Lights sources: 1\n#Date: mercoledì 16 ottobre 2013-4:48:37 PM\n#===========================================\n#Blocco Oggetto 3D\n#DEF Elemento3D_9\nShape {\nappearance DEF MTR_Elemento3D_9\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.000000 0.820000 0.000000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Elemento3D_9\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n4.800000 2.600000 3.000000,\n4.800000 4.600000 3.000000,\n5.400000 4.600000 3.000000,\n5.400000 2.600000 3.000000,\n4.800000 5.400000 3.000000,\n7.600000 5.400000 3.000000,\n7.600000 4.600000 3.000000,\n4.800000 8.400000 3.000000,\n5.400000 8.400000 3.000000,\n5.400000 5.400000 3.000000,\n4.800000 2.600000 0.000000,\n5.400000 2.600000 0.000000,\n5.400000 8.400000 0.000000,\n4.800000 8.400000 0.000000,\n5.400000 4.600000 0.000000,\n7.600000 4.600000 0.000000,\n7.600000 5.400000 0.000000,\n5.400000 5.400000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n1, 4, 5, 1, -1,\n1, 5, 6, 1, -1,\n4, 7, 8, 4, -1,\n4, 8, 9, 4, -1,\n10, 11, 12, 10, -1,\n10, 12, 13, 10, -1,\n14, 15, 16, 14, -1,\n14, 16, 17, 14, -1,\n10, 13, 7, 10, -1,\n10, 7, 0, 10, -1,\n13, 12, 8, 13, -1,\n13, 8, 7, 13, -1,\n12, 17, 9, 12, -1,\n12, 9, 8, 12, -1,\n14, 11, 3, 14, -1,\n14, 3, 2, 14, -1,\n11, 10, 0, 11, -1,\n11, 0, 3, 11, -1,\n17, 16, 5, 17, -1,\n17, 5, 9, 17, -1,\n16, 15, 6, 16, -1,\n16, 6, 5, 16, -1,\n15, 14, 2, 15, -1,\n15, 2, 6, 15, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Murature_con_archi_2\nShape {\nappearance DEF MTR_Murature_con_archi\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.600000 0.600000 0.600000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Murature_con_archi_2\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\ncreaseAngle 1.047\ncoord Coordinate {\npoint [\n-3.200000 -2.800000 0.000000,\n-4.000000 -2.800000 0.000000,\n-4.000000 -2.800000 4.600000,\n-3.200000 -2.800000 4.600000,\n-3.121700 -2.800000 3.094400,\n-3.200000 -2.800000 2.600000,\n-3.121700 -2.800000 4.600000,\n-2.894400 -2.800000 3.540500,\n-2.894400 -2.800000 4.600000,\n-2.540500 -2.800000 3.894400,\n-2.540500 -2.800000 4.600000,\n-2.094400 -2.800000 4.121700,\n-2.094400 -2.800000 4.600000,\n-1.600000 -2.800000 4.200000,\n-1.600000 -2.800000 4.600000,\n-1.105600 -2.800000 4.121700,\n-1.105600 -2.800000 4.600000,\n-0.659500 -2.800000 3.894400,\n-0.659500 -2.800000 4.600000,\n-0.305600 -2.800000 3.540500,\n-0.305600 -2.800000 4.600000,\n-0.078300 -2.800000 3.094400,\n-0.078300 -2.800000 4.600000,\n0.000000 -2.800000 2.600000,\n0.000000 -2.800000 4.600000,\n0.600000 -2.800000 0.000000,\n0.000000 -2.800000 0.000000,\n0.600000 -2.800000 4.600000,\n0.678300 -2.800000 3.094400,\n0.600000 -2.800000 2.600000,\n0.678300 -2.800000 4.600000,\n0.905600 -2.800000 3.540500,\n0.905600 -2.800000 4.600000,\n1.259500 -2.800000 3.894400,\n1.259500 -2.800000 4.600000,\n1.705600 -2.800000 4.121700,\n1.705600 -2.800000 4.600000,\n2.200000 -2.800000 4.200000,\n2.200000 -2.800000 4.600000,\n2.694400 -2.800000 4.121700,\n2.694400 -2.800000 4.600000,\n3.140500 -2.800000 3.894400,\n3.140500 -2.800000 4.600000,\n3.494400 -2.800000 3.540500,\n3.494400 -2.800000 4.600000,\n3.721700 -2.800000 3.094400,\n3.721700 -2.800000 4.600000,\n3.800000 -2.800000 2.600000,\n3.800000 -2.800000 4.600000,\n4.400000 -2.800000 0.000000,\n3.800000 -2.800000 0.000000,\n4.400000 -2.800000 4.600000,\n-4.000000 -2.200000 0.000000,\n-3.200000 -2.200000 0.000000,\n-3.200000 -2.200000 4.600000,\n-4.000000 -2.200000 4.600000,\n-3.200000 -2.200000 2.600000,\n-3.121700 -2.200000 3.094400,\n-3.121700 -2.200000 4.600000,\n-2.894400 -2.200000 3.540500,\n-2.894400 -2.200000 4.600000,\n-2.540500 -2.200000 3.894400,\n-2.540500 -2.200000 4.600000,\n-2.094400 -2.200000 4.121700,\n-2.094400 -2.200000 4.600000,\n-1.600000 -2.200000 4.200000,\n-1.600000 -2.200000 4.600000,\n-1.105600 -2.200000 4.121700,\n-1.105600 -2.200000 4.600000,\n-0.659500 -2.200000 3.894400,\n-0.659500 -2.200000 4.600000,\n-0.305600 -2.200000 3.540500,\n-0.305600 -2.200000 4.600000,\n-0.078300 -2.200000 3.094400,\n-0.078300 -2.200000 4.600000,\n0.000000 -2.200000 2.600000,\n0.000000 -2.200000 4.600000,\n0.000000 -2.200000 0.000000,\n0.600000 -2.200000 0.000000,\n0.600000 -2.200000 4.600000,\n0.600000 -2.200000 2.600000,\n0.678300 -2.200000 3.094400,\n0.678300 -2.200000 4.600000,\n0.905600 -2.200000 3.540500,\n0.905600 -2.200000 4.600000,\n1.259500 -2.200000 3.894400,\n1.259500 -2.200000 4.600000,\n1.705600 -2.200000 4.121700,\n1.705600 -2.200000 4.600000,\n2.200000 -2.200000 4.200000,\n2.200000 -2.200000 4.600000,\n2.694400 -2.200000 4.121700,\n2.694400 -2.200000 4.600000,\n3.140500 -2.200000 3.894400,\n3.140500 -2.200000 4.600000,\n3.494400 -2.200000 3.540500,\n3.494400 -2.200000 4.600000,\n3.721700 -2.200000 3.094400,\n3.721700 -2.200000 4.600000,\n3.800000 -2.200000 2.600000,\n3.800000 -2.200000 4.600000,\n3.800000 -2.200000 0.000000,\n4.400000 -2.200000 0.000000,\n4.400000 -2.200000 4.600000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 3, 4, -1,\n4, 3, 6, 4, -1,\n7, 4, 6, 7, -1,\n7, 6, 8, 7, -1,\n9, 7, 8, 9, -1,\n9, 8, 10, 9, -1,\n11, 9, 10, 11, -1,\n11, 10, 12, 11, -1,\n13, 11, 12, 13, -1,\n13, 12, 14, 13, -1,\n15, 13, 14, 15, -1,\n15, 14, 16, 15, -1,\n17, 15, 16, 17, -1,\n17, 16, 18, 17, -1,\n19, 17, 18, 19, -1,\n19, 18, 20, 19, -1,\n21, 19, 20, 21, -1,\n21, 20, 22, 21, -1,\n23, 21, 22, 23, -1,\n23, 22, 24, 23, -1,\n25, 26, 24, 25, -1,\n25, 24, 27, 25, -1,\n28, 29, 27, 28, -1,\n28, 27, 30, 28, -1,\n31, 28, 30, 31, -1,\n31, 30, 32, 31, -1,\n33, 31, 32, 33, -1,\n33, 32, 34, 33, -1,\n35, 33, 34, 35, -1,\n35, 34, 36, 35, -1,\n37, 35, 36, 37, -1,\n37, 36, 38, 37, -1,\n39, 37, 38, 39, -1,\n39, 38, 40, 39, -1,\n41, 39, 40, 41, -1,\n41, 40, 42, 41, -1,\n43, 41, 42, 43, -1,\n43, 42, 44, 43, -1,\n45, 43, 44, 45, -1,\n45, 44, 46, 45, -1,\n47, 45, 46, 47, -1,\n47, 46, 48, 47, -1,\n49, 50, 48, 49, -1,\n49, 48, 51, 49, -1,\n52, 53, 54, 52, -1,\n52, 54, 55, 52, -1,\n56, 57, 58, 56, -1,\n56, 58, 54, 56, -1,\n57, 59, 60, 57, -1,\n57, 60, 58, 57, -1,\n59, 61, 62, 59, -1,\n59, 62, 60, 59, -1,\n61, 63, 64, 61, -1,\n61, 64, 62, 61, -1,\n63, 65, 66, 63, -1,\n63, 66, 64, 63, -1,\n65, 67, 68, 65, -1,\n65, 68, 66, 65, -1,\n67, 69, 70, 67, -1,\n67, 70, 68, 67, -1,\n69, 71, 72, 69, -1,\n69, 72, 70, 69, -1,\n71, 73, 74, 71, -1,\n71, 74, 72, 71, -1,\n73, 75, 76, 73, -1,\n73, 76, 74, 73, -1,\n77, 78, 79, 77, -1,\n77, 79, 76, 77, -1,\n80, 81, 82, 80, -1,\n80, 82, 79, 80, -1,\n81, 83, 84, 81, -1,\n81, 84, 82, 81, -1,\n83, 85, 86, 83, -1,\n83, 86, 84, 83, -1,\n85, 87, 88, 85, -1,\n85, 88, 86, 85, -1,\n87, 89, 90, 87, -1,\n87, 90, 88, 87, -1,\n89, 91, 92, 89, -1,\n89, 92, 90, 89, -1,\n91, 93, 94, 91, -1,\n91, 94, 92, 91, -1,\n93, 95, 96, 93, -1,\n93, 96, 94, 93, -1,\n95, 97, 98, 95, -1,\n95, 98, 96, 95, -1,\n97, 99, 100, 97, -1,\n97, 100, 98, 97, -1,\n101, 102, 103, 101, -1,\n101, 103, 100, 101, -1,\n1, 52, 55, 1, -1,\n1, 55, 2, 1, -1,\n51, 2, 55, 51, -1,\n51, 55, 103, 51, -1,\n102, 49, 51, 102, -1,\n102, 51, 103, 102, -1,\n50, 49, 102, 50, -1,\n50, 102, 101, 50, -1,\n26, 25, 78, 26, -1,\n26, 78, 77, 26, -1,\n1, 0, 53, 1, -1,\n1, 53, 52, 1, -1,\n56, 5, 4, 56, -1,\n56, 4, 57, 56, -1,\n57, 4, 7, 57, -1,\n57, 7, 59, 57, -1,\n59, 7, 9, 59, -1,\n59, 9, 61, 59, -1,\n61, 9, 11, 61, -1,\n61, 11, 63, 61, -1,\n63, 11, 13, 63, -1,\n63, 13, 65, 63, -1,\n65, 13, 15, 65, -1,\n65, 15, 67, 65, -1,\n67, 15, 17, 67, -1,\n67, 17, 69, 67, -1,\n69, 17, 19, 69, -1,\n69, 19, 71, 69, -1,\n21, 73, 71, 21, -1,\n21, 71, 19, 21, -1,\n23, 75, 73, 23, -1,\n23, 73, 21, 23, -1,\n53, 0, 5, 53, -1,\n53, 5, 56, 53, -1,\n26, 77, 75, 26, -1,\n26, 75, 23, 26, -1,\n80, 29, 28, 80, -1,\n80, 28, 81, 80, -1,\n81, 28, 31, 81, -1,\n81, 31, 83, 81, -1,\n83, 31, 33, 83, -1,\n83, 33, 85, 83, -1,\n85, 33, 35, 85, -1,\n85, 35, 87, 85, -1,\n87, 35, 37, 87, -1,\n87, 37, 89, 87, -1,\n89, 37, 39, 89, -1,\n89, 39, 91, 89, -1,\n91, 39, 41, 91, -1,\n91, 41, 93, 91, -1,\n93, 41, 43, 93, -1,\n93, 43, 95, 93, -1,\n45, 97, 95, 45, -1,\n45, 95, 43, 45, -1,\n47, 99, 97, 47, -1,\n47, 97, 45, 47, -1,\n78, 25, 29, 78, -1,\n78, 29, 80, 78, -1,\n50, 101, 99, 50, -1,\n50, 99, 47, 50, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Murature_con_archi_3\nShape {\nappearance DEF MTR_Murature_con_archi\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.600000 0.600000 0.600000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Murature_con_archi_3\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\ncreaseAngle 1.047\ncoord Coordinate {\npoint [\n-3.200000 4.000000 0.000000,\n-4.000000 4.000000 0.000000,\n-4.000000 4.000000 4.600000,\n-3.200000 4.000000 4.600000,\n-3.121700 4.000000 3.094400,\n-3.200000 4.000000 2.600000,\n-3.121700 4.000000 4.600000,\n-2.894400 4.000000 3.540500,\n-2.894400 4.000000 4.600000,\n-2.540500 4.000000 3.894400,\n-2.540500 4.000000 4.600000,\n-2.094400 4.000000 4.121700,\n-2.094400 4.000000 4.600000,\n-1.600000 4.000000 4.200000,\n-1.600000 4.000000 4.600000,\n-1.105600 4.000000 4.121700,\n-1.105600 4.000000 4.600000,\n-0.659500 4.000000 3.894400,\n-0.659500 4.000000 4.600000,\n-0.305600 4.000000 3.540500,\n-0.305600 4.000000 4.600000,\n-0.078300 4.000000 3.094400,\n-0.078300 4.000000 4.600000,\n0.000000 4.000000 2.600000,\n0.000000 4.000000 4.600000,\n0.600000 4.000000 0.000000,\n0.000000 4.000000 0.000000,\n0.600000 4.000000 4.600000,\n0.678300 4.000000 3.094400,\n0.600000 4.000000 2.600000,\n0.678300 4.000000 4.600000,\n0.905600 4.000000 3.540500,\n0.905600 4.000000 4.600000,\n1.259500 4.000000 3.894400,\n1.259500 4.000000 4.600000,\n1.705600 4.000000 4.121700,\n1.705600 4.000000 4.600000,\n2.200000 4.000000 4.200000,\n2.200000 4.000000 4.600000,\n2.694400 4.000000 4.121700,\n2.694400 4.000000 4.600000,\n3.140500 4.000000 3.894400,\n3.140500 4.000000 4.600000,\n3.494400 4.000000 3.540500,\n3.494400 4.000000 4.600000,\n3.721700 4.000000 3.094400,\n3.721700 4.000000 4.600000,\n3.800000 4.000000 2.600000,\n3.800000 4.000000 4.600000,\n4.400000 4.000000 0.000000,\n3.800000 4.000000 0.000000,\n4.400000 4.000000 4.600000,\n-4.000000 4.600000 0.000000,\n-3.200000 4.600000 0.000000,\n-3.200000 4.600000 4.600000,\n-4.000000 4.600000 4.600000,\n-3.200000 4.600000 2.600000,\n-3.121700 4.600000 3.094400,\n-3.121700 4.600000 4.600000,\n-2.894400 4.600000 3.540500,\n-2.894400 4.600000 4.600000,\n-2.540500 4.600000 3.894400,\n-2.540500 4.600000 4.600000,\n-2.094400 4.600000 4.121700,\n-2.094400 4.600000 4.600000,\n-1.600000 4.600000 4.200000,\n-1.600000 4.600000 4.600000,\n-1.105600 4.600000 4.121700,\n-1.105600 4.600000 4.600000,\n-0.659500 4.600000 3.894400,\n-0.659500 4.600000 4.600000,\n-0.305600 4.600000 3.540500,\n-0.305600 4.600000 4.600000,\n-0.078300 4.600000 3.094400,\n-0.078300 4.600000 4.600000,\n0.000000 4.600000 2.600000,\n0.000000 4.600000 4.600000,\n0.000000 4.600000 0.000000,\n0.600000 4.600000 0.000000,\n0.600000 4.600000 4.600000,\n0.600000 4.600000 2.600000,\n0.678300 4.600000 3.094400,\n0.678300 4.600000 4.600000,\n0.905600 4.600000 3.540500,\n0.905600 4.600000 4.600000,\n1.259500 4.600000 3.894400,\n1.259500 4.600000 4.600000,\n1.705600 4.600000 4.121700,\n1.705600 4.600000 4.600000,\n2.200000 4.600000 4.200000,\n2.200000 4.600000 4.600000,\n2.694400 4.600000 4.121700,\n2.694400 4.600000 4.600000,\n3.140500 4.600000 3.894400,\n3.140500 4.600000 4.600000,\n3.494400 4.600000 3.540500,\n3.494400 4.600000 4.600000,\n3.721700 4.600000 3.094400,\n3.721700 4.600000 4.600000,\n3.800000 4.600000 2.600000,\n3.800000 4.600000 4.600000,\n3.800000 4.600000 0.000000,\n4.400000 4.600000 0.000000,\n4.400000 4.600000 4.600000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 3, 4, -1,\n4, 3, 6, 4, -1,\n7, 4, 6, 7, -1,\n7, 6, 8, 7, -1,\n9, 7, 8, 9, -1,\n9, 8, 10, 9, -1,\n11, 9, 10, 11, -1,\n11, 10, 12, 11, -1,\n13, 11, 12, 13, -1,\n13, 12, 14, 13, -1,\n15, 13, 14, 15, -1,\n15, 14, 16, 15, -1,\n17, 15, 16, 17, -1,\n17, 16, 18, 17, -1,\n19, 17, 18, 19, -1,\n19, 18, 20, 19, -1,\n21, 19, 20, 21, -1,\n21, 20, 22, 21, -1,\n23, 21, 22, 23, -1,\n23, 22, 24, 23, -1,\n25, 26, 24, 25, -1,\n25, 24, 27, 25, -1,\n28, 29, 27, 28, -1,\n28, 27, 30, 28, -1,\n31, 28, 30, 31, -1,\n31, 30, 32, 31, -1,\n33, 31, 32, 33, -1,\n33, 32, 34, 33, -1,\n35, 33, 34, 35, -1,\n35, 34, 36, 35, -1,\n37, 35, 36, 37, -1,\n37, 36, 38, 37, -1,\n39, 37, 38, 39, -1,\n39, 38, 40, 39, -1,\n41, 39, 40, 41, -1,\n41, 40, 42, 41, -1,\n43, 41, 42, 43, -1,\n43, 42, 44, 43, -1,\n45, 43, 44, 45, -1,\n45, 44, 46, 45, -1,\n47, 45, 46, 47, -1,\n47, 46, 48, 47, -1,\n49, 50, 48, 49, -1,\n49, 48, 51, 49, -1,\n52, 53, 54, 52, -1,\n52, 54, 55, 52, -1,\n56, 57, 58, 56, -1,\n56, 58, 54, 56, -1,\n57, 59, 60, 57, -1,\n57, 60, 58, 57, -1,\n59, 61, 62, 59, -1,\n59, 62, 60, 59, -1,\n61, 63, 64, 61, -1,\n61, 64, 62, 61, -1,\n63, 65, 66, 63, -1,\n63, 66, 64, 63, -1,\n65, 67, 68, 65, -1,\n65, 68, 66, 65, -1,\n67, 69, 70, 67, -1,\n67, 70, 68, 67, -1,\n69, 71, 72, 69, -1,\n69, 72, 70, 69, -1,\n71, 73, 74, 71, -1,\n71, 74, 72, 71, -1,\n73, 75, 76, 73, -1,\n73, 76, 74, 73, -1,\n77, 78, 79, 77, -1,\n77, 79, 76, 77, -1,\n80, 81, 82, 80, -1,\n80, 82, 79, 80, -1,\n81, 83, 84, 81, -1,\n81, 84, 82, 81, -1,\n83, 85, 86, 83, -1,\n83, 86, 84, 83, -1,\n85, 87, 88, 85, -1,\n85, 88, 86, 85, -1,\n87, 89, 90, 87, -1,\n87, 90, 88, 87, -1,\n89, 91, 92, 89, -1,\n89, 92, 90, 89, -1,\n91, 93, 94, 91, -1,\n91, 94, 92, 91, -1,\n93, 95, 96, 93, -1,\n93, 96, 94, 93, -1,\n95, 97, 98, 95, -1,\n95, 98, 96, 95, -1,\n97, 99, 100, 97, -1,\n97, 100, 98, 97, -1,\n101, 102, 103, 101, -1,\n101, 103, 100, 101, -1,\n1, 52, 55, 1, -1,\n1, 55, 2, 1, -1,\n51, 2, 55, 51, -1,\n51, 55, 103, 51, -1,\n102, 49, 51, 102, -1,\n102, 51, 103, 102, -1,\n50, 49, 102, 50, -1,\n50, 102, 101, 50, -1,\n26, 25, 78, 26, -1,\n26, 78, 77, 26, -1,\n1, 0, 53, 1, -1,\n1, 53, 52, 1, -1,\n56, 5, 4, 56, -1,\n56, 4, 57, 56, -1,\n57, 4, 7, 57, -1,\n57, 7, 59, 57, -1,\n59, 7, 9, 59, -1,\n59, 9, 61, 59, -1,\n61, 9, 11, 61, -1,\n61, 11, 63, 61, -1,\n63, 11, 13, 63, -1,\n63, 13, 65, 63, -1,\n65, 13, 15, 65, -1,\n65, 15, 67, 65, -1,\n67, 15, 17, 67, -1,\n67, 17, 69, 67, -1,\n69, 17, 19, 69, -1,\n69, 19, 71, 69, -1,\n21, 73, 71, 21, -1,\n21, 71, 19, 21, -1,\n23, 75, 73, 23, -1,\n23, 73, 21, 23, -1,\n53, 0, 5, 53, -1,\n53, 5, 56, 53, -1,\n26, 77, 75, 26, -1,\n26, 75, 23, 26, -1,\n80, 29, 28, 80, -1,\n80, 28, 81, 80, -1,\n81, 28, 31, 81, -1,\n81, 31, 83, 81, -1,\n83, 31, 33, 83, -1,\n83, 33, 85, 83, -1,\n85, 33, 35, 85, -1,\n85, 35, 87, 85, -1,\n87, 35, 37, 87, -1,\n87, 37, 89, 87, -1,\n89, 37, 39, 89, -1,\n89, 39, 91, 89, -1,\n91, 39, 41, 91, -1,\n91, 41, 93, 91, -1,\n93, 41, 43, 93, -1,\n93, 43, 95, 93, -1,\n45, 97, 95, 45, -1,\n45, 95, 43, 45, -1,\n47, 99, 97, 47, -1,\n47, 97, 45, 47, -1,\n78, 25, 29, 78, -1,\n78, 29, 80, 78, -1,\n50, 101, 99, 50, -1,\n50, 99, 47, 50, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Cubotto_1_Blu_4\nShape {\nappearance DEF MTR_Cubotto_1_Blu\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.470000 0.800000 0.840000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Cubotto_1_Blu_4\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n-0.400000 1.000000 3.000000,\n-1.400000 1.000000 3.000000,\n-1.400000 3.400000 3.000000,\n-0.400000 3.400000 3.000000,\n-1.400000 1.000000 0.000000,\n-0.400000 1.000000 0.000000,\n-0.400000 3.400000 0.000000,\n-1.400000 3.400000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 6, 4, -1,\n4, 6, 7, 4, -1,\n4, 7, 2, 4, -1,\n4, 2, 1, 4, -1,\n7, 6, 3, 7, -1,\n7, 3, 2, 7, -1,\n6, 5, 0, 6, -1,\n6, 0, 3, 6, -1,\n5, 4, 1, 5, -1,\n5, 1, 0, 5, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Cubotto_1_5\nShape {\nappearance DEF MTR_Cubotto_1\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.470000 0.800000 0.840000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Cubotto_1_5\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n-3.200000 1.000000 3.000000,\n-4.200000 1.000000 3.000000,\n-4.200000 3.400000 3.000000,\n-3.200000 3.400000 3.000000,\n-4.200000 1.000000 0.000000,\n-3.200000 1.000000 0.000000,\n-3.200000 3.400000 0.000000,\n-4.200000 3.400000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 6, 4, -1,\n4, 6, 7, 4, -1,\n4, 7, 2, 4, -1,\n4, 2, 1, 4, -1,\n7, 6, 3, 7, -1,\n7, 3, 2, 7, -1,\n6, 5, 0, 6, -1,\n6, 0, 3, 6, -1,\n5, 4, 1, 5, -1,\n5, 1, 0, 5, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Blocco_cilindrico\nShape {\nappearance DEF MTR_Blocco_cilindrico\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.880000 0.000000 0.000000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Blocco_cilindrico\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\ncreaseAngle 1.047\ncoord Coordinate {\npoint [\n1.600000 5.600000 6.800000,\n1.229200 5.658700 6.800000,\n1.970800 5.658700 6.800000,\n0.894700 5.829200 6.800000,\n2.305300 5.829200 6.800000,\n0.629200 6.094700 6.800000,\n2.570800 6.094700 6.800000,\n0.458700 6.429200 6.800000,\n2.741300 6.429200 6.800000,\n0.400000 6.800000 6.800000,\n2.800000 6.800000 6.800000,\n0.404900 6.830900 6.800000,\n2.795100 6.830900 6.800000,\n0.409300 6.858700 6.800000,\n2.970800 6.858700 6.800000,\n0.436300 7.029200 6.800000,\n3.305300 7.029200 6.800000,\n0.458700 7.170800 6.800000,\n3.446900 7.170800 6.800000,\n0.521900 7.294700 6.800000,\n3.570800 7.294700 6.800000,\n0.629200 7.505300 6.800000,\n3.678100 7.505300 6.800000,\n0.753100 7.629200 6.800000,\n3.741300 7.629200 6.800000,\n0.894700 7.770800 6.800000,\n3.763700 7.770800 6.800000,\n1.229200 7.941300 6.800000,\n3.790700 7.941300 6.800000,\n1.404900 7.969100 6.800000,\n3.795100 7.969100 6.800000,\n1.400000 8.000000 6.800000,\n3.800000 8.000000 6.800000,\n1.458700 8.370800 6.800000,\n3.741300 8.370800 6.800000,\n1.629200 8.705300 6.800000,\n3.570800 8.705300 6.800000,\n1.894700 8.970800 6.800000,\n3.305300 8.970800 6.800000,\n2.229200 9.141300 6.800000,\n2.970800 9.141300 6.800000,\n2.600000 9.200000 6.800000,\n0.431700 7.000000 0.000000,\n0.458700 7.000000 0.000000,\n0.458700 7.170800 0.000000,\n0.629200 7.000000 0.000000,\n0.629200 7.505300 0.000000,\n0.894700 7.000000 0.000000,\n0.894700 7.770800 0.000000,\n1.229200 7.000000 0.000000,\n1.229200 7.941300 0.000000,\n1.400000 7.000000 0.000000,\n1.400000 7.968300 0.000000,\n1.404900 7.000000 0.000000,\n1.404900 7.969100 0.000000,\n1.400000 8.000000 0.000000,\n1.404900 8.031000 0.000000,\n1.458700 7.000000 0.000000,\n1.458700 8.370800 0.000000,\n1.629200 7.000000 0.000000,\n1.629200 8.705300 0.000000,\n1.894700 7.000000 0.000000,\n1.894700 8.970800 0.000000,\n2.229200 7.000000 0.000000,\n2.229200 9.141300 0.000000,\n2.600000 7.000000 0.000000,\n2.600000 9.200000 0.000000,\n2.970800 7.000000 0.000000,\n2.970800 9.141300 0.000000,\n3.248100 7.000000 0.000000,\n3.248100 9.000000 0.000000,\n3.305300 7.029200 0.000000,\n3.305300 8.970800 0.000000,\n3.570800 7.294700 0.000000,\n3.570800 8.705300 0.000000,\n3.741300 7.629200 0.000000,\n3.741300 8.370800 0.000000,\n3.800000 8.000000 0.000000,\n2.741300 6.429200 3.000000,\n2.800000 6.800000 3.000000,\n2.570800 6.094700 3.000000,\n2.305300 5.829200 3.000000,\n1.970800 5.658700 3.000000,\n1.600000 5.600000 3.000000,\n1.229200 5.658700 3.000000,\n0.894700 5.829200 3.000000,\n0.629200 6.094700 3.000000,\n0.458700 6.429200 3.000000,\n0.400000 6.800000 3.000000,\n0.431700 7.000000 3.000000,\n0.458700 7.170800 3.000000,\n2.795100 6.830900 3.000000,\n3.248100 7.000000 3.000000,\n3.305300 7.029200 3.000000,\n2.970800 6.858700 3.000000,\n0.431700 6.599800 3.000000,\n0.458700 7.000000 3.000000,\n0.629200 7.000000 3.000000,\n0.894700 7.000000 3.000000,\n1.229200 7.000000 3.000000,\n1.600000 7.000000 3.000000,\n1.970800 7.000000 3.000000,\n2.305300 7.000000 3.000000,\n2.570800 7.000000 3.000000,\n2.741300 7.000000 3.000000,\n2.795100 6.769000 3.000000,\n2.795100 7.000000 3.000000,\n2.800000 6.831700 3.000000,\n2.800000 7.000000 3.000000,\n2.970800 7.000000 3.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n1, 3, 4, 1, -1,\n1, 4, 2, 1, -1,\n3, 5, 6, 3, -1,\n3, 6, 4, 3, -1,\n5, 7, 8, 5, -1,\n5, 8, 6, 5, -1,\n7, 9, 10, 7, -1,\n7, 10, 8, 7, -1,\n9, 11, 12, 9, -1,\n9, 12, 10, 9, -1,\n11, 13, 14, 11, -1,\n11, 14, 12, 11, -1,\n13, 15, 16, 13, -1,\n13, 16, 14, 13, -1,\n15, 17, 18, 15, -1,\n15, 18, 16, 15, -1,\n17, 19, 20, 17, -1,\n17, 20, 18, 17, -1,\n19, 21, 22, 19, -1,\n19, 22, 20, 19, -1,\n21, 23, 24, 21, -1,\n21, 24, 22, 21, -1,\n23, 25, 26, 23, -1,\n23, 26, 24, 23, -1,\n25, 27, 28, 25, -1,\n25, 28, 26, 25, -1,\n27, 29, 30, 27, -1,\n27, 30, 28, 27, -1,\n29, 31, 32, 29, -1,\n29, 32, 30, 29, -1,\n31, 33, 34, 31, -1,\n31, 34, 32, 31, -1,\n33, 35, 36, 33, -1,\n33, 36, 34, 33, -1,\n35, 37, 38, 35, -1,\n35, 38, 36, 35, -1,\n37, 39, 40, 37, -1,\n37, 40, 38, 37, -1,\n39, 41, 40, 39, -1,\n42, 43, 44, 42, -1,\n42, 44, 42, 42, -1,\n43, 45, 46, 43, -1,\n43, 46, 44, 43, -1,\n45, 47, 48, 45, -1,\n45, 48, 46, 45, -1,\n47, 49, 50, 47, -1,\n47, 50, 48, 47, -1,\n49, 51, 52, 49, -1,\n49, 52, 50, 49, -1,\n51, 53, 54, 51, -1,\n51, 54, 52, 51, -1,\n55, 54, 56, 55, -1,\n53, 57, 58, 53, -1,\n53, 58, 56, 53, -1,\n57, 59, 60, 57, -1,\n57, 60, 58, 57, -1,\n59, 61, 62, 59, -1,\n59, 62, 60, 59, -1,\n61, 63, 64, 61, -1,\n61, 64, 62, 61, -1,\n63, 65, 66, 63, -1,\n63, 66, 64, 63, -1,\n65, 67, 68, 65, -1,\n65, 68, 66, 65, -1,\n67, 69, 70, 67, -1,\n67, 70, 68, 67, -1,\n69, 71, 72, 69, -1,\n69, 72, 70, 69, -1,\n71, 73, 74, 71, -1,\n71, 74, 72, 71, -1,\n73, 75, 76, 73, -1,\n73, 76, 74, 73, -1,\n75, 77, 76, 75, -1,\n78, 8, 10, 78, -1,\n78, 10, 79, 78, -1,\n80, 6, 8, 80, -1,\n80, 8, 78, 80, -1,\n81, 4, 6, 81, -1,\n81, 6, 80, 81, -1,\n82, 2, 4, 82, -1,\n82, 4, 81, 82, -1,\n83, 0, 2, 83, -1,\n83, 2, 82, 83, -1,\n84, 1, 0, 84, -1,\n84, 0, 83, 84, -1,\n85, 3, 1, 85, -1,\n85, 1, 84, 85, -1,\n86, 5, 3, 86, -1,\n86, 3, 85, 86, -1,\n5, 86, 87, 5, -1,\n5, 87, 7, 5, -1,\n7, 87, 88, 7, -1,\n7, 88, 9, 7, -1,\n89, 42, 44, 89, -1,\n89, 44, 90, 89, -1,\n9, 88, 90, 9, -1,\n9, 90, 17, 9, -1,\n17, 44, 46, 17, -1,\n17, 46, 21, 17, -1,\n21, 46, 48, 21, -1,\n21, 48, 25, 21, -1,\n25, 48, 50, 25, -1,\n25, 50, 27, 25, -1,\n27, 50, 54, 27, -1,\n27, 54, 29, 27, -1,\n79, 10, 12, 79, -1,\n79, 12, 91, 79, -1,\n75, 24, 32, 75, -1,\n75, 32, 77, 75, -1,\n73, 20, 24, 73, -1,\n73, 24, 75, 73, -1,\n71, 16, 20, 71, -1,\n71, 20, 73, 71, -1,\n69, 92, 93, 69, -1,\n69, 93, 71, 69, -1,\n94, 14, 16, 94, -1,\n94, 16, 93, 94, -1,\n91, 12, 14, 91, -1,\n91, 14, 94, 91, -1,\n29, 54, 55, 29, -1,\n29, 55, 31, 29, -1,\n31, 55, 58, 31, -1,\n31, 58, 33, 31, -1,\n33, 58, 60, 33, -1,\n33, 60, 35, 33, -1,\n35, 60, 62, 35, -1,\n35, 62, 37, 35, -1,\n37, 62, 64, 37, -1,\n37, 64, 39, 37, -1,\n39, 64, 66, 39, -1,\n39, 66, 41, 39, -1,\n41, 66, 68, 41, -1,\n41, 68, 40, 41, -1,\n40, 68, 72, 40, -1,\n40, 72, 38, 40, -1,\n74, 36, 38, 74, -1,\n74, 38, 72, 74, -1,\n76, 34, 36, 76, -1,\n76, 36, 74, 76, -1,\n77, 32, 34, 77, -1,\n77, 34, 76, 77, -1,\n88, 95, 89, 88, -1,\n95, 87, 96, 95, -1,\n95, 96, 89, 95, -1,\n87, 86, 97, 87, -1,\n87, 97, 96, 87, -1,\n86, 85, 98, 86, -1,\n86, 98, 97, 86, -1,\n85, 84, 99, 85, -1,\n85, 99, 98, 85, -1,\n84, 83, 100, 84, -1,\n84, 100, 99, 84, -1,\n83, 82, 101, 83, -1,\n83, 101, 100, 83, -1,\n82, 81, 102, 82, -1,\n82, 102, 101, 82, -1,\n81, 80, 103, 81, -1,\n81, 103, 102, 81, -1,\n80, 78, 104, 80, -1,\n80, 104, 103, 80, -1,\n78, 105, 106, 78, -1,\n78, 106, 104, 78, -1,\n105, 79, 91, 105, -1,\n91, 107, 108, 91, -1,\n91, 108, 106, 91, -1,\n107, 94, 109, 107, -1,\n107, 109, 108, 107, -1,\n94, 92, 109, 94, -1,\n69, 42, 89, 69, -1,\n69, 89, 92, 69, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Base\nShape {\nappearance DEF MTR_Base\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 1.000000 0.800000 0.000000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Base\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n10.600000 -4.600000 0.000000,\n-7.200000 -4.600000 0.000000,\n-7.200000 12.400000 0.000000,\n10.600000 -4.600000 0.000000,\n10.600000 -4.600000 0.000000,\n-7.200000 12.400000 0.000000,\n10.600000 12.400000 0.000000,\n10.600000 -4.600000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n4, 5, 6, 4, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Cubotto_1_8\nShape {\nappearance DEF MTR_Cubotto_1\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.470000 0.800000 0.840000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Cubotto_1_8\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n4.300000 1.000000 3.000000,\n3.300000 1.000000 3.000000,\n3.300000 3.400000 3.000000,\n4.300000 3.400000 3.000000,\n3.300000 1.000000 0.000000,\n4.300000 1.000000 0.000000,\n4.300000 3.400000 0.000000,\n3.300000 3.400000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 6, 4, -1,\n4, 6, 7, 4, -1,\n4, 7, 2, 4, -1,\n4, 2, 1, 4, -1,\n7, 6, 3, 7, -1,\n7, 3, 2, 7, -1,\n6, 5, 0, 6, -1,\n6, 0, 3, 6, -1,\n5, 4, 1, 5, -1,\n5, 1, 0, 5, -1\n]}}\n#===========================================\n#Blocco Oggetto 3D\n#DEF Cubotto_1_Blu_9\nShape {\nappearance DEF MTR_Cubotto_1_Blu\nAppearance { \nmaterial Material {\nambientIntensity 0\ndiffuseColor 0.470000 0.800000 0.840000\nspecularColor 0.500000 0.500000 0.500000\nemissiveColor 0.033333 0.033333 0.033333\nshininess 0\ntransparency 0\n}\ntexture ImageTexture {\nurl \"\"\nrepeatS TRUE\nrepeatT TRUE\n}\ntextureTransform TextureTransform {\nrotation 0\nscale 1 1\n}}\ngeometry DEF Cubotto_1_Blu_9\nIndexedFaceSet {\nccw FALSE\nsolid FALSE\n#creaseAngle 1.571\ncoord Coordinate {\npoint [\n1.500000 1.000000 3.000000,\n0.500000 1.000000 3.000000,\n0.500000 3.400000 3.000000,\n1.500000 3.400000 3.000000,\n0.500000 1.000000 0.000000,\n1.500000 1.000000 0.000000,\n1.500000 3.400000 0.000000,\n0.500000 3.400000 0.000000\n ]}\ncoordIndex [\n0, 1, 2, 0, -1,\n0, 2, 3, 0, -1,\n4, 5, 6, 4, -1,\n4, 6, 7, 4, -1,\n4, 7, 2, 4, -1,\n4, 2, 1, 4, -1,\n7, 6, 3, 7, -1,\n7, 3, 2, 7, -1,\n6, 5, 0, 6, -1,\n6, 0, 3, 6, -1,\n5, 4, 1, 5, -1,\n5, 1, 0, 5, -1\n]}}\n```\n\nAnd here is the code of three.js:\n\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <title>three.js webgl - loaders - vrml loader</title>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\n        <style>\n            body {\n                font-family: Lucida Grande;\n                font-size:12px;\n                background-color: #000;\n                color: #fff;\n                margin: 0px;\n                overflow: hidden;\n            }\n            #info {\n                color: #fff;\n                position: absolute;\n                top: 10px;\n                width: 100%;\n                text-align: center;\n                z-index: 100;\n                display:block;\n            }\n            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }\n        </style>\n    </head>\n\n    <body>\n        <div id=\"info\">Test vrml Loader - DCAD optimizer - (c) 2013 Virtual Lab Sas - Virtual Lab Australia Pty Ltd</div>\n\n        <script src=\"../js-r61/build/three.min.js\"></script>\n\n        <script src=\"../js-r61/js/loaders/VRMLLoader.js\"></script>\n\n        <script src=\"../js-r61/js/Detector.js\"></script>\n        <script src=\"../js-r61/js/libs/stats.min.js\"></script>\n\n        <script src=\"../js-r61/js/controls/TrackballControls.js\"></script>\n\n        <script>\n\n            var container, stats;\n\n            var camera, scene, renderer;\n\n            var mouseX = 0, mouseY = 0;\n\n            var windowHalfX = window.innerWidth / 2;\n            var windowHalfY = window.innerHeight / 2;\n            var skyboxMesh;\n\n            init();\n            animate();\n\n// ===============================================\n            function init() {\n\n                container = document.createElement( 'div' );\n                document.body.appendChild( container );\n\n                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 100000 );\n                camera.position.x = 0;\n                camera.position.y = 20;\n                camera.position.z = 4;\n\n                controls = new THREE.TrackballControls( camera );\n\n                controls.rotateSpeed = 2.0;\n                controls.zoomSpeed = 5.0;\n                controls.panSpeed = 0.8;\n\n                controls.noZoom = false;\n                controls.noPan = false;\n\n                controls.staticMoving = false;\n                controls.dynamicDampingFactor = 0.3;\n\n// ===============================================\n                // scene\n\n                scene = new THREE.Scene();\n\n// ===============================================\n// ===============================================\n// Light\n\nvar Light_01 = new THREE.SpotLight();\n\n    Light_01.position.set( -30, 47.5, 10 );\n    Light_01.target.position.set( 0, 0, 0 );\n    Light_01.color.setRGB( 1, 1, 1 );\n\n    Light_01.castShadow = true;\n\n    Light_01.intensity = 1;\n    Light_01.shadowDarkness = 0.6;\n    Light_01.shadowBias = 0.001;\n\n    Light_01.shadowCameraNear = 50;\n    Light_01.shadowCameraFar = 10000;\n        // Light_01.shadowCameraFov = 1000;\n\n    Light_01.shadowMapWidth = 2048;\n    Light_01.shadowMapHeight = 2048;\n\n    Light_01.shadowCameraVisible = true;\n\nscene.add( Light_01 );\n\n// ===============================================\n// ===============================================\n    // load model\n\n         var loader = new THREE.VRMLLoader();\n         loader.addEventListener( 'load', function ( event ) {\n\n          var geometry = event.content;\n\n          var mesh = new THREE.Mesh( geometry );\n\nmesh.castShadow = true;\nmesh.receiveShadow = true;\n\n          scene.add( mesh );\n          scene = event.content;\n\n         } );\n         loader.load( \"models/vrml_models/P02_simple_scene.wrl\" );\n\n// ===============================================\n// ===============================================\n    // Render engine\n\n    renderer = new THREE.WebGLRenderer( { antialias: true } );\n    renderer.setSize( window.innerWidth, window.innerHeight );\n\n    renderer.shadowMapEnabled = true;\n    renderer.shadowMapSoft = true;\n    renderer.shadowMapType = THREE.PCFSoftShadowMap;\n    renderer.shadowMapAutoUpdate = true;\n\n    renderer.setClearColor(0x313131, 1);\n\n                container.appendChild( renderer.domElement );\n                document.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\n                window.addEventListener( 'resize', onWindowResize, false );\n            }\n\n// ===============================================\n            function onWindowResize() {\n\n                windowHalfX = window.innerWidth / 2;\n                windowHalfY = window.innerHeight / 2;\n\n                camera.aspect = window.innerWidth / window.innerHeight;\n                camera.updateProjectionMatrix();\n\n                renderer.setSize( window.innerWidth, window.innerHeight );\n\n            }\n\n// ===============================================\n            function onDocumentMouseMove( event ) {\n\n                mouseX = ( event.clientX - windowHalfX ) / 2;\n                mouseY = ( event.clientY - windowHalfY ) / 2;\n            }\n\n// ===============================================\n            function animate() {\n\n                requestAnimationFrame( animate );\n                render();\n                controls.update();\n\n            }\n\n// ===============================================\n            function render() {\n\n                renderer.render( scene, camera );\n\n            }\n\n// ===============================================\n        </script>\n    </body>\n</html>\n```\n"},{"labels":["enhancement"],"text":"I've been trying to find a good way to extend the MeshLambertMaterial for my own use (essentially augmenting my own shaders with that of Three.JS), but because Three.JS uses the **instanceof** operator inside its core classes, this is extremely hard.\n\nSpecifically, the problem is that you cannot inherit from MeshLambertMaterial and override the vertex and fragment shaders, since they will overriden here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L4072\n\nThus hardcoding the shaders for this material type in a core class. So, the only viable solution would be to make a class that doesn't inherit from MeshLambertMaterial -- which would be ShaderMaterial. However, this means the light-related uniforms will not be properly added:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L4322\n\nIt would be useful to provide a useful means for extending existing shaders; personally, I would go for a more OOP approach that each material has a getShader() function, which can be generalized for the core shaders, and can be overridden if you want to define your own shaders based on that.\n\nOtherwise, perhaps it's an idea to fully embrace pixel shading as demonstrated in various examples and make it a core functionality -- this would allow one to easily combine multiple shaders.\n"},{"labels":["enhancement"],"text":"Loading a big 3d model with three.js always get a big amount of memory (more than 1GB with model less than 30MB), it happens both with Firefox 24/25 and Chrome 29/30 and both by trying with jsonloader or binaryloader. After some reload the browsers crashes...\n\nI've found some old unanswered questions about this argument. \nIs this a bug or how to manage with big models ?\n"},{"labels":["enhancement"],"text":"It would be nice to be able to access collada keyframe animations when loading an scene with sceneLoader\n"},{"labels":["enhancement"],"text":"  Is it possible to do like this\n\nSome build page with checkboxes on needed features or files.\nThat instead of 97 kb of gzipped lib we get about 35 kb.\n\nFor example we need some simple 3D sample and do not want to include so big lib file for site.\n"},{"labels":["enhancement"],"text":"Hi, I'm using three.js for a while, it helps me quite a lot, so first of all thanks mrdoob very much.\n\nIn my case I draw the objects on the webpage by using three.js, on the leftside of the page there should be an thumbnail like the effect in powerpoint, that the stuff I draw on the page should be displayed on the thumbnail synchronously.\n\nMy solution is set a new camera and viewport for the thumbnail, that I draw all the objects in one scene but render it in a different angle and viewport, I know if using webglRenderer I can do that by using the bellowing snippets which I get from \"webgl_multiple_views.html\":\n\nrenderer.setViewport( left, bottom, width, height );\nrenderer.setScissor( left, bottom, width, height );\nrenderer.enableScissorTest ( true );\nrenderer.setClearColor( view.background );\n\nBut I'm using CanvasRenderer for a good compatibility, as WebglRenderer can not be used in IE/iphone/ipad.\n\nI check the source code of CanvasRenderer.js that there are no functions like setViewport() in it, so how can I do that , or is there another way to implement this effect.\n\nvery appreciate for your comments. :)\n"},{"labels":["enhancement"],"text":"I'm trying to load collada models from the sketchup warehouse using ColladaLoader.\nAll the models I've tried are placed on the side.\nIf the model is a house, in three.js, the wall of the house is on the bottom and the floor is on the side.\nIn blender the model loads properly.\n\nModels:\nhttp://sketchup.google.com/3dwarehouse/details?mid=49a423c40492ca6b594b9b45f44f5e21&prevstart=0\nhttp://sketchup.google.com/3dwarehouse/details?mid=d218e86bdbc5ab2b972ec726e7a08cca&prevstart=0\n\nThe first model also cause a warning in the console:\nCan not convert Transform of type lookat\n\nThanks\n"},{"labels":["enhancement"],"text":"Looking at the [frustum intersect methods](https://github.com/mrdoob/three.js/blob/master/src/math/Frustum.js) it looks like it suffers from the problems described in [iq's article](http://iquilezles.org/www/articles/frustumcorrect/frustumcorrect.htm)\n"},{"labels":["enhancement"],"text":"I use morphing geometry in my project (built-in and custom geometries).\n\nThere was a <b>Index0AttributeName</b> added in r61, but as mentioned in issue, it was added only for ShaderMaterial. So my custom geometry morphing is OK but for built-in (sphere, cube, etc) there is a beforementioned <b>PERFORMANCE WARNING: Attribute 0 is disabled</b> warning in chromium browser and perfomance fail in firefox. (It's OK if Index0AttributeName is set to 'position' in THREE.Material by force)\nMay be there is a sence to assign and empty string <b>Index0AttributeName = ''\"</b> in THREE.Material and leave it to default <b>Index0AttributeName = ''position\"</b> in THREE.ShaderMaterial?\nThen we only need to check in renderer if a user want to assign an named attribute to location 0 and on emtpy string leave it as it is.\n"},{"labels":["enhancement"],"text":"I made a model of the skin and made the animation in cinema 4d, and then kept in .dae (1.4) and .dae (1.5), 1.5 is not what will not work, 1.4 imports the model normally without errors, but it is worth making the skin and the animation begins to swear.\n\nModel in Cinema 4D with animation ![scrin](http://sl-cms.com/i/korner-2013/71bc5d2a77e86502bbd53f799c72.png)\n\nswears on ![scrin](http://sl-cms.com/i/korner-2013/13ebbaa173e1ecfb7c43c27184a2.png)\n\nThe code itself \n\n``` javascript\nvar loader = new THREE.ColladaLoader();\nloader.load( './models/collada/test6.dae', function ( collada ) {\n\n} );\n```\n\nCan I still somehow a way to import mesh animation in thress.js?\n"},{"labels":["enhancement"],"text":"It appears that mrdoob even completed the work in the comments https://github.com/mrdoob/three.js/pull/2084 , but the pull was closed and I can't seem to find the issue anywhere.\n\nJquery has very good node / amd loader support nowadays and may be worth a look (see the bottom of http://code.jquery.com/jquery-1.10.2.js )\n"},{"labels":["enhancement"],"text":"Our application automatically garbage collects textures, geometries, and materials by periodically recursing the scene tree and marking resources for disposal which been removed from the scene. Unfortunately, this has a single drawback:\n\nIt's very difficult to tell when a resource has been sent to the GPU, and can potentially be missed by our garbage collector if added to scene, rendered, and then removed before the collector has a chance to run.\n\nWould it be possible to get a callback added to WebGLRenderer which is called whenever a Texture, Material, Geometry, RenderTarget is dispatched to the GPU? At the moment, we are using a very hacky solution which detects when the 'dispose' listener is created.\n"},{"labels":["enhancement"],"text":"I'm using R61 on Windows in Firefox 23.0.1.\n\nWhen describing this material for a ParticleSystem\n\n``` javascript\nvar sprite = THREE.ImageUtils.loadTexture( \"textures/ball.png\" );\nvar material = new THREE.ParticleBasicMaterial({ \n                vertexColors: true,\n                size: 2, \n                map: sprite, \n                transparent: true, \n                sizeAttenuation: true, \n                alphaTest : 0.5\n            });\n```\n\nand cloning it to a second ParticleSystem (for a second scene), I get this error in the console\n\n```\nError: WebGL: bindTexture: object from different WebGL context (or older generation of this one) passed as argument @ threeR61.js:25522\n```\n\nSearching a bit in the code, I found this in the `ParticleBasicMaterial.clone()` function \n\n``` javascript\n material.map = this.map; \n```\n\nThe texture is only referenced and not cloned to the new material. This should be changed.\n"},{"labels":["enhancement"],"text":""},{"labels":["enhancement"],"text":"It seems like `THREE.EffectsComposer` is dependent on `THREE.MaskPass`. Should it be that way? `THREE.CopyPass` is required and when leaving it out `THREE.EffectsComposer` throws a nice warning in the console. But not when leaving out `THREE.MaskPass`. Instead it throws an \n\n_Unaught TypeError: Expecting a function in instanceof check, but got #<Object> EffectComposer.js:91_\n"},{"labels":["enhancement"],"text":"As requested in #3789, would be nice to get some notification when `JSONLoader` finishes loading textures too.\n"},{"labels":["enhancement"],"text":"I've tried everything, but don't get any intersections with raycaster.intersectObjects for THREE.Ribbon class. I've already created faces, facenormals, centroids and still nothing. Is it intended to work for THREE.Ribbon?\n"},{"labels":["enhancement"],"text":"The change below while allowing drawing the entire buffer, doesn't allow the use of an offsets array for drawing parts of the buffer if there isn't an index attribute.\n\nhttps://github.com/benaadams/three.js/commit/8874516ec257f1782adfb7276a557973ab0d928d\n\nThe request is that if buffergeometry.offsets exists, to respect those even if there is no index attribute.\n"},{"labels":["enhancement"],"text":"Following the discussion about the user defined clip plane (#647), I created a 'class' for the mirror objects that would really simplify their usage.\n\nHere are a few examples:\n1. a simple scene with only one mirror (relevant lines are 60-63 and 139): http://jsfiddle.net/PT32b/7/ \n2. the same scene, but with a second mirror. Note the usage of the `renderWithMirror` method (line 142-143), to correctly render a mirror into another one. Currently, only one additional mirror can be rendered inside a mirror (it would probably possible to have more than one by changing the code, but that would be too slow...): http://jsfiddle.net/PT32b/5/\n3. With this method, an infinite mirrors effect is possible, but with some glitches. Only the first 2 reflections are \"true\" reflections. The other ones are from the previous rendered frames and are not completely accurate: http://jsfiddle.net/PT32b/6/\n4. Finally, the first scene with a third mirror. Because of the two mirror limitation, the reflection of the cut sphere is not correctly rendered in the other mirrors: http://jsfiddle.net/PT32b/8/\n\nNote that you don't have to use the FlatMirror.material member as material, you can also directly use the FlatMirror texture in your own shader, as long as you use the correct uniforms (I'll try to make an example of that later).\n\nYou can look at the code of the class here: https://code.google.com/p/mirror-three-js/source/browse/FlatMirror.js\n\nBefore submitting a pull request, I'd like some suggestions though.\n\nAs it is now, you have to create a mirror like this: `myMirror = new THREE.FlatMirror(...)` by passing the renderer and the camera as parameters.\nThen you have to add the mirror to the scene, and assign the mirror.material member to a Mesh.\nAnd finally, in your update/render loop, you just call `myMirror.render()` before your main render call. The scene that is rendered in the mirror is the scene the mirror belongs to. Is it a good idea? Maybe I should try to stay consistent with the render() method of THREE.WebGLRenderer, so passing the scene (and the camera?) when rendering the mirror?\n\nAnother question: I've added the required uniforms and shaders in the same .js file as the FlatMirror class. Can this stay like that, or should this part separated and added to WebGLShaders.js (not sure about that, since it's an add-on ) or FlatMirrorShaders.js maybe?\n\nFinally, where would be the best place for FlatMirror.js? I would put it into src\\extras\\objects. Would that be ok? Another location?\n\nI still have a few optimizations to do on the code, so if you have any suggestions/comments about it, I'd be glad to hear them.\n"},{"labels":["enhancement"],"text":"The SceneLoader doesnt consider upVector and target of cameras:\n\n\"MyCamera\":{\n\"aspect\":1.72741,\n\"far\":2000,\n\"fov\":45,\n\"near\":2,\n\"position\":[-36.0155,-51.3074,23.0647],\n\"target\":[-14.8822,-20.7802,14.5403],\n\"type\":\"PerspectiveCamera\"\n},\n\ncamera.up and camera.target have to be set afterwards, manually.\n"},{"labels":["enhancement"],"text":"I am using three.js for robotic motion control and building toolpaths with THREE.Paths. Carries over nicely.\n\nOne odd thing, text comes out upside down: https://cloudup.com/cQGJLpToRTn\n\nI can deal with this by post-processing and adjusting every y to getBoundingBox().maxY - y\n\nThis won't carry over well for non-linear curves though, and I want to preserve the curves. Any tips to get around this?\n\n```\n    var paths = three.FontUtils.drawText(text).paths;\n    paths.forEach(this._strokePath, this);\n```\n\n_strokePath looks at path.actions and does motion control with them.\n"},{"labels":["enhancement"],"text":"Hi @mrdoob, i would like to know how it is possibile to move and rotate bones using CanvasRenderer.\nI started with the  webgl_animation_skinning example, which contains the buffalos.\nI reduced the number of the buffalos to just one, in this way i can view easily the results of my actions.\n\nTo move the position of bones i use:\n<b>buffalos[0].bones[2].position.y=100</b>\nThis with WebGLRenderer works fine and move the head of buffalo, but in CanvasRenderer nothing happens.\n\nTo rotate the bones i use:\n<b>var q=new THREE.Quaternion;\nq.setFromAxisAngle(new THREE.Vector3(0,1,0), 10);\nbuffalos[0].bones[2].quaternion.multiply(q);</b>\nIn WebGLRenderer the head rotate correctly on the Y axis while in CanvasRenderer again nothing happens.\n\nThere is some other actions to make before it work properly also with CanvasRenderer?\nThanks in advance.\nSimone\n"},{"labels":["enhancement"],"text":"I use the converter to convert monster.dae to .js. While I export texture information and parse it with three.js. That will occur error on \"embeds\" and \"materials\" tags, and materials format needs to be an array. After I modify the three.js source code to support it, the monster texture coordinate is still wrong... \n![monster](https://f.cloud.github.com/assets/1263177/1022623/ed9a7a76-0d9e-11e3-8fe1-d7a29532de1d.jpg)\n"},{"labels":["enhancement"],"text":"Hi everybody, I was just trying to use the editor with other browser, just like safari and firefox, and I've noticed that something doesn't work. The first thing is that in safari you have event.layerX and event.layerY broken and deprecated, so that mouse event listeners don't work while clicking on the background (if I add an object and select it, i can click and drag it back and forth); the other thing is that either in safari or in firefox there are no color bars in the sidebar panels, but just the name of the colors ( you can modify it, but it's pretty unhandy). Everything is shown in the two picture.\n![schermata 2013-08-25 alle 11 48 20](https://f.cloud.github.com/assets/5080119/1022258/dce525f2-0d74-11e3-9b03-db9a94ea6441.png)\n![schermata 2013-08-25 alle 11 48 37](https://f.cloud.github.com/assets/5080119/1022259/df916270-0d74-11e3-8829-2cda123a9c49.png)\n![schermata 2013-08-25 alle 12 25 39](https://f.cloud.github.com/assets/5080119/1022294/2e5b46e2-0d79-11e3-9ca5-2a8ca83956a9.png)\n"},{"labels":["enhancement"],"text":"This is my understanding based on this [part of the code](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L4977).\n\nmaybe it should be there for completness. \n"},{"labels":["enhancement"],"text":"I'm in my way through the development of an online, ortographic, 2d sprite-based game with my team. Unfortunately, in order for it to work I need to be able to sort my sprites (THREE.Sprite) using a custom renderDepth. This feature is not available for them, so we had to use planes instead - which makes our fps drop by a factor of 2+.\n\nIt would be really nice if Three.js allowed for sorting of sprites too based on the .renderDepth attribute.\n"},{"labels":["enhancement"],"text":"[1] Create a mesh with MeshFaceMaterial material\n\n```\nvar material = new MeshFaceMaterial( someMaterialArray );\n\nvar mesh = new THREE.Mesh( someGeo.clone(), material.clone() );\nscene.add( mesh );\n```\n\n[2] Create other mesh\n\n```\nvar meshClone = new THREE.Mesh( someGeo.clone(), material.clone() );\nscene.add( meshClone );\n```\n\n[3] Than deallocate & remove first mesh with it material, second mesh [meshClone] looses it`s material & webGL renderer sends an error of program undefined.\n\nIt`s cause of arr.splice(0) in clone method, which does not clone the submaterials objects. But I suppose clone method means parent & cloned materials are fully independent.\n\nI prepared working solution for clone method:\n\n```\nTHREE.MeshFaceMaterial.prototype.clone = function() {\n\n  var materialList = [];\n\n  for ( var i = 0; i < this.materials.length; i++ ) {\n\n    materialList.push( this.materials[ i ].clone() );\n\n  }\n\n  var material = new THREE.MeshFaceMaterial( materialList );\n\n  return material;\n\n};\n```\n\nSo main question it`s an issue of cloning or feature ?\n"},{"labels":["enhancement"],"text":"As reported in #3779.\nShouldn't be hard to implement. It would be good to remove `Geometry` eventually and remove all this duplication.\n"},{"labels":["enhancement"],"text":"geometry.computeBoundingBox() computes the box on the un-morphed geometry.vertices\n\nhow do you compute the bounding box of a morphed geometry? \n"},{"labels":["enhancement"],"text":"THREE.MaterialLoader.parse should contain\n\nif ( json.map ) {           //custom addition\n            var map = THREE.ImageUtils.loadTexture( json.map );\n            material.map = map;\n            //material.needsUpdate = true;\n            //material.map.needsUpdate = true;\n            //material.buffersNeedUpdate = true;\n            //material.uvsNeedUpdate = true;\n        }\n"},{"labels":["enhancement"],"text":"Hi,\nsorry for the earlier post (didn't read well the guidlines).\n\nTrackballControlls works really great with mobile gestures, but could it also include the 2 finger rotation? \nIf I have an object (like a plane) that displays text, or any other object that actually has an orientation, then the normal reaction that one does (when this object is upside down) is trying to rotate it using 2 fingers. \n"},{"labels":["enhancement"],"text":"Is there a way to define different sizes for each axis with the AxisHelper object?\n\nLike:\n\n```\nAxixHelper( {x: 100, y: 50, z: 20 });\n```\n\nAnd maybe a possibility to show planes between the axes lines?\n"},{"labels":["enhancement"],"text":"Love the new NURBs functionality that was recently added (https://github.com/mrdoob/three.js/pull/339).\n\nOne very nice feature would be to add NURBs trimming:\n\n![il_nurbs_surf_trim](https://f.cloud.github.com/assets/3970436/925663/1fdcc1c8-ff7c-11e2-9420-db2fc148efc5.jpg)\n\nI'm completely new to NURBs but I'm trying to learn about them as quickly as possible. Trimming would be a really excellent feature, especially since many of the pro CAD products currently have it baked in.\n\nDoes anyone have experience with this? \n"},{"labels":["enhancement"],"text":"I ran into some errors in ie9 because of Float32Array not being supported on a few lines in three.js\n\nSee here:\n\nhttp://msdn.microsoft.com/en-us/library/ie/br212916(v=vs.94).aspx\n\nSupported in the following document modes: Internet Explorer 10 standards and Internet Explorer 11 standards. Also supported in Windows Store apps. See Version Information. Not supported in the following document modes: Quirks, Internet Explorer 6 standards, Internet Explorer 7 standards, Internet Explorer 8 standards, Internet Explorer 9 standards\n\nI changed the code to this where affected \n\n``` javascript\ntry {\n    this.elements = new Float32Array( 16 );\n    } catch(x){\n    this.elements  = new Array;\n}\n```\n\nand also this\n\n``` javascript\ntry {\n\nthis.elements.set( m.elements );\n\n} catch(x){\n        this.elements  = m.elements;\n}\n```\n\nSeems to work OK now, but wanted to check if this is right or is there a better solution? \n"},{"labels":["enhancement"],"text":"Is this intentional?\n\n``` javascript\nTHREE.Sphere.prototype = {\n\n    constructor: THREE.Sphere,\n\n    set: function ( center, radius ) {\n\n        this.center.copy( center );\n        this.radius = radius;\n\n        return this;\n    },\n\n    setFromPoints: function ( points ) {\n\n        var radiusSq, maxRadiusSq = 0;\n\n        for ( var i = 0, il = points.length; i < il; i ++ ) {\n\n            radiusSq = points[ i ].lengthSq();\n            maxRadiusSq = Math.max( maxRadiusSq, radiusSq );\n\n        }\n\n        this.center.set( 0, 0, 0 );\n        this.radius = Math.sqrt( maxRadiusSq );\n\n        return this;\n\n    }\n}\n```\n\ncenter is never calculated?\n"},{"labels":["enhancement"],"text":"One of the things I'm trying to do on this cycle is to move stuff over to `BufferGeometry` land. I've been studying the structure that it's currently setup and trying to see how to make it a bit more user friendly. I think `BufferGeometry` is fine as it is, for people that want to build their own attributes/shaders and so on.\n\nHere's my first take on trying to combine the user friendliness of `Geometry` plus the efficiency of `BufferGeometry`:\n\n``` javascript\nTHREE.TypedVector2 = function ( array, offset ) {\n\n    this.array = array;\n    this.offset = offset * 2;\n\n};\n\nTHREE.TypedVector2.prototype = {\n\n    constructor: THREE.TypedVector3,\n\n    get x () {\n\n        return this.array[ this.offset ];\n\n    },\n\n    set x ( value ) {\n\n        this.array[ this.offset ] = value;\n\n    },\n\n    get y () {\n\n        return this.array[ this.offset + 1 ];\n\n    },\n\n    set y ( value ) {\n\n        this.array[ this.offset + 1 ] = value;\n\n    },\n\n    set: function ( x, y ) {\n\n        this.array[ this.offset ] = x;\n        this.array[ this.offset + 1 ] = y;\n        return this;\n\n    }\n\n};\n\nTHREE.TypedVector3 = function ( array, offset ) {\n\n    this.array = array;\n    this.offset = offset * 3;\n\n};\n\nTHREE.TypedVector3.prototype = {\n\n    constructor: THREE.TypedVector3,\n\n    get x () {\n\n        return this.array[ this.offset ];\n\n    },\n\n    set x ( value ) {\n\n        this.array[ this.offset ] = value;\n\n    },\n\n    get y () {\n\n        return this.array[ this.offset + 1 ];\n\n    },\n\n    set y ( value ) {\n\n        this.array[ this.offset + 1 ] = value;\n\n    },\n\n    get z () {\n\n        return this.array[ this.offset + 2 ];\n\n    },\n\n    set z ( value ) {\n\n        this.array[ this.offset + 2 ] = value;\n\n    },\n\n    set: function ( x, y, z ) {\n\n        this.array[ this.offset ] = x;\n        this.array[ this.offset + 1 ] = y;\n        this.array[ this.offset + 2 ] = z;\n        return this;\n\n    }\n\n};\n\nTHREE.TypedFace = function ( positions, normals, uvs, offset ) {\n\n    this.positions = positions;\n    this.normals = normals;\n    this.uvs = uvs;\n    this.offset = offset * 3;\n\n};\n\nTHREE.TypedFace.prototype = {\n\n    constructor: THREE.TypedFace,\n\n    vertex: function ( index ) {\n\n        return new THREE.TypedVector3( this.positions, this.offset + index );\n\n    },\n\n    normal: function ( index ) {\n\n        return new THREE.TypedVector3( this.normals, this.offset + index );\n\n    },\n\n    uv: function ( index ) {\n\n        return new THREE.TypedVector2( this.uvs, this.offset + index );\n\n    }\n\n}\n\n\nTHREE.TypedGeometry = function ( size ) {\n\n    this.id = THREE.GeometryIdCount ++;\n    this.uuid = THREE.Math.generateUUID();\n\n    this.name = '';\n\n    this.positions = new Float32Array( size * 3 * 3 );\n    this.normals = new Float32Array( size * 3 * 3 );\n    this.uvs = new Float32Array( size * 3 * 2 );\n\n    this.boundingBox = null;\n    this.boundingSphere = null;\n\n};\n\nTHREE.TypedGeometry.prototype = {\n\n    constructor: THREE.TypedGeometry,\n\n    face: function ( index ) {\n\n        return new THREE.TypedFace( this.positions, this.normals, this.uvs, index );\n\n    },\n\n    dispose: function () {\n\n        this.dispatchEvent( { type: 'dispose' } );\n\n    }\n\n};\n\nTHREE.EventDispatcher.prototype.apply( THREE.TypedGeometry.prototype );\n```\n\nThe idea would be that geometry generators and loaders would generate these by writing into the buffers directly.\n\nBut, if the user ever wanted to touch the geometry, this is how the API usage would look like:\n\n``` javascript\nvar geometry = new THREE.TypedGeometry( 100 );\ngeometry.face( 0 ).vertex( 0 ).x ++;\ngeometry.face( 0 ).vertex( 0 ).y = 10;\ngeometry.face( 0 ).vertex( 0 ).set( 10, 10, 10 );\n\nvar face = geometry.face( 0 );\nvar vertex = face.vertex( 0 );\nvertex.x = 10;\n```\n\nDoes anyone have any thoughts?\n"},{"labels":["enhancement"],"text":"Hi guys,\n\nI wanted to try and contribute to Three.js and this thread is for discussing about the stuff i wrote.\n\nThe questions that are open: \n1) Do you want to use this functionality or do you think three.js needs it?\n2) What do you think of my algorithm. I was hoping for some guys to check the functions and maybe try to optimize the functionalty in case question 1) is \"yes\" ;) \n\n---\n\nWhat i caught missing in THree.js is the functionality to smooth dynamically generated geometries based on an angle. (like in 3dsMax for example)\nIf the angle between two face normals is smaller than 'angle' the faces get smothed and the vertex normal accounts for that smoothing.\n\nI forked the three.js repository and created a new branch.\n\nI provide an example in my github fork:\nhttps://github.com/GuyGood/three.js/blob/AngleBasedSmoothing/examples/webgl_geometry_smoothing.html\n\nThe example compares an extruded geometry with bevel applied. \nleft: unsmoothed as is, middle: my angle based smoothing, 25°, right: computeVertexNormals(true)\nhttp://img109.imageshack.us/img109/3081/v0jc.png\n\nAs I put all my code into Three.GeometryUtils without rebuilding, my example directly uses GeometryUtils.js script. \n## New stuff to GeometryUtils briefly explained: \n\nSo, i added the function \"calculateVertexNormals\"  (should then be renamed to sth else).\nIt firsts creates new vector3 objects for every vertexNormal for every face of the mesh. (just for having everything at zero).\n\nIt then fills an array 'adjacentNormals' with objects so that it contains a face and the vertexNormal, and an empty array for the smoothingGroup stuffs for later on. \n\nthen there is the helper method _sortAdjacentFaces. This is because what i am going to do is iterate over all vertices and check all faces connected to one vertex , so to say in a circular manner. And if i don't sort the array beforehand, i would compare faces, connected to the vertex that do NOT share one edge, which would be no good. As a side note, the last iteration compares the last and first face of the vertex in question. \n\nAfter sorting,  the algorithm gets  the angle between the faces and checks if it is <= the user defined angle. if it is, it will generate 'smoothing groups' . These groups are local to each vertex and do not work like in 3dsMax for example. They are just for knowing which facenormal from which face to take into account for the vertex normal calculation. \n\nAfter having calculated the groups and based on them, the vertexNormal is calculated using the helper function: '_calculateVectorSumsForSmoothingGroups'\n\nThis function is much like the \"computeVertexNormal\" from geometries but is always area weighted, so normals are accumulated but not normalized within there.\n\nFinally, normalize the vertex normals and we are done. \n\n---\n\nI hope i could explain some of the stuff and maybe you like the general idea. I am just proposing some code for review because although it works, there are for sure 2-3 small issues and maybe it can be greatly optimized.\np.s. i know the code is for sure not nice to read but i hope you like the feature anyway and want to have a discussion about it. \n\nThanks in Advance\n"},{"labels":["enhancement"],"text":"I know that right now the ColladaLoader is not a \"core\" part of Three.js, but sort of a separate extension. Nonetheless, COLLADA is a really popular format for model/animation/etc storage and one that I'm using extensively in my current project. I need to be able to load COLLADA models into the Node.js-based server which is also using Three.js for maintaining the server's interpretation of the current 3D scene of the game world. This most likely falls under a feature request, but I wanted to submit it as the hurdles I've run into in attempting to modify the existing ColladaLoader object are primarily with regard to the XML parsing/xpath limitations of Node.js. I've tried several of the xpath/DOMParser extensions from NPM and none of them seem to follow the W3 standards precisely enough to allow the existing parser to work.\n"},{"labels":["enhancement"],"text":"I'm writing a sequence with an exploding screen effect: it goes seemlessly from a zoomed-in texture with visible pixels to a 70*70 wall of independently-rotating cubes (or voxels).\n(http://www.beuc.net/demo-ghm/v2/ for the proof-of-concept)\n\nTo improve the performance, notably to avoid calling drawElements ~5000 times per frame:\n- not using a simple merged geometry since voxels rotate independently\n- not using a particules system since it's voxels, not billboards\n- so using a merged geometry with a shader material and a custom face attribute defining the transformation matrix to apply to that face (aka \"3D particules system\")\n\nSadly, after a solid hour of wondering why my matrix gets empty, it looks:\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L847\nlike m4 custom attributes are silently not supported.\n\nHow about allowing them? :)\n"},{"labels":["enhancement"],"text":"Is it possible yet to instance a mesh so as to apply just transform and lighting updates? \n\nP.s. well done on getting mentioned by Microsoft themselves on the IE11 preview: http://msdn.microsoft.com/en-us/library/ie/bg182648%28v=vs.85%29.aspx\n"},{"labels":["enhancement"],"text":"`OculusRiftEffect` appears to rely on `camera.matrix` being set correctly. `PointerLockControls` sets `camera.matrixWorld`, but not `camera.matrix`.\n"},{"labels":["enhancement"],"text":"Loading a blender scene with the THREE.SceneLoader.\nCheck it out here\nhttp://inkfood.com/content/pages/spacedebris/\n\nAs you can see it loads all the textures twice. Is it a bug or my fault?\n![bildschirmfoto 2013-06-27 um 18 31 50](https://f.cloud.github.com/assets/4646574/717279/e76c63c8-df48-11e2-985c-1ccf28761d33.png)\n"},{"labels":["enhancement"],"text":"IE11 supports WebGL, \nsome demos work perfect others not at all.\n\nSome fully working demos:\nhttp://mrdoob.github.io/three.js/examples/webgl_animation_skinning.html\nhttp://mrdoob.github.io/three.js/examples/webgl_buffergeometry_lines.html\nhttp://mrdoob.github.io/three.js/examples/webgl_geometry_minecraft_ao.html\nhttp://mrdoob.github.io/three.js/examples/webgl_materials_cubemap_refraction.html\n\nMost demos with multi-polygon subjects just display a black sceen.\n\nThis demo:\nhttp://mrdoob.github.io/three.js/examples/webgl_shader2.html\n\nJust displays the top two cubes.\n\nThought I would add this issue for reference.\n"},{"labels":["enhancement"],"text":"I am using cinema 4D as my 3D modeling software but when i export my model as .obj or .dae it losses its color when view on web browser. Or is there any way to export my 3D model to json file in Cinema 4D? Any help? Thanks\n"},{"labels":["enhancement"],"text":"I am currently working on a project, using three.js / blender scene export.\nUnfortunately lights are not readily implemented. I am thinking about doing it myself.\nWhat are your plans right now? Would you like to see patches? Are you working on it yourself?\n"},{"labels":["enhancement"],"text":"I noticed that `dispose()` wasn't cleaning up my geometry anymore (using the WebGL Inspector) and it looks like `deallocateGeometry()` is expecting the buffers to be directly on the `geometry` instead of off the `geometryGroups` property (which seems to be the case). So I'm not sure if my fix is correct but I changed it to this:\n\n``` javascript\nvar deallocateGeometry = function ( geometry ) {\n\n        geometry.__webglInit = undefined;\n\n        function cleanBuffers( buffers ) {\n            if ( buffers.__webglVertexBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglVertexBuffer );\n            if ( buffers.__webglNormalBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglNormalBuffer );\n            if ( buffers.__webglTangentBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglTangentBuffer );\n            if ( buffers.__webglColorBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglColorBuffer );\n            if ( buffers.__webglUVBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglUVBuffer );\n            if ( buffers.__webglUV2Buffer !== undefined ) _gl.deleteBuffer( buffers.__webglUV2Buffer );\n\n            if ( buffers.__webglSkinIndicesBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglSkinIndicesBuffer );\n            if ( buffers.__webglSkinWeightsBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglSkinWeightsBuffer );\n\n            if ( buffers.__webglFaceBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglFaceBuffer );\n            if ( buffers.__webglLineBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglLineBuffer );\n\n            if ( buffers.__webglLineDistanceBuffer !== undefined ) _gl.deleteBuffer( buffers.__webglLineDistanceBuffer );\n        }\n\n        cleanBuffers( geometry );\n\n        // geometry groups\n        if ( geometry.geometryGroups !== undefined ) {\n            for ( var g in geometry.geometryGroups ) {\n                var geometryGroup = geometry.geometryGroups[ g ];\n                cleanBuffers( geometryGroup );\n                if ( geometryGroup.numMorphTargets !== undefined ) {\n                    for ( var m = 0, ml = geometryGroup.numMorphTargets; m < ml; m ++ ) {\n                        _gl.deleteBuffer( geometryGroup.__webglMorphTargetsBuffers[ m ] );\n                    }\n                }\n                if ( geometryGroup.numMorphNormals !== undefined ) {\n                    for ( var m = 0, ml = geometryGroup.numMorphNormals; m < ml; m ++ ) {\n                        _gl.deleteBuffer( geometryGroup.__webglMorphNormalsBuffers[ m ] );\n                    }\n                }\n                deleteCustomAttributesBuffers( geometryGroup );\n            }\n        }\n        deleteCustomAttributesBuffers( geometry );\n    };\n```\n\nDoes that seem reasonable?  I'm not sure if we need the first call to cleanBuffers anymore.\n"},{"labels":["enhancement"],"text":"I'm trying to draw lines using THREE.LinePieces and a buffergeometry. Three.js ignores this however and draws THREE.LineStrip instead. \nIt can be reproduced by changing line 112 in webgl_buffergeometry_lines.html from the examples to:\nmesh = new THREE.Line( geometry, material,THREE.LinePieces  );\n\nI also changed line 67 to: var segments = 10; \n"},{"labels":["enhancement"],"text":"The actual blender exporter doesn't export the lights properly. The exporter script search for lights but i think in blender they called lamps. So it can't find anything and exports always the default_lamp provided from the export script.\nAlso for the next update i hope the object parent/child relationship is also integrated to the script.\n\nThank you for your great work\n"},{"labels":["enhancement"],"text":"As pointed out in [this](http://stackoverflow.com/questions/16976365/two-meshes-same-texture-different-offset) stackoverflow question, `.offset` and `.repeat` are properties of a texture, not a material.\n\nSuppose, for example, a user wants to share a spritesheet across multiple materials. Currently that is not possible, since `offset` is a property of the texture, and can only be set once.\n\nAlso, making `offset` a property of a material would avoid the \"uv repeat and offset setting priorities\" in `WebGLRenderer`.\n\n```\n    // uv repeat and offset setting priorities\n    //  1. color map\n    //  2. specular map\n    //  3. normal map\n    //  4. bump map\n```\n\nThis code logic forces all the texture offsets/repeats to be the same, anyway.\n\nShould `.offset` and `.repeat` be properties of a material instead?\n"},{"labels":["enhancement"],"text":"I'm developing with the tQuery framework and, due to some integrity checks, I noticed that [THREE.MeshFaceMaterial](https://github.com/mrdoob/three.js/blob/master/src/materials/MeshFaceMaterial.js) does not inherit from THREE.Material prototype.\n\nIs it an intended behaviour?\n\nIn some cases it could be useful, in order to easily check wether something is a material or not through `instanceof` (like [here](https://github.com/jeromeetienne/tquery/blob/master/js/tquery.core.create.js#L146)).\n\nCould the following code be useful?\n\n``` javascript\nTHREE.MeshFaceMaterial.prototype = Object.create( THREE.Material.prototype );\n```\n\nI already opened an issue [here](https://github.com/jeromeetienne/tquery/issues/296#issuecomment-18861971) but it turned out it is a three.js issue, could you please let me know if you're planning to do something about this?\n\nThank you in advance.\n"},{"labels":["enhancement"],"text":"THREE.SkinnedMesh currently does not work with THREE.BufferGeometry geometries. In [THREE.SkinnedMesh.prototype.pose](https://github.com/mrdoob/three.js/blob/b062fee8668c1fc07e4d6af40ccfa592a7c4c677/src/objects/SkinnedMesh.js#L219), the mesh assumes `geometry.skinIndices` exists and goes on normalizing elements of that array. Skipping this part if there is no such array (assuming buffer geometry skinning data is already normalized) makes SkinnedMesh work with BufferGeometry.\n\nHowever, there is a problem if the skinned mesh consists of multiple materials: THREE.BufferGeometry does not work with THREE.MeshFaceMaterial. One could\n- Split the original mesh into multiple meshes, each with its own BufferGeometry. However, each mesh would then have to duplicate the skeleton bones and play back its own animation.\n- Make THREE.BufferGeometry somehow work with THREE.MeshFaceMaterial, maybe with each chunk having its own material. I have no idea how to do this.\n- Move the skeleton/bones code from SkinnedMesh into a separate THREE.Skeleton class and share that skeleton among meshes. I would prefer this, but maybe it's too complex to use.\n\nAre there any plans for or opinions on one of the above ideas?\n"},{"labels":["enhancement"],"text":"Are there plans to add hierarchical view culling in three.js? Specifically would each Object3D parent have its own bounding sphere for all child Object3D objects. Digging in the three.js code it appears only the bounding sphere of the geometry on a Mesh is checked.\n\nI have an app that requires deep zooms and level of detail changes with an exceptionally large number of Mesh objects. Currently I am hacking a hierarchical cull by doing my own bounding sphere calculation and culling by removing children from Object3D. I also use  mesh.frustumCulled = false to disable the default bounding sphere cull.\n\nHere is a sample of what I'm building.\nhttps://www.evernote.com/shard/s43/sh/5fb37faf-6b71-4049-97b8-8c041251e7d1/220232188045cef57bacd3e243380500\n\nPS: originally posted to stackoverflow and [WestLangley](http://stackoverflow.com/users/1461008/westlangley) directed me here. Thanks West.\n"},{"labels":["enhancement"],"text":"It is currently impossible to only render front faces of an ExtrudeGeometry.\n\nSetting the side property of the attached material has no effect because it's the geometry itself that generates faces front/back faces couples.\n\nA common use case is to create a flat TextGeometry (which inherits from ExtrudeGeometry) where the back faces are not needed.\n\nThis new lid option could have multiple values :\n-  'double', by default to respect the current behavior\n-  'front'\n-  'back'\n-  'none', could be useful to only rendering the bevel faces.\n\nThanks.\n"},{"labels":["enhancement"],"text":"As discussed over #3483 we currently have a problem with `DirectionalLight` as it's acting as two types of light at once.\n\nOriginally `DirectionalLight` was the simplest light with applied to all the objects in the same direction regardless of it's transformation.\n\nHowever, shadowmapping was added to it and it converted the light in something like the target-dependant `SpotLight` but with a orthographic camera for the shadow.\n\nI believe in 3DSMax calls them `Direct Light` and `Spot Light` so I guess the problem is that we lost the type of light.\n\nA solution would be adding some extra parameters to `SpotLight` so it could use a orthographic camera too.\n\nDoes anyone have any other suggestions?\n"},{"labels":["enhancement"],"text":"In an environment with a lot of animations, the AnimationHandler library can accumulate a bunch of old animations, with no way to clear them (aside from overwriting them, which results in an annoying console warning).\n\nThere is also no way to check the existence of an animation in the library without simply calling get(), which also results in a console warning if the animation does not exist.\n"},{"labels":["enhancement"],"text":"Hello Three.js\n\nWe are doing data visualization using Three.js r58 with Particle system to handle Large Number of Points in 3D but we've found that raycasting is not there for Particle system. But we saw old examples that works fine.\n\nOn the look of raycastor's source theres no support for particlesystems.\n\nIs that planned to add back in future versions? Or is they a way to do that in current version? Please help..\n"},{"labels":["enhancement",null],"text":"I'm writing an offline app that uses the FileSystem API for storing objects and textures, and in order to do that I have to change the material file name to a blob url, but it seems JSONLoader doesn't support absolute paths? \n\nI got around this by adding these lines to Three.js at line 9451:\n\n```\n...\nvar fullPath = texturePath + \"/\" + sourceFile;\n\n// Check for absolute URLs\nif (sourceFile.indexOf(\":\") != -1)\n    fullPath = sourceFile;\n\nif ( isCompressed ) {\n...\n```\n\nAfter that it works perfectly. Is there a better way of checking if a string is an absolute path?\n"},{"labels":["enhancement"],"text":"C:\\Python33>python convert_obj_three.py -i remorque.obj\n  File \"convert_obj_three.py\", line 781\n    print \"WARNING: skipping morph [%s] with different number of vertices [%d] t\nhan the original model [%d]\" % (name, n_morph_vertices, n_vertices)\n\n```\n                       ^\n```\n\nSyntaxError: invalid syntax\n"},{"labels":["enhancement"],"text":"Cloning a scene does not copy all of the scene specific properties like fog, overrideMaterial and autoUpdate.\n\nHere is a small example:\n\n``` javascript\nvar scene = new THREE.Scene();\nscene.fog = new THREE.FogExp2(0xFF0000, 0.00025);\nconsole.log(scene.fog); //prints the object\n\nvar scene2 = scene.clone( new THREE.Scene() );\nconsole.log(scene2.fog); //prints null\n```\n\nhttp://jsfiddle.net/davidthemarsh/3kzPt/\n"},{"labels":["enhancement"],"text":"This is a proposal for a new `Box3` method `Box3.setFromObject( object )` that computes the world-axis-aligned bounding box of an object (including its children), accounting for both the object's, and childrens', world transforms.\n\nThis is different from `Geometry.computeBoundingBox()` which is not hierarchical, and does not take transforms into consideration.\n\n```\nTHREE.Box3.prototype.setFromObject = ( function() {\n    var v1 = new THREE.Vector3();\n    return function( object ) {\n        var scope = this;\n        object.updateMatrixWorld( true );\n        this.makeEmpty();\n        object.traverse( function ( node ) {\n            if ( node.geometry !== undefined && node.geometry.vertices !== undefined ) {\n                var vertices = node.geometry.vertices;\n                for ( var i = 0, il = vertices.length; i < il; i++ ) {\n                    v1.copy( vertices[ i ] );\n                    v1.applyMatrix4( node.matrixWorld );\n                    scope.expandByPoint( v1 );\n                }\n            }\n        } );\n        return this;\n    };\n}());\n```\n\nIn addition, I propose a `BoundingBoxHelper` ( different from the existing `BoxHelper` as it is axis-aligned ) to show the world-axis-aligned bounding box for an object. This helper calls  `Box3.setFromObject( object )`.\n\n```\nbbHelper = new THREE.BoundingBoxHelper( object, 0xffffff );\nscene.add( bbHelper );\n```\n\nThe advantages of these features should be pretty obvious. The disadvantage is that computation of the AABB of an object and it's children requires processing each vertex individually -- there are no transforms that can be applied to just the `geometry.boundingBox` to get the correct result.\n\nFeedback as to usefulness, naming, etc. is welcome. Maybe `Object3D.computeBoundingBox()` is better.\n\nFiddle: http://jsfiddle.net/MREL4/\n"},{"labels":["enhancement"],"text":"Hi\nFirst congratulation and many thanks for this great work, I love it.\nIf you make some T-shirts \"I ♥ three.js\" I will buy one.\n\nAs I'm from a Cad world I really wanted a Line loader, and it seems that it doesn't exist (at least I think .. http://stackoverflow.com/questions/16457714/three-js-lines-importation).\n\nSo finally I've made one, in despite I'm a noob (this is my first proto !). However it would be need to be checked and improved ..\n\nIt's there : https://github.com/jeum/booklab/blob/gh-pages/OBJLinesLoader.js\n\nAnd You can see it in action here :\nhttp://jeum.github.io/booklab/Sab&Dav&coHouse.html\nhttp://jeum.github.io/booklab/line_hysteria.html\n\nThe last sample needs a first user scroll or drag to display the lines (I missed something but I don't know what), and you should see a big (1000 vertex) LineStrip and 12 LinePieces, all generated from a .obj file, that's what I wanted. The other sample works, probably because meshes are loaded before the lines (I suppose).\n"},{"labels":["enhancement"],"text":"I'm not sure exactly what's going on there, but seems like there is a very fast Matrix4 implementation on jsperf: http://jsperf.com/comparison-matrix-and-vector-library/3\n"},{"labels":["enhancement"],"text":"There's may be a bug in this function: it assumes the sphere is centered at the object location, which is not necessary true (it is not in my app).\n\nSee https://github.com/mrdoob/three.js/blob/master/src/math/Frustum.js#L87\n\nI think it should be instead:\n\n```\ncenter.copy(object.geometry.boundingSphere.center);\ncenter.applyMatrix4(matrix);\n```\n"},{"labels":["enhancement"],"text":"There is a need for layout defined buffer geometry, where the stride and offset for each component in the buffer can be defined.\n\nFor example, a use of vertexes with overlapping data: \nhttp://codeflow.org/entries/2012/aug/05/webgl-rendering-of-solid-trails/\n\nI updated @alteredq's 1.8M triangle Animated Cube demo for the latest changes in three.js and to use a new geometry type: interleaved buffered geometry\n\nhttp://benaadams.github.io/three.js/examples/webgl_interleavedbuffergeometry.html\n(new version with cube count choice)\n\nHowever as @alteredq has pointed out this is more about a layout defined geometry rather than interleaved geometry necessarily, of which interleaved geometry is a subset:\n\nhttps://twitter.com/alteredq/status/331116349298458624\n\nIs InterleavedBufferedGeometry therefore the wrong name and it should be something more like LayoutDefinedBufferedGeometry - but shorter?\n\nOr is the InterleavedBufferedGeometry a good start, followed by a more flexible layout defined one?\n\nThe code other than the compute functions e.g. applyMatrix, computeVertexNormals etc is ready. However, if someone can come up with a good data structure layout for the more flexible version - I'm more than happy to implement this instead.\n\nThoughts? Questions?\n"},{"labels":["enhancement"],"text":"I'm using [ToPy](https://code.google.com/p/topy/) - a program to automatically create the optimum shape to best carry a force - to create some simple 3D models.\n\nIf i open the VTK in Paraview it displays (correctly) as so:\n![screen shot 2013-05-03 at 15 05 59](https://f.cloud.github.com/assets/1463197/459208/3d14267c-b3fb-11e2-95bc-0bdb06623cad.png) - the colours, i believe represent how important that pixel is to the structure.\n\nHowever if I open it with three.js it doesn't seem to display them as coloured blocks, but rather some strange connection of vertices.  http://topology-optimisation.herokuapp.com/vtk (zoom out by scrolling down to see it)\n\npicture attached: ![screen shot 2013-05-03 at 15 15 12](https://f.cloud.github.com/assets/1463197/459227/e8821208-b3fb-11e2-8cb2-b5cb35c07f6a.png)\n\nThis is the simple .VTK file in ascii format: https://github.com/jordn/topology-optimisation/blob/master/interface/static/60_3d_050.vtk\n\nI'm afraid I'm quite new to this topic and the VTK file format but could you explain to me why there is this difference and where the fault lies?\n\nThanks\n"},{"labels":["enhancement"],"text":"Given the Object3D.rotation refactor that is taking place here: #3404, I am concerned about the way that Sprites replace Object3D.rotation with a single float.\n\nIt would be better if sprites had a separate rotation value, like Sprite.spriteRotation that was then converted to Object3D.quaternion/rotation on a need basis.\n\nHaving Object3D.rotation replacable by a float is likely not a best practice because in most places in the code people do not check if Object3D.rotation is a float or a class, they just assume it is a class.\n\nHere is the place where Object3D.rotation is turned into a float:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/objects/Sprite.js#L13\n"},{"labels":["enhancement"],"text":"I have changed the requirements for this change from the original text (see \"OLD TEXT\" below) to just requiring the ability to intercept image loading calls during a geometry import.  I've described the more specific and limited requirements in this comment:\n\nhttps://github.com/mrdoob/three.js/issues/3412#issuecomment-17278034\n\nOLD TEXT:\nSo right now many of the importers create textures and fetch their images immediately during loading via `ImageUtils.load*Texture()`.\n\nI would like to add the option to not immediately fetch the image data for the textures.  Instead I would like to trigger these after the geometry has finished loading.\n\nI am not sure the best way to do this but it could be as simple as adding an option on `ImageUtils.loadTexture()` where it can just create a `texture.loader = new THREE.ImageLoader()` and configures it properly but never calls `texture.loader.load( texture.sourceUrl, texture.image );`  One can then iterate over the textures post-load and find those that have `texture.loader` defined and then one can call `texture.loader.load(...)` and upon success one can set `texture.loader = undefined` or something like that.\n\nI would like to add this as an option all the importers that can load textures during loading and then in the functions on `ImageUtils.load*Texture()`.\n\nI think it may be useful to modify `THREE.ImageLoader` so that it knows when it is in the process of loading and whether it failed during loading and the reason why.\n\nI can also add a utility function that traverses the scene graph as I described above looking for `texture.loader` to load that are not already in the process of loading.\n"},{"labels":["enhancement"],"text":"Many math libraries have a EulerRotation class that stores x,y,z rotations along with an order.  There are a number of useful functions for manipulating and converting between Euler angles that can also go on this class.  Right now Three.js does not have a Euler class rather we just pass around a Vector3 along with an order.\n\nBesides the obvious, some useful Euler3 functions are:\n- reorder (convert from one euler order to another while maintaining the exist same rotation)\n- inverse (obvious)\n- clamp (clip rotations to +/-180 degrees)\n- alternativeSolution (there are two Euler solutions that are within +/- 180 degrees for each rotation, this switches between the two.)\n\nThis is what I am aiming for:\n\nhttp://www.blender.org/documentation/blender_python_api_2_59_2/mathutils.html#mathutils.Euler\n\nI've written up a draft here that I can complete if there is interest:\n\nhttps://github.com/bhouston/three.js/blob/euler3/src/math/Euler3.js\n"},{"labels":["enhancement"],"text":"I am concerned that Three.TransformControls tries to do too much and thus it is overly complex.  I've been looking at the code for a while this morning and it is pretty involved.\n\nI was wondering if it is possible to split most of the functionality of TransformControls into three separate classes such as ScaleControls, TranslateControls and RotationControls.  If there is some shared functionality one could create a base class that each of these three share.\n\nThis would focus the code to each of these three specific use cases.\n\nTransformControls would then become a means to switch between these more specific controls, rather than being all three of these complex controls.\n\nBesides making it a lot simpler, it would also enable me to use just TranslateControls in some cases instead of always having to use all three controls as TransformControls and then trying to build in some filtering on top (which will make it even more complex.)\n"},{"labels":["enhancement"],"text":"Hi,@mrdoob / @alteredq\n\nI have got a problem, I create a scene which contains a specific geometry model ,\nThis model is  created by 3D Max and converted to .js file, I can load it into the scene, but when I export my scene via 'new THREE.SceneExporter().parse(scene)' , I found the exported result not containing this model, does not SceneExport.js support the specific geometry? Do you have any method to export it? Appricate for your help.\n\nThanks\nShuangqi\n"},{"labels":["enhancement"],"text":"I have a project which is based around a city scene with lots of buildings that occlude each other. I would like to have some kind of occlusion culling.\n\nHere is an idea for an approach:\n## API\n\nMesh objects have extra boolean fields: occluder, occludable\nRenderer has additional boolean field: occlusionCulling, and possibly an integer: maxOccluders\n## Code\n- On creation of renderer/on first render with occlusionCulling enabled\n  - Create mipmapped occlusionBuffers array, one element per pixel\n- After frustum culling and object sort, if occlusionCulling is enabled:\n  - Iterate through sorted, opaque meshes to be rendered, front to back:\n    - If object is occludable and any occluders already processed this frame:\n      - Project vertices (OR optionally bounding box corners) into view space (OR if occluder, use rasterized triangles?)\n      - Test each point against each level of occlusionBuffer mipmap from broadest to narrowest\n      - If any vertex closer than occlusionBuffer point, stop testing, we have to draw\n      - If all vertices further than Z value, object is occluded!\n    - If object is an occluder:\n      - If first occluder this frame:\n        - Ensure occlusionBuffers created\n        - Clear occlusionBuffers with far plane value\n      - Project vertices into view space\n      - Rasterize triangles, for each pixel, if closer than occlusionBuffer value:\n        - Set finest occlusionBuffers Z value\n      - If there were any changes to occlusion buffer, propagate changes along coarser mipmaps\n\nIf anyone has any better ideas for a general solution, I'd like to hear them. Otherwise, at some point in the next few weeks I might have a crack at this myself.\n"},{"labels":["enhancement"],"text":"how to load md5mesh and md5anim?\nI apologize for making issue did not find where you can ask a question. sorry my bad english.\n"},{"labels":["enhancement"],"text":"I'm creating this enhancement issue as a branch from the discussions on #3298.\n\nIt would be good to have a BufferGeometryLoader, one that loads an 'arraybuffer' from a XHR request and creates a BufferGeometry instance.\n\nThe XHR would be replied using the responseType 'arraybuffer': https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data\n\nTyped Arrays would then be derived from the main array buffer to be used in the BufferGeometry instance, something like that is done by the 'webgl_buffergeometry' example.\n\nFor an initial version, requesting a different 'arraybuffer' per geometry looks fine, but, for the future, I was thinking on playing with offsets and strides to use a single 'arraybuffer' to load all the scene's geometries AND textures, possible with impact on the current `SceneLoader` behavior.\n\nAny thoughts would be greatly appreciated.\n"},{"labels":["enhancement"],"text":"Well, I was going to call this `THREE.RingGeometry`, but we already have that -- in 2D.\n\nWhat to do?   `TorusGeometry` cannot generate this shape due the to uniquely flat sides.\n\nPerhaps `DuctTapeGeometry`?\n\n![Screen Shot 2013-04-19 at 11 36 53 PM](https://f.cloud.github.com/assets/1000017/404705/4a54ba5c-a96c-11e2-9a33-64a35398166a.png)\n"},{"labels":["enhancement"],"text":"In r.58, I think that the `CameraHelper` constructor should call `this.update()`. As it stands, the `Line` vertices are all zero unless `this.update()` is called.\n"},{"labels":["enhancement"],"text":"At the moment, [Viewport.js](https://github.com/mrdoob/three.js/blob/master/editor/js/ui/Viewport.js) handles the scene and the viewport. If we are going to add ability to do more complex scene manipulations as well as multiple viewports one day this will become extremely complex and imposible to manage. I propose that we move all scene management logic into a separate file (sceneManager.js maybe?) and make it completely viewport agnostic. The Viewport.js should only handle viewport interactions such as picking, attaching and handling transform manipulators etc. Does this sound reasonable?\n"},{"labels":["enhancement"],"text":"At the moment, file loading and parsing logic (drag and drop) is located in editor's [index.html](https://github.com/mrdoob/three.js/blob/master/editor/index.html) In order to support multiple file input methods it would be useful to move all file I/O logic and into a separate file and make its functionality available to the rest of the application.\n\nAlso, functions scoped within [parseFile](https://github.com/mrdoob/three.js/blob/master/editor/index.html#L182) function like [handleJSON](https://github.com/mrdoob/three.js/blob/master/editor/index.html#L243) for example, should be accessible from outside of the scope. This would improve reusability of the code if other file sources are implemented.\n"},{"labels":["enhancement"],"text":"(Rev 57)\n\nI noticed that the quaternion / rotation properties are not loaded by the SceneLoader for camera objects: is there any reason for this ?\n\nSee https://github.com/mrdoob/three.js/blob/master/src/loaders/SceneLoader.js#L420, only position is loaded (whereas quaternion/rotation are correctly loaded for pure 3D objects, see just below).\n"},{"labels":["enhancement"],"text":"Am switching from FlyControls to TrackballControls, when I go from TrackballControls to FlyControls everything is ok, however, when I go from fly to Track, it seems as if the mousedownevent of the TrackballControls were always triggering. in other words it rotates the scene just by moving the mouse and not pressing it as it should. how can I change this behaviour?\n"},{"labels":["enhancement"],"text":"Hello,\n\nIs there any way to have gradient color for the fog or have the fog color change in certain areas of the fog, instead of fog being a single color?\n\nThanks,\nReece\n"},{"labels":["enhancement"],"text":"Hello, I just tried running the full demo [here](http://threejs.org/docs/57/#Manual/Introduction/Creating_a_scene) (under \"The result\"), served from http://localhost:8080.  The demo does not run because Chrome now enforces \"strict MIME type checking.\"\n\nHere's the full output from the console:\n\n```\nRefused to execute script from 'https://raw.github.com/mrdoob/three.js/master/build/three.js' because its MIME type ('text/plain') is not executable, and strict MIME type checking is enabled. index.html:1\nUncaught ReferenceError: THREE is not defined \n```\n\nFirefox and Chrome work fine.\n"},{"labels":["enhancement"],"text":"@mrdoob - Rather easy to fix this one, basically the createMaterial() ignores any alphaTest value that exists this results in the shader being created without any alphaTest present..\n\nI added this at Line 9476 to fix:\n\n```\n    if ( m.alphaTest !== undefined || m.alphaTest < 1.0 ) {\n\n        mpars.alphaTest = m.alphaTest;\n\n    }\n```\n\nbut I've no experience in git to issue a pull request (just yet..)\n"},{"labels":["enhancement"],"text":"The `JSONLoader` sets the `content-length` header even when you aren't using the progress callback, [see this line](https://github.com/mrdoob/three.js/blob/master/src/loaders/JSONLoader.js#L81). I think it just needs to be changed at line 81 to \n\n```\n// add if(callbackProgress) around content-length header, like in lines above\n\nif ( callbackProgress ) {\n\n  length = xhr.getResponseHeader( \"Content-Length\" );\n\n}\n```\n\nThis came up because CORS requires only \"simple headers\" and `content-length` is not one of them, so you can't use the progress loader with CORS, but it was still breaking anyway. \n"},{"labels":["enhancement"],"text":"On the edge of the UV mapping of the isoSphere is a bad \"Zipper\" effect; is there any way do do away with this?\n\nhttp://note.io/XZXDtY\n![mars_zipper](https://f.cloud.github.com/assets/2413713/339356/cc48922a-9d34-11e2-8165-13c4df191d97.png)\n"},{"labels":["enhancement"],"text":"It would be nice if exported model would include only the materials that were actually used by that model or would at least give an option to do so.\n\nExport component currently exports all the materials and associated textures in the scene and not just the ones used by the exported mesh. I have a very large model with multiple different materials and textures that I bake into a simpler one that is then exported. As a workaround, I need to remove all the other materials before exporting to avoid referencing unnecessary files.\n"},{"labels":["enhancement"],"text":"If there are multiple UV maps defined, export functionality seems to always use the first one instead of the one selected by the assigned material.\n\nA workaround is to delete other UV maps before exporting the model.\n"},{"labels":["enhancement"],"text":"Hi!\n\nI'm wondering if this is expected behavior. I am drawing a THREE.Line using a ShaderMaterial and a WebGLRenderer. If I build the material and pass {linewidth: 3} as parameters to the constructor function, the line ignores this width. If instead I set the linewidth as material.linewidth = 3 after creating it, the linewidth is honored.\n\nThis seems to be because Material, the prototype of ShaderMaterial, does not have a linewidth property, and so the \"if ( key in this )\" check in Material.prototype.setValue fails.\nThis causes WebGLRenderer's \"setLineWidth( material.linewidth );\" to run with material.linewidth === undefined.\n\nWebGLRenderer seems to assume the material will set the .linewidth, irrespective of what the Material is (i.e. not a LineBasicMaterial). This assumption seems sensible, to me. Could we move .linewidth to Material?\n"},{"labels":["enhancement"],"text":"Hi, i tried export my model to Collada from Blender using native collada exporter, but there was a lot of errors in console like 'Could not find transform xyz' ... \n\nso i did some investigation and comparison of exported .dae files from Blender 2.66a and 2.65 and i find out this different:\n\n```\n    <translate sid=\"location\">-0.003243253 0.593213 1.048998</translate>\n    <rotate sid=\"rotationZ\">0 0 1 0.3584692</rotate>\n    <rotate sid=\"rotationY\">0 1 0 -1.163745</rotate>\n    <rotate sid=\"rotationX\">1 0 0 89.90293</rotate>\n    <scale sid=\"scale\">1 1 1</scale>\n```\n\n------- changed to -------->\n\n< matrix sid=\"transform\" > 0.5429455 0.5821444 -0.6052421 -0.003243253 -0.8397653 0.3781927 -0.3895698 0.593213 0.002112276 0.7197765 0.6942027 1.048998 0 0 0 1</ matrix >\n\n... this new saving syntax cause a lot of problems i can't fix easily. However, maybe this only transform matrix is easy to implement using some matrix multiplication only?\n\nThank you.\n"},{"labels":["enhancement"],"text":"On multiple mobile devices (Z10, Nexus 4, Xperia LT15a), http://mrdoob.github.com/three.js/examples/webgl_materials_normalmap2.html renders improperly (picture below).\n\n![IMG_00000001](https://f.cloud.github.com/assets/3966707/299122/dbd8a34e-9571-11e2-975e-636a0aaa2051.png)\n\nBut by adjusting the following line:\n\n``` javascript\neffectFXAA.uniforms[ 'resolution' ].value.set( 1 / window.innerWidth, 1 / window.innerHeight );\n```\n\nto\n\n``` javascript\neffectFXAA.uniforms[ 'resolution' ].value.set( 1 / (window.innerWidth * renderer.devicePixelRatio), 1 / (window.innerHeight * renderer.devicePixelRatio) );\n```\n\nOR\n\n``` javascript\neffectFXAA.uniforms[ 'resolution' ].value.set( 1 / renderer.domElement.width, 1 / renderer.domElement.height);\n```\n\n the image appears as such:\n\n![IMG_00000002](https://f.cloud.github.com/assets/3966707/299147/9bd1b370-9572-11e2-8eb2-912f8223e5a7.png)\n"},{"labels":["enhancement"],"text":"I have a few feature requests for splines, as what I'm developing might need more functionality.\n- Blender Spline import, which means...\n- More spline types supported\n  - NURBS curves\n  - Bezier curves\n- An inverse to getPoint, so provided a point, calculates the position on the spline\n"},{"labels":["enhancement"],"text":"I can't get morph targets to work with `MeshNormalMaterial`, only with `MeshLambertMaterial`. Looking in the source of `MeshNormalMaterial` it looks like it doesn't have the `morphTarget` defaults set the way the lambert material does (see [lambert](https://github.com/mrdoob/three.js/blob/master/src/materials/MeshLambertMaterial.js#L74) vs [normal]([normal]%28https://github.com/mrdoob/three.js/blob/master/src/materials/MeshNormalMaterial.js#L25%29).\n\nIs it just not implemented or is there an issue with using morph targets with the normal material?\n\n[Here is a demonstration](http://paulkaplan.me/Experiments/Three/MorphTargets.html) of the problem. \n"},{"labels":["enhancement"],"text":"Hey everyone,\n\ni recently ran into a probleme where I wanted to display a rendertarget (texture) on a sprite. \nAfter review by MrDoob, he suggested to create a Feature Request here :) \n\nPlease check the sample below. By changing the \"testmap\"-Texture to the \"rtTexture\" the sprite disappears and is not showing the renderTarget. \n\nhttp://jsfiddle.net/Pk85y/40/\n\nIt would be nice to know if this is possible at all with WebGL or not. If it is, this is an enhancement request ;) \n\nCheerz :) \n\nFor completion,\n\nhere is my stackoverflow entry:\nhttp://stackoverflow.com/questions/14334909/sprite-not-showing-rendertotexture-map-rendertarget-map\n"},{"labels":["enhancement"],"text":"The following routines do not work correctly when the object matrix has non-uniform scale.\n\n```\nMatrix4.rotateByAxis( axis, angle );\n\nMatrix4.rotateX( angle )                \nMatrix4.rotateY( angle )\nMatrix4.rotateZ( angle )\n```\n\n`Matrix4.rotateByAxis()` can be fixed with logic like the following:\n\n```\nvar position = new THREE.Vector3();\nvar quaternion = new THREE.Quaternion();\nvar scale = new THREE.Vector3();\nvar q = new THREE.Quaternion();\n\nmatrix.decompose( position, quaternion, scale );\n\nq.setFromAxisAngle( axis, angle );\nquaternion.multiply( q );\n\nmatrix.compose( position, quaternion, scale );\n```\n\nThis is terribly inefficient, and although one could test for unit scale to speed up the code, I do not see the need for these routines anyway.\n\nIn the absence of a compelling reason for routines that \"rotate a matrix\", I'd suggest that the above routines be removed.\n\nThere is a problem, though...\n\nThese routines are used by\n\n```\ntest/unit/math/Ray.js\nsrc/extras/helpers/SpotLightHelper.js\nexamples/js/loaders/ColladaLoader.js\n```\n\n`SpotlightHelper` and the `Ray` testbed are easy fixes. \n\n`ColladaLoader` is a different matter. I have no idea what it is doing... It may not even be right.\n\nWe need to figure out how to eliminate the following function calls from the function `Transform.apply( matrix )` in `ColladaLoader`:\n\n```\nMatrix4.rotateByAxis()\nMatrix4.translate() // this one also has problems\n```\n\nIf we can do that, then the above routines, which are not correct, can be removed.\n\nI'd be grateful if someone familiar with the ColladaLoader code would have a look.\n"},{"labels":["enhancement"],"text":"Martins Upitis, the author who wrote the original bokeh shader used in ROME and in our three.js examples updated his shader to be a little more physically realistic along with a few other features. (perhaps after he was impressed by the use of his original shader in webgl)\n\nhttp://blenderartists.org/forum/showthread.php?237488-GLSL-depth-of-field-with-bokeh-v2-4-(update)\n\nJust wanted to mention that I've reported the new shader back for three.js - as you can see, there really a whole bunch of parameters to tweak on this one - will give an update when I manage to have it more polished...\n\n![Screen shot 2013-03-13 at AM 01 31 56](https://f.cloud.github.com/assets/314997/249928/883416b4-8b3b-11e2-9dab-3fdb47869767.png)\n"},{"labels":["enhancement"],"text":"Chrome uses the Web Audio API, which is currently implemented in the AudioObject.js.\nFireFox doesn't support it but the Mozilla Audio Data API. I suggest to use this as a fall-back. You may use AudioNode to get the same methods.\n-> https://github.com/corbanbrook/audionode.js\nIf wished I can build it, too an upload it here.\n"},{"labels":["enhancement"],"text":"Level of detail doesn't seem to be working with the raycaster for me. With sphere geometry it works but when I put a sphere into an LOD it does not.\n"},{"labels":["enhancement"],"text":"My suggestion is to implement sinusoidal interpolation for animationHandler as I think it would be usefull for skinned animations exported from Blender where the default interpolation is set to sinusoidal.\n"},{"labels":["enhancement"],"text":"Currently, three.js can only load dds files which have a fourCC, unfortunately, there are dds files around that do not have this. I uploaded an example of such a file here: http://dl.dropbox.com/u/2501002/test.dds . According to the dds documentation, this is allowed behaviour, as this file does not use compression (see http://msdn.microsoft.com/en-us/library/bb943984.aspx, especially the Flag DDPF_RGB). It would be nice if this format could be supported.\n\nThanks in advance :)\n"},{"labels":["enhancement"],"text":"A zero intensity light still creates a shadow if so requested. Probably this should not be the case.\n"},{"labels":["enhancement"],"text":"I have a .obj file with some wireframe/line based structures in it e.g. only two verticies per entry. Currently the obj converter ignores 'f' with less than three verticies (line 538). If I modify the obj converter script to import lines as well as faces into a new array in the model format (e.g. \"lines\") would that patch in general be accepted? Or should I just write my own separate converter and import format?\n"},{"labels":["enhancement"],"text":"FirstPersonControls.js and Rollcontrols.js both have possibility to constrain view in vertical. What do constraining with orbit controls or trackball.controls. It should work exactly as it works in this example: http://carvisualizer.plus360degrees.com/threejs/. Sorry, I am not fluent in advanced js.\n"},{"labels":["enhancement"],"text":"![Screen Shot 2013-02-11 at 13 27 05](https://f.cloud.github.com/assets/1295057/145477/d3dd20cc-7463-11e2-81f0-20f894a16f44.png)\n\nI used the top right matrix to transform the cube. \n\ncube.applyMatrix(m);\n\nThe result should be different -> Surface 1 should still be parallel to near clipping plane ...\n"},{"labels":["enhancement"],"text":"@Goutte pointed out in this comment that the `ok( ..., \"Passed!\" )` unit test pattern isn't the best pattern to use:\n\nhttps://github.com/mrdoob/three.js/pull/3061#issuecomment-13277930\n\nIt is true and it is my fault.  In my defence, the `ok( ..., \"Passed!\" )` pattern it is the main pattern the use in their homepage example: http://qunitjs.com/\n\nThis should be updated at some point.\n"},{"labels":["enhancement"],"text":"As reported in [this](http://stackoverflow.com/questions/14651368/three-js-ignoring-linewidth-for-a-buffergeometry-linebasicmaterial-in-a-three) Stackoverflow post, the `linewidth` property of `LineBasicMaterial` is ignored when a `THREE.Line` is constructed with `BufferGeometry`.\n"},{"labels":["enhancement"],"text":"If you drag a JSON file into the editor that uses per-face materials, you only see a solid black object.\n\nMy investigation shows that the import of the data works correctly, but that the `materialIndex` is being lost/ignored somewhere. I haven't found where yet.\n\nUltimately I'm looking to use the editor to upgrade some old r42 geometry files to a format that works with r55 (see this [Stack Overflow question](http://stackoverflow.com/questions/14678692/manually-upgrading-three-js-json-geometry-files-from-r42-to-r55)).\n\nHere's a simple, hand made example of a JSON file that should work, but doesn't. GitHub doesn't allow attaching non-image files to issues.\n\nYou can also test with `/examples/models/skinned/*.js`\n\n```\n{\n\n    \"metadata\" :\n    {\n        \"formatVersion\" : 3.1,\n        \"generatedBy\"   : \"Hand (Drew Noakes)\",\n        \"vertices\"      : 4,\n        \"faces\"         : 2,\n        \"normals\"       : 0,\n        \"colors\"        : 0,\n        \"uvs\"           : 0,\n        \"materials\"     : 1,\n        \"morphTargets\"  : 0,\n        \"bones\"         : 0\n    },\n\n    \"scale\" : 1.000000,\n\n    \"materials\": [\n        {\n            \"DbgColor\" : 16711680,\n            \"DbgIndex\" : 0,\n            \"DbgName\" : \"Red Material\",\n            \"blending\" : \"NormalBlending\",\n            \"colorAmbient\" : [0.25, 0.25, 0.25],\n            \"colorDiffuse\" : [1.0, 0.0, 0.0],\n            \"colorSpecular\" : [0.5, 0.5, 0.5],\n            \"shading\" : \"Phong\",\n            \"specularCoef\" : 50,\n            \"transparency\" : 1.0,\n            \"transparent\" : false,\n            \"vertexColors\" : false\n        }\n    ],\n\n    \"vertices\": [\n        0,  0,  0, \n        0,  0,100, \n        0,100,  0, \n        0,100,100\n    ],\n\n    \"morphTargets\": [],\n\n    \"normals\": [],\n\n    \"colors\": [],\n\n    \"uvs\": [[]],\n\n    \"faces\": [\n        2, 0,3,1, 0,\n        2, 0,2,3, 0\n    ]\n\n}\n```\n"},{"labels":["enhancement"],"text":"DDS support works good, but I have some .dds textures in DXT1 compression mode with transparent parts. And I found this, that it's possible with 1-Bit Alpha sets.\n\nhttp://msdn.microsoft.com/en-us/library/windows/desktop/bb147243(v=vs.85).aspx\n\nAny possibility to get it work with Three.js? At the moment the transparent parts of the texture are black with alphaTest = 0.5;\n"},{"labels":["enhancement"],"text":"It seems like the current `WebGLRender` does not support custom attributes for `BufferGeometry`. Have spent a couple of hours trying to hack the renderer but have not seem to resolved it. \n"},{"labels":["enhancement"],"text":"Opera support is now totally broken; meaning that `new THREE.WebGLRenderer()` will fail at https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L208 because `getShaderPrecisionFormat()` is not available. Of course, \"totally broken\" quite accurately describes the current state of WebGL support in Opera (to fix the crashes, they appear to have ripped out the lion share of shader support), so I don't expect much.\n\nThis is a bit of regression, since http://carvisualizer.plus360degrees.com/threejs/ (r47) works… partly. A nicer error message is probably all this is worth.\n\nTested with Opera 12.12 on Windows and Linux.\n"},{"labels":["enhancement"],"text":"Line 79: `var normal = new THREE.Vector3( result[ 1 ], result[ 3 ], result[ 5 ] );`\nshould be changed to:\n`var normal = new THREE.Vector3( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) );`\nand\nLine 88: `geometry.vertices.push(   new THREE.Vector3( result[ 1 ], result[ 3 ], result[ 5 ] ) );`\nshould be changed to:\n`geometry.vertices.push( new THREE.Vector3( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) ) );`\n\notherwise the data are strings. Still I dont understand how come the drawing is correct.\nI found the bug by adding these lines:\n\n```\nmesh.geometry.computeBoundingBox();\nvar bBox = mesh.geometry.boundingBox;\nalert (typeof bBox.min.x);\n```\n\nto the webgl_loader_stl.html example in the addEventListener. I was getting a string type which is not correct. \n"},{"labels":["enhancement"],"text":"I saw nearly all of THREE.js objects using javascript prototype for inheritance, apart from the controls which are build on [EventDispatcher](https://github.com/mrdoob/eventdispatcher.js/blob/master/src/EventDispatcher.js). Why is that?\n\nMaybe it's more of a JavaScript question. In a search for consistency I'd like to know if changing controls (and thus the dispatcher) to 'prototyping'  would cause any troubles. \n"},{"labels":["enhancement"],"text":"As discussed in #2954, here is a list of problems and feature requests with the current collada loader. Some of them should be easy to fix, some might require more work, so feel free to divide this into multiple issues.\n- [x] The loader supports only one texture per material (last texture wins) and assigns all types of textures to the diffuse channel (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L3130)).\n- [ ] The loader does not support bump and normal maps. This feature is not part of the core collada spec, but both blender and 3dsmax place it under `<effect>/<profile_COMMON>/<technique>/<extra>/<technique>/<bump>`\n- [ ] The loader does not support skins with multiple skeletons (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L421) and [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L568))\n- [x] The loader does not support lights (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L1833)).\n- [ ] The loader has broken support for cameras. Orthographics cameras are not supported, and perspective cameras use a `fov` parameter (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L837)), but should use the `yfov` paremeter (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L3974)). Also note that the field of view parameter and aspect ration might be undefined and have to be computed from other elements (see collada spec, chapter on `perspective`). Also, the `aspect_ratio` is a string and not a number (see [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L3983)).\n- [ ] It's really difficult to tell from reading the spec, but I am not sure the loader handles bones correctly. Node SIDs do not need to be unique within the scene, and from what I understand, you have to start at the skeleton root node and iteratively perform a breadth-first search for the next SID part. See [here](https://github.com/mrdoob/three.js/blob/79c961b772797a3db7ecad8ad7339589c8e957c4/examples/js/loaders/ColladaLoader.js#L502), the collada spec for `COLLADA Target Addressing` and the `skin` element. No exporter that I know of uses non-unique SIDs, though.\n- [ ] Some meshes are incompletely animated. I have one example where the root node of my skeleton is not animated, resulting in the character pelvis being fixed. I just cannot figure out why this happens. I do not own the mesh, so I cannot share it publicly. But send me a private message and I'll send it to you.\n"},{"labels":["enhancement"],"text":"As you may or may not know, There is a new renderer called WebglRenderer2.\n##### Why??\n\nThe main reason was that webglrenderer became a very large file which makes it harder to maintain.\n##### API changes??\n\nThere should be none. That means when you detect a difference. Comment here if you do notice a difference. Even performance changes.\n##### What do we need now??\n- testers\n"},{"labels":["enhancement"],"text":"By single-page application I mean one which creates/initializes the WebGL context multiple times without a full page reload.\n\nThe problem are the global variables `THREE.EffectComposer.{scene,camera,quad}`. Once bound to a context they can not be reused in another context. When you try to use them in the second context, this is what you'll see in the console:\n\n```\nWebGL: INVALID_OPERATION: bindBuffer: object not from this context\n```\n\nI quickly hacked the ShaderPass to create its own scene/camera/quad in the constructor and it did fix this problem. (see the diff [here](https://gist.github.com/b1e6f845dd79eaa5aa9a)).\n\nReferences:\n- [Question on StackOverflow](http://stackoverflow.com/questions/11504320/why-does-re-initializing-the-webgl-context-break-my-usage-of-three-effectcompose) (unanswered)\n"},{"labels":["enhancement"],"text":"The method [Plane.setFromCoplanarPoints](https://github.com/mrdoob/three.js/blob/master/src/math/Plane.js#L43) normalizes its normal value before calling Plane.setFromNormalAndCoplanarPoint, which again normalizes the normal vector. No other calculations within Plane.setFromCoplanarPoints rely on the normalized vector. I believe it would be safe to remove the call to normalize() and save a few CPU cycles.\n"},{"labels":["enhancement"],"text":"Hi guys\n\nThis is partly for others who might be searching for this topic as well as a feature request. \n\nFrom what I understand three supports the playback of 1 animation at a time. Using the provided exporter for Blender we can export either a single skinned mesh and its single animation, or we can create a single morph mesh with multiple morph animations using an obj export method (can someone clarify if this method has changed?). I cant find any tutorials on creating multi animation files from blender... I think this would be a very useful thing to add if its actually possible. \n\nHere are two tutorials I found for the above situations:\nSkinned animation: http://www.kadrmasconcepts.com/blog/2012/01/24/from-blender-to-threefab-exporting-three-js-morph-animations/\n\nmorph animations: http://catchvar.com/threejs-animating-blender-models\n\nFirstly, I just want to double check if my above assertions were correct?\n\nSecondly, I was wondering if there was any work towards creating a more robust skinning solution? Ideally with some kind of method to export those files with multiple animations. \n\nIf its a case of providing an animated blender asset, I can certainly help you create an asset with multiple animations on the timeline.\n\nAny guidance or recommendations you might have are greatly appreciated\n\nRegards\nMat\n"},{"labels":["enhancement"],"text":"I took the [morphTargets](http://mrdoob.github.com/three.js/examples/webgl_morphtargets.html) example and tried to swap a `THREE.Mesh` with a `THREE.Line`. I got the below errors.\n\n![Screen Shot 2013-01-02 at 2 00 36 PM](https://f.cloud.github.com/assets/220033/39411/e574b6ac-5527-11e2-8997-0391d37dbd51.png)\n\nAn example of this can be found [here](http://dl.dropbox.com/u/1595444/experiments/Three.js/THREE-Line-morphTarget.html). I expected it to work because previously I had used `THREE.Line` and `THREE.Mesh` interchangeably. I went looking through the source and `THREE.Line` doesn't look like it has any of the initialization logic for morphTargets that `THREE.Mesh` has.\n\nSo I think it's missing and I'm requesting that it be added. Is it as simple as adding these properties to `THREE.Line`?\n\n```\nthis.morphTargetBase = -1;\nthis.morphTargetForcedOrder = [];\nthis.morphTargetInfluences = [];\nthis.morphTargetDictionary = {};\n```\n\nFinally, I'm running Chrome stable on OS X 10.8.2\n"},{"labels":["enhancement"],"text":"Currently Color is not covered in the unit tests.  So, I started adding tests to that module.  I noticed the color constructor does not throw an error when setting RGB to values outside of 0-1.  This seems to cause some confusion, as people are accustomed to RGB values up to 255.  Should Color throw an error when setting RGB values outside of the 0-1 range?\nhttps://github.com/bcajes/three.js/blob/testcoverage/test/unit/math/Color.js\n"},{"labels":["enhancement"],"text":"I'm struggling to decide whether three.js should handle `window.devicePixelRatio` internally or not.\n\nThis would mean adding this kind of code to each renderer:\n\n``` javascript\nvar ratio = window.devicePixelRatio || 1;\n\ncanvas.width = width * ratio;\ncanvas.height = height * ratio;\n\ncanvas.style.width = width + 'px';\ncanvas.style.height = height + 'px';\n```\n\nThe good thing is that people wouldn't have to worry about having to [implement it on their end](https://plus.google.com/113862800338869870683/posts/DZ3bkF3aA8g). But I don't know what the bad things would be. I'm sure this could lead to some confusion at some point.\n"},{"labels":["enhancement"],"text":"Basically the TorusMesh has double vertices along the seams instead of sharing them.  The double vertices are created here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TorusGeometry.js#L21\n\nAnd they are referenced here:\n\nhttps://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TorusGeometry.js#L49\n\nThe fix is to not create the vertices along the seams if phiLength is 2*PI and then reference the shared vertices when creating the triangles.\n"},{"labels":["enhancement"],"text":"On MacOSX 10.8.2, NVIDIA GeForce GT 330M 512 MB, Chrome 23.0 (see inside red circles)\n\n![Screen Shot 2012-12-15 at 14 08 19](https://f.cloud.github.com/assets/163635/14888/bac2a680-46b8-11e2-8a18-de3d4aebb69a.png)\n"},{"labels":["enhancement"],"text":"the FlipYZ button shows no rection if exporting a scene in Blender 2.64 Exporter (in master and in dev branch)\n\nbut this was already corrected for the Blender 2.59 Exporter:\nhttps://github.com/mrdoob/three.js/commit/30f8f3908a3cc7f503166f4c205274e8ad49f4a2\n\nso ...  take the bugfix from there\n"},{"labels":["enhancement"],"text":"Currently any model which has any object, material, node, light, camera, or texture name which contains either double quotes or backslashes, will result in invalid JSON.\n\nThe following commit resolves the issue.\n\n9d7c12430f0a7b6cfc2226bff3d44b94609403ed\n"},{"labels":["enhancement"],"text":"I am doing this now as it is needed for completeness of the math libraries.\n"},{"labels":["enhancement"],"text":"I would like to build three-math.js that includes the following:\n- src/Three.js\n- src/math/*\n\nI would do this via creating this file:\n- utils/includes/math.json\n\nAnd then modifying the various build scripts to automatically create three-math.js using math.json\n\nThis will allow those who are interested in just the math library to pull it in without including any of the renderers or scene graphs.\n"},{"labels":["enhancement"],"text":"This class is very useful for centralizing hit testing and barycoordinate code.  I am proposing that the most useful functions for hit testing and barycoords are provided as static/instance methods so that they can be called without creating a Triangle3 object.\n\n**Properties:**\n- a as Vector3\n- b as Vector3\n- c as Vector3\n\n**Constructor**\n- Triangle3( a, b, c ) // if a,b,c are not provided initialized to (0,0,0) vectors\n\n**Static Methods**\n- Triangle3.barycoordFromPoint( point, a, b, c, optionalTarget ) // will return the barycoordinates in optionalTarget if provided, otherwise a new Vector3 will be created.\n- Triangle3.containsPoint( point, a, b, c ) // designed to replace Raycaster.pointInFace().\n\n**Instance Methods**\n- Triangle3 set( a, b, c )\n- Triangle3 setFromPointsAndIndices( points, i0, i1, i2 )\n- Triangle3 copy( triangle )\n- Scalar area()\n- Vector3 midpoint( optionalTarget as Vector3 )\n- Vector3 normal( optionalTarget as Vector3 )\n- Plane plane( optionalTarget as Plane )\n- Vector3 barycoordFromPoint( point, optionalTarget as Vector3 )\n- bool containsPoint( point )\n- bool equals( triangle )\n- Vector3 clone()\n\nI've written Triangle3 already in this branch and it passes the unit tests:\n\nhttps://github.com/bhouston/three.js/compare/mrdoob:dev...bhouston:triangle\n\nI have also adopted Triangle3.containsPoint in Raycaster and compared the non-vsynced speed of examples:\n- webgl_interactive_cubes.html\n- webgl_interactive_draggablecubes.html\n\nAnd saw no performance degradation as a result of moving the function from Raycaster.pointInFace() to Triangle3.containsPoint() and using the intermediate Triangle3.barycoordinate().\n"},{"labels":["enhancement"],"text":"Profiling a \"big\" geometry with lots of polygons, (a world map:  http://www.steema.us/files/jscript/beta/nov_2012/demos/canvas/webgl/maps_3d.htm ) found a bottleneck at \"insideTriangle\" function.\n\nI did some manual inlining and simple optimizations (see code below). It usually runs 20-25% faster in Chrome / FF.\n\nregards\ndavid\n\n```\nvar snip = function ( contour, u, v, w, n, verts ) {\n\n    var p;\n    var ax, ay, bx, by;\n    var cx, cy, px, py;\n\n    ax = contour[ verts[ u ] ].x;\n    ay = contour[ verts[ u ] ].y;\n\n    bx = contour[ verts[ v ] ].x;\n    by = contour[ verts[ v ] ].y;\n\n    cx = contour[ verts[ w ] ].x;\n    cy = contour[ verts[ w ] ].y;\n\n    var aX = cx - bx, aY = cy - by, bX = ax - cx, bY = ay - cy, cX = bx - ax, cY = by - ay;\n\n    if ( EPSILON > ((cX*(cy-ay)) - (cY*(cx-ax))) ) return false;\n\n    var apx, apy, bpx, bpy, cpx, cpy;\n\n    for ( p = 0; p < n; p++ ) {\n\n        if( (p !== u) && (p !== v) && (p !== w) ) {\n\n            px = contour[ verts[ p ] ].x\n            py = contour[ verts[ p ] ].y\n\n            apx= px  -ax;  apy= py - ay;\n            bpx= px - bx;  bpy= py - by;\n            cpx= px - cx;  cpy= py - cy;\n\n            if( ( (aX*bpy - aY*bpx) >= 0.0 ) && ( (cX*apy - cY*apx) >= 0.0 ) && ( (bX*cpy - bY*cpx) >= 0.0 ) )\n                return false;\n        }\n    }\n\n    return true;\n\n};\n```\n"},{"labels":["enhancement"],"text":"Hi, Is there any way to make Particle works with OrthographicCamera ?\nI checked everything and it's just related to the camera. Even when I put an undefined variable on ParticleCanvasMaterial chrome show me error just when Perspective camera was used.\nI try to check all examples and related posts but I didn't find any solution.\nThis question asked before on <a href=\"http://stackoverflow.com/questions/11250053/three-js-canvas-particles-dont-render-with-orthographiccamera\">stackoverflow</a> but it has no answers.\n"},{"labels":["enhancement"],"text":"Not yet sure how to do this, but it is an outstanding task at this point.\n"},{"labels":["enhancement"],"text":"To accelerate hit testing, one usually needs to intersect rays (Ray.js) with spheres (Sphere.js). This is a performance critical check.\n\nIt should be possible to both test for an intersection between a Ray and a Sphere as well as figure out where the Ray first hit the Sphere.\n"},{"labels":["enhancement"],"text":"To accelerate hit testing, one usually needs to intersect rays (Ray.js) with AABB boxes (Box3.js).  This is a performance critical check.\n\nIt should be possible to both test for an intersection between a Ray and a Box3 as well as figure out where the Ray first hit the Box3.\n"},{"labels":["enhancement"],"text":"Right now the src/core/Ray class is both a geometric primitive as well as a ThreeJS scene traversal helper that does hit testing.  I would suggest that we create a simple Ray3 geometric primitive that just contains a ray -- which is a highly reusable geometric primitive.  Then we also create a RayCaster class that takes both a ThreeJS scene node (not necessarily the root) and then does hit testing against that and returns one or more intersections.\n\nThis bug will focus on creating the independent Ray3 geometry primitive class.\n\n**Ray3 class:**\n\nProperties:\n- origin as Vector3\n- direction as Vector3\n\nMethods:\n- void set( origin, direction )\n- void copy( ray as Ray3 )\n- Vector3 at( parameter as float ) // moves along ray\n- Ray3 recast( parameter as float ) // creates new ray at location specified in same direction\n- Vector3 closestPointToPoint( pt as Vector3 )\n- Scalar distanceToPoint( pt as Vector3 ) // distance from ray to point.\n- Vector3 closestPointToRay( ray as Ray3 )\n- Scalar distanceToRay( ray as Ray3 ) // distance from ray to ray\n- bool isIntersectionPlane( plane as Plane )\n- Vector3 intersectPlane( plane as Plane ) // returns undefined if no intersection\n- _...other hit testing methods against other primitives...._\n- Ray3 clone()\n- bool equals( ray as Ray3 )\n"},{"labels":["enhancement"],"text":"I'm currently working on a project where it would make my life hella easy if I could pass an array of structs to my shader. I understand I can do it with just WebGL, but it would be nice if Three.js supported passing in structs, and arrays of structs.\n\nRelated to #805 and #678.\n\nThanks!\n"},{"labels":["enhancement"],"text":"I am proposing adding these two functions/methods.  They simplify calculating bounds tremendously and they centralize what is normally a fairly large code chunk into one place.\n"},{"labels":["enhancement"],"text":"I believe the ThreeJS core geometric primitives requires a Axis Aligned Bounding Box (AABB) class for 3-space which for convenience can just be called Box3 (to allow for a future Box2 for 2D cases if required at some point.)\n\nContructors:\n\n```\nBox3 fromMinMax( min as Vector3, max as Vector3 )\nBox3 fromCenterAndWidth( center as Vector3, uniformWidth as Scalar )\nBox3 boundingVertices( vertices as array of Vector3 )\nBox3 boundingIndexedVertices( indices as array of integers, vertices as array of Vector3 )\n```\n\nMember properties:\n\n```\nVector3 minimum\nVector3 maximum\n```\n\nMember methods/functions:\n\n```\nVector3 diagonal()\nVector3 center()\nbool empty()\nfloat volume()\n\nbool containsPoint( point as Vector3 )\nbool containsBox( box as Box3 )\nfloat distanceToPoint( point as Vector3 )\nVector3 clampPoint( point as Vector3 )\nBox3 clampBox( box as Box3 )\n\nvoid includePoint( point as Vector3 ) // makes the box larger\nvoid includeBox( box as Box3 ) // makes the box larger\nvoid expand( expansion as Vector3 ) // expands but center stays fixed\nvoid expandUniform( uniformExpansion as Scalar ) \n\nbool isIntersection( box as Box3 )\nBox3 intersection( Box3 box as Box3 )\nBox3 union( Box3 box as Box3 )\n\nVector3 getParameter( point as Vector3 ) // like a barycoord but for a AABB region instead of a triangle\n\nvoid translate( translation as Vector3 ) // maybe just transform (below) to start with\nvoid transform( transform as Matrix4 )\n```\n\nI can contribute this back to the project if there is acceptance/need for this.\n"},{"labels":["enhancement"],"text":"Here is my proposed specifications for a Sphere class for ThreeJS core:\n\nConstructors:\n- center as Vector3, radius as Scalar.\n\nMember properties:\n- Vector3 center\n- Scalar radius\n\nMember methods/functions:\n- Scalar volume()\n- boolean empty()\n- boolean containsPoint( point as Vector3 )\n- Scalar distanceToPoint( point as Vector3 )\n- Vector3 clamp( point as Vector3 )\n- Box3 bounds() // see proposal for Box3 class in issue #2709\n- void translate( translation as Vector3 ) // might just implement transform for now\n- void transform( transform as Matrix4 )\n\nI can contribute this if there is a desire for it.\n"},{"labels":["enhancement"],"text":"Can we add to the SceneExporter to show the ShaderMaterial?  Something like (around line 570):\n\n``` javascript\n            } else if ( m instanceof THREE.ShaderMaterial ) {\n                var output = [\n\n                '\\t' + LabelString( getMaterialName( m ) ) + ': {',\n                '   \"type\"    : \"ShaderMaterial\",',\n                '   \"parameters\"  : {',\n                '       \"transparent\" : ' + m.transparent + ',',\n                '       \"opacity\" : '   + m.opacity + ',',\n                '       \"wireframe\" : ' + m.wireframe + ',',\n                '       \"wireframeLinewidth\" : ' + m.wireframeLinewidth,\n                '   }',\n                '}'\n\n                ];\n            } \n            else {\n                var output = [\n                '\\t' + LabelString( getMaterialName( m ) ) + ': {}'\n                ];\n            }\n```\n"},{"labels":["enhancement"],"text":"I think ThreeJS is missing a Plane class.  Right now we are using a Vector4 as the plane class, but generally it is considered to be a separate class as the operations on a Vector4 are generally quite different than the operations on a Plane.\n\nFor example, there is a lot of special case code in Frustum.js where it needs to calculate distance to a point from a plane, but it doesn't use a member method but rather it includes the whole plane/point distance equation.\n\nHaving a Plane class will simplify the code for Frustum.js and make it more reusable.  The methods I propose having on the Plane class are as follows:\n- Scalar distanceToPoint( point as Vector3 )\n- Scalar distanceToSphere( sphere as Sphere ) // see proposal for sphere class in issue #2708\n- Vector3 intersectLine( start as Vector3, end as Vector3 ) // return intersection point, returns null if no intersection\n- void transform( transform as Matrix4 ) // transform in place\n- Vector3 reflectPoint( point as Vector3 )\n- Vector3 reflectVector( vector as Vector3 )\n- void flip() // flip in place\n\nIt will also have constructors that take either:\n- normal, distance\n- point, normal\n- point1, point2, point3 // coplanar points.  Degenerate coincident or colinear points would throw error.\n\nMembers properties would be:\n- normal (Vector3)\n- distance (Scalar), which could also be called constant\n\nLet me know if I can contribute this.\n\nI can also modify the Frustum class to use this instead of its Vector4-based representation.\n"},{"labels":["enhancement"],"text":"Below example contains a binary STL loader on line 234. Somebody more capable than I am might be able to trim this down to just the binary STL loader so we can add it to the growing collection of three.js [loaders](https://github.com/mrdoob/three.js/tree/master/examples/js/loaders). This code actually contains three different loaders:  ascii STL, binary STL, and OBJ.\n\n```\n    var camera, scene, renderer, geometry, material, mesh, pointLight;\n\n    var orgX,orgY;\n\n    var container;\n    var move=false;\n    var wire=false;\n\n    function ev_mousedown(e)\n    {\n        if(!mesh)return;\n        e.stopPropagation()\n        if(e.button==0)\n            move=false;\n        else\n        if(e.button==1)\n            move=true;\n            else\n            {\n                wire=!wire;\n                material.wireframe=wire;\n                render();\n                return;\n            }\n        orgX=e.clientX;\n        orgY=e.clientY;\n        document.body.addEventListener('mousemove', ev_mousemove, false);\n    }\n    function ev_mouseup(e)\n    {\n        e.stopPropagation()\n        document.body.removeEventListener('mousemove', ev_mousemove, false);\n        return false;\n    }\n    function ev_mousemove(e)\n    {\n        e.stopPropagation()\n        if(!move)\n        {\n            mesh.rotation.y += (e.clientX-orgX)/200;\n            mesh.rotation.x += (e.clientY-orgY)/200;\n        }\n        else\n        {\n            mesh.position.x += (e.clientX-orgX);\n            mesh.position.y -= (e.clientY-orgY);\n        }\n        render();\n        orgX=e.clientX;\n        orgY=e.clientY;\n    }\n    function ev_mousewheel(e)\n    {\n        e.stopPropagation();\n        if(e.wheelDelta)\n            camera.position.z -= e.wheelDelta/2;\n        else\n            camera.position.z += e.detail*10;\n        render();\n    }\n    function init()\n    {\n        container = document.getElementById(\"webgl\");\n        var width = container.clientWidth;\n        var height = container.clientHeight;\n\n        camera = new THREE.PerspectiveCamera(45,width/height,0.1,10000);\n        camera.position.z = 500;\n\n        scene = new THREE.Scene();\n\n        scene.add(camera);\n        material = new THREE.MeshLambertMaterial({color: 0xCCCCCC,wireframe: false});\n\n        var pointLight = new THREE.PointLight( 0xFFFFFF );\n\n        // set its position\n        pointLight.position.x = 50;\n        pointLight.position.y = 50;\n        pointLight.position.z = 500;\n\n        // add to the scene\n        scene.add(pointLight); \n\n\n        if (\"WebGLRenderingContext\" in window)\n            renderer = new THREE.WebGLRenderer();\n        else\n            renderer = new THREE.CanvasRenderer();\n\n        renderer.setSize( width, height );\n\n        container.appendChild( renderer.domElement );\n\n        document.body.addEventListener('mousedown', ev_mousedown, false); // essential for detecting mouse up/down object manipulation\n        document.body.addEventListener('mouseup', ev_mouseup, false); // essential for detecting mouse up/down object manipulation\n        document.body.addEventListener('DOMMouseScroll', ev_mousewheel, false); // essential in Firefox at least\n        document.body.addEventListener('mousewheel', ev_mousewheel, false); // essential in Chrome and Safari at least\n    }\n\n    function animate() {\n\n        //requestAnimationFrame( animate );\n        render();\n\n    }\n\n    function render() {\n\n\n        renderer.render( scene, camera );\n\n    }\n\n     function dragenter(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    function dragover(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n    function drop(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      var dt = e.dataTransfer;\n      var files = dt.files;\n\n      handleFiles(files);\n    }\n\n    function readObj(oFile, vs, fs)\n    {\n        var l = oFile.split(/[\\r\\n]/g);\n\n        for(var i=0;i<l.length;i++)\n        {\n            var ls=l[i].trim().split(/\\s+/);\n            if(ls[0] == \"v\")\n            {\n                var vv = new THREE.Vector3(parseFloat(ls[1])*100,parseFloat(ls[2])*100,parseFloat(ls[3])*100);\n                var v = new THREE.Vertex();v.position=vv;\n                vs.push(v);\n            }\n            if(ls[0] == \"f\")\n            {\n                var f = new THREE.Face3(parseFloat(ls[1])-1,parseFloat(ls[2])-1,parseFloat(ls[3])-1);\n                fs.push(f);\n            }\n        }\n    }\n    function readAsciiStl(l, vs, fs)\n    {\n        var solid=false;\n        var face=false;\n        var vis=[];\n        vtest={};\n\n        for(var i=0;i<l.length;i++)\n        {\n            var line=l[i];\n            if(solid)\n            {\n                if(line.search(\"endsolid\")>-1)\n                    solid=false;\n                else\n                if(face)\n                {\n                    if(line.search(\"endfacet\")>-1)\n                    {\n                        face=false;\n                        var f = new THREE.Face3(vis[0], vis[1], vis[2]);\n                        fs.push(f);\n                    }\n                    else\n                    if(line.search(\"vertex\")>-1)\n                    {\n                        var cs = line.substr(line.search(\"vertex\")+7);\n                        cs=cs.trim();\n                        var ls=cs.split(/\\s+/);\n                        var vv = new THREE.Vector3(parseFloat(ls[0]),parseFloat(ls[1]),parseFloat(ls[2]));\n                        var v = new THREE.Vertex();v.position=vv;\n                        var vi=vs.length;\n                        if(cs in vtest)\n                        {\n                            vi=vtest[cs];\n                        }\n                        else\n                        {\n                            vs.push(v)\n                            vtest[cs]=vi;\n                        }\n                        vis.push(vi);\n                    }\n                }\n                else\n                {\n                    if(line.search(\"facet normal\")>-1)\n                    {\n                        face=true;\n                        vis=[];\n                    }\n                }\n            }\n            else\n            {\n                if(line.search(\"solid\")>-1)\n                    solid=true;\n            }\n        }\n        vtest=null;\n\n    }\n\n    function triangle(){\n         if(arguments.length==2){ \n             this._buffer=arguments[0]; \n             this._sa = arguments[1]; \n        }else{ \n             this._sa =0; \n            this._buffer = new ArrayBuffer(50);}\n        this.__byte = new Uint8Array(this._buffer);\n        this.normal = new Float32Array(this._buffer, this._sa+0, 3);\n        this.v1 = new Float32Array(this._buffer, this._sa+12, 3);\n        this.v2 = new Float32Array(this._buffer, this._sa+24, 3);\n        this.v3 = new Float32Array(this._buffer, this._sa+36, 3);\n        var _attr = new Int16Array(this._buffer, this._sa+48, 1);\n            Object.defineProperty(this, \"attr\",{get:function(){\n                return _attr[0];},set: function(val){\n            _attr[0] = val;    },enumerable  : true});    \n    };\n    function readBinaryStl(l, vs, fs)\n    {\n        var buf = new ArrayBuffer(l.length);\n        var bbuf= new Uint8Array(buf);\n        for(var i=0;i<l.length;i++)\n            bbuf[i]=l.charCodeAt(i);\n        var trnr=new Uint32Array(buf,80,1);\n        var vis=[0,0,0];\n        vtest={};\n        var offset=84;\n        var face=new triangle();\n        for(var i=0;i<trnr[0];i++)\n        {\n            for(var j=0;j<50;j++)\n                face.__byte[j]=bbuf[offset+j];\n\n            var vv = new THREE.Vector3(face.v1[0], face.v1[1], face.v1[2]);\n            var v = new THREE.Vertex();v.position=vv;\n            var k=\"\"+face.v1[0]+\",\"+face.v1[1]+\",\"+face.v1[2];\n            vis[0]=vs.length;\n            if(k in vtest)\n                vis[0]=vtest[k];\n            else\n            {\n                vs.push(v)\n                vtest[k]=vis[0];\n            }\n\n            vv = new THREE.Vector3(face.v2[0], face.v2[1], face.v2[2]);\n            v = new THREE.Vertex();v.position=vv;\n            k=\"\"+face.v2[0]+\",\"+face.v2[1]+\",\"+face.v2[2];\n            vis[1]=vs.length;\n            if(k in vtest)\n                vis[1]=vtest[k];\n            else\n            {\n                vs.push(v)\n                vtest[k]=vis[1];\n            }\n\n\n            vv = new THREE.Vector3(face.v3[0], face.v3[1], face.v3[2]);\n            v = new THREE.Vertex();v.position=vv;\n            k=\"\"+face.v3[0]+\",\"+face.v3[1]+\",\"+face.v3[2];\n            vis[2]=vs.length;\n            if(k in vtest)\n                vis[2]=vtest[k];\n            else\n            {\n                vs.push(v)\n                vtest[k]=vis[2];\n            }\n\n            var normal = new THREE.Vector3( face.normal[0], face.normal[1], face.normal[2] );\n            var f = new THREE.Face3(vis[0], vis[1], vis[2], normal);\n            fs.push(f);\n\n            offset+=50;\n        }\n        vtest = null;\n        delete bbuf;\n        delete buf;\n        buf=null;\n    }\n\n\n    function readStl(oFile, vs, fs)\n    {\n        if(oFile[0]=='s' || oFile[0]=='S' )\n        {\n            var l = oFile.split(/[\\r\\n]/g);\n            readAsciiStl(l, vs, fs);\n        }\n        else\n        {\n            readBinaryStl(oFile, vs, fs);\n        }\n    }\n    function buildGeometry(l, f)\n    {\n        var vs=[];\n        var fs=[];\n        if(f.name.search(\".obj\")>-1)\n            readObj(l, vs, fs);\n            else\n        if(f.name.search(\".stl\")>-1)\n            readStl(l, vs, fs);\n            else\n            return;\n        for(var i in fs)\n        {\n            var v0=vs[fs[i].a].position;\n            var v1=vs[fs[i].b].position;\n            var v2=vs[fs[i].c].position;\n            var e1=new THREE.Vector3(v1.x-v0.x,v1.y-v0.y,v1.z-v0.z);\n            var e2=new THREE.Vector3(v2.x-v0.x,v2.y-v0.y,v2.z-v0.z);\n            var n=new THREE.Vector3(e1.y*e2.z-e1.z*e2.y, e1.z*e2.x-e1.x*e2.z, e1.x*e2.y-e1.y*e2.x);\n            var l = Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);\n            n.x/=l;n.y/=l;n.z/=l;\n            fs[i].normal=n;\n        }\n        var mx=1e10,my=1e10,mz=1e10;\n        var Mx=-1e10,My=-1e10,Mz=-1e10;\n        for(var i in vs)\n        {\n            if(mx>vs[i].position.x)mx=vs[i].position.x;\n            if(my>vs[i].position.y)my=vs[i].position.y;\n            if(mz>vs[i].position.z)mz=vs[i].position.z;\n            if(Mx<vs[i].position.x)Mx=vs[i].position.x;\n            if(My<vs[i].position.y)My=vs[i].position.y;\n            if(Mz<vs[i].position.z)Mz=vs[i].position.z;\n        }\n        var max = Math.max(Mx-mx,My-my,Mz-mz);\n        max/=200;\n        var cx=(Mx+mx)/2;\n        var cy=(My+my)/2;\n        var cz=(Mz+mz)/2;\n        for(var i in vs)\n        {\n            vs[i].position.x-=cx;\n            vs[i].position.y-=cy;\n            vs[i].position.z-=cz;\n            vs[i].position.x/=max;\n            vs[i].position.y/=max;\n            vs[i].position.z/=max;\n        }\n        var mx=1e10,my=1e10,mz=1e10;\n        var Mx=-1e10,My=-1e10,Mz=-1e10;\n        for(var i in vs)\n        {\n            if(mx>vs[i].position.x)mx=vs[i].position.x;\n            if(my>vs[i].position.y)my=vs[i].position.y;\n            if(mz>vs[i].position.z)mz=vs[i].position.z;\n            if(Mx<vs[i].position.x)Mx=vs[i].position.x;\n            if(My<vs[i].position.y)My=vs[i].position.y;\n            if(Mz<vs[i].position.z)Mz=vs[i].position.z;\n        }\n        geometry = new THREE.Geometry();\n        geometry.vertices = vs;\n        geometry.faces = fs;\n        if(mesh)\n            scene.remove( mesh );\n        mesh = new THREE.Mesh( geometry, material );\n        scene.add( mesh );\n        render();\n    }\n\n    function handleFiles(f)\n    {\n        document.getElementById(\"centered\").style.display = 'none';\n        var reader = new FileReader();\n        reader.onload=function(e){\n            var oFile=e.target.result;\n            buildGeometry(oFile, f[0]);\n        };\n        var file = f[0];\n        reader.readAsBinaryString(file);\n    }\n\n    function example(file)\n    {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET',  file, true);\n        xhr.onload  = function(){\n            document.getElementById(\"centered\").style.display = 'none';\n            var oFile=this.response;\n            f={};\n            f.name=file;\n            buildGeometry(oFile, f);\n      }\n\n        xhr.send(\"\");\n    }\n\n    function load()\n    {\n        init();\n        if (window.File && window.FileReader && window.FileList && window.Blob) {\n        // Great success! All the File APIs are supported.\n            document.body.addEventListener(\"dragenter\", dragenter, false);  \n            document.body.addEventListener(\"dragover\", dragover, false);  \n            document.body.addEventListener(\"drop\", drop, false);  \n        } else {\n          alert(\"The File API is needed for this application! Your browser is not supported!\");\n        }\n    }\n```\n"},{"labels":["enhancement"],"text":"I have been working on a Three.js converter for Fbx files (as well as Collada, Obj, and 3ds). I have based it off alteredq's old fbx  [converter](https://github.com/mrdoob/three.js/tree/dev/utils/exporters/fbx) and the javascript [scene exporter](https://github.com/mrdoob/three.js/blob/dev/examples/js/exporters/SceneExporter.js). So far it seems to be working great with the Three.js Editor.\n\nThe project can be found here: https://github.com/zfedoran/convert-to-threejs\n\nWe should probably replace the existing [converter](https://github.com/mrdoob/three.js/tree/dev/utils/exporters/fbx) since it no longer works with the current Three.js version. Idealy, I'd like to make the new converter a submodule. However, it seems like the current trend is to put everything related to Three.js inside the main repository. I am not sure that this is the best practice going forward. One big advantage to using a submodule is that the `Issues` section will be directly related to the project. \n\nI would love to get your feedback as well as any issues or conversion problems you might have with the tool :)\n"},{"labels":["enhancement"],"text":"I've refactored TorusGeometry in order to speed it up a little. \nGains are modest  in Chrome (15-20%) and better in Firefox (50% or more), depending on the number of segments (more segments, more gain).\n\n// Test:\n\n``` javascript\nfunction testTorus() {\n  var geo, t, t1, t2;\n\n  t1=new Date();\n    for (t=0; t<100; t++)  geo= new THREE.TorusGeometry( 100, 45, 32, 90, 80 );\n  t2=new Date();\n  console.log('Old: ' + (t2-t1));\n\n  t1=new Date();\n    for (t=0; t<100; t++)   geo= new THREE.MyTorusGeometry( 100, 45, 32, 90, 80 );\n  t2=new Date();\n  console.log('New: ' + (t2-t1));\n}\n```\n\n// Code:\n\n``` javascript\nTHREE.MyTorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n  THREE.Geometry.call( this );\n\n  var scope = this;\n\n  this.radius = radius || 100;\n  this.tube = tube || 40;\n  this.radialSegments = radialSegments || 8;\n  this.tubularSegments = tubularSegments || 6;\n  this.arc = arc || Math.PI * 2;\n\n  var u,v,\n      vFactor = 1 / this.radialSegments * Math.PI * 2,\n      uFactor = 1 / this.tubularSegments * this.arc,\n      vXVertex,\n      vYVertex,\n      vZVertex,\n      vCos, vSin, uCos, uSin,\n      i, j,\n      vertices = this.vertices;\n\n  var uvs = [], normals = [];\n\n  for ( j = 0; j <= this.radialSegments; j ++ ) {\n\n    v = j * vFactor;\n\n    vCos = Math.cos( v );\n    vSin = Math.sin( v );\n\n    vXVertex = ( this.radius + this.tube * vCos );\n    vYVertex = ( this.radius + this.tube * vCos );\n    vZVertex = this.tube * vSin;\n\n    for ( i = 0; i <= this.tubularSegments; i ++ ) {\n\n      u = i * uFactor;\n\n      uCos = Math.cos( u );\n      uSin = Math.sin( u );\n\n      var vertex = new THREE.Vector3( vXVertex * uCos, vYVertex * uSin, vZVertex);\n      vertices.push( vertex );\n\n      uvs.push( new THREE.UV( i / this.tubularSegments, j / this.radialSegments ) );\n\n      var normal = new THREE.Vector3( vertex.x - this.radius * uCos, vertex.y - this.radius * uSin, vZVertex) ;\n      normals.push( normal.normalize() );\n    }\n  }\n\n  var tubPlusOne = this.tubularSegments + 1,\n      a, b, c, d,\n      na, nb, nc, nd,\n      va, vb, vc, vd,\n      aj = 0, aj1 = 0,\n      face, faceNormal, faceCentroid;\n\n  for ( j = 1; j <= this.radialSegments; j ++ ) {\n\n    aj = aj1 + tubPlusOne;\n\n    a = aj;\n    b = aj1;\n\n    na = normals[ a ];\n    nb = normals[ b ];\n\n    va = vertices[ a ];\n    vb = vertices[ b ];\n\n    for ( i = 1; i <= this.tubularSegments; i ++ ) {\n\n      //a = aj + i - 1;\n      //b = aj1 + i - 1;\n\n      c = aj1 + i;\n      d = aj + i;\n\n      nc = normals[ c ];\n      nd = normals[ d ];\n\n      face = new THREE.Face4( a, b, c, d, [ na, nb, nc, nd ] );\n      faceNormal = face.normal;\n\n      faceNormal.x = na.x + nb.x + nc.x + nd.x;\n      faceNormal.y = na.y + nb.y + nc.y + nd.y;\n      faceNormal.z = na.z + nb.z + nc.z + nd.z;\n\n      faceNormal.normalize();\n\n      faceCentroid = face.centroid;\n\n      vc = vertices[ c ];\n      vd = vertices[ d ];\n\n      faceCentroid.x = ( va.x + vb.x + vc.x + vd.x ) * 0.25;\n      faceCentroid.y = ( va.y + vb.y + vc.y + vd.y ) * 0.25;\n      faceCentroid.z = ( va.z + vb.z + vc.z + vd.z ) * 0.25;\n\n      this.faces.push( face );\n      this.faceVertexUvs[ 0 ].push( [ uvs[ a ], uvs[ b ], uvs[ c ], uvs[ d ] ] );\n\n      a = d;\n      b = c;\n\n      na = nd;\n      nb = nc;\n\n      va = vd;\n      vb = vc;\n    }\n\n    aj1 += tubPlusOne;\n  }\n};\n\nTHREE.MyTorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\n```\n"},{"labels":["enhancement"],"text":"Hi everybody, \n\njust finished a first version of a deferred rendering example using your lovely library. \n\nhttp://blog.mpanknin.de/?p=848\n\nIt currently supports point light sources as well as deferred shadow maps.\n\nIt does not yet support everything else such as spot lights, point light shadows, etc. There's still a lot to do, however it can already handle a decent amount of  point lights. I was able to render > 1000 point lights on a GTX560 this afternoon. Framerate was something around 50.  \n\nThe G-buffer has to be filled in two passes unfortunately. One for depth and another for normals. No support for multiple MRT's.\n\nIf you are interested then I'm sure that I can release the source sometime. However before doing that I need to clean up a couple of things as the code is a bit messy here and there.\n\nWhat do you think?\n"},{"labels":["enhancement"],"text":"Hello everybody,\n\nI've installed yesterday Opera Mobile and Firefox Mobile on a brand new Android device, and I was surprised to see that the `WebGLRenderer` actually works fine as you can see here (http://caniuse.com/webgl) ! Only problem is, the controls don't work (the `mouse` events are not triggered), in my case in TrackballControls.\nI'm far to be an expert in mobile dev so I open this \"feature request\" while I begin looking into it, I think that could be a really nice addition :)\n"},{"labels":["enhancement"],"text":"How to straightforward use Projective Texturing？\nDoes THREEJS will support this feature？\n![Projective Texturing](https://dl.dropbox.com/u/14540934/201101070038263526.png)\n"},{"labels":["enhancement"],"text":"Hi,\n\nI'm not sure if this is a feature request, a bug report, or just a question... I recently asked about this on Stack Overflow, but so far no-one has been able to offer any insight. The question is here, and shows some details about what I'm trying to do:\n\nhttp://stackoverflow.com/questions/13065018/threejs-how-to-set-current-time-in-animation\n\nWhat I want to do is be able to jump around inside an animation ( I'm using skinning / skeletal animation. ) I've tried setting `animation.currentTime` directly, as well as updating the animation with a negative delta. In both cases if I try to go backward in time the animation breaks. Is this an expected behaviour?\n\nWhat worked for me was calling `stop()` and then `play()` again, with a new start position. I have created a stripped back version of play() that just resets the key cache and calls update() with zero delta. ( Included in the SO question as a progress update. )\n\nIs this a completely bad way of achieving this? \n\nIdeally I'd like to be able to interpolate from one arbitrary time position in the animation to another, ( rather than just jump there ) which is something I plan to work on next. I'd just like to be sure that the functionality doesn't already exist and I'm just somehow looking in the wrong place.\n\nThanks.\n"},{"labels":["enhancement"],"text":"As suggested in this post: http://stackoverflow.com/questions/13067079/additive-reflection-in-three-js  i'd like to request additive reflections.\nIf you have a Environment map which is black and white, you sometimes want to have only the whites to lighten your texture up but not the blacks to darken it. Somehow like a specular reflection, but with an Environment map. Or like an additive blending in photoshop.\n\nThank you guys for your amazing work!\n"},{"labels":["enhancement"],"text":"This demo should be fairly clear:\nhttp://jsfiddle.net/Khbkg/1/\nIt's a wide camera centered inside a cube with faces subdivided by 2. With WebGLRenderer, it looks as expected. With CanvasRenderer, faces that are partially off-screen are sometimes not drawn at all.\n"},{"labels":["enhancement"],"text":"http://code.google.com/p/alembic/\n\nAnyone? :)\n"},{"labels":["enhancement"],"text":"Can not get per vertex coloring to work with the canvas renderer (works with WebGL). Is it only supported by WebGL?\n"},{"labels":["enhancement"],"text":"Using IE10, if I load a DAE file, I get the following error: 'XPathResult' is undefined. It comes from line 197 in ColladaLoader.js. Based on my findings this would occur in other lines as well.\n\nXPathResult is not defined in IE9 or IE10. And neither is the evaluate method. See http://help.dottoro.com/ljagksjc.php\n\nPer http://bytes.com/topic/javascript/answers/528706-ie-equivalent-firefox-document-evaluate, the selectNodes method should be called instead, but the COLLADA variable doesn't have that method defined, not should it per http://help.dottoro.com/ljbcjfot.php.\n\nGiven that these objects still aren't defined in IE10, a workaround may be necessary. I'm still pretty unfamiliar with the code and I'm not sure how to approach this just yet, but I'm willing to help if I can.\n"},{"labels":["enhancement"],"text":"Details here:\nhttp://stackoverflow.com/questions/12600256/three-js-shadow-on-opposite-side-of-light\n\n@alteredq Were you considering implementing this or would it slow down the computation a lot?\n"},{"labels":["enhancement"],"text":"Notice the edges in and out of the face rings socket\n\nhttp://p3d.in/S6ah6/wireonsmooth+subd\n\nUse the subdiv toggle to check on and off\n\nThis is with v49, maybe it already got fixed in newer versions but I woudn't know\n\nAnother small problem is that this model actually has vertex normals creating \"solid\" faces. As soon as you turn SubD it looks smooth shaded\n\nthanks\n"},{"labels":["enhancement"],"text":"I'm creating two `THREE.Shape`'s, adding them into the scene as `ExtrudeGeometry`, and placing them in the same z position. I add the red one and then the blue one to the scene. The `THREE.WebGLRenderer` and `THREE.CanvasRenderer` behave as expected:\n\n!['Expected renderDepth behavior'](http://dl.dropbox.com/u/1595444/experiments/Three.js/screenshots/renderDepth.png)\nExample can be found [here](http://dl.dropbox.com/u/1595444/experiments/Three.js/renderDepth.html).\n\nHowever, when I reverse the renderDepth from { red: 0, blue: 1 } to { red: 1, blue: 0 } the `THREE.WebGLRenderer` behaves as expected, but the `THREE.CanvasRenderer` still renders blue on top.\n\n!['Unexpected renderDepth behavior'](http://dl.dropbox.com/u/1595444/experiments/Three.js/screenshots/renderDepth-inverse.png)\nExample can be found [here](http://dl.dropbox.com/u/1595444/experiments/Three.js/renderDepth-inverse.html).\n"},{"labels":["enhancement"],"text":"I would like to see a \"difference()\" functionality, to cut off a geometric area out of another. Similar to this one: http://en.wikibooks.org/wiki/OpenSCAD_User_Manual/The_OpenSCAD_Language#difference \n\nOr am I missing something? Does something like this already exists? \n"},{"labels":["enhancement"],"text":"- this is a feature\n- i _thinks_ it may be due to `webglRenderer. renderBufferDirect()` function which handles only THREE.Mesh\n  - https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L3202\n"},{"labels":["enhancement"],"text":"- it is an feature\n- http://blog.tojicode.com/2011/12/compressed-textures-in-webgl.html some info from tojiro\n"},{"labels":["enhancement"],"text":"Hey all,\n\nI'm trying to export my model from blender to .js with bump maps.\n\nMy model consists of several meshes, all with different materials and textures applied to the materials. This all works just fine if the materials have only 1 texture applied to them. However, when I apply another texture to one of them and export the file, that mesh no longer loads. Moreover, if I set the new (second texture of the material) texture to be a normal map (Image Sampling -tab in blender), and set its influence to normal, the whole model (with all geometry) disappears when rendering. The function with which I am creating the model in webgl is:\n\n(in function init())\n\n```\nloader.load( \"huts/hut2.js\", function( geometry ) { createScene( geometry,  0, -200, 0, 100 ) } );\n```\n\n(and separately)\n\n```\nfunction createScene( geometry, x, y, z, b ) {\n            var material = new THREE.MeshFaceMaterial();\n\n            mesh = new THREE.Mesh( geometry, material );\n            mesh.position.set( x, y, z );\n            mesh.scale.set(50, 50, 50);\n            mesh.castShadow = true;\n            mesh.receiveShadow = true;\n            mesh.dynamic = true\n            scene.add( mesh );\n\n            renderer.render( scene, camera );\n}\n```\n\nI have also tried to apply geometry.computeTangents(); and geometry.computeFaceNormals(); in the createScene function but with no luck.\n\nAny and all help would be much appreciated! I have been trying to search all over the net for an answer but haven't been able to find one yet.\n"},{"labels":["enhancement"],"text":"I added support for user defined properties to three.js in my repo.\n\nThe rational is that many scenegraphs contain information, which is needed to support the business logic, \nbut not necessary displayed in the three D model.\n\nAn explanation could be found in [https://github.com/skfcz/three.js/wiki/Nested-Scene-Graph].\n\nThe changes are contained in [https://github.com/skfcz/three.js/commit/47d716b7ac3860c5c572c2a24ab806f8626e5d77]\n"},{"labels":["enhancement"],"text":"Hi, I know that you guys are busy and I saw an issue like this on here before but I can't find it. I have noticed that there are missing cubes in the loaded collada model that are present in the original blender file.\n\nWebGL version of model:\n\nhttp://ebsmarketing.com/webgl/test-2/missing-cubes.png\n\nBlender original:\n\nhttp://ebsmarketing.com/webgl/test-2/blender-orig-with-wood.png\n\nI don't understand why some of the cubes don't appear because when I slowly built up the model, bouncing back and forth between seeing it in blender and seeing the browser results, everything showed apart from the wood (in the example), and the bottom metal skirting - I'd get it if there was a limit to how much items you can put in a model but there isn't.\n\nFor example, the red cabinet (where the missing wood is) was built first, then the wood, then the tea/coffee cylinders on top of the wood.\n\nI've even checked the dae file to see if the wood section (Cube.061 - I think) wasn't transferred in the export but it is there.\n\nIs this a bug or have I done something wrong?\n\nIf you need any more info/files, please let me know, however, all should be in this link:\n\nhttp://ebsmarketing.com/webgl/test-2/\n\nMany thanks.\n\nJames.\n"},{"labels":["enhancement"],"text":"Many exporters put a double-sided flag in an effect's `<extra>` area to indicate that back faces should be rendered. As an [example](http://sketchup.google.com/3dwarehouse/details?mid=fc02c9ad26a5cea7afb63e633b6a86a5) from Google SketchUp:\n\n```\n<effect id=\"material_3_4_0-effect\" name=\"material_3_4_0-effect\">\n   <profile_COMMON>\n      ...\n      <extra>\n         <technique profile=\"GOOGLEEARTH\">\n            <double_sided>1</double_sided>\n         </technique>\n      </extra>\n   </profile_COMMON>\n</effect>\n```\n\nIt should be checked for `.//extra//double_sided` in an effect because different exporters put it under different techniques, but it's always called \"double_sided\".\n\nIt can also be put on a geometry, not on a material. I'm not sure if three.js supports setting doubleSided on a geometry instead of a material? Anyway, here's an [example](https://bitbucket.org/sebby_man/gameengine2011/src/6b88fa77a60f/data/meshes/camera.dae) of that:\n\n```\n<geometry id=\"Cube_001-mesh\" name=\"Cube.001\">\n    <mesh>\n        ...\n    </mesh>\n    <extra>\n        <technique profile=\"MAYA\">\n            <double_sided>1</double_sided>\n        </technique>\n    </extra>\n</geometry>\n```\n\nIf there's no way to set it on a geometry, a workaround could be to make a copy of the material and set the doubleSided flag for geometries that specify it.\n"},{"labels":["enhancement"],"text":"Hello, \n\non https://github.com/skfcz/three.js you find an enhanced version of the SceneLoader which supports\nnested (multilevel) scenes. The change is intended to be minimal, an example html and scene\n( https://github.com/skfcz/three.js/blob/master/examples/scenes/test_scene_nested.js ) is provided as well.\n\nNested Scenegraphs have been desired by others as well, I need this to display product structures, \nsee www.cadoculus.de \n\nI would be glad if this could find the way in the offical repo.\n\nBye, Carsten \n"},{"labels":["enhancement"],"text":"I exported a model with three.js exporter for blender. Every thing works fine, exept for the animations. when i log the geometry.animation it is undefined. And when i open the JSON file i can't find anything about the animation part. my conclusion is that the blender script is exporting everything but the animation (i did check the animation checkbox in the export menu). Is there anyway i can fix this?\n"},{"labels":["enhancement"],"text":"Is there a converter to convert JSON models to OBJ please? I tried OBJ and JSON Converter by Andrew McRobb (http://www.downloadatoz.com/miscellaneous_directory/obj-and-json-converter/ and numerous other download sites) but cannot seem to get it to produce anything.\n"},{"labels":["enhancement"],"text":"Im new to three.js, does the exporter for blender, export particle hairs. i've been trying to render a model but for some reason the hair is not been rendered \n"},{"labels":["enhancement"],"text":"```\nvar objects = [];\n\nvar camera, scene, renderer;\n\ndocument.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\ninit();\nrender();\n\nfunction onDocumentMouseDown( event ) {\n    event.preventDefault();\n    var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );\n    projector.unprojectVector( vector, camera );\n    var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );\n    var intersects = ray.intersectObjects( objects );\n    if ( intersects.length > 0 ) {\n        console.log(intersects[ 0 ].object);\n    }\n}\n\nfunction init() {\n\n    container = document.getElementById( 'container' );\n    scene = new THREE.Scene();\n    camera = new THREE.PerspectiveCamera( 90, window.innerWidth / window.innerHeight, 1, 1100 );\n    camera.position.z = 50;\n    scene.add( camera );\n\n\n    var particle = new THREE.Particle( new THREE.ParticleBasicMaterial( { map: THREE.ImageUtils.loadTexture( \"img/satellite.png\" ) } ) );\n    objects.push( particle );\n    //particle.scale.x = particle.scale.y = 0.25\n    scene.add( particle );\n\n    projector = new THREE.Projector();\n    renderer = new THREE.CanvasRenderer();\n    renderer.setSize( window.innerWidth, window.innerHeight );\n    container.appendChild( renderer.domElement );\n}\n\nfunction render() {\n    camera.lookAt( scene.position );\n    renderer.render( scene, camera );\n}\n```\n\nAs a result, we get clickable particle with a texture. But I don't understand several things:\n- Why the \"clickable\" area of particle is so small? It works only if I click in the middle of a particle.\n- Why is that particle so huge? The texture is this 16×16 .png file and the particle is way more bigger than 16×16. How can I fix that? Yes, I know about particle.scale, that will make particle look smaller. But, the \"clickable\" area of particle woukd also become smaller.\n\nPS Copy from http://stackoverflow.com/questions/11339557/three-js-troubles-with-the-size-of-texture\n"},{"labels":["enhancement"],"text":"please add applyMatrix function to THREE.BufferGeometry().\n"},{"labels":["enhancement"],"text":"I've completed an octree for THREE, and it can be found at: https://github.com/collinhover/threeoctree\n\nTried to make it as close as I could to the general THREE structure, and I think it performs well... increased my raycasting speed by about 50x in a scene of 5 - 10k faces. Also did quite a few tests so it should be bug free! Perhaps the octree could become a built in feature to THREE?\n"},{"labels":["enhancement"],"text":"Hi!\n\nIf I try to run three.js demos on my mobile phone, then it only works, if I use CanvasRenderer. I tried all of the examples in FireFox and Opera mobile, but they don't work with webGl renderer.\n\nThere may be a bug in the webGl renderer, and that's why the scene isn't rendered. I don't get any error message if I put the whole code in try-catch. If I use Opera Mobile emulator on win7, then everything works perfectly... Maybe there is not enough memory in my phone, or something. \n\nBut somehow this examples work:\n- http://learningwebgl.com/blog/?page_id=1217\n- http://media.tojicode.com/q3bsp/?tesselate=2\n\nIf the simplest threejs webgl demo doesn't work, then how can toji's quake demo run?\n"},{"labels":["enhancement"],"text":"The blender `export_threejs.py` script includes the following [code](https://github.com/mrdoob/three.js/blob/master/utils/exporters/blender/2.63/scripts/addons/io_mesh_threejs/export_threejs.py#L1006):\n\n```\n        if export_single_model:\n            if flipyz:\n                # that's what Blender's native export_obj.py does\n                # to flip YZ\n                X_ROT = mathutils.Matrix.Rotation(-math.pi/2, 4, 'X')\n                mesh.transform(X_ROT * object.matrix_world)\n            else:\n                mesh.transform(object.matrix_world)\n```\n\nWhen exporting a single mesh, this appears to work correctly: Y and Z are flipped iff the \"Flip YZ\" option is checked.\n\nWhen exporting a scene, `export_single_model` is false, so this block of code is not used, but the Y and Z coordinates are still flipped somehow in the resulting meshes. This occurs **whether or not \"Flip YZ\" is checked.**\n\nI would like to fix this, but I can't find out where the flipping is occurring. Any pointers?\n"},{"labels":["enhancement"],"text":"It seem that SceneLoader add objects only to scene.\nIs it possible to have an  \"object.childs\" to work with the Object3D.child[ ]. (with a recursiv function maybe)\n\nHow do you manage \"solar system like\" scene, otherwise?\n"},{"labels":["enhancement"],"text":"I'm using Meshlab to convert files from one format to obj. These 3d meshes have coloring defined per vertex. The way Meshlab exports them is as following:\n\nv x y z r g b\n\nHowever, there's no implementation for this in OBJLoader or the python obj converter.\nMy question is, is this a Meshlab problem, or is there just currently no implementation for reading per vertex coloring from obj files?\n"},{"labels":["enhancement"],"text":"Using 'S' key or pressing mouse middle button then move forward / back is so weird, can this behavior be optimized more comfortably?\nthanks a lot, this is a great engine, i'm using it for a globe model operation, so zooming easily s a must.\n"},{"labels":["enhancement"],"text":"hi,\n\nis it possible to load .nrrd 3d-volume files to three.js? i came across it here: http://lessons.goxtk.com/10/\nbut i think it is hard to get started with that library. i don't even know how to add mousevents to that mesh...\n\nthanks in advance\n"},{"labels":["enhancement"],"text":"I'm happy to write this but would love your feedback before I start.\n\nI think based on the code I see I would basically use ShaderMaterial for my material and then make some new kind of Geometry? CustomGeometry? WebGLCustomGeometry? It would require the user to allocate its own buffers? I guess the question then it should it have a say a \"draw\" function that WebGLRenderer calls or should it setup some map of attributes/buffers/offsets/strides to allow WebGLRenderer to do he setup?\n\nOr something else?\n\nThoughts?\n"},{"labels":["enhancement"],"text":"crossOrigin attribute in ImageUtils causes cross domain security error for images loaded from data-URIs (Chrome)\n"},{"labels":["enhancement"],"text":"In TrackballControls.js,\n   this.radius = ( this.screen.width + this.screen.height ) / 4;\nwhich seems to mean that if the 'screen' is not a square then moving the mouse near the middle of either of the long sides of the rectangle will cause x or y rotations rather than z rotations. Is this intentional? I get what seems to me to be better behaviour if I set the radius to (min(width,height)/2)*0.9.\n\nOn a somewhat related note, in examples/webgl_trackballcamera_earth.html in onWindowResize() it does\n   camera.radius = ( width + height ) / 4;\nShouldn't that be controls.radius rather than camera.radius?\n"},{"labels":["enhancement"],"text":"I was trying to tackle the issue of having images loading async and not having control on when they get loaded so the object displays black.\n\nAfter looking at [PxLoader](http://thinkpixellab.com/pxloader/), I was considering something along the lines of this...\n\n``` javascript\nvar tracker = new THREE.LoadTracker();\ntracker.addEventListener( 'complete', render );\n\nvar loader = new THREE.ImageLoader( tracker );\nvar texture = loader.loadTexture( 'blah.png' );\n\nvar loader = new THREE.JSONLoader( tracker );\nloader.load( 'bleh.js', function ( geometry ) {\n    var mesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );\n} );\n```\n\nor we can also return an empty geometry (or object) in the .load() call...\n\n``` javascript\nvar tracker = new THREE.LoadTracker();\ntracker.addEventListener( 'complete', render );\n\nvar loader = new THREE.ImageLoader( tracker );\nvar texture = loader.loadTexture( 'blah.png' );\n\nvar loader = new THREE.JSONLoader( tracker );\nvar geometry = loader.load( 'bleh.js' );\n\nvar mesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );\n```\n\nThis would replicate what we usually do now:\n\n``` javascript\nvar tracker = new THREE.LoadTracker();\n\nvar loader = new THREE.ImageLoader( tracker );\nvar texture = loader.loadTexture( 'blah.png' );\n\nvar loader = new THREE.JSONLoader( tracker );\nvar geometry = loader.load( 'bleh.js' );\n\ntracker.addEventListener( 'complete', function () {\n    var mesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );\n} );\n```\n\nIs there a better name than `LoadTracker`? I was thinking `LoaderManager` but is not really managing... \n\nThoughts?\n"},{"labels":["enhancement"],"text":"This almost feels like I'm on some crazy geometry spree.\n\nParametric surfaces ftw, credits to @prideout for his brilliant article http://prideout.net/blog/?p=44\n\nhttp://jsbin.com/ivekup/3/edit#preview\n\nUVs to be done another day... :)\n"},{"labels":["enhancement"],"text":"When drawing a `THREE.Line` with the type set to `THREE.LinePieces`, the geometry should be drawn as lines connecting pairs of vertices. This works properly with the WebGL renderer, but not with the canvas renderer. Instead, the canvas renderer always draws as though the type is set to `THREE.LineStrip`.\n\nIs this a deliberate limitation of the canvas renderer?\n\nEDIT: Updated to r48 and it's fixed. Nevermind\n\nEDIT2: Okay, turns out that didn't fix it.\n"},{"labels":["enhancement"],"text":"UPDATED\n\nI have filled out the missing rotation conversion functions, and addressed bugs in existing routines ( see #1502 ). Here is the list of the rotation conversion routines:\n\n``` javascript\nQuaternion.setFromAxisAngle( axis, angle )\nQuaternion.setFromRotationMatrix( m )\nQuaternion.setFromEuler( v, order )\n\nVector3.setEulerFromQuaternion( q, order )\nVector3.setEulerFromRotationMatrix( m, order )\n\nMatrix4.setRotationFromQuaternion( q )\nMatrix4.setRotationFromEuler( v, order )\nMatrix4.makeRotationAxis( axis, angle ) <-- this is a \"make\" routine\n\nVector4.setAxisAngleFromQuaternion( q )\nVector4.setAxisAngleFromRotationMatrix( m )\n```\n\nAnd here is a chart showing what is new and what is changed:\n\n``` javascript\n                 new by WL\nunit quaternion   ----->   unit axis-angle\n                  <-----\n                                | ^\n                                | | new by WL\n                                v |\n\nunit quaternion   ----->   rotation matrix\n                  <-----\n               replaced by WL\n\n                                ^ |\n                                | | replaced by WL\n                                | v\n\n                 new by WL\nunit quaternion   ----->   Euler angles ( 6 orders )\n                  <-----\n               replaced by WL\n```\n\nI'm not sure if you'll want to use all these routines, but I wanted to create them all so I could use them as a basis for testing.\n\nHave a look at this fiddle ( http://jsfiddle.net/HSHTt/1/ ), which computes rotations in varying ways, and also uses different values for the `eulerOrder.` I believe everything is working properly. \n\nPerhaps someone else will have a better way to verify the correctness of these routines. The edge effects are a nightmare, quite frankly -- especially the Euler angle calculations.\n\nI have remained consistent with the Three.js policy of making the following assumptions regarding arguments passed as inputs to functions:\n    1. an axis is assumed to be normalized,\n    2. a rotation matrix is assumed to be unscaled, and\n    3. a quaternion is assumed to be normalized.\n\nThese assumptions are not checked on input.\n\nAlso for naming consistency, I have made changes to the signature of one routine:\n\n`Vector3.getRotationFromMatrix( m, scale )`\n\nis replaced by\n\n`Vector3.setEulerFromRotationMatrix( m, order ).`\n\nSince the input matrix is assumed to be unscaled, the scale argument is not needed. ( see #1540 )\n"},{"labels":["enhancement"],"text":"So seems like with @spite we figured out the shader code for this type of reflection :)\n\nhttp://www.clicktorelease.com/code/latitudeReflectionMapping/\nhttp://dl.dropbox.com/u/7508542/three.js/latitude/index.html\nhttp://dl.dropbox.com/u/7508542/three.js/latitude/refraction.html\n\n``` javascript\nvertexShader: [\n\n    \"varying vec3 vReflect;\",\n\n    \"void main() {\",\n        \"vec4 mPosition = objectMatrix * vec4( position, 1.0 );\",\n        \"vec3 nWorld = normalize( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );\",\n        \"vReflect = normalize( reflect( normalize( mPosition.xyz - cameraPosition ), nWorld ) );\",\n        \"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n    \"}\"\n\n].join( '\\n' ),\n\nfragmentShader: [\n\n    \"uniform sampler2D tDiffuse;\",\n    \"varying vec3 vReflect;\",\n\n    \"void main(void) {\",\n        \"float PI = 3.14159265358979323846264;\",\n        \"float yaw = .5 - atan( vReflect.z, - vReflect.x ) / ( 2.0 * PI );\",\n        \"float pitch = .5 - atan( vReflect.y, length( vReflect.xz ) ) / ( PI );\",\n        \"vec3 color = texture2D( tDiffuse, vec2( yaw, pitch ) ).rgb;\",\n        \"gl_FragColor = vec4( color, 1.0 );\",\n    \"}\"\n\n].join( '\\n' )\n```\n\n@alteredq should I try to implement?\n"},{"labels":["enhancement"],"text":"I have been working on some javascript 3D file format decoders, OFF, STL, OBJ, PLY and currently VTL.\nHow might I contribute to your project ?\n\nHere are my pages.  I hope to consolidate and refactor them into a concise library.\nThey run on firefox, chrome, safari and IE10 preview.\n\nhttp://www.ctyeung.com/JQuery/DecodePLY/TestPLY.html\nhttp://www.ctyeung.com/JQuery/DecodeOBJ/TestOBJ.html\nhttp://www.ctyeung.com/JQuery/DecodeSTL/TestSTL.html\nwww.ctyeung.com/JQuery/DecodeOFF/TestOFF.html\n\nCT\n\nChi T. Yeung\n5040 Washburn Avenue South\nMinneapolis, MN 55410\nwww.ctyeung.com\n"},{"labels":["enhancement"],"text":"Hi,\n\nFirst thank you for your amazing work. I am stunned by what that library can do!\nI am using three.js with a dae on an ipad.\nNow what i want to do is \n- select an object with touch\n- make all other objects' opacity to 0.2 and the selected to 1.0\n  This would make it clear what object you selected.\n\nNow my problem is that the same material is shared by almost all objects in the dae. So applying opacity to one object's material will actually apply it to almost all objects in the dae.\n\nSo my idea was to use traverseHierarchy on dae loading and do something like \nobject.material = object.material.clone()\n\nBut that doesnt work. So my question is how can i clone a material?\nOr may be there is another way of doing what i want ...\n\nThank you \n"},{"labels":["enhancement"],"text":"While looking for some leak in my post-process code i found that my `RenderTargets` were never released i fixed it with this code in `WebGLRenderer.js`\n\nI'm not sure for the \"isCube\" part because i'm not using dynamic cubemaps but i think it should work fine.\n\n``` javascript\nthis.deallocateRenderTarget = function ( renderTarget ) {\n\n    if ( !renderTarget || ! renderTarget.__webglTexture ) return;\n\n    var isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\n    _gl.deleteTexture( renderTarget.__webglTexture );\n\n    if ( isCube )\n    {\n        for ( var i = 0; i < 6; i ++ ) {\n\n            _gl.deleteFramebuffer( renderTarget.__webglFramebuffer[ i ] );\n            _gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer[ i ] );\n        }\n    }\n    else\n    {\n        _gl.deleteFramebuffer( renderTarget.__webglFramebuffer );\n        _gl.deleteRenderbuffer( renderTarget.__webglRenderbuffer );\n    }\n};\n```\n\nPS: sorry i didn't send a pull request because my git client crashed...\n"},{"labels":["enhancement"],"text":"I plan to use webgl globe to visualize dns access data for one specific day, the day contains 24 datasets, say, one dataset for one hour. initially I load the whole 24 data sets, and make 24 corresponding morph targets for these datasets. Visualization for one morph target on the globe consists of a lot of colorful cubes, the color for every cube is related to the dns access value on that location,the height of every cube represents the dns access value on the location; So as the morph target changes, the height of every cube changes as well, but color for the cube does not change at all.(color has  already been stored when initializing the morph target)\nSo my question is: can we change the height and color at the same time dynamicly? can \"morphColors\"(similar to morphTargets?) attribute for Mesh  help such issues? \n"},{"labels":["enhancement"],"text":"The idea for a drag control has been lingering for sometime (had the impression that some were also requesting for this feature), so thanks to @chandlerprall for suggesting the possibly of a \"plane-less\" moving of objects in issue #1514, I've implemented a THREE.DragControls as illustrated in here.\n\nhttp://jsfiddle.net/S6Gq9/1/\n\nto use it, one simply have to add\n\n```\n// activate Drag Controls\nvar dragcontrols = new THREE.DragControls(camera, scene, renderer.domElement); \n```\n\none benefit of the planeless version is that its much easier to \"inject\" into most scenes without adding additional planes\" (for example with use with ThreeInspector, and another benefit is that you get less errors when the invisible plane surface is not large enough (esp at the corners of the page).\n\nany other suggestions or bugs with this? perhaps we could have an activate/deactivate function like\n`dragcontrols.activate()` and `dragcontrols.deactivate()`? \n"},{"labels":["enhancement"],"text":"while using three inspector i noticed if\n\n``` javascript\nparent = new THREE.Object3D();\nparent.add(mesh1);\nparent.add(mesh2);\nparent.visible = false;\n```\n\nmesh1 and mesh 2 are still visible.\nis this intended or bug?\n"},{"labels":["enhancement"],"text":"@zz85 (as author of this code, as I understand it)\n\nI've been using the Path implementation to convert SVG path strings into Shapes that then get extruded into 3d things.  I have this working, but encountered various issues with the arc implementation and had to hack things.  Since a lot of the issues are inter-related, I'm going to call them all out here:\n- Path.getPoints assumes that all of the actions in path.actions have their last point as the last two arguments in the list.  This is not the case for arcs, where the last two arguments are aEndAngle and aClockwise.  This can be addressed by computing the last point and pushing it.  This is not a problem if the arc is the last (or only) curve in a path.\n- Path.getPoints does not generate points for moveTo.  This appears to be for two reasons:\n  - The semantics for Path.arc(aX, aY, ...) place the center of the arc at (lastPoint.x + aX, lastPoint,y + aY) and the idiom in webgl_geometry_shapes.html is to do shape.moveTo(0, 0); shape.arc(aX, aY, ...).  Since the last point is not actually on the curve but rather at its center, generating a vertex there would mess things up.  Because all of those arcs are full circles, the lack of the initial point on the circle is beneficial because of the next issue:\n  - The triangulation routine appears to not want a closed shape; it gets upset if it sees the same vertex multiple times or if two vertices are too close together (less than epsilon apart).  This can be dealt with by having Path.getPoints remove the last point if it is within epsilon of the first point in the shape.  (If a closed shape is desired, as indicated by the closedPath argument, the first point can be put back.)\n\nIt's not clear what to do about the existing semantics of Path.arc.  Its signature resembles Canvas's arc method, except that Canvas.arc's coordinates are absolute and its fifth argument is anticlockwise (versus aClockwise where the 'a' is a hungarian notation-esque thing).  However, that change would not be backwards compatible with existing moveTo commands.  Canvas spec: http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\n\nFor reference, my SVG path parsing logic (focusing on the A command) can be found here: https://github.com/asutherland/d3-threeD/blob/master/lib/d3-threeD.js#L167\n\nMy patched version of three.js (including the updated shape example) is here:\nasutherland/three.js@dfa7e4cdf179811cd42992916653dd8a14c68b40\n"},{"labels":["enhancement"],"text":"Discussed this briefly in #1374. If the vertices for a geometry are not centered around the local origin, it can cause z-sorting and culling issues since they both assume the geometry is centered. This code illustrates the z-sorting issue:\nhttp://jsfiddle.net/zYnqL/\n\nYou can comment out the section under \"Z-sorting looks bad\" and uncomment the section under \"Z-sorting looks good\" to see the transparency as it should look. The bug could be fixed by adding a `position` property to `boundingSphere` that indicates the COG. @mrdoob I can implement the fix later, I just wanted to raise this issue so you could see it. I know you've got a handful of pull requests already so I'll hold off on creating a new one for now.\n"},{"labels":["enhancement"],"text":"faces with > 4 verts (ngons) are ignored by the obj converter\n\nhere's a simple test file\n\nhttp://3developer.com/tmp/ngonCube.obj\n"},{"labels":["enhancement"],"text":"The intersectObject code should split non-planar Face4s into two Face3s.\n\nhttps://github.com/mrdoob/three.js/blob/master/src/core/Ray.js\n"},{"labels":["enhancement"],"text":"We have some models that have very small geometry and I found I was not able to mouse pick them using the Ray class. I did some testing and found that the check on line 116 of Ray.js was failing. I changed the check from\n\n``` javascript\nif ( Math.abs( dot ) < 0.0001 ) continue;\n```\n\nto\n\n``` javascript\nif ( dot === 0 ) continue;\n```\n\nand then I was able to pick the small geometries. For reference, one of the geometries has a bounding sphere with radius 0.0225 and when I picked it, the value of `dot` was -0.0000466.\n\nObviously doing === is bad for floating point comparisons, so you need to have some sort of precision you check with. I looked through the code and it looks like Ray, Vector2, and Vector3 use 0.0001 and Quaternion uses 0.001. Could these be replaced with a `THREE.Precision` variable that defaults to 0.0001 but could be changed by users? Or is there just a minimum geometry size that is supported?\n"},{"labels":["enhancement"],"text":"Hi,\n\nI was left unsure about the final verdict on this one so just to clarify am I right in saying that this is a bug: http://gnitsuk.leadhoster.com/ThreeTest/Test5.html (Click to start rotation).\n\nThat both in CanvasRenderer AND WebGLRenderer the doubleSided property of the mesh does NOT work as regards responding to lighting.\n\nSorry if this was already said or a fix given I just wanted to be sure, I really need this double sided lighting in what I'm doing and so any fix/workarounds would be good to know in the meantime I'll keep on experimenting.\n\nThanks,\nMitch.\n"},{"labels":["enhancement"],"text":"All\n\nusing the blender exporter with blender 2.6\\* and selecting lights in the export dialog, I only seem to only get a single default light.  Debugging exporter in Eclipse seems to show that the 'lights' data is empty.  Any suggestions?\n"},{"labels":["enhancement"],"text":"It seems that `THREE.SceneUtils.cloneObject()` doesn't clone cameras or lights.\n\nThis isn't a priority item, but leaving this issue to see if anyone wants to take it on.\n"},{"labels":["enhancement"],"text":"As can be seen in this fiddle: http://jsfiddle.net/87w27/ , spotlights are just pointlights as far as lumination calculations are concerned.\n\nIn the fiddle, the diffuse hotspot and the specular hotspot remain fixed, even as the spotlight changes direction.\n"},{"labels":["enhancement"],"text":"Is it okay if I do that? I just added arguments for `THREE.Vector3`, because they weren't obvious to me before, so I thought I'd share the knowledge.\n\nI'm not sure how that works around here... (I'm new to THREE but already deeply in love.)\n\nPS. https://github.com/mrdoob/three.js/wiki/API-Reference#wiki-THREE.Vector3\n"},{"labels":["enhancement"],"text":"hi,\nI found a example of fog effect but it's based on Webgl renderer,\nso is there any way to simulate fog effect on CanvasRenderer?\n"},{"labels":["enhancement"],"text":"All,\n\n   As far as i can tell the y flip selection in the blender exporter transforms the geometry but not the associated location and rotation fields of the shape in the JSON file.   If a shape is not at 0,0,0 then the y flip will change its location also, I think.\n"},{"labels":["enhancement"],"text":"I noticed the blender exporter only outputs a single camera definition even though I define multiple cameras in my blender scene.  Is this an oversight oe by design??\n\nOn a side note do I or does someone else set the label as bug / question etc??  New git user.\n"},{"labels":["enhancement"],"text":"Hi there,\n\nI can't seem to get SphericalReflectionMapping to work (as well as LongLat), just CubeMapping seems to work. \n\nThis works:\nvar envMap = THREE.ImageUtils.loadTextureCube( urls );\n\nThis does not:  \nvar envMap = THREE.ImageUtils.loadTexture(image, new THREE.SphericalReflectionMapping() );\n\nAnything wrong with that code?\n\nThe only example I could find with Spherical Mapping in a webgl environment is the webgl_sandbox example: there the lines of code dealing with materials with an spherical environment map are commented out. Removing the comments does not lead to working materials as well...\n\nThanks for any help!\nSimon\n"},{"labels":["enhancement"],"text":"I was wondering why, when converting models with convert_obj_three.py, materials with mapAlpha don't have the transparent flag set. As far as I see it, mapAlpha textures are only rendered transparent when this flag is set. So why not add the transparent flag directly to the resulting model.js file whenever a mapAlpha is set, instead of setting it in the main script in the JSON callback?\n\nI patched my convert_obj_three.py with\n\n``` python\n# Alpha texture\n# map_d texture_alpha.png\nif chunks[0] == \"map_d\" and len(chunks) == 2:\n    materials[identifier][\"mapAlpha\"] = texture_relative_path(chunks[1])\n    materials[identifier][\"transparent\"] = True  ## added this line\n```\n\nand for me it seems to do what I'd expect. The output .js simply has the transparent flag added.\n\n``` javascript\n\"materials\": [ {\n...\n\"mapAlpha\" : \"earth_clouds_1024.png\",\n\"mapDiffuse\" : \"earth_clouds_1024.png\",\n\"opticalDensity\" : 1.0,\n\"specularCoef\" : 0.0,\n\"transparency\" : 1.0,\n\"transparent\" : true  // transparent flag is added\n},\n```\n\nIs this a good idea, or is there a reason why the transparent flag is not set \"automatically\"?\n"},{"labels":["enhancement"],"text":"I have been working on integrating THREE.js with Crafty (https://github.com/louisstow/Crafty) to take advantage of the entity/component system. Crafty has a single function for loading in different assets which gives the option for passing progress and error callbacks. Although the loaders use a progress callback internally, each of them throws an error on failure and doesn't allow the caller to set a progress callback. Is it possible to make a consistent API for the loaders which allows tracking of success, progress and failure by the caller, and makes it easier to use them interchangeably?\n    It seems like separating the XHR functions and the code which actually parses the loaded data might be a good idea, since the XHR code is similar across most of the classes. If the API  separated the functionality of creating geometry, animations etc from already loaded data it would be easier to integrate the loaders into other projects which already handle the XHR side of things.\n"},{"labels":["enhancement"],"text":"I guess we should add these?\n\nhttp://games.greggman.com/game/webgl-and-alpha/\n"},{"labels":["enhancement"],"text":"When rotating a sprite, which isn't 1:1 in scale, it skews the image. The expected result in my opinion would be for it to actually render the sprite with the scale it had before the rotation, while still rotating the image correctly. \n\nYou can see the issue here: \nhttp://hertzen.com/experiments/threejs/sprite.html\n\nCheck the checkbox and note how the sprite is skewed when rotated, especially visible at 90 and 270 degrees. The rotation works fine if the sprite would be 1:1 in scale. If this is the incorrect way to be rotating the sprite, how should it be done then?\n\nIf it is working as intended, then I would propose a method for sprites called rotate or something which would rotate the image and do the appropriate scaling as well, or alternatively add support for Object3D to rotate its child sprites.\n"},{"labels":["enhancement"],"text":"I use Skeletal animation in my scene and I want to add shadow to the animated mesh, but I fail. \nWhen I examine the code, it seems that only \"_depthMaterialMorph\" is provided(in WebGLRenderer.js  line:130), can you provide shadow for Skeletal animation?\n"},{"labels":["enhancement"],"text":"Do sprites work with CanvasRenderer or is it a known limitation that they don't?   I tried changing the WebGL sprite example to use CanvasRenderer, and I couldn't get it to display, so I'm guessing that this is just a known limitation.\n"},{"labels":["enhancement"],"text":"https://github.com/mrdoob/three.js/tree/master/src/extras/controls \n\nnone supports touch events. \n\non mobile, touch events and canvasrenderer are usefull.\n"},{"labels":["enhancement"],"text":"Freeze in `FirstPersonControls` doesn't seem to work for me. Not sure if this is the intended feature, but it seems to work better this way.\n\nhttps://github.com/zz85/three.js/commit/2399ccc9d2e49fa9742b0d0f2390cdc3f6e48345\n\nAs an observation, I find that using deltas for updating in render() causes lots jerkiness. To investigate, open shadowmapping example and add this.\n\n``` javascript\nvar minDelta = Number.POSITIVE_INFINITY, maxDelta = Number.NEGATIVE_INFINITY;\nfunction render() {\nvar delta = clock.getDelta();\nminDelta = Math.min(minDelta, delta);\nmaxDelta = Math.max(maxDelta, delta);\n```\n\nnear the render block. I often get ~ 0.4 for max values and 0.015 for min values. That means, at certain frames, the camera+animation seems to at a halt, and at certain frames move across much faster, making animation look really jerky.\n\nYeah, this is really weird, because i guess that's what the clock's delta was meant for,  but if I fix delta at say 0.025, I seems to get a much smoother animation on my machine. (I'm just guessing, but perhaps this is not a problem if GPU's fast enough? This alway seem more apparent for me in fullscreen)\n"},{"labels":["enhancement"],"text":"I recently noticed that setRotationFromMatrix function of THREE.Vector3 give bad results, when using it. I fix this problem as you can see for example in this fiddle http://jsfiddle.net/ch3sn3k/cDTJV/\n\nProblem is that transformation from Rotation matrix to Euler angle have multiple solutions. As one can read in theory (http://bit.ly/rOQGR) calculation of Euler angles is based on order of matrix multiplication. I support only THREE.js default eulerOrder 'XYZ'.\n"},{"labels":["enhancement"],"text":"Now that Camera has to be a child of Scene, any transformation applied to the scene is effectively cancelled out because it is also applied to the camera child object.\n\ni.e. I work around the \"Flip YZ\" Blender export toggle not functioning by undoing that flip on the scene:\n\n``` javascript\nscene.rotation.x = Math.PI / 2;\nscene.updateMatrix();\n```\n\nThis rotates the whole scene relative to the camera - and undoes the YZ flip the exporter applies to the mesh. Now this rotation is also applied to the camera child and so is a noop.\n\nI have a pull request that fixes the Blender exporter \"Flip YZ\" toggle, for my use case at least this would make the above unecessary. #561\n"},{"labels":["enhancement"],"text":"While reading issue #798 I was thinking that maybe it would be neat to move the renderTarget functionality into it's own method?\n\nRight now we have `.render( scene, camera, renderTarget, forceClear )` but, in there same way there is `.clear( color, depth, stencil )` and `.clearTarget( renderTarget, color, depth, stencil )`, render could be `.render( scene, camera, forceClear )` and `.renderTarget( renderTarget, scene, camera, forceClear )`?\n"},{"labels":["enhancement"],"text":"I noticed there is a utf8 loader based on the webgl-loader code.  Now that the webgl-loader supports materials as well are there plans to modify the utf8 loader to support it as well?\n"},{"labels":["enhancement"],"text":"I have a problem I is not sure how to settle it\nabout the shadow\n  I use a spot and I have a shadow but the problem is that this shadow does not come from items that are added that shadow\n\nIs there a function to call?\n\nevery time I add an element I use the following function\n\nInfact I have a shadow but I do not know where it comes from and the other elements have no shadow I do not understand\n\n``` javascript\nvar light3d = new THREE.SpotLight( 0xffffff );\nlight3d.position.set( 1,1 , 1 );\nlight3d.castShadow = true;\n\nsceneview3D.addLight( light3d );    \n```\n\n``` javascript\nvar geometry = new THREE.CubeGeometry( 40, 40, 40 );\nfor ( var i = 0; i < 5; i ++ ) {\n\n    var object = new THREE.Mesh( geometry,new THREE.MeshLambertMaterial( { color: 0xffaa55} ));\n    object.position.x = Math.random() * 0.1 - 0.5;\n    object.position.y = Math.random() * 0.1 - 0.2;\n    object.position.z = Math.random() * 0.1 - 0.2;\n    object.rotation.x = ( Math.random() * 360 ) * Math.PI / 180;\n    object.rotation.y = ( Math.random() * 360 ) * Math.PI / 180;\n    object.rotation.z = ( Math.random() * 360 ) * Math.PI / 180;\n    object.scale.x =Math.random() * 0.1 ;\n    object.scale.y = Math.random() * 0.1;\n    object.scale.z =Math.random() * 0.1;\n\n    object.castShadow = true;\n    object.receiveShadow = true;\n\n    sceneview3D.addObject( object );\n\n    meshes.push( object );\n\n}\n```\n\n``` javascript\n//in renderer ()\nrendererview3D.shadowMapEnabled = true;\nrendererview3D.shadowMapSoft = true;\n\nrendererview3D.shadowCameraNear = 3;\nrendererview3D.shadowCameraFar = cameraview3D.far;\nrendererview3D.shadowCameraFov = 50;\n\nrendererview3D.shadowMapBias = 0.0039;\nrendererview3D.shadowMapDarkness = 0.4;\nrendererview3D.shadowMapWidth = 1024;\nrendererview3D.shadowMapHeight = 1024;\n```\n\n<a target='_blank' href='http://imageshack.us/photo/my-images/812/comv.png/'><img src='http://img812.imageshack.us/img812/4778/comv.th.png' border='0'/></a>\n\nthe white cube shows the position where is the light and dont castShadow\n"},{"labels":["enhancement"],"text":"Hi\n\n\"load_image\" of Loader does not support CORS. I think this is a bug. Fix:\n\n``` javascript\nimage.crossOrigin = '';\n```\n\nCheers\nRemo\n"},{"labels":["enhancement"],"text":"Is there any plan to support fog while using the CanvasRenderer (so without GPU acceleration)?\n\nI really need it so, if it isn't planned, could anybody  point out some suggestions on which way to follow to implement it, please?\n\nThanks in advance,\nThomas,\n"},{"labels":["enhancement"],"text":"Hi.Is it possible to add a new light after the scene setup?I have a scene and i want the user to add light in a selected position by pressing a button.I have tried it and it's not working.\n"},{"labels":["enhancement"],"text":"Just wondering if there's anyway to debug the shader code that three.js combines before sending it to webgl..\n\nPerhaps add a console.log to getShader() in WebGLRenderer? (I currently check whats going on is to introduce a GLSL error so that the code would be dumped)\n\nIt could be useful for when writing MeshShader to see what's being passed on to Webgl and knowing what variables are introduced automatically with three.js eg.\n\n``` glsl\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n```\n"},{"labels":["enhancement"],"text":"Is there a bug that vertex colors don't work using the canvas renderer (or is this technically not possible)?\n\nHere is a minimal gist where using the webgl renderer gives the expected result, the canvas renderer however does not (all vertices have white color):\nhttps://gist.github.com/1293517\n"},{"labels":["enhancement"],"text":"When i trying to use UTF8Loader with utf8 models converted by http://code.google.com/p/webgl-loader/, always getting this error:\n\n```\nArrayBufferView size is not a small enough positive integer\nTHREE.UTF8Loader.decompressMesh   Three.js:645\nm   Three.js:646\nTHREE.UTF8Loader.createModel   Three.js:648\nc.onreadystatechange   Three.js:644\n```\n\nusing r45 of Three.js and r53 (last) of webgl-loader. Note, that webgl-loader developer in one of changes wrote, that format of models changed. Maybe, problem in this?\n"},{"labels":["enhancement"],"text":"Branching from <a href=\"https://github.com/mrdoob/three.js/issues/599#issuecomment-2267670\">this thread</a>, any thoughts about this combined?\n\nI think to developers, it would stil be a pain to manage 2 cameras just to switch between perspective and orthogonal (some games do that) especially with moving cameras.\n\nhttps://gist.github.com/1263996\n\nTo use this camera, which is also tested and works with the `canvas_camera_orthographic.html`, \n\n``` javascript\ncamera = new THREE.CombinedCamera( window.innerWidth, window.innerHeight, 1, 70, 1000, -1000, 1000, 1000 );\n```\n\nperspective is used by default, but to switch, simply do `camera.toOrthographic()` and `camera.toPerspective()` to get back.\n\nwhen I started with three.js, I did not know that I've to update project matrixes after changing FOV, so `camera.setFov(fov)` does this automatically and switch to perspective.\n\nalso `camera.setLens()` is for those who are more familiar with cameras than mathematics eg. I know I get a wide perspective with `camera.setLens(16)`  , `camera.setLens(50)`  for standard perspective, `camera.setLens(200)`  for a zoom shots. \n"},{"labels":["enhancement"],"text":"HI,\n\nI'm having some difficulty while trying to add a light after some time to the scene. If the light is created in the init() function there is no issue, but as soon as you create it later it makes everything look black.\n\nHere is a sample script showing this issue: http://jsfiddle.net/GKCx6/1/\n\nthere is a variable \"dynamic_light\" that you can set to false to show a working version (light created in init). If dynamic_light is set to true you will have to click \"add light\" to see the issue.\n\nI hope i'm not missing something obvious.\n"},{"labels":["enhancement"],"text":"Hey,\n\ni'm trying to build a network game with THREE and Node.js. \nI'm exporting my UV textured game world with blender exporter and loading it into my scene. In the parameters of my JSONLoader i'm using THREE.MeshFaceMaterial. \n\nWhat is the best way of telling when model textures are loaded, so i can start my game? Texture Popping looks ugly and it slows down game experience because of lag. \n\nPS.Sorry for my bad english XD\n"},{"labels":["enhancement"],"text":"Hey,\nI have exported a model with many planes that I would like to be double-sided in three.js renderings, however, I havent found any way to make it happen. Blender has under Mesh props property 'Double Sided' which I thought would do the trick, but no. \n\nWould anyone have any tips how to make a Double Sided plane mesh to show as two-sided in three.js?\n\nAny help is very much appreaciated!\n"},{"labels":["enhancement"],"text":"WebGL doesn´t work and the CanvasRenderer is very, very, very slow. I tried to do a simple panorama viewer (like the WebGL example but with CanvasRenderer), but it doesn´t work on iPhone (renders only one time, it´s too haevy).\n\nBut the krpano renderer runs smooth!\n\nShould be possible, see here:\nhttp://krpano.com/tours/kuchlerhaus/html5only.html\n\nhttp://krpano.com/krpanoiphone.js\nhttp://developer.apple.com/library/safari/#documentation/AudioVideo/Reference/WebKitPointClassReference/WebKitPoint/WebKitPoint.html\n\nIs it possible to have a iPhone/iPad Renderer?\n"},{"labels":["enhancement"],"text":"Hi group,\n\nAs per one of my previous posts, I've been working on a large mesh rendering pipeline using chunked LoD. I've heavily modified the code in the webglrenderer to treat my objects as immediate rendering objects, and hence initiate the rendering callback on each frame render pass... I'm doing quite a bit of optimization steps, such as reusing mesh vbos and morphing them in the vertex shaders, packing (interleaving) attributes together into larger buffers, ... This gives me a smooth 60fps across the board, but obviously means not much of the original renderBufferImmediate code remains the same.\n\nSo what I'd like to propose/implement is a more generalized immediate rendering mode, where the low-level control is available for these specialized cases, and each implementation basically provides its own renderBufferImmediate code. The big question I have however: is this even possible? For a custom render function to be registered into the WebGL renderer, that function would need access to the _gl context and such, which is passed in to the WebGL renderer functions by closure. Is there any way to expose this context in callback functions without extensive changes to the renderer (e.g. without making all of the relevant variables actual members of the renderer etc...)\n\nthanks!\n"},{"labels":["enhancement"],"text":"based on http://blog.tojicode.com/2011/07/dirty-full-frame-webgl-performance-hack.html it seems I'm able to get about 5fps improvements for canvas renderer for 2x scaling in my particles example in ff and chrome. can't really tell if there's much boost for webgl renderer.\n\nfor this, we could add this to the renderer(s)\n\n``` javascript\n    // use resize performance hack \n    this.setScale = function ( scale ) {\n\n        var prioity = 'important';\n        _canvas.style.setProperty('-moz-transform', 'scale(' + scale + ',' + scale + ')', prioity); \n        _canvas.style.setProperty('-moz-transform-origin', '0 0', prioity); \n\n        _canvas.style.setProperty('-webkit-transform', 'scale3d(' + scale + ',' + scale + ', 1.0)', prioity);\n        _canvas.style.setProperty('-webkit-transform-origin', '0 0 0', prioity);\n\n    };\n```\n\nand do \n\n``` javascript\n                renderer.setSize( window.innerWidth * 0.5, window.innerHeight * 0.5 );\n                renderer.setScale( 2 );\n```\n"},{"labels":["enhancement"],"text":"I am learning about lights in ThreeJS. I found the parameters(intensity, distance) of directional light have no effects. The values of intensity and distance will not make a difference. By the way, these parameters have obvious effect for point light.\nFollow is the main part of this demo:\n\n``` javascript\nvar materials = [];\nfor(var i = 0; i < 6; i++) {\n    materials.push([new THREE.MeshLambertMaterial( { color: 0xffffff, shading: THREE.FlatShading } )]);\n}\nvar cubeGeometry = new THREE.CubeGeometry(200, 200, 200, 3, 3, 4, materials);\ncubeMesh = new THREE.Mesh(cubeGeometry, new THREE.MeshFaceMaterial());\n\n// Add lights to the scene!!!\n// This is the Directional light.\nvar directionalLight = new THREE.DirectionalLight(0x00ff00);\ndirectionalLight.position.z = 200;\nscene.addLight( directionalLight );\n```\n\nI update `var directionalLight = new THREE.DirectionalLight(0x00ff00);` with adding intensity and distance parameters but no any effect.\nIs it implemented?\n"},{"labels":["enhancement"],"text":"I suggest line 48 of TextGeometry be amended to allow manual setting of extrude amount:\n\n```\nif (parameters.amount === undefined) parameters.amount = parameters.height !== undefined ? parameters.height : 50;\n```\n\nYou're ploughing over it with a default or heght based value unconditionally. \n"},{"labels":["enhancement"],"text":"Hi,\nI am working on a project getting WebGL to non PC/non x86 devices and I am getting problem when running later versions of your excellent three.js.\n\nThis is related to requesting a stencil buffer when getting the WebGL context. Some drivers do not simply support the combination of both depth and stencil buffers. As I understand the commit introducing this change this is related your implementation of shadows. \n\nMy suggestion is that you might improve the portability of your code by simply checking what context attributes are available on the drawing buffer and adjust the behaviour of three.js accordingly if possible. In the stencil case you could fallback to another implementation or whatever seems appropriate.\n\nThanks!\n"},{"labels":["enhancement"],"text":"I've been finding Web Workers to be indispensable when processing lots of data to render on screen. You can use them to keep performance smooth by creating geometries in the Web Workers and sending them over to the client window where they'll be turned into meshes and added to the scene.\n\nI was thinking I'd go through the code and make any references to the window object be compatible with web workers. I'd also like to add a new build file called ThreeWorker.js that will include everything in common_files and also the files from extras that you need to work with geometries. I figure that most people working with Web Workers won't need scenes, renderers, cameras, or meshes, but let me know if I'm wrong.\n"},{"labels":["enhancement"],"text":"The LOD class doesn't work when its not directly added to the scene. I made a sphere from mech rectangles (working on a planetoid) in which all the meshes were child'd to an Object3D so that the planet can be moved. I then zoomed in on the planet that I rotated by spinning its center.\n\nThe closer I got to the planet the more detail I saw in the meshes; however, the detail was often off to one side, as if the LOD didn't know that it was spinning due to its relative position around the center object I'd set to rotate. \n\nOnce I parented the LOD to the scene directly this stopped being a problem. \n\nIts a pretty common pattern to use parent/child relationships to organize movement. If LOD can't respect parent/chlld transformations, then its a bit of a limitation for that particular item. \n"},{"labels":["enhancement"],"text":"following problem.\n\ni'm adding a couple of PointLights to a dummy (Object3D) and try to rotate them around another object. \nto get the feeling where the lightpoints are, i draw particles at the same place within the very same dummy. \nwhen i perform a rotation on the dummy in the animate function, the particles are rotated along the axis of the dummy.\nunfortunately the lights stay in their former position and won't rotate. \n\nthis is a snippet out of my project. \n\n``` javascript\nfor( var i = 0; i < numParticles; i++ )\n{\n    var tempColor = Math.random() * 0x808080 + 0x808080;\n    var particle = new THREE.Particle( new THREE.ParticleCanvasMaterial( {  color: tempColor, \n                                                                            program: programFill } ) ); \n    var test = new THREE.PointLight( tempColor, 2, 50 );\n\n    var p = verticesTaken[i]; \n\n    particle.position.x = sphere.geometry.vertices[p].position.x * 33.6;\n    particle.position.y = sphere.geometry.vertices[p].position.y * 33.6;\n    particle.position.z = sphere.geometry.vertices[p].position.z * 33.6;\n\n\n    test.position.x = sphere.geometry.vertices[p].position.x * 33.6;\n    test.position.y = sphere.geometry.vertices[p].position.y * 33.6;\n    test.position.z = sphere.geometry.vertices[p].position.z * 33.6;\n\n    particle.scale.x = particle.scale.y = 2;\n\n    orbit.addChild( particle );     \n    orbit.addChild( test );     \n\n    collObjects.push( particle );\n}\nscene.addObject( orbit );\n```\n\nat first i thought pointlight class doesn't extend object3d therefore won't rotate, but the api ref says otherwise. \n\nany help is appreciated. thanks in advance.\n"},{"labels":["enhancement"],"text":"Some people might find this useful : catching the mousewheel event to zoom in and out of pane. I do anyway, thought it could be interesting feature to add to the TrackballCamera.\n\n(I'm a total noob at github, sorry if this is out of context...)\n\nHere's a basic implementation I've used :\n\n``` javascript\n  // need both for FF and Webkit - others I haven't tested\n  window.addEventListener('DOMMouseScroll', mousewheel, false);\n  window.addEventListener('mousewheel', mousewheel, false);\n\n  function mousewheel( event )\n  {\n      var amount = 100; // parameter\n\n      // get wheel direction \n       var d = ((typeof e.wheelDelta != \"undefined\")?(-e.wheelDelta):e.detail);\n        d = 100 * ((d>0)?1:-1);\n\n        // do calculations, I'm not using any three.js internal methods here, maybe there is a better way of doing this\n        // applies movement in the direction of (0,0,0), assuming this is where the camera is pointing\n        var cPos = camera.position;\n        var r = cPos.x*cPos.x + cPos.y*cPos.y;\n        var sqr = Math.sqrt(r);\n        var sqrZ = Math.sqrt(cPos.z*cPos.z + r);\n\n        var nx = cPos.x + ((r==0)?0:(d * cPos.x/sqr));\n        var ny = cPos.y + ((r==0)?0:(d * cPos.y/sqr));\n        var nz = cPos.z + ((sqrZ==0)?0:(d * cPos.z/sqrZ));\n\n        // verify we're applying valid numbers\n        if (isNaN(nx) || isNaN(ny) || isNaN(nz))\n          return;\n\n        cPos.x = nx;\n        cPos.y = ny;\n        cPos.z = nz;\n  }\n```\n"},{"labels":["enhancement"],"text":"Hy,\n\nI worked with huge models - consisting of more than 100.000 vertices.\n\nFirefox seem to have a \"Array Initialiasing\" Bug. I always got the Error \"Array initialisor too large\". By the way in Chrome everything went well.\n\nHere is my improved workarround ( tested in FF and Chrome ).\n\nWhat did I do?\n\nI chanhed the JSON Model FROM:\n\n``` javascript\nvar model = {\n...\n\"vertices\": [ 1-vertices , ... , n-vertives ],\n...\n}\n```\n\nTO:\n\n``` javascript\nvar model = {\n...\n\"vertices\": this.vertices || ( function() {\n // Vertices\n\nvertices = \"1-vertices , ... , n-vertives\";\n\nvarticesArr = vertices.split(',');\ndelete vertices;\n\nvertices = new Array();\n\nfor( i = 0; i < varticesArr.length; i++) {\n        vertices[i] = parseFloat( varticesArr[i] );\n        delete varticesArr[i];\n}\ndelete varticesArr;\n\nreturn vertices;\n})(),\n...\n}\n```\n\nSo I hope this helps.\n\nHow to get It?\n\n1) Open your Python .OBJ to Three.JS Converter Script - convert_obj_three.py\n\n2) Search and Replace your TEMPLATE_FILE_ASCII\n\n``` python\nTEMPLATE_FILE_ASCII = u\"\"\"\\\n// Converted from: %(fname)s\n//  vertices: %(nvertex)d\n//  faces: %(nface)d\n//  normals: %(nnormal)d\n//  colors: %(ncolor)d\n//  uvs: %(nuv)d\n//  materials: %(nmaterial)d\n//  edges: %(nedge)d\n//\n//  Generated with OBJ -> Three.js converter\n//  http://github.com/alteredq/three.js/blob/master/utils/exporters/convert_obj_three.py\n\n\nvar model = {\n\n    \"version\" : 2,\n\n    \"scale\" : %(scale)f,\n\n    \"materials\": [%(materials)s],\n\n    \"vertices\": this.vertices || ( function() {\n        // Vertices\n        vertices = \"%(vertices)s\";\n\n        varticesArr = vertices.split(',');\n        delete vertices;\n\n        vertices = new Array();\n\n        for( i = 0; i < varticesArr.length; i++) {\n            vertices[i] = parseFloat( varticesArr[i] );\n            delete varticesArr[i];\n        }\n        delete varticesArr;\n\n        return vertices;\n    })(),\n\n    \"morphTargets\": [%(morphTargets)s],\n\n    \"morphColors\": [%(morphColors)s],\n\n    \"normals\": this.normals || ( function() {\n        // Normals\n        normals = \"%(normals)s\";\n\n        normalsArr = normals.split(',');\n        delete normals;\n\n        normals = new Array();\n\n        for( i = 0; i < normalsArr.length; i++) {\n            normals[i] = parseFloat( normalsArr[i] );\n            delete normalsArr[i];\n        }\n        delete normalsArr;\n\n        return normals;\n    })(),\n\n    \"colors\": [%(colors)s],\n\n    \"uvs\": [[%(uvs)s]],\n\n    \"faces\": this.faces || ( function() {\n        // Faces\n        faces = \"%(faces)s\";\n\n        facesArr = faces.split(',');\n        delete faces;\n\n        faces = new Array();\n\n        for( i = 0; i < facesArr.length; i++) {\n            faces[i] = parseInt( facesArr[i] );\n            delete facesArr[i];\n        }\n        delete facesArr;\n\n        return faces;\n    })(),\n\n    \"edges\" : this.edges || ( function() {\n        // Edges\n        edges = \"%(edges)s\";\n\n        edgesArr = edges.split(',');\n        delete edges;\n\n        edges = new Array();\n\n        for( i = 0; i < edgesArr.length; i++) {\n            edges[i] = parseFloat( edgesArr[i] );\n            delete edgesArr[i];\n        }\n        delete edgesArr;\n\n        return edges;\n    })()\n\n};\n\npostMessage( model );\nclose();\n\"\"\"\n```\n"},{"labels":["enhancement"],"text":"May well be way more work than it's worth, but http://code.google.com/p/explorercanvas/downloads/list could allow Three to be used with pre-IE 9 browsers. I just tried it on IE 8 using the birds example and got \n\n`Object Doesn't support this property or method` for line 48, character 478 in Three.js:\n\n``` javascript\n`THREE.Object3D.prototype={translate:function(b,c){this.matrix.rotateAxis(c);this.position.addSelf(c.multiplyScalar(b)    )},translateX:function(b){this.translate(b,this._vector.set(1,0,0))},translateY:function(b){this.translate(b,this._ve    ctor.set(0,1,0))},translateZ:function(b){this.translate(b,this._vector.set(0,0,1))},lookAt:function(b){this.matrix.lo    okAt(b,this.position,this.up);this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},addChild:fun    ction(b){if(this.children.indexOf(b)===`\n```\n\nCharacter 478 begins just at the end:\n\n``` javascript\n`if(this.children.indexOf(b)===`\n```\n\nI'll maybe take a crack at it tomorrow, but I figured I'd see if anyone else would be interested in this. Thanks for an awesome project.\n"},{"labels":["enhancement"],"text":"@mrdoob @alteredq\n\nI just wrote some classes for curve, still thinking/in-the-midst of implementing them in Path.\n\nhttps://github.com/zz85/three.js/blob/b287fd1d8629af9cd93ff102d0446657cfd9184b/src/extras/geometries/Curve.js\n\nBasically, any line can subclass curve, for right now I have\n`Straight(Line)Curve, QuadraticBezierCurve, CubicBezierCurve, SplineCurve`\n\nSub classes usually implements\n\n``` javascript\ngetPoint: function ( t /* between 0 .. 1 */) \n```\n\nbut inherits the common methods\n\n``` javascript\ngetLength: function () {\ngetLengths: function (divisions) {\ngetPoint: function ( t /* between 0 .. 1 */) {\ngetPointAt: function ( u /* between 0 .. 1 */) {\ngetPoints: function (divisions) {\ngetSpacedPoints: function (divisions) {\ngetUtoTmapping: function (u, distance) {\n```\n\nsoon, path.getPointAt(t) would call its curves getPointAt internally..\n\nany thoughts or comments for this?\n"},{"labels":["enhancement"],"text":"Hello everybody.\n\nI've managed to set my own vertex and fragment shader for my particle system. However, I want each each particle to have its own size so my only option was to create my own shader to do that.\n\nI'm trying to find the simplest way to send size for each particle to the vertex shader. I tried following an example I found online (it does not have to do with particle system) http://aerotwist.com/lab/an-introduction-to-shaders-part-2/\n\nIt creates an attribute called displacement and the value is an array. For each vertex in the geometry he adds a value to the attribute displacement array. So basically attributes.displacement.value[50] would be vertex nr 50.\n\nBut when I tried it with my particle system it didn't work, I'm not sure why.\n\nAny help would be appreciated! Thanks.\n"},{"labels":["enhancement"],"text":"Does anyone have a demo with a massive amount of particles with their positions/size still edited individually? \n\nMuch like http://spidergl.org/example.php?id=11\n\nI would love to see something like that in Three.js and wondered if that is possible right now?\n"},{"labels":["enhancement"],"text":"@pyrotechnick suggested some changes to Cameras in https://github.com/mrdoob/three.js/commit/77eed2ea8c0380ae5e21ce7126d4cf0415fa1582#commitcomment-459170 which started a discussion about Cameras.\n\nThis issue is to encourage discussion about the ideas raised in the thread:\n\n1) Change Camera constructors to use 'named' parameters.\nI think this is a good idea, I have started work a branch to do this. Question about backwards compatbility - this will be a breaking change and I'm not sure if I will be able to make the code backwards compatible. Should I attempt or not?\n\n2) Rename `*Camera` to `*Controller`\nThe role of a camera is to generate view and projection matrices. The cameras also specify behavior around events such as `mousemove`, `keydown`, etc. The discussion is whether these should be renamed to Controller. I'm in favor of leaving the classes as `*Camera`. When I last looked at D3DX (over 18 months ago), they also referred to these as Cameras.\n\n3) Cameras read time directly\nI agree with @alteredq, this is bad. By not computing this information and making it easily accessible it encourages an anti-pattern where people acquire the time themselves. We could modify the `requestAnimFrame()` wrapper to provide delta and absolute times as callback parameters.\n"},{"labels":["enhancement"],"text":"I was wondering if the extrude part of [TextGeometry](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TextGeometry.js) could be somehow separated into it's on  `ExtrudeGeometry` class.\n\nRight now we have have [LatheGeometry](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/LatheGeometry.js) which gets a set of points and creates a revoluted mesh with it, and would be great to have something like that for extrusions.\n\n@zz85, @alteredq, thoughts?\n"},{"labels":["enhancement"],"text":"New version of Blender was released 2.58.\nThree.js export plugin for Blender does not show up in menu.\nWhen I copy export plugin from 2.57 to add-ons directory for 2.58 then I can see Three.js in User Preferences Add-ons list, but it is not possible to enable this module.\n"},{"labels":["enhancement"],"text":"Hey,\n\nSo right now the affectedByDistance parameter changes\n1. Whether the position gets multiplied by 1.0, or the projected z value in the sprite vertexShader and\n2. Whether or not the size is image (width / viewport height) or (image width / 1.0)\n\nCan we change this so that affectedByDistance only affects number 1?\nWe could create a new parameter sizeAffectedByViewport or something that affects number 2.\n\nI ask because,\n\nWhen using orthographic projection it makes things just a slight bit more complex having only a single parameter. I don't want my sprite to change size based on it's projected z value, so I need to set affectedByDistance to true. However, now the size variable in WebGLRenderer.js blows up sprites way beyond the screen size.\n\nI can just do this myself by setting the scale to 1.0 / viewportHeight, but then it's extra code to handle this when I want to also do other type of scaling.\n\nIf this makes sense to you, I'd be happy to implement it.\n"},{"labels":["enhancement"],"text":"Is it possible to render a scene with a specific material/shader, without modifying the scene itself?\nI have peeked into the source a bit, and realize that it could possibly be solved by modifying/creating a new custom render method for the WebGLRenderer, but this feels a bit extreme.\n\nAnother option would be to create a separate scene with only one material, but using the same objects from the \"original\" scene? But I'm loading the scene with the SceneLoader, so I don't have \"direct\" access to the materials when they are added while the scene is loading.\n\nThank in advance!\nRegards,\nSven\n"},{"labels":["enhancement"],"text":"Hi \n\nDoes anyone also need the following :\n\nhttp://mathworld.wolfram.com/Plane.html in combination with \"THREE.Ray\".\n\nhttp://www.openscenegraph.org/projects/osg/browser/OpenSceneGraph/trunk/include/osg/Plane\n\n?\n\nI know one can use THREE.Ray and a THREE.Plane geometry ... but it's a little bit \"hacky\".\n\nCheers,\nRemo\n"},{"labels":["enhancement"],"text":"Hi,\n\ni'm trying to apply different video textures on the sides of the cube drawn with the WebGL renderer. But i have no clue what is the right approach to do this.\nI know there is an example splitting a video over some cubes (webgl_materials_video.html) but it looks like very complex.\nSo my question is: Is it really so complex to use videos as textures?\nCan someone knowing the ropes creating an example? That would be really great.\n\nThanx in advance.\n\nBest regards,\nThomas  \n"},{"labels":["enhancement"],"text":"Hi there, i have successfully exported a mesh using the python .Obj converter and the Max script converter. However any hierarchical relationships have been lost.\n\nI have a space ship, and i want to designate bounding boxes for its engines, weapons, shield generator etc. so i created my parent object and linked the bounding boxes to the parent in my 3d editor. \n\nI want the bounding boxes to be invisible at run time, but collide-able. Is this possible with the current .js output, or is it going to require some manual data entry for the bounding boxes using BoxCollider?\n\nmuch appreciated.\n"},{"labels":["enhancement"],"text":"I was just browsing through the API docs and saw the following todo;\n\n> # THREE.QuakeCamera\n> \n> (extends THREE.Object3D, extends THREE.Camera)\n> TODO: We need to find a better name for this one.\n\nFirst thing that came to my mind was THREE.PovCamera, so just opening this thread to get the mindjuices going :)\n"},{"labels":["enhancement"],"text":"Only DirectionalLights seem to cast shadows. PointLights should cast shadows too.\n\nHow to reproduce? in webgl_stencil, change the DirectionalLight to a PointLight\n"},{"labels":["enhancement"],"text":"I'm currently trying to add 3d text support for three.js, and while I've made some progress with importing typeface.js fonts using some Polygon Triangulation algorithm, there's a couple of questions I have.\n\nHere's is a sample geometry class for the letter Z\nhttps://gist.github.com/985108\n1. There's seems only to be 1 side of the faces rendered. Do I need to add another face even if its a same plane?\n2. What are UV vertices for, and how can I map them?\n3. Are there any significant differences between Face3 and Face4 other than 1 contain more than 1 vertex than another?\n4. Any techniques to allow holes in the polygons. Any union/subtract methods available in three.js?\n\nJoshua\n"},{"labels":["enhancement"],"text":"Hi all,\n\nI noticed that the raycasting collision detection only works on Face3-based meshes?\nIn CollisionUtils, line 60:\n\n```\nfaces.push( mf[ i ].a, mf[ i ].b, mf[ i ].c );\n```\n\nIt is assumed that a face only has 3 vertices.\n\nAnd then in the collision check (rayMesh in Collsion.js):\n\n```\nfor( var i = 0; i < me.numFaces/3; i++ ) {\n    var t = i * 3;\n    var p0 = me.vertices[ me.faces[ t + 0 ] ];\n    var p1 = me.vertices[ me.faces[ t + 1 ] ];\n    var p2 = me.vertices[ me.faces[ t + 2 ] ];\n    var n = me.normals[ me.faces[ i ] ];\n    d = Math.min(d, this.rayTriangle( rt, p0, p1, p2, n, d ) );\n}\n```\n\nWouldn't a natural extension be to check for the type of face, and in the case of Face4, push the additional vertex d to the faces array as well. The for loop in Collision.js then becomes:\n\n```\nfor( var i = 0; i < me.numFaces/4; i++ ) {\n    var t = i * 4;\n    var p0 = me.vertices[ me.faces[ t + 0 ] ];\n    var p1 = me.vertices[ me.faces[ t + 1 ] ];\n    var p2 = me.vertices[ me.faces[ t + 2 ] ];\n    var n = me.normals[ me.faces[ i ] ];\n    d = Math.min(d, this.rayTriangle( rt, p0, p1, p2, n, d ) );\n\n    p0 = me.vertices[ me.faces[ t + 2 ] ];\n    p1 = me.vertices[ me.faces[ t + 3 ] ];\n    p2 = me.vertices[ me.faces[ t + 0 ] ];\n    n = me.normals[ me.faces[ i ] ];\n    d = Math.min(d, this.rayTriangle( rt, p0, p1, p2, n, d ) );\n}\n```\n\nIs there a reason for the Collision to be tailored to only Face3 meshes, and would the extension above be sufficient to make this work for Face4 based meshes?\n\nthanks,\nkind regards.\n"},{"labels":["enhancement"],"text":"Hi,\n\nhow would I create a plane with a simple scrolling water texture (using canvas renderer, not WebGL)? Has anyone done \"water\" in three.js yet?\n\n```\n+--------------------+\n|                    |\n|   -->       -->    |\n|->       -->       -|\n|     ->          -> |\n|                    |\n+--------------------+\n```\n\n-- lG, Niklas\n"},{"labels":["enhancement"],"text":"The current Mesh constructor computes the bounding sphere of the input geometry\nand initializes its own bounding/morph target dictionary.\n\nDoes it make sense to have it support late binding? e.g.\n\n``` javascript\n// construct a hierarchy top-down\nvar rootObject = new THREE.Object3D();\nscene.addChild(rootObject);\n\nvar mesh = new THREE.Mesh();\nrootObject.addChild(mesh);\n\nvar geometry = new THREE.Geometry();\n// fully constructing geometry\nmesh.setGeometry(geometry); // TADA!!\n```\n"},{"labels":["enhancement"],"text":"Hey -- \n\nTrying to render the same scene to two different (WebGL) renderers with two different cameras. The effect is such that only the first renderer to be asked to render the scene within my draw loop is actually drawn.\n\n``` javascript\nfunction draw() {\ndebugRenderer.render(scene, debugCamera);\nrenderer.render(scene, camera);\n}\n```\n\nHave you encountered this before?\n"},{"labels":["enhancement"],"text":"Hello! First of all thanks for great lib. :)\nAnd here is the question:\nWhy shadow created with:\n\n```\nTHREE.ShadowVolume(mesh)\n```\n\n stays when object removed from scene with:\n\n```\nscene.removeObject( mesh );\n```\n"},{"labels":["enhancement"],"text":"At the moment the texture coordinates for the caps of cylinders aren't particularly useful.\n\nhttp://dl.dropbox.com/u/21084952/Screen%20shot%202011-04-13%20at%202.15.16%20PM.png\n\nHere are two example mappings that would be more useful...\nhttp://www.vrarchitect.net/anu/cg/Texture/Image/slide09.jpg\nhttp://www.vrarchitect.net/anu/cg/Texture/Image/slide12.jpg\n\n...although they're still not as good as they could be.\n\nI imagine it is how it is because the coordinates used for the sides of the cylinder are those used for the caps; giving the strange curved UVs on the caps. I'm not sure how to resolve the issue without duplicating the vertices on the edges of the side face and caps.\n"},{"labels":["enhancement"],"text":"Hi,\nAre you guys planning to enable exporting animations from blender? That would be really helpfull.\n\nIn addition, when displaying an animation, something like play(startFrame, endFrame, chaining) would also be great.\n\nThanks for your great job.\n\nSee you\n"},{"labels":["enhancement"],"text":"in webglrenderer constructor parameter\n"},{"labels":["enhancement"],"text":"Looks like the DbgName parameter is in the exported JS, but is not imported into the material by the loader. It would be nice to have that name there and include methods to get a material by name (via the object) and/or get all materials in a scene by name.\n"},{"labels":["enhancement"],"text":"Dear mr. Doob,\n\nGreat library, very inspiring. Would like to build a game in it I've been thinking about for a long long time. But, I need character animation... Are you going to put skeletal animation based on some file format I could get out of maya into Three?\n\nThanks,\n\nGuido\n"},{"labels":["enhancement"],"text":"Hi there. \nI'm working on creating a model that includes over 7000 particles. I need to be able to click on every particle and view details about it. And since the Particle class doesn't give me the intersections out of the box, I just wanted to check if anyone here has done anything like that. \n\nIt would be awesome if I could do something like ray.intersectScene(scene), as I would do with a sphere or a box.\n\nI tried using a sphere instead (the particles should represent planets, so a sphere would have been fine - but that turned out to be too slow).\n"},{"labels":["enhancement"],"text":"Noticed it's on a todo list. \n\nIs there any chance of bumping it up and throwing it in a build? It seems relatively low effort, while the benefits of clean translations in any dimension seems a no-brainer.\n"},{"labels":["enhancement",null],"text":"Hey there. I was wondering if I could change all the examples to use requestAnimationFrame instead of setInterval.  setInterval is bad because it eats up CPU and GPU even when on a hidden tab or minimized or scrolled off.\n\nIt supported in both Chrome, Firefox, Webkit and soon Opera. Here is a simple wrapper that will work pretty much anywhere.\n\n```\n/**\n * Provides requestAnimationFrame in a cross browser\n * way.\n */\nif (!window.requestAnimationFrame) {\n  window.requestAnimationFrame = (function() {\n    return window.requestAnimationFrame ||\n           window.webkitRequestAnimationFrame ||\n           window.mozRequestAnimationFrame ||\n           window.oRequestAnimationFrame ||\n           window.msRequestAnimationFrame ||\n           function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\n             window.setTimeout(callback, 1000/60);\n           };\n  })();\n}\n```\n\nJust tell me if it's okay and if you don't mind if I do it and I'll send you a patch or a pull request.\n\nI can put this in it's own file and include it. I can put it in three.js somewhere. I can make all the samples use window.requestAnimatonFrame or I can put it in the renderer or something. Just tell me what you'd like to see and I'll be happy to whip up a patch.\n\nYour demos are inspirational and it would be nice if as they are used as examples they were helping to propagate best practices.\n"},{"labels":["enhancement"],"text":"Should be little faster because there is no compositing involved. Don't know if webkit has something like this.\nJust _canvas.mozOpaque = true;\n"},{"labels":["enhancement"],"text":"How would one create a series of Arcs versus line segments (alot of them) in an arc pattern?\n\nThanks\n"},{"labels":["enhancement"],"text":"I try the examples \"geometry_cube.html\" and \"materials_video.html\",\nwhen i replace CanvasRenderer to WebGLRenderer, (Chromium Browser webGL-support is used)\ni found it can not render well, results are all black color on Mesh's Texture,\ni would like to ask is currently WebGLRenderer do not support to insert HTML tags like <video>, <canvas>, <image> in THREE.Texture ?\nbecause i would like to write a program that maybe some planes within a canvas,\nthen i can dynamically draw up different contents on it like a gallery,\nthat's all, so could anybody give me some directions ? i am new in 3D.\n\nthanks!\n"},{"labels":["enhancement"],"text":"I've just skimmed what it takes to do lighting in WebGL...any way to add falloff?\n"},{"labels":["enhancement"],"text":"Right now, using the loaders (loadAscii, loadBinary, etc.) requires a urlbase that is the url for the binary file, textures, etc. It would be nice to be able to specify difference locations for the binaries and the textures, in order to keep things organized.\n"},{"labels":["enhancement"],"text":"Hi, I am trying to figure out how to move an object forward along it's normal. Specifically, I am looking for an equivalent to the AS3 function Matrix3D.deltaTransformVector(axis). \n"},{"labels":["enhancement"],"text":"I'm trying to make a little game with three.js, so I have more questions for you.\nI need to set the blending mode for the particles to additive, so that particles blend nicely with a lighter background, when these a darked (when far way) ...\n\nparticle = particles[ i ] = new THREE.Particle( new THREE.ParticleCircleMaterial( { color: 0xffffff, opacity: 1, blending: THREE.AdditiveBlending } ) );\n\nThe \"THREE.AdditiveBlending\" value was found in the library code, but looks like it is not supported with particles ...\n\nI could not set the opacity too, but for now is not needed.\n"},{"labels":["enhancement"],"text":"What is the best way to group primitives or meshes?\n\nthx.\n\nJ.\n"},{"labels":["enhancement"],"text":"Looking around at other WebGL libraries/frameworks, I noticed a lot of them support loading COLLADA (.dae) files. I've also noticed a lot of modelling packages support this format. Has anyone looked at supporting this format?\n"},{"labels":["enhancement"],"text":"Are there plans to support WebGL fog?\n"},{"labels":["enhancement"],"text":"Any chance of adding this? I noticed the meshes have a visibility property, but I couldn't find a method to calculate visibility to the camera.\n"},{"labels":["enhancement"],"text":"I'm working on some speedups for the canvas renderer and I wanna ask If the core classes are gonna change anytime. Because if they don't change,I can make some general assumptions.\n"},{"labels":["enhancement"],"text":"Facilitate hierarchies within scene components where applicable properties of parent components \"cascade\" down onto children components. For example, position, scale and orientation.\n\nThis is an essential feature in modern 3D applications and so I argue that it should be an integral part of three.js\n"},{"labels":["enhancement"],"text":"I'm going to take a stab at establishing support for geometry instancing in three.js (applicable to the WebGL renderer only).\n\nAt the same time I will be adding support for consolidating very large numbers of static meshes into a single mesh (to reduce the amount of draw calls) for efficient drawing.\n\nThis is scratching a personal itch as it will facilitate the creation of games like Minecraft/Cubelands/Blockland/Infiniminer in three.js but I am sure others will find these features useful in the future\n"},{"labels":["enhancement"],"text":"When running the materials.html example, the grid lines show, but when I switch to WebGL renderer, no grid lines show.\n\nAre lines supported?\n"}]