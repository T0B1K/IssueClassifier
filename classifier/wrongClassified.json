[{"classified_as": "bug", "text": "please take a look at 2 gif below compared rotation behavior of three.js vs 3ds max at perpendicular view to the gizmo:\r\n\r\nthree.js weird behavior: ( [video](https://www.youtube.com/watch?v=dkw7idblsmy) )\r\n![3js](https://user-images.githubusercontent.com/6309393/38475721-21adc7ec-3bd4-11e8-9604-19ca0ed95ca3.gif)\r\n\r\n\r\n3ds max good behavior: ( [video](https://www.youtube.com/watch?v=nolicub6jnu) )\r\n![max](https://user-images.githubusercontent.com/6309393/38475729-2c106eec-3bd4-11e8-8ecd-6b368b6b28cb.gif)\r\n"}, {"classified_as": "enhancement", "text": "minor gotcha, compare with other controls.\n"}, {"classified_as": "bug", "text": "##### description of the problem\n\nallocation size overflow when publishing a scene frome editor with over 1,5 million polygons, 1,1million still works fine\n\nallocation size overflow\nmenubar.file/<()\n menubar.file.js:221\nbound ()\n self-hosted:752\n menubar.file.js:221:12\n##### three.js version\n- [ ] dev\n- [x] r77\n- [ ] ...\n##### browser\n- [ ] all of them\n- [ ] chrome\n- [x] firefox\n- [ ] internet explorer\n##### os\n- [x] all of them\n- [ ] windows\n- [ ] linux\n- [ ] android\n- [ ] ios\n##### hardware requirements (graphics card, vr device, ...)\n"}, {"classified_as": "bug", "text": "if i take\n\nhttp://threejs.org/examples/#webgl_morphtargets_horse\n\nand disable the mixer, but add a line\n\nmesh.morphtargetinfluences[ 1 ] = math.cos( 0.005*date.now()  );\n\nthen i only see the positive half-cycle of morphing (where math.cos > 0).  however, if i edit horse.js, and have only 8 morphtargets, then i do see the whole cycle of morphing.\n\nif i change [this line](https://github.com/mrdoob/three.js/blob/dev/src/renderers/webglrenderer.js#l742)\n\n``` javascript\nactiveinfluences.sort( numericalsort );\n```\n\nto\n\n``` javascript\nactiveinfluences.sort( function(a,b) { return math.abs( b[0] ) - math.abs( a[0] ) } );\n```\n\nthen it works for me.  in other words, sort the influences according to the absolute values.\n\ni wish i could do a proper pull request and perhaps define a function `numericalabsolutesort`, but my drive is so full that i cannot even clone threejs.\n"}, {"classified_as": "bug", "text": "just to let you know, these to give file not found\n\n>  // from http://www.geometrictools.com/libmathematics/distance/wm5distray3segment3.cpp\n>  // from http://www.geometrictools.com/libmathematics/intersection/wm5intrray3triangle3.cpp\n"}, {"classified_as": "bug", "text": "during mouse move event, 'e.buttons' returns 'undefined' in safari.  behaving correctly in chrome.  while pressing the left mouse button and moving the mouse expect 'e.buttons' to return 1.  'e.nativeevent.which' returns the correct result on safari.\n\nsample code:\n\n``` javascript\nimport react from 'react';\n\nexport default class canvas extends react.component {\n  constructor(props) {\n    super(props);\n  }\n\n  mousedown(e) {\n    console.log(\"mouse down\", e.buttons, e.nativeevent.which);\n  }\n\n  mousemove(e) {\n    console.log(\"mouse move\", e.buttons, e.nativeevent.which);\n  }\n\n  mouseup(e) {\n    console.log(\"mouse up\", e.buttons, e.nativeevent.which);\n  }\n\n  render() {\n    var canvasstyle = {\n      backgroundcolor: 'rgba(0, 0, 255, 0.5)',\n      position: 'absolute',\n      top: '0px',\n      left: '0px',\n      width: '100%',\n      height: '100%'\n    }\n\n    return (\n      <div>\n        <canvas id=\"canvas\" style={canvasstyle}\n          onmousedown={this.mousedown.bind(this)}\n          onmousemove={this.mousemove.bind(this)}\n          onmouseup={this.mouseup.bind(this)}>\n        </canvas>\n      </div>\n    );\n  }\n}\n```\n\n**versions**\nreact: 15.1.0\nsafari: 9.1.1 (11601.6.17)\n\n**os**\nos x el capitan version 10.11.5\n\n**computer**\nmodel name: macbook air\nmodel identifier:   macbookair6,2\nprocessor name: intel core i7\nprocessor speed:    1.7 ghz\nnumber of processors:   1\ntotal number of cores:  2\nl2 cache (per core):    256 kb\nl3 cache:   4 mb\nmemory: 8 gb\n"}, {"classified_as": "bug", "text": "hi,\n\ni noticed something when trying to remove everything from a threejs scene. i'd like to know if it's a bug, or an expected behaviour.\n\nconsider the following examples (that i quickly scribbled):\n\nhttp://jsfiddle.net/tmbkw2wy/3/\nhttp://jsfiddle.net/tmbkw2wy/4/\n\nthe first example releases resources as it's expected, while the second has the threejs' structures remain in heap memory even after they're disposed of. one can check this by taking heap snapshots (with chrome's dev tools for instance) after adding and removing the \"tubes\" once.\n\nis this behaviour valid? do i always have to render 1 more time after removing meshes from a scene, and disposing of their geometries+materials?\n\ncheers\n"}, {"classified_as": "enhancement", "text": "os: windows 10\r\nbrowser: ie11\r\n\r\nproblem can be seen in the bootstrap [online documentation for form validation:](http://getbootstrap.com/docs/4.1/components/forms/#custom-styles), when using the browser/os combination mentioned above.\r\n\r\n1. trigger the problem by clicking the submit button for the custom styles example.\r\n2. as expected, the invalid feedback message is displayed for empty fields.\r\n3. start typing text into the \"city\" field.\r\n4. the border of the field changes from red to green, as expected.\r\n5. but the invalid feedback message remains displayed, incorrectly.\r\n6. strangely, the expected behaviour can be triggered by mouseenter or mouseleave for the text input."}, {"classified_as": "bug", "text": "i'm trying to use the profiler server side rendering with `rendertostring` but the onrender callbacks are not getting called.\r\n\r\nis there a way to do it?\r\ni'm using 16.5.1, node_env === \"development\".\r\n\r\nmy code looks like this, works fine client side:\r\n```javascript\r\nimport react, { unstable_profiler } from 'react';\r\n\r\nconst profilercallback = (id, phase, actualtime, basetime, starttime, committime) => {\r\n        console.log(`${id}'s ${phase} phase:`);\r\n        console.log(`actual time: ${actualtime}`);\r\n        console.log(`base time: ${basetime}`);\r\n        console.log(`start time: ${starttime}`);\r\n        console.log(`commit time: ${committime}`);\r\n};\r\n\r\nconst mycomponent = () => (\r\n    <profiler id=\"card\" onrender={profilercallback}>\r\n        ...\r\n    </profiler>\r\n)\r\n```"}, {"classified_as": "bug", "text": "on https://threejs.org/docs/index.html#manual/en/introduction/creating-a-scene i read:\r\n\r\n>before you can use three.js, you need somewhere to display it. save the following html to a file on your computer, along with a copy of three.js in the js/ directory, and open it in your browser.\r\n\r\nit would be very nice if you could jsfiddle or codepen for the examples.\r\n\r\nsame here: https://threejs.org/docs/index.html#manual/en/introduction/how-to-run-things-locally"}, {"classified_as": "bug", "text": "![screen shot 2017-07-11 at 10 11 42 pm 2](https://user-images.githubusercontent.com/1848368/28103098-d601a8de-6688-11e7-9e5d-8ae8e7e58696.png)\r\n\r\nwe should try to request images in parallel with buffers, to improve loading time considerably.\r\n\r\n/cc @takahirox \r\n"}, {"classified_as": "bug", "text": "hello.\r\n\r\nworking: `node --disallow-code-generation-from-strings index.js`\r\nnot working: `node_options=--disallow-code-generation-from-strings node index.js`\r\n\r\nim getting error: `node: --disallow-code-generation-from-strings is not allowed in node_options`\r\n\r\nso its not possible to set  --disallow-code-generation-from-strings in node_options var.\r\n\r\nis this by design?\r\n\r\nthank you."}, {"classified_as": "enhancement", "text": "it has constructor = three.gridhelper but inherited clone method expects constructor property to be linesegments\n"}, {"classified_as": "bug", "text": "<!--\r\nthank you for reporting an issue.\r\n\r\nthis issue tracker is for bugs and issues found within node.js core.\r\nif you require more general support please file an issue on our help\r\nrepo. https://github.com/nodejs/help\r\n\r\n\r\nplease fill in as much of the template below as you're able.\r\n\r\nversion: output of `node -v`\r\nplatform: output of `uname -a` (unix), or version and 32 or 64-bit (windows)\r\nsubsystem: if known, please specify affected core module name\r\n-->\r\n\r\n* **version**: 12.17.0\r\n* **platform**: linux 5.4.0-33-generic # 37-ubuntu smp thu may 21 12:53:59 utc 2020 x86_64 x86_64 x86_64 gnu/linux\r\n* **platform**: linux 3.16.0-4.9-amd64 # 1 smp debian 3.16.7-ckt25-1 (2018-11-21) x86_64 gnu/linux\r\n(it reproduces on both platforms)\r\n* **subsystem**: ?\r\n\r\n### what steps will reproduce the bug?\r\n\r\n<!--\r\nenter details about your bug, preferably a simple code snippet that can be\r\nrun using `node` directly without installing third-party dependencies.\r\n-->\r\n\r\n- open two terminals locally on machine\r\n- run `node` on terminal 1\r\n- `new date().gettimezoneoffset()`\r\n- change timezone in terminal 2\r\n- ask for `new date().gettimezoneoffset()` in node in terminal 1 again\r\n- **note that timezone change is not reflected**\r\n- exit node process in terminal 1 and enter `node` again (another `node` process)\r\n- now `new date().gettimezoneoffset()` reflects the new timezone\r\n- **note that this not-reflecting-new-timezone thing affects creating new dates and any other date operations. `gettimezoneoffset()` is just a sample**\r\n\r\n### how often does it reproduce? is there a required condition?\r\nalways reproduces, no required condition.\r\n\r\n### what is the expected behavior?\r\n\r\n<!--\r\nif possible please provide textual output instead of screenshots.\r\n-->\r\nto reflect and update timezone of node process, when timezone of system is changed.\r\n\r\n### what do you see instead?\r\n\r\n<!--\r\nif possible please provide textual output instead of screenshots.\r\n-->\r\ni see the old timezone.\r\n\r\n### additional information\r\n\r\n<!--\r\ntell us anything else you think we should know.\r\n-->\r\nthis bug has been created and reported previously, as i read, some people mentioned that the main bug is with v8, and linked to some bugs there. by the way, all previous reported bugs were closed. i link to everything i found here:\r\nhttps://github.com/nodejs/node/issues/4022\r\nhttps://github.com/nodejs/node/pull/20026\r\nhttps://github.com/nodejs/node/issues/19974\r\nhttps://github.com/nodejs/node/issues/3449\r\n\r\ni created this issue as some time has passed and honestly, i couldn't find out why the previous issues were closed, and v8 discussions were beyond my knowledge.\r\n\r\n### what is the matter?\r\n\r\nwe have a system, a rather big one, composed of different programming languages and technologies, all components of our system works fine when timezone changes, except nodejs. there are solutions like https://github.com/evanlucas/reset-date-cache, but suppose node queries sql queries and created date objects from timestamps in sql tables, and timezone needs  to  be kept updated. the only way to keep it updated is to reset cache on each page request, which as noted in https://github.com/evanlucas/reset-date-cache: \r\n> the underlying call being made is quite expensive so it should only be used where absolutely necessary.\r\n\r\n### screenshot of reproduction\r\n\r\n![screenshot from 2020-06-09 18-58-34](https://user-images.githubusercontent.com/5755214/84143307-65883480-aa67-11ea-8013-e2f28ce24671.png)\r\n"}, {"classified_as": "enhancement", "text": "not sure if i can offer easily reproducible exmple, but the crux is this: if i have a shader 1 with undefined value for texture uniform, and then load another shader 2 with all textures set, one of these is suddenly used in shader 1 then. i had to create dummy datatexture where i had no texture set because of this, because debugging wrong texture and debugging missing texture are different things.\n"}, {"classified_as": "bug", "text": "hello ~~son~~ @twbs-lmvtfy! you're still monitoring our repo, and can now [bootlint](https://github.com/twbs/bootlint) live examples in addition to validating their html, right? (thanks to https://github.com/cvrebert/lmvtfy/pull/64 )\n- html validity error: http://jsbin.com/hunihamavu/2/edit\n- bootlint error: http://jsbin.com/zexesubayu/2/edit\n"}, {"classified_as": "bug", "text": "when studying the website of bootstrap docs, i was resizing my browser to test the intricacies of columns and rows. however, when i did so, the page keeps jumping up and down, making it very hard for me to focus on the change that happened. i had to scroll to the correct location every time i stopped resizing the browser width. \n\nsuggestion for a feature: to make websites built with bootstrap always focus on the same exact location no matter what happens with resizing the browser.\n\nthis will furthermore improve user experience.\n\ni am using:\n\nmac os el capitan 10.11.5, macbook pro late 2013 model, chrome latest version, bootstrap latest version.\n"}, {"classified_as": "enhancement", "text": "already fixed it. making a public record in case someone reports it before i get the next pr out.\n"}, {"classified_as": "bug", "text": "##### feature request\r\n\r\norbitcontrols were originally created to rotate a camera around a point in a scene:\r\n<img width=\"400\" alt=\"screen shot 2020-01-28 at 3 32 16 pm\" src=\"https://user-images.githubusercontent.com/1710493/73314867-6cfb1f80-41e3-11ea-9e44-597ca914f2ba.png\">\r\nhttps://threejs.org/examples/#misc_controls_orbit\r\n\r\ntransformcontrols were originally created for rotating individual objects within a scene:\r\n<img width=\"400\" alt=\"screen shot 2020-01-28 at 3 32 26 pm\" src=\"https://user-images.githubusercontent.com/1710493/73314876-74222d80-41e3-11ea-93e0-fa89beb1b987.png\">\r\nhttps://threejs.org/examples/#misc_controls_transform\r\n\r\nhowever in most examples and in web apps, we seem to be using orbitcontrols to rotate objects? e.g.\r\nhttps://threejs.org/examples/#webgl_materials_normalmap_object_space\r\nhttps://threejs.org/examples/#webgl_clipping_intersection\r\nhttps://threejs.org/examples/#webgl_clipping_stencil\r\nhttps://threejs.org/examples/#webgl_decals\r\netc...\r\n\r\nthis usage creates confusion when you actually do want to rotate an object (and control the camera separately). in my case i needed the user to spin a globe, while the camera pans to a certain viewing angle.\r\n\r\nneither orbitcontrols or transformcontrols fully support the actual needed functionality needed for object spinning:\r\n- orbitcontrols locks your camera.lookat to controls.target, and is spinning the camera not the object, which also spins the scenes.\r\n- transformcontrols correctly spins the object, but doesn't support damping / free spinning / hiding the gizmo gui.\r\n\r\nso with that in mind, could we add an example for objectcontrols?\r\n\r\nthe controls implementation of autodesk forge viewer is probably a good benchmark:\r\nhttps://forge-rcdb.autodesk.io/configurator?id=5904729b0007f5ead5b1196d\r\n\r\nsome ideal features:\r\n- selecting an object\r\n- rotate object\r\n- lock axis\r\n- free spin in any direction\r\n- damping to slowly spin to a stop\r\n\r\nhere is my attempt at a potential solution by using transformcontrols as a reference:\r\n\r\nindex.html\r\n```\r\ncontrol = new objectcontrols(camera, renderer.domelement);\r\ncontrol.enabledamping = true;\r\ncontrol.freemode = true;\r\ncontrol.setmode('rotate');\r\ncontrol.showx = false;\r\ncontrol.showy = false;\r\ncontrol.showz = false;\r\n```\r\n\r\nobjectcontrols.js line 69\r\n```\r\n// set to true to enable damping (inertia)\r\n// if damping is enabled, you must call controls.update() in your animation loop\r\ndefineproperty( \"enabledamping\", false );\r\ndefineproperty( \"dampingfactor\", 0.05 );\r\ndefineproperty( \"freemode\", false );\r\ndefineproperty( \"rotatespeed\", 1.0 );\r\n```\r\n\r\nline 128:\r\n```\r\nvar rotatestart = new vector2();\r\nvar rotateend = new vector2();\r\nvar rotatedelta = new vector2();\r\n```\r\n\r\nline 255:\r\n```\r\nthis.pointerhover = function ( pointer ) {\r\n  if ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\r\n  if (this.freemode === true) {\r\n    this.axis = 'xyze';\r\n    return;\r\n  }\r\n  ray.setfromcamera( pointer, this.camera );\r\n  var intersect = ray.intersectobjects( _gizmo.picker[ this.mode ].children, true )[ 0 ] || false;\r\n  if ( intersect ) {\r\n    this.axis = intersect.object.name;\r\n  } else {\r\n    this.axis = null;\r\n  }\r\n};\r\n```\r\n\r\nline 523:\r\n`var rotation_speed = 2 / worldposition.distanceto( _tempvector.setfrommatrixposition( this.camera.matrixworld ) );`\r\n\r\nline 724:\r\n```\r\nthis.update = function () {\r\n  if (this.dragging === false && scope.enabledamping && (math.abs(rotatedelta.x) > 0.01 || math.abs(rotatedelta.y) > 0.01)) {\r\n    quaternionstart.copy( this.object.quaternion );\r\n    offset = new vector3(\r\n      rotatedelta.x * 5,\r\n      - rotatedelta.y * 5,\r\n      0\r\n    );\r\n    rotatedelta.x *= 1 - scope.dampingfactor;\r\n    rotatedelta.y *= 1 - scope.dampingfactor;\r\n    var rotation_speed = .1 / worldposition.distanceto( _tempvector.setfrommatrixposition( this.camera.matrixworld ) );\r\n    rotationaxis.copy( offset ).cross( eye ).normalize();\r\n    rotationangle = offset.dot( _tempvector.copy( rotationaxis ).cross( this.eye ) ) * rotation_speed;\r\n    rotationaxis.applyquaternion( parentquaternioninv );\r\n    this.object.quaternion.copy( _tempquaternion.setfromaxisangle( rotationaxis, rotationangle ) );\r\n    this.object.quaternion.multiply( quaternionstart ).normalize();\r\n  }\r\n};\r\n```\r\n\r\nline 644:\r\n```\r\nfunction onpointerdown( event ) {\r\n  if ( ! scope.enabled ) return;\r\n  rotatestart.set( event.clientx, event.clienty );\r\n  document.addeventlistener( \"mousemove\", onpointermove, false );\r\n  scope.pointerhover( getpointer( event ) );\r\n  scope.pointerdown( getpointer( event ) );\r\n}\r\nfunction onpointermove( event ) {\r\n  if ( ! scope.enabled ) return;\r\n  rotateend.set( event.clientx, event.clienty );\r\n  rotatedelta.subvectors( rotateend, rotatestart ).multiplyscalar( scope.rotatespeed );\r\n  scope.pointermove( getpointer( event ) );\r\n  rotatestart.copy( rotateend );\r\n}\r\n```\r\n\r\nline 1178:\r\n```\r\nif (this.freemode === true) {\r\n  this.gizmo[ \"translate\" ].visible = false;\r\n  this.gizmo[ \"rotate\" ].visible = false;\r\n  this.gizmo[ \"scale\" ].visible = false;\r\n\r\n  this.helper[ \"translate\" ].visible = false;\r\n  this.helper[ \"rotate\" ].visible = false;\r\n  this.helper[ \"scale\" ].visible = false;\r\n} else {\r\n  this.gizmo[ \"translate\" ].visible = this.mode === \"translate\";\r\n  this.gizmo[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n  this.gizmo[ \"scale\" ].visible = this.mode === \"scale\";\r\n\r\n  this.helper[ \"translate\" ].visible = this.mode === \"translate\";\r\n  this.helper[ \"rotate\" ].visible = this.mode === \"rotate\";\r\n  this.helper[ \"scale\" ].visible = this.mode === \"scale\";\r\n}\r\n```\r\n\r\nlive example:\r\n* [jsfiddle](https://jsfiddle.net/kmturley/2p1v6bcw/20/)\r\n* [somone else's example](http://projects.defmech.com/threejsobjectrotationwithquaternion/)\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r112\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\nnone"}, {"classified_as": "enhancement", "text": "http://www.rgba.org/r3d/3d-piano-player/\n"}, {"classified_as": "enhancement", "text": "hi,\ni have been working for a while with the library and the online editor to export 3d objects to json file.\nsince the release of the new version i can't seem to find a way to export any kind of models from the command export object. i keep getting the error \"cannot read property 'geometries' of undefined\" with all the models i used to be able to export.do you have any suggestions?\n\nthanks\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\ndear ladies and gentlemen,\r\n\r\nwe struggle with three js, daz3d and mixamo, to release a new web browser game, it looks like the current blocker is in mixamo exporter or three js fbx importer (more likely).\r\n\r\nas all mixamo's objects works with three js fbx loader we've decided to firstly export a fbx model to mixamo from daz studio and then from mixamo to three js to make process clear and to preserve formats compatibility.\r\n\r\nhowever. in mixamo, our fbx model works perfectly, but when we export it to three js from mixamo, it looks very bad, however animation is recognized and some kind of animation is ongoing, but head, legs etc. are not in the proper place.\r\n\r\nif you like \"the thing\" from john carpenter, then you will know what i mean ;)\r\n\r\nplease see attachments for details \r\nhttps://drive.google.com/open?id=1fbjx4v7t_lq54f8wlgptqr-3ezjs8q9z\r\n\r\nattachment contains 2 models (one imported to mixamo, one exported from mixamo) and videos showing how well model behave in mixamo and how bad it looks in three js.. :(\r\n\r\nthank you !\r\n\r\n##### three.js version\r\n\r\nlatest greatest!\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- exclude internet explorer as it's not compatible with the fbx loader..\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\nnone..\r\n\r\nbest regards,\r\nkarol\r\n\r\nsoftware architect\r\nwww.artificialworldsltd.com"}, {"classified_as": "bug", "text": "as suggested in https://github.com/mrdoob/three.js/pull/14895#issuecomment-421139939."}, {"classified_as": "bug", "text": "popover gets misplaced from its target icon when screen is rotated \n"}, {"classified_as": "enhancement", "text": "gltf spec says that for rotation and weights animations, values may contain byte/short normalized values. however, they aren't supported correctly by three.js.\r\n\r\nwhat happens right now is that we create (for example) quaternionkeyframetrack, which ends up calling animationutils.convertarray which simply creates a new float32array without normalizing the values.\r\n\r\ni would like to fix it but i'm not sure where the best place to fix this is. should gltfloader convert the output accessor to float32array manually, or is it better to add normalized input array support to various keyframe tracks?"}, {"classified_as": "enhancement", "text": "i'm using the built in js carousel a rotating header on my site. the problem occurs while using tabs in the latest version of chrome.\n\nfirst open a page with a carousel on it. then open a new tab (same window). after a few slides would have gone by, switch back to the carousel. the current slide/next slide transition should be broken for one iteration. for example, the current slide image isn't shown until the next slide takes its place. also the transition times seem to be off. after the one broken iteration, the carousel works as normal.\n\nmaybe this is something that chrome is doing to save cpu?\n"}, {"classified_as": "bug", "text": "binding viewbox attribute on svg does not seen to work.\n\nrepro: https://jsfiddle.net/ct1zagyz/2/\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\ni don't know if i'm doing things wrong but i try to set a uniform in my code as an uint but threejs throw an error:\r\n\r\n```\r\ntypeerror: u.setvalue is not a function\r\nupload http://localhost:5510/v6/lib/three.module.js:17421\r\n    setprogram http://localhost:5510/v6/lib/three.module.js:25213\r\n    renderbufferdirect http://localhost:5510/v6/lib/three.module.js:23935\r\n    renderobject http://localhost:5510/v6/lib/three.module.js:24687\r\n    renderobjects http://localhost:5510/v6/lib/three.module.js:24657\r\n    render http://localhost:5510/v6/lib/three.module.js:24436\r\n```\r\n\r\ni'm using my own rawshader:\r\n\r\n```webgl\r\n#version 300 es\r\n\r\nprecision highp float;\r\n\r\nuniform uint projectionsize;\r\n// classic glsl code\r\n```\r\n\r\ni just changed `int` into `uint` and the error appeared.\r\n\r\n\r\n##### three.js version\r\n- [x] r112\r\n\r\n##### browser\r\n\r\n- [x] chrome\r\n- [x] firefox\r\n\r\n##### os\r\n\r\n- [x] windows\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n- [x] webgl2\r\n"}, {"classified_as": "bug", "text": "hello everyone,\n\ni am fairly new to webgl so please bear with me.\n\nbasically, i outputted a simple collada animation via blender to test \u00e2\u20ac\u201d i load the dae file fine with the colladaloader, it shows up in my test, however the animation isn't playing. as far as i understand collada is the file type to use for animation, but why isn't my animation playing?\n\nthanks for an awesome build and easy to use webgl api.\n\ncheers\n"}, {"classified_as": "enhancement", "text": "it may be a duplicate one, but i can't find it...\nand has my english is poor i made a fiddle : http://jsfiddle.net/turboconnard/34btu/56/\n\ni don't know if it's a bug or if it's normal for a plane to display like this.\n\n(my project is almost done, i'll show you by the end of the week...)\n"}, {"classified_as": "enhancement", "text": "refs: #29222\r\n\r\nas that pr shows, there are some unused imports that `tools/check-imports.py` doesn't catch because:\r\n\r\n1. they're used in comments.\r\n2. the tool doesn't match at word boundaries (e.g. `fromjust` is considered a use of `just`.)"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nafter the recent changes that offer control over the stencil buffer state through the material interface in #15611 , one major aspect of the stencil state setup was overlooked: the stencil write mask.\r\n\r\nthis can be set directly through the stencil buffer like: \r\n``` javascript\r\nrenderer.state.buffers.stencil.setmask(mask);\r\n```\r\n\r\nbut, as we can see [here](https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/webglstate.js#l684), it's not exposed nor used through the material's stencil parameters:\r\n``` javascript\r\nvar stencilwrite = material.stencilwrite;\r\nstencilbuffer.settest( stencilwrite );\r\nif ( stencilwrite ) {\r\n\tstencilbuffer.setfunc( material.stencilfunc, material.stencilref, material.stencilmask );\r\n\tstencilbuffer.setop( material.stencilfail, material.stencilzfail, material.stencilzpass );\r\n}\r\n```\r\n\r\nmaterial's ``material.stencilmask`` should be split in ``material.stencilwritemask`` (which would be use in conjunction with ``renderer.state.buffers.stencil.setmask()``) and ``material.stencilfuncmask`` to properly expose all the stencil state functionality through the material layer.\r\n\r\nsome nice links on the topic:\r\n* [stencilmask](https://developer.mozilla.org/en-us/docs/web/api/webglrenderingcontext/stencilmask)\r\n* [stencilfunc](https://developer.mozilla.org/en-us/docs/web/api/webglrenderingcontext/stencilfunc)\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r108\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "enhancement", "text": "hi mrdoob/team,\r\n\r\nmany times while going through the documentation i would like to ctrl/cmd+click on links pointing to particular class documentation to open in new tab. because the <a> elements don't even contain href attribute, it simply doesn't work. similarly, i can't right click and \"open in new tab\".\r\n\r\ni'm not providing an example because you can pick any documentation page and look for any documentation-linked class name to see the problem.\r\n\r\nthe documentation of three.js is pretty good and i'm thankful! just wondering if it'd not be too much work to perhaps update the onclick listener / setfragmenturl function to consider if a modifier is pressed. (i understand the lack of href is because you want the doc page to be like an spa).\r\n\r\nthank you for your consideration and have a great day,\r\nmichal"}, {"classified_as": "enhancement", "text": "hi,\r\nis carousel compatible with internet explorer 11 in bootstrap 4?\r\nthe transitions inside\r\n`<div class=\"carousel-caption d-none d-md-block\">`  <br>dont work properly.\r\n\r\nthanks\r\n"}, {"classified_as": "bug", "text": "hi,\n\nhere is my program ([jsfiddle](http://jsfiddle.net/w9dphlfc/2/)):\n\n``` jsx\nvar input = react.createclass({\n    render: function() {\n        return (\n            <input \n                {...this.props}\n            />\n        );\n    }\n});\n\nvar testutils = react.addons.testutils;\nvar inputinstance = \n        testutils.renderintodocument(\n            <input\n                value='abc'\n            />\n        );\n\nvar inputdomnode = react.finddomnode(inputinstance);\n\ninputdomnode.focus();\n\n// place cursor at the end.\ninputdomnode.setselectionrange(3, 3);\n\n// should log 3 twice.\nconsole.log(inputdomnode.selectionstart);\nconsole.log(inputdomnode.selectionend);\n```\n\n**problem**: `0` is logged twice in chrome and firefox.\n**what i expected**: `3` is logged twice. we see this in safari.\n\nthe interesting part is if we use `react.render(..., document.body)` instead of `testutils.renderintodocument` the program works as expected. \n\ni am using:\n- chrome 42.0.2311.135\n- firefox 37.0.2\n- safari  8.0.5 (10600.5.17)\n"}, {"classified_as": "enhancement", "text": "hi,\n\n[suitcss's base module](https://github.com/suitcss/base/blob/master/lib/base.css) contains the following snippet to support focus styles in firefox when the background is transparent:\n\n``` css\n\n/**\n * work around a firefox/ie bug where the transparent `button` background\n * results in a loss of the default `button` focus styles.\n */\n\nbutton:focus {\n  outline: 1px dotted;\n  outline: 5px auto -webkit-focus-ring-color;\n}\n```\n\nwould this be appropriate for bootstrap to include?\n\ncheers,\nole\n"}, {"classified_as": "bug", "text": "plyexporter needs to support little endian.\r\n\r\ni had to change code for that.\r\n\r\nplyexporter.d.ts\r\n```ts\r\nimport { object3d } from 'three';\r\n\r\nexport interface plyexporteroptions {\r\n\tbinary?: boolean;\r\n\tlittleendian?: boolean;\r\n\texcludeattributes?: string[];\r\n}\r\n\r\nexport class plyexporter {\r\n\r\n\tconstructor();\r\n\r\n\tparse( object: object3d, ondone: ( res: string ) => void, options: plyexporteroptions ): string | null;\r\n\r\n}\r\n```\r\n\r\nplyexporter.js\r\n\r\n```js\r\n/**\r\n * @author garrett johnson / http://gkjohnson.github.io/\r\n * https://github.com/gkjohnson/ply-exporter-js\r\n *\r\n * usage:\r\n *  var exporter = new plyexporter();\r\n *\r\n *  // second argument is a list of options\r\n *  exporter.parse(mesh, data => console.log(data), { binary: true, excludeattributes: [ 'color' ] });\r\n *\r\n * format definition:\r\n * http://paulbourke.net/dataformats/ply/\r\n */\r\n\r\nimport {\r\n\tbuffergeometry,\r\n\tmatrix3,\r\n\tvector3\r\n} from \"three\";\r\n\r\nvar plyexporter = function () {};\r\n\r\nplyexporter.prototype = {\r\n\r\n\tconstructor: plyexporter,\r\n\r\n\tparse: function ( object, ondone, options ) {\r\n\r\n\t\tif ( ondone && typeof ondone === 'object' ) {\r\n\r\n\t\t\tconsole.warn( 'three.plyexporter: the options parameter is now the third argument to the \"parse\" function. see the documentation for the new api.' );\r\n\t\t\toptions = ondone;\r\n\t\t\tondone = undefined;\r\n\r\n\t\t}\r\n\r\n\t\t// iterate over the valid meshes in the object\r\n\t\tfunction traversemeshes( cb ) {\r\n\r\n\t\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\t\tif ( child.ismesh === true ) {\r\n\r\n\t\t\t\t\tvar mesh = child;\r\n\t\t\t\t\tvar geometry = mesh.geometry;\r\n\r\n\t\t\t\t\tif ( geometry.isgeometry === true ) {\r\n\r\n\t\t\t\t\t\tgeometry = geomtobuffergeom.get( geometry );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( geometry.isbuffergeometry === true ) {\r\n\r\n\t\t\t\t\t\tif ( geometry.getattribute( 'position' ) !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tcb( mesh, geometry );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\t// default options\r\n\t\tvar defaultoptions = {\r\n\t\t\tbinary: false,\r\n\t\t\texcludeattributes: [] // normal, uv, color, index\r\n\t\t};\r\n\r\n\t\toptions = object.assign( defaultoptions, options );\r\n\r\n\t\tvar excludeattributes = options.excludeattributes;\r\n\t\tvar geomtobuffergeom = new weakmap();\r\n\t\tvar includenormals = false;\r\n\t\tvar includecolors = false;\r\n\t\tvar includeuvs = false;\r\n\r\n\t\t// count the vertices, check which properties are used,\r\n\t\t// and cache the buffergeometry\r\n\t\tvar vertexcount = 0;\r\n\t\tvar facecount = 0;\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.ismesh === true ) {\r\n\r\n\t\t\t\tvar mesh = child;\r\n\t\t\t\tvar geometry = mesh.geometry;\r\n\r\n\t\t\t\tif ( geometry.isgeometry === true ) {\r\n\r\n\t\t\t\t\tvar buffergeometry = geomtobuffergeom.get( geometry ) || new buffergeometry().setfromobject( mesh );\r\n\t\t\t\t\tgeomtobuffergeom.set( geometry, buffergeometry );\r\n\t\t\t\t\tgeometry = buffergeometry;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( geometry.isbuffergeometry === true ) {\r\n\r\n\t\t\t\t\tvar vertices = geometry.getattribute( 'position' );\r\n\t\t\t\t\tvar normals = geometry.getattribute( 'normal' );\r\n\t\t\t\t\tvar uvs = geometry.getattribute( 'uv' );\r\n\t\t\t\t\tvar colors = geometry.getattribute( 'color' );\r\n\t\t\t\t\tvar indices = geometry.getindex();\r\n\r\n\t\t\t\t\tif ( vertices === undefined ) {\r\n\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertexcount += vertices.count;\r\n\t\t\t\t\tfacecount += indices ? indices.count / 3 : vertices.count / 3;\r\n\r\n\t\t\t\t\tif ( normals !== undefined ) includenormals = true;\r\n\r\n\t\t\t\t\tif ( uvs !== undefined ) includeuvs = true;\r\n\r\n\t\t\t\t\tif ( colors !== undefined ) includecolors = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\tvar includeindices = excludeattributes.indexof( 'index' ) === - 1;\r\n\t\tincludenormals = includenormals && excludeattributes.indexof( 'normal' ) === - 1;\r\n\t\tincludecolors = includecolors && excludeattributes.indexof( 'color' ) === - 1;\r\n\t\tincludeuvs = includeuvs && excludeattributes.indexof( 'uv' ) === - 1;\r\n\r\n\r\n\t\tif ( includeindices && facecount !== math.floor( facecount ) ) {\r\n\r\n\t\t\t// point cloud meshes will not have an index array and may not have a\r\n\t\t\t// number of vertices that is divisble by 3 (and therefore representable\r\n\t\t\t// as triangles)\r\n\t\t\tconsole.error(\r\n\r\n\t\t\t\t'plyexporter: failed to generate a valid ply file with triangle indices because the ' +\r\n\t\t\t\t'number of indices is not divisible by 3.'\r\n\r\n\t\t\t);\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar indexbytecount = 4;\r\n\r\n\t\tvar header =\r\n\t\t\t'ply\\n' +\r\n\t\t\t`format ${ options.binary ? (options.littleendian?'binary_little_endian':'binary_big_endian') : 'ascii' } 1.0\\n` +\r\n\t\t\t`element vertex ${vertexcount}\\n` +\r\n\r\n\t\t\t// position\r\n\t\t\t'property float x\\n' +\r\n\t\t\t'property float y\\n' +\r\n\t\t\t'property float z\\n';\r\n\r\n\t\tif ( includenormals === true ) {\r\n\r\n\t\t\t// normal\r\n\t\t\theader +=\r\n\t\t\t\t'property float nx\\n' +\r\n\t\t\t\t'property float ny\\n' +\r\n\t\t\t\t'property float nz\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includeuvs === true ) {\r\n\r\n\t\t\t// uvs\r\n\t\t\theader +=\r\n\t\t\t\t'property float s\\n' +\r\n\t\t\t\t'property float t\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includecolors === true ) {\r\n\r\n\t\t\t// colors\r\n\t\t\theader +=\r\n\t\t\t\t'property uchar red\\n' +\r\n\t\t\t\t'property uchar green\\n' +\r\n\t\t\t\t'property uchar blue\\n';\r\n\r\n\t\t}\r\n\r\n\t\tif ( includeindices === true ) {\r\n\r\n\t\t\t// faces\r\n\t\t\theader +=\r\n\t\t\t\t`element face ${facecount}\\n` +\r\n\t\t\t\t`property list uchar int vertex_index\\n`;\r\n\r\n\t\t}\r\n\r\n\t\theader += 'end_header\\n';\r\n\r\n\r\n\t\t// generate attribute data\r\n\t\tvar vertex = new vector3();\r\n\t\tvar normalmatrixworld = new matrix3();\r\n\t\tvar result = null;\r\n\r\n\t\tif ( options.binary === true ) {\r\n\r\n\t\t\t// binary file generation\r\n\t\t\tvar headerbin = new textencoder().encode( header );\r\n\r\n\t\t\t// 3 position values at 4 bytes\r\n\t\t\t// 3 normal values at 4 bytes\r\n\t\t\t// 3 color channels with 1 byte\r\n\t\t\t// 2 uv values at 4 bytes\r\n\t\t\tvar vertexlistlength = vertexcount * ( 4 * 3 + ( includenormals ? 4 * 3 : 0 ) + ( includecolors ? 3 : 0 ) + ( includeuvs ? 4 * 2 : 0 ) );\r\n\r\n\t\t\t// 1 byte shape desciptor\r\n\t\t\t// 3 vertex indices at ${indexbytecount} bytes\r\n\t\t\tvar facelistlength = includeindices ? facecount * ( indexbytecount * 3 + 1 ) : 0;\r\n\t\t\tvar output = new dataview( new arraybuffer( headerbin.length + vertexlistlength + facelistlength ) );\r\n\t\t\tnew uint8array( output.buffer ).set( headerbin, 0 );\r\n\r\n\r\n\t\t\tvar voffset = headerbin.length;\r\n\t\t\tvar foffset = headerbin.length + vertexlistlength;\r\n\t\t\tvar writtenvertices = 0;\r\n\t\t\ttraversemeshes( function ( mesh, geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.getattribute( 'position' );\r\n\t\t\t\tvar normals = geometry.getattribute( 'normal' );\r\n\t\t\t\tvar uvs = geometry.getattribute( 'uv' );\r\n\t\t\t\tvar colors = geometry.getattribute( 'color' );\r\n\t\t\t\tvar indices = geometry.getindex();\r\n\r\n\t\t\t\tnormalmatrixworld.getnormalmatrix( mesh.matrixworld );\r\n\r\n\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvertex.x = vertices.getx( i );\r\n\t\t\t\t\tvertex.y = vertices.gety( i );\r\n\t\t\t\t\tvertex.z = vertices.getz( i );\r\n\r\n\t\t\t\t\tvertex.applymatrix4( mesh.matrixworld );\r\n\r\n\r\n\t\t\t\t\t// position information\r\n\t\t\t\t\toutput.setfloat32( voffset, vertex.x, options.littleendian );\r\n\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\toutput.setfloat32( voffset, vertex.y, options.littleendian );\r\n\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\toutput.setfloat32( voffset, vertex.z, options.littleendian );\r\n\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t// normal information\r\n\t\t\t\t\tif ( includenormals === true ) {\r\n\r\n\t\t\t\t\t\tif ( normals != null ) {\r\n\r\n\t\t\t\t\t\t\tvertex.x = normals.getx( i );\r\n\t\t\t\t\t\t\tvertex.y = normals.gety( i );\r\n\t\t\t\t\t\t\tvertex.z = normals.getz( i );\r\n\r\n\t\t\t\t\t\t\tvertex.applymatrix3( normalmatrixworld ).normalize();\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, vertex.x, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, vertex.y, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, vertex.z, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, 0, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, 0, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, 0, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// uv information\r\n\t\t\t\t\tif ( includeuvs === true ) {\r\n\r\n\t\t\t\t\t\tif ( uvs != null ) {\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, uvs.getx( i ), options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, uvs.gety( i ), options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t} else if ( includeuvs !== false ) {\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, 0, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t\toutput.setfloat32( voffset, 0, options.littleendian );\r\n\t\t\t\t\t\t\tvoffset += 4;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// color information\r\n\t\t\t\t\tif ( includecolors === true ) {\r\n\r\n\t\t\t\t\t\tif ( colors != null ) {\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, math.floor( colors.getx( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, math.floor( colors.gety( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, math.floor( colors.getz( i ) * 255 ) );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, 255 );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, 255 );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( voffset, 255 );\r\n\t\t\t\t\t\t\tvoffset += 1;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( includeindices === true ) {\r\n\r\n\t\t\t\t\t// create the face list\r\n\r\n\t\t\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( foffset, 3 );\r\n\t\t\t\t\t\t\tfoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, indices.getx( i + 0 ) + writtenvertices, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, indices.getx( i + 1 ) + writtenvertices, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, indices.getx( i + 2 ) + writtenvertices, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\toutput.setuint8( foffset, 3 );\r\n\t\t\t\t\t\t\tfoffset += 1;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, writtenvertices + i, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, writtenvertices + i + 1, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t\toutput.setuint32( foffset, writtenvertices + i + 2, options.littleendian );\r\n\t\t\t\t\t\t\tfoffset += indexbytecount;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// save the amount of verts we've already written so we can offset\r\n\t\t\t\t// the face index on the next mesh\r\n\t\t\t\twrittenvertices += vertices.count;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tresult = output.buffer;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// ascii file generation\r\n\t\t\t// count the number of vertices\r\n\t\t\tvar writtenvertices = 0;\r\n\t\t\tvar vertexlist = '';\r\n\t\t\tvar facelist = '';\r\n\r\n\t\t\ttraversemeshes( function ( mesh, geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.getattribute( 'position' );\r\n\t\t\t\tvar normals = geometry.getattribute( 'normal' );\r\n\t\t\t\tvar uvs = geometry.getattribute( 'uv' );\r\n\t\t\t\tvar colors = geometry.getattribute( 'color' );\r\n\t\t\t\tvar indices = geometry.getindex();\r\n\r\n\t\t\t\tnormalmatrixworld.getnormalmatrix( mesh.matrixworld );\r\n\r\n\t\t\t\t// form each line\r\n\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvertex.x = vertices.getx( i );\r\n\t\t\t\t\tvertex.y = vertices.gety( i );\r\n\t\t\t\t\tvertex.z = vertices.getz( i );\r\n\r\n\t\t\t\t\tvertex.applymatrix4( mesh.matrixworld );\r\n\r\n\r\n\t\t\t\t\t// position information\r\n\t\t\t\t\tvar line =\r\n\t\t\t\t\t\tvertex.x + ' ' +\r\n\t\t\t\t\t\tvertex.y + ' ' +\r\n\t\t\t\t\t\tvertex.z;\r\n\r\n\t\t\t\t\t// normal information\r\n\t\t\t\t\tif ( includenormals === true ) {\r\n\r\n\t\t\t\t\t\tif ( normals != null ) {\r\n\r\n\t\t\t\t\t\t\tvertex.x = normals.getx( i );\r\n\t\t\t\t\t\t\tvertex.y = normals.gety( i );\r\n\t\t\t\t\t\t\tvertex.z = normals.getz( i );\r\n\r\n\t\t\t\t\t\t\tvertex.applymatrix3( normalmatrixworld ).normalize();\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tvertex.x + ' ' +\r\n\t\t\t\t\t\t\t\tvertex.y + ' ' +\r\n\t\t\t\t\t\t\t\tvertex.z;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tline += ' 0 0 0';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// uv information\r\n\t\t\t\t\tif ( includeuvs === true ) {\r\n\r\n\t\t\t\t\t\tif ( uvs != null ) {\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tuvs.getx( i ) + ' ' +\r\n\t\t\t\t\t\t\t\tuvs.gety( i );\r\n\r\n\t\t\t\t\t\t} else if ( includeuvs !== false ) {\r\n\r\n\t\t\t\t\t\t\tline += ' 0 0';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// color information\r\n\t\t\t\t\tif ( includecolors === true ) {\r\n\r\n\t\t\t\t\t\tif ( colors != null ) {\r\n\r\n\t\t\t\t\t\t\tline += ' ' +\r\n\t\t\t\t\t\t\t\tmath.floor( colors.getx( i ) * 255 ) + ' ' +\r\n\t\t\t\t\t\t\t\tmath.floor( colors.gety( i ) * 255 ) + ' ' +\r\n\t\t\t\t\t\t\t\tmath.floor( colors.getz( i ) * 255 );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tline += ' 255 255 255';\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertexlist += line + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create the face list\r\n\t\t\t\tif ( includeindices === true ) {\r\n\r\n\t\t\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tfacelist += `3 ${ indices.getx( i + 0 ) + writtenvertices }`;\r\n\t\t\t\t\t\t\tfacelist += ` ${ indices.getx( i + 1 ) + writtenvertices }`;\r\n\t\t\t\t\t\t\tfacelist += ` ${ indices.getx( i + 2 ) + writtenvertices }\\n`;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tfacelist += `3 ${ writtenvertices + i } ${ writtenvertices + i + 1 } ${ writtenvertices + i + 2 }\\n`;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfacecount += indices ? indices.count / 3 : vertices.count / 3;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\twrittenvertices += vertices.count;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tresult = `${ header }${vertexlist}${ includeindices ? `${facelist}\\n` : '\\n' }`;\r\n\r\n\t\t}\r\n\r\n\t\tif ( typeof ondone === 'function' ) requestanimationframe( () => ondone( result ) );\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { plyexporter };\r\n\r\n```\r\n\r\nplease check and include to the upcoming release.\r\nthanks."}, {"classified_as": "enhancement", "text": "i just filed https://bugs.chromium.org/p/chromium/issues/detail?id=713159\r\nthis affects syncthing, because there is a heading inside the button. this causes chrome to think that the accessibility tree should be flattened, and therefore, the accordian no longer has sections marked with headings.\r\n\r\nit is not necessarily necessary to have a button here at all for accessibility purposes, because aria-expanded can directly be put on a heading. this will cause a screen reader to report something like \"heading level three collapsed my device 1.\" if this was a feature request in the past, or a user has requested buttons be placed on each element which is to be expanded and collapsed, it should be noted that the heading should probably be placed outside the button to prevent issues such as this. \r\nthanks"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nif i write attribute mat2/3/4 in shader and upload data like this\r\n\r\n```\r\n// glsl\r\nattribute mat4 matrix;\r\n\r\n// js\r\ngeometry.addattribute( 'matrix', new three.bufferattribute( data, 16 ) );\r\n```\r\n\r\nit fails because the second argument of `gl.vertexattribpointer()` (= `attribute.itemsize`) takes only 1, 2, 3, or 4.\r\n\r\n```\r\ngl error :gl_invalid_value : glvertexattribpointer: size gl_invalid_value\r\n```\r\n\r\ni needed to break it up to columns to use them on three.js.\r\n\r\n```\r\n// glsl\r\nattribute vec4 column0;\r\nattribute vec4 column1;\r\nattribute vec4 column2;\r\nattribute vec4 column3;\r\n\r\nvoid main() {\r\n    mat4 matrix = mat4( column0, column1, column2, column3 );\r\n}\r\n\r\n// js\r\ngeometry.addattribute( 'column0', new three.bufferattribute( data0, 4 ) );\r\ngeometry.addattribute( 'column1', new three.bufferattribute( data1, 4 ) );\r\ngeometry.addattribute( 'column2', new three.bufferattribute( data2, 4 ) );\r\ngeometry.addattribute( 'column3', new three.bufferattribute( data3, 4 ) );\r\n```\r\n\r\nso we can't practically use `mat2/3/4` attribute in shader on three.js because renderer doesn't handle them correctly. but i think allowing them may be useful.\r\n\r\nto handle them we need to update `webglrenderer` to call `enableattribute` and `vertexattribpointer` multiple times for `mat2/3/4`.\r\n\r\nhttps://stackoverflow.com/questions/38853096/webgl-how-to-bind-values-to-a-mat4-attribute\r\n\r\n```\r\n// glsl\r\nattribute mat4 matrix;\r\n\r\n// js\r\ngeometry.addattribute( 'matrix', new three.bufferattribute( data, 16 ) );\r\n\r\n// js in renderer\r\nstate.enableattribute( programattribute.location );\r\nstate.enableattribute( programattribute.location + 1 );\r\nstate.enableattribute( programattribute.location + 2 );\r\nstate.enableattribute( programattribute.location + 3 );\r\n_gl.vertexattribpointer( programattribute.location, 4, type, normalized, 64, 0 );\r\n_gl.vertexattribpointer( programattribute.location + 1, 4, type, normalized, 64, 16 );\r\n_gl.vertexattribpointer( programattribute.location + 2, 4, type, normalized, 64, 32 );\r\n_gl.vertexattribpointer( programattribute.location + 3, 4, type, normalized, 64, 48 );\r\n```\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [ ] r103\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nhere is my code:\r\n\r\n```\r\n  var objloader = new three.objloader2()             \r\n   try{\r\n    objloader.loadmtl(mtlurl, null, onloadmtl)\r\n  }\r\n  catch(e){\r\n    console.log('mtl load error:', e)\r\n  }\r\n```\r\nas there is some network error . so i got this below in my console:\r\nthree.min.js:619 get https://xxxx.xxx.xxx/mtl/xxxx net::err_cert_common_name_invalid\r\n\r\nbut i didn\u00e2\u20ac\u2122t catch any error in my own code neither did the onmtlloader function called.\r\n\r\ninstead , i try @mugen87's suggestion [here](https://discourse.threejs.org/t/can-not-catch-objloader2-error/3496) . objloader works perfect for catching network error.\r\nso i think is it necessary to add an onerror callback for objloader2.loadmtl ?\r\n\r\n\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [x] r95\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "enhancement", "text": "i noticed that scrolling bacame too slow on my site in last month.\r\nhow you can to reproduce that:\r\n - go to http://kzhagorina.pythonanywhere.com/ (brouser: google chrome 62.0.3202.94)\r\n - scroll the window (all is ok  - see profile-good-scrolling.json)\r\n - click on any person (wait and you should see personal snippet for this person at the bottom of page - this action is too slow now  - see profile-open-close.json)\r\n - try to scroll window again (it is very slow too  - see profile-bad-scrolling.json)\r\n - click at the free space on title of personal snippet (it has blue or pink color)\r\n - try to scroll now (it has normal speed - all is ok)\r\n\r\nthe 80% of time is spent on process composite layers.\r\nthe code of site was not updated in last two monthes, but it has direct link to http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js (i know that it is wrong practice. i am sorry)\r\nand the problem arose in this period (in last month or two)\r\n\r\ni tryed to verify html of my site, but i have only some problems with yandex-metrika code and bugs with absent alt tags for images and area.\r\n\r\ni saved some profiles from debugger of google chrome.\r\nyou can load and see it in the browser.\r\n\r\n[bootstrap-scrolling-problems.zip](https://github.com/twbs/bootstrap/files/1483766/bootstrap-scrolling-problems.zip)\r\n\r\nminimal example (you can click here only on one (the most top and the most left) person\r\n[exaple-slow-scrolling.zip](https://github.com/twbs/bootstrap/files/1483917/exaple-slow-scrolling.zip)\r\n\r\n\r\n  \r\n"}, {"classified_as": "bug", "text": "not sure if this has been discussed but when using subdivisionmodifier on a mesh with open edges, they are forming a jagged line, not even as i believe it should be:\n\n![mesh](https://cloud.githubusercontent.com/assets/661820/6374147/f08b7c12-bd06-11e4-92bd-f6455714afe4.png)\n\n![subdivided mesh](https://cloud.githubusercontent.com/assets/661820/6374150/f8c01ffa-bd06-11e4-93bb-40073e2995ff.png)\n\nhttp://codepen.io/znak/pen/qwrpob?editors=001\n\nis this a bug or can it be overcome somehow? thanks!\n\nthree.js r70 / safari 7.1.3 / mac os x 10.9.5 / nvidia geforce gt 120\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\ni create two mesh with same renderorder. \r\n\r\n```js\r\nvar circlegeometry = new three.circlebuffergeometry(radius, segements);                                                                                                                                                                 \r\nvar ringgeometry = new three.ringbuffergeometry(radius, radius + ringwidth, segements);                                                                                                                                                                 \r\nvar cellgeometry = null;\r\n  \r\n//...\r\n\r\nvar circlematerial = new three.meshbasicmaterial({                                                                                                                                                                                                                                                                        \r\n  map: texture,                                                                                                                                                                                                                                                                                                         \r\n  // wireframe: true                                                                                                                                                                                                                                                                                                    \r\n});                                                                                                                                                                                                                                                                                                                       \r\nvar ringmaterial = new three.meshbasicmaterial({                                                                                                                                                                                                                                                                          \r\n  color: 0x000000,                                                                                                                                                                                                                                                                                                      \r\n  vertexcolors: three.vertexcolors,                                                                                                                                                                                                                                                                                     \r\n  // wireframe: true                                                                                                                                                                                                                                                                                                    \r\n});\r\n                                                                                                                                                                                                                                                                                               \r\ncellgeometry = three.buffergeometryutils.mergebuffergeometries([circlegeometry, ringgeometry], true);                                                                                                                                                                                                                     \r\nvar mesh1 = new three.mesh(cellgeometry, [circlematerial, ringmaterial]);                                                                                                                                                                                                                                                 \r\nscene.add(mesh1);                                                                                                                                                                                                                                                                                                         \r\nmesh1.renderorder = radius;                                                                                                                                                                                                                                                                                               \r\nvar mesh2 = new three.mesh(cellgeometry, [circlematerial, ringmaterial]);                                                                                                                                                                                                                                                 \r\nmesh2.position.x += 2;                                                                                                                                                                                                                                                                                                    \r\nmesh2.renderorder = radius;    \r\n                                                                                                                                                                                                                                                                             \r\nscene.add(mesh2);  \r\n```\r\n\r\nthe result was not correct, see screenshot!\r\n![1530709073076](https://user-images.githubusercontent.com/1814495/42278306-f63daf40-7fcc-11e8-9063-b8cecd26014d.jpg)\r\n\u00ef\u00bf\u00bc\r\n\r\n##### three.js version\r\n\r\n\r\n- [ ] r94\r\n\r\n\r\n##### browser\r\n\r\n- [x] chrome\r\n\r\n\r\n##### os\r\n\r\n\r\n- [ ] macos\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "enhancement", "text": "possibly related to #308.\n\npresumably because a trident is a compound object of lines and cones.\n\nshould adding/removing \"compound\" objects like this be supported by scenes implicitly or should the trident itself handle the cone's and line's interactions with the scene explicitly?\n"}, {"classified_as": "enhancement", "text": "by creating an infinitely large temp file for the binary, for example. as reported privately by sebastian py. thanks sebastian!\n"}, {"classified_as": "bug", "text": "the new blender exporter looks very promising(combined with multiple uvs in particular), however there is a serious issue with its performance. perhaps it's related to some dependencies, but on recent i7 3,7ghz it takes well over 20-60min to export 50k vertices while single core usage doesn't drop below 100%. old exporter could do exactly the same job in a few seconds.\nperhaps there is something wrong with my software set, or dependencies, as recently there was really a lot of compilers, libraries and dependencies installed on this machine.\n\nthe exporter was hosted in blender 2.73 x64 running on windows 7 x64. it's definitely not hardware/performance related issue, but it resembles a lot opening large 3dsmax project with tons of track-nodes. test geometry was perfectly clean. exported as opencollada 1.4.1, imported to clean blender scene and exported as json(vertices, normals, faces, uv1, materials, face materials, no scene, uncompressed geometry).\n\nhas anybody experienced similar issues while working on real 3d models?\n"}, {"classified_as": "bug", "text": "the results are not sorted in close-to-far order. i can't seem to find anything in [the code ](https://github.com/mrdoob/three.js/blob/master/src/objects/mesh.js) trying to sort the result.\r\nam i missing something?"}, {"classified_as": "bug", "text": "when using instancedmesh for repeating objects and then exporting it through colladaexporter, only the base mesh appears in exported model, no instances."}, {"classified_as": "bug", "text": "\r\n**what would you like to be added**:\r\na nodedeletion admission plugin rejects node deletion request when the node is still ready.\r\n\r\n\r\n**why is this needed**:\r\nif a ready node is deleted, pod gc controller will delete pods scheduled on the node immediately and forcely with zero grace period. \r\n- this behaviour may have a bad effect on running pods because business processes are killed forcely.\r\n- if many nodes are deleted by mistake,  pods will be deleted immediately unexpectly\r\n\r\n\r\nthe expected way node leaves a cluster should be 1. stop kubelet 2. delete node. if node is already deleted but kubelet is still running, it will fall in loop of heartbeat and fail, which may cause resource leak. besides if kubelet is restarted unexpectedly, node objected will be recreated. so this admission plugin is proposed.\r\n\r\n\r\n/sig node\r\n/sig apimachinery\r\n/help\r\n"}, {"classified_as": "enhancement", "text": "when you have an input-group (i've only tested it with a button) inside a navbar the form doesn't align and makes the navbar height way longer.\n"}, {"classified_as": "bug", "text": "<!-- please use this template while reporting a bug and provide as much info as possible. not doing so may result in your bug not being addressed in a timely manner. thanks!\r\n\r\nif the matter is security related, please disclose it privately via https://kubernetes.io/security/\r\n-->\r\n\r\n\r\n**what happened**:\r\n\r\ni want to deploy k8s with ipv4/ipv6 dual stack.\r\nbut node internal ip always only one either ipv4 or ipv6.\r\npod ip can auto assigned ipv4,ipv6 calico,  ipv6 service also work.\r\nbut nodetype only listener at ipv4, not ipv6.\r\n\r\n```bash\r\n                \"status\": {\r\n                \"addresses\": [\r\n                    {\r\n                        \"address\": \"10.126.20.162\",\r\n                        \"type\": \"internalip\"\r\n                    },\r\n                    {\r\n                        \"address\": \"wxdlong\",\r\n                        \"type\": \"hostname\"\r\n                    }\r\n                ],\r\n```\r\n\r\n**what you expected to happen**:\r\n\r\nas https://kubernetes.io/docs/tasks/network/validate-dual-stack/  said.\r\n\r\n```bash\r\nkubectl get nodes k8s-linuxpool1-34450317-0 -o go-template --template='{{range .status.addresses}}{{printf \"%s: %s \\n\" .type .address}}{{end}}'\r\nhostname: k8s-linuxpool1-34450317-0\r\ninternalip: 10.240.0.5\r\ninternalip: 2001:1234:5678:9abc::5\r\n\r\n```\r\n\r\n\r\n**how to reproduce it (as minimally and precisely as possible)**:\r\nthe init config \r\n\r\n```yaml\r\n\r\napiversion: kubeadm.k8s.io/v1beta2\r\nkind: initconfiguration\r\nlocalapiendpoint:\r\n  advertiseaddress: \"10.126.20.162\"\r\n  bindport: 6443\r\nnoderegistration:\r\n  crisocket: /var/run/dockershim.sock\r\n  taints:\r\n    - effect: noschedule\r\n      key: node-role.kubernetes.io/master\r\n  kubeletextraargs:\r\n    node-ip: \"10.126.20.162,2001:1b74:88:9400::62:62\"\r\n```\r\n\r\n**anything else we need to know?**:\r\n\r\n**environment**:\r\n- kubernetes version (use `kubectl version`):  v1.17.4\r\n\r\n```bash\r\n kubectl version\r\nclient version: version.info{major:\"1\", minor:\"17\", gitversion:\"v1.17.4\", gitcommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", gittreestate:\"clean\", builddate:\"2020-03-12t21:03:42z\", goversion:\"go1.13.8\", compiler:\"gc\", platform:\"linux/amd64\"}\r\nserver version: version.info{major:\"1\", minor:\"17\", gitversion:\"v1.17.4\", gitcommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", gittreestate:\"clean\", builddate:\"2020-03-12t20:55:23z\", goversion:\"go1.13.8\", compiler:\"gc\", platform:\"linux/amd64\"}\r\n```\r\n- cloud provider or hardware configuration:\r\n- os (e.g: `cat /etc/os-release`):\r\n\r\n```bash\r\n# cat /etc/os-release\r\nname=\"red hat enterprise linux server\"\r\nversion=\"7.6 (maipo)\"\r\nid=\"rhel\"\r\nid_like=\"fedora\"\r\nvariant=\"server\"\r\nvariant_id=\"server\"\r\nversion_id=\"7.6\"\r\npretty_name=\"red hat enterprise linux server 7.6 (maipo)\"\r\nansi_color=\"0;31\"\r\ncpe_name=\"cpe:/o:redhat:enterprise_linux:7.6:ga:server\"\r\nhome_url=\"https://www.redhat.com/\"\r\nbug_report_url=\"https://bugzilla.redhat.com/\"\r\n\r\nredhat_bugzilla_product=\"red hat enterprise linux 7\"\r\nredhat_bugzilla_product_version=7.6\r\nredhat_support_product=\"red hat enterprise linux\"\r\nredhat_support_product_version=\"7.6\"\r\n\r\n```\r\n- kernel (e.g. `uname -a`):\r\n\r\n```bash\r\n# uname -a\r\nlinux wxdlong 3.10.0-957.el7.x86_64 #1 smp thu oct 4 20:48:51 utc 2018 x86_64 x86_64 x86_64 gnu/linux\r\n```\r\n- install tools:\r\n```bash\r\n# kubeadm version\r\nkubeadm version: &version.info{major:\"1\", minor:\"17\", gitversion:\"v1.17.4\", gitcommit:\"8d8aa39598534325ad77120c120a22b3a990b5ea\", gittreestate:\"clean\", builddate:\"2020-03-12t21:01:11z\", goversion:\"go1.13.8\", compiler:\"gc\", platform:\"linux/amd64\"}\r\n```\r\n- network plugin and version (if this is a network-related bug):\r\n  calico\r\n- others:\r\n\r\n  may be my init config is not correct, any one can give an full example for ipv4,ipv6 dual stack. thanks\r\n"}, {"classified_as": "enhancement", "text": "i'm trying to have multiple object as `lod`'s level. i figured out it's not possible directly (calling multiple `addlevel(object, 1000)`), so i used proxy `object3d`, add the meshes to it, and then add the proxy to `lod`. so far so good.\n\nbut it doesn't work. `lod` is setting the `visible` of the proxy boject, but it doesn't propagated to it's childs.\n\nmy propositiion is to use `sceneutils.showhierarchy()` in lod instead of simple setting `visible` parameter of single object.\n"}, {"classified_as": "enhancement", "text": "in r61 you change the objmtlloader class and now if we ommit the mtl file name in load() method, you don't use the mtlfile name witch is in the obj file. however, in parse() method we can always find that code \nif ( mtllibcallback ) {\n  var mtlfile = line.substring( 7 );\n  mtlfile = mtlfile.trim();\n  mtllibcallback( mtlfile );\n}\nis it a forgotten?\n\nsecondary, onprogress, onerror parameters seems do be unused in load method (not pass to mtlloader.load() method\n"}, {"classified_as": "bug", "text": "the following screenshots show the situation: .btn-group-vertical is ok on large display, ko on smaller display; .btn-group is ok on small display, ko on larger display.\r\n\r\nthere may be a css way to make .btn-group display differently whether it's in a large or small col-\r\n\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 17\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503059/4de9777a-ff3a-11e6-87a7-6bcac0c4a844.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 25\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503056/4de6b486-ff3a-11e6-877b-e8428e163598.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 15 46\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503058/4de7e978-ff3a-11e6-9a90-2f42b574d644.png\">\r\n<img width=\"1930\" alt=\"capture d ecran 2017-03-02 11 17 56\" src=\"https://cloud.githubusercontent.com/assets/8310516/23503057/4de77dd0-ff3a-11e6-9cd2-926bccd3f613.png\">\r\n\r\n\r\n\r\n"}, {"classified_as": "enhancement", "text": "currently we resolve aws auth credentials from framework specific env variables, and then to avoid eventual [process lock imposed by `aws-sdk`](https://github.com/aws/aws-sdk-js/issues/2983) we do not perfectly reliable checking on whether user is authenticated: https://github.com/serverless/serverless/blob/b3b51c1a50874eea85fdb72bedaf14928069baaa/lib/plugins/aws/lib/validate.js#l31-l55\r\n\r\nideally, we should just ensure that authentication check on `aws-sdk` is not subject to process lock (that possibly will be fixed with https://github.com/aws/aws-sdk-js/pull/3204) and let aws authentication go without any prior validation on our side.\r\n"}, {"classified_as": "bug", "text": "i've created a scene where there's an outer box that's being rendered from the inside (three.backside). inside the main box i've placed two smaller boxes (also being rendered from the inside), some particles, and a text sprite. all the boxes have transparency enabled.\n\nall seems to work well enough, except the sprite not being visible through the inner boxes, and only through the outer one. here's an example (with orbitcontrols enabled): http://jsfiddle.net/rge2j/104/\n\nafter some digging i found this: http://stackoverflow.com/questions/19046972/three-js-cannot-view-a-sprite-through-a-mesh-with-transparency\n\nwhich had me change my example to: http://jsfiddle.net/rge2j/106/\n\nthe latter example works. however, my question is: is this behavior to be fixed in the future, or is the workaround the way to go?\n\nmany thanks!\n"}, {"classified_as": "bug", "text": "<!--\r\nthank you for reporting a possible bug in node.js.\r\n\r\nplease fill in as much of the template below as you can.\r\n\r\nversion: output of `node -v`\r\nplatform: output of `uname -a` (unix), or version and 32 or 64-bit (windows)\r\nsubsystem: if known, please specify the affected core module name\r\n\r\nif possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **version**: v12.13.1\r\n* **platform**: linux 5.3.11\r\n* **subsystem**: child_process\r\n\r\n<!-- please provide more details below this comment. -->\r\n\r\nsee https://gist.github.com/jgehrcke/ab4656353c1155173d2dde5ffceb0d0b for repro code. the output when executing this:\r\n```\r\n$ node kill_no_pid_repro_js.js \r\n2019-11-26t16:49:50.509z info: waiting for the startup error to be handled\r\n2019-11-26t16:49:50.511z info: loop iteration\r\n2019-11-26t16:49:50.514z error: 'error' handler: error: spawn does-not-exist-- enoent\r\n    at process.childprocess._handle.onexit (internal/child_process.js:264:19)\r\n    at onerrornt (internal/child_process.js:456:16)\r\n    at processticksandrejections (internal/process/task_queues.js:80:21) {\r\n  errno: 'enoent',\r\n  code: 'enoent',\r\n  syscall: 'spawn does-not-exist--',\r\n  path: 'does-not-exist--',\r\n  spawnargs: []\r\n}\r\n2019-11-26t16:49:50.521z error: child process startup error\r\n2019-11-26t16:49:50.521z info: send sigterm\r\n2019-11-26t16:49:51.523z info: send sigterm\r\n```\r\n\r\nthe log output with millisecond resolution shows the chronological order of events.\r\n\r\nin the repro code i use an asynchronous startup error detection technique, using the \"error\" event. in the log output we can see that this event is being caught, indicating enoent (command/executable not found, as desired in this repro). that's great.\r\n\r\nafter this one can still call the [`kill()` method](https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal\r\n) on the process. the call \"succeeds\", silently swallowing a problem. the problem as i would put it into words: \"there is no process that you can kill here\", and that problem should _not_ be silently swallowed, because it makes it too easy to write code with race conditions.\r\n\r\ni believe that this should be considered a bug in nodejs: this is a programmer error, i.e. this should throw an error, as it would in other programming environments. if unhandled, this should crash the code, indicating to the programmer that their assumption that the process is alive was wrong. the programmer should be required to explicitly handle an error thrown by `kill()`.\r\n\r\nit's not necessary to demonstrate the struggle, but maybe makes it easier to understand: the repro code calls kill() another time, about 1 second after the startup error had happened. that kill() also swallows the problem.\r\n\r\ni don't know if internally the `kill()` method just is a noop in this case (where the runtime knows that there is no pid to issue a `kill()` system call to), or if it actually calls the system call and then swallows the enoent. but in both cases it makes a conscious choice, knows about the absence of the process, and hides the erroneous attempt from the programmer.\r\n\r\nthere could be two ways to check for the error synchronously:\r\n- the underlying `kill()` system call does fail with enoent, if it is even executed.\r\n- if the underlying `kill()` system call is not executed then the runtime seems to have internal state about the fact that the process is not there (i am pretty sure that this is what's happening, see my code comments in the repro code). that state could be used.\r\n\r\nit is documented that \r\n\r\n> the childprocess object may emit an 'error' event if the signal cannot be delivered\r\n\r\nif this is meant to be _the_ only, reliable, documented way to find out that a `kill()` failed (not quite clear from the documentation) then i think the repro code is also quite insightful: in the repro code that event handler is not called after the erroneous `kill()`. that's in fact proven by the additional 1-second wait, during which i would expect that handler to be called.\r\n\r\nin the repro code comments i have pointed out that the runtime magically detects that the child process is gone, and it terminates the code pre-maturely, to prevent an indefinitely long wait from happening.\r\n\r\nthat is, i think this issue mainly reveals a rather mean inconsistency where the runtime sometimes seems to consider the fact that there is no process, and sometimes it doesn't, making it difficult to write robust child process management code.\r\n\r\nnote: currently there does not seem to be a documented synchronous way to detect a child process startup error (upon common system call errors such as enoent and eacces), and no documented synchronous way to check for process \"liveness\", although both could be done synchronously with \"fast\" system calls. this might be strongly related to this topic here. related: https://github.com/eclipse-theia/theia/pull/3447 and https://github.com/nodejs/help/issues/1191."}, {"classified_as": "enhancement", "text": "currently a config post cannot set the password by hash. posting something like\r\n\r\n```\r\n...\r\n  \"gui\": {\r\n    \"password\": \"$2a$10$v9x2...\",\r\n    \"user\": \"jb\"\r\n  },\r\n...\r\n```\r\n\r\nwill instead make the new password the hash (literally). i think it would be desirable to be able to post a gui section from one device onto another and have the password actually work."}, {"classified_as": "enhancement", "text": "##### description of the problem\r\n\r\nobjectloader has no class member crossorigin, only the method setcrossorigin is present.\r\n\r\ncomparing it to other classes like textureloader, which has\r\n\r\ncrossorigin: 'anonymous'\r\n\r\nobjectloader should also have this member specified.\r\n\r\ni tried to have a real s3 url in images in a json file instead of data:\r\n\r\nthe following error occured:\r\nthree.webglstate: domexception: failed to execute 'teximage2d' on 'webglrenderingcontext': the image element contains cross-origin data, and may not be loaded.\r\n\r\nthis error is gone when adding \r\n\r\ncrossorigin: 'anonymous'\r\n\r\nas a class member to objectloader.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r93\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n"}, {"classified_as": "enhancement", "text": "i copied code from an official example (http://mrdoob.github.io/three.js/examples/webgl_materials_normalmap.html) to do an globe with displacement mapping (http://threejs.thiele-medien.de/index_.html).\neverything seems to be fine, but could this be avoided?\n\nin both im getting multiple console warnings, this is the output of the official example : \n\n```\n\"gl.getprograminfolog()\" \"(59,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n\n(208,20): warning x3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\n(192,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n(281,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n\n\" three.min.js:537\n\"gl.getprograminfolog()\" \"(96,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n\n(225,20): warning x3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\n(209,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n(278,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n(90,5): error x6077: texld/texldb/texldp/dsx/dsy instructions with r# as source cannot be used inside dynamic conditional 'if' blocks, dynamic conditional subroutine calls, or loop/rep with break*. \n\nwarning: d3d shader compilation failed with \ndefault\n flags.\n retrying with \navoid flow control\n.\n\n(225,20): warning x3571: pow(f, e) will not work for negative f, use abs(f) or conditionally handle negative values if you expect them\n(209,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n(278,6): warning x3557: loop only executes for 1 iteration(s), forcing loop to unroll\n\"\n```\n\nscreenshot: http://abload.de/image.php?img=warningsu8kwa.jpg\nthreejs r67\nfirefox 29.0.1, windows 7, nvidia gtx 275\n"}, {"classified_as": "bug", "text": "for geometries with vec2 positions, the computeboundingsphere will not work correctly since it always assumes vec3s.\n\nhttps://github.com/mrdoob/three.js/blob/f73593b00e3b2c927bb1a3236240cea5597166ec/src/core/buffergeometry.js#l327-l332\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nas the title imposes the outline pass have an issue, when you use an orthographic camera (instead of a perspective one). the behavior of the decision, whether the edge is visible or hidden is different (and actually not correct). an outline segment is \"marked\" as hidden if something is drawn in front or behind the segment. only if there is nothing else than the background the outline segment is \"marked\" as visible.\r\n\r\nhere is an image showing the issue:\r\n\r\n![outline pass orthographic camera issue](https://i.imgur.com/t7mdhjm.png)\r\n\r\nand i also included a jsfiddle:\r\n\r\n* [jsfiddle](https://jsfiddle.net/jjtvd4c1/)\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [x] r89\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [ ] all of them\r\n- [x] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [x] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "enhancement", "text": "i'm using a bootstrap modal in my wordpress theme. the modal contains two elements. it contains a search field, and a checkbox. (code below)\n\n```\n<div id=\"searchmodal\" class=\"modal fade\" role=\"dialog\" aria-labelledby=\"searchmodal\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"close\"><span aria-hidden=\"true\">&times;</span></button>\n            <h4 class=\"modal-title\">search</h4>\n          </div>\n          <div class=\"modal-body text-center\">\n\n            <div class=\"searchform\">\n    <?php $search_text = empty($_get['s']) ? __('') : get_search_query(); ?> \n    <form method=\"get\" id=\"searchmodalform\" action=\"<?php bloginfo('url'); ?>/\"> \n        <input type=\"hidden\" id=\"categoryfieldoriginal\" name=\"cat_original\" value=\"<?php echo $category; ?>\" />\n        <input type=\"hidden\" id=\"categoryfield\" name=\"cat\" value=\"0\" />\n    <input type=\"text\" id=\"searchtext\" placeholder=\"search...\" name=\"s\" id=\"s\" tabindex=\"1\" />\n\n        <p class=\"col-md-12 spacer10pix\"><input id=\"globalsearch\" type=\"checkbox\" name=\"categorysearch\" value=\"local\" tabindex=\"2\" style=\"margin:3px;\"> search \"<?php echo $titleofpage; ?>\" only</p>\n\n\n    </form>\n</div>\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">cancel</button>\n            <button id=\"modal-submit-search\" type=\"button\" class=\"btn btn-primary\">search</button>\n          </div>\n        </div><!-- /.modal-content -->\n      </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n\n```\n\nafter tapping off of the search field and checking the checkbox the modal immediately disappears. however, the modal is still present, it's just not showing. rotate the phone and the modal reappears. clicking around on the page i am able to eventually find the search field. if i then delete the text out the search field all of a sudden the modal reappears. so the modal isn't closed. it's like it temporarily becomes hidden behind something but is still actively clickable. \n\nif you click the checkbox and then tap the search field the modal does not disappear. this issue isn't present on desktop nor does it happen on my ipad mini. (so it's not an ios issue directly)\n\nthis was also happening on iphone 6 safari until i added  $('#searchmodal').modal({backdrop: 'static'});.  the backdrop static parameter fixed the issue on safari but it still persists on chrome. \n\ni'm at a loss as to what's happening. adding an alert within a focusout on the search field keeps this from happening, but obviously i don't want an alert to show. it was just a test to see if a focusout event would fix it. (and it does if an alert is present). \n\n```\n$('#searchtext').focusout(function() {\n    alert(\"text\");\n});\n```\n"}, {"classified_as": "bug", "text": "##### description of the problem (three.js r78)\n\ni can set `visible = false` for the material on objects (meshes/lines), so that these objects are hidden, but they will still work for raycasting. i wanted to do the same for sprites, but the `visible` property for `three.spritematerial` does not work as expected; when setting it to false the sprite is still visible.\n\n[here is a fiddle to demonstrate this](https://jsfiddle.net/wilt/8psb5y92/)\n"}, {"classified_as": "enhancement", "text": "hey guys, most of the times that i am adding a sprite on a webg scene, the texture is upside down, or stretched. why is this happening. is there a way so that i won't have to rotate it and change the scale of the object so that it matches the with, height and rotation of the texture image?\n"}, {"classified_as": "bug", "text": "* **version**: all\r\n* **platform**: unix\r\n* **subsystem**: -\r\n\r\nthe free commands says actually that i have 1832 mbs available, which is the free amount + some part of the buff/cache that can be cleared directly when needed.\r\n\r\nthe free column should be small, since this is memory which is not used is simply wasted. available memory is the amount of memory which is available for allocation to a new process or to existing processes.\r\n \r\n```\r\n$ free -m\r\n              total        used        free      shared  buff/cache   available\r\nmem:           7971        5907         149         135        1914        1832\r\nswap:          9541        2122        7419\r\n```\r\n\r\nknowing all this, the nodejs os api (`var os = require('os')`) only provides `os.freemem` and `os.totalmem`. the free memory nodejs api call indeed shows the same value as what the free command gives me. but the os api does **not** have any call like: `os.availablemem` or something simular.\r\n\r\n**bottom-line:** i'm missing the *available* memory call in nodejs. which is often way more useful.\r\n\r\nfor info: \r\n\r\n* [free memory unix c implementation in node](https://github.com/nodejs/node/blob/master/deps/uv/src/unix/sysinfo-memory.c#l32)\r\n\r\nregards,\r\nmelroy van den berg\r\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\ni'm trying to export a simple mesh with a morph target based animation. when i choose `geometry` as geometry type, everything works fine. but when i choose `buffergeometry` (see screenshot), the mesh is exported without morph targets. \r\n\r\n![image](https://cloud.githubusercontent.com/assets/12612165/23577824/701633d4-00c9-11e7-89fa-eac04f7c2ae4.png)\r\n\r\nblender 2.76b, ubuntu, 16.04. i've provided the project file as an attachment.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r84\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [ ] windows\r\n- [x] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n##### attachments\r\n[cube.blend.zip](https://github.com/mrdoob/three.js/files/818524/cube.blend.zip)"}, {"classified_as": "bug", "text": "although `node.style.webkittransform` (pascalcase) does work in safari, the actual property is `node.style.webkittransform` (camelcase) which react doesn't support properly. can an alias be added to handle this case, since it doesn't seem obvious?\n\nin fact, safari's inspector autocomplete doesn't even work for `node.style.webkittransform` - seems like it's a hack that it works.\n"}, {"classified_as": "enhancement", "text": "i was just noticing that the *material property vertexcolors seems to be a bit inconsistent in the implementation.  \n\nfor linebasicmaterial and particlebasicmaterial vertexcolors is a `<bool>` by default\n\nfor  meshbasicmaterial and other mesh*materials it is expected to be one of three.nocolors, three.facecolors, three.vertexcolors.\n\nin webglrenderer nocolor and facecolors get use (dev branch) but nocolors isn't used.  in setting up the shaders it checks for parameters.vertexcolors? to define use_color, while false or 0 passes this check it seems like this could cause problems and confusion in the future.  it seems odd to me that you specify it by a bool in some cases but with a constant in other cases, particularly when everything goes through the same check in webglrenderer.\n\nthis is mainly a style thing but i figured i would mention it.\n"}, {"classified_as": "bug", "text": "the colladaloader fails to load this model.\r\nhttps://raw.githubusercontent.com/0ad/0ad/master/binaries/data/mods/public/art/meshes/skeletal/elephant_african_bush.dae\r\n\r\nresults in this error (in firefox):\r\ntoo much recursion colladaloader.js:3377:8\r\n\r\nhere is the fiddle.\r\nhttps://jsfiddle.net/l923p7ke/\r\n\r\ni can provide more collada files that reproduce this issue if requested :+1: "}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nwhen cloning an equirectangular cubetexture the result is a black texture. \r\nthe same operation does work with a cubetextureloader loaded texture (with 6 images).\r\n\r\n![grafik](https://user-images.githubusercontent.com/4518980/84148048-afb8e800-aa5e-11ea-9f32-e9c07968c1c6.png)\r\nno map after clone()\r\n\r\n\r\n* [jsfiddle clone](https://jsfiddle.net/johannesdeml/46z8w0bg) (latest release branch)\r\n* [jsfiddle clone](https://jsfiddle.net/johannesdeml/yq15zdcn) (dev branch)\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [ ] r117\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [x] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n\r\n## resolved\r\n\r\nwhen using refraction for an equirectangular texture with `equirectangularrefractionmapping`, using it as a background does not work, an the mapping has wrong seams. for cubetextureloader with `cuberefractionmapping` both of that works (see [cubemap refraction](https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_cubemap_refraction.html)).\r\n\r\n![grafik](https://user-images.githubusercontent.com/4518980/84149220-65386b00-aa60-11ea-800b-75d5c9f002cd.png)\r\nwrong background rendering & seam \r\n\r\n* [jsfiddle refraction](https://jsfiddle.net/johannesdeml/fo4ny2dv/5/) (dev branch)"}, {"classified_as": "enhancement", "text": "using version 1.4.1 repl mode, it seems that tab completion for block-scoped variables (i.e. `let` and `const` statements) doesn't show suggestions, while tab completion for variables declared with `var` or otherwise just assigned a value without a deceleration, does show up a list of suggestions.\n\nof course, this happens in strict mode, or else i couldn't use `let` and `const`.\n"}, {"classified_as": "bug", "text": "as a test case, i've animated the default blender cube along the z-axis for 20 frames. in the dope sheet, it looks like this:\n\n![export-issue-1](https://cloud.githubusercontent.com/assets/1110286/6433365/0b7dac8c-c065-11e4-8481-c8dbd0210994.png)\n\nthen, i've selected the armature and the cube, and exported with the following settings:\n\n![image](https://cloud.githubusercontent.com/assets/1110286/6433375/438328aa-c065-11e4-82ea-c9450f630c16.png)\n\nif i then try to play the animation again, red lines appear in the dope sheet, and the animation doesn't play:\n\n![image](https://cloud.githubusercontent.com/assets/1110286/6433389/c93c44f4-c065-11e4-9ede-bedf33dbfa56.png)\n\nin the dope sheet, i've tried selecting channel > revive disabled f-curves, which makes the red lines go away but doesn't fix the issue.\n"}, {"classified_as": "enhancement", "text": "i just noticed that the current active file is not first in the out of sync list.\r\n\r\nthere are 60 files with 1 file ~500 mb and the rest just small files with a few kb\r\nthe modal correctly shows 6 pages with 10 items each.\r\nat the moment the big file is downloading but it is on page 3.\r\n\r\ni think this is because the small files are already waiting (no up arrow to move to top of queue). \r\nit would be nice if the sorting places the active file first.\r\nthanks!"}, {"classified_as": "enhancement", "text": "seems like cards with a background-image set via css are not rendering the background-image in any column except the first column. `-webkit-column-count: 3;`\n\nmy data-attributes are rendering a &lt;style> in ther header.\n\n```\n<div class=\"card-columns\">\n    <div class=\"card card-inverse\">\n        <div class=\"card-block bg-img\" data-img-src=\"http://placehold.it/870x489\" data-img-blur=\"5\" data-img-opacity=\"1\">\n            <h5 class=\"card-title\">test</h5>\n            <p class=\"card-text\">xxxxxxxx xxxxxxxx </p>\n        </div>\n    </div>\n</div>\n```\n\nhttps://jsfiddle.net/mickeyelliott/gamy6lrs/\n"}, {"classified_as": "enhancement", "text": "## description\r\n\r\nwhen using [figures](http://v4-alpha.getbootstrap.com/content/figures/) in a grid, it doesn't fit the width of the container.\r\n\r\nhere's a [pen](http://codepen.io/alienlebarge/pen/apqvbm) to reproduce the bug\r\n\r\n## environment\r\n- **browser version**: [all firefox version](https://www.browserstack.com/screenshots/9fc68838c44e2e5f5b8a4b1a0f5085e231c923ad) [(.zip of screenshots)](http://d.pr/f/cnpb)\r\n- **bootstrap version**: 4.0.0-alpha.6\r\n\r\n\r\n\r\n## cause\r\nthe problem is caused by [the following code](https://github.com/twbs/bootstrap/blob/v4-dev/scss/_images.scss#l32):\r\n```css\r\n.figure {\r\n  // ensures the caption's text aligns with the image.\r\n  display: inline-block;\r\n}\r\n```\r\n\r\n\r\n## additional info\r\n\r\n```html\r\n  <div class=\"row\">\r\n    \r\n    <article class=\"col-md-6\">\r\n      <figure class=\"figure\">\r\n        <img src=\"...\" class=\"figure-img img-fluid rounded\" alt=\"...\">\r\n        <figcaption class=\"figure-caption\">...</figcaption>\r\n      </figure>\r\n      <p>...</p>\r\n    </article><!-- /.col-md-6 -->\r\n    \r\n    <article class=\"col-md-6\">\r\n      <figure class=\"figure\">\r\n        <img src=\"...\" class=\"figure-img img-fluid rounded\" alt=\"...\">\r\n        <figcaption class=\"figure-caption\">...</figcaption>\r\n      </figure>\r\n      <p>...</p>\r\n    </article><!-- /.col-md-6 -->\r\n\r\n  </div><!-- /.row -->\r\n```\r\n\r\n![firefox 45](https://cloud.githubusercontent.com/assets/611234/22461617/3fd54198-e7aa-11e6-8b91-a29229e4eed9.png)\r\n![chrome 55](https://cloud.githubusercontent.com/assets/611234/22461619/42099432-e7aa-11e6-81a9-d2f5e838b96d.png)\r\n"}, {"classified_as": "bug", "text": "the onlyshadow property has now been removed from three.spotlight. how can i use the three.spotlight to only cast shadows in the latest builds? (basically to produce the same effect)\n"}, {"classified_as": "enhancement", "text": "windows server 2004 was released last month, and sig-windows will likely support it for k8s 1.19. we need to add new test jobs that will appear on the [google-windows](https://testgrid.k8s.io/google-windows) / [sig-windows](https://testgrid.k8s.io/sig-windows) testgrids.\r\n\r\nsteps to do this:\r\n- create a suitable vm image for windows 2004 nodes. historically for our test jobs we've used gce's \"windows for containers\" images, but gce will likely not produce such an image for 2004 - we will create and use a gke windows 2004 image instead.\r\n- update the gce cluster scripts with 2004 support ([1909 example](https://github.com/kubernetes/kubernetes/pull/87629)).\r\n- add a new test job for master/1.19 in the test-infra config ([1909 example](https://github.com/kubernetes/test-infra/pull/16050))."}, {"classified_as": "bug", "text": "##### description of the problem\r\n[here](http://hedges.org/thehedges/ver21.wrl) is one such example of a text node with a \"size\" field containing only one number.\r\n##### three.js version\r\n\r\n- [x] r89\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios"}, {"classified_as": "bug", "text": "https://github.com/mrdoob/three.js/blob/master/src/renderers/webglrenderer.js#l2574\n\nplease add the support like in other drawing methods.\n"}, {"classified_as": "bug", "text": "![image](https://user-images.githubusercontent.com/35467304/71453066-66345380-27c4-11ea-9494-9e19f1c1f96f.png)\r\n\r\nthe parameterized model created by blender, the bounding box calculated by the box after the import is the largest, and does not surround the actual model size\r\n[breaker_nm1630s.glb.zip](https://github.com/mrdoob/three.js/files/4001716/breaker_nm1630s.glb.zip)\r\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\ncss3d is not compatible with combinedcamera and orthographic camera.\r\nthere is a workaround which is use css3d with perspectivecamera in perspectivemode and with combinedcamera in orthographicmode.\r\nwith perspectivecamera, everything works perfectly. however with combinedcamera, the css3d transformation is not synchronized with 3d objects transformation: therefore i have to transform it manually for preset positions (top, bottom, right, left, etc.) and users could not pivot the scene.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [ ] r85\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [x] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "i'm not sure if \"element option\" is the correct term for this, but what i mean is a line in an .obj file as for instance:\n\n`l 1164 1469`\n\nthis text specifies that the mesh contains a line between vertex 1164 and 1469.\nobjloader throws \"unexpected line: l 1164 1469\" on such occasion.\n\nfrom what my teams modeler tells me, the \"l\" element option is a pretty common thing to use. if that's the case, perhaps the objloader should recognize it?\n\n[here](https://www.opengl.org/discussion_boards/showthread.php/171130-storing-lines-in-obj-file) is and example of someone using the line element option.\n"}, {"classified_as": "bug", "text": "feature request:\r\nso currently i'm working with an application where i need to send the address of a node buffer to a  ioctl() to communicate with a linux device driver correctly. \r\n\r\ncurrently every buffer allocated gets an address reference, example in a 32-bit architecture : \r\n```javascript\r\nvar mybuf = buffer.alloc(1);\r\nconsole.log(mybuf); // prints buffer where 0x210c378 may be the memory address\r\n// result:  \r\n// <buffer 00>\r\n```\r\n\r\nthe idea is to provide a function that returns the address of the buffer (e.g. **buffer.address**) example:\r\n```javascript\r\nvar mybuf = buffer.alloc(1);\r\nconsole.log(mybuf);\r\nconsole.log(mybuf.address); // should include all left zeros\r\n// result:\r\n// <buffer 00>\r\n// 0210c378\r\n```\r\n\r\ntherefore if i want to make a structure that in c/c++ looks like this\r\n```c\r\nstruct mystruct {\r\n  char *tx;\r\n  int value;\r\n}\r\n```\r\n\r\nthen in node i can create the structure like this\r\n```javascript\r\nvar tx = buffer.from([1, 2, 3, 4]);                // char tx[4], an example\r\nvar pointertotx = buffer.from(tx.address,'hex');   // char *tx\r\nvar value = buffer.alloc(4);                       // int value\r\nvar mystruct = buffer.concat([pointertotx, value]) // struct mystruct {char *tx, int value}\r\nconsole.log(mystruct);  // prints pointer address and a int value buffer\r\n// result: \r\n// <buffer 02 10 c3 78 00 00 00 00> \r\n```\r\n\r\nthe current way of getting the address is using napi/nan modules. i believe at some point there was an implementation in node for getting the memory address of buffers but not sure. if there is already an implementation for this then please let me know. \r\n"}, {"classified_as": "bug", "text": "i need to show some text in **persian/arabic language**. i loaded a font including characters and i used `textgeometry` to create a text on the scene:\r\n\r\n```javascript\r\nvar loader = new three.fontloader();\r\nloader.load('b zar_regular.js', function (font) {\r\n    var textgeo = new three.textgeometry('\u00f8\u00b3\u00f9\u201e\u00f8\u00a7\u00f9\u2026!', {\r\n        font: font,\r\n        size: 1,\r\n        height: 0.05,\r\n        curvesegments: 12,\r\n    });\r\n    var material = new three.meshnormalmaterial();\r\n    var textmesh = new three.mesh(textgeo, material);\r\n    textmesh.position.x = 15;\r\n    scene.add(textmesh);\r\n});\r\n```\r\ni was expecting to see `\u00f8\u00b3\u00f9\u201e\u00f8\u00a7\u00f9\u2026!` but the output was:\r\n![three rtl](https://user-images.githubusercontent.com/5295554/27819530-f8caf048-60af-11e7-849f-1856ad27be65.png)\r\nletters are separated and order of characters is reversed mistakenly. after all it seems threejs do not support rtl languages. am i right or i missed something? is there any workaround as a quick solution? thanks."}, {"classified_as": "enhancement", "text": "please see:\nhttps://stackoverflow.com/questions/31101398/bootstrap-conflict-with-input-range-in-safari\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nregarding controls documents, currently three.js has only `orbitcontrols` document. i think it's helpful to users if we have all the controls documents.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [ ] r108\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "enhancement", "text": "i looked for a lot, but no one raised the question."}, {"classified_as": "bug", "text": "## is your feature request related to a problem? please describe.\r\n\r\ni\u00e2\u20ac\u2122ve\u00e2\u00a0been looking\u00e2\u00a0into what\u00e2\u20ac\u2122s\u00e2\u00a0needed to\u00e2\u00a0implement proper\u00e2\u00a0navigation in\u00e2\u00a0[**jsdom**](https://github.com/jsdom/jsdom).\r\n\r\nthis requires replacing the\u00e2\u00a0underlying `[[window]]` instance of\u00e2\u00a0the\u00e2\u00a0`windowproxy`.\r\n\r\n## describe the solution you'd like\r\n\r\nthe\u00e2\u00a0desired\u00e2\u00a0solution would\u00e2\u00a0be an\u00e2\u00a0api\u00e2\u00a0exposed on\u00e2\u00a0`vm.context`\u00e2\u00a0(<https://github.com/nodejs/node/pull/30709>) that\u00e2\u00a0would\u00e2\u00a0perform a\u00e2\u00a0new\u00e2\u00a0`makecontext`\u00e2\u00a0call, replacing\u00e2\u00a0the\u00e2\u00a0underlying `#global`\u00e2\u00a0private\u00e2\u00a0field and\u00e2\u00a0`[[window]]` private\u00e2\u00a0slot of\u00e2\u00a0the\u00e2\u00a0`windowproxy`, while\u00e2\u00a0ensuring\u00e2\u00a0that the\u00e2\u00a0following test\u00e2\u00a0passes:\r\n\r\n<details>\r\n<summary><code>globalproxy.test.js</code></summary>\r\n<p></p>\r\n\r\n```js\r\nconst { createwindow, navigatewindow } = require(\"./windows.js\");\r\nconst symbolprop = symbol(\"non-configurable\")\r\n\r\nconst {\r\n\tvmcontext,\r\n\tglobalimpl,\r\n\tglobalobject,\r\n\tglobalproxy,\r\n} = createwindow({ url: \"http://example.org/\" });\r\n\r\nassert.strictequal(globalproxy.origin, \"http://example.org\");\r\n\r\n// `globalproxy[symbolprop]` doesn't exist:\r\nassert.strictequal(object.getownpropertydescriptor(globalproxy, symbolprop), undefined);\r\nassert.strictequal(object.getownpropertydescriptor(globalobject, symbolprop), undefined);\r\n\r\nobject.defineproperty(globalproxy, symbolprop, { value: \"non-configurable\" });\r\n\r\n// `globalproxy[symbolprop]` is now a non-configurable own property of `globalobject`:\r\nassert.strictequal(object.getownpropertydescriptor(globalproxy, symbolprop).configurable, false);\r\nassert.strictequal(object.getownpropertydescriptor(globalobject, symbolprop).configurable, false);\r\n\r\nconst {\r\n\tnewglobalimpl,\r\n\tnewglobalobject,\r\n} = navigatewindow(vmcontext, { url: \"https://example.org/\" });\r\nconst newglobalproxy = vm.runincontext(\"this\", vmcontext);\r\n\r\nassert.strictequal(globalproxy, newglobalproxy);\r\nassert.strictequal(globalproxy.origin, \"https://example.org\");\r\nassert.notstrictequal(globalobject, newglobalobject);\r\nassert.notstrictequal(globalimpl, newglobalimpl);\r\n\r\n// `globalproxy[symbolprop]` doesn't exist anymore, as the proxy target is now `newglobalobject`:\r\nassert.strictequal(object.getownpropertydescriptor(globalproxy, symbolprop), undefined);\r\nassert.strictequal(object.getownpropertydescriptor(newglobalobject, symbolprop), undefined);\r\n\r\n// `globalobject[symbolprop]` is still the old non-configurable own property:\r\nassert.strictequal(object.getownpropertydescriptor(globalobject, symbolprop).configurable, false);\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary><code>windows.js</code> (new\u00e2\u00a0api is\u00e2\u00a0called\u00e2\u00a0here)</summary>\r\n<p></p>\r\n\r\n```js\r\nfunction setupwindow(window, globalproxy, options, vmcontext) {\r\n\tinstallinterfaces(window);\r\n\tobject.setprototypeof(window, window.window.prototype);\r\n\twindow.setup(\r\n\t\t/* globalobject */ window,\r\n\t\t/* wrapperinstance */ window,\r\n\t\t/* constructorargs */ undefined,\r\n\t\t/* privatedata */ { globalproxy, options, vmcontext }\r\n\t);\r\n}\r\n\r\nexports.createwindow = (options = {}) => {\r\n\tlet vmcontext = new vm.context({ origin: computeorigin(options.url) });\r\n\tlet window = context.global;\r\n\tlet globalproxy = vm.runincontext(\"this\", vmcontext);\r\n\r\n\tsetupwindow(window, vmcontext, globalproxy, options)\r\n\treturn {\r\n\t\tvmcontext,\r\n\t\tglobalimpl: idlutils.implforwrapper(window),\r\n\t\tglobalobject: window,\r\n\t\tglobalproxy\r\n\t}\r\n}\r\n\r\nexports.navigatewindow = (vmcontext, options = {}) => {\r\n\t// new api is called here:\r\n\tvmcontext.createnewglobalobject({ origin: computeorigin(options.url) });\r\n\r\n\tlet window = context.global;\r\n\r\n\tsetupwindow(window, vmcontext, globalproxy, options);\r\n\treturn {\r\n\t\tnewglobalimpl: idlutils.implforwrapper(window),\r\n\t\tnewglobalobject: window\r\n\t}\r\n}\r\n```\r\n</details>\r\n\r\n## describe alternatives you've considered\r\n\r\n1. just replace the `windowimpl` instance.\r\n   <dl>\r\n   <dt>pros:<dd>\r\n\r\n   - simple to implement.\r\n\r\n   <dt>cons:<dd>\r\n\r\n   - keeps global properties from previous runs.\r\n\r\n   <dt>conclusion:<dd>\r\n\r\n   viable only for when `runscripts` isn't enabled, though it might be better to use option 3 even in this case.\r\n   </dl>\r\n\r\n2. use\u00e2\u00a0`reflect.deleteproperty` and\u00e2\u00a0`webidlwindow.setup` to\u00e2\u00a0try and\u00e2\u00a0reset as\u00e2\u00a0much of\u00e2\u00a0the\u00e2\u00a0`window` global\u00e2\u00a0object as\u00e2\u00a0possible (won't\u00e2\u00a0be\u00e2\u00a0able to\u00e2\u00a0delete non\u00e2\u20ac\u2018configurable\u00e2\u00a0properties, such\u00e2\u00a0as\u00e2\u00a0the\u00e2\u00a0`symbolprop` shown\u00e2\u00a0in the\u00e2\u00a0above\u00e2\u00a0example).\r\n   <dl>\r\n   <dt>pros:<dd>\r\n\r\n   - resets most of the global object.\r\n\r\n   <dt>cons:<dd>\r\n\r\n   - harder to implement.\r\n   - results in a global which is in a broken state.\r\n\r\n   <dt>conclusion:<dd>\r\n\r\n   i\u00e2\u20ac\u2122d rather implement alternative 3.\r\n   </dl>\r\n\r\n3. implement a\u00e2\u00a0custom `windowproxy` that\u00e2\u00a0makes all\u00e2\u00a0properties\u00e2\u00a0configurable, while\u00e2\u00a0keeping\u00e2\u00a0track of\u00e2\u00a0which\u00e2\u00a0ones should\u00e2\u00a0be\u00e2\u00a0treated as\u00e2\u00a0non-configurable.\r\n   <dl>\r\n   <dt>pros:<dd>\r\n\r\n   - supports fully re-setting the global object.\r\n\r\n   <dt>cons:<dd>\r\n\r\n   - hard to implement.\r\n   - not fully spec compliant.\r\n   - `with`\u00e2\u00a0and\u00e2\u00a0proxies are\u00e2\u00a0currently\u00e2\u00a0incompatible (<https://github.com/nodejs/node/issues/30985>), this\u00e2\u00a0can\u00e2\u00a0be worked\u00e2\u00a0around using\u00e2\u00a0`symbol.unscopables`.\r\n\r\n   <dt>conclusion:<dd>\r\n\r\n   i\u00e2\u20ac\u2122ll\u00e2\u00a0probably implement\u00e2\u00a0this after <https://github.com/jsdom/jsdom/pull/2835> is merged for\u00e2\u00a0**node**\u00e2\u00a0versions without\u00e2\u00a0<https://github.com/nodejs/node/pull/30709>.\r\n   </dl>"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nusing water.js (from the ocean shader example), there is a problem when entering webvr mode (tested with firefox + oculus rift and also with the chrome + webvr emulation). the mirror shader doesn\u00e2\u00b4t rotate in sync with the rest of the scene, and it\u00e2\u00b4s strechted. also, if you rotate the camera enough, the sphere on one side will be completely covered by the ocean shader, while the other sphere will be completely visible (like there was a unique ocean shared between boths cameras, i can\u00e2\u00b4t explain better).\r\n\r\n it looks like the whole reflection shader only reflects the original camera, but not the vr ones (notice the reflection in the middle, is the sphere you would see with vr disabled).\r\n\r\n![captura](https://user-images.githubusercontent.com/6510193/62423275-4f7b4c00-b6bf-11e9-9aee-25cbb4ba54d4.gif)\r\n\r\nthe problem seems to be in the **_scope.onbeforerender()_** function in water.js (commenting this code fixes the ocean size/position/rotation, but obviously there is no mirror shader on it (only a dark plane without any reflections).\r\n\r\n\r\n* [jsfiddle] (https://jsfiddle.net/spacorum/61oqycz7/)\r\n* [jsfiddle] (https://fiddle.jshell.net/spacorum/61oqycz7/show/)  \r\nfullscreen direct link to allow webvr emulation controls on chrome\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [x] r107\r\n\r\n##### browser\r\n\r\n- [ ] all of them\r\n- [x] chrome\r\n- [x] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [x] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\ngraphics card: nvidia geforce gtx 1070\r\nvr device: oculus rift on firefox (it can be replicated using chrome + webvr emulation)\r\n"}, {"classified_as": "bug", "text": "currently the flares are rendered in a special pass, the code being in the webglflarerenderer. it checks if the lensflares are visible by rendering a depth mask.\r\n\r\nhowever the depth mask shader does not handle the case of the logarithmic depth buffer, causing the flares to be hidden by objects behind them. \r\n\r\ni've started crafting solutions but didn't find something conclusive yet, opening this issue in case someone sees how to go for it."}, {"classified_as": "enhancement", "text": "[proof](https://www.youtube.com/watch?v=wbon6vwpnxq).\n\ni vaguely recall someone from team saying that using wireframe helper is preferred pattern, so maybe editor should follow that advice?\n"}, {"classified_as": "bug", "text": "related: https://github.com/microsoft/typescript/issues/14419\r\n\r\nsome third-party plugins that provide different apis form transformer: \r\n\r\nhttps://github.com/kimamula/ts-transformer-keys#how-to-use-the-custom-transformer\r\n\r\n```\r\n// rollup\r\n{ transformers: [service => ({\r\n  before: [ keystransformer(service.getprogram()) ],\r\n  after: []\r\n}\r\n\r\n// awesome-typescript-loader\r\ngetcustomtransformers: program => ({\r\n    before: [\r\n       keystransformer(program)\r\n    ]\r\n})\r\n```\r\n\r\n----\r\n\r\nso i raised this question: what parameters(ts.languageservice or ts.program ) do we need to pass to the third-party transformer?\r\n\r\ni want to design the [typescript-macros](https://github.com/xiaoxiangmoe/typescript-macros) api closer to the [transformer plugin api](https://github.com/microsoft/typescript/issues/16607) that typescript will provide in the future.\r\n\r\n\r\n\r\n---\r\n\r\nsome usage example for typescript-macros:\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/blob/master/examples/console-scope.tsmacro/readme.md\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/blob/master/examples/hooks.tsmacro/readme.md\r\n\r\nhttps://github.com/xiaoxiangmoe/typescript-macros/tree/master/examples/uppercase.tsmacro"}, {"classified_as": "enhancement", "text": "the `transparent` property of a `meshstandardnodematerial` gets set back to false after one frame when the property `needsupdate` is set to true. the opacity property when set to 0.7, and stays like that even after the update.\r\n\r\nthis makes it so that transparency is not supported when using the `meshstandardnodematerial`. unless i'm missing something? see this [jsfiddle](https://jsfiddle.net/b2chktel/).\r\n\r\ni would like to see this working \u00f0\u00ff\u02dc\u2039 "}, {"classified_as": "bug", "text": "##### description of the problem \r\nthe shadow of a partially transparent object should be brighter than that of a completely opaque object, but they're same dark in threejs.\r\n![tmp](https://cloud.githubusercontent.com/assets/18611035/22057097/2a296cc2-dd9e-11e6-907c-62ecd6fc47b5.png)\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r83\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [x] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [x] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\ngraphics card is gtx 1080.\r\n"}, {"classified_as": "enhancement", "text": "sending page to printer/pdf in firefox only outputs one page when using firefox. it prints as expected in chrome.\r\n\r\nanything within the form-inline tag doesn't print after the first page:\r\n\r\n```html\r\n<form class=\"form-inline\">\r\nblah blah blah for more than one page and it won't print\r\n</form>\r\n```\r\n\r\nhere is my plunker:  https://plnkr.co/edit/k4j1lx\r\n\r\nnow, if i add a d-block then it does print, but then it reverts the page to form-horizontal where the labels and inputs would be stacked instead of side by side (i don't demonstrate the stacking here, just the multi-page printing)\r\n\r\n```html\r\n<form class=\"form-inline d-block\">\r\nblah blah blah for more than one page\r\n</form>\r\n```\r\n\r\nhere is the sample plunker:  https://plnkr.co/edit/a3jfaj8cy6wfgyu0ozqj\r\n"}, {"classified_as": "bug", "text": "`applymatrix3` method of `bufferattribute` presumes that `itemsize` equals 3. this can be seen in the [bufferattribute source code on line  202](https://github.com/mrdoob/three.js/blob/master/src/core/bufferattribute.js#l202).\r\ni'm a newbie of three.js and maybe i miss something, but i think that's not always true.\r\nfor example, uvs in `shapebuffergeometry` have only 2 dimensions.\r\n\r\nthis led to some `nan` in the `bufferattribute`'s array after applying `applymatrix3`. maybe it's possible to do a check `itemsize` inside the function to handle this case. for instance, we can use something similar to `vector2`'s `applymatrix3` if `itemsize === 2`.\r\n\r\n[here's a sandbox](https://codesandbox.io/s/agitated-cannon-lr7u9?file=/src/index.js) that shows the problem and a simple function based on `vector2`.\r\n\r\n\r\nthree.js version: r117\r\nbrowser: all of them"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nadding a displacementmap to a meshphongmaterial without flatshading will offset the vertices correctly but will not correctly change the normals. the result is an object that has the right shape, but the wrong lighting.\r\n\r\n[fiddle demonstrating the problem](https://jsfiddle.net/mhebes/9soelcxj/55/) (be sure to minimize that getimage() base64 method, i couldn't get images to work on fiddle).\r\n\r\n##### three.js version\r\n\r\nr117\r\n\r\n##### browser\r\n\r\nchrome and edge at least\r\n\r\n##### os\r\n\r\nwindows at least\r\n"}, {"classified_as": "bug", "text": "go here and check menu on the lefthand side of your screen:\nhttp://threejs.org/docs/#reference\n\ncurrent ordering of the textures section:\ncubetextures\ncompressedtextures\ndatatexture\ntexture\n\ncompressedtexture should come before cubetexture for alphabetizing.\n"}, {"classified_as": "bug", "text": "in [ths](https://github.com/mrdoob/three.js/blob/dev/src/loaders/objectloader.js#l85) switch case the **planebuffergeometry** is missing. this result in an error because geometry.uuid is not defined, when loading a plain buffer geometry from json.\n"}, {"classified_as": "enhancement", "text": "placing the exact string of text shown in the example in the navbar-brand element causes the text to wrap to the next line in safari 8.0.3 and 7.1.3.\n\nexample http://www.bootply.com/vnpi3vqce8\n\nedit: updated example to use bootstrap 3.3.2.\n"}, {"classified_as": "bug", "text": "colladaloader.js [uses multimaterial](https://github.com/mrdoob/three.js/blob/5c2ebc708d61245c0fff40c19aee7d1dcd93e817/examples/js/loaders/colladaloader.js#l1180), which generates a deprecation warning every time i use it. should be an easy fix, i would be willing to submit a pr after the issue is validated. "}, {"classified_as": "bug", "text": "a line in a obj file is described as a bunch of vertices. lines then need to be be followed up by face declarations, otherwise they will be dropped here: https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/objloader.js#l626\n\nhowever, the code that parses lines starting with \"f\"  (https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/objloader.js#l484)  does not have any branch to match lines with the pattern \"f single_vertex\" and throws an error.\n\n```\nerror: unexpected face line: 'f 1'\nthree.objloader.prototype.parse()\n objloader.js:533\nthree.objloader.prototype.load/<()\n objloader.js:50\n.load/<()\n```\n\nhere is a minimal example\nobj file:\n\n```\nmtllib /melkor/d1/guenther/projects/threejs/obj/test3.mtl\n\nv 10 10 10\nv 20 20 20\nv 0 0 0 \nv 0 -51.2692 269.668\n\ng grp1\nusemtl mtl1\nl 1 2 3 4 \nf 1\nf 2\nf 3\nf 4\n```\n\nmtl file (but the problem is not related to any specific material)\n\n```\nnewmtl mtl1\nka 1 .5 1\nkd 1 .5 1\nks 1 .5 1\nns 1\ntr 0.4 illum 3\n```\n\npossibly related to #8443 \ncc: @jonnenauha @birgersp\n"}, {"classified_as": "bug", "text": "currently skeletal animation keys as passed to three.animation constructor are like this:\n\n``` javascript\n{\n   pos: [ , , ],\n   rot: [ , , , ],\n   scl: [ , , ],\n   time: \n};\n```\n\nthe problem is that it is required that both pos, rot and scl fields be present.\nthis is problematic depending on the animation.\nsuppose we have a bone animated like this:\nframe 1) set rotation, set position\nframe 2) interpolate rotation, interpolate position\nframe 3) set rotation, interpolate position\nframe 5) interpolate rotation, interpolate position\nframe 6) interpolate rotation, set position\nframe 7) interpolate rotation, interpolate position\nframe 8) set rotation, interpolate position\netc. etc.\nit is impossible to pass such animation to three, because some keys will have either rotation or position set and expect the other to be interpolated from values defined in a previous key.\n\nif a key is passed without the pos array, it will give errors of \"cannot read property '0' of undefined\" in three.js:29612.\n\nif a key is passed without the rot array, it will give errors of \"cannot read property 'x' of undefined\" in three.js:728.\n\nthis has become quite annoying as i am trying to correctly implement a loader for a format that allows keyframes to have only position or only rotation set.\n"}, {"classified_as": "enhancement", "text": "i'm a university teacher teaching crystallography. i have built a lot of crystal models in .wrl format exported from winxmorph and krystalshaper, two software of crystal morphology drawing. these files can be opened correctly by many pc software.\r\n\r\nrecently, i tried to share these models on web, so that my students could view them through the browser whatever using pc, phone or pad.\r\nthese .wrl files are much simpler than house.wrl, however, cannot be loaded by vrmlloader.\r\n\r\ni will be very appreciated if you can help me to solve the problem. it's very significant for me and my students.\r\n\r\nattachment is several entire files for testing.\r\n\r\nlook forward to your reply.\r\n\r\n\r\n[models for testing.zip](https://github.com/mrdoob/three.js/files/2597956/models.for.testing.zip)\r\n\r\n"}, {"classified_as": "bug", "text": "hey there - i ran the obj converter on a model and it's coming out full transparent (opacity 0.0) when the mtl file defines ka as 1.0 1.0 1.0\n\nthe mtl\n\n```\nnewmtl textured\nka 1.000 1.000 1.000\nkd 1.000 1.000 1.000\nks 0.000 0.000 0.000\nd 1.0\nillum 2\nmap_ka texture.jpg\nmap_kd texture.jpg\n```\n\nthe json. also note the obsolete `colorambient` and `mapambient` properties\n\n```\n{\n\n    \"metadata\" :\n    {\n        \"formatversion\" : 3.1,\n        \"sourcefile\"    : \"model.obj\",\n        \"generatedby\"   : \"objconverter\",\n        \"vertices\"      : 7818,\n        \"faces\"         : 5196,\n        \"normals\"       : 7818,\n        \"colors\"        : 0,\n        \"uvs\"           : 15588,\n        \"materials\"     : 1\n    },\n\n    \"scale\" : 1.000000,\n\n    \"materials\": [  {\n    \"dbgcolor\" : 15658734,\n    \"dbgindex\" : 0,\n    \"dbgname\" : \"textured\",\n    \"colorambient\" : [1.0, 1.0, 1.0],\n    \"colordiffuse\" : [1.0, 1.0, 1.0],\n    \"colorspecular\" : [0.0, 0.0, 0.0],\n    \"illumination\" : 2,\n    \"mapambient\" : \"texture.jpg\",\n    \"mapdiffuse\" : \"texture.jpg\",\n    \"opacity\" : 0.0,\n    \"transparent\" : true\n    }],\n```\n"}, {"classified_as": "bug", "text": "while working with the client files exported from jnetcad, i had this error:\r\n![screen shot 2018-01-03 at 20 00 27](https://user-images.githubusercontent.com/242577/34535042-fabbd0e2-f0c0-11e7-9119-bea8660eceb0.png)\r\n\r\nwhich was caused by following group:\r\n![screen shot 2018-01-03 at 19 59 38](https://user-images.githubusercontent.com/242577/34535067-0e7bb6b0-f0c1-11e7-9e86-6aa7e154ad72.png)\r\n\r\ni think 3js could easily create three.points for these, but if not, at least create dummy object3d and do not throw errors?\r\n  "}, {"classified_as": "bug", "text": "##### description of the problem\n\ni use a tool called oarconv which produces collada files with multiple `<polylist>` elements in one `<mesh>` refering to the same material. this works in colladaloader but in colladaloader2 there seems to be a design flaw that the return value of buildgeometry() is a group which is a map indexed by the material name and which contains just one three.mesh (or similar) object per material name, so when the function runs it overwrites the preceeding <polylist>'s representation with the succeding one.\n\ni am not totally convinced that this collada is within the specification but it seems logical that you can have multiple <polylist>s with the same material and these colladas load in blender and 3ds max and unity.\n\nas this is an architectural level issue i don't see a possibility for me to fix it, there is no easy patch that can be done. i was thinking about uniquifying the material name and duplicating the definition but that was too much of a hack for me to bear...\n\n[oar_house.txt](https://github.com/mrdoob/three.js/files/535814/oar_house.txt)\n\nattached .txt file is actually a dae file.\n##### three.js version\n- [x ] dev (also tried r74 but the code looks the same)\n- [ ] r81\n- [ ] ...\n##### browser\n- [x] all of them (obviously)\n- [ ] chrome\n- [ ] firefox\n- [ ] internet explorer\n##### os\n- [x] all of them\n- [ ] windows\n- [ ] linux\n- [ ] android\n- [ ] ios\n##### hardware requirements (graphics card, vr device, ...)\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\nsomeone would you please clean up `xloader` code?\r\ni think it's a bit too messed up to work among contributors.\r\n\r\n/cc @adrs2002 \r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [ ] r85\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n"}, {"classified_as": "enhancement", "text": "**revision**\nlatest dev - f1d6fc3a1decfaa89d976477b5de2c3ef17abd47\n\n**description**\npull request #3079 caused a nasty head-ache for me. \n\nit applies colladaunit to each object3d's scale recursively, making non top-level meshes quickly disappear from view for inch-based models.\n\ni guess it needs to be a bit smarter. in the least only apply to some root node.\n"}, {"classified_as": "enhancement", "text": "i just wanted to let you know that in the current build, the /gui/index.html example keeps throwing errors making it unusable. three.js is awesome though - thanks for the great library!\n"}, {"classified_as": "bug", "text": "there does not appear to be a way to put the repl in es module context.\r\n\r\nthe closest you'll get to it seems to be by running:\r\n\r\n1. `node --experimental-repl-await`\r\n2. `await import('./foo.mjs')`\r\n\r\ngive it a try and you'll see that evaluating `import.meta` throws this error:\r\n\r\n```console\r\nimport.meta\r\n       ^^^^\r\n\r\nuncaught syntaxerror: cannot use 'import.meta' outside a module\r\n```\r\n\r\ni'd like this issue to discuss whether or not this limitation is presently documented somewhere or should be illuminated in https://nodejs.org/api/esm.html or elsewhere.\r\n\r\nnote: this issue isn't about executing code with `--eval` using the `--input-type=module` flag."}, {"classified_as": "bug", "text": "i was loading an .obj with ~70k vertices, and it was taking ~20s to load the model. the slowness was being caused by `mergevertices` call here:\n\nhttps://github.com/mrdoob/three.js/blob/master/examples/js/loaders/objmtlloader.js#l101\n\ni commented it out just to see what would happen, and it took about ~1s to load the model and there was no visible change. any ideas?\n"}, {"classified_as": "bug", "text": "i took the sample code for the page provided here: http://getbootstrap.com/examples/carousel/\n\nthe slideshow is only resizing images to the horizontal dimension when making the view window smaller horizontally only.  this causes stretching or degradation of the image.  am i missing something or is this intended functionality?\n"}, {"classified_as": "bug", "text": "in google chrome, loading http://getbootstrap.com/examples/starter-template/\ngives a http 404 for http://getbootstrap.com/assets/js/jquery-1.10.2.min.map\n"}, {"classified_as": "enhancement", "text": "although they do so with < 1 probability, if you hit refresh few times this will be consistently reproduced. the exact effect is that example frame (canvas ?) gets larger by certain amount, then rendered image adjusts to only visible area, then the process repeats. [this is how it looks like, for example](https://www.youtube.com/watch?v=uewkxbrt3-o). i have seen \"viewport\" meta in half of examples, and tried to modify it wth extra parameters (initial-scale=1.0, maximum-scale=1.0) but it had no any effect whatsoever. now, you can say \"oh well, ios8 is still in beta\" and do nothing, or you can do something. i would do something, if i had any ideas apart from the one that did not work.\n"}, {"classified_as": "enhancement", "text": "setting opacity to 0 worked in r32, after updating to r35, setting to 0 becomes opaque like 1 (tried both basic & lambert materials).  hack of setting it to .00001 or so is needed.  \n"}, {"classified_as": "enhancement", "text": "there are some style in bootstrap 3.3.6:\ninput[type=\"range\"] {\ndisplay: block;\nwidth: 100%;\n}\n\nyou can see that controls in android player is based on input fields, timeline is based on input[type=\"range\"]. browser sets some values to width, which i cant determine for replace bootstrap styles by my own. \n![ckjuar3qu2o](https://cloud.githubusercontent.com/assets/5627329/12111800/c7de1734-b3a0-11e5-942c-503978314a86.jpg)\ncontrols looks good only when disable this style or preppend .form-group for it\n"}, {"classified_as": "bug", "text": ":+1: :pizza: :cake: :beer: :beers: :wine_glass: :curry: :sake: :fireworks: :rice_cracker: :100: \n"}, {"classified_as": "enhancement", "text": "there are two problems in gpuparticlesystem.js:\r\n\r\n1) spawnparticle method color option is not work as a valid rgb color. there is an error in sending a color to the shader.\r\n2) the dispose method is missing. therefore, a gpuparticlesystem memory is not cleared.\r\nthe dispose method should contain:\r\n```\r\nself.particleshadermat.dispose();\r\nself.particleshadergeo.dispose();\r\n```\r\n\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "to avoid bug reports like #8547 (and having been confused for a minute myself when accidentally forgetting to include jquery a couple times; chrome's built-in `$` in the debug console really doesn't help), i'd like to suggest including a tiny bit of js (in the combined `bootstrap.js` only) along the lines of:\n\n``` js\nif (!jquery) {\n    throw new error(\"bootstrap's javascript requires jquery, but jquery isn't loaded.\");\n}\n```\n\nto make the error perfectly clear and apparent.\n"}, {"classified_as": "bug", "text": "i found this article which explains how to solve the pixelating artefacts in derivative maps. in all honesty, it goes a bit over my head and i'm not sure if it can be implemented in glsl but i'm sharing here in case someone wants to give it a go.\n\nhttp://www.rorydriscoll.com/2012/01/11/derivative-maps/\n\ncurrent code:\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/shaderchunk/bumpmap_pars_fragment.glsl\nhttps://github.com/mrdoob/three.js/blob/master/src/renderers/shaders/shaderchunk/normalmap_pars_fragment.glsl\n"}, {"classified_as": "bug", "text": "at the moment even when `texture.generatemipmaps` is set to true mipmaps are not generated if [minfilter is set to nearestfilter or linearfilter](https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/webgltextures.js#l125). however when using the [shader_texture_lod](https://developer.mozilla.org/en-us/docs/web/api/ext_shader_texture_lod) extension to enable the `texture2dlodext` function in shaders (available by default in webgl2) it doesn't work as expected because mipmaps aren't available even if you've explicitly set `generatemipmaps = true`."}, {"classified_as": "enhancement", "text": "three.math.nextpoweroftwo(4.9) returns 4. i would expect it to return 8, unless it expects an integer argument.\n"}, {"classified_as": "enhancement", "text": "when a `directionallight` or a `spotlight` is exported, their targets are exported as individual `object3d`s. however, `objectloader` does not know about the light-target link between them so we end up loading a light with a new target plus an extra `object3d` from the original target.\n\nto reproduce the problem. [open the editor](http://threejs.org/editor/), create a spot light. wait few seconds, refresh. each time you refresh, a new `object3d` will be added to the scene.\n\ndo you have any ideas how to express the light-target relationship in the scene file? i think this would be a good use of uuid attribute suggested in #3371\n"}, {"classified_as": "bug", "text": "as reported in https://github.com/mrdoob/three.js/pull/12763#issuecomment-364320372, we're currently updating the video texture at 60 (or 90 in vr) fps.\r\n\r\nideally we'll only update the texture on the gpu in sync with the video framerate (usually 25-30). unfortunately the web platform does not provide any api for figuring out the framerate of a video so something like `videotexture.framerate = 25` is needed.\r\n\r\nit seemed easy enough so i tried to implement this (#13304) but i hit some browser bugs and i had to revert (#13305).\r\n\r\nit'll be good to investigate this a bit more and report bugs to browsers if needed."}, {"classified_as": "bug", "text": "hi,\n\nwhen trying to unmount my whole app, i got some error.\n\n> uncaught typeerror: cannot read property 'firstchild' of undefined \n> reactmount.js:606reactmount.findcomponentroot \n> reactmount.js:606reactmount.findreactnodebyid reactmount.js:552getnode \n> reactmount.js:128executedispatch eventpluginutils.js:109simpleeventplugin.executedispatch \n> simpleeventplugin.js:305foreacheventdispatch eventpluginutils.js:95executedispatchesinorder \n> eventpluginutils.js:119executedispatchesandrelease eventpluginhub.js:46foreachaccumulated \n> foreachaccumulated.js:25eventpluginhub.processeventqueue \n> eventpluginhub.js:251runeventqueueinbatch \n> reacteventemittermixin.js:18reacteventemittermixin.handletoplevel \n> reacteventemittermixin.js:44handletoplevelimpl reacteventlistener.js:80mixin.perform \n> transaction.js:134reactdefaultbatchingstrategy.batchedupdates \n> reactdefaultbatchingstrategy.js:66batchedupdates \n> reactupdates.js:109reacteventlistener.dispatchevent reacteventlistener.js:175\n\ni think it's not a big deal.\n\naccording to what i see with the debugger, it seems to be because a `syntheticmouseevent` is trying to get dispatched. and i guess the target has just been unmounted...\n\nnote that my use case looks like this:\n\n``` javascript\nvar hello = react.createclass({\n    render: function() {\n        return <div onclick={unmount}>hello {this.props.name}</div>;\n    }\n});\n```\n\nwhen using an `unmount` synchronous implementation, i get this error.\nwhen adding a settimeout 0 in the unmount code, i got no error. \n\ni could not reproduce this in a jsfiddle, but i guess it's probably because i don't really know how batching work in react.\n"}, {"classified_as": "bug", "text": "i load 3mf file \r\n```js\r\nvar loader2 = new threemfloader();\r\n                console.log(loader2);\r\n                loader2.load('./pile.3mf', function (object) {\r\n                    console.log(object.traverse);\r\n                    object.quaternion.setfromeuler(new three.euler(-math.pi / 2, 0, 0));\r\n                    //object.position.x = 0;\r\n                    //object.position.y = -250;\r\n                    //object.position.z = 0;\r\n                    scene.add(object);\r\n                    render();\r\n\r\n                });\r\n```\r\ndon't show 3md color and image"}, {"classified_as": "enhancement", "text": "the rpc commands `getreceivedbyaddress` and `getreceivedbylabel` do not return balance received as a mining reward (even after the 100 blocks maturing period).\r\ni would expect the command to return the full utxo balance on the address, including mining rewards, or the command documentation to clarify this is not returned.\r\n\r\ni wanted to first ask here whatever this is indeed the expected behavior of the command, and if so, if it would be appropriate to mention it in the documentation as the issue suggests.\r\nif this is either not the expected behavior, or is but should be documented, i would be happy to be assigned to this issue, otherwise, i think it will be fine to close this issue."}, {"classified_as": "bug", "text": "was having a world of trouble getting prop inheritance to work between a template and its instance (with the `class` prop specifically). turns out that having comments in the code breaks this behavior.\n\npresumably an issue of trying to apply them to the first node in the template's element tree, regardless of whether it is a commentnode.\n\n<script src=\"https://gist.github.com/efc-awebb/bc6b4bccc2d9c426f20f.js\"></script>\n"}, {"classified_as": "enhancement", "text": "- window7\n- chrome51\n- [jsbin example](http://jsbin.com/powape/edit?html,output)\n\nin form, when use `form-control` and `input-group`, sometimes when the `form-control` element width has number of decimal, it will large than the `input-group` element\n\n![qq 20160826151438](https://cloud.githubusercontent.com/assets/381860/17997233/e1dc9d7e-6b9f-11e6-8081-6e193c7adaa4.png)\n"}, {"classified_as": "bug", "text": "i've encountered a problem with the stl loader when i want to load a single stl file that contains multiple solids. below is an example in a three.js viewer and meshlab (2 cubes in a single stl file).\n\n![screen_shot_2015-07-21_at_11 23 27_720](https://cloud.githubusercontent.com/assets/1134120/8797614/dfbb593a-2f9c-11e5-87cc-396dad974246.png)\n![screen_shot_2015-07-21_at_11 23 16_720](https://cloud.githubusercontent.com/assets/1134120/8797615/dfd895ea-2f9c-11e5-90da-20b2f27b1612.png)\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nright now in `uniformutils.cloneuniforms` when a uniform is a three object, it properly clones it, and when it is an array of primitives, it properly slices it, but if the uniform is an array of three objects (say an array of vector3), it does not clone the individual objects.\r\n\r\nthere needs to be another check within the `} else if ( array.isarray( property ) ) {` condition that checks if the items in the array are three objects are just primitives. since they all must be the same type because of glsl restrictions, i suppose that only the first element needs to be checked.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r103\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nseems like the water shader does not support `logarithmicdepthbuffer`. not sure what to do there :/.\r\n\r\n##### three.js version\r\n\r\n- [x] r92\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n"}, {"classified_as": "enhancement", "text": "hello, new to the comunity, my first report, please bare with me.\r\n\r\ni am an artist who uses threejs editor as a means to configure my 3d assets, to export to some clients i work with.\r\nrecently, with the release of r109, the shader configurations in the  \"material\" tab lost a lot of properties like copy/paste , and is unnable to select or configure everything bellow the new field \"sheen\". \r\nthis happens in all my devices, and also in several web-browsers.\r\n\r\nhope this report helps, it caused me and the corporations i work a lot of trouble. thank you, have a nice day.\r\n"}, {"classified_as": "enhancement", "text": "the way we handle it currently, doesn't give us any _state_ handling, which is prone to issues.\r\n\r\ne.g. see: https://github.com/serverless/serverless/issues/6906#issuecomment-594323488\r\n\r\nit needs to be reconfigured with custom resources or similar mean"}, {"classified_as": "enhancement", "text": "trying to load a cross-origin image as a texture, i noticed in the code that there seems to be support for this, but it wasn't working. in particular, in `imageloader.load`, the line:\n\n``` javascript\n  if ( scope.crossorigin ) image.crossorigin = scope.crossorigin;\n```\n\nseems like it ought to set up a crossorigin request, since although `imageloader` has `this.crossorigin = null;`, `imageutils` has `crossorigin: 'anonymous', and in`loadtexture`, we copy over our`crossorigin` property into the loader we're about to use. however, adding the line:\n\n``` javascript\n    image.crossorigin = \"anonymous\";\n```\n\ndirectly after the conditional mentioned above makes cross-origin image loading work. i don't know why the condition isn't getting triggered, but it seems like the intended behaviour isn't happening here.\n\na little digging shows that in `loadtexture`, `this.crossorigin` is `undefined`: `this` must not be referring to the `imageutils` object in that context. hopefully this is something that's easy to fix?\n"}, {"classified_as": "bug", "text": "##### preface\n\nfollowing up on #8417.\n\nthis issue's purpose is to keep track of a problem that was identified during an attempt to refactor the `webglrenderer` in order to move away from treating render targets like special textures.\n##### the goal\n\nwebglrendertargets should not be used like textures. their `texture` property should be used instead.\n\n``` js\nmaterial.map = rendertarget.texture; // not material.map = rendertarget;\n```\n##### the first attempt\n\nwebglrenderer: e255f01f \nwebglprograms: ae22bc1f\nwebglrendertargetcube: dcfcd4dd\n##### description of the problem\n\nby dropping the special treatment for webglrendertargets, this [flipenvmap check](https://github.com/mrdoob/three.js/commit/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0l2019) and these cube render target checks: [1](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0l2518) | [2](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0l2564) become problematic.  \n\nwhen texture properties of materials are always `texture` instances, it's no longer possible to rely on `instanceof webglrendertargetcube`. the only way to know whether the texture at hand belongs to a `webglrendertargetcube` is an [ugly flag](https://github.com/mrdoob/three.js/commit/dcfcd4dd0ce6d172edbf0c80db171a14916b7872#diff-5d5b0d48c8d18c359a7d79a655ff731er12). furthermore, the `webglrendertargetcube` has a `texture` instance because it extends `webglrendertarget`. `cubetexture` is therefore not involved in these checks, so `instanceof three.cubetexture` is not an option.  \n\nshader texture uniforms are another problem, because they are updated every frame.\n\nproviding the user with [warnings](https://github.com/mrdoob/three.js/pull/8417/commits/e255f01fef932d02abf130c85ddd788ee997b19f#diff-c0e88b98497597a015ecf238e91ac3a0r2519) after checking for `instanceof three.webglrendertarget` shouldn't be done every frame, but i couldn't find a better place for this.\n\nany suggestions would be much appreciated. don't hesitate to make your own pr if you find a solid solution to the problem. \n##### three.js version\n- [x] dev\n- [ ] r75\n"}, {"classified_as": "enhancement", "text": "in uiwebview scroll events aren't fired. this has the effect of making affix look buggy as its position isnd't updated until after scroll is done.  to mitigate the effects of this, we could add a touchmove event listener to update the affix position when the user is scrolling via moving their finger.\n\n``` js\n    this.$target = $(this.options.target)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkposition, this))\n      .on('touchmove.bs.affix.data-api', $.proxy(this.checkposition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkpositionwitheventloop, this))\n\n```\n"}, {"classified_as": "enhancement", "text": "is there any reason segments_depth is left out of cube.js?\n\nrather trivial to put in, but will break the api slightly if done like this:\n\n<pre>\nvar cube = function ( width, height, depth, segments_width, segments_height, segments_depth, materials, flipped, sides ) {\n</pre>\n\n...\n<code>\n        if ( ( u == 'x' && v == 'y' ) || ( u == 'y' && v == 'x' ) ) {\n\n```\n        w = 'z';\n\n    } else if ( ( u == 'x' && v == 'z' ) || ( u == 'z' && v == 'x' ) ) {\n\n        w = 'y';\n        gridy = segments_depth || 1;\n\n    } else if ( ( u == 'z' && v == 'y' ) || ( u == 'y' && v == 'z' ) ) {\n\n        w = 'x';\n        gridx = segments_depth || 1;\n\n    }\n```\n\n</code>\n...\n\nmkkl.\n"}, {"classified_as": "enhancement", "text": "bootstrap 4 alpha-6. ubuntu 16.04 lts.\r\n\r\ni import bootstrap scss inside my entry point styles.scss this way:\r\n\r\n    // core variables and mixins\r\n    @import 'variables'; // overwrite bs vars\r\n    @import '../vendor/bootstrap/scss/bootstrap';\r\n\r\n    @import 'main';\r\n    @import 'navbar';`\r\n\r\ni use it in a django project using django-pipeline as assets manager. everything compiles as expected, using sass compiler. the problem is with the generated css.\r\n\r\nin firefox 50.1.0 comparing the css file generated and the css file interpreted (seen through firebug in the css tab) i can see these things:\r\n\r\ngenerated css:\r\n\r\n    .navbar-light .navbar-toggler {\r\n      border-color: rgba(0, 0, 0, 0.1); }\r\n    .navbar-light .navbar-toggler-icon {\r\n      background-image: url(\"data:image/svg+xml;charset=utf8,%3csvg viewbox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba(0, 0, 0, 0.5\")' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='m4 8h24m4 16h24m4 24h24'/%3e%3c/svg%3e\"); }\r\n    .navbar-light .navbar-text {\r\n    // etc....\r\n\r\nwhile in the interpreted css copied from firebug i see that the css gets truncated:\r\n\r\n    .navbar-light .navbar-toggler {\r\n        border-color: rgba(0, 0, 0, 0.1);\r\n    }\r\n    .navbar-light .navbar-toggler-icon {\r\n    }\r\n\r\nso the `.navbar-light .navbar-toggler-icon` brokes in some way the css interpretation.\r\n\r\nin chromium version 55.0.2883.87 built on ubuntu , running on ubuntu 16.04 (64-bit), in the developer toolbar i can see the css source, not truncated, but the result is the same.\r\n\r\n__which is the result?__\r\n\r\nthe result is that all css rules below that point are ignored.\r\n\r\nthe problem is caused by these 2 rules in bootstrap/_variables.scss:\r\n\r\n    $navbar-light-toggler-bg: str-replace(url(\"data:image/svg+xml;charset=utf8,%3csvg viewbox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='#{$navbar-light-color}' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='m4 8h24m4 16h24m4 24h24'/%3e%3c/svg%3e\"), \"#\", \"%23\") !default;\r\n\r\n    $navbar-light-toggler-bg: str-replace(url(\"data:image/svg+xml;charset=utf8,%3csvg viewbox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='#{$navbar-light-color}' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='m4 8h24m4 16h24m4 24h24'/%3e%3c/svg%3e\"), \"#\", \"%23\") !default;\r\n\r\ni solved it overwriting the two variables definitions in my variables.scss this way:\r\n\r\n    $navbar-inverse-toggler-bg: mycustomrule;\r\n    $navbar-light-toggler-bg: mycustomrule;`\r\n\r\nnow the rules below are correctly interpreted."}, {"classified_as": "bug", "text": "hi, really like the first and the last one\nhttps://github.com/lukehaas/css-loaders\ndemo :http://projects.lukehaas.me/css-loaders/\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\ncorrect loader:\r\n![image](https://user-images.githubusercontent.com/5865414/26924363-167b0e08-4c78-11e7-8d2f-bebdf6eff421.png)\r\n\r\nthree.js is wrong\r\n![image](https://user-images.githubusercontent.com/5865414/26924196-53ff173e-4c77-11e7-9735-774390fd31d3.png)\r\n\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r85\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "problem:\r\nthe requests i make from `https.request` do not send the `extension: status_request` in the client hello at the tls level. the resource i'm trying to reach is behind a waf that checks the integrity of the tls request. as a result, i am being firewalled and thus, cannot access the api.\r\n\r\nas seen on [this stack overflow topic](https://stackoverflow.com/questions/57436880/true-difference-between-httprequest-and-xmlhttprequest), the node request does not include `extension: status_request` as curl and firefox do.\r\nwith further research, i found this [wikipedia: ocsp_stapling](https://en.m.wikipedia.org/wiki/ocsp_stapling) article, in the `solution` section :\r\n> the tls client must explicitly include a certificate status request extension in its clienthello tls/ssl handshake message\r\n\r\nrequest with firefox : \r\n![image](https://user-images.githubusercontent.com/8834915/63751313-63296500-c8af-11e9-8236-ab92d93f3332.png)\r\nrequest with curl : \r\n![image](https://user-images.githubusercontent.com/8834915/63751348-76d4cb80-c8af-11e9-8e9c-ecb54835045f.png)\r\nrequest with node : \r\n![image](https://user-images.githubusercontent.com/8834915/63751365-805e3380-c8af-11e9-896c-abea64891545.png)\r\n\r\nthanks for reading me.\r\n"}, {"classified_as": "bug", "text": "i've noticed that gltf2loader is undergoing fairly rapid iteration. is there work in progress on supporting the new interpolation modes, most interestingly cubicspline? of all the improvements from gltf1 to gltf2, getting away from densely sampled animation transforms (and the resulting enormous model files) is perhaps the most exciting.\r\n\r\nif nobody else is working on this, we may end up taking a pass on it. \r\n"}, {"classified_as": "bug", "text": "the current three.sprite implementation has a number of issues.\n- sprites can't have their texture translated, that is you can't change uvs, so you can't use them for explosions or other effects\n- you can't translate the image of a sprite, that is, the center of the texture is aligned with the origin of the object and you can't move it horizontally or vertically\n- sprites can't be rotated independently, as rotation is set in their material. if you want to rotate sprites independently you must assign each one a different material, even if they share the same texture. i see no reason the rotation attribute couldn't and shouldn't be stored on the sprite structure instead of the spritematerial structure.\n- the buffergeometry in the sprite is make-believe and actually ignored, which is not only inefficient as it is also confusing as it implies you can rotate, translate and animate the sprite by changing it, but you can't\n\nthe last one is actually quite interesting.\nsee https://github.com/mrdoob/three.js/blob/master/src/objects/sprite.js#l12\nand https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/plugins/spriteplugin.js#l24\ni even tested this by commenting out the buffergeometry creation in three.sprite, and sprites continued working.\n\nmeanwhile i imagine the workaround is to use a mesh with a planegeometry and a .lookat(camera.position) in every loop in place of sprites if one needs the features mentioned above.\n\nfixing this issue i imagine is not terribly difficult.\n\nhere is my suggested plan:\n- move rotation from spritematerial to sprite (and take rotation from sprite instead of spritematerial in spriteplugin)\n- either add an uv array and a translation array to sprite, and use that in spriteplugin, or actually use the buffergeometry already in sprite\n- depending on the above, remove the buffergeometry from sprite\n"}, {"classified_as": "bug", "text": "**what would you like to be added**:\r\nthe 'successfully pulled image' event should contain the duration for image pulling.\r\n\r\n**why is this needed**:\r\ncurrently the success event is in this form:\r\n```\r\nmay 29 05:42:16 tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0 kubelet[1939]: i0529 05:42:16.850647    1939 event.go:278] event(v1.objectreference{kind:\"pod\", namespace:\"mirror-pod-with-grace-period-2630\", name:\"static-pod-0ed631f9-b5b7-4e9c-9a5b-0c2488388194-tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0\", uid:\"0040ad26cfbe654f03547eb96b474700\", apiversion:\"v1\", resourceversion:\"\", fieldpath:\"spec.containers{test}\"}): type: 'normal' reason: 'pulled' successfully pulled image \"docker.io/library/fedora:32\"\r\n```\r\nuser has to trace back to the corresponding event for the beginning of image pulling and calculate the duration him/herself:\r\n```\r\nmay 29 05:41:57 tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0 kubelet[1939]: i0529 05:41:57.765151    1939 event.go:278] event(v1.objectreference{kind:\"pod\", namespace:\"mirror-pod-with-grace-period-2630\", name:\"static-pod-0ed631f9-b5b7-4e9c-9a5b-0c2488388194-tmp-node-e2e-f9c7d938-cos-stable-81-12871-103-0\", uid:\"0040ad26cfbe654f03547eb96b474700\", apiversion:\"v1\", resourceversion:\"\", fieldpath:\"spec.containers{test}\"}): type: 'normal' reason: 'pulling' pulling image \"docker.io/library/fedora:32\"\r\n```"}, {"classified_as": "bug", "text": "is there a reason the gltfloader skips custom geometry attributes?\r\n\r\nhttps://github.com/mrdoob/three.js/blob/327c9dde64fcaae88dc4a5d48c4397886ca7ada9/examples/js/loaders/gltfloader.js#l2444\r\n\r\n"}, {"classified_as": "enhancement", "text": "```\n5648 case three.unsignedshorttype: return _gl.unsigned_int; break;\n```\n\nyou meant `three.unsignedinttype`?\n"}, {"classified_as": "enhancement", "text": "issue: when another dom element unrelated to the canvas starts with focus, a three.js application using orbitcontrols will fail to receive keyboard events. this wrecks both the native key bindings of orbitcontrols (the arrow keys) and also any user code that defines a keyboard event handler for use with the application.\n\npossible solutions: \n\n1) simply remove \"event.preventdefault()\" in onmousedown in orbitcontrols. this works for my application, at least. perhaps this is a bad choice for other applications.\n\n2) alternatively, explicitly grab focus for domelement in onmousedown the way that flycontrols does. inserting \"scope.domelement.focus();\" does it for me. in flycontrols, there is an additional check to make sure that domelement is not the document. i don't understand this check, but grabbing focus conditional on the check also works fine for me (domelement is the canvas for my application).\n\nsorry i can't give a more thorough description. event routing and element focus is frankly a bit mysterious to me still.\n"}, {"classified_as": "bug", "text": "<!-- \r\n\r\nhalf of all issues filed here are duplicates, answered in the faq, or not appropriate for the bug tracker. even if you think you've found a *bug*, please read the faq first, especially the common \"bugs\" that aren't bugs section!\r\n\r\nplease help us by doing the following steps before logging an issue:\r\n  * search: https://github.com/microsoft/typescript/search?type=issues\r\n  * read the faq: https://github.com/microsoft/typescript/wiki/faq\r\n\r\nplease fill in the *entire* template below.\r\n-->\r\n\r\n<!--\r\nplease try to reproduce the issue with the latest published version. it may have already been fixed.\r\nfor npm: `typescript@next`\r\nthis is also the 'nightly' version in the playground: http://www.typescriptlang.org/play/?ts=nightly\r\n-->\r\n**typescript version:**  3.9.0-beta\r\n\r\n<!-- search terms you tried before logging this (so others can find this issue more easily) -->\r\n**search terms:** recursive, recursive generic\r\n\r\n**code**\r\n\r\n```\r\ntype intersect<u extends any[], r = unknown> =\r\n    ((...u: u) => any) extends ((h: infer h, ...t: infer t) => any)\r\n        ? intersect<t, r & h>\r\n        : r\r\n\r\nconst value: intersect<[{a: number}, {b: number}]> = {\r\n    a: 1,\r\n    b: 2\r\n}\r\n```\r\n\r\n*note: the usual workaround of an immediately-indexed intermediate object type still works.*\r\n\r\n**expected behavior:** it to type check without warnings\r\n\r\n**actual behavior:**\r\n\r\n- at line 1: `type alias 'intersect' circularly references itself. (2456)`\r\n- at line 3: `type 'intersect' is not generic. (2315)`\r\n- at line 6: `type 'intersect' is not generic. (2315)`\r\n\r\n**playground link:** <!-- a link to a typescript playground \"share\" link which demonstrates this behavior --> [link](https://www.typescriptlang.org/play?ts=3.9.0-beta#code/c4twdgpgbakgdscanazhaxsapavshad0tgbmuobdoeabqf0aakajsgf4obxoaazghsa7nab87afbqpuabqyadis4aukdgcu7mvrcbcxmrjkalvqes4am2rqaek0xzg5qzyaqmtturrj0-wd8sajiajhybkysagr2in7+uqrm4ulo-haowfaabhqanpwqqvciqbjynadefkpwnac2aebial5mvu11js1irxrihfujlkoajawjxvaatoktqa)\r\n\r\n**related issues:** <!-- did you find other bugs that looked similar? -->\r\n\r\n- #37426 (root cause might be this)\r\n- #37344\r\n- probably about 25%-30% of all other recursive type issues.\r\n- my use case is basically solving #26058 in userland, and doing [this](https://stackoverflow.com/questions/50374908/transform-union-type-to-intersection-type/50375286#50375286) with `sometuple[number]` won't work because i don't want to recurse.\r\n"}, {"classified_as": "enhancement", "text": "as noted in #2598. setting the required percentage to zero disables the percentage check. but we also check for each file that there is space for the temp file. but if the temp file already exists this can fail. we should either skip if the temp file already exists or, at the very least, skip the check if the required space is set to zero.\n\n(apart from this scenario, there may be valid cases where the disk space check just plain doesn't give accurate results and we should let the user override it.)\n"}, {"classified_as": "enhancement", "text": "this is a container bug for issues caused by pr https://github.com/libuv/libuv/pull/2082. disparate reports but the root cause is the linked pr.\r\n\r\n#25856 \r\n#27869\r\n#28512\r\n#28882\r\n#28917\r\n\r\nfixing it turned out to be not so easy (https://github.com/libuv/libuv/pull/2313) and simply reverting trades one regression for another."}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nafter the replacement of `colladaloader` with `colladaloader2` (now named just `colladaloader`), it looks like the imported information has changed a little bit.\r\n\r\nheres a (condensed) snippet of my dae.\r\n```\r\n<library_nodes>\r\n  <node id=\"id3\" name=\"element_entry-door-handle\">\r\n    <node id=\"id47\" name=\"instance_3\">\r\n      </matrix>\r\n      <instance_node url=\"#id48\" />\r\n    </node>\r\n  </node>\r\n  <node id=\"id48\" name=\"anchor\">\r\n    </instance_geometry>\r\n  </node>\r\n</library_nodes>\r\n```\r\n\r\nthe behavior that i used to see was that the imported dae object would look like this:\r\n```\r\nscene.children[0] = [\r\n  {\r\n    name: 'element_entry-door-handle',\r\n    children: [\r\n      {\r\n        name: 'anchor'\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nnow it is looking like this:\r\n```\r\nscene.children[0] = [\r\n  {\r\n    name: 'instance_0',\r\n    children: [\r\n      {\r\n        name: 'instance_3'\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nis this the expected output? on one hand i see at as incorrect because of how `colladaloader` used to work, but on the other hand i see it as correct because it matches how the dae is represented.\r\n\r\ni am able to achieve what i need by doing a search through `library.nodes` and marrying the 'instance' up with its original definition and getting _that_ name.\r\n\r\nwould you accept a pr if i ensure that instance nodes are coming through with their definitions name rather than `'instance_0'`, `'instance_1'` etc?\r\n\r\ni'll work on putting together a jsfiddle and updating this issue once complete.\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [ ] r90\r\n- [x] r88\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\nafter commit b3cf1c73c279d7d9788d4a9735d17dcb7893b50c the outlinepass renders transparent backgrounds in black.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r88\r\n\r\n##### browser\r\n\r\n- [x] chrome latest\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [ ] all of them\r\n- [x] windows 10\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n##### hardware requirements (graphics card, vr device, ...)\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "<!--\r\nthank you for reporting a possible bug in node.js.\r\n\r\nplease fill in as much of the template below as you can.\r\n\r\nversion: output of `node -v`\r\nplatform: output of `uname -a` (unix), or version and 32 or 64-bit (windows)\r\nsubsystem: if known, please specify the affected core module name\r\n\r\nif possible, please provide code that demonstrates the problem, keeping it as\r\nsimple and free of external dependencies as you can.\r\n-->\r\n\r\n* **version**: 12.11.1\r\n* **platform**: windows 10\r\n* **subsystem**: es modules\r\n\r\nfrom https://github.com/eslint/eslint/pull/12333\r\n\r\nrepro https://github.com/mysticatea/import-cjs-issue\r\n\r\n### description\r\n\r\ni tried to import packages without import cache. from the document, it looks i should use query strings.\r\n\r\n```js\r\n    await import(\"x-esm\") //\u00e2\u2020\u2019 found as expected\r\n    await import(\"./node_modules/x-esm/index.js?q=0\") //\u00e2\u2020\u2019 found and `x-esm` re-ran as expected\r\n    await import(\"./node_modules/x-esm/index.js?q=1\") //\u00e2\u2020\u2019 found and `x-esm` re-ran as expected\r\n```\r\n\r\n`x-esm` is an es module package. it worked as expected.\r\n\r\n```js\r\n    const cjs = await import(\"x-cjs\") //\u00e2\u2020\u2019 found as expected\r\n    const cjs0 = await import(\"./node_modules/x-cjs/index.js?q=0\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n    const cjs1 = await import(\"./node_modules/x-cjs/index.js?q=1\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n    console.log(cjs === cjs0, cjs === cjs1, cjs0 === cjs1) //\u00e2\u2020\u2019 all are false but `x-cjs` didn't run three times\r\n```\r\n\r\n`x-cjs` is a cjs package. the result was odd. the `console.log()` in `x-cjs` package ran only one time, but the returned values are different for each query string.\r\n\r\ni found the entry of `x-cjs` in `require.cache`. however, the cache entry is odd as well. it's different from `require(\"x-cjs\")`, the entry doesn't have `parent` property and the `module.children` of `test.js` is still empty.\r\n\r\nanyway, i tried to remove the cache entry.\r\n\r\n```js\r\n    console.log(\"---- remove 'require.cache' ----\")\r\n    delete require.cache[require.resolve(\"x-cjs\")]\r\n    await import(\"x-cjs\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=0\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=1\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n    await import(\"./node_modules/x-cjs/index.js?q=2\") //\u00e2\u2020\u2019 found and `x-cjs` re-ran as expected\r\n    await import(\"./node_modules/x-cjs/index.js?q=3\") //\u00e2\u2020\u2019 found but `x-cjs` didn't re-run\r\n```\r\n\r\ncryptic. i guess this behavior is:\r\n\r\n- `import(cjs)` has cache apart from `require.cache`.\r\n- the `import(cjs)` cache is created from `require.cache`.\r\n- it runs cjs package only if `require.cache` entry was not found.\r\n- the `import(cjs)` cache is not removed even if `require.cache` entry deleted.\r\n\r\ntherefore, i have to do the following steps if i want to import packages without cache.\r\n\r\n1. find the main file of the package because i cannot put query strings to the package name.\r\n   ```js\r\n   const url = \"file:\" + require.resolve(packagename) + uniquequerystring;\r\n   ```\r\n1. import it.\r\n   ```js\r\n   const ret = await import(url);\r\n   ```\r\n1. delete `require.cache` entry.\r\n   ```js\r\n   delete require.cache[require.resolve(packagename)];\r\n   ```\r\n\r\n### questions\r\n\r\n1. is it intentional behavior that `import(cjs)` creates incomplete `require.cache` entries?\r\n1. if yes, is it intentional behavior that `import(cjs)` with query strings returns different objects for the same cjs package?\r\n\r\ni'm guessing that `import(cjs)` should not create any `require.cache` entries, and `import(cjs)` with query strings re-runs cjs packages as same as es packages."}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\nthe `checkintersection` function inside `mesh.checkintersection` method only checks the material.side, ignoring the fact that the material can be an array.\r\n\r\nthis prevents the raycaster from intersecting back faces when `material.side == doubleside` using a different material for each face\r\n\r\nhaving \r\n```\r\nmesh.material = [material1, material2, ...]\r\nmesh.material.side = three.doubleside;\r\n```\r\nsolves the issue but is not ideal.\r\n\r\n##### three.js version\r\n\r\n- [x] r85\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "##### description of the problem \r\n\r\n.onbeforerender doesn't work for three.sprite. it works fine with three.mesh, but nothing happens for sprites.\r\n\r\n##### three.js version\r\n\r\n- [ ] dev\r\n- [x] r83\r\n- [x] r82\r\n- [ ] ...\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n\r\n\r\n"}, {"classified_as": "bug", "text": "##### description of the problem\r\n\r\nwhen loading a scene, the background of the editor is not set to the background of the scene. this causes an issue when exporting because the scene's background will be overwritten to the editor's default gray.\r\n\r\n##### three.js version\r\n\r\n- [x] dev\r\n- [x] r103\r\n\r\n##### browser\r\n\r\n- [x] all of them\r\n- [ ] chrome\r\n- [ ] firefox\r\n- [ ] internet explorer\r\n\r\n##### os\r\n\r\n- [x] all of them\r\n- [ ] windows\r\n- [ ] macos\r\n- [ ] linux\r\n- [ ] android\r\n- [ ] ios\r\n"}, {"classified_as": "bug", "text": "currently, [svgloader](https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/svgloader.js) only returns the nodes.\r\n\r\ni hink it'll be a great improvement if the loader could convert svg nodes to `three.shape` which could then be used by `three.shapegeometry` or `three.extrudegeometry`. with that in place, adding `svg` support to the [editor](https://threejs.org/editor/) would make a few designers happy.\r\n\r\nwe happen to have some basic code already in [webgl_geometry_extrude_shapes2](https://rawgit.com/mrdoob/three.js/dev/examples/webgl_geometry_extrude_shapes2.html):\r\n\r\nhttps://github.com/mrdoob/three.js/blob/dev/examples/webgl_geometry_extrude_shapes2.html#l49-l389\r\n\r\nalso, for reference, @jonobr1 has been tackling this same issue for `two.js` for a while now:\r\n\r\nhttps://github.com/jonobr1/two.js/blob/dev/src/two.js#l798-l1475\r\n\r\n"}]